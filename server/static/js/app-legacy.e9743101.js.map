{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/game/shapes/text.ts","webpack:///./src/game/ui/selection/shapecontext.vue","webpack:///./src/App.vue?5b85","webpack:///./src/core/components/modals/prompt.vue?d33d","webpack:///./src/core/components/colorpicker.vue?4d88","webpack:///./src/game/game.vue","webpack:///./src/game/ui/menu/menu.vue?4fd1","webpack:///./src/game/api/socket.ts","webpack:///./src/assetManager/manager.vue?5633","webpack:///./src/game/ui/menu/asset_node.vue","webpack:///./src/game/ui/tools/selectcontext.vue?02dc","webpack:///./src/auth/login.vue","webpack:///./src/game/visibility/te/draw.ts","webpack:///./src/game/ui/tools/createtoken_modal.vue?ed6e","webpack:///./src/game/ui/tools/createtoken_modal.vue?3856","webpack:///./src/game/ui/tools/tool.vue?5b17","webpack:///./src/game/shapes/circulartoken.ts","webpack:///./src/assetManager/manager.vue?3cb9","webpack:///./src/assetManager/manager.vue?1f53","webpack:///./src/game/ui/annotation.ts","webpack:///./src/core/components/colorpicker.vue?8070","webpack:///./src/game/ui/menu/menu.vue","webpack:///./src/core/components/contextmenu.vue","webpack:///./src/game/ui/note.vue?49b7","webpack:///./src/auth/login.vue?c159","webpack:///./src/game/shapes/utils.ts","webpack:///./src/core/components/modals/confirm.vue?e6fb","webpack:///./src/game/shapes/shape.ts","webpack:///./src/core/components/modals/prompt.vue?d457","webpack:///./src/game/ui/note.vue?a34d","webpack:///./src/game/ui/note.vue?23aa","webpack:///./src/core/components/modals/modal.vue?33b9","webpack:///./src/game/ui/tools/select.vue?49f9","webpack:///./src/game/ui/tools/utils.ts","webpack:///./src/game/ui/note.vue?a508","webpack:///./src/game/api/utils.ts","webpack:///./src/game/ui/menu/asset_node.vue?f519","webpack:///./src/core/components/contextmenu.vue?f03a","webpack:///./src/core/components/contextmenu.vue?7efa","webpack:///./src/assetManager/store.ts","webpack:///./src/game/ui/selection/edit_dialog.vue?03e8","webpack:///./src/core/components/contextmenu.vue?50e1","webpack:///./src/game/ui/selection/shapecontext.vue?1cf6","webpack:///./src/game/ui/selection/selection_info.vue?321c","webpack:///./src/game/ui/selection/selection_info.vue?8aba","webpack:///./src/game/ui/tools/map.vue?284a","webpack:///./src/game/layers/grid.ts","webpack:///./src/store.ts","webpack:///./src/core/components/colorpicker.vue","webpack:///./src/App.vue?2e53","webpack:///./src/App.vue","webpack:///./src/game/layers/fow.ts","webpack:///./src/core/components/load.vue?18c2","webpack:///./src/game/shapes/circle.ts","webpack:///./src/game/ui/tools/map.vue?a3ab","webpack:///./src/core/components/load.vue","webpack:///./src/game/ui/tools/pan.ts","webpack:///./src/game/ui/tools/selectcontext.vue","webpack:///./src/core/utils.ts","webpack:///./src/assetManager/contextMenu.vue","webpack:///./src/game/visibility/te/triag.ts","webpack:///./src/game/ui/selection/edit_dialog.vue?391c","webpack:///./src/game/ui/selection/edit_dialog.vue?057b","webpack:///./src/game/ui/menu/asset_node.vue?1f27","webpack:///./src/game/ui/selection/shapecontext.vue?ab76","webpack:///./src/game/ui/selection/shapecontext.vue?3b0d","webpack:///./src/core/components/modals/modal.vue?44ae","webpack:///./src/assetManager/socket.ts","webpack:///./src/game/ui/tools/tools.vue?c96e","webpack:///./src/game/game.vue?5550","webpack:///./src/game/shapes/multiline.ts","webpack:///./src/core/components/colorpicker.vue?eaab","webpack:///./src/core/components/colorpicker.vue?8615","webpack:///./src/game/ui/tools/draw.vue","webpack:///./src/game/utils.ts","webpack:///./src/game/ui/tools/createtoken_modal.vue?d0df","webpack:///./src/game/ui/note.vue?f9bd","webpack:///./src/game/ui/initiative.vue?f4e1","webpack:///./src/game/ui/tools/draw.vue?b96d","webpack:///./src/game/shapes/line.ts","webpack:///./src/router.ts","webpack:///./src/game/ui/tools/tool.vue?d136","webpack:///./src/game/ui/tools/draw.vue?d046","webpack:///./src/game/ui/tools/draw.vue?57e4","webpack:///./src/game/ui/tools/tools.vue","webpack:///./src/game/ui/tools/tool.vue?8ce3","webpack:///./src/game/shapes/asset.ts","webpack:///./src/game/visibility/te/cdt.ts","webpack:///./src/game/ui/tools/draw.vue?1261","webpack:///./src/game/layers/manager.ts","webpack:///./src/game/ui/initiative.vue?c7e1","webpack:///./src/game/ui/tools/createtoken_modal.vue","webpack:///./src/game/visibility/bvh/node.ts","webpack:///./src/game/ui/tools/createtoken_modal.vue?f918","webpack:///./src/game/events/keyboard.ts","webpack:///./src/assetManager/manager.vue?433f","webpack:///./src/game/ui/tools/tools.vue?25b2","webpack:///./src/game/ui/selection/selection_info.vue?2310","webpack:///./src/core/components/modals/modal.vue?09d2","webpack:///./src/core/components/contextmenu.vue?a0a2","webpack:///./src/game/ui/selection/selection_info.vue?b9a9","webpack:///./src/core/components/modals/prompt.vue?4e1b","webpack:///./src/game/ui/menu/asset_node.vue?4088","webpack:///./src/game/ui/menu/asset_node.vue?fc27","webpack:///./src/core/components/load.vue?4ab2","webpack:///./src/core/components/load.vue?0f87","webpack:///./src/game/ui/tools/tools.vue?d74c","webpack:///./src/game/ui/tools/tools.vue?35df","webpack:///./src/game/ui/menu/menu.vue?8b23","webpack:///./src/game/shapes/boundingrect.ts","webpack:///./src/dashboard/main.vue?5e14","webpack:///./src/dashboard/main.vue?94d1","webpack:///./src/game/geom.ts","webpack:///./src/game/game.vue?5592","webpack:///./src/game/units.ts","webpack:///./src/game/ui/menu/menu.vue?ae57","webpack:///./src/core/components/colorpicker.vue?1682","webpack:///./src/game/ui/tools/selectcontext.vue?0020","webpack:///./src/game/ui/tools/selectcontext.vue?758c","webpack:///./src/game/visibility/te/tds.ts","webpack:///./src/game/visibility/bvh/bvh.ts","webpack:///./src/game/ui/selection/shapecontext.vue?6173","webpack:///./src/game/manager.ts","webpack:///./src/game/ui/initiative.vue?e806","webpack:///./src/game/ui/initiative.vue?ca6b","webpack:///./src/core/components/load.vue?8cd0","webpack:///./src/game/game.vue?9a3e","webpack:///./src/dashboard/main.vue?3f72","webpack:///./src/core/components/modals/confirm.vue","webpack:///./src/game/ui/selection/shapecontext.vue?aac0","webpack:///./src/assetManager/manager.vue?a11e","webpack:///./src/game/event-bus.ts","webpack:///./src/dashboard/main.vue?d5a9","webpack:///./src/game/shapes/rect.ts","webpack:///./src/game/ui/tools/selectcontext.vue?6f66","webpack:///./src/game/layers/fowplayers.ts","webpack:///./src/game/layers/layer.ts","webpack:///./src/game/ui/tools/select.vue?2a55","webpack:///./src/game/ui/tools/select.vue?b488","webpack:///./src/game/events/mouse.ts","webpack:///./src/game/ui/menu/asset_node.vue?be10","webpack:///./src/game/shapes/baserect.ts","webpack:///./src/game/ui/tools/select.vue","webpack:///./src/dashboard/main.vue","webpack:///./src/game/ui/tools/selectcontext.vue?d61f","webpack:///./src/auth/logout.ts","webpack:///./src/core/store.ts","webpack:///./src/main.ts","webpack:///./src/core/components/contextmenu.vue?f402","webpack:///./src/game/ui/menu/menu.vue?28ea","webpack:///./src/game/ui/menu/menu.vue?16da","webpack:///./src/invitation/invitation.ts","webpack:///./src/core/components/modals/prompt.vue","webpack:///./src/game/ui/tools/draw.vue?6d03","webpack:///./src/game/visibility/te/te.ts","webpack:///./src/auth/login.vue?5f02","webpack:///./src/game/ui/selection/edit_dialog.vue","webpack:///./src/game/settings.ts","webpack:///./src/auth/login.vue?283c","webpack:///./src/game/ui/tools/tool.vue?6323","webpack:///./src/game/ui/tools/tool.vue?f5ba","webpack:///./src/core/components/modals/modal.vue?1854","webpack:///./src/core/components/modals/modal.vue?e329","webpack:///./src/game/game.vue?d01c","webpack:///./src/game/ui/tools/ruler.ts","webpack:///./src/core/components/modals/modal.vue","webpack:///./src/game/visibility/te/pa.ts","webpack:///./src/game/ui/tools/createtoken_modal.vue?41c9","webpack:///./src/dashboard/main.vue?1359","webpack:///./src/auth/login.vue?12cd","webpack:///./src/auth/login.vue?7cce","webpack:///./src/game/ui/selection/edit_dialog.vue?9a84","webpack:///./src/game/game.vue?5ab9","webpack:///./src/game/game.vue?07bd","webpack:///./src/core/components/modals/confirm.vue?f9ee","webpack:///./src/game/ui/tools/map.vue","webpack:///./src/assetManager/contextMenu.vue?d089","webpack:///./src/assetManager/contextMenu.vue?b4b1","webpack:///./src/core/components/modals/confirm.vue?e141","webpack:///./src/core/components/modals/confirm.vue?be48","webpack:///./src/assetManager/contextMenu.vue?1b1b","webpack:///./src/game/ui/tools/select.vue?b7fd","webpack:///./src/assetManager/manager.vue","webpack:///./src/game/ui/tools/tools.vue?fa4a","webpack:///./src/game/ui/tools/tool.vue","webpack:///./src/core/components/modals/prompt.vue?0a11","webpack:///./src/core/components/modals/prompt.vue?36e2","webpack:///./src/game/ui/initiative.vue?36c8","webpack:///./src/game/ui/selection/selection_info.vue","webpack:///./src/game/store.ts","webpack:///./src/core/components/modals/confirm.vue?a22f","webpack:///./src/game/comm/conversion/aura.ts","webpack:///./src/assetManager/contextMenu.vue?1e9a","webpack:///./src/game/ui/note.vue","webpack:///./src/game/ui/initiative.vue","webpack:///./src/game/layers/utils.ts","webpack:///./src/game/ui/selection/edit_dialog.vue?3800","webpack:///./src/game/ui/tools/map.vue?7416","webpack:///./src/game/ui/tools/map.vue?9024","webpack:///./src/game/ui/selection/selection_info.vue?5d62","webpack:///./src/game/api/events.ts"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","installedChunks","push","Object","prototype","hasOwnProperty","call","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","app","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","boundingrect_1","shape_1","units_1","Text","Shape","[object Object]","position","text","font","angle","fillColour","strokeColour","uuid","super","this","type","assign","getBaseDict","points","refPoint","x","y","BoundingRect","ctx","draw","fillStyle","save","dest","g2l","translate","rotate","textAlign","getLines","map","line","fillText","restore","point","centerPoint","canvas","resizeDir","lines","lineHeight","widths","measureText","width","Math","max","split","allLines","maxWidth","targetLine","words","word","testLine","metrics","testWidth","__webpack_exports__","_shapecontext_vue_vue_type_template_id_7111f3f6_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_shapecontext_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","__WEBPACK_IMPORT_KEY__","_node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_3__","component","options","__file","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_App_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_App_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_prompt_vue_vue_type_style_index_0_id_0602c2e6_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_prompt_vue_vue_type_style_index_0_id_0602c2e6_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","tinycolor2_1","tslib_1","__importDefault","vue_1","vue_class_component_1","vue_color_1","vue_property_decorator_1","ColorPicker","default","display","left","top","transparent","$refs","chromePicker","val","rgba","a","setPosition","$nextTick","$children","$el","focus","newColor","toRgbString","$emit","color","rect","getBoundingClientRect","right","innerWidth","bottom","innerHeight","__decorate","Prop","String","components","chrome-picker","Chrome","_game_vue_vue_type_template_id_6d744362_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_game_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","_node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_4__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_menu_vue_vue_type_style_index_0_id_5ecfceea_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_menu_vue_vue_type_style_index_0_id_5ecfceea_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","socket_io_client_1","createConnection","route","socket","io","opts","query","params","creator","room","connect","location","protocol","host","autoConnect","contextMenu_vue_1","confirm_vue_1","prompt_vue_1","socket_1","store_1","utils_1","AssetManager","path","draggingSelection","folders","assetStore","files","selected","idMap","currentFolder","root","parentFolder","parent","undefined","firstSelectedFile","sel","file_hash","nextFolder","pop","clearSelected","emit","prompt","inode","target","isFile","indexOf","delete","event","shiftKey","inodes","start","end","ctrlKey","file","dataTransfer","setData","dropEffect","includes","classList","contains","add","remove","moveInode","upload","document","getElementById","click","fls","CHUNK_SIZE","uuidv4","slices","ceil","size","fr","FileReader","readAsArrayBuffer","min","onload","e","directory","totalSlices","Prompt","ConfirmDialog","AssetContextMenu","to","from","next","disconnect","_asset_node_vue_vue_type_template_id_62c91cd3_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_asset_node_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_selectcontext_vue_vue_type_style_index_0_id_44a31e42_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_selectcontext_vue_vue_type_style_index_0_id_44a31e42_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","_login_vue_vue_type_template_id_6bbf3b79_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_login_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","manager_1","tds_1","triag_1","drawPolygon","polygon","colour","dl","layerManager","getLayer","lineJoin","beginPath","strokeStyle","random","moveTo","g2lx","g2ly","lineTo","closePath","stroke","drawPolygonL","xx","local","yy","I","J","drl","constrained","drawPolygonT","tds","clear","logs","T","clearRect","ei","EdgeIterator","valid","collect","fromP","edge","first","vertices","ccw","second","toP","cw","Infinity","constraints","console","log","pos","triangles","isInfinite","po","arc","PI","fill","DP","DPL","DPT","render","_vm","_h","$createElement","_c","_self","attrs","visible","on","close","$event","scopedSlots","_u","fn","staticClass","draggable","dragstart","dragStart","dragend","dragEnd","_v","for","directives","rawName","expression","id","domProps","input","composing","update:color","borderColour","ref","height","submit","staticRenderFns","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_tool_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_tool_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default","tinycolor","__importStar","circle_1","CircularToken","Circle","center","radius","fromDict","textBaseline","xs","calcFontScale","g2lz","ys","transform","mostReadable","toHexString","gameStore","IS_DM","group","source","has_img","effects","index","dragover","preventDefault","moveDrag","drop","stopPropagation","stopDrag","_l","dir","_s","multiple","hidden","change","title","createDirectory","prepareUpload","dblclick","changeDirectory","dragleave","leaveDrag","staticStyle","font-size","_e","class","inode-selected","select","contextmenu","cm","open","startDrag","src","geom_1","rect_1","text_1","AnnotationManager","shown","origin","GlobalPoint","annotationText","annotationRect","Rect","layer","hasLayer","warn","addShape","l2g","LocalPoint","getMaxWidth","getMaxHeight","w","zoomFactor","h","invalidate","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_colorpicker_vue_vue_type_style_index_0_id_b4f2c0b0_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_colorpicker_vue_vue_type_style_index_0_id_b4f2c0b0_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","_menu_vue_vue_type_template_id_5ecfceea_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_menu_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","_contextmenu_vue_vue_type_template_id_256dde9c___WEBPACK_IMPORTED_MODULE_0__","_contextmenu_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_note_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_note_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_login_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_login_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","asset_1","circulartoken_1","line_1","multiline_1","createShapeFromDict","shape","dummy","UUIDMap","has","sh","type_","fill_colour","stroke_colour","circ","token","Line","x2","y2","line_width","multiline","MultiLine","asset","img","Image","startsWith","URL","pathname","Asset","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_confirm_vue_vue_type_style_index_0_id_1883e207_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_confirm_vue_vue_type_style_index_0_id_1883e207_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","aura_1","trackers","auras","owners","visionObstruction","movementObstruction","isToken","showHighlight","annotation","globalCompositeOperation","Map","skipLightUpdate","self","obstructionIndex","visionBlockers","changeBV","recalculateBV","forEach","au","ls","visionSources","findIndex","aura","visionSource","some","blocksMovement","movementblockers","ownedBy","ownedtokens","username","draw_operator","movement_obstruction","vision_obstruction","aurasToServer","is_token","JSON","stringify","aurasFromServer","parse","bbox","getBoundingBox","strokeRect","topLeft","dim","loc","innerRange","g2lr","gradient","createRadialGradient","tc","addColorStop","setAlpha","lastPath","sync","oldLayer","newLayer","shapes","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_prompt_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_prompt_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","note","mask","updateNote","$set","style","calcHeight","removeNote","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_modal_vue_vue_type_style_index_0_id_12ed61ba_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_modal_vue_vue_type_style_index_0_id_12ed61ba_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","selectcontext_vue_1","tool_vue_1","utils_2","utils_3","SelectOperations","SelectTool","showContextMenu","active","Noop","resizeDirection","deltaChanged","dragRay","Ray","Vector","selectionStartPoint","selectionHelper","mouse","getMouse","globalMouse","selectionStack","hit","selection","concat","corner","getCorner","getRef","Resize","Drag","localRefPoint","subtract","GroupSelect","endPoint","abs","og","direction","delta","multiply","ogDelta","calculateDelta","asDict","redraw","temporary","resize","bb","gm","inCorner","body","cursor","clearSelection","topRight","botLeft","useGrid","altKey","snapToGrid","resizeToGrid","$parent","shapecontext","selectcontext","SelectContext","done","ogSelBBox","newSelBBox","offset","refine","movementBlocker","blocker","blockerBBox","found","intersectsWithInner","ray","fromPoints","normalize","invDir","inverse","dirIsNegative","intersectP","bCenter","sCenter","ux","uy","dx","dot","dy","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_note_vue_vue_type_style_index_0_id_7a3669fd_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_note_vue_vue_type_style_index_0_id_7a3669fd_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","sendClientOptions","locationOptions","panX","panY","AssetNode","showImage","keys","filter","el","sort","alphSort","__files","b","toLowerCase","children","imageSource","querySelector","setDragImage","tabindex","blur","_t","vuex_module_decorators_1","AssetStore","VuexModule","Mutation","Module","dynamic","store","rootStore","namespaced","getModule","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_edit_dialog_vue_vue_type_style_index_0_id_078b3b76_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_edit_dialog_vue_vue_type_style_index_0_id_078b3b76_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_contextmenu_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_contextmenu_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","contextmenu_vue_1","ShapeContext","activeLayer","pageX","pageY","layers","selectable","playerEditable","moveLayer","getActiveLayer","moveShapeOrder","initiative","addInitiative","getInitiativeRepr","ContextMenu","openEditDialog","tracker","changeValue","maxvalue","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_map_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_map_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","layer_1","GridLayer","Layer","doClear","drawGrid","gs","gridSize","gridColour","lineWidth","vuex_1","use","Store","_colorpicker_vue_vue_type_template_id_b4f2c0b0_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_colorpicker_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","script","componentNormalizer","settings_1","FOWLayer","isVisionLayer","preFogShapes","idx","removeShape","Settings","skipLightFOW","originalOperation","dctx","drawAngleLines","drawFirstLightHit","fullFOW","lcenter","alm","light","find","auraLength","getUnitDistance","auraCircle","visibleInCanvas","lastArcAngle","Path2D","firstPoint","angleSteps","anglePoint","cos","sin","lightRay","hitResult","BV","intersect","fowLOS","drawImage","preShape","ogComposite","getFogColour","fillRect","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_load_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_load_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","pow","targetX","targetY","round","resizedir","diff","sqrt","baserect_1","MapTool","xCount","yCount","startPoint","clone","BaseRect","_load_vue_vue_type_template_id_ff095222___WEBPACK_IMPORTED_MODULE_0__","_load_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","_node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_2__","PanTool","panStart","distance","increasePanX","increasePanY","_selectcontext_vue_vue_type_template_id_44a31e42_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_selectcontext_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","main_1","replace","v","toString","capitalize","charAt","toUpperCase","getHTMLFont","element","parentElement","getComputedStyle","getPropertyValue","getHTMLTextWidth","fakeElement","createElement","appendChild","getContext","partition","arr","predicate","ret","Number","fontWidth","fixedEncodeURIComponent","str","encodeURIComponent","charCodeAt","OrderedMap","values","getComponent","activeComponent","_contextMenu_vue_vue_type_template_id_d4f084a4___WEBPACK_IMPORTED_MODULE_0__","_contextMenu_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","edgeInfo","va","vb","ec","EdgeCirculator","indv","indexV","ri","infinite","vi","orient","orientation","Sign","COLLINEAR","collinearBetween","q","cPQ","cQR","compare","EQUAL","SMALLER","LARGER","px","py","qx","qy","rx","ry","pqx","pqy","prx","pry","det","determinant","maxX","maxY","aprX","aprY","ZERO","eps","EPSILON","POSITIVE","NEGATIVE","a00","a01","a10","a11","hasInexactNegativeOrientation","sideOfOrientedCircle","perturb","sideOfOrientedCircleP","Error","p0","p1","p2","os","getOrientedSide","ON_ORIENTED_BOUNDARY","reverse","ON_NEGATIVE_SIDE","xyEqual","xySmaller","xyCompare","qpx","qpy","rpx","rpy","tpx","tpy","tqx","tqy","rqx","rqy","maxx","maxy","arpx","arpy","atqx","atqy","atpx","atpy","arqx","arqy","ON_POSITIVE_SIDE","segSegDoIntersectCrossing","p3","p4","LEFT_TURN","RIGHT_TURN","segSegDoIntersectContained","intersection","pa","pb","pc","pd","getIntersectionType","intersectionType","IntersectionType","POINT","NO_INTERSECTION","getLine","doIntersect","l1","l2","info","getIntersectionTypeLine","la","lb","denom","nom1","nom2","A1","A2","B1","B2","nextUp","MAX_VALUE","MIN_VALUE","ulp","grid-column","updateShape","grid-column-start","checked","setToken","Array","isArray","_i","$$a","$$el","$$c","$$v","$$i","setVisionBlocker","setMovementBlocker","owner","placeholder","updateOwner","removeOwner","modifiers","number","_n","$forceUpdate","opacity","removeTracker","updateAuraColour","updateAuraVisionSource","removeAura","updateAnnotation","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_asset_node_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_asset_node_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","getLayers","background-color","setLayer","moveToBack","moveToFront","getInitiativeWord","Modal","positioned","offsetX","offsetY","screenX","screenY","dragging","updatePosition","container","offsetWidth","offsetHeight","clientX","clientY","parseInt","Boolean","destination","href","setRoot","folder","child","set","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_tools_vue_vue_type_style_index_0_id_1fee50f5_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_tools_vue_vue_type_style_index_0_id_1fee50f5_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_game_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_game_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default","_points","minx","miny","lineCap","currentTarget","closePicker","z-index","updateColor","_draw_vue_vue_type_template_id_7abc7fe9_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_draw_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","opposite","fowColour","fowOpacity","colorpicker_vue_1","modal_vue_1","CreateTokenModal","updatePreview","newValue","oldValue","unitSize","Watch","color-picker","computed","mapState","NoteDialog","textarea","scrollHeight","then","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_initiative_vue_vue_type_style_index_0_id_ccaf03d6_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_initiative_vue_vue_type_style_index_0_id_ccaf03d6_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","DrawTool","brushHelper","shapeSelect","modeSelect","modes","brushSize","helperSize","onModeChange","fowLayer","normalLayer","setupBrush","onDeselect","onSelect","axios_1","vue_router_1","manager_vue_1","login_vue_1","logout_1","load_vue_1","main_vue_1","game_vue_1","invitation_1","router","base","routes","redirect","meta","auth","template","beforeEach","coreStore","initialized","matched","record","authenticated","response","setAuthenticated","setUsername","setInitialized","catch","error","Tool","detailRight","mid","detailArrow","$on","tool","onMouseDown","onMouseUp","onMouseMove","onContextMenu","--detailRight","--detailArrow","option-selected","max-width","_tools_vue_vue_type_template_id_1fee50f5_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_tools_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_tool_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_tool_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","topleft","CDT","TDS","insert","insertConstraintV","stack","markConstraint","intersectionInfo","findIntersectedFaces","triangulateHole","intersectedFaces","listAB","listBA","edges","triangulateHole2","propagatingFlipE","triangulateHalfHole","fl","neighbours","deleteTriangle","conflictBoundaries","iN","iT","iC","current","n1","n2","ind","ind1","ind2","mirrorIndex","v0","v1","v2","newlf","createTriangle","isConstrained","triangle","vaa","vbb","aa","lfc","LineFaceCirculator","lf","rf","indexT","unshift","previousFace","currentVertex","i1","i2","vcc","vdd","pi","BoundingBox","dilate","overlaps","removeConstrainedEdge","dimension","indf","locateInfo","locate","iLocate","insertb","lt","li","flipAround","propagatingFlip","depth","isFlipable","maxDepth","ni","flip","e1","e2","uid","eni","eI","edgeSet","lessEdge","indn","ed","tt","ii","u","t1","t2","t3","i3","t4","i4","insertInConstrainedEdge","LocateType","EDGE","insertc","updateConstraintsIncident","VERTEX","clearConstraintsIncident","updateConstraintsOpposite","c1","c2","fc","FaceCirculator","cwi","ccwi","insertFirst","finiteVertex","insertSecond","OUTSIDE_AFFINE_HULL","insertOutsideAffineHull","OUTSIDE_CONVEX_HULL","insertOutsideConvexHull","insertInEdge","FACE","insertInFace","insertDimUp","_infinite","conform","finiteEdge","COUNTERCLOCKWISE","insertOutsideConvexHull2","ccwlist","cwlist","prev","th","marchLocate1D","marchLocate2D","ff","iv","pqt","Triangle","leftFirst","o0","o1","o2","sum","nTurns","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_draw_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_draw_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","LayerManager","interval","drawLoop","requestAnimationFrame","addLayer","selectedLayer","globalAlpha","selectLayer","getSelection","image","getData","l2gx","l2gy","l2gz","lm","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_initiative_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_initiative_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","_createtoken_modal_vue_vue_type_template_id_66ccc134_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_createtoken_modal_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","BoundingNode","nPrimitives","LeafNode","firstPrimOffset","InteriorNode","union","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_createtoken_modal_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_createtoken_modal_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","event_bus_1","onKeyUp","HTMLInputElement","HTMLTextAreaElement","selectTool","EventBus","onKeyDown","keyCode","hasSelection","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_manager_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_manager_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default","shapecontext_vue_1","createtoken_modal_vue_1","draw_vue_1","map_vue_1","pan_1","select_vue_1","manager_2","ruler_1","Tools","currentTool","tools","dmTools","currentToolComponent","tagName","targetTool","button","buttons","annotations","gameManager","annotationManager","setActiveText","select-tool","pan-tool","draw-tool","ruler-tool","RulerTool","map-tool","shape-menu","createtoken-dialog","watch","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_selection_info_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_selection_info_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_modal_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_modal_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_contextmenu_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_contextmenu_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_selection_info_vue_vue_type_style_index_0_id_32cec914_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_selection_info_vue_vue_type_style_index_0_id_32cec914_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","question","answer","resolve","reject","Promise","toggle","mouseover","hash","mouseout","message","refInFor","tool-selected","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_menu_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_menu_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","botRight","vector","other","xmin","xmax","ymin","ymax","botright","dirIsNeg","txmin","getDiagCorner","txmax","tymin","tymax","tMax","sw","owned","joined","_m","createRoom","newSessionName","tag","getPointDistance","Point","vec","scale","maxT","vue_slider_component_1","lodash_1","initiative_vue_1","menu_vue_1","note_vue_1","selection_info_vue_1","tools_vue_1","keyboard_1","mouse_1","Game","ready","manager","updateZoom","newZoomValue","zoomLocation","addEventListener","setWidth","setHeight","throttle","scrollZoom","mousedown","mouseup","mousemove","mouseleave","confirm","dropAsset","tool-bar","selection-info","prompt-dialog","confirm-dialog","menu-bar","initiative-dialog","zoom-slider","note-dialog","obj","z","l2gr","asset_node_vue_1","MenuBar","settings","locations","setUseGrid","setFullFOW","setFOWOpacity","setLineOfSight","setUnitSize","setGridSize","setGridColour","setFOWColour","rulerColour","setRulerColour","nextElementSibling","newNote","openNote","setVisionMode","asset-node","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_colorpicker_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_colorpicker_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","bringPlayers","createToken","showInitiative","_INFINITE_VERTEX","LineFaceState","newPoint","INFINITE","_counter","vertex","Vertex","_point","_ri","Edge","_es","associatedEdge","increment","tr","UNDEFINED","_tr","ic","vt","vr","pqr","VERTEX_VERTEX","VERTEX_EDGE","EDGE_VERTEX","EDGE_EDGE","createVertex","addVertex","infiniteVertex","n0","trig","t0","i0","setAdjacency","deleteList","copy","neighbour","lfit","reorient","vCW","vCCW","tri","bl","bli","vv","g","x1","y1","dist","node_1","BoundingVolume","totalNodes","buildData","orderedPrims","nodes","_a","recursiveBuild","compact","node","createLeaf","centroidBbox","getMaxExtent","pMid","partitionedData","flattened","stopOnFirstHit","tMin","todoOffset","nodeNum","todo","secondChildOffset","flatten","myOffset","secondOffset","primitivesOffset","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_shapecontext_vue_vue_type_style_index_0_id_7111f3f6_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_shapecontext_vue_vue_type_style_index_0_id_7111f3f6_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","annotation_1","GameManager","selectedTool","oldShape","redrawInitiative","checkVisionSources","setMovementBlock","setIsToken","move","localPos","fakeSetData","disabled","$store","state","game","updateOrder","model","callback","actor","flex-direction","align-items","initiative-selected","currentActor","mouseenter","toggleHighlight","lazy","notAllowed","owns","syncInitiative","createEffect","getDefaultEffect","toggleOption","removeInitiative","effect","updateEffect","turns","roundCounter","setRound","setTurn","nextTurn","LoadComponent","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_game_vue_vue_type_style_index_1_id_6d744362_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_game_vue_vue_type_style_index_1_id_6d744362_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","registerHooks","Dashboard","vm","err","post","$router","_confirm_vue_vue_type_template_id_1883e207_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_confirm_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_shapecontext_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_shapecontext_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_manager_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_manager_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_main_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_main_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_selectcontext_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_selectcontext_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","te_1","FOWPlayersLayer","skipPlayerFOW","drctx","maxLength","tokenId","visionMode","computeVisibility","selectionColor","selectionWidth","invalidateLight","serverShape","lsI","lbI","mbI","anI","annotationIndex","ownedIndex","ogOP","drawAuras","destinationIndex","oldIdx","sign","deltaY","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_asset_node_vue_vue_type_style_index_0_id_62c91cd3_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_asset_node_vue_vue_type_style_index_0_id_62c91cd3_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","topright","botleft","coreVisible","mx","my","_select_vue_vue_type_template_id_0ed49b21___WEBPACK_IMPORTED_MODULE_0__","_select_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","_main_vue_vue_type_template_id_61eb1455_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_main_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","createtokendialog","Logout","CoreStore","init","App_vue_1","router_1","config","productionTip","devtools","performance","$mount","props","rm-list-dm","enter","rm","transition","settingsClick","overflow-y","overflow-x","assets","createNote","notes","step","readonly","invitationCode","changeVisionMode","text-decoration","changeLocation","createLocation","Initiative","code","sessionUrl","_prompt_vue_vue_type_template_id_0602c2e6_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_prompt_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_draw_vue_vue_type_style_index_0_id_7abc7fe9_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_draw_vue_vue_type_style_index_0_id_7abc7fe9_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","draw_1","pa_1","it","drawt","Q","rawOutput","PA_CDT","expandEdge","fh","nfh","nIndex","rIndex","lIndex","nvh","rvh","lvh","re","le","ro","lo","raySegIntersection","CLOCKWISE","denominator","ua","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_login_vue_vue_type_style_index_0_id_6bbf3b79_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_login_vue_vue_type_style_index_0_id_6bbf3b79_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","_edit_dialog_vue_vue_type_template_id_078b3b76_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_edit_dialog_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","tempFill","Login","password","$route","statusText","span","modal-mask","dialog-mask","dragOver","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_game_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_game_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","ruler","diffsign","xdiff","ydiff","label","atan2","xmid","ymid","_modal_vue_vue_type_template_id_12ed61ba_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_modal_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","cdt_1","triangulate","partial","cdt","insertConstraint","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_createtoken_modal_vue_vue_type_style_index_0_id_66ccc134_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_createtoken_modal_vue_vue_type_style_index_0_id_66ccc134_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_main_vue_vue_type_style_index_0_id_61eb1455_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_main_vue_vue_type_style_index_0_id_61eb1455_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","focusin","focusout","login","required","visibility","register","EditDialog","addEmpty","hadAnnotation","an","ownerIndex","layer-selected","dot-width","dot-height","tooltip-dir","tooltip","formatter","toFixed","slider-style","border-radius","bg-style","box-shadow","process-style","yes","no","ok","_map_vue_vue_type_template_id_f93438ce___WEBPACK_IMPORTED_MODULE_0__","_map_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","rename","deny","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_select_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_select_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","_manager_vue_vue_type_template_id_d1ce9748___WEBPACK_IMPORTED_MODULE_0__","_manager_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_tools_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_tools_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","_tool_vue_vue_type_template_id_1e034b42___WEBPACK_IMPORTED_MODULE_0__","_tool_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","keyup","_k","vuedraggable_1","getActor","$off","actorId","order","show","option","effectIndex","syncEffect","_selection_info_vue_vue_type_template_id_32cec914_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_selection_info_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","bvh_1","GameStore","selectedLayerIndex","boardInitialized","roomName","roomCreator","locationName","freeze","isDM","success","tries","oldLoc","newLoc","getGridLayer","increase","unit_size","gridLayer","use_grid","full_fow","fow_opacity","fow_los","actualNote","context","commit","Action","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_confirm_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_confirm_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","vision_source","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_contextMenu_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_contextMenu_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","_note_vue_vue_type_template_id_7a3669fd_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_note_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","_initiative_vue_vue_type_template_id_ccaf03d6_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_initiative_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","fow_1","fowplayers_1","grid_1","createLayer","layerInfo","zIndex","player_editable","setShapes","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_edit_dialog_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_edit_dialog_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","edit_dialog_vue_1","SelectionInfo","editDialog","ogValue","isNaN","edit-dialog","setRoomName","setRoomCreator","setInvitationCode","setDM","grid_colour","fow_colour","ruler_colour","setPanX","pan_x","setPanY","pan_y","setZoomFactor","zoom_factor","active_layer","setLocationName","setCenterPosition","setAssets","locationInfo","setLocations","innerHTML","resetLayerInfo","reset","setBoardInitialized","realShape"],"mappings":"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","file":"static/js/app-legacy.e9743101.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import { GlobalPoint, LocalPoint } from \"@/game/geom\";\nimport { BoundingRect } from \"@/game/shapes/boundingrect\";\nimport { Shape } from \"@/game/shapes/shape\";\nimport { g2l } from \"@/game/units\";\n\nexport class Text extends Shape {\n    type = \"text\";\n    text: string;\n    font: string;\n    angle: number;\n    constructor(\n        position: GlobalPoint,\n        text: string,\n        font: string,\n        angle?: number,\n        fillColour?: string,\n        strokeColour?: string,\n        uuid?: string,\n    ) {\n        super(position, fillColour, strokeColour, uuid);\n        this.text = text;\n        this.font = font;\n        this.angle = angle || 0;\n    }\n    asDict() {\n        return Object.assign(this.getBaseDict(), {\n            text: this.text,\n            font: this.font,\n            angle: this.angle,\n        });\n    }\n    get points() {\n        return [[this.refPoint.x, this.refPoint.y]];\n    }\n    getBoundingBox(): BoundingRect {\n        return new BoundingRect(this.refPoint, 5, 5); // TODO: fix this bounding box\n    }\n    draw(ctx: CanvasRenderingContext2D) {\n        super.draw(ctx);\n        ctx.font = this.font;\n        ctx.fillStyle = this.fillColour;\n        ctx.save();\n        const dest = g2l(this.refPoint);\n        ctx.translate(dest.x, dest.y);\n        ctx.rotate(this.angle);\n        ctx.textAlign = \"center\";\n        this.getLines(ctx).map(line => ctx.fillText(line.text, line.x, line.y));\n        ctx.restore();\n    }\n    contains(point: GlobalPoint): boolean {\n        return false; // TODO\n    }\n\n    center(): GlobalPoint;\n    center(centerPoint: GlobalPoint): void;\n    center(centerPoint?: GlobalPoint): GlobalPoint | void {} // TODO\n    getCorner(point: GlobalPoint): string | undefined {\n        return \"\";\n    } // TODO\n    visibleInCanvas(canvas: HTMLCanvasElement): boolean {\n        return true;\n    } // TODO\n    snapToGrid(): void {}\n    resizeToGrid(): void {}\n    resize(resizeDir: string, point: LocalPoint): void {}\n\n    getMaxHeight(ctx: CanvasRenderingContext2D) {\n        const lines = this.getLines(ctx);\n        const lineHeight = 30;\n        return lineHeight * lines.length;\n    }\n\n    getMaxWidth(ctx: CanvasRenderingContext2D) {\n        const lines = this.getLines(ctx);\n        const widths = lines.map(line => ctx.measureText(line.text).width);\n        return Math.max(...widths);\n    }\n\n    private getLines(ctx: CanvasRenderingContext2D) {\n        const lines = this.text.split(\"\\n\");\n        const allLines: { text: string; x: number; y: number }[] = [];\n        const maxWidth = ctx.canvas.width;\n        const lineHeight = 30;\n        const x = 0; // this.refPoint.x;\n        let y = 0; // this.refPoint.y;\n\n        for (const line of lines) {\n            let targetLine = \"\";\n            const words = line.split(\" \");\n            for (const word of words) {\n                const testLine = targetLine + word + \" \";\n                const metrics = ctx.measureText(testLine);\n                const testWidth = metrics.width;\n                if (testWidth > maxWidth) {\n                    ctx.fillText(targetLine, x, y);\n                    allLines.push({ text: targetLine, x, y });\n                    targetLine = word + \" \";\n                    y += lineHeight;\n                } else {\n                    targetLine = testLine;\n                }\n            }\n            allLines.push({ text: targetLine, x, y });\n            y += lineHeight;\n        }\n        return allLines;\n    }\n}\n","import { render, staticRenderFns } from \"./shapecontext.vue?vue&type=template&id=7111f3f6&scoped=true&\"\nimport script from \"./shapecontext.vue?vue&type=script&lang=ts&\"\nexport * from \"./shapecontext.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./shapecontext.vue?vue&type=style&index=0&id=7111f3f6&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7111f3f6\",\n  null\n  \n)\n\ncomponent.options.__file = \"shapecontext.vue\"\nexport default component.exports","import mod from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./prompt.vue?vue&type=style&index=0&id=0602c2e6&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./prompt.vue?vue&type=style&index=0&id=0602c2e6&scoped=true&lang=css&\"","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport tinycolor from \"tinycolor2\";\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\n\nimport { Chrome } from \"vue-color\";\nimport { Prop } from \"vue-property-decorator\";\n\n@Component<ColorPicker>({\n    components: {\n        \"chrome-picker\": Chrome,\n    },\n})\nexport default class ColorPicker extends Vue {\n    @Prop(String) color!: string;\n\n    display = false;\n    left = 0;\n    top = 0;\n    transparent = false;\n\n    mounted() {\n        this.transparent = (<any>this.$refs.chromePicker).val.rgba.a === 0;\n        this.setPosition();\n    }\n\n    open() {\n        if (this.display) return; // click on the picker itself\n        this.setPosition();\n        this.display = true;\n        this.$nextTick(() => this.$children[0].$el.focus());\n    }\n    updateColor(value: { rgba: { r: number; g: number; b: number; a: number } }) {\n        this.transparent = value.rgba.a === 0;\n        const newColor = tinycolor(value.rgba).toRgbString();\n        this.$emit(\"update:color\", newColor);\n        this.$emit(\"input\", newColor);\n    }\n    closePicker() {\n        this.display = false;\n        this.$emit(\"change\", this.color);\n    }\n    setPosition() {\n        const rect = this.$el.getBoundingClientRect();\n        // 224 is the width of the picker, 242 the height\n        if (rect.right + 224 > window.innerWidth) this.left = rect.left - 224;\n        else this.left = rect.right;\n        if (rect.bottom + 242 > window.innerHeight) this.top = rect.top - 242;\n        else this.top = rect.bottom;\n    }\n}\n","import { render, staticRenderFns } from \"./game.vue?vue&type=template&id=6d744362&scoped=true&\"\nimport script from \"./game.vue?vue&type=script&lang=ts&\"\nexport * from \"./game.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./game.vue?vue&type=style&index=0&lang=css&\"\nimport style1 from \"./game.vue?vue&type=style&index=1&id=6d744362&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6d744362\",\n  null\n  \n)\n\ncomponent.options.__file = \"game.vue\"\nexport default component.exports","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./menu.vue?vue&type=style&index=0&id=5ecfceea&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./menu.vue?vue&type=style&index=0&id=5ecfceea&scoped=true&lang=css&\"","import io from \"socket.io-client\";\nimport { Route } from \"vue-router\";\n\nexport const socket = io(location.protocol + \"//\" + location.host + \"/planarally\", { autoConnect: false });\n\nexport function createConnection(route: Route) {\n    socket.io.opts.query = `user=${route.params.creator}&room=${route.params.room}`;\n    socket.connect();\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\n\nimport AssetContextMenu from \"@/assetManager/contextMenu.vue\";\nimport ConfirmDialog from \"@/core/components/modals/confirm.vue\";\nimport Prompt from \"@/core/components/modals/prompt.vue\";\n\nimport { socket } from \"@/assetManager/socket\";\nimport { assetStore } from \"@/assetManager/store\";\nimport { Asset } from \"@/core/comm/types\";\nimport { uuidv4 } from \"@/core/utils\";\n\n@Component({\n    components: {\n        Prompt,\n        ConfirmDialog,\n        AssetContextMenu,\n    },\n    beforeRouteEnter(to, from, next) {\n        socket.connect();\n        next();\n    },\n    beforeRouteLeave(to, from, next) {\n        socket.disconnect();\n        next();\n    },\n})\nexport default class AssetManager extends Vue {\n    path: number[] = [];\n    draggingSelection = false;\n\n    get folders(): number[] {\n        return assetStore.folders;\n    }\n\n    get files(): number[] {\n        return assetStore.files;\n    }\n\n    get selected(): number[] {\n        return assetStore.selected;\n    }\n\n    get idMap() {\n        return assetStore.idMap;\n    }\n\n    get currentFolder(): number {\n        if (this.path.length) return this.path[this.path.length - 1];\n        return assetStore.root;\n    }\n    get parentFolder(): number {\n        let parent = this.path[this.path.length - 2];\n        if (parent === undefined) parent = assetStore.root;\n        return parent;\n    }\n    get firstSelectedFile(): Asset | null {\n        for (const sel of assetStore.selected) {\n            if (assetStore.idMap.get(sel)!.file_hash) {\n                return assetStore.idMap.get(sel)!;\n            }\n        }\n        return null;\n    }\n    changeDirectory(nextFolder: number) {\n        if (nextFolder < 0) this.path.pop();\n        else this.path.push(nextFolder);\n        assetStore.clearSelected();\n        socket.emit(\"Folder.Get\", this.currentFolder);\n    }\n    createDirectory() {\n        const name = window.prompt(\"New folder name\");\n        if (name !== null) {\n            socket.emit(\"Folder.Create\", { name, parent: this.currentFolder });\n        }\n    }\n    moveInode(inode: number, target: number) {\n        if (assetStore.isFile(inode)) assetStore.files.splice(assetStore.files.indexOf(inode), 1);\n        else assetStore.folders.splice(assetStore.folders.indexOf(inode), 1);\n        assetStore.idMap.delete(inode);\n        socket.emit(\"Inode.Move\", { inode, target });\n    }\n    select(event: MouseEvent, inode: number) {\n        if (event.shiftKey && assetStore.selected.length > 0) {\n            const inodes = [...assetStore.files, ...assetStore.folders];\n            const start = inodes.indexOf(assetStore.selected[assetStore.selected.length - 1]);\n            const end = inodes.indexOf(inode);\n            for (let i = start; i !== end; start < end ? i++ : i--) assetStore.selected.push(inodes[i]);\n            assetStore.selected.push(inodes[end]);\n        } else {\n            if (!event.ctrlKey) {\n                assetStore.clearSelected();\n            }\n            assetStore.selected.push(inode);\n        }\n    }\n    startDrag(event: DragEvent, file: number) {\n        if (event.dataTransfer === null) return;\n        event.dataTransfer.setData(\"Hack\", \"ittyHack\");\n        event.dataTransfer.dropEffect = \"move\";\n        if (!assetStore.selected.includes(file)) assetStore.selected.push(file);\n        this.draggingSelection = true;\n    }\n    moveDrag(event: DragEvent) {\n        if ((<HTMLElement>event.target).classList.contains(\"folder\"))\n            (<HTMLElement>event.target).classList.add(\"inode-selected\");\n    }\n    leaveDrag(event: DragEvent) {\n        if ((<HTMLElement>event.target).classList.contains(\"folder\"))\n            (<HTMLElement>event.target).classList.remove(\"inode-selected\");\n    }\n    stopDrag(event: DragEvent, target: number) {\n        (<HTMLElement>event.target).classList.remove(\"inode-selected\");\n        if (this.draggingSelection) {\n            if (\n                (target === assetStore.root || assetStore.folders.includes(target)) &&\n                !assetStore.selected.includes(target)\n            ) {\n                for (const inode of assetStore.selected) {\n                    this.moveInode(inode, target);\n                }\n            }\n            assetStore.clearSelected();\n        } else if (event.dataTransfer && event.dataTransfer.files.length > 0) {\n            this.upload(event.dataTransfer.files, target);\n        }\n        this.draggingSelection = false;\n    }\n    prepareUpload() {\n        document.getElementById(\"files\")!.click();\n    }\n    upload(fls?: FileList, target?: number) {\n        const files = (<HTMLInputElement>document.getElementById(\"files\")!).files;\n        if (fls === undefined) {\n            if (files) fls = files;\n            else return;\n        }\n        if (target === undefined) target = this.currentFolder;\n        const CHUNK_SIZE = 100000;\n        for (const file of fls) {\n            const uuid = uuidv4();\n            const slices = Math.ceil(file.size / CHUNK_SIZE);\n            for (let slice = 0; slice < slices; slice++) {\n                const fr = new FileReader();\n                fr.readAsArrayBuffer(\n                    file.slice(\n                        slice * CHUNK_SIZE,\n                        slice * CHUNK_SIZE + Math.min(CHUNK_SIZE, file.size - slice * CHUNK_SIZE),\n                    ),\n                );\n                fr.onload = e => {\n                    socket.emit(\"Asset.Upload\", {\n                        name: file.name,\n                        directory: target,\n                        data: fr.result,\n                        slice,\n                        totalSlices: slices,\n                        uuid,\n                    });\n                };\n            }\n        }\n    }\n}\n","import { render, staticRenderFns } from \"./asset_node.vue?vue&type=template&id=62c91cd3&scoped=true&\"\nimport script from \"./asset_node.vue?vue&type=script&lang=ts&\"\nexport * from \"./asset_node.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./asset_node.vue?vue&type=style&index=0&id=62c91cd3&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"62c91cd3\",\n  null\n  \n)\n\ncomponent.options.__file = \"asset_node.vue\"\nexport default component.exports","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./selectcontext.vue?vue&type=style&index=0&id=44a31e42&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./selectcontext.vue?vue&type=style&index=0&id=44a31e42&scoped=true&lang=css&\"","import { render, staticRenderFns } from \"./login.vue?vue&type=template&id=6bbf3b79&scoped=true&\"\nimport script from \"./login.vue?vue&type=script&lang=ts&\"\nexport * from \"./login.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./login.vue?vue&type=style&index=0&id=6bbf3b79&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6bbf3b79\",\n  null\n  \n)\n\ncomponent.options.__file = \"login.vue\"\nexport default component.exports","import { layerManager } from \"@/game/layers/manager\";\nimport { g2lx, g2ly } from \"@/game/units\";\nimport { EdgeIterator, TDS } from \"./tds\";\nimport { ccw, cw } from \"./triag\";\n\nexport function drawPolygon(polygon: number[][], colour?: string) {\n    const dl = layerManager.getLayer(\"draw\");\n    if (dl === undefined) return;\n    const ctx = dl.ctx;\n    ctx.lineJoin = \"round\";\n    // ctx.clearRect(0, 0, window.innerWidth, window.innerHeight);\n    ctx.lineJoin = \"round\";\n    ctx.beginPath();\n    ctx.strokeStyle =\n        colour === undefined ? `rgb(${Math.random() * 255}, ${Math.random() * 255}, ${Math.random() * 255})` : colour;\n    ctx.moveTo(g2lx(polygon[0][0]), g2ly(polygon[0][1]));\n    for (const point of polygon) {\n        ctx.lineTo(g2lx(point[0]), g2ly(point[1]));\n    }\n    ctx.closePath();\n    ctx.stroke();\n}\n\nexport function drawPolygonL(polygon: number[][], colour?: string) {\n    const dl = layerManager.getLayer(\"draw\");\n    if (dl === undefined) return;\n    const ctx = dl.ctx;\n    ctx.lineJoin = \"round\";\n    // ctx.clearRect(0, 0, window.innerWidth, window.innerHeight);\n    ctx.lineJoin = \"round\";\n    ctx.beginPath();\n    ctx.strokeStyle =\n        colour === undefined ? `rgb(${Math.random() * 255}, ${Math.random() * 255}, ${Math.random() * 255})` : colour;\n    ctx.moveTo(polygon[0][0], polygon[0][1]);\n    for (const point of polygon) {\n        ctx.lineTo(point[0], point[1]);\n    }\n    ctx.closePath();\n    ctx.stroke();\n}\n\nfunction x(xx: number, local: boolean) {\n    if (local) return xx;\n    else return g2lx(xx);\n}\n\nfunction y(yy: number, local: boolean) {\n    if (local) return yy;\n    else return g2ly(yy);\n}\n\nlet I = 0;\nlet J = 0;\n\nfunction drl(ctx: CanvasRenderingContext2D, from: number[], to: number[], constrained: boolean, local: boolean) {\n    // J++;\n    // if (constrained) {\n    //     I++;\n    //     console.log(\"*\", from, to);\n    // } else {\n    //     console.log(\" \", from, to);\n    // }\n    ctx.beginPath();\n    ctx.strokeStyle = constrained ? \"rgba(255, 0, 0, 0.30)\" : \"rgba(0, 0, 0, 0.30)\";\n    ctx.moveTo(x(from[0], local), y(from[1], local));\n    ctx.lineTo(x(to[0], local), y(to[1], local));\n    ctx.closePath();\n    ctx.stroke();\n}\n\nfunction drawPolygonT(tds: TDS, local = true, clear = true, logs: 0 | 1 | 2 = 0) {\n    I = 0;\n    J = 0;\n    let T = 0;\n    const dl = layerManager.getLayer(\"draw\");\n    if (dl === undefined) return;\n    const ctx = dl.ctx;\n    if (clear) ctx.clearRect(0, 0, 2000, 1000);\n    ctx.lineJoin = \"round\";\n    // ctx.clearRect(0, 0, window.innerWidth, window.innerHeight);\n    ctx.lineJoin = \"round\";\n    const ei = new EdgeIterator(tds);\n    while (ei.valid) {\n        ei.next();\n        ei.collect();\n    }\n    ei.collect();\n    do {\n        const fromP = ei.edge.first!.vertices[ccw(ei.edge.second)]!.point!;\n        const toP = ei.edge.first!.vertices[cw(ei.edge.second)]!.point!;\n        if (logs > 0) {\n            if (fromP[0] === -Infinity || toP[0] === -Infinity) {\n                ei.next();\n                continue;\n            }\n            J++;\n            if (ei.edge.first!.constraints[ei.edge.second]) {\n                I++;\n                if (logs === 2) console.log(`Edge: (*) ${fromP} > ${toP}`);\n            } else if (logs === 2) console.log(`Edge: ${fromP} > ${toP}`);\n        }\n        do {\n            ei.next();\n            ei.collect();\n        } while (ei.valid);\n    } while (ei.pos !== null);\n    for (const t of tds.triangles) {\n        if (t.isInfinite()) continue;\n        T++;\n        const po = [];\n        ctx.fillStyle = \"red\";\n        if (t.vertices[0] !== undefined) {\n            po.push(t.vertices[0]!.point);\n            ctx.beginPath();\n            ctx.arc(x(t.vertices[0]!.point![0], local), y(t.vertices[0]!.point![1], local), 5, 0, 2 * Math.PI);\n            ctx.closePath();\n            ctx.fill();\n        }\n        if (t.vertices[1] !== undefined) {\n            po.push(t.vertices[1]!.point);\n            ctx.arc(x(t.vertices[1]!.point![0], local), y(t.vertices[1]!.point![1], local), 5, 0, 2 * Math.PI);\n            ctx.closePath();\n            ctx.fill();\n        }\n        if (t.vertices[2] !== undefined) {\n            po.push(t.vertices[2]!.point);\n            ctx.arc(x(t.vertices[2]!.point![0], local), y(t.vertices[2]!.point![1], local), 5, 0, 2 * Math.PI);\n            ctx.closePath();\n            ctx.fill();\n        }\n        if (logs === 2) console.log(\"[T] \", ...po, t.constraints);\n\n        ctx.moveTo(x(t.vertices[0]!.point![0], local), y(t.vertices[0]!.point![1], local));\n        if (t.vertices[0] !== undefined && t.vertices[1] !== undefined)\n            drl(ctx, t.vertices[0]!.point!, t.vertices[1]!.point!, t.constraints[2], local);\n        if (t.vertices[1] !== undefined && t.vertices[2] !== undefined)\n            drl(ctx, t.vertices[1]!.point!, t.vertices[2]!.point!, t.constraints[0], local);\n        if (t.vertices[2] !== undefined && t.vertices[0] !== undefined)\n            drl(ctx, t.vertices[2]!.point!, t.vertices[0]!.point!, t.constraints[1], local);\n    }\n    if (logs > 0) {\n        console.log(`Edges: ${I}/${J}`);\n        console.log(`Faces: ${T}`);\n    }\n}\n\n(<any>window).DP = drawPolygon;\n(<any>window).DPL = drawPolygonL;\n(<any>window).DPT = drawPolygonT;\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('modal',{attrs:{\"visible\":_vm.visible},on:{\"close\":function($event){_vm.visible = false}},scopedSlots:_vm._u([{key:\"header\",fn:function(m){return _c('div',{staticClass:\"modal-header\",attrs:{\"draggable\":\"true\"},on:{\"dragstart\":m.dragStart,\"dragend\":m.dragEnd}},[_vm._v(\"Create basic token\")])}}])},[_c('div',{staticClass:\"modal-body\"},[_c('label',{attrs:{\"for\":\"createtokendialog-text\"}},[_vm._v(\"Text\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.text),expression:\"text\"}],attrs:{\"type\":\"text\",\"id\":\"createtokendialog-name\"},domProps:{\"value\":(_vm.text)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.text=$event.target.value}}}),_c('label',[_vm._v(\"Colours\")]),_c('div',{staticClass:\"colours\"},[_c('span',[_vm._v(\"Fill:\")]),_c('color-picker',{attrs:{\"color\":_vm.fillColour},on:{\"update:color\":function($event){_vm.fillColour=$event}}}),_c('span',[_vm._v(\"Border:\")]),_c('color-picker',{attrs:{\"color\":_vm.borderColour},on:{\"update:color\":function($event){_vm.borderColour=$event}}})],1),_c('canvas',{ref:\"canvas\",attrs:{\"width\":\"100px\",\"height\":\"100px\"}})]),_c('div',{staticClass:\"modal-footer\"},[_c('button',{on:{\"click\":_vm.submit}},[_vm._v(\"Submit\")])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"74f43d04-vue-loader-template\\\"}!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./createtoken_modal.vue?vue&type=template&id=66ccc134&scoped=true&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tool.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tool.vue?vue&type=style&index=0&lang=css&\"","import * as tinycolor from \"tinycolor2\";\n\nimport { calcFontScale } from \"@/core/utils\";\nimport { InitiativeData } from \"@/game/comm/types/general\";\nimport { ServerCircularToken } from \"@/game/comm/types/shapes\";\nimport { GlobalPoint } from \"@/game/geom\";\nimport { Circle } from \"@/game/shapes/circle\";\nimport { gameStore } from \"@/game/store\";\nimport { g2l, g2lz } from \"@/game/units\";\n\nexport class CircularToken extends Circle {\n    type = \"circulartoken\";\n    text: string;\n    font: string;\n    constructor(\n        center: GlobalPoint,\n        r: number,\n        text: string,\n        font: string,\n        fillColour?: string,\n        strokeColour?: string,\n        uuid?: string,\n    ) {\n        super(center, r, fillColour, strokeColour, uuid);\n        this.text = text;\n        this.font = font;\n    }\n    asDict(): ServerCircularToken {\n        return Object.assign(this.getBaseDict(), {\n            radius: this.r,\n            text: this.text,\n            font: this.font,\n        });\n    }\n    fromDict(data: ServerCircularToken) {\n        super.fromDict(data);\n        this.r = data.radius;\n        this.text = data.text;\n        this.font = data.font;\n    }\n    draw(ctx: CanvasRenderingContext2D) {\n        super.draw(ctx);\n        ctx.font = this.font;\n        ctx.save();\n        const dest = g2l(this.center());\n        ctx.textAlign = \"center\";\n        ctx.textBaseline = \"middle\";\n        const xs = calcFontScale(ctx, this.text, g2lz(this.r), g2lz(this.r));\n        const ys = 0;\n        ctx.transform(xs, ys, -ys, xs, dest.x, dest.y);\n        ctx.fillStyle = tinycolor.mostReadable(this.fillColour, [\"#000\", \"#fff\"]).toHexString();\n        ctx.fillText(this.text, 0, 0);\n        ctx.restore();\n    }\n    getInitiativeRepr(): InitiativeData {\n        return {\n            uuid: this.uuid,\n            visible: !gameStore.IS_DM,\n            group: false,\n            source: this.name === \"\" || this.name === \"Unknown shape\" ? this.text : this.name,\n            has_img: false,\n            effects: [],\n            index: Infinity,\n        };\n    }\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"AssetManager\"}},[_c('div',{attrs:{\"id\":\"titlebar\"}},[_vm._v(\"Asset Manager\")]),_c('div',{attrs:{\"id\":\"main\"}},[_c('div',{attrs:{\"id\":\"assets\"},on:{\"dragover\":function($event){$event.preventDefault();return _vm.moveDrag($event)},\"drop\":function($event){$event.preventDefault();$event.stopPropagation();_vm.stopDrag($event, _vm.currentFolder)}}},[_c('div',{attrs:{\"id\":\"breadcrumbs\"}},[_c('div',[_vm._v(\"/\")]),_vm._l((_vm.path),function(dir){return _c('div',{key:dir},[_vm._v(_vm._s(_vm.idMap.get(dir).name))])})],2),_c('div',{attrs:{\"id\":\"actionbar\"}},[_c('input',{attrs:{\"id\":\"files\",\"type\":\"file\",\"multiple\":\"\",\"hidden\":\"\"},on:{\"change\":function($event){_vm.upload()}}}),_c('div',{attrs:{\"title\":\"Create folder\"},on:{\"click\":_vm.createDirectory}},[_c('i',{staticClass:\"fas fa-plus-square\"})]),_c('div',{attrs:{\"title\":\"Upload files\"},on:{\"click\":_vm.prepareUpload}},[_c('i',{staticClass:\"fas fa-upload\"})])]),_c('div',{attrs:{\"id\":\"explorer\"}},[(_vm.path.length)?_c('div',{staticClass:\"inode folder\",on:{\"dblclick\":function($event){_vm.changeDirectory(-1)},\"dragover\":function($event){$event.preventDefault();return _vm.moveDrag($event)},\"dragleave\":function($event){$event.preventDefault();return _vm.leaveDrag($event)},\"drop\":function($event){$event.preventDefault();$event.stopPropagation();_vm.stopDrag($event, _vm.parentFolder)}}},[_c('i',{staticClass:\"fas fa-folder\",staticStyle:{\"font-size\":\"50px\"}}),_c('div',{staticClass:\"title\"},[_vm._v(\"..\")])]):_vm._e(),_vm._l((_vm.folders),function(key){return _c('div',{key:key,staticClass:\"inode folder\",class:{'inode-selected': _vm.selected.includes(key)},attrs:{\"draggable\":\"true\"},on:{\"click\":function($event){_vm.select($event, key)},\"dblclick\":function($event){_vm.changeDirectory(key)},\"contextmenu\":function($event){$event.preventDefault();_vm.$refs.cm.open($event, key)},\"dragstart\":function($event){_vm.startDrag($event, key)},\"dragover\":function($event){$event.preventDefault();return _vm.moveDrag($event)},\"dragleave\":function($event){$event.preventDefault();return _vm.leaveDrag($event)},\"drop\":function($event){$event.preventDefault();$event.stopPropagation();_vm.stopDrag($event, key)}}},[_c('i',{staticClass:\"fas fa-folder\",staticStyle:{\"font-size\":\"50px\"}}),_c('div',{staticClass:\"title\"},[_vm._v(_vm._s(_vm.idMap.get(key).name))])])}),_vm._l((_vm.files),function(file){return _c('div',{key:file,staticClass:\"inode file\",class:{'inode-selected': _vm.selected.includes(file)},attrs:{\"draggable\":\"true\"},on:{\"click\":function($event){_vm.select($event, file)},\"contextmenu\":function($event){$event.preventDefault();_vm.$refs.cm.open($event, file)},\"dragstart\":function($event){_vm.startDrag($event, file)}}},[_c('img',{attrs:{\"src\":'/static/assets/' + _vm.idMap.get(file).file_hash,\"width\":\"50\"}}),_c('div',{staticClass:\"title\"},[_vm._v(_vm._s(_vm.idMap.get(file).name))])])})],2)]),(_vm.firstSelectedFile)?_c('div',{attrs:{\"id\":\"asset-details\"}},[_c('div',{attrs:{\"id\":\"asset-detail-title\"}},[_vm._v(_vm._s(_vm.firstSelectedFile.name))]),_c('img',{attrs:{\"src\":'/static/assets/' + _vm.firstSelectedFile.file_hash}})]):_vm._e()]),_c('AssetContextMenu',{ref:\"cm\"}),_c('Prompt',{ref:\"prompt\"}),_c('ConfirmDialog',{ref:\"confirm\"})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"74f43d04-vue-loader-template\\\"}!../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./manager.vue?vue&type=template&id=d1ce9748&\"","import { GlobalPoint, LocalPoint } from \"@/game/geom\";\nimport { Layer } from \"@/game/layers/layer\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { Rect } from \"@/game/shapes/rect\";\nimport { Text } from \"@/game/shapes/text\";\nimport { gameStore } from \"@/game/store\";\nimport { l2g } from \"@/game/units\";\n\nexport class AnnotationManager {\n    annotationText: Text;\n    annotationRect: Rect;\n    layer: Layer | undefined;\n    shown: boolean = false;\n\n    constructor() {\n        const origin = new GlobalPoint(0, 0);\n        this.annotationText = new Text(origin, \"\", \"bold 20px serif\", 0, \"rgba(230, 230, 230, 1)\");\n        this.annotationRect = new Rect(origin, 0, 0, \"rgba(0, 0, 0, 0.6)\");\n    }\n\n    setActiveText(text: string) {\n        if (this.layer === undefined) {\n            if (layerManager.hasLayer(\"draw\")) {\n                this.layer = layerManager.getLayer(\"draw\")!;\n                this.layer.addShape(this.annotationRect, false);\n                this.layer.addShape(this.annotationText, false);\n            } else {\n                console.warn(\"There is no draw layer to draw annotations on!\");\n                return;\n            }\n        }\n        this.shown = text !== \"\";\n        this.annotationText.refPoint = l2g(new LocalPoint(this.layer.canvas.width / 2, 50));\n        this.annotationText.text = text;\n        const width = this.shown ? this.annotationText.getMaxWidth(this.layer.ctx) + 10 : 0;\n        const height = this.shown ? this.annotationText.getMaxHeight(this.layer.ctx) + 10 : 0;\n        this.annotationRect.refPoint = l2g(new LocalPoint(this.layer.canvas.width / 2 - width / 2, 30));\n        this.annotationRect.w = width / gameStore.zoomFactor;\n        this.annotationRect.h = height / gameStore.zoomFactor;\n        this.layer.invalidate(true);\n    }\n}\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./colorpicker.vue?vue&type=style&index=0&id=b4f2c0b0&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./colorpicker.vue?vue&type=style&index=0&id=b4f2c0b0&scoped=true&lang=css&\"","import { render, staticRenderFns } from \"./menu.vue?vue&type=template&id=5ecfceea&scoped=true&\"\nimport script from \"./menu.vue?vue&type=script&lang=ts&\"\nexport * from \"./menu.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./menu.vue?vue&type=style&index=0&id=5ecfceea&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5ecfceea\",\n  null\n  \n)\n\ncomponent.options.__file = \"menu.vue\"\nexport default component.exports","import { render, staticRenderFns } from \"./contextmenu.vue?vue&type=template&id=256dde9c&\"\nimport script from \"./contextmenu.vue?vue&type=script&lang=ts&\"\nexport * from \"./contextmenu.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./contextmenu.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"contextmenu.vue\"\nexport default component.exports","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./note.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./note.vue?vue&type=script&lang=ts&\"","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--12-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./login.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--12-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./login.vue?vue&type=script&lang=ts&\"","import {\n    ServerAsset,\n    ServerCircle,\n    ServerCircularToken,\n    ServerLine,\n    ServerMultiLine,\n    ServerRect,\n    ServerShape,\n    ServerText,\n} from \"@/game/comm/types/shapes\";\nimport { GlobalPoint } from \"@/game/geom\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { Asset } from \"@/game/shapes/asset\";\nimport { Circle } from \"@/game/shapes/circle\";\nimport { CircularToken } from \"@/game/shapes/circulartoken\";\nimport { Line } from \"@/game/shapes/line\";\nimport { MultiLine } from \"@/game/shapes/multiline\";\nimport { Rect } from \"@/game/shapes/rect\";\nimport { Shape } from \"@/game/shapes/shape\";\nimport { Text } from \"@/game/shapes/text\";\n\nexport function createShapeFromDict(shape: ServerShape, dummy?: boolean) {\n    // TODO: is this dummy stuff actually needed, do we ever want to return the local shape?\n    if (dummy === undefined) dummy = false;\n    if (!dummy && layerManager.UUIDMap.has(shape.uuid)) return layerManager.UUIDMap.get(shape.uuid);\n\n    let sh: Shape;\n\n    // A fromJSON and toJSON on Shape would be cleaner but ts does not allow for static abstracts so yeah.\n\n    // Shape Type specifics\n\n    const refPoint = new GlobalPoint(shape.x, shape.y);\n    if (shape.type_ === \"rect\") {\n        const rect = <ServerRect>shape;\n        sh = new Rect(refPoint, rect.width, rect.height, rect.fill_colour, rect.stroke_colour, rect.uuid);\n    } else if (shape.type_ === \"circle\") {\n        const circ = <ServerCircle>shape;\n        sh = new Circle(refPoint, circ.radius, circ.fill_colour, circ.stroke_colour, circ.uuid);\n    } else if (shape.type_ === \"circulartoken\") {\n        const token = <ServerCircularToken>shape;\n        sh = new CircularToken(\n            refPoint,\n            token.radius,\n            token.text,\n            token.font,\n            token.fill_colour,\n            token.stroke_colour,\n            token.uuid,\n        );\n    } else if (shape.type_ === \"line\") {\n        const line = <ServerLine>shape;\n        sh = new Line(refPoint, new GlobalPoint(line.x2, line.y2), line.line_width, line.stroke_colour, line.uuid);\n    } else if (shape.type_ === \"multiline\") {\n        const multiline = <ServerMultiLine>shape;\n        sh = new MultiLine(\n            refPoint,\n            multiline.points.map(p => new GlobalPoint(p.x, p.y)),\n            multiline.line_width,\n            multiline.stroke_colour,\n            multiline.uuid,\n        );\n    } else if (shape.type_ === \"text\") {\n        const text = <ServerText>shape;\n        sh = new Text(refPoint, text.text, text.font, text.angle, text.fill_colour, text.stroke_colour, text.uuid);\n    } else if (shape.type_ === \"assetrect\") {\n        const asset = <ServerAsset>shape;\n        const img = new Image(asset.width, asset.height);\n        if (asset.src.startsWith(\"http\")) img.src = new URL(asset.src).pathname;\n        else img.src = asset.src;\n        sh = new Asset(img, refPoint, asset.width, asset.height, asset.uuid);\n        img.onload = () => {\n            layerManager.getLayer(shape.layer)!.invalidate(false);\n        };\n    } else {\n        return undefined;\n    }\n    sh.fromDict(shape);\n    return sh;\n}\n","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./confirm.vue?vue&type=style&index=0&id=1883e207&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./confirm.vue?vue&type=style&index=0&id=1883e207&scoped=true&lang=css&\"","import tinycolor from \"tinycolor2\";\n\nimport { uuidv4 } from \"@/core/utils\";\nimport { socket } from \"@/game/api/socket\";\nimport { aurasFromServer, aurasToServer } from \"@/game/comm/conversion/aura\";\nimport { InitiativeData } from \"@/game/comm/types/general\";\nimport { ServerShape } from \"@/game/comm/types/shapes\";\nimport { GlobalPoint, LocalPoint } from \"@/game/geom\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { BoundingRect } from \"@/game/shapes/boundingrect\";\nimport { gameStore } from \"@/game/store\";\nimport { g2l, g2lr, g2lx, g2ly, g2lz } from \"@/game/units\";\n\nexport abstract class Shape {\n    // Used to create class instance from server shape data\n    abstract type: string;\n    // The unique ID of this shape\n    uuid: string;\n    // The layer the shape is currently on\n    layer!: string;\n\n    // A reference point regarding that specific shape's structure\n    refPoint: GlobalPoint;\n\n    // Fill colour of the shape\n    fillColour: string = \"#000\";\n    strokeColour: string = \"rgba(0,0,0,0)\";\n    // The optional name associated with the shape\n    name = \"Unknown shape\";\n\n    // Associated trackers/auras/owners\n    trackers: Tracker[] = [];\n    auras: Aura[] = [];\n    owners: string[] = [];\n\n    // Block light sources\n    visionObstruction = false;\n    // Prevent shapes from overlapping with this shape\n    movementObstruction = false;\n    // Does this shape represent a playable token\n    isToken = false;\n    // Show a highlight box\n    showHighlight = false;\n\n    // Mouseover annotation\n    annotation: string = \"\";\n\n    // Draw modus to use\n    globalCompositeOperation: string = \"source-over\";\n\n    // Additional options for specialized uses\n    options: Map<string, any> = new Map();\n\n    constructor(refPoint: GlobalPoint, fillColour?: string, strokeColour?: string, uuid?: string) {\n        this.refPoint = refPoint;\n        this.uuid = uuid || uuidv4();\n        if (fillColour !== undefined) this.fillColour = fillColour;\n        if (strokeColour !== undefined) this.strokeColour = strokeColour;\n    }\n\n    abstract getBoundingBox(): BoundingRect;\n\n    // If inWorldCoord is\n    abstract contains(point: GlobalPoint): boolean;\n\n    abstract center(): GlobalPoint;\n    abstract center(centerPoint: GlobalPoint): void;\n    abstract getCorner(point: GlobalPoint): string | undefined;\n    visibleInCanvas(canvas: HTMLCanvasElement): boolean {\n        // for (const aura of this.auras) {\n        //     if (aura.value > 0) {\n        //         const auraCircle = new Circle(this.center(), aura.value);\n        //         if (auraCircle.visibleInCanvas(canvas)) return true;\n        //     }\n        // }\n        return false;\n    }\n\n    // Code to snap a shape to the grid\n    // This is shape dependent as the shape refPoints are shape specific in\n    abstract snapToGrid(): void;\n    abstract resizeToGrid(): void;\n    abstract resize(resizeDir: string, point: LocalPoint): void;\n\n    abstract get points(): number[][];\n\n    invalidate(skipLightUpdate: boolean) {\n        const l = layerManager.getLayer(this.layer);\n        if (l) l.invalidate(skipLightUpdate);\n    }\n\n    checkVisionSources() {\n        const self = this;\n        const obstructionIndex = gameStore.visionBlockers.indexOf(this.uuid);\n        let changeBV = false;\n        if (this.visionObstruction && obstructionIndex === -1) {\n            gameStore.visionBlockers.push(this.uuid);\n            changeBV = true;\n        } else if (!this.visionObstruction && obstructionIndex >= 0) {\n            gameStore.visionBlockers.splice(obstructionIndex, 1);\n            changeBV = true;\n        }\n        if (changeBV) gameStore.recalculateBV();\n\n        // Check if the visionsource auras are in the gameManager\n        this.auras.forEach(au => {\n            const ls = gameStore.visionSources;\n            const i = ls.findIndex(o => o.aura === au.uuid);\n            if (au.visionSource && i === -1) {\n                ls.push({ shape: self.uuid, aura: au.uuid });\n            } else if (!au.visionSource && i >= 0) {\n                ls.splice(i, 1);\n            }\n        });\n        // Check if anything in the gameManager referencing this shape is in fact still a visionsource\n        for (let i = gameStore.visionSources.length - 1; i >= 0; i--) {\n            const ls = gameStore.visionSources[i];\n            if (ls.shape === self.uuid) {\n                if (!self.auras.some(a => a.uuid === ls.aura && a.visionSource)) gameStore.visionSources.splice(i, 1);\n            }\n        }\n    }\n\n    setMovementBlock(blocksMovement: boolean) {\n        this.movementObstruction = blocksMovement || false;\n        const obstructionIndex = gameStore.movementblockers.indexOf(this.uuid);\n        if (this.movementObstruction && obstructionIndex === -1) gameStore.movementblockers.push(this.uuid);\n        else if (!this.movementObstruction && obstructionIndex >= 0)\n            gameStore.movementblockers.splice(obstructionIndex, 1);\n    }\n\n    setIsToken(isToken: boolean) {\n        this.isToken = isToken;\n        if (this.ownedBy()) {\n            const i = gameStore.ownedtokens.indexOf(this.uuid);\n            if (this.isToken && i === -1) gameStore.ownedtokens.push(this.uuid);\n            else if (!this.isToken && i >= 0) gameStore.ownedtokens.splice(i, 1);\n        }\n    }\n\n    ownedBy(username?: string) {\n        if (username === undefined) username = gameStore.username;\n        return gameStore.IS_DM || this.owners.includes(username);\n    }\n\n    abstract asDict(): ServerShape;\n    getBaseDict(): ServerShape {\n        return {\n            type_: this.type,\n            uuid: this.uuid,\n            x: this.refPoint.x,\n            y: this.refPoint.y,\n            layer: this.layer,\n            draw_operator: this.globalCompositeOperation,\n            movement_obstruction: this.movementObstruction,\n            vision_obstruction: this.visionObstruction,\n            auras: aurasToServer(this.auras),\n            trackers: this.trackers,\n            owners: this.owners,\n            fill_colour: this.fillColour,\n            stroke_colour: this.strokeColour,\n            name: this.name,\n            annotation: this.annotation,\n            is_token: this.isToken,\n            options: JSON.stringify([...this.options]),\n        };\n    }\n    fromDict(data: ServerShape) {\n        this.layer = data.layer;\n        this.globalCompositeOperation = data.draw_operator;\n        this.movementObstruction = data.movement_obstruction;\n        this.visionObstruction = data.vision_obstruction;\n        this.auras = aurasFromServer(data.auras);\n        this.trackers = data.trackers;\n        this.owners = data.owners;\n        this.isToken = data.is_token;\n        if (data.annotation) this.annotation = data.annotation;\n        if (data.name) this.name = data.name;\n        if (data.options) this.options = new Map(JSON.parse(data.options));\n    }\n\n    draw(ctx: CanvasRenderingContext2D) {\n        if (this.globalCompositeOperation !== undefined) ctx.globalCompositeOperation = this.globalCompositeOperation;\n        else ctx.globalCompositeOperation = \"source-over\";\n        if (this.showHighlight) {\n            const bbox = this.getBoundingBox();\n            ctx.strokeStyle = \"red\";\n            ctx.strokeRect(g2lx(bbox.topLeft.x) - 5, g2ly(bbox.topLeft.y) - 5, g2lz(bbox.w) + 10, g2lz(bbox.h) + 10);\n        }\n    }\n\n    drawAuras(ctx: CanvasRenderingContext2D) {\n        for (const aura of this.auras) {\n            if (aura.value === 0 && aura.dim === 0) return;\n            ctx.beginPath();\n\n            const loc = g2l(this.center());\n            const innerRange = g2lr(aura.value + aura.dim);\n\n            if (aura.dim === 0) ctx.fillStyle = aura.colour;\n            else {\n                const gradient = ctx.createRadialGradient(\n                    loc.x,\n                    loc.y,\n                    g2lr(aura.value),\n                    loc.x,\n                    loc.y,\n                    g2lr(aura.value + aura.dim),\n                );\n                const tc = tinycolor(aura.colour);\n                ctx.fillStyle = gradient;\n                gradient.addColorStop(0, aura.colour);\n                gradient.addColorStop(1, tc.setAlpha(0).toRgbString());\n            }\n            if (!aura.visionSource || aura.lastPath === undefined) {\n                ctx.arc(loc.x, loc.y, innerRange, 0, 2 * Math.PI);\n                ctx.fill();\n            } else {\n                try {\n                    ctx.fill(aura.lastPath);\n                } catch (e) {\n                    ctx.arc(loc.x, loc.y, innerRange, 0, 2 * Math.PI);\n                    ctx.fill();\n                    console.warn(e);\n                }\n            }\n        }\n    }\n\n    getInitiativeRepr(): InitiativeData {\n        return {\n            uuid: this.uuid,\n            visible: !gameStore.IS_DM,\n            group: false,\n            source: this.name,\n            has_img: false,\n            effects: [],\n            index: Infinity,\n        };\n    }\n\n    moveLayer(layer: string, sync: boolean) {\n        const oldLayer = layerManager.getLayer(this.layer);\n        const newLayer = layerManager.getLayer(layer);\n        if (oldLayer === undefined || newLayer === undefined) return;\n        this.layer = layer;\n        // Update layer shapes\n        oldLayer.shapes.splice(oldLayer.shapes.indexOf(this), 1);\n        newLayer.shapes.push(this);\n        // Revalidate layers  (light should at most be redone once)\n        oldLayer.invalidate(true);\n        newLayer.invalidate(false);\n        // Sync!\n        if (sync) socket.emit(\"Shape.Layer.Change\", { uuid: this.uuid, layer });\n    }\n}\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./prompt.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./prompt.vue?vue&type=script&lang=ts&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.note !== null)?_c('modal',{attrs:{\"visible\":_vm.visible,\"mask\":false},on:{\"close\":function($event){_vm.visible = false}},scopedSlots:_vm._u([{key:\"header\",fn:function(m){return _c('div',{staticClass:\"modal-header\",attrs:{\"draggable\":\"true\"},on:{\"dragstart\":m.dragStart,\"dragend\":m.dragEnd}},[_c('span',{on:{\"click\":function($event){_vm.$refs.title.select()}}},[_c('i',{staticClass:\"fas fa-pencil-alt\",staticStyle:{\"font-size\":\"15px\"}})]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.note.title),expression:\"note.title\"}],ref:\"title\",domProps:{\"value\":(_vm.note.title)},on:{\"change\":_vm.updateNote,\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.note, \"title\", $event.target.value)}}}),_c('div',{staticClass:\"header-close\",on:{\"click\":function($event){_vm.visible = false}}},[_c('i',{staticClass:\"far fa-window-close\"})])])}}])},[_c('div',{staticClass:\"modal-body\"},[_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.note.text),expression:\"note.text\"}],ref:\"textarea\",style:({'height': _vm.calcHeight()}),domProps:{\"value\":(_vm.note.text)},on:{\"change\":_vm.updateNote,\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.note, \"text\", $event.target.value)}}})]),_c('div',{staticClass:\"modal-footer\"},[_c('button',{on:{\"click\":_vm.removeNote}},[_c('i',{staticClass:\"far fa-trash-alt\"}),_vm._v(\" Remove\\n    \")])])]):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"74f43d04-vue-loader-template\\\"}!../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./note.vue?vue&type=template&id=7a3669fd&scoped=true&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./modal.vue?vue&type=style&index=0&id=12ed61ba&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./modal.vue?vue&type=style&index=0&id=12ed61ba&scoped=true&lang=css&\"","\n\n\n\n\nimport SelectContext from \"@/game/ui/tools/selectcontext.vue\";\nimport Tool from \"@/game/ui/tools/tool.vue\";\nimport SelectionInfo from \"../selection/selection_info.vue\";\n\nimport { getRef } from \"@/core/utils\";\nimport { socket } from \"@/game/api/socket\";\nimport { GlobalPoint, LocalPoint, Ray, Vector } from \"@/game/geom\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { Rect } from \"@/game/shapes/rect\";\nimport { gameStore } from \"@/game/store\";\nimport { calculateDelta } from \"@/game/ui/tools/utils\";\nimport { g2l, g2lx, g2ly, l2g } from \"@/game/units\";\nimport { getMouse } from \"@/game/utils\";\nimport Component from \"vue-class-component\";\n\nexport enum SelectOperations {\n    Noop,\n    Resize,\n    Drag,\n    GroupSelect,\n}\n\nconst start = new GlobalPoint(-1000, -1000);\n\n@Component({\n    components: {\n        SelectContext,\n    },\n})\nexport default class SelectTool extends Tool {\n    name = \"Select\";\n    showContextMenu = false;\n    active = false;\n\n    mode = SelectOperations.Noop;\n    resizeDirection = \"\";\n    deltaChanged = false;\n    // Because we never drag from the asset's (0, 0) coord and want a smoother drag experience\n    // we keep track of the actual offset within the asset.\n    dragRay = new Ray<LocalPoint>(new LocalPoint(0, 0), new Vector(0, 0));\n    selectionStartPoint = start;\n    selectionHelper = new Rect(start, 0, 0);\n    created() {\n        this.selectionHelper.globalCompositeOperation = \"source-over\";\n    }\n    onMouseDown(event: MouseEvent) {\n        const layer = layerManager.getLayer();\n        if (layer === undefined) {\n            console.log(\"No active layer!\");\n            return;\n        }\n\n        if (!this.selectionHelper.owners.includes(gameStore.username)) {\n            this.selectionHelper.owners.push(gameStore.username);\n        }\n\n        const mouse = getMouse(event);\n        const globalMouse = l2g(mouse);\n\n        let hit = false;\n        // The selectionStack allows for lower positioned objects that are selected to have precedence during overlap.\n        let selectionStack;\n        if (!layer.selection.length) selectionStack = layer.shapes;\n        else selectionStack = layer.shapes.concat(layer.selection);\n        for (let i = selectionStack.length - 1; i >= 0; i--) {\n            const shape = selectionStack[i];\n\n            if (!shape.ownedBy()) continue;\n\n            const corner = shape.getBoundingBox().getCorner(globalMouse);\n\n            // Resize case, a corner is selected\n            if (corner !== undefined) {\n                layer.selection = [shape];\n                getRef<SelectionInfo>(\"selectionInfo\").shape = shape;\n                this.mode = SelectOperations.Resize;\n                this.resizeDirection = corner;\n                layer.invalidate(true);\n                hit = true;\n                break;\n\n                // Drag case, a shape is selected\n            } else if (shape.contains(globalMouse)) {\n                const selection = shape;\n                if (layer.selection.indexOf(selection) === -1) {\n                    layer.selection = [selection];\n                    getRef<SelectionInfo>(\"selectionInfo\").shape = selection;\n                }\n                this.mode = SelectOperations.Drag;\n                const localRefPoint = g2l(selection.refPoint);\n                this.dragRay = new Ray<LocalPoint>(localRefPoint, mouse.subtract(localRefPoint));\n                layer.invalidate(true);\n                hit = true;\n                break;\n            }\n        }\n\n        // GroupSelect case, draw a selection box to select multiple shapes\n        if (!hit) {\n            this.mode = SelectOperations.GroupSelect;\n            for (const selection of layer.selection) getRef<SelectionInfo>(\"selectionInfo\").shape = selection;\n\n            this.selectionStartPoint = globalMouse;\n\n            this.selectionHelper.refPoint = this.selectionStartPoint;\n            this.selectionHelper.w = 0;\n            this.selectionHelper.h = 0;\n\n            layer.selection = [this.selectionHelper];\n            layer.invalidate(true);\n        }\n        this.active = true;\n    }\n    onMouseMove(event: MouseEvent) {\n        // if (!this.active) return;   we require mousemove for the resize cursor\n        const layer = layerManager.getLayer();\n        if (layer === undefined) {\n            console.log(\"No active layer!\");\n            return;\n        }\n        const mouse = getMouse(event);\n        const globalMouse = l2g(mouse);\n        this.deltaChanged = false;\n\n        if (this.mode === SelectOperations.GroupSelect) {\n            // Currently draw on active layer\n            const endPoint = globalMouse;\n\n            this.selectionHelper.w = Math.abs(endPoint.x - this.selectionStartPoint.x);\n            this.selectionHelper.h = Math.abs(endPoint.y - this.selectionStartPoint.y);\n            this.selectionHelper.refPoint = new GlobalPoint(\n                Math.min(this.selectionStartPoint.x, endPoint.x),\n                Math.min(this.selectionStartPoint.y, endPoint.y),\n            );\n            layer.invalidate(true);\n        } else if (layer.selection.length) {\n            const og = g2l(layer.selection[layer.selection.length - 1].refPoint);\n            const origin = og.add(this.dragRay.direction);\n            let delta = mouse.subtract(origin).multiply(1 / gameStore.zoomFactor);\n            const ogDelta = delta;\n            if (this.mode === SelectOperations.Drag) {\n                // If we are on the tokens layer do a movement block check.\n                if (layer.name === \"tokens\" && !(event.shiftKey && gameStore.IS_DM)) {\n                    for (const sel of layer.selection) {\n                        if (sel.uuid === this.selectionHelper.uuid) continue; // the selection helper should not be treated as a real shape.\n                        delta = calculateDelta(delta, sel);\n                        if (delta !== ogDelta) this.deltaChanged = true;\n                    }\n                }\n                // Actually apply the delta on all shapes\n                for (const sel of layer.selection) {\n                    sel.refPoint = sel.refPoint.add(delta);\n                    if (sel !== this.selectionHelper) {\n                        if (sel.visionObstruction) gameStore.recalculateBV(true);\n                        socket.emit(\"Shape.Update\", { shape: sel.asDict(), redraw: true, temporary: true });\n                    }\n                }\n                layer.invalidate(false);\n            } else if (this.mode === SelectOperations.Resize) {\n                for (const sel of layer.selection) {\n                    sel.resize(this.resizeDirection, mouse);\n                    if (sel !== this.selectionHelper) {\n                        if (sel.visionObstruction) gameStore.recalculateBV(true);\n                        socket.emit(\"Shape.Update\", { shape: sel.asDict(), redraw: true, temporary: true });\n                    }\n                    layer.invalidate(false);\n                }\n            } else {\n                for (const sel of layer.selection) {\n                    const bb = sel.getBoundingBox();\n                    const gm = globalMouse;\n                    if (bb.inCorner(gm, \"nw\")) {\n                        document.body.style.cursor = \"nw-resize\";\n                    } else if (bb.inCorner(gm, \"ne\")) {\n                        document.body.style.cursor = \"ne-resize\";\n                    } else if (bb.inCorner(gm, \"se\")) {\n                        document.body.style.cursor = \"se-resize\";\n                    } else if (bb.inCorner(gm, \"sw\")) {\n                        document.body.style.cursor = \"sw-resize\";\n                    } else {\n                        document.body.style.cursor = \"default\";\n                    }\n                }\n            }\n        } else {\n            document.body.style.cursor = \"default\";\n        }\n    }\n    onMouseUp(e: MouseEvent): void {\n        if (!this.active) return;\n        if (layerManager.getLayer() === undefined) {\n            console.log(\"No active layer!\");\n            return;\n        }\n        const layer = layerManager.getLayer()!;\n\n        if (this.mode === SelectOperations.GroupSelect) {\n            layer.clearSelection();\n            layer.shapes.forEach(shape => {\n                if (shape === this.selectionHelper) return;\n                const bbox = shape.getBoundingBox();\n                if (!shape.ownedBy()) return;\n                if (\n                    this.selectionHelper!.refPoint.x <= bbox.topRight.x &&\n                    this.selectionHelper!.refPoint.x + this.selectionHelper!.w >= bbox.topLeft.x &&\n                    this.selectionHelper!.refPoint.y <= bbox.botLeft.y &&\n                    this.selectionHelper!.refPoint.y + this.selectionHelper!.h >= bbox.topLeft.y\n                ) {\n                    layer.selection.push(shape);\n                }\n            });\n\n            // Push the selection helper as the last element of the selection\n            // This makes sure that it will be the first one to be hit in the hit detection onMouseDown\n            if (layer.selection.length > 0) layer.selection.push(this.selectionHelper);\n\n            layer.invalidate(true);\n        } else if (layer.selection.length) {\n            layer.selection.forEach(sel => {\n                if (this.mode === SelectOperations.Drag) {\n                    if (\n                        this.dragRay.origin!.x === g2lx(sel.refPoint.x) &&\n                        this.dragRay.origin!.y === g2ly(sel.refPoint.y)\n                    )\n                        return;\n\n                    if (gameStore.useGrid && !e.altKey && !this.deltaChanged) {\n                        sel.snapToGrid();\n                    }\n\n                    if (sel !== this.selectionHelper) {\n                        if (sel.visionObstruction) gameStore.recalculateBV();\n                        socket.emit(\"Shape.Update\", { shape: sel.asDict(), redraw: true, temporary: false });\n                    }\n                    layer.invalidate(false);\n                }\n                if (this.mode === SelectOperations.Resize) {\n                    if (gameStore.useGrid && !e.altKey) {\n                        sel.resizeToGrid();\n                    }\n                    if (sel !== this.selectionHelper) {\n                        if (sel.visionObstruction) gameStore.recalculateBV();\n                        socket.emit(\"Shape.Update\", { shape: sel.asDict(), redraw: true, temporary: false });\n                    }\n                    layer.invalidate(false);\n                }\n            });\n        }\n        this.mode = SelectOperations.Noop;\n        this.active = false;\n    }\n    onContextMenu(event: MouseEvent) {\n        if (layerManager.getLayer() === undefined) {\n            console.log(\"No active layer!\");\n            return;\n        }\n        const layer = layerManager.getLayer()!;\n        const mouse = getMouse(event);\n        const globalMouse = l2g(mouse);\n\n        for (const shape of layer.selection) {\n            if (shape.contains(globalMouse)) {\n                layer.selection = [shape];\n                getRef<SelectionInfo>(\"selectionInfo\").shape = shape;\n                layer.invalidate(true);\n                (<any>this.$parent.$refs.shapecontext).open(event, shape);\n                return;\n            }\n        }\n        (<any>this.$refs.selectcontext).open(event);\n    }\n}\n","import { Ray, Vector } from \"@/game/geom\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { Shape } from \"@/game/shapes/shape\";\nimport { gameStore } from \"@/game/store\";\n\n// First go through each shape in the selection and see if the delta has to be truncated due to movement blockers\n\n// This is definitely super convoluted and inefficient but I was tired and really wanted the smooth wall sliding collision stuff to work\n// And it does now, so hey \\_()_/\nexport function calculateDelta(delta: Vector, sel: Shape, done?: string[]) {\n    if (done === undefined) done = [];\n    const ogSelBBox = sel.getBoundingBox();\n    const newSelBBox = ogSelBBox.offset(delta);\n    let refine = false;\n    for (const movementBlocker of gameStore.movementblockers) {\n        if (done.includes(movementBlocker)) continue;\n        const blocker = layerManager.UUIDMap.get(movementBlocker)!;\n        const blockerBBox = blocker.getBoundingBox();\n        let found = blockerBBox.intersectsWithInner(newSelBBox);\n        if (!found) {\n            // This is an edge case, precalculating the rays is not worth in this case.\n            const ray = Ray.fromPoints(ogSelBBox.topLeft.add(delta.normalize()), newSelBBox.topLeft);\n            const invDir = ray.direction.inverse();\n            const dirIsNegative = [invDir.x < 0, invDir.y < 0];\n            found = blockerBBox.intersectP(ray, invDir, dirIsNegative).hit;\n        }\n        // Check if the bounding box of our destination would intersect with the bounding box of the movementblocker\n        if (found) {\n            const bCenter = blockerBBox.center();\n            const sCenter = ogSelBBox.center();\n\n            const d = sCenter.subtract(bCenter);\n            const ux = new Vector(1, 0);\n            const uy = new Vector(0, 1);\n            let dx = d.dot(ux);\n            let dy = d.dot(uy);\n            if (dx > blockerBBox.w / 2) dx = blockerBBox.w / 2;\n            if (dx < -blockerBBox.w / 2) dx = -blockerBBox.w / 2;\n            if (dy > blockerBBox.h / 2) dy = blockerBBox.h / 2;\n            if (dy < -blockerBBox.h / 2) dy = -blockerBBox.h / 2;\n\n            // Closest point / intersection point between the two bboxes.  Not the delta intersect!\n            const p = bCenter.add(ux.multiply(dx)).add(uy.multiply(dy));\n\n            if (p.x === ogSelBBox.topLeft.x || p.x === ogSelBBox.topRight.x) delta = new Vector(0, delta.y);\n            else if (p.y === ogSelBBox.topLeft.y || p.y === ogSelBBox.botLeft.y) delta = new Vector(delta.x, 0);\n            else {\n                if (p.x < ogSelBBox.topLeft.x) delta = new Vector(p.x - ogSelBBox.topLeft.x, delta.y);\n                else if (p.x > ogSelBBox.topRight.x) delta = new Vector(p.x - ogSelBBox.topRight.x, delta.y);\n                else if (p.y < ogSelBBox.topLeft.y) delta = new Vector(delta.x, p.y - ogSelBBox.topLeft.y);\n                else if (p.y > ogSelBBox.botLeft.y) delta = new Vector(delta.x, p.y - ogSelBBox.botLeft.y);\n            }\n            refine = true;\n            done.push(movementBlocker);\n            break;\n        }\n    }\n    if (refine) delta = calculateDelta(delta, sel, done);\n    return delta;\n}\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./note.vue?vue&type=style&index=0&id=7a3669fd&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./note.vue?vue&type=style&index=0&id=7a3669fd&scoped=true&lang=css&\"","import { socket } from \"@/game/api/socket\";\nimport { gameStore } from \"@/game/store\";\n\nexport function sendClientOptions() {\n    socket.emit(\"Client.Options.Set\", {\n        locationOptions: {\n            panX: gameStore.panX,\n            panY: gameStore.panY,\n            zoomFactor: gameStore.zoomFactor,\n        },\n    });\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\nimport { Prop } from \"vue-property-decorator\";\n\nimport { AssetFile, AssetList } from \"@/core/comm/types\";\nimport { alphSort } from \"@/core/utils\";\n\n@Component({\n    name: \"asset-node\",\n})\nexport default class AssetNode extends Vue {\n    @Prop() asset!: AssetList;\n\n    showImage = null;\n    get folders(): string[] {\n        return Object.keys(this.asset)\n            .filter(el => ![\"__files\"].includes(el))\n            .sort(alphSort);\n    }\n\n    get files(): AssetFile[] {\n        if (this.asset.__files)\n            return (<AssetFile[]>this.asset.__files)\n                .concat()\n                .sort((a, b) => (a.name.toLowerCase() > b.name.toLowerCase() ? 1 : -1));\n        return [];\n    }\n\n    toggle(event: { target: HTMLElement }) {\n        // tslint:disable-next-line:prefer-for-of\n        for (let i = 0; i < event.target.children.length; i++) {\n            const el = <HTMLElement>event.target.children[i];\n            el.style.display = el.style.display === \"\" ? \"block\" : \"\";\n        }\n    }\n\n    dragStart(event: DragEvent, imageSource: string) {\n        if (event === null || event.dataTransfer === null) return;\n        const img = (<HTMLElement>event.target).querySelector(\".preview\")!;\n        event.dataTransfer.setDragImage(img, 0, 0);\n        event.dataTransfer.setData(\"text/plain\", imageSource);\n    }\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.visible)?_c('div',{staticClass:\"ContextMenu\",style:({left:_vm.left, top:_vm.top}),attrs:{\"tabindex\":\"-1\"},on:{\"blur\":function($event){_vm.$emit('close')}}},[_c('ul',[_vm._t(\"default\")],2)]):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"74f43d04-vue-loader-template\\\"}!../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./contextmenu.vue?vue&type=template&id=256dde9c&\"","// import Vuex from \"vuex\";\nimport { getModule, Module, Mutation, VuexModule } from \"vuex-module-decorators\";\n\nimport { Asset } from \"@/core/comm/types\";\nimport { rootStore } from \"@/store\";\n\nexport interface AssetState {\n    root: number;\n    files: number[];\n    folders: number[];\n    idMap: Map<number, Asset>;\n    selected: number[];\n}\n\n@Module({ dynamic: true, store: rootStore, name: \"assets\", namespaced: true })\nclass AssetStore extends VuexModule {\n    root = -1;\n    files: number[] = [];\n    folders: number[] = [];\n    idMap: Map<number, Asset> = new Map();\n    selected: number[] = [];\n\n    @Mutation\n    clear() {\n        this.folders = [];\n        this.files = [];\n    }\n\n    @Mutation\n    clearSelected() {\n        this.selected = [];\n    }\n\n    @Mutation\n    setRoot(root: number) {\n        this.root = root;\n    }\n\n    @Mutation\n    isFile(inode: number): boolean {\n        return this.files.includes(inode);\n    }\n}\n\nexport const assetStore = getModule(AssetStore);\n","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./edit_dialog.vue?vue&type=style&index=0&id=078b3b76&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./edit_dialog.vue?vue&type=style&index=0&id=078b3b76&scoped=true&lang=css&\"","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./contextmenu.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./contextmenu.vue?vue&type=script&lang=ts&\"","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\n\nimport ContextMenu from \"@/core/components/contextmenu.vue\";\nimport Initiative from \"@/game/ui/initiative.vue\";\n\nimport { getRef } from \"@/core/utils\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { Shape } from \"@/game/shapes/shape\";\nimport { gameStore } from \"@/game/store\";\n\n@Component({\n    components: {\n        ContextMenu,\n    },\n})\nexport default class ShapeContext extends Vue {\n    visible = false;\n    x = 0;\n    y = 0;\n    shape: Shape | null = null;\n    get activeLayer(): string {\n        const layer = layerManager.getLayer();\n        return layer === undefined ? \"\" : layer.name;\n    }\n    open(event: MouseEvent, shape: Shape) {\n        this.visible = true;\n        this.x = event.pageX;\n        this.y = event.pageY;\n        this.shape = shape;\n        this.$nextTick(() => this.$children[0].$el.focus());\n    }\n    close() {\n        this.visible = false;\n        this.shape = null;\n    }\n    getLayers() {\n        return layerManager.layers.filter(l => l.selectable && (gameStore.IS_DM || l.playerEditable));\n    }\n    getActiveLayer() {\n        return layerManager.getLayer();\n    }\n    getInitiativeWord() {\n        if (this.shape === null) return \"\";\n        return getRef<Initiative>(\"initiative\").contains(this.shape.uuid) ? \"Show\" : \"Add\";\n    }\n    setLayer(newLayer: string) {\n        if (this.shape === null) return;\n        this.shape.moveLayer(newLayer, true);\n        this.close();\n    }\n    moveToBack() {\n        if (this.shape === null) return;\n        const layer = this.getActiveLayer()!;\n        layer.moveShapeOrder(this.shape, 0, true);\n        this.close();\n    }\n    moveToFront() {\n        if (this.shape === null) return;\n        const layer = this.getActiveLayer()!;\n        layer.moveShapeOrder(this.shape, layer.shapes.length - 1, true);\n        this.close();\n    }\n    addInitiative() {\n        if (this.shape === null) return;\n        const initiative = getRef<Initiative>(\"initiative\");\n        if (!initiative.contains(this.shape.uuid)) initiative.addInitiative(this.shape.getInitiativeRepr());\n        initiative.visible = true;\n        this.close();\n    }\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.shape !== null)?_c('div',[_c('div',{attrs:{\"id\":\"selection-menu\"}},[_c('div',{attrs:{\"id\":\"selection-edit-button\"},on:{\"click\":_vm.openEditDialog}},[_c('i',{staticClass:\"fas fa-edit\"})]),_c('div',{attrs:{\"id\":\"selection-name\"}},[_vm._v(_vm._s(_vm.shape.name))]),_c('div',{attrs:{\"id\":\"selection-trackers\"}},[_vm._l((_vm.shape.trackers),function(tracker){return (tracker.name !== '' || tracker.value !== 0)?[_c('div',{key:'name-' + tracker.uuid},[_vm._v(_vm._s(tracker.name))]),_c('div',{key:'value-' + tracker.uuid,staticClass:\"selection-tracker-value\",on:{\"click\":function($event){_vm.changeValue(tracker, false)}}},[(tracker.maxvalue === 0)?[_vm._v(_vm._s(tracker.value))]:[_vm._v(_vm._s(tracker.value)+\" / \"+_vm._s(tracker.maxvalue))]],2)]:_vm._e()})],2),_c('div',{attrs:{\"id\":\"selection-auras\"}},[_vm._l((_vm.shape.auras),function(aura){return (aura.name !== '' || aura.value !== 0)?[_c('div',{key:'name-' + aura.uuid},[_vm._v(_vm._s(aura.name))]),_c('div',{key:'value-' + aura.uuid,staticClass:\"selection-tracker-value\",on:{\"click\":function($event){_vm.changeValue(aura, true)}}},[(aura.dim === 0)?[_vm._v(_vm._s(aura.value))]:[_vm._v(_vm._s(aura.value)+\" / \"+_vm._s(aura.dim))]],2)]:_vm._e()})],2)]),_c('edit-dialog',{ref:\"editDialog\",attrs:{\"shape\":_vm.shape}})],1):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"74f43d04-vue-loader-template\\\"}!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./selection_info.vue?vue&type=template&id=32cec914&scoped=true&\"","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./map.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./map.vue?vue&type=script&lang=ts&\"","import { Layer } from \"@/game/layers/layer\";\nimport { gameStore } from \"@/game/store\";\n\nexport class GridLayer extends Layer {\n    invalidate(): void {\n        this.valid = false;\n    }\n    draw(doClear?: boolean): void {\n        if (!this.valid) {\n            this.drawGrid();\n        }\n    }\n    drawGrid(): void {\n        const ctx = this.ctx;\n        this.clear();\n        ctx.beginPath();\n\n        const gs = gameStore.gridSize;\n\n        for (let i = 0; i < this.width; i += gs * gameStore.zoomFactor) {\n            ctx.moveTo(i + (gameStore.panX % gs) * gameStore.zoomFactor, 0);\n            ctx.lineTo(i + (gameStore.panX % gs) * gameStore.zoomFactor, this.height);\n            ctx.moveTo(0, i + (gameStore.panY % gs) * gameStore.zoomFactor);\n            ctx.lineTo(this.width, i + (gameStore.panY % gs) * gameStore.zoomFactor);\n        }\n\n        ctx.strokeStyle = gameStore.gridColour;\n        ctx.lineWidth = 1;\n        ctx.stroke();\n        this.valid = true;\n    }\n}\n","import Vue from \"vue\";\nimport Vuex from \"vuex\";\n\nimport { AssetState } from \"@/assetManager/store\";\nimport { CoreState } from \"@/core/store\";\nimport { GameState } from \"@/game/store\";\n\nVue.use(Vuex);\n\nexport interface RootState {\n    assets: AssetState;\n    core: CoreState;\n    game: GameState;\n}\n\nexport const rootStore = new Vuex.Store<RootState>({});\n","import { render, staticRenderFns } from \"./colorpicker.vue?vue&type=template&id=b4f2c0b0&scoped=true&\"\nimport script from \"./colorpicker.vue?vue&type=script&lang=ts&\"\nexport * from \"./colorpicker.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./colorpicker.vue?vue&type=style&index=0&id=b4f2c0b0&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"b4f2c0b0\",\n  null\n  \n)\n\ncomponent.options.__file = \"colorpicker.vue\"\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('router-view',{ref:\"activeComponent\"})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=196415f0&\"\nvar script = {}\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"App.vue\"\nexport default component.exports","import { GlobalPoint, Ray } from \"@/game/geom\";\nimport { Layer } from \"@/game/layers/layer\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { Settings } from \"@/game/settings\";\nimport { Circle } from \"@/game/shapes/circle\";\nimport { Shape } from \"@/game/shapes/shape\";\nimport { gameStore } from \"@/game/store\";\nimport { g2l, g2lr, g2lx, g2ly, g2lz, getUnitDistance } from \"@/game/units\";\nimport { getFogColour } from \"@/game/utils\";\n\nexport class FOWLayer extends Layer {\n    isVisionLayer: boolean = true;\n    preFogShapes: Shape[] = [];\n\n    addShape(shape: Shape, sync: boolean, temporary?: boolean): void {\n        super.addShape(shape, sync, temporary);\n        if (shape.options.has(\"preFogShape\") && shape.options.get(\"preFogShape\")) {\n            this.preFogShapes.push(shape);\n        }\n    }\n\n    removeShape(shape: Shape, sync: boolean, temporary?: boolean) {\n        if (shape.options.has(\"preFogShape\") && shape.options.get(\"preFogShape\")) {\n            const idx = this.preFogShapes.findIndex(s => s.uuid === shape.uuid);\n            this.preFogShapes.splice(idx, 1);\n        }\n        super.removeShape(shape, sync, temporary);\n    }\n\n    draw(): void {\n        if (!this.valid) {\n            const ctx = this.ctx;\n\n            if (Settings.skipLightFOW) {\n                ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n                this.valid = true;\n                return;\n            }\n\n            const originalOperation = ctx.globalCompositeOperation;\n            ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n\n            ctx.fillStyle = \"rgba(0, 0, 0, 1)\";\n\n            const dctx = layerManager.getLayer(\"draw\")!.ctx;\n            if (Settings.drawAngleLines || Settings.drawFirstLightHit) {\n                dctx.clearRect(0, 0, dctx.canvas.width, dctx.canvas.height);\n            }\n\n            // At all times provide a minimal vision range to prevent losing your tokens in fog.\n            if (gameStore.fullFOW && layerManager.hasLayer(\"tokens\")) {\n                layerManager.getLayer(\"tokens\")!.shapes.forEach(sh => {\n                    if (!sh.ownedBy() || !sh.isToken) return;\n                    const bb = sh.getBoundingBox();\n                    const lcenter = g2l(sh.center());\n                    const alm = 0.8 * g2lz(bb.w);\n                    ctx.beginPath();\n                    ctx.arc(lcenter.x, lcenter.y, alm, 0, 2 * Math.PI);\n                    const gradient = ctx.createRadialGradient(lcenter.x, lcenter.y, alm / 2, lcenter.x, lcenter.y, alm);\n                    gradient.addColorStop(0, \"rgba(0, 0, 0, 1)\");\n                    gradient.addColorStop(1, \"rgba(0, 0, 0, 0)\");\n                    ctx.fillStyle = gradient;\n                    ctx.fill();\n                });\n            }\n\n            // First cut out all the light sources\n            for (const light of gameStore.visionSources) {\n                const shape = layerManager.UUIDMap.get(light.shape);\n                if (shape === undefined) continue;\n                const aura = shape.auras.find(a => a.uuid === light.aura);\n                if (aura === undefined) continue;\n\n                const auraLength = getUnitDistance(aura.value + aura.dim);\n                const center = shape.center();\n                const lcenter = g2l(center);\n\n                const auraCircle = new Circle(center, auraLength);\n                if (!auraCircle.visibleInCanvas(ctx.canvas)) continue;\n\n                let lastArcAngle = -1;\n\n                const path = new Path2D();\n                path.moveTo(lcenter.x, lcenter.y);\n                let firstPoint: GlobalPoint;\n\n                for (let angle = 0; angle < 2 * Math.PI; angle += (Settings.angleSteps / 180) * Math.PI) {\n                    const anglePoint = new GlobalPoint(\n                        center.x + auraLength * Math.cos(angle),\n                        center.y + auraLength * Math.sin(angle),\n                    );\n                    if (Settings.drawAngleLines) {\n                        dctx!.beginPath();\n                        dctx!.moveTo(g2lx(center.x), g2ly(center.y));\n                        dctx!.lineTo(g2lx(anglePoint.x), g2ly(anglePoint.y));\n                        dctx!.stroke();\n                    }\n\n                    // Check if there is a hit with one of the nearby light blockers.\n                    const lightRay = Ray.fromPoints(center, anglePoint);\n                    const hitResult = gameStore.BV.intersect(lightRay);\n\n                    if (angle === 0) firstPoint = hitResult.hit ? hitResult.intersect : anglePoint;\n\n                    // We can move on to the next angle if nothing was hit.\n                    if (!hitResult.hit) {\n                        // If an earlier hit caused the aura to leave the arc, we need to go back to the arc\n                        if (lastArcAngle === -1) {\n                            // Set the start of a new arc beginning at the current angle\n                            lastArcAngle = angle;\n                            // Draw a line from the last non arc location back to the arc\n                            const dest = g2l(anglePoint);\n                            ctx.lineTo(dest.x, dest.y);\n                        }\n                        continue;\n                    }\n                    // If hit , first finish any ongoing arc, then move to the intersection point\n                    if (lastArcAngle !== -1) {\n                        path.arc(lcenter.x, lcenter.y, g2lr(aura.value + aura.dim), lastArcAngle, angle);\n                        lastArcAngle = -1;\n                    }\n                    path.lineTo(g2lx(hitResult.intersect.x), g2ly(hitResult.intersect.y));\n                }\n\n                // Finish the final arc.\n                if (lastArcAngle === -1) path.lineTo(g2lx(firstPoint!.x), g2ly(firstPoint!.y));\n                else path.arc(lcenter.x, lcenter.y, g2lr(aura.value + aura.dim), lastArcAngle, 2 * Math.PI);\n\n                if (gameStore.fullFOW) {\n                    if (aura.dim > 0) {\n                        // Fill the light aura with a radial dropoff towards the outside.\n                        const gradient = ctx.createRadialGradient(\n                            lcenter.x,\n                            lcenter.y,\n                            g2lr(aura.value),\n                            lcenter.x,\n                            lcenter.y,\n                            g2lr(aura.value + aura.dim),\n                        );\n                        gradient.addColorStop(0, \"rgba(0, 0, 0, 1)\");\n                        gradient.addColorStop(1, \"rgba(0, 0, 0, 0)\");\n                        ctx.fillStyle = gradient;\n                    } else {\n                        ctx.fillStyle = \"rgba(0, 0, 0, 1)\";\n                    }\n                    ctx.fill(path);\n                }\n\n                aura.lastPath = path;\n            }\n\n            // At the DM Side due to opacity of the two fow layers, it looks strange if we just render them on top of eachother like players.\n            if (gameStore.fowLOS) {\n                ctx.globalCompositeOperation = \"source-in\";\n                ctx.drawImage(layerManager.getLayer(\"fow-players\")!.canvas, 0, 0);\n            }\n\n            for (const preShape of this.preFogShapes) {\n                if (!preShape.visibleInCanvas(this.canvas)) continue;\n                const ogComposite = preShape.globalCompositeOperation;\n                if (!gameStore.fullFOW) {\n                    if (preShape.globalCompositeOperation === \"source-over\")\n                        preShape.globalCompositeOperation = \"destination-out\";\n                    else if (preShape.globalCompositeOperation === \"destination-out\")\n                        preShape.globalCompositeOperation = \"source-over\";\n                }\n                preShape.draw(ctx);\n                preShape.globalCompositeOperation = ogComposite;\n            }\n\n            if (gameStore.fullFOW) {\n                ctx.globalCompositeOperation = \"source-out\";\n                ctx.fillStyle = getFogColour();\n                ctx.fillRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n            }\n\n            super.draw(false);\n\n            ctx.globalCompositeOperation = originalOperation;\n        }\n    }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./load.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./load.vue?vue&type=script&lang=ts&\"","import { ServerCircle } from \"@/game/comm/types/shapes\";\nimport { GlobalPoint, LocalPoint, Vector } from \"@/game/geom\";\nimport { BoundingRect } from \"@/game/shapes/boundingrect\";\nimport { Shape } from \"@/game/shapes/shape\";\nimport { gameStore } from \"@/game/store\";\nimport { calculateDelta } from \"@/game/ui/tools/utils\";\nimport { g2l, g2lz, l2g } from \"@/game/units\";\nimport { getFogColour } from \"@/game/utils\";\n\nexport class Circle extends Shape {\n    type = \"circle\";\n    r: number;\n    constructor(center: GlobalPoint, r: number, fillColour?: string, strokeColour?: string, uuid?: string) {\n        super(center, fillColour, strokeColour, uuid);\n        this.r = r || 1;\n    }\n    asDict(): ServerCircle {\n        // const base = <ServerCircle>this.getBaseDict();\n        // base.r = this.r;\n        // base.border = this.border;\n        // return base;\n        return Object.assign(this.getBaseDict(), {\n            radius: this.r,\n        });\n    }\n    fromDict(data: ServerCircle) {\n        super.fromDict(data);\n        this.r = data.radius;\n    }\n    getBoundingBox(): BoundingRect {\n        return new BoundingRect(\n            new GlobalPoint(this.refPoint.x - this.r, this.refPoint.y - this.r),\n            this.r * 2,\n            this.r * 2,\n        );\n    }\n\n    get points() {\n        return this.getBoundingBox().points;\n    }\n\n    draw(ctx: CanvasRenderingContext2D) {\n        super.draw(ctx);\n        ctx.beginPath();\n        if (this.fillColour === \"fog\") ctx.fillStyle = getFogColour();\n        else ctx.fillStyle = this.fillColour;\n        const loc = g2l(this.refPoint);\n        ctx.arc(loc.x, loc.y, g2lz(this.r), 0, 2 * Math.PI);\n        ctx.fill();\n        if (this.strokeColour !== \"rgba(0, 0, 0, 0)\") {\n            ctx.beginPath();\n            ctx.lineWidth = g2lz(5);\n            ctx.strokeStyle = this.strokeColour;\n            ctx.arc(loc.x, loc.y, g2lz(this.r), 0, 2 * Math.PI);\n            ctx.stroke();\n        }\n    }\n    contains(point: GlobalPoint): boolean {\n        return (point.x - this.refPoint.x) ** 2 + (point.y - this.refPoint.y) ** 2 < this.r ** 2;\n    }\n    inCorner(point: GlobalPoint, corner: string) {\n        return false; // TODO\n    }\n    getCorner(point: GlobalPoint) {\n        if (this.inCorner(point, \"ne\")) return \"ne\";\n        else if (this.inCorner(point, \"nw\")) return \"nw\";\n        else if (this.inCorner(point, \"se\")) return \"se\";\n        else if (this.inCorner(point, \"sw\")) return \"sw\";\n    }\n    center(): GlobalPoint;\n    center(centerPoint: GlobalPoint): void;\n    center(centerPoint?: GlobalPoint): GlobalPoint | void {\n        if (centerPoint === undefined) return this.refPoint;\n        this.refPoint = centerPoint;\n    }\n    visibleInCanvas(canvas: HTMLCanvasElement): boolean {\n        return true;\n    } // TODO\n    snapToGrid() {\n        const gs = gameStore.gridSize;\n        let targetX;\n        let targetY;\n        if (((2 * this.r) / gs) % 2 === 0) {\n            targetX = Math.round(this.refPoint.x / gs) * gs;\n        } else {\n            targetX = Math.round((this.refPoint.x - gs / 2) / gs) * gs + this.r;\n        }\n        if (((2 * this.r) / gs) % 2 === 0) {\n            targetY = Math.round(this.refPoint.y / gs) * gs;\n        } else {\n            targetY = Math.round((this.refPoint.y - gs / 2) / gs) * gs + this.r;\n        }\n        const delta = calculateDelta(new Vector(targetX - this.refPoint.x, targetY - this.refPoint.y), this);\n        this.refPoint = this.refPoint.add(delta);\n        this.invalidate(false);\n    }\n    resizeToGrid() {\n        const gs = gameStore.gridSize;\n        this.r = Math.max(Math.round(this.r / gs) * gs, gs / 2);\n        this.invalidate(false);\n    }\n    resize(resizedir: string, point: LocalPoint) {\n        const z = gameStore.zoomFactor;\n        const diff = l2g(point).subtract(this.refPoint);\n        this.r = Math.sqrt(Math.pow(diff.length(), 2) / 2);\n    }\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Tool from \"@/game/ui/tools/tool.vue\";\n\nimport { GlobalPoint } from \"@/game/geom\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { BaseRect } from \"@/game/shapes/baserect\";\nimport { Rect } from \"@/game/shapes/rect\";\nimport { gameStore } from \"@/game/store\";\nimport { l2g } from \"@/game/units\";\nimport { getMouse } from \"@/game/utils\";\nimport Component from \"vue-class-component\";\n\n@Component\nexport default class MapTool extends Tool {\n    name = \"Map\";\n    active = false;\n    xCount = 3;\n    yCount = 3;\n    startPoint: GlobalPoint | null = null;\n    rect: Rect | null = null;\n\n    onMouseDown(event: MouseEvent) {\n        const layer = layerManager.getLayer();\n        if (layer === undefined) {\n            console.log(\"No active layer!\");\n            return;\n        }\n        this.active = true;\n\n        this.startPoint = l2g(getMouse(event));\n        this.rect = new Rect(this.startPoint.clone(), 0, 0, \"rgba(0,0,0,0)\", \"black\");\n        layer.addShape(this.rect, false, false);\n    }\n    onMouseMove(event: MouseEvent) {\n        if (!this.active || this.rect === null || this.startPoint === null) return;\n        const layer = layerManager.getLayer();\n        if (layer === undefined) {\n            console.log(\"No active layer!\");\n            return;\n        }\n\n        const endPoint = l2g(getMouse(event));\n\n        this.rect.w = Math.abs(endPoint.x - this.startPoint.x);\n        this.rect.h = Math.abs(endPoint.y - this.startPoint.y);\n        this.rect.refPoint.x = Math.min(this.startPoint.x, endPoint.x);\n        this.rect.refPoint.y = Math.min(this.startPoint.y, endPoint.y);\n        layer.invalidate(false);\n    }\n    onMouseUp(event: MouseEvent) {\n        if (!this.active || this.rect === null) return;\n        const layer = layerManager.getLayer();\n        if (layer === undefined) {\n            console.log(\"No active layer!\");\n            return;\n        }\n        this.active = false;\n\n        if (layer.selection.length !== 1) {\n            layer.removeShape(this.rect, false, false);\n            return;\n        }\n\n        const w = this.rect.w;\n        const h = this.rect.h;\n        const sel = layer.selection[0];\n\n        if (sel instanceof BaseRect) {\n            sel.w *= (this.xCount * gameStore.gridSize) / w;\n            sel.h *= (this.yCount * gameStore.gridSize) / h;\n        }\n\n        layer.removeShape(this.rect, false, false);\n    }\n}\n","import { render, staticRenderFns } from \"./load.vue?vue&type=template&id=ff095222&\"\nimport script from \"./load.vue?vue&type=script&lang=ts&\"\nexport * from \"./load.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"load.vue\"\nexport default component.exports","import Tool from \"@/game/ui/tools/tool.vue\";\n\nimport { sendClientOptions } from \"@/game/api/utils\";\nimport { LocalPoint } from \"@/game/geom\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { gameStore } from \"@/game/store\";\nimport { getMouse } from \"@/game/utils\";\nimport Component from \"vue-class-component\";\n\n@Component\nexport default class PanTool extends Tool {\n    name = \"Pan\";\n    panStart = new LocalPoint(0, 0);\n    active = false;\n\n    onMouseDown(event: MouseEvent) {\n        this.panStart = getMouse(event);\n        this.active = true;\n    }\n    onMouseMove(event: MouseEvent) {\n        if (!this.active) return;\n        const mouse = getMouse(event);\n        const distance = mouse.subtract(this.panStart).multiply(1 / gameStore.zoomFactor);\n        gameStore.increasePanX(Math.round(distance.x));\n        gameStore.increasePanY(Math.round(distance.y));\n        this.panStart = mouse;\n        layerManager.invalidate();\n    }\n    onMouseUp(event: MouseEvent) {\n        this.active = false;\n        sendClientOptions();\n    }\n}\n","import { render, staticRenderFns } from \"./selectcontext.vue?vue&type=template&id=44a31e42&scoped=true&\"\nimport script from \"./selectcontext.vue?vue&type=script&lang=ts&\"\nexport * from \"./selectcontext.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./selectcontext.vue?vue&type=style&index=0&id=44a31e42&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"44a31e42\",\n  null\n  \n)\n\ncomponent.options.__file = \"selectcontext.vue\"\nexport default component.exports","import Vue from \"vue\";\n\nimport { app } from \"@/main\";\n\n// Reference: https://stackoverflow.com/questions/105034/create-guid-uuid-in-javascript\nexport function uuidv4() {\n    return \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g, c => {\n        const r = (Math.random() * 16) | 0;\n        const v = c === \"x\" ? r : (r & 0x3) | 0x8;\n        return v.toString(16);\n    });\n}\n\nexport function capitalize(text: string) {\n    return text.charAt(0).toUpperCase() + text.slice(1);\n}\n\nexport function alphSort(a: string, b: string) {\n    if (a.toLowerCase() < b.toLowerCase()) return -1;\n    else return 1;\n}\n\nexport function getHTMLFont(element: HTMLElement) {\n    let font = element.style.font;\n    while (font === null && element.parentElement !== null) {\n        element = element.parentElement;\n        font = element.style.font;\n    }\n    if (font === null) font = window.getComputedStyle(document.body).getPropertyValue(\"font\");\n    return font;\n}\n\nexport function getHTMLTextWidth(text: string, font: string): number {\n    let fakeElement = <HTMLCanvasElement>document.getElementById(\"emptycanvas\");\n    if (fakeElement === null) {\n        fakeElement = document.createElement(\"canvas\");\n        fakeElement.id = \"emptycanvas\";\n        fakeElement.style.display = \"\";\n        document.body.appendChild(fakeElement);\n    }\n    const ctx = fakeElement.getContext(\"2d\")!;\n    ctx.font = font;\n    return Math.ceil(ctx.measureText(text).width);\n}\n\nexport function partition<T>(arr: T[], predicate: (n: T) => boolean) {\n    const ret: T[][] = [[], []];\n    arr.forEach(n => (predicate(n) ? ret[1].push(n) : ret[0].push(n)));\n    return ret;\n}\n\nexport function calcFontScale(ctx: CanvasRenderingContext2D, text: string, width: number, height: number) {\n    const points = Number(ctx.font.split(\"px\")[0]) * 0.2;\n    const fontWidth = ctx.measureText(text).width;\n    return Math.min(width / fontWidth, height / points);\n}\n\nexport function fixedEncodeURIComponent(str: string) {\n    return encodeURIComponent(str).replace(/[!'()*]/g, c => {\n        return \"%\" + c.charCodeAt(0).toString(16);\n    });\n}\n\nexport class OrderedMap<K, V> {\n    keys: K[] = [];\n    values: V[] = [];\n\n    get length() {\n        return this.keys.length;\n    }\n\n    get(key: K) {\n        return this.values[this.keys.indexOf(key)];\n    }\n    getIndexValue(idx: number) {\n        return this.values[idx];\n    }\n    getIndexKey(idx: number) {\n        return this.keys[idx];\n    }\n    set(key: K, value: V) {\n        this.keys.push(key);\n        this.values.push(value);\n    }\n    has(key: K) {\n        return this.indexOf(key) >= 0;\n    }\n    indexOf(element: K) {\n        return this.keys.indexOf(element);\n    }\n    remove(element: K) {\n        const idx = this.indexOf(element);\n        this.keys.splice(idx, 1);\n        this.values.splice(idx, 1);\n    }\n}\n\nexport function getComponent<T extends Vue>(): T {\n    return <T>app.$children[0].$refs.activeComponent;\n}\n\nexport function getRef<T extends Vue>(ref: string): T {\n    const active = <Vue>app.$children[0].$refs.activeComponent;\n    return <T>active.$refs[ref];\n}\n","import { render, staticRenderFns } from \"./contextMenu.vue?vue&type=template&id=d4f084a4&\"\nimport script from \"./contextMenu.vue?vue&type=script&lang=ts&\"\nexport * from \"./contextMenu.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"contextMenu.vue\"\nexport default component.exports","import { EdgeCirculator, Point, Sign, Triangle, Vertex } from \"./tds\";\n\ntype Line = number[];\n\nexport function cw(index: number) {\n    return (index + 2) % 3;\n}\n\nexport function ccw(index: number) {\n    return (index + 1) % 3;\n}\n\nexport function edgeInfo(va: Vertex, vb: Vertex) {\n    const ec = new EdgeCirculator(va, null);\n    if (ec.valid) {\n        do {\n            const indv = 3 - ec.t!.indexV(va) - ec.ri;\n            const v = ec.t!.vertices[indv]!;\n            if (!v.infinite) {\n                if (v === vb) {\n                    return { includes: true, vi: vb, fr: ec.t!, i: ec.ri };\n                } else {\n                    const orient = orientation(va.point!, vb.point!, v.point!);\n                    if (orient === Sign.COLLINEAR && collinearBetween(va.point!, v.point!, vb.point!)) {\n                        return { includes: true, vi: v, fr: ec.t!, i: ec.ri };\n                    }\n                }\n            }\n        } while (ec.next());\n    }\n    return { includes: false };\n}\n\nexport function collinearBetween(p: Point, q: Point, r: Point): boolean {\n    let cPQ: Sign;\n    let cQR: Sign;\n    if (compare(0, p, r) === Sign.EQUAL) {\n        cPQ = compare(1, p, q);\n        cQR = compare(1, q, r);\n    } else {\n        cPQ = compare(0, p, q);\n        cQR = compare(0, q, r);\n    }\n    return (cPQ === Sign.SMALLER && cQR === Sign.SMALLER) || (cPQ === Sign.LARGER && cQR === Sign.LARGER);\n}\n\nfunction compare(index: number, a: Point, b: Point): Sign {\n    if (a[index] < b[index]) return Sign.SMALLER;\n    if (a[index] > b[index]) return Sign.LARGER;\n    return Sign.EQUAL;\n}\n\nexport function orientation(p: Point, q: Point, r: Point) {\n    const px = p[0];\n    const py = p[1];\n    const qx = q[0];\n    const qy = q[1];\n    const rx = r[0];\n    const ry = r[1];\n    const pqx = qx - px;\n    const pqy = qy - py;\n    const prx = rx - px;\n    const pry = ry - py;\n    const det = determinant(pqx, pqy, prx, pry);\n    let maxX = Math.abs(pqx);\n    let maxY = Math.abs(pqy);\n    const aprX = Math.abs(prx);\n    const aprY = Math.abs(pry);\n    if (maxX < aprX) maxX = aprX;\n    if (maxY < aprY) maxY = aprY;\n    if (maxX > maxY) [maxX, maxY] = [maxY, maxX];\n    // underflow proection in eps computation?? Math.sqrt(Number.MIN_VALUE, Number.EPSILON)\n    if (maxX < 2e-162 && maxX === 0) {\n        return Sign.ZERO;\n    }\n    // overflow protection in det computation\n    if (maxY < 1e153) {\n        const eps = Number.EPSILON * maxX * maxY;\n        if (det > eps) return Sign.POSITIVE;\n        if (det < -eps) return Sign.NEGATIVE;\n    }\n    return Sign.ZERO;\n}\n\nexport function determinant(a00: number, a01: number, a10: number, a11: number) {\n    return a00 * a11 - a01 * a10;\n}\n\nexport function hasInexactNegativeOrientation(p: Point, q: Point, r: Point) {\n    return determinant(q[0] - p[0], q[1] - p[1], r[0] - p[0], r[1] - p[1]) < 0;\n}\n\nexport function sideOfOrientedCircle(t: Triangle, p: Point, perturb: boolean): Sign {\n    if (!t.isInfinite())\n        return sideOfOrientedCircleP(t.vertices[0]!.point!, t.vertices[1]!.point!, t.vertices[2]!.point!, p, perturb);\n    throw new Error(\"SSS\");\n}\n\nfunction sideOfOrientedCircleP(p0: Point, p1: Point, p2: Point, p: Point, perturb: boolean): Sign {\n    const os = getOrientedSide(p0, p1, p2, p);\n    if (os !== Sign.ON_ORIENTED_BOUNDARY || !perturb) return os;\n    const points = [p0, p1, p2, p];\n    points.sort((a, b) => a[0] - b[0] || a[1] - b[1]);\n    for (const point of points.reverse()) {\n        if (point === p) return Sign.ON_NEGATIVE_SIDE;\n        let o = orientation(p0, p1, p);\n        if (point === p2 && o !== Sign.COLLINEAR) return o;\n        o = orientation(p0, p, p2);\n        if (point === p1 && o !== Sign.COLLINEAR) return o;\n        o = orientation(p, p1, p2);\n        if (point === p0 && o !== Sign.COLLINEAR) return o;\n    }\n    return Sign.ON_NEGATIVE_SIDE;\n}\n\nexport function xyEqual(p: Point, q: Point) {\n    return p[0] === q[0] && p[1] === q[1];\n}\n\nexport function xySmaller(p: Point, q: Point) {\n    return p[0] < q[0] || (p[0] === q[0] && p[1] < q[1]);\n}\n\nexport function xyCompare(p: Point, q: Point) {\n    if (xySmaller(p, q)) return Sign.SMALLER;\n    if (xyEqual(p, q)) return Sign.EQUAL;\n    return Sign.LARGER;\n}\n\nfunction getOrientedSide(p: Point, q: Point, r: Point, t: Point): Sign {\n    const qpx = q[0] - p[0];\n    const qpy = q[1] - p[1];\n    const rpx = r[0] - p[0];\n    const rpy = r[1] - p[1];\n    const tpx = t[0] - p[0];\n    const tpy = t[1] - p[1];\n    const tqx = t[0] - q[0];\n    const tqy = t[1] - q[1];\n    const rqx = r[0] - q[0];\n    const rqy = r[1] - q[1];\n\n    const det = determinant(qpx * tpy - qpy * tpx, tpx * tqx + tpy * tqy, qpx * rpy - qpy * rpx, rpx * rqx + rpy * rqy);\n    let maxx = Math.abs(qpx);\n    let maxy = Math.abs(qpy);\n    const arpx = Math.abs(rpx);\n    const arpy = Math.abs(rpy);\n    const atqx = Math.abs(tqx);\n    const atqy = Math.abs(tqy);\n    const atpx = Math.abs(tpx);\n    const atpy = Math.abs(tpy);\n    const arqx = Math.abs(rqx);\n    const arqy = Math.abs(rqy);\n\n    if (maxx < arpx) maxx = arpx;\n    if (maxx < atpx) maxx = atpx;\n    if (maxx < atqx) maxx = atqx;\n    if (maxx < arqx) maxx = arqx;\n\n    if (maxy < arpy) maxy = arpy;\n    if (maxy < atpy) maxy = atpy;\n    if (maxy < atqy) maxy = atqy;\n    if (maxy < arqy) maxy = arqy;\n\n    if (maxx > maxy) [maxx, maxy] = [maxy, maxx];\n\n    if (maxx < 1e-73 && maxx === 0) return Sign.ON_ORIENTED_BOUNDARY;\n    // sqrt(sqrt(max_double/16\n    else if (maxy < 1e76) {\n        const eps = Number.EPSILON * maxx * maxy * (maxy * maxy);\n        if (det > eps) return Sign.ON_POSITIVE_SIDE;\n        if (det < -eps) return Sign.ON_NEGATIVE_SIDE;\n    }\n\n    return Sign.ZERO;\n}\n\nfunction segSegDoIntersectCrossing(p1: Point, p2: Point, p3: Point, p4: Point): boolean {\n    switch (orientation(p1, p2, p3)) {\n        case Sign.LEFT_TURN:\n            return orientation(p3, p4, p2) !== Sign.RIGHT_TURN;\n        case Sign.RIGHT_TURN:\n            return orientation(p3, p4, p2) !== Sign.LEFT_TURN;\n        case Sign.COLLINEAR:\n            return true;\n    }\n}\n\nfunction segSegDoIntersectContained(p1: Point, p2: Point, p3: Point, p4: Point): boolean {\n    switch (orientation(p1, p2, p3)) {\n        case Sign.LEFT_TURN:\n            return orientation(p1, p2, p4) !== Sign.LEFT_TURN;\n        case Sign.RIGHT_TURN:\n            return orientation(p1, p2, p4) !== Sign.RIGHT_TURN;\n        case Sign.COLLINEAR:\n            return true;\n    }\n}\n\nexport function intersection(pa: Point, pb: Point, pc: Point, pd: Point) {\n    const i = getIntersectionType(pa, pb, pc, pd);\n    switch (i.intersectionType) {\n        case IntersectionType.POINT:\n            return i.point!;\n        case IntersectionType.NO_INTERSECTION:\n            return null;\n    }\n    throw new Error(\"sdfgighowen\");\n}\n\nenum IntersectionType {\n    NO_INTERSECTION,\n    POINT,\n    SEGMENT,\n}\n\nfunction getLine(p0: Point, p1: Point): Line {\n    if (p0[0] === p1[0]) return [1, 0, -p0[0]];\n    if (p0[1] === p1[1]) return [0, 1, -p0[1]];\n    const x = p1[0] - p0[0];\n    const y = p1[1] - p0[1];\n    return [-y, x, -x * p0[1] + y * p0[0]];\n}\n\nfunction getIntersectionType(pa: Point, pb: Point, pc: Point, pd: Point) {\n    if (!doIntersect(pa, pb, pc, pd)) return { intersectionType: IntersectionType.NO_INTERSECTION, point: null };\n    const l1 = getLine(pa, pb);\n    const l2 = getLine(pc, pd);\n    const info = getIntersectionTypeLine(l1, l2);\n    switch (info.intersectionType) {\n        case IntersectionType.POINT: {\n            return info;\n        }\n    }\n    throw new Error(\"gzseuihgpib\");\n}\n\nfunction getIntersectionTypeLine(la: Line, lb: Line) {\n    const denom = la[0] * lb[1] - lb[0] * la[1];\n    const nom1 = la[1] * lb[2] - lb[1] * la[2];\n    const nom2 = lb[0] * la[2] - la[0] * lb[2];\n    return {\n        intersectionType: IntersectionType.POINT,\n        point: [nom1 / denom, nom2 / denom],\n    };\n}\n\nfunction doIntersect(A1: Point, A2: Point, B1: Point, B2: Point): boolean {\n    if (xySmaller(A1, A2)) {\n        if (xySmaller(B1, B2)) {\n            if (xySmaller(A2, B1) || xySmaller(B2, A1)) return false;\n        } else {\n            if (xySmaller(A2, B2) || xySmaller(B1, A1)) return false;\n        }\n    } else {\n        if (xySmaller(B1, B2)) {\n            if (xySmaller(A1, B1) || xySmaller(B2, A2)) return false;\n        } else {\n            if (xySmaller(A1, B2) || xySmaller(B1, A2)) return false;\n        }\n    }\n    if (xySmaller(A1, A2)) {\n        if (xySmaller(B1, B2)) {\n            switch (xyCompare(A1, B1)) {\n                case Sign.SMALLER: {\n                    switch (xyCompare(A2, B1)) {\n                        case Sign.SMALLER:\n                            return false;\n                        case Sign.EQUAL:\n                            return true;\n                        default: {\n                            switch (xyCompare(A2, B2)) {\n                                case Sign.SMALLER:\n                                    return segSegDoIntersectCrossing(A1, A2, B1, B2);\n                                case Sign.EQUAL:\n                                    return true;\n                                default:\n                                    return segSegDoIntersectContained(A1, A2, B1, B2);\n                            }\n                        }\n                    }\n                }\n                case Sign.EQUAL:\n                    return true;\n                default:\n                    switch (xyCompare(B2, A1)) {\n                        case Sign.SMALLER:\n                            return false;\n                        case Sign.EQUAL:\n                            return true;\n                        default: {\n                            switch (xyCompare(B2, A2)) {\n                                case Sign.SMALLER:\n                                    return segSegDoIntersectCrossing(B1, B2, A1, A2);\n                                case Sign.EQUAL:\n                                    return true;\n                                default:\n                                    return segSegDoIntersectContained(B1, B2, A1, A2);\n                            }\n                        }\n                    }\n            }\n        } else {\n            switch (xyCompare(A1, B2)) {\n                case Sign.SMALLER: {\n                    switch (xyCompare(A2, B2)) {\n                        case Sign.SMALLER:\n                            return false;\n                        case Sign.EQUAL:\n                            return true;\n                        default: {\n                            switch (xyCompare(A2, B1)) {\n                                case Sign.SMALLER:\n                                    return segSegDoIntersectCrossing(A1, A2, B2, B1);\n                                case Sign.EQUAL:\n                                    return true;\n                                default:\n                                    return segSegDoIntersectContained(A1, A2, B2, B1);\n                            }\n                        }\n                    }\n                }\n                case Sign.EQUAL:\n                    return true;\n                default:\n                    switch (xyCompare(B1, A1)) {\n                        case Sign.SMALLER:\n                            return false;\n                        case Sign.EQUAL:\n                            return true;\n                        default: {\n                            switch (xyCompare(B1, A2)) {\n                                case Sign.SMALLER:\n                                    return segSegDoIntersectCrossing(B2, B1, A1, A2);\n                                case Sign.EQUAL:\n                                    return true;\n                                default:\n                                    return segSegDoIntersectContained(B2, B1, A1, A2);\n                            }\n                        }\n                    }\n            }\n        }\n    } else {\n        if (xySmaller(B1, B2)) {\n            switch (xyCompare(A2, B1)) {\n                case Sign.SMALLER: {\n                    switch (xyCompare(A1, B1)) {\n                        case Sign.SMALLER:\n                            return false;\n                        case Sign.EQUAL:\n                            return true;\n                        default: {\n                            switch (xyCompare(A1, B2)) {\n                                case Sign.SMALLER:\n                                    return segSegDoIntersectCrossing(A2, A1, B1, B2);\n                                case Sign.EQUAL:\n                                    return true;\n                                default:\n                                    return segSegDoIntersectContained(A2, A1, B1, B2);\n                            }\n                        }\n                    }\n                }\n                case Sign.EQUAL:\n                    return true;\n                default:\n                    switch (xyCompare(B2, A2)) {\n                        case Sign.SMALLER:\n                            return false;\n                        case Sign.EQUAL:\n                            return true;\n                        default: {\n                            switch (xyCompare(B2, A1)) {\n                                case Sign.SMALLER:\n                                    return segSegDoIntersectCrossing(B1, B2, A2, A1);\n                                case Sign.EQUAL:\n                                    return true;\n                                default:\n                                    return segSegDoIntersectContained(B1, B2, A2, A1);\n                            }\n                        }\n                    }\n            }\n        } else {\n            switch (xyCompare(A2, B2)) {\n                case Sign.SMALLER: {\n                    switch (xyCompare(A1, B2)) {\n                        case Sign.SMALLER:\n                            return false;\n                        case Sign.EQUAL:\n                            return true;\n                        default: {\n                            switch (xyCompare(A1, B1)) {\n                                case Sign.SMALLER:\n                                    return segSegDoIntersectCrossing(A2, A1, B2, B1);\n                                case Sign.EQUAL:\n                                    return true;\n                                default:\n                                    return segSegDoIntersectContained(A2, A1, B2, B1);\n                            }\n                        }\n                    }\n                }\n                case Sign.EQUAL:\n                    return true;\n                default:\n                    switch (xyCompare(B1, A2)) {\n                        case Sign.SMALLER:\n                            return false;\n                        case Sign.EQUAL:\n                            return true;\n                        default: {\n                            switch (xyCompare(B1, A1)) {\n                                case Sign.SMALLER:\n                                    return segSegDoIntersectCrossing(B2, B1, A2, A1);\n                                case Sign.EQUAL:\n                                    return true;\n                                default:\n                                    return segSegDoIntersectContained(B2, B1, A2, A1);\n                            }\n                        }\n                    }\n            }\n        }\n    }\n}\n\nfunction nextUp(x: number) {\n    if (x !== x) {\n        return x;\n    }\n    if (x === -1 / 0) {\n        return -Number.MAX_VALUE;\n    }\n    if (x === +1 / 0) {\n        return +1 / 0;\n    }\n    if (x === +Number.MAX_VALUE) {\n        return +1 / 0;\n    }\n    let y = x * (x < 0 ? 1 - Number.EPSILON / 2 : 1 + Number.EPSILON);\n    if (y === x) {\n        y = Number.MIN_VALUE * Number.EPSILON > 0 ? x + Number.MIN_VALUE * Number.EPSILON : x + Number.MIN_VALUE;\n    }\n    if (y === +1 / 0) {\n        y = +Number.MAX_VALUE;\n    }\n    const b = x + (y - x) / 2;\n    if (x < b && b < y) {\n        y = b;\n    }\n    const c = (y + x) / 2;\n    if (x < c && c < y) {\n        y = c;\n    }\n    return y === 0 ? -0 : y;\n}\n\nexport function ulp(x: number) {\n    return x < 0 ? nextUp(x) - x : x + nextUp(-x);\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('Modal',{attrs:{\"visible\":_vm.visible,\"mask\":false},on:{\"close\":function($event){_vm.visible = false}},scopedSlots:_vm._u([{key:\"header\",fn:function(m){return _c('div',{staticClass:\"modal-header\",attrs:{\"draggable\":\"true\"},on:{\"dragstart\":m.dragStart,\"dragend\":m.dragEnd}},[_c('div',[_vm._v(\"Edit asset\")]),_c('div',{staticClass:\"header-close\",on:{\"click\":function($event){_vm.visible = false}}},[_c('i',{staticClass:\"far fa-window-close\"})])])}}])},[_c('div',{staticClass:\"modal-body\"},[_c('label',{attrs:{\"for\":\"shapeselectiondialog-name\"}},[_vm._v(\"Name\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.shape.name),expression:\"shape.name\"}],staticStyle:{\"grid-column\":\"numerator / end\"},attrs:{\"type\":\"text\",\"id\":\"shapeselectiondialog-name\"},domProps:{\"value\":(_vm.shape.name)},on:{\"change\":function($event){_vm.updateShape(false)},\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.shape, \"name\", $event.target.value)}}}),_c('label',{attrs:{\"for\":\"shapeselectiondialog-istoken\"}},[_vm._v(\"Is a token\")]),_c('input',{staticStyle:{\"grid-column-start\":\"remove\",\"width\":\"15px\",\"height\":\"15px\"},attrs:{\"type\":\"checkbox\",\"id\":\"shapeselectiondialog-istoken\"},domProps:{\"checked\":_vm.shape.isToken},on:{\"click\":_vm.setToken}}),_c('label',{attrs:{\"for\":\"shapeselectiondialog-visionblocker\"}},[_vm._v(\"Blocks vision/light\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.shape.visionObstruction),expression:\"shape.visionObstruction\"}],staticStyle:{\"grid-column-start\":\"remove\",\"width\":\"15px\",\"height\":\"15px\"},attrs:{\"type\":\"checkbox\",\"id\":\"shapeselectiondialog-visionblocker\"},domProps:{\"checked\":Array.isArray(_vm.shape.visionObstruction)?_vm._i(_vm.shape.visionObstruction,null)>-1:(_vm.shape.visionObstruction)},on:{\"change\":[function($event){var $$a=_vm.shape.visionObstruction,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.$set(_vm.shape, \"visionObstruction\", $$a.concat([$$v])))}else{$$i>-1&&(_vm.$set(_vm.shape, \"visionObstruction\", $$a.slice(0,$$i).concat($$a.slice($$i+1))))}}else{_vm.$set(_vm.shape, \"visionObstruction\", $$c)}},_vm.setVisionBlocker]}}),_c('label',{attrs:{\"for\":\"shapeselectiondialog-moveblocker\"}},[_vm._v(\"Blocks movement\")]),_c('input',{staticStyle:{\"grid-column-start\":\"remove\",\"width\":\"15px\",\"height\":\"15px\"},attrs:{\"type\":\"checkbox\",\"id\":\"shapeselectiondialog-moveblocker\"},domProps:{\"checked\":_vm.shape.movementObstruction},on:{\"click\":_vm.setMovementBlocker}}),_c('div',{staticClass:\"spanrow header\"},[_vm._v(\"Access\")]),_vm._l((_vm.shape.owners),function(owner){return [_c('input',{key:owner,staticStyle:{\"grid-column-start\":\"name\"},attrs:{\"type\":\"text\",\"placeholder\":\"name\"},domProps:{\"value\":owner},on:{\"change\":function($event){_vm.updateOwner($event, owner)}}}),(owner !== '')?_c('div',{key:'remove-' + owner,staticStyle:{\"grid-column-start\":\"remove\"},on:{\"click\":function($event){_vm.removeOwner(owner)}}},[_c('i',{staticClass:\"fas fa-trash-alt\"})]):_vm._e()]}),_c('div',{staticClass:\"spanrow header\"},[_vm._v(\"Trackers\")]),_vm._l((_vm.shape.trackers),function(tracker){return [_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(tracker.name),expression:\"tracker.name\"}],key:'name-'+tracker.uuid,staticStyle:{\"grid-column-start\":\"name\"},attrs:{\"type\":\"text\",\"placeholder\":\"name\"},domProps:{\"value\":(tracker.name)},on:{\"change\":function($event){_vm.updateShape(false);},\"input\":function($event){if($event.target.composing){ return; }_vm.$set(tracker, \"name\", $event.target.value)}}}),_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(tracker.value),expression:\"tracker.value\",modifiers:{\"number\":true}}],key:'value-'+tracker.uuid,attrs:{\"type\":\"text\",\"title\":\"Current value\"},domProps:{\"value\":(tracker.value)},on:{\"change\":function($event){_vm.updateShape(false)},\"input\":function($event){if($event.target.composing){ return; }_vm.$set(tracker, \"value\", _vm._n($event.target.value))},\"blur\":function($event){_vm.$forceUpdate()}}}),_c('span',{key:'fspan-'+tracker.uuid},[_vm._v(\"/\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(tracker.maxvalue),expression:\"tracker.maxvalue\",modifiers:{\"number\":true}}],key:'maxvalue-'+tracker.uuid,attrs:{\"type\":\"text\",\"title\":\"Current value\"},domProps:{\"value\":(tracker.maxvalue)},on:{\"change\":function($event){_vm.updateShape(false)},\"input\":function($event){if($event.target.composing){ return; }_vm.$set(tracker, \"maxvalue\", _vm._n($event.target.value))},\"blur\":function($event){_vm.$forceUpdate()}}}),_c('span',{key:'sspan-'+tracker.uuid}),_c('div',{key:'visibility-'+tracker.uuid,style:({opacity: tracker.visible ? 1.0 : 0.3}),on:{\"click\":function($event){tracker.visible = !tracker.visible;_vm.updateShape(false)}}},[_c('i',{staticClass:\"fas fa-eye\"})]),_c('span',{key:'tspan-'+tracker.uuid}),(tracker.name !== '' || tracker.value !== 0)?_c('div',{key:'remove-'+tracker.uuid,on:{\"click\":function($event){_vm.removeTracker(tracker.uuid)}}},[_c('i',{staticClass:\"fas fa-trash-alt\"})]):_vm._e()]}),_c('div',{staticClass:\"spanrow header\"},[_vm._v(\"Auras\")]),_vm._l((_vm.shape.auras),function(aura){return [_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(aura.name),expression:\"aura.name\"}],key:'name-'+aura.uuid,staticStyle:{\"grid-column-start\":\"name\"},attrs:{\"type\":\"text\",\"placeholder\":\"name\"},domProps:{\"value\":(aura.name)},on:{\"change\":function($event){_vm.updateShape(false)},\"input\":function($event){if($event.target.composing){ return; }_vm.$set(aura, \"name\", $event.target.value)}}}),_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(aura.value),expression:\"aura.value\",modifiers:{\"number\":true}}],key:'value-'+aura.uuid,attrs:{\"type\":\"text\",\"title\":\"Current value\"},domProps:{\"value\":(aura.value)},on:{\"change\":function($event){_vm.updateShape(true)},\"input\":function($event){if($event.target.composing){ return; }_vm.$set(aura, \"value\", _vm._n($event.target.value))},\"blur\":function($event){_vm.$forceUpdate()}}}),_c('span',{key:'fspan-'+aura.uuid},[_vm._v(\"/\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(aura.dim),expression:\"aura.dim\",modifiers:{\"number\":true}}],key:'dimvalue-'+aura.uuid,attrs:{\"type\":\"text\",\"title\":\"Dim value\"},domProps:{\"value\":(aura.dim)},on:{\"change\":function($event){_vm.updateShape(true)},\"input\":function($event){if($event.target.composing){ return; }_vm.$set(aura, \"dim\", _vm._n($event.target.value))},\"blur\":function($event){_vm.$forceUpdate()}}}),_c('color-picker',{key:'colour-'+aura.uuid,attrs:{\"color\":aura.colour},on:{\"update:color\":function($event){_vm.$set(aura, \"colour\", $event)},\"input\":function($event){_vm.updateAuraColour(aura, $event)},\"change\":function($event){_vm.updateShape(true)}}}),_c('div',{key:'visibility-'+aura.uuid,style:({opacity: aura.visible ? 1.0 : 0.3}),on:{\"click\":function($event){aura.visible = !aura.visible;_vm.updateShape(true)}}},[_c('i',{staticClass:\"fas fa-eye\"})]),_c('div',{key:'visionsource-'+aura.uuid,style:({opacity: aura.visionSource ? 1.0 : 0.3}),on:{\"click\":function($event){_vm.updateAuraVisionSource(aura)}}},[_c('i',{staticClass:\"fas fa-lightbulb\"})]),(aura.name !== '' || aura.value !== 0)?_c('div',{key:'remove-'+aura.uuid,on:{\"click\":function($event){_vm.removeAura(aura.uuid)}}},[_c('i',{staticClass:\"fas fa-trash-alt\"})]):_vm._e()]}),_c('div',{staticClass:\"spanrow header\"},[_vm._v(\"Annotation\")]),_c('textarea',{staticClass:\"spanrow\",domProps:{\"value\":_vm.shape.annotation},on:{\"change\":_vm.updateAnnotation}})],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"74f43d04-vue-loader-template\\\"}!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./edit_dialog.vue?vue&type=template&id=078b3b76&scoped=true&\"","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./asset_node.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./asset_node.vue?vue&type=script&lang=ts&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.getActiveLayer() !== undefined)?_c('ContextMenu',{attrs:{\"visible\":_vm.visible,\"left\":_vm.x + 'px',\"top\":_vm.y + 'px'},on:{\"close\":_vm.close}},[(_vm.getLayers().length > 1)?_c('li',[_vm._v(\"Layer\\n    \"),_c('ul',_vm._l((_vm.getLayers()),function(layer){return _c('li',{key:layer.name,style:([_vm.getActiveLayer().name === layer.name ? {'background-color':'#82c8a0'}: {}]),on:{\"click\":function($event){_vm.setLayer(layer.name)}}},[_vm._v(_vm._s(layer.name))])}))]):_vm._e(),_c('li',{on:{\"click\":_vm.moveToBack}},[_vm._v(\"Move to back\")]),_c('li',{on:{\"click\":_vm.moveToFront}},[_vm._v(\"Move to front\")]),_c('li',{on:{\"click\":_vm.addInitiative}},[_vm._v(_vm._s(_vm.getInitiativeWord())+\" initiative\")])]):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"74f43d04-vue-loader-template\\\"}!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./shapecontext.vue?vue&type=template&id=7111f3f6&scoped=true&\"","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\nimport { Prop } from \"vue-property-decorator\";\n\n@Component\nexport default class Modal extends Vue {\n    @Prop(Boolean) visible!: boolean;\n    @Prop({ type: Boolean, default: true }) mask!: boolean;\n\n    $refs!: {\n        container: HTMLElement;\n    };\n\n    positioned = false;\n    offsetX = 0;\n    offsetY = 0;\n    screenX = 0;\n    screenY = 0;\n    dragging = false;\n\n    // Example of mounted required: opening note\n    mounted() {\n        this.updatePosition();\n    }\n    // Example of updated required: opening initiative\n    updated() {\n        this.updatePosition();\n    }\n\n    close(event: MouseEvent) {\n        this.$emit(\"close\");\n    }\n    updatePosition() {\n        if (!this.positioned) {\n            const container = <any>this.$refs.container;\n            if (container.offsetWidth === 0 && container.offsetHeight === 0) return;\n            this.$refs.container.style.left = (window.innerWidth - container.offsetWidth) / 2 + \"px\";\n            this.$refs.container.style.top = (window.innerHeight - container.offsetHeight) / 2 + \"px\";\n            this.positioned = true;\n        }\n    }\n    dragStart(event: DragEvent) {\n        if (event === null || event.dataTransfer === null) return;\n        event.dataTransfer.setData(\"Hack\", \"\");\n        // Because the drag event is happening on the header, we have to change the drag image\n        // in order to give the impression that the entire modal is dragged.\n        event.dataTransfer.setDragImage(<Element>this.$refs.container, event.offsetX, event.offsetY);\n        this.offsetX = event.offsetX;\n        this.offsetY = event.offsetY;\n        this.screenX = event.screenX;\n        this.screenY = event.screenY;\n        this.dragging = true;\n    }\n    dragEnd(event: DragEvent) {\n        this.dragging = false;\n        let left = event.clientX - this.offsetX;\n        let top = event.clientY - this.offsetY;\n        if (event.clientX === 0 && event.clientY === 0 && event.pageX === 0 && event.pageY === 0) {\n            left = parseInt(this.$refs.container.style.left!, 10) - (this.screenX - event.screenX);\n            top = parseInt(this.$refs.container.style.top!, 10) - (this.screenY - event.screenY);\n        }\n        if (left < 0) left = 0;\n        if (left > window.innerWidth - 100) left = window.innerWidth - 100;\n        if (top < 0) top = 0;\n        if (top > window.innerHeight - 100) top = window.innerHeight - 100;\n        this.$refs.container.style.left = left + \"px\";\n        this.$refs.container.style.top = top + \"px\";\n        this.$refs.container.style.display = \"block\";\n    }\n    dragOver(event: DragEvent) {\n        if (this.dragging) this.$refs.container.style.display = \"none\";\n    }\n}\n","import io from \"socket.io-client\";\n\nimport { Asset } from \"@/core/comm/types\";\nimport { assetStore } from \"./store\";\n\nexport const socket = io(location.protocol + \"//\" + location.host + \"/pa_assetmgmt\", { autoConnect: false });\n\n// export const socket = io.connect(location.protocol + \"//\" + location.host + \"/pa_assetmgmt\");\nsocket.on(\"connect\", () => {\n    console.log(\"Connected\");\n});\nsocket.on(\"disconnect\", () => {\n    console.log(\"Disconnected\");\n});\nsocket.on(\"redirect\", (destination: string) => {\n    console.log(\"redirecting\");\n    window.location.href = destination;\n});\nsocket.on(\"Folder.Root.Set\", (root: number) => {\n    assetStore.setRoot(root);\n});\nsocket.on(\"Folder.Set\", (folder: Asset) => {\n    assetStore.clear();\n    if (folder.children) {\n        for (const child of folder.children) {\n            assetStore.idMap.set(child.id, child);\n            if (child.file_hash) {\n                assetStore.files.push(child.id);\n            } else {\n                assetStore.folders.push(child.id);\n            }\n        }\n    }\n});\nsocket.on(\"Folder.Create\", (folder: Asset) => {\n    assetStore.folders.push(folder.id);\n    assetStore.idMap.set(folder.id, folder);\n});\nsocket.on(\"Asset.Upload.Finish\", (asset: Asset) => {\n    assetStore.idMap.set(asset.id, asset);\n    assetStore.files.push(asset.id);\n});\n","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tools.vue?vue&type=style&index=0&id=1fee50f5&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tools.vue?vue&type=style&index=0&id=1fee50f5&scoped=true&lang=css&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./game.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./game.vue?vue&type=style&index=0&lang=css&\"","import { GlobalPoint, LocalPoint } from \"@/game/geom\";\nimport { BoundingRect } from \"@/game/shapes/boundingrect\";\nimport { Shape } from \"@/game/shapes/shape\";\nimport { g2lx, g2ly, g2lz } from \"@/game/units\";\nimport { getFogColour } from \"@/game/utils\";\n\nexport class MultiLine extends Shape {\n    type = \"multiline\";\n    _points: GlobalPoint[] = [];\n    lineWidth: number;\n    constructor(\n        startPoint: GlobalPoint,\n        points?: GlobalPoint[],\n        lineWidth?: number,\n        strokeColour?: string,\n        uuid?: string,\n    ) {\n        super(startPoint, \"rgba(0, 0, 0, 0)\", strokeColour || \"#000\", uuid);\n        this._points = points || [];\n        this.lineWidth = lineWidth || 3;\n    }\n    asDict() {\n        return Object.assign(this.getBaseDict(), {\n            line_width: this.lineWidth,\n            points: this._points.map(p => ({ x: p.x, y: p.y })),\n        });\n    }\n    get points() {\n        return this._points.map(point => [point.x, point.y]);\n    }\n    getBoundingBox(): BoundingRect {\n        let minx: number = this.refPoint.x;\n        let maxx: number = this.refPoint.y;\n        let miny: number = this.refPoint.x;\n        let maxy: number = this.refPoint.y;\n        for (const p of this._points) {\n            if (p.x < minx) minx = p.x;\n            if (p.x > maxx) maxx = p.x;\n            if (p.y < miny) miny = p.y;\n            if (p.y > maxy) maxy = p.y;\n        }\n        return new BoundingRect(new GlobalPoint(minx, miny), maxx - minx, maxy - miny);\n    }\n    draw(ctx: CanvasRenderingContext2D) {\n        super.draw(ctx);\n        ctx.beginPath();\n        ctx.lineCap = \"round\";\n        ctx.lineJoin = \"round\";\n        ctx.moveTo(g2lx(this.refPoint.x), g2ly(this.refPoint.y));\n        for (const p of this._points) ctx.lineTo(g2lx(p.x), g2ly(p.y));\n        if (this.strokeColour === \"fog\") ctx.strokeStyle = getFogColour();\n        else ctx.strokeStyle = this.strokeColour;\n        ctx.lineWidth = g2lz(this.lineWidth);\n        ctx.stroke();\n    }\n    contains(point: GlobalPoint): boolean {\n        return this._points.includes(point);\n    }\n\n    center(): GlobalPoint;\n    center(centerPoint: GlobalPoint): void;\n    center(centerPoint?: GlobalPoint): GlobalPoint | void {} // TODO\n    getCorner(point: GlobalPoint): string | undefined {\n        return \"\";\n    } // TODO\n    visibleInCanvas(canvas: HTMLCanvasElement): boolean {\n        return true;\n    } // TODO\n    snapToGrid(): void {}\n    resizeToGrid(): void {}\n    resize(resizeDir: string, point: LocalPoint): void {}\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"outer\",on:{\"click\":function($event){if($event.target !== $event.currentTarget){ return null; }return _vm.open($event)}}},[_c('div',{staticClass:\"current-color\",style:(_vm.transparent ? 'background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAIAAADZF8uwAAAAGUlEQVQYV2M4gwH+YwCGIasIUwhT25BVBADtzYNYrHvv4gAAAABJRU5ErkJggg==)' : 'background-color:' + _vm.color),on:{\"click\":function($event){if($event.target !== $event.currentTarget){ return null; }return _vm.open($event)}}}),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.display),expression:\"display\"}],staticClass:\"mask\",on:{\"click\":function($event){if($event.target !== $event.currentTarget){ return null; }return _vm.closePicker($event)}}}),_c('chrome-picker',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.display),expression:\"display\"}],ref:\"chromePicker\",style:({position: 'fixed', left:_vm.left + 'px', top:_vm.top + 'px', 'z-index': 9999}),attrs:{\"value\":_vm.color,\"tabindex\":\"-1\"},on:{\"input\":_vm.updateColor}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"74f43d04-vue-loader-template\\\"}!../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./colorpicker.vue?vue&type=template&id=b4f2c0b0&scoped=true&\"","import { render, staticRenderFns } from \"./draw.vue?vue&type=template&id=7abc7fe9&scoped=true&\"\nimport script from \"./draw.vue?vue&type=script&lang=ts&\"\nexport * from \"./draw.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./draw.vue?vue&type=style&index=0&id=7abc7fe9&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7abc7fe9\",\n  null\n  \n)\n\ncomponent.options.__file = \"draw.vue\"\nexport default component.exports","import tinycolor from \"tinycolor2\";\n\nimport { LocalPoint } from \"@/game/geom\";\nimport { gameStore } from \"@/game/store\";\n\nexport function getMouse(e: MouseEvent): LocalPoint {\n    return new LocalPoint(e.pageX, e.pageY);\n}\n\nexport function getFogColour(opposite: boolean = false): string {\n    const tc = tinycolor(gameStore.fowColour);\n    if (gameStore.IS_DM) tc.setAlpha(opposite ? 1 : gameStore.fowOpacity);\n    else tc.setAlpha(1);\n    return tc.toRgbString();\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport * as tinycolor from \"tinycolor2\";\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\n\nimport { mapState } from \"vuex\";\n\nimport ColorPicker from \"@/core/components/colorpicker.vue\";\nimport Modal from \"@/core/components/modals/modal.vue\";\n\nimport { calcFontScale } from \"@/core/utils\";\nimport { LocalPoint } from \"@/game/geom\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { CircularToken } from \"@/game/shapes/circulartoken\";\nimport { gameStore } from \"@/game/store\";\nimport { getUnitDistance, l2g } from \"@/game/units\";\nimport { Watch } from \"vue-property-decorator\";\n\n@Component({\n    components: {\n        Modal,\n        \"color-picker\": ColorPicker,\n    },\n    computed: {\n        ...mapState(\"game\", [\"unitSize\"]),\n    },\n})\nexport default class CreateTokenModal extends Vue {\n    x = 0;\n    y = 0;\n    visible = false;\n    text = \"X\";\n    fillColour = \"rgba(255, 255, 255, 1)\";\n    borderColour = \"rgba(0, 0, 0, 1)\";\n\n    mounted() {\n        this.updatePreview();\n    }\n\n    @Watch(\"text\")\n    onTextChange(newValue: string, oldValue: string) {\n        this.updatePreview();\n    }\n    @Watch(\"fillColour\")\n    onFillChange(newValue: string, oldValue: string) {\n        this.updatePreview();\n    }\n    @Watch(\"borderColour\")\n    onBorderChange(newValue: string, oldValue: string) {\n        this.updatePreview();\n    }\n\n    open(x: number, y: number) {\n        this.visible = true;\n        this.x = x;\n        this.y = y;\n    }\n    submit() {\n        const layer = layerManager.getLayer();\n        if (layer === undefined) return;\n        const token = new CircularToken(\n            l2g(new LocalPoint(this.x, this.y)),\n            getUnitDistance(gameStore.unitSize / 2),\n            this.text,\n            \"10px serif\",\n            this.fillColour,\n            this.borderColour,\n        );\n        token.owners.push(gameStore.username);\n        layer.addShape(token, true);\n        layer.invalidate(false);\n        this.visible = false;\n    }\n    updatePreview() {\n        const ctx = (<HTMLCanvasElement>this.$refs.canvas).getContext(\"2d\")!;\n        ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n        ctx.beginPath();\n        const dest = { x: ctx.canvas.width / 2, y: ctx.canvas.height / 2 };\n        const r = Math.min(dest.x, dest.y) * 0.9;\n\n        ctx.fillStyle = this.fillColour;\n\n        ctx.arc(dest.x, dest.y, r, 0, 2 * Math.PI);\n        ctx.fill();\n        if (this.borderColour !== \"rgba(0, 0, 0, 0)\") {\n            ctx.beginPath();\n            ctx.lineWidth = 5;\n            ctx.strokeStyle = this.borderColour;\n            ctx.arc(dest.x, dest.y, r, 0, 2 * Math.PI);\n            ctx.stroke();\n        }\n        ctx.save();\n        ctx.textAlign = \"center\";\n        ctx.textBaseline = \"middle\";\n        const xs = calcFontScale(ctx, this.text, r, r);\n        const ys = 0;\n        ctx.transform(xs, ys, -ys, xs, dest.x, dest.y);\n        ctx.fillStyle = tinycolor.mostReadable(this.fillColour, [\"#000\", \"#fff\"]).toHexString();\n        ctx.fillText(this.text, 0, 0);\n        ctx.restore();\n    }\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\n\nimport ConfirmDialog from \"@/core/components/modals/confirm.vue\";\nimport Modal from \"@/core/components/modals/modal.vue\";\n\nimport { getRef } from \"@/core/utils\";\nimport { Note } from \"@/game/comm/types/general\";\nimport { gameStore } from \"@/game/store\";\n\n@Component({\n    components: {\n        Modal,\n    },\n})\nexport default class NoteDialog extends Vue {\n    visible = false;\n    note: Note | null = null;\n\n    open(note: Note) {\n        this.visible = true;\n        this.note = note;\n    }\n    calcHeight() {\n        if (this.$refs.textarea) {\n            const el = <HTMLElement>this.$refs.textarea;\n            el.style.height = \"auto\";\n            el.style.height = el.scrollHeight + \"px\";\n            // Using the return value without the above did not achieve what I want, so hey /shrug\n            return el.scrollHeight + \"px\";\n        }\n        return \"100px\";\n    }\n    updateNote() {\n        if (this.note) gameStore.updateNote({ note: this.note, sync: true });\n    }\n    removeNote() {\n        getRef<ConfirmDialog>(\"confirm\")\n            .open(\"Are you sure you wish to remove this?\")\n            .then(\n                (result: boolean) => {\n                    if (result && this.note) {\n                        gameStore.removeNote({ note: this.note, sync: true });\n                        this.visible = false;\n                    }\n                },\n                () => {},\n            );\n    }\n}\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./initiative.vue?vue&type=style&index=0&id=ccaf03d6&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./initiative.vue?vue&type=style&index=0&id=ccaf03d6&scoped=true&lang=css&\"","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Component from \"vue-class-component\";\n\nimport { Watch } from \"vue-property-decorator\";\n\nimport ColorPicker from \"@/core/components/colorpicker.vue\";\nimport Tool from \"@/game/ui/tools/tool.vue\";\n\nimport { socket } from \"@/game/api/socket\";\nimport { GlobalPoint } from \"@/game/geom\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { Circle } from \"@/game/shapes/circle\";\nimport { MultiLine } from \"@/game/shapes/multiline\";\nimport { Rect } from \"@/game/shapes/rect\";\nimport { Shape } from \"@/game/shapes/shape\";\nimport { gameStore } from \"@/game/store\";\nimport { getUnitDistance, l2g } from \"@/game/units\";\nimport { getMouse } from \"@/game/utils\";\n\n@Component({\n    components: {\n        \"color-picker\": ColorPicker,\n    },\n})\nexport default class DrawTool extends Tool {\n    name = \"Draw\";\n    active = false;\n\n    startPoint: GlobalPoint | null = null;\n    shape: Shape | null = null;\n    brushHelper: Circle | null = null;\n\n    fillColour = \"rgba(0, 0, 0, 1)\";\n    borderColour = \"rgba(255, 255, 255, 0)\";\n\n    shapeSelect = \"square\";\n    shapes = [\"square\", \"circle\", \"paint-brush\"];\n    modeSelect = \"normal\";\n    modes = [\"normal\", \"reveal\", \"hide\"];\n\n    brushSize = getUnitDistance(gameStore.unitSize);\n\n    get helperSize(): number {\n        if (this.shapeSelect === \"paint-brush\") return this.brushSize / 2;\n        return getUnitDistance(this.unitSize) / 8;\n    }\n    get IS_DM(): boolean {\n        return gameStore.IS_DM;\n    }\n    get unitSize(): number {\n        return gameStore.unitSize;\n    }\n    get useGrid(): boolean {\n        return gameStore.useGrid;\n    }\n\n    @Watch(\"fillColour\")\n    onFillChange() {\n        if (this.brushHelper) this.brushHelper.fillColour = this.fillColour;\n    }\n\n    @Watch(\"modeSelect\")\n    onModeUpdate(newValue: string, oldValue: string) {\n        this.onModeChange(newValue, oldValue);\n    }\n\n    setupBrush() {\n        if (this.brushHelper === null) return;\n        if (this.modeSelect === \"reveal\" || this.modeSelect === \"hide\") {\n            this.brushHelper.options.set(\"preFogShape\", true);\n            this.brushHelper.options.set(\"skipDraw\", true);\n            this.brushHelper.fillColour = \"rgba(0, 0, 0, 1)\";\n\n            if (this.modeSelect === \"reveal\") this.brushHelper.globalCompositeOperation = \"source-over\";\n            else if (this.modeSelect === \"hide\") this.brushHelper.globalCompositeOperation = \"destination-out\";\n        } else {\n            this.brushHelper.options.delete(\"preFogShape\");\n            this.brushHelper.options.delete(\"skipDraw\");\n            this.brushHelper.globalCompositeOperation = \"source-over\";\n            this.brushHelper.fillColour = this.fillColour;\n        }\n    }\n    onModeChange(newValue: string, oldValue: string) {\n        if (this.brushHelper === null) return;\n\n        const fowLayer = layerManager.getLayer(\"fow\");\n        const normalLayer = layerManager.getLayer();\n        if (fowLayer === undefined || normalLayer === undefined) return;\n\n        this.setupBrush();\n\n        if (newValue !== \"normal\" && oldValue === \"normal\") {\n            normalLayer.removeShape(this.brushHelper, false);\n            fowLayer.addShape(this.brushHelper, false);\n        } else if (newValue === \"normal\" && oldValue !== \"normal\") {\n            normalLayer.addShape(this.brushHelper, false);\n            fowLayer.removeShape(this.brushHelper, false);\n        }\n    }\n    getLayer() {\n        if (this.modeSelect === \"normal\") return layerManager.getLayer();\n        return layerManager.getLayer(\"fow\");\n    }\n    onMouseDown(event: MouseEvent) {\n        const layer = this.getLayer();\n        if (layer === undefined) {\n            console.log(\"No active layer!\");\n            return;\n        }\n        this.active = true;\n        this.startPoint = l2g(getMouse(event));\n        if (this.shapeSelect === \"square\")\n            this.shape = new Rect(this.startPoint.clone(), 0, 0, this.fillColour, this.borderColour);\n        else if (this.shapeSelect === \"circle\")\n            this.shape = new Circle(this.startPoint.clone(), this.helperSize, this.fillColour, this.borderColour);\n        else if (this.shapeSelect === \"paint-brush\") {\n            this.shape = new MultiLine(this.startPoint.clone(), [], this.brushSize);\n            this.shape.fillColour = this.fillColour;\n        } else return;\n\n        if (this.modeSelect !== \"normal\") {\n            this.shape.options.set(\"preFogShape\", true);\n            this.shape.options.set(\"skipDraw\", true);\n            this.shape.fillColour = \"rgba(0, 0, 0, 1)\";\n        }\n        if (this.modeSelect === \"reveal\") this.shape.globalCompositeOperation = \"source-over\";\n        else if (this.modeSelect === \"hide\") this.shape.globalCompositeOperation = \"destination-out\";\n\n        this.shape.owners.push(gameStore.username);\n        if (layer.name === \"fow\" && this.modeSelect === \"normal\") {\n            this.shape.visionObstruction = true;\n            this.shape.movementObstruction = true;\n        }\n        gameStore.visionBlockers.push(this.shape.uuid);\n        layer.addShape(this.shape, true, false);\n\n        // Push brushhelper to back\n        this.onDeselect();\n        this.onSelect();\n    }\n    onMouseMove(event: MouseEvent) {\n        const endPoint = l2g(getMouse(event));\n        const layer = this.getLayer();\n        if (layer === undefined) {\n            console.log(\"No active layer!\");\n            return;\n        }\n\n        if (this.brushHelper !== null) {\n            this.brushHelper.r = this.helperSize;\n            this.brushHelper.refPoint = endPoint;\n            if (!this.active) layer.invalidate(false);\n        }\n\n        if (!this.active || this.startPoint === null || this.shape === null) return;\n\n        if (this.shapeSelect === \"square\") {\n            (<Rect>this.shape).w = Math.abs(endPoint.x - this.startPoint.x);\n            (<Rect>this.shape).h = Math.abs(endPoint.y - this.startPoint.y);\n            this.shape.refPoint.x = Math.min(this.startPoint.x, endPoint.x);\n            this.shape.refPoint.y = Math.min(this.startPoint.y, endPoint.y);\n        } else if (this.shapeSelect === \"circle\") {\n            (<Circle>this.shape).r = endPoint.subtract(this.startPoint).length();\n        } else if (this.shapeSelect === \"paint-brush\") {\n            (<MultiLine>this.shape)._points.push(endPoint);\n        }\n        socket.emit(\"Shape.Update\", { shape: this.shape!.asDict(), redraw: true, temporary: true });\n        if (this.shape.visionObstruction) gameStore.recalculateBV(true);\n        layer.invalidate(false);\n    }\n    onMouseUp(event: MouseEvent) {\n        if (!this.active || this.shape === null) return;\n        if (!event.altKey && this.useGrid) {\n            this.shape.resizeToGrid();\n        }\n        if (this.shape.visionObstruction) gameStore.recalculateBV();\n        socket.emit(\"Shape.Update\", { shape: this.shape!.asDict(), redraw: true, temporary: false });\n        this.active = false;\n    }\n    onSelect() {\n        const layer = this.getLayer();\n        if (layer === undefined) return;\n        this.brushHelper = new Circle(new GlobalPoint(-1000, -1000), this.brushSize / 2, this.fillColour);\n        this.setupBrush();\n        layer.addShape(this.brushHelper, false); // during mode change the shape is already added\n    }\n    onDeselect() {\n        const layer = this.getLayer();\n        if (this.brushHelper !== null && layer !== undefined) layer.removeShape(this.brushHelper, false);\n    }\n}\n","import { GlobalPoint, LocalPoint } from \"@/game/geom\";\nimport { BoundingRect } from \"@/game/shapes/boundingrect\";\nimport { Shape } from \"@/game/shapes/shape\";\nimport { g2lx, g2ly } from \"@/game/units\";\n\nexport class Line extends Shape {\n    type = \"line\";\n    endPoint: GlobalPoint;\n    lineWidth: number;\n    constructor(\n        startPoint: GlobalPoint,\n        endPoint: GlobalPoint,\n        lineWidth?: number,\n        strokeColour?: string,\n        uuid?: string,\n    ) {\n        super(startPoint, \"rgba(0, 0, 0, 0)\", strokeColour || \"#000\", uuid);\n        this.endPoint = endPoint;\n        this.lineWidth = lineWidth === undefined ? 1 : lineWidth;\n    }\n    asDict() {\n        return Object.assign(this.getBaseDict(), {\n            x2: this.endPoint.x,\n            y2: this.endPoint.y,\n            line_width: this.lineWidth,\n        });\n    }\n    get points() {\n        return [[this.refPoint.x, this.refPoint.y], [this.endPoint.x, this.endPoint.y]];\n    }\n    getBoundingBox(): BoundingRect {\n        return new BoundingRect(\n            new GlobalPoint(Math.min(this.refPoint.x, this.endPoint.x), Math.min(this.refPoint.x, this.endPoint.y)),\n            Math.abs(this.refPoint.x - this.endPoint.x),\n            Math.abs(this.refPoint.y - this.endPoint.y),\n        );\n    }\n    draw(ctx: CanvasRenderingContext2D) {\n        super.draw(ctx);\n        ctx.strokeStyle = this.strokeColour;\n        ctx.beginPath();\n        ctx.moveTo(g2lx(this.refPoint.x), g2ly(this.refPoint.y));\n        ctx.lineTo(g2lx(this.endPoint.x), g2ly(this.endPoint.y));\n        ctx.lineWidth = this.lineWidth;\n        ctx.stroke();\n    }\n    contains(point: GlobalPoint): boolean {\n        return false; // TODO\n    }\n\n    center(): GlobalPoint;\n    center(centerPoint: GlobalPoint): void;\n    center(centerPoint?: GlobalPoint): GlobalPoint | void {} // TODO\n    getCorner(point: GlobalPoint): string | undefined {\n        return \"\";\n    } // TODO\n    visibleInCanvas(canvas: HTMLCanvasElement): boolean {\n        return true;\n    } // TODO\n    snapToGrid(): void {}\n    resizeToGrid(): void {}\n    resize(resizeDir: string, point: LocalPoint): void {}\n}\n","// import \"./class-component-hooks\";\n\nimport axios, { AxiosResponse } from \"axios\";\nimport Vue from \"vue\";\nimport Router from \"vue-router\";\n\nVue.use(Router);\n\nimport AssetManager from \"@/assetManager/manager.vue\";\nimport Login from \"@/auth/login.vue\";\nimport Logout from \"@/auth/logout\";\nimport LoadComponent from \"@/core/components/load.vue\";\nimport Dashboard from \"@/dashboard/main.vue\";\nimport Game from \"@/game/game.vue\";\nimport Invitation from \"@/invitation/invitation\";\n\nimport { coreStore } from \"@/core/store\";\n// import { AssetManager } from \"./assetManager/assets\";\n// const AssetManager = () => import(\"./assetManager/assets\").then(m => m.AssetManager);\n\nexport const router = new Router({\n    mode: \"history\",\n    base: process.env.BASE_URL,\n    routes: [\n        {\n            path: \"/\",\n            redirect: \"/dashboard\",\n        },\n        {\n            path: \"/_load\",\n            name: \"load\",\n            component: LoadComponent,\n        },\n        {\n            path: \"/assets\",\n            component: AssetManager,\n            meta: {\n                auth: true,\n            },\n        },\n        {\n            path: \"/auth\",\n            component: { template: \"<router-view></router-view>\" },\n            children: [{ path: \"login\", component: Login }, { path: \"logout\", component: Logout }],\n        },\n        {\n            path: \"/invite/:code\",\n            component: Invitation,\n            meta: {\n                auth: true,\n            },\n        },\n        {\n            path: \"/dashboard\",\n            component: Dashboard,\n            meta: {\n                auth: true,\n            },\n        },\n        {\n            path: \"/game/:creator/:room\",\n            component: Game,\n            meta: {\n                auth: true,\n            },\n        },\n    ],\n});\n\nrouter.beforeEach((to, from, next) => {\n    if (!coreStore.initialized && to.path !== \"/_load\") {\n        next({ path: \"/_load\" });\n        axios\n            .get(\"/api/auth\")\n            .then((response: AxiosResponse) => {\n                if (response.data.auth) {\n                    coreStore.setAuthenticated(true);\n                    coreStore.setUsername(response.data.username);\n                }\n                coreStore.setInitialized(true);\n                router.push(to.path);\n            })\n            .catch(() => {\n                console.error(\"Authentication check could not be fulfilled.\");\n            });\n    } else if (to.matched.some(record => record.meta.auth) && !coreStore.authenticated) {\n        next({ path: \"/auth/login\", query: { redirect: to.path } });\n    } else {\n        next();\n    }\n});\n","\n\n\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\n\n@Component\nexport default class Tool extends Vue {\n    name = \"\";\n    selected = false;\n    active = false;\n    get detailRight(): string {\n        const rect = (<any>this.$parent.$refs[this.name + \"-selector\"])[0].getBoundingClientRect();\n        const mid = rect.left + rect.width / 2;\n\n        return `${window.innerWidth - Math.min(window.innerWidth - 25, mid + 75)}px`;\n    }\n    get detailArrow(): string {\n        const rect = (<any>this.$parent.$refs[this.name + \"-selector\"])[0].getBoundingClientRect();\n        const mid = rect.left + rect.width / 2;\n        const right = Math.min(window.innerWidth - 25, mid + 75);\n        return `${right - mid - 14}px`; // border width\n    }\n    created() {\n        this.$parent.$on(\"mousedown\", (event: MouseEvent, tool: string) => {\n            if (tool === this.name) this.onMouseDown(event);\n        });\n        this.$parent.$on(\"mouseup\", (event: MouseEvent, tool: string) => {\n            if (tool === this.name) this.onMouseUp(event);\n        });\n        this.$parent.$on(\"mousemove\", (event: MouseEvent, tool: string) => {\n            if (tool === this.name) this.onMouseMove(event);\n        });\n        this.$parent.$on(\"contextmenu\", (event: MouseEvent, tool: string) => {\n            if (tool === this.name) this.onContextMenu(event);\n        });\n        this.$parent.$on(\"tools-select-change\", (newValue: string, oldValue: string) => {\n            if (oldValue === this.name) {\n                this.selected = false;\n                this.onDeselect();\n            } else if (newValue === this.name) {\n                this.selected = true;\n                this.onSelect();\n            }\n        });\n    }\n    onSelect() {}\n    onDeselect() {}\n    onMouseDown(event: MouseEvent) {}\n    onMouseUp(event: MouseEvent) {}\n    onMouseMove(event: MouseEvent) {}\n    onContextMenu(event: MouseEvent) {}\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.selected)?_c('div',{staticClass:\"tool-detail\",style:({'--detailRight': _vm.detailRight, '--detailArrow': _vm.detailArrow})},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.IS_DM),expression:\"IS_DM\"}]},[_vm._v(\"Mode\")]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.IS_DM),expression:\"IS_DM\"}],staticClass:\"selectgroup\"},_vm._l((_vm.modes),function(mode){return _c('div',{key:mode,staticClass:\"option\",class:{'option-selected': _vm.modeSelect === mode},on:{\"click\":function($event){_vm.modeSelect = mode}}},[_vm._v(_vm._s(mode))])})),_c('div',[_vm._v(\"Shape\")]),_c('div',{staticClass:\"selectgroup\"},_vm._l((_vm.shapes),function(shape){return _c('div',{key:shape,staticClass:\"option\",class:{'option-selected': _vm.shapeSelect === shape},on:{\"click\":function($event){_vm.shapeSelect = shape}}},[_c('i',{staticClass:\"fas\",class:'fa-' + shape})])})),_c('div',[_vm._v(\"Colours\")]),_c('div',{staticClass:\"selectgroup\"},[_c('color-picker',{staticClass:\"option\",attrs:{\"color\":_vm.fillColour},on:{\"update:color\":function($event){_vm.fillColour=$event}}}),_c('color-picker',{staticClass:\"option\",attrs:{\"color\":_vm.borderColour},on:{\"update:color\":function($event){_vm.borderColour=$event}}})],1),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.shapeSelect === 'paint-brush'),expression:\"shapeSelect === 'paint-brush'\"}]},[_vm._v(\"Brush size\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.brushSize),expression:\"brushSize\"},{name:\"show\",rawName:\"v-show\",value:(_vm.shapeSelect === 'paint-brush'),expression:\"shapeSelect === 'paint-brush'\"}],staticStyle:{\"max-width\":\"100px\"},attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.brushSize)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.brushSize=$event.target.value}}})]):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"74f43d04-vue-loader-template\\\"}!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./draw.vue?vue&type=template&id=7abc7fe9&scoped=true&\"","import { render, staticRenderFns } from \"./tools.vue?vue&type=template&id=1fee50f5&scoped=true&\"\nimport script from \"./tools.vue?vue&type=script&lang=ts&\"\nexport * from \"./tools.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./tools.vue?vue&type=style&index=0&id=1fee50f5&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1fee50f5\",\n  null\n  \n)\n\ncomponent.options.__file = \"tools.vue\"\nexport default component.exports","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tool.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tool.vue?vue&type=script&lang=ts&\"","import { InitiativeData } from \"@/game/comm/types/general\";\nimport { ServerAsset } from \"@/game/comm/types/shapes\";\nimport { GlobalPoint } from \"@/game/geom\";\nimport { BaseRect } from \"@/game/shapes/baserect\";\nimport { gameStore } from \"@/game/store\";\nimport { g2lx, g2ly, g2lz } from \"@/game/units\";\n\nexport class Asset extends BaseRect {\n    type = \"assetrect\";\n    img: HTMLImageElement;\n    src: string = \"\";\n    constructor(img: HTMLImageElement, topleft: GlobalPoint, w: number, h: number, uuid?: string) {\n        super(topleft, w, h);\n        if (uuid !== undefined) this.uuid = uuid;\n        this.img = img;\n    }\n    asDict() {\n        return Object.assign(this.getBaseDict(), {\n            src: this.src,\n        });\n    }\n    fromDict(data: ServerAsset) {\n        super.fromDict(data);\n        this.src = data.src;\n    }\n    draw(ctx: CanvasRenderingContext2D) {\n        super.draw(ctx);\n        try {\n            ctx.drawImage(this.img, g2lx(this.refPoint.x), g2ly(this.refPoint.y), g2lz(this.w), g2lz(this.h));\n        } catch (error) {\n            console.warn(`Shape ${this.uuid} could not load the image ${this.src}`);\n        }\n    }\n    getInitiativeRepr(): InitiativeData {\n        return {\n            uuid: this.uuid,\n            visible: !gameStore.IS_DM,\n            group: false,\n            source: this.src,\n            has_img: true,\n            effects: [],\n            index: Infinity,\n        };\n    }\n}\n","import {\n    BoundingBox,\n    EdgeCirculator,\n    FaceCirculator,\n    LineFaceCirculator,\n    LocateType,\n    Point,\n    Sign,\n    TDS,\n    Triangle,\n    Vertex,\n} from \"./tds\";\nimport {\n    ccw,\n    collinearBetween,\n    cw,\n    edgeInfo,\n    hasInexactNegativeOrientation,\n    intersection,\n    orientation,\n    sideOfOrientedCircle,\n    xyEqual,\n} from \"./triag\";\n\nexport type Edge = [Triangle, number];\n\nexport class CDT {\n    tds: TDS;\n    constructor() {\n        this.tds = new TDS();\n        (<any>window).TDS = this.tds;\n    }\n    insertConstraint(a: Point, b: Point) {\n        const va = this.insert(a);\n        const vb = this.insert(b);\n        if (va !== vb) this.insertConstraintV(va, vb);\n    }\n\n    insertConstraintV(va: Vertex, vb: Vertex) {\n        const stack = [[va, vb]];\n        while (stack.length > 0) {\n            const v = stack.pop()!;\n            const info = edgeInfo(v[0], v[1]);\n            if (info.includes) {\n                this.markConstraint(info.fr!, info.i!);\n                if (info.vi! !== v[1]) {\n                    stack.push([info.vi!, v[1]]);\n                }\n                continue;\n            }\n            const intersectionInfo = this.findIntersectedFaces(v[0], v[1]);\n            if (intersectionInfo.found) {\n                if (intersectionInfo.vi !== v[0] && intersectionInfo.vi !== v[1]) {\n                    stack.push([v[0], intersectionInfo.vi]);\n                    stack.push([intersectionInfo.vi, v[1]]);\n                } else {\n                    stack.push(v);\n                }\n                continue;\n            }\n            this.triangulateHole(intersectionInfo.intersectedFaces, intersectionInfo.listAB, intersectionInfo.listBA);\n            if (intersectionInfo.vi !== v[1]) {\n                stack.push([intersectionInfo.vi, v[1]]);\n            }\n        }\n    }\n\n    triangulateHole(intersectedFaces: Triangle[], listAB: Edge[], listBA: Edge[]) {\n        const edges: Edge[] = [];\n        this.triangulateHole2(intersectedFaces, listAB, listBA, edges);\n        this.propagatingFlipE(edges);\n    }\n\n    triangulateHole2(intersectedFaces: Triangle[], listAB: Edge[], listBA: Edge[], edges: Edge[]) {\n        if (listAB.length > 0) {\n            this.triangulateHalfHole(listAB, edges);\n            this.triangulateHalfHole(listBA, edges);\n            const fl = listAB[0][0];\n            const fr = listBA[0][0];\n            fl.neighbours[2] = fr;\n            fr.neighbours[2] = fl;\n            fl.constraints[2] = true;\n            fr.constraints[2] = true;\n\n            while (intersectedFaces.length > 0) {\n                this.tds.deleteTriangle(intersectedFaces.shift()!);\n            }\n        }\n    }\n\n    triangulateHalfHole(conflictBoundaries: Edge[], edges: Edge[]) {\n        let iC = 0;\n        let iN: number;\n        let iT: number;\n        const current = () => conflictBoundaries[iC];\n        const next = () => conflictBoundaries[iN];\n        const tempo = () => conflictBoundaries[iT];\n\n        const va = current()[0].vertices[ccw(current()[1])]!;\n        iN = iC;\n        ++iN;\n\n        let n: Triangle;\n        let n1: Triangle;\n        let n2: Triangle;\n        let ind: number;\n        let ind1: number;\n        let ind2: number;\n        do {\n            n1 = current()[0];\n            ind1 = current()[1];\n            if (n1.neighbours[ind1] !== null) {\n                n = n1.neighbours[ind1]!;\n                ind = cw(n.indexV(n1.vertices[cw(ind1)]!));\n                n1 = n.neighbours[ind]!;\n                ind1 = this.tds.mirrorIndex(n, ind);\n            }\n            n2 = next()[0];\n            ind2 = next()[1];\n            if (n2.neighbours[ind2] !== null) {\n                n = n2.neighbours[ind2]!;\n                ind = cw(n.indexV(n2.vertices[cw(ind2)]!));\n                n2 = n.neighbours[ind]!;\n                ind2 = this.tds.mirrorIndex(n, ind);\n            }\n            const v0 = n1.vertices[ccw(ind1)]!;\n            const v1 = n1.vertices[cw(ind1)]!;\n            const v2 = n2.vertices[cw(ind2)]!;\n            const orient = orientation(v0.point!, v1.point!, v2.point!);\n            switch (orient) {\n                case Sign.RIGHT_TURN: {\n                    const newlf = this.tds.createTriangle(v0, v2, v1, null, null, null);\n                    edges.push([newlf, 2]);\n                    newlf.neighbours[1] = n1;\n                    newlf.neighbours[0] = n2;\n                    n1.neighbours[ind1] = newlf;\n                    n2.neighbours[ind2] = newlf;\n                    if (n1.isConstrained(ind1)) newlf.constraints[1] = true;\n                    if (n2.isConstrained(ind2)) newlf.constraints[0] = true;\n                    v0.triangle = newlf;\n                    v1.triangle = newlf;\n                    v2.triangle = newlf;\n                    iT = iC + 1;\n                    conflictBoundaries.splice(iC, 0, [newlf, 2]);\n                    conflictBoundaries.splice(Math.max(iT, iN), 1);\n                    conflictBoundaries.splice(Math.min(iT, iN), 1);\n                    iN = iC;\n                    if (v0 !== va) --iC;\n                    else ++iN;\n                    break;\n                }\n                case Sign.LEFT_TURN:\n                case Sign.COLLINEAR: {\n                    ++iC;\n                    ++iN;\n                    break;\n                }\n            }\n        } while (iN < conflictBoundaries.length);\n    }\n\n    findIntersectedFaces(vaa: Vertex, vbb: Vertex) {\n        const aa = vaa.point!;\n        const bb = vbb.point!;\n        const listAB: Edge[] = [];\n        const listBA: Edge[] = [];\n        const intersectedFaces: Triangle[] = [];\n        const lfc = new LineFaceCirculator(vaa, this, bb);\n        let ind = lfc.pos!.indexV(vaa);\n        let vi: Vertex;\n        if (lfc.pos!.isConstrained(ind)) {\n            vi = this.intersect(lfc.pos!, ind, vaa, vbb);\n            return { found: true, vi, listAB, listBA, intersectedFaces };\n        }\n        let lf = lfc.pos!.neighbours[ccw(ind)]!;\n        let rf = lfc.pos!.neighbours[cw(ind)]!;\n        listAB.push([lf, lf.indexT(lfc.pos!)]);\n        listBA.unshift([rf, rf.indexT(lfc.pos!)]);\n        intersectedFaces.unshift(lfc.pos!);\n        let previousFace = lfc.pos!;\n        lfc.next();\n        ind = lfc.pos!.indexT(previousFace);\n        let currentVertex = lfc.pos!.vertices[ind]!;\n        let done = false;\n        while (currentVertex !== vbb && !done) {\n            let i1: number;\n            let i2: number;\n            const orient = orientation(aa, bb, currentVertex.point!);\n            switch (orient) {\n                case Sign.COLLINEAR: {\n                    done = true;\n                    break;\n                }\n                case Sign.LEFT_TURN:\n                case Sign.RIGHT_TURN: {\n                    if (orient === Sign.LEFT_TURN) {\n                        i1 = ccw(ind);\n                        i2 = cw(ind);\n                    } else {\n                        i1 = cw(ind);\n                        i2 = ccw(ind);\n                    }\n                    if (lfc.pos!.isConstrained(i1)) {\n                        vi = this.intersect(lfc.pos!, i1, vaa, vbb);\n                        return { found: true, vi, listAB, listBA, intersectedFaces };\n                    } else {\n                        lf = lfc.pos!.neighbours[i2]!;\n                        intersectedFaces.unshift(lfc.pos!);\n                        if (orient === Sign.LEFT_TURN) listAB.push([lf, lf.indexT(lfc.pos!)]);\n                        else listBA.unshift([lf, lf.indexT(lfc.pos!)]);\n                        previousFace = lfc.pos!;\n                        lfc.next();\n                        ind = lfc.pos!.indexT(previousFace);\n                        currentVertex = lfc.pos!.vertices[ind]!;\n                    }\n                    break;\n                }\n            }\n        }\n        vi = currentVertex;\n        intersectedFaces.unshift(lfc.pos!);\n        lf = lfc.pos!.neighbours[cw(ind)]!;\n        listAB.push([lf, lf.indexT(lfc.pos!)]);\n        rf = lfc.pos!.neighbours[ccw(ind)]!;\n        listBA.unshift([rf, rf.indexT(lfc.pos!)]);\n        return { found: false, vi, listAB, listBA, intersectedFaces };\n    }\n\n    intersect(t: Triangle, i: number, vaa: Vertex, vbb: Vertex): Vertex {\n        const vcc = t.vertices[cw(i)]!;\n        const vdd = t.vertices[ccw(i)]!;\n        const pa = vaa.point!;\n        const pb = vbb.point!;\n        const pc = vcc.point!;\n        const pd = vdd.point!;\n        let pi = intersection(pa, pb, pc, pd);\n        if (pi !== pa && pi !== pb && pi !== pc && pi !== pd) {\n            const bbox = new BoundingBox(pi!);\n            bbox.dilate(4);\n            if (bbox.overlaps(new BoundingBox(pa))) pi = pa;\n            if (bbox.overlaps(new BoundingBox(pb))) pi = pb;\n            if (bbox.overlaps(new BoundingBox(pc))) pi = pc;\n            if (bbox.overlaps(new BoundingBox(pd))) pi = pd;\n        }\n        let vi: Vertex;\n        if (pi === null) throw new Error(\"what\");\n        else {\n            this.removeConstrainedEdge(t, i);\n            vi = this.insert(pi, t);\n        }\n\n        if (vi !== vcc && vi !== vdd) {\n            this.insertConstraintV(vcc, vi);\n            this.insertConstraintV(vi, vdd);\n        } else {\n            this.insertConstraintV(vcc, vdd);\n        }\n        return vi;\n    }\n\n    removeConstrainedEdge(t: Triangle, i: number) {\n        t.constraints[i] = false;\n        if (this.tds.dimension === 2) t.neighbours[i]!.constraints[this.tds.mirrorIndex(t, i)] = false;\n    }\n\n    updateConstraintsOpposite(v: Vertex) {\n        let t = v.triangle!;\n        const start = t;\n        let indf: number;\n        do {\n            indf = t.indexV(v);\n            if (t.neighbours[indf]!.constraints[this.tds.mirrorIndex(t, indf)]) t.constraints[indf] = true;\n            else t.constraints[indf] = false;\n            t = t.neighbours[ccw(indf)]!;\n        } while (t !== start);\n    }\n\n    markConstraint(t: Triangle, i: number) {\n        if (this.tds.dimension === 1) t.constraints[2] = true;\n        else {\n            t.constraints[i] = true;\n            t.neighbours[i]!.constraints[this.tds.mirrorIndex(t, i)] = true;\n        }\n    }\n\n    insert(p: Point, start: Triangle | null = null) {\n        const locateInfo = this.locate(p, this.iLocate(p, start));\n        const va = this.insertb(p, locateInfo.loc, locateInfo.lt, locateInfo.li);\n        this.flipAround(va);\n        return va;\n    }\n\n    flipAround(v: Vertex) {\n        if (this.tds.dimension <= 1) return;\n        let t = v.triangle!;\n        let i: number;\n        let next: Triangle;\n        const start = t;\n        do {\n            i = t.indexV(v);\n            next = t.neighbours[ccw(i)]!;\n            this.propagatingFlip(t, i);\n            t = next;\n        } while (next !== start);\n    }\n\n    propagatingFlip(t: Triangle, i: number, depth = 0) {\n        if (!this.isFlipable(t, i)) return;\n        const maxDepth = 100;\n        if (depth === maxDepth) {\n            throw new Error(\"maxde\");\n            return;\n        }\n        const ni = t.neighbours[i]!;\n        this.flip(t, i);\n        this.propagatingFlip(t, i, depth + 1);\n        i = ni.indexV(t.vertices[i]!);\n        this.propagatingFlip(ni, i, depth + 1);\n    }\n\n    lessEdge(e1: Edge, e2: Edge) {\n        const ind1 = e1[1];\n        const ind2 = e2[1];\n        return e1[0].uid < e2[0].uid || (e1[0].uid === e2[0].uid && ind1 < ind2);\n    }\n\n    propagatingFlipE(edges: Edge[]) {\n        let eI = 0;\n        let t: Triangle;\n        let i: number;\n        let eni: Edge;\n        const edgeSet: Edge[] = [];\n        while (eI < edges.length) {\n            t = edges[eI][0];\n            i = edges[eI][1];\n            if (this.isFlipable(t, i)) {\n                eni = [t.neighbours[i]!, this.tds.mirrorIndex(t, i)];\n                if (this.lessEdge(edges[eI], eni)) edgeSet.push(edges[eI]);\n                else edgeSet.push(eni);\n            }\n            ++eI;\n        }\n        let indf: number;\n        let ni: Triangle;\n        let indn: number;\n        let ei: Edge;\n        const e: (Edge | null)[] = [null, null, null, null];\n        while (edgeSet.length > 0) {\n            t = edgeSet[0][0];\n            indf = edgeSet[0][1];\n            ni = t.neighbours[indf]!;\n            indn = this.tds.mirrorIndex(t, indf);\n            ei = [t, indf];\n            edgeSet.splice(edgeSet.findIndex(ed => ed[0] === ei[0] && ed[1] === ei[1]), 1);\n            e[0] = [t, cw(indf)];\n            e[1] = [t, ccw(indf)];\n            e[2] = [ni, cw(indn)];\n            e[3] = [ni, ccw(indn)];\n\n            for (const edge of e) {\n                const tt = edge![0];\n                const ii = edge![1];\n                eni = [tt.neighbours[ii]!, this.tds.mirrorIndex(tt, ii)];\n                if (this.lessEdge(edge!, eni))\n                    edgeSet.splice(edgeSet.findIndex(ed => ed[0] === edge![0] && ed[1] === edge![1]), 1);\n                else edgeSet.splice(edgeSet.findIndex(ed => ed[0] === eni[0] && ed[1] === eni[1]), 1);\n            }\n\n            this.flip(t, indf);\n\n            for (const edge of e) {\n                const tt = edge![0];\n                const ii = edge![1];\n                if (this.isFlipable(tt, ii)) {\n                    eni = [tt.neighbours[ii]!, this.tds.mirrorIndex(tt, ii)];\n                    if (this.lessEdge(edge!, eni)) edgeSet.push(edge!);\n                    else edgeSet.push(eni);\n                }\n            }\n        }\n    }\n\n    flip(t: Triangle, i: number) {\n        const u = t.neighbours[i]!;\n        const j = this.tds.mirrorIndex(t, i);\n        const t1 = t.neighbours[cw(i)]!;\n        const i1 = this.tds.mirrorIndex(t, cw(i));\n        const t2 = t.neighbours[ccw(i)]!;\n        const i2 = this.tds.mirrorIndex(t, ccw(i));\n        const t3 = u.neighbours[cw(j)]!;\n        const i3 = this.tds.mirrorIndex(u, cw(j));\n        const t4 = u.neighbours[ccw(j)]!;\n        const i4 = this.tds.mirrorIndex(u, ccw(j));\n        this.tds.flip(t, i);\n        t.constraints[t.indexT(u)] = false;\n        u.constraints[u.indexT(t)] = false;\n        t1.neighbours[i1]!.constraints[this.tds.mirrorIndex(t1, i1)] = t1.constraints[i1];\n        t2.neighbours[i2]!.constraints[this.tds.mirrorIndex(t2, i2)] = t2.constraints[i2];\n        t3.neighbours[i3]!.constraints[this.tds.mirrorIndex(t3, i3)] = t3.constraints[i3];\n        t4.neighbours[i4]!.constraints[this.tds.mirrorIndex(t4, i4)] = t4.constraints[i4];\n    }\n\n    isFlipable(t: Triangle, i: number, perturb = true) {\n        const ni = t.neighbours[i]!;\n        if (t.isInfinite() || ni.isInfinite()) return false;\n        if (t.constraints[i]) return false;\n        return sideOfOrientedCircle(ni, t.vertices[i]!.point!, perturb) === Sign.ON_POSITIVE_SIDE;\n    }\n\n    insertb(a: Point, loc: Triangle | null, lt: LocateType, li: number): Vertex {\n        let insertInConstrainedEdge = false;\n        let v1: Vertex;\n        let v2: Vertex;\n        if (lt === LocateType.EDGE && loc!.isConstrained(li)) {\n            insertInConstrainedEdge = true;\n            v1 = loc!.vertices[ccw(li)]!;\n            v2 = loc!.vertices[cw(li)]!;\n        }\n        const va = this.insertc(a, loc, lt, li);\n        if (insertInConstrainedEdge) this.updateConstraintsIncident(va, v1!, v2!);\n        else if (lt !== LocateType.VERTEX) this.clearConstraintsIncident(va);\n        if (this.tds.dimension === 2) this.updateConstraintsOpposite(va);\n        return va;\n    }\n\n    updateConstraintsIncident(va: Vertex, c1: Vertex, c2: Vertex) {\n        if (this.tds.dimension === 0) return;\n        if (this.tds.dimension === 1) {\n            const ec = new EdgeCirculator(va, null);\n            do {\n                ec.t!.constraints[2] = true;\n            } while (ec.next());\n        } else {\n            const fc = new FaceCirculator(va, null);\n            do {\n                const indf = fc.t!.indexV(va);\n                const cwi = cw(indf);\n                const ccwi = ccw(indf);\n                if (fc.t!.vertices[cwi] === c1 || fc.t!.vertices[cwi] === c2) {\n                    fc.t!.constraints[ccwi] = true;\n                    fc.t!.constraints[cwi] = false;\n                } else {\n                    fc.t!.constraints[ccwi] = false;\n                    fc.t!.constraints[cwi] = true;\n                }\n            } while (fc.next());\n        }\n    }\n\n    clearConstraintsIncident(v: Vertex) {\n        const ec = new EdgeCirculator(v, null);\n        if (ec.valid) {\n            do {\n                const t = ec.t!;\n                const indf = ec.ri;\n                t.constraints[indf] = false;\n                if (this.tds.dimension === 2) t.neighbours[indf]!.constraints[this.tds.mirrorIndex(t, indf)] = false;\n            } while (ec.next());\n        }\n    }\n\n    insertc(p: Point, loc: Triangle | null, lt: LocateType, li: number): Vertex {\n        if (this.tds.vertices.length === 1) {\n            return this.insertFirst(p);\n        } else if (this.tds.vertices.length === 2) {\n            if (lt === LocateType.VERTEX) return this.tds.finiteVertex;\n            else return this.insertSecond(p);\n        }\n        switch (lt) {\n            case LocateType.VERTEX: {\n                return loc!.vertices[li]!;\n            }\n            case LocateType.OUTSIDE_AFFINE_HULL: {\n                return this.insertOutsideAffineHull(p);\n            }\n            case LocateType.OUTSIDE_CONVEX_HULL: {\n                return this.insertOutsideConvexHull(p, loc!);\n            }\n            case LocateType.EDGE: {\n                return this.insertInEdge(p, loc!, li);\n            }\n            case LocateType.FACE: {\n                return this.insertInFace(p, loc!);\n            }\n        }\n        throw new Error(\"qwe\");\n        return new Vertex();\n    }\n\n    insertInEdge(p: Point, loc: Triangle, li: number): Vertex {\n        const v = this.tds.insertInEdge(loc, li);\n        v.point = p;\n        return v;\n    }\n\n    insertInFace(p: Point, loc: Triangle): Vertex {\n        const v = this.tds.insertInFace(loc);\n        v.point = p;\n        return v;\n    }\n\n    insertFirst(p: Point): Vertex {\n        const v = this.tds.insertDimUp();\n        v.point = p;\n        return v;\n    }\n\n    insertSecond(p: Point): Vertex {\n        const v = this.tds.insertDimUp(this.tds._infinite, true);\n        v.point = p;\n        return v;\n    }\n\n    insertOutsideAffineHull(p: Point): Vertex {\n        let conform = false;\n        if (this.tds.dimension === 1) {\n            const t = this.tds.finiteEdge.first!;\n            const orient = orientation(t.vertices[0]!.point!, t.vertices[1]!.point!, p);\n            conform = orient === Sign.COUNTERCLOCKWISE;\n        }\n        const v = this.tds.insertDimUp(this.tds._infinite, conform);\n        v.point = p;\n        return v;\n    }\n\n    insertOutsideConvexHull(p: Point, t: Triangle): Vertex {\n        let v: Vertex;\n        if (this.tds.dimension === 1) {\n            throw new Error(\"sdfasdasd\");\n        } else {\n            v = this.insertOutsideConvexHull2(p, t);\n        }\n        v.point = p;\n        return v;\n    }\n\n    insertOutsideConvexHull2(p: Point, t: Triangle): Vertex {\n        let li = t.indexV(this.tds._infinite);\n        const ccwlist: Triangle[] = [];\n        const cwlist: Triangle[] = [];\n        let fc = new FaceCirculator(this.tds._infinite, t);\n        let done = false;\n        while (!done) {\n            fc.prev();\n            li = fc.t!.indexV(this.tds._infinite);\n            const q = fc.t!.vertices[ccw(li)]!.point!;\n            const r = fc.t!.vertices[cw(li)]!.point!;\n            if (orientation(p, q, r) === Sign.LEFT_TURN) ccwlist.push(fc.t!);\n            else done = true;\n        }\n        fc = new FaceCirculator(this.tds._infinite, t);\n        done = false;\n        while (!done) {\n            fc.next();\n            li = fc.t!.indexV(this.tds._infinite);\n            const q = fc.t!.vertices[ccw(li)]!.point!;\n            const r = fc.t!.vertices[cw(li)]!.point!;\n            if (orientation(p, q, r) === Sign.LEFT_TURN) cwlist.push(fc.t!);\n            else done = true;\n        }\n        const v = this.tds.insertInFace(t);\n        v.point = p;\n        let th;\n        while (ccwlist.length > 0) {\n            th = ccwlist[0];\n            li = ccw(th.indexV(this.tds._infinite));\n            this.tds.flip(th, li);\n            ccwlist.shift();\n        }\n        while (cwlist.length > 0) {\n            th = cwlist[0];\n            li = cw(th.indexV(this.tds._infinite));\n            this.tds.flip(th, li);\n            cwlist.shift();\n        }\n        fc = new FaceCirculator(v, null);\n        while (!fc.t!.isInfinite()) fc.next();\n        this.tds._infinite.triangle = fc.t!;\n        return v;\n    }\n\n    locate(p: Point, start: Triangle | null) {\n        let lt = 0;\n        let li = 0;\n        if (this.tds.dimension < 0) {\n            lt = LocateType.OUTSIDE_AFFINE_HULL;\n            li = 4;\n            return { loc: null, lt, li };\n        } else if (this.tds.dimension === 0) {\n            if (xyEqual(p, this.tds.finiteVertex.triangle!.vertices[0]!.point!)) {\n                lt = LocateType.VERTEX;\n            } else {\n                lt = LocateType.OUTSIDE_AFFINE_HULL;\n            }\n            li = 4;\n            return { loc: null, lt, li };\n        } else if (this.tds.dimension === 1) {\n            return this.marchLocate1D(p);\n        }\n        if (start === null) {\n            const t = this.tds._infinite.triangle!;\n            start = t.neighbours[t.indexV(this.tds._infinite)]!;\n        } else if (start.isInfinite()) {\n            start = start.neighbours[start.indexV(this.tds._infinite)]!;\n        }\n        return this.marchLocate2D(start, p);\n    }\n\n    marchLocate1D(p: Point) {\n        const ff = this.tds._infinite.triangle!;\n        const iv = ff.indexV(this.tds._infinite);\n        const t = ff.neighbours[iv]!;\n        const pqt = orientation(t.vertices[0]!.point!, t.vertices[1]!.point!, p);\n        if (pqt === Sign.RIGHT_TURN || pqt === Sign.LEFT_TURN) {\n            return { loc: new Triangle(), lt: LocateType.OUTSIDE_AFFINE_HULL, li: 4 };\n        }\n        const i = t.indexT(ff);\n        if (collinearBetween(p, t.vertices[1 - i]!.point!, t.vertices[i]!.point!))\n            return { loc: ff, lt: LocateType.OUTSIDE_CONVEX_HULL, li: iv };\n\n        if (xyEqual(p, t.vertices[1 - i]!.point!)) return { loc: t, lt: LocateType.VERTEX, li: 1 - i };\n        throw new Error(\"sdfsdf\");\n    }\n\n    marchLocate2D(c: Triangle, p: Point) {\n        let prev = null;\n        let first = true;\n        let lt: LocateType | undefined;\n        let li: number | undefined;\n        while (true) {\n            if (c.isInfinite()) {\n                return { loc: c, lt: LocateType.OUTSIDE_CONVEX_HULL, li: c.indexV(this.tds._infinite) };\n            }\n            const leftFirst = 0; // Math.round(Math.random());\n            const p0 = c.vertices[0]!.point!;\n            const p1 = c.vertices[1]!.point!;\n            const p2 = c.vertices[2]!.point!;\n            let o0: Sign;\n            let o1: Sign;\n            let o2: Sign;\n            if (first) {\n                prev = c;\n                first = false;\n                o0 = orientation(p0, p1, p);\n                if (o0 === Sign.NEGATIVE) {\n                    c = c.neighbours[2]!;\n                    continue;\n                }\n                o1 = orientation(p1, p2, p);\n                if (o1 === Sign.NEGATIVE) {\n                    c = c.neighbours[0]!;\n                    continue;\n                }\n                o2 = orientation(p2, p0, p);\n                if (o2 === Sign.NEGATIVE) {\n                    c = c.neighbours[1]!;\n                    continue;\n                }\n            } else if (leftFirst) {\n                if (c.neighbours[0]! === prev) {\n                    prev = c;\n                    o0 = orientation(p0, p1, p);\n                    if (o0 === Sign.NEGATIVE) {\n                        c = c.neighbours[2]!;\n                        continue;\n                    }\n                    o2 = orientation(p2, p0, p);\n                    if (o2 === Sign.NEGATIVE) {\n                        c = c.neighbours[1]!;\n                        continue;\n                    }\n                    o1 = Sign.POSITIVE;\n                } else if (c.neighbours[1]! === prev) {\n                    prev = c;\n                    o1 = orientation(p1, p2, p);\n                    if (o1 === Sign.NEGATIVE) {\n                        c = c.neighbours[0]!;\n                        continue;\n                    }\n                    o0 = orientation(p0, p1, p);\n                    if (o0 === Sign.NEGATIVE) {\n                        c = c.neighbours[2]!;\n                        continue;\n                    }\n                    o2 = Sign.POSITIVE;\n                } else {\n                    prev = c;\n                    o2 = orientation(p2, p0, p);\n                    if (o2 === Sign.NEGATIVE) {\n                        c = c.neighbours[1]!;\n                        continue;\n                    }\n                    o1 = orientation(p1, p2, p);\n                    if (o1 === Sign.NEGATIVE) {\n                        c = c.neighbours[0]!;\n                        continue;\n                    }\n                    o0 = Sign.POSITIVE;\n                }\n            } else {\n                if (c.neighbours[0] === prev) {\n                    prev = c;\n                    o2 = orientation(p2, p0, p);\n                    if (o2 === Sign.NEGATIVE) {\n                        c = c.neighbours[1]!;\n                        continue;\n                    }\n                    o0 = orientation(p0, p1, p);\n                    if (o0 === Sign.NEGATIVE) {\n                        c = c.neighbours[2]!;\n                        continue;\n                    }\n                    o1 = Sign.POSITIVE;\n                } else if (c.neighbours[1] === prev) {\n                    prev = c;\n                    o0 = orientation(p0, p1, p);\n                    if (o0 === Sign.NEGATIVE) {\n                        c = c.neighbours[2]!;\n                        continue;\n                    }\n                    o1 = orientation(p1, p2, p);\n                    if (o1 === Sign.NEGATIVE) {\n                        c = c.neighbours[0]!;\n                        continue;\n                    }\n                    o2 = Sign.POSITIVE;\n                } else {\n                    prev = c;\n                    o1 = orientation(p1, p2, p);\n                    if (o1 === Sign.NEGATIVE) {\n                        c = c.neighbours[0]!;\n                        continue;\n                    }\n                    o2 = orientation(p2, p0, p);\n                    if (o2 === Sign.NEGATIVE) {\n                        c = c.neighbours[1]!;\n                        continue;\n                    }\n                    o0 = Sign.POSITIVE;\n                }\n            }\n            const sum =\n                (o0 === Sign.COLLINEAR ? 1 : 0) + (o1 === Sign.COLLINEAR ? 1 : 0) + (o2 === Sign.COLLINEAR ? 1 : 0);\n            switch (sum) {\n                case 0: {\n                    lt = LocateType.FACE;\n                    li = 4;\n                    break;\n                }\n                case 1: {\n                    lt = LocateType.EDGE;\n                    li = o0 === Sign.COLLINEAR ? 2 : o1 === Sign.COLLINEAR ? 0 : 1;\n                    break;\n                }\n                case 2: {\n                    lt = LocateType.VERTEX;\n                    li = o0 !== Sign.COLLINEAR ? 2 : o1 !== Sign.COLLINEAR ? 0 : 1;\n                    break;\n                }\n            }\n            if (lt === undefined || li === undefined) throw new Error(\"ert\");\n            return { loc: c, lt, li };\n        }\n    }\n\n    iLocate(p: Point, start: Triangle | null) {\n        if (this.tds.dimension < 2) return start;\n        if (start === null) {\n            const t = this.tds._infinite.triangle!;\n            start = t.neighbours[t.indexV(this.tds._infinite)];\n        } else if (start.isInfinite()) {\n            start = start.neighbours[start.indexV(this.tds._infinite)];\n        }\n        let prev = null;\n        let c = start!;\n        let first = true;\n        let nTurns = 2500;\n        while (true) {\n            if (!nTurns--) return c;\n            if (c.isInfinite()) return c;\n            const p0 = c.vertices[0]!.point!;\n            const p1 = c.vertices[1]!.point!;\n            const p2 = c.vertices[2]!.point!;\n            if (first) {\n                prev = c;\n                first = false;\n                if (hasInexactNegativeOrientation(p0, p1, p)) {\n                    c = c.neighbours[2]!;\n                    continue;\n                }\n                if (hasInexactNegativeOrientation(p1, p2, p)) {\n                    c = c.neighbours[0]!;\n                    continue;\n                }\n                if (hasInexactNegativeOrientation(p2, p0, p)) {\n                    c = c.neighbours[1]!;\n                    continue;\n                }\n            } else {\n                if (c.neighbours[0] === prev) {\n                    prev = c;\n                    if (hasInexactNegativeOrientation(p0, p1, p)) {\n                        c = c.neighbours[2]!;\n                        continue;\n                    }\n                    if (hasInexactNegativeOrientation(p2, p0, p)) {\n                        c = c.neighbours[1]!;\n                        continue;\n                    }\n                } else if (c.neighbours[1] === prev) {\n                    prev = c;\n                    if (hasInexactNegativeOrientation(p0, p1, p)) {\n                        c = c.neighbours[2]!;\n                        continue;\n                    }\n                    if (hasInexactNegativeOrientation(p1, p2, p)) {\n                        c = c.neighbours[0]!;\n                        continue;\n                    }\n                } else {\n                    prev = c;\n                    if (hasInexactNegativeOrientation(p2, p0, p)) {\n                        c = c.neighbours[1]!;\n                        continue;\n                    }\n                    if (hasInexactNegativeOrientation(p1, p2, p)) {\n                        c = c.neighbours[0]!;\n                        continue;\n                    }\n                }\n            }\n            break;\n        }\n        return c;\n    }\n}\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./draw.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./draw.vue?vue&type=script&lang=ts&\"","import { GlobalPoint } from \"@/game/geom\";\nimport { GridLayer } from \"@/game/layers/grid\";\nimport { Layer } from \"@/game/layers/layer\";\nimport { Asset } from \"@/game/shapes/asset\";\nimport { Shape } from \"@/game/shapes/shape\";\nimport { gameStore } from \"@/game/store\";\nimport { l2gx, l2gy, l2gz } from \"@/game/units\";\n\nclass LayerManager {\n    layers: Layer[] = [];\n    width = window.innerWidth;\n    height = window.innerHeight;\n\n    UUIDMap: Map<string, Shape> = new Map();\n\n    // Refresh interval and redraw setter.\n    interval = 30;\n\n    constructor() {\n        requestAnimationFrame(this.drawLoop);\n    }\n\n    reset() {\n        this.layers = [];\n        this.UUIDMap = new Map();\n    }\n\n    drawLoop = () => {\n        for (let i = this.layers.length - 1; i >= 0; i--) {\n            this.layers[i].draw();\n        }\n        requestAnimationFrame(this.drawLoop);\n    };\n\n    setWidth(width: number): void {\n        this.width = width;\n        for (const layer of this.layers) {\n            layer.canvas.width = width;\n            layer.width = width;\n        }\n    }\n\n    setHeight(height: number): void {\n        this.height = height;\n        for (const layer of this.layers) {\n            layer.canvas.height = height;\n            layer.height = height;\n        }\n    }\n\n    addLayer(layer: Layer): void {\n        this.layers.push(layer);\n        if (!gameStore.IS_DM && !layer.playerEditable) return;\n        if (layer.selectable) gameStore.addLayer(layer.name);\n    }\n\n    hasLayer(name: string): boolean {\n        return this.layers.some(l => l.name === name);\n    }\n\n    getLayer(name?: string) {\n        name = name === undefined ? gameStore.selectedLayer : name;\n        for (const layer of this.layers) {\n            if (layer.name === name) return layer;\n        }\n    }\n\n    selectLayer(name: string, sync: boolean = true): void {\n        let found = false;\n        for (const layer of this.layers) {\n            if (!layer.selectable) continue;\n            if (found && layer.name !== \"fow\") layer.ctx.globalAlpha = 0.3;\n            else layer.ctx.globalAlpha = 1.0;\n\n            if (name === layer.name) {\n                gameStore.selectLayer({ name, sync });\n                found = true;\n            }\n\n            layer.clearSelection();\n            layer.invalidate(true);\n        }\n    }\n\n    getGridLayer(): GridLayer | undefined {\n        return <GridLayer>this.getLayer(\"grid\");\n    }\n\n    hasSelection() {\n        const selection = this.getSelection();\n        return selection !== undefined && selection.length > 0;\n    }\n\n    // THIS INCLUDES POTENTIALLY THE SelectTool.SelectionHelper !!!\n    getSelection() {\n        const layer = this.getLayer();\n        if (layer === undefined) return undefined;\n        return layer.selection;\n    }\n\n    invalidate(): void {\n        for (let i = this.layers.length - 1; i >= 0; i--) {\n            this.layers[i].invalidate(true);\n        }\n    }\n\n    invalidateLight() {\n        for (let i = this.layers.length - 1; i >= 0; i--)\n            if (this.layers[i].isVisionLayer) this.layers[i].invalidate(true);\n    }\n\n    dropAsset(event: DragEvent) {\n        const layer = this.getLayer();\n        if (layer === undefined || event === null || event.dataTransfer === null) return;\n        const image = document.createElement(\"img\");\n        image.src = event.dataTransfer.getData(\"text/plain\");\n        const asset = new Asset(\n            image,\n            new GlobalPoint(l2gx(event.clientX), l2gy(event.clientY)),\n            l2gz(image.width),\n            l2gz(image.height),\n        );\n        asset.src = new URL(image.src).pathname;\n\n        if (gameStore.useGrid) {\n            const gs = gameStore.gridSize;\n            asset.refPoint.x = Math.round(asset.refPoint.x / gs) * gs;\n            asset.refPoint.y = Math.round(asset.refPoint.y / gs) * gs;\n            asset.w = Math.max(Math.round(asset.w / gs) * gs, gs);\n            asset.h = Math.max(Math.round(asset.h / gs) * gs, gs);\n        }\n\n        layer.addShape(asset, true);\n    }\n}\n\nexport const layerManager = new LayerManager();\n(<any>window).lm = layerManager;\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./initiative.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./initiative.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./createtoken_modal.vue?vue&type=template&id=66ccc134&scoped=true&\"\nimport script from \"./createtoken_modal.vue?vue&type=script&lang=ts&\"\nexport * from \"./createtoken_modal.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./createtoken_modal.vue?vue&type=style&index=0&id=66ccc134&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"66ccc134\",\n  null\n  \n)\n\ncomponent.options.__file = \"createtoken_modal.vue\"\nexport default component.exports","import { BoundingRect } from \"@/game/shapes/boundingrect\";\n\nexport class BoundingNode {\n    bbox: BoundingRect;\n    nPrimitives: number;\n    children: BoundingNode[] = [];\n    constructor(nPrimitives: number, bbox: BoundingRect) {\n        this.nPrimitives = nPrimitives;\n        this.bbox = bbox;\n    }\n}\n\nexport class LeafNode extends BoundingNode {\n    firstPrimOffset: number;\n    constructor(first: number, n: number, bbox: BoundingRect) {\n        super(n, bbox);\n        this.firstPrimOffset = first;\n    }\n}\n\nexport class InteriorNode extends BoundingNode {\n    dimension: number;\n    constructor(dimension: number, c1: BoundingNode, c2: BoundingNode) {\n        super(0, c1.bbox.union(c2.bbox));\n        this.dimension = dimension;\n        this.children.push(c1);\n        this.children.push(c2);\n    }\n}\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./createtoken_modal.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./createtoken_modal.vue?vue&type=script&lang=ts&\"","import Tools from \"../ui/tools/tools.vue\";\n\nimport { getRef } from \"@/core/utils\";\nimport { socket } from \"@/game/api/socket\";\nimport { sendClientOptions } from \"@/game/api/utils\";\nimport { EventBus } from \"@/game/event-bus\";\nimport { Vector } from \"@/game/geom\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { gameStore } from \"@/game/store\";\nimport { calculateDelta } from \"@/game/ui/tools/utils\";\n\nexport function onKeyUp(event: KeyboardEvent) {\n    if (event.target instanceof HTMLInputElement || event.target instanceof HTMLTextAreaElement) {\n    } else {\n        if (event.key === \"Delete\" || event.key === \"Del\" || event.key === \"Backspace\") {\n            if (layerManager.getLayer === undefined) {\n                console.log(\"No active layer selected for delete operation\");\n                return;\n            }\n            const l = layerManager.getLayer()!;\n            for (let i = l.selection.length - 1; i >= 0; i--) {\n                const sel = l.selection[i];\n                if ((<any>getRef<Tools>(\"tools\").$refs.selectTool).selectionHelper.uuid === sel.uuid) {\n                    l.selection.splice(i, 1);\n                    continue;\n                }\n                l.removeShape(sel, true, false);\n                EventBus.$emit(\"SelectionInfo.Shape.Set\", null);\n                EventBus.$emit(\"Initiative.Remove\", sel.uuid);\n            }\n        }\n    }\n}\n\nexport function onKeyDown(event: KeyboardEvent) {\n    if (event.target instanceof HTMLInputElement || event.target instanceof HTMLTextAreaElement) {\n        if (event.keyCode === 65 && event.ctrlKey) event.target!.select();\n    } else {\n        if (event.keyCode >= 37 && event.keyCode <= 40) {\n            // todo: this should already be rounded\n            const gridSize = Math.round(gameStore.gridSize);\n            let offsetX = gridSize * (event.keyCode % 2);\n            let offsetY = gridSize * (event.keyCode % 2 ? 0 : 1);\n            if (layerManager.hasSelection()) {\n                const selection = layerManager.getSelection()!;\n                offsetX *= event.keyCode <= 38 ? -1 : 1;\n                offsetY *= event.keyCode <= 38 ? -1 : 1;\n                let delta = new Vector(offsetX, offsetY);\n                if (!event.shiftKey || !gameStore.IS_DM) {\n                    // First check for collisions.  Using the smooth wall slide collision check used on mouse move is overkill here.\n                    for (const sel of selection) delta = calculateDelta(delta, sel);\n                }\n                for (const sel of selection) {\n                    sel.refPoint.x += delta.x;\n                    sel.refPoint.y += delta.y;\n                    if (sel.refPoint.x % gridSize !== 0 || sel.refPoint.y % gridSize !== 0) sel.snapToGrid();\n                    socket.emit(\"Shape.Position.Update\", { shape: sel.asDict(), redraw: true, temporary: false });\n                }\n                layerManager.getLayer()!.invalidate(false);\n            } else {\n                // The pan offsets should be in the opposite direction to give the correct feel.\n                gameStore.increasePanX(offsetX * (event.keyCode <= 38 ? 1 : -1));\n                gameStore.increasePanY(offsetY * (event.keyCode <= 38 ? 1 : -1));\n                layerManager.invalidate();\n                sendClientOptions();\n            }\n        } else if (event.keyCode === 68) {\n            const layer = layerManager.getLayer();\n            if (layer) {\n                layer.clearSelection();\n                layer.invalidate(true);\n            }\n        }\n    }\n}\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./manager.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./manager.vue?vue&type=style&index=0&lang=css&\"","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\n\nimport ShapeContext from \"@/game/ui/selection/shapecontext.vue\";\nimport CreateTokenModal from \"@/game/ui/tools/createtoken_modal.vue\";\nimport DrawTool from \"@/game/ui/tools/draw.vue\";\nimport MapTool from \"@/game/ui/tools/map.vue\";\nimport PanTool from \"@/game/ui/tools/pan\";\nimport SelectTool from \"@/game/ui/tools/select.vue\";\n\nimport { layerManager } from \"@/game/layers/manager\";\nimport { gameManager } from \"@/game/manager\";\nimport { gameStore } from \"@/game/store\";\nimport { RulerTool } from \"@/game/ui/tools/ruler\";\nimport { l2g } from \"@/game/units\";\nimport { getMouse } from \"@/game/utils\";\nimport Component from \"vue-class-component\";\n\n@Component({\n    components: {\n        \"select-tool\": SelectTool,\n        \"pan-tool\": PanTool,\n        \"draw-tool\": DrawTool,\n        \"ruler-tool\": RulerTool,\n        \"map-tool\": MapTool,\n        \"shape-menu\": ShapeContext,\n        \"createtoken-dialog\": CreateTokenModal,\n    },\n    watch: {\n        currentTool(newValue, oldValue) {\n            this.$emit(\"tools-select-change\", newValue, oldValue);\n        },\n    },\n})\nexport default class Tools extends Vue {\n    $refs!: {\n        selectTool: InstanceType<typeof SelectTool>;\n    };\n\n    currentTool = \"Select\";\n    tools = [\"Select\", \"Pan\", \"Draw\", \"Ruler\", \"Map\"];\n    dmTools = [\"Map\"];\n\n    get IS_DM(): boolean {\n        return gameStore.IS_DM;\n    }\n\n    get currentToolComponent(): string {\n        return `${this.currentTool.toLowerCase()}-tool`;\n    }\n\n    mousedown(event: MouseEvent) {\n        if ((<HTMLElement>event.target).tagName !== \"CANVAS\") return;\n\n        let targetTool = this.currentTool;\n        if (event.button === 1) {\n            targetTool = \"Pan\";\n        } else if (event.button !== 0) {\n            return;\n        }\n\n        this.$emit(\"mousedown\", event, targetTool);\n    }\n    mouseup(event: MouseEvent) {\n        if ((<HTMLElement>event.target).tagName !== \"CANVAS\") return;\n\n        let targetTool = this.currentTool;\n        if (event.button === 1) {\n            targetTool = \"Pan\";\n        } else if (event.button !== 0) {\n            return;\n        }\n\n        this.$emit(\"mouseup\", event, targetTool);\n    }\n    mousemove(event: MouseEvent) {\n        if ((<HTMLElement>event.target).tagName !== \"CANVAS\") return;\n\n        let targetTool = this.currentTool;\n        if ((event.buttons & 4) !== 0) {\n            targetTool = \"Pan\";\n        } else if ((event.button & 1) > 1) {\n            return;\n        }\n\n        this.$emit(\"mousemove\", event, targetTool);\n\n        // Annotation hover\n        let found = false;\n        for (const uuid of gameStore.annotations) {\n            if (layerManager.UUIDMap.has(uuid) && layerManager.hasLayer(\"draw\")) {\n                const shape = layerManager.UUIDMap.get(uuid)!;\n                if (shape.contains(l2g(getMouse(event)))) {\n                    found = true;\n                    gameManager.annotationManager.setActiveText(shape.annotation);\n                }\n            }\n        }\n        if (!found && gameManager.annotationManager.shown) {\n            gameManager.annotationManager.setActiveText(\"\");\n        }\n    }\n    mouseleave(event: MouseEvent) {\n        // When leaving the window while a mouse is pressed down, act as if it was released\n        if ((event.buttons & 1) !== 0) {\n            this.$emit(\"mouseup\", event, this.currentTool);\n        }\n    }\n    contextmenu(event: MouseEvent) {\n        if ((<HTMLElement>event.target).tagName !== \"CANVAS\") return;\n        if (event.button !== 2 || (<HTMLElement>event.target).tagName !== \"CANVAS\") return;\n        this.$emit(\"contextmenu\", event, this.currentTool);\n    }\n}\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./selection_info.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./selection_info.vue?vue&type=script&lang=ts&\"","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./modal.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./modal.vue?vue&type=script&lang=ts&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./contextmenu.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./contextmenu.vue?vue&type=style&index=0&lang=css&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./selection_info.vue?vue&type=style&index=0&id=32cec914&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./selection_info.vue?vue&type=style&index=0&id=32cec914&scoped=true&lang=css&\"","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\n\nimport Modal from \"@/core/components/modals/modal.vue\";\n\n@Component({\n    components: {\n        Modal,\n    },\n})\nexport default class Prompt extends Vue {\n    $refs!: {\n        answer: HTMLElement;\n    };\n\n    visible = false;\n    question = \"\";\n    answer = \"\";\n    title = \"\";\n\n    resolve = (value: string) => {};\n    reject = () => {};\n\n    submit() {\n        this.resolve(this.answer);\n        this.close();\n    }\n    close() {\n        this.reject();\n        this.visible = false;\n        this.question = \"\";\n        this.answer = \"\";\n        this.title = \"\";\n    }\n    prompt(question: string, title: string): Promise<string> {\n        this.question = question;\n        this.title = title;\n        this.visible = true;\n        this.$nextTick(() => {\n            this.$refs.answer.focus();\n        });\n        return new Promise((resolve, reject) => {\n            this.resolve = resolve;\n            this.reject = reject;\n        });\n    }\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ul',[_vm._l((_vm.folders),function(folder){return _c('li',{key:folder,staticClass:\"folder\",on:{\"click\":function($event){$event.stopPropagation();return _vm.toggle($event)}}},[_vm._v(\"\\n    \"+_vm._s(folder)+\"\\n    \"),_c('asset-node',{attrs:{\"asset\":_vm.asset[folder]}})],1)}),_vm._l((_vm.files),function(file){return _c('li',{key:file.name,staticClass:\"file draggable token\",attrs:{\"draggable\":\"true\"},on:{\"mouseover\":function($event){_vm.showImage = file.hash},\"mouseout\":function($event){_vm.showImage = null},\"dragstart\":function($event){_vm.dragStart($event, '/static/assets/' + file.hash)}}},[_vm._v(\"\\n    \"+_vm._s(file.name)+\"\\n    \"),(_vm.showImage == file.hash)?_c('div',{staticClass:\"preview\"},[_c('img',{staticClass:\"asset-preview-image\",attrs:{\"src\":'/static/assets/' + file.hash}})]):_vm._e()])})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"74f43d04-vue-loader-template\\\"}!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./asset_node.vue?vue&type=template&id=62c91cd3&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_vm._v(_vm._s(_vm.message))])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"74f43d04-vue-loader-template\\\"}!../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./load.vue?vue&type=template&id=ff095222&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{attrs:{\"id\":\"toolselect\"}},[_c('ul',_vm._l((_vm.tools),function(tool){return (!_vm.dmTools.includes(tool) || _vm.IS_DM)?_c('li',{key:tool,ref:tool + '-selector',refInFor:true,class:{'tool-selected': _vm.currentTool === tool},on:{\"click\":function($event){_vm.currentTool = tool}}},[_c('a',{attrs:{\"href\":\"#\"}},[_vm._v(_vm._s(tool))])]):_vm._e()}))]),_c('div',[[_c('select-tool',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.currentTool === 'Select'),expression:\"currentTool === 'Select'\"}],ref:\"selectTool\"}),_c('pan-tool',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.currentTool === 'Pan'),expression:\"currentTool === 'Pan'\"}]}),_c('keep-alive',[_c('draw-tool',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.currentTool === 'Draw'),expression:\"currentTool === 'Draw'\"}]})],1),_c('ruler-tool',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.currentTool === 'Ruler'),expression:\"currentTool === 'Ruler'\"}]}),_c('map-tool',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.currentTool === 'Map'),expression:\"currentTool === 'Map'\"}]}),_c('shape-menu',{ref:\"shapecontext\"}),_c('createtoken-dialog',{ref:\"createtokendialog\"})]],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"74f43d04-vue-loader-template\\\"}!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tools.vue?vue&type=template&id=1fee50f5&scoped=true&\"","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./menu.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./menu.vue?vue&type=script&lang=ts&\"","import { GlobalPoint, Point, Ray, Vector } from \"@/game/geom\";\n\nexport class BoundingRect {\n    readonly w: number;\n    readonly h: number;\n    readonly topLeft: GlobalPoint;\n    readonly topRight: GlobalPoint;\n    readonly botRight: GlobalPoint;\n    readonly botLeft: GlobalPoint;\n\n    constructor(topleft: GlobalPoint, w: number, h: number) {\n        this.w = w;\n        this.h = h;\n        this.topLeft = topleft;\n        this.topRight = new GlobalPoint(topleft.x + w, topleft.y);\n        this.botRight = new GlobalPoint(topleft.x + w, topleft.y + h);\n        this.botLeft = new GlobalPoint(topleft.x, topleft.y + h);\n    }\n\n    contains(point: GlobalPoint): boolean {\n        return (\n            this.topLeft.x <= point.x &&\n            this.topRight.x >= point.x &&\n            this.topLeft.y <= point.y &&\n            this.botLeft.y >= point.y\n        );\n    }\n\n    get points() {\n        if (this.w === 0 || this.h === 0) return [[this.topLeft.x, this.topLeft.y]];\n        return [\n            [this.topLeft.x, this.topLeft.y],\n            [this.botLeft.x, this.botLeft.y],\n            [this.botRight.x, this.botRight.y],\n            [this.topRight.x, this.topRight.y],\n        ];\n    }\n\n    offset(vector: Vector): BoundingRect {\n        return new BoundingRect(this.topLeft.add(vector), this.w, this.h);\n    }\n\n    union(other: BoundingRect): BoundingRect {\n        const xmin = Math.min(this.topLeft.x, other.topLeft.x);\n        const xmax = Math.max(this.topRight.x, other.topRight.x);\n        const ymin = Math.min(this.topLeft.y, other.topLeft.y);\n        const ymax = Math.max(this.botLeft.y, other.botLeft.y);\n        return new BoundingRect(new GlobalPoint(xmin, ymin), xmax - xmin, ymax - ymin);\n    }\n\n    getDiagCorner(botright: boolean) {\n        return botright ? this.botRight : this.topLeft;\n    }\n\n    intersectsWith(other: BoundingRect): boolean {\n        return !(\n            other.topLeft.x > this.topRight.x ||\n            other.topRight.x < this.topLeft.x ||\n            other.topLeft.y > this.botLeft.y ||\n            other.botLeft.y < this.topLeft.y\n        );\n    }\n\n    intersectsWithInner(other: BoundingRect): boolean {\n        return !(\n            other.topLeft.x >= this.topRight.x ||\n            other.topRight.x <= this.topLeft.x ||\n            other.topLeft.y >= this.botLeft.y ||\n            other.botLeft.y <= this.topLeft.y\n        );\n    }\n\n    intersectP(ray: Ray<Point>, invDir: Vector, dirIsNeg: boolean[]) {\n        let txmin = invDir.x * (this.getDiagCorner(dirIsNeg[0]).x - ray.origin!.x);\n        let txmax = invDir.x * (this.getDiagCorner(!dirIsNeg[0]).x - ray.origin!.x);\n        const tymin = invDir.y * (this.getDiagCorner(dirIsNeg[1]).y - ray.origin!.y);\n        const tymax = invDir.y * (this.getDiagCorner(!dirIsNeg[1]).y - ray.origin!.y);\n        if (txmin > tymax || tymin > txmax) return { hit: false, min: txmin, max: txmax };\n        if (tymin > txmin) txmin = tymin;\n        if (tymax < txmax) txmax = tymax;\n        return { hit: txmin < ray.tMax! && txmax > 0, min: txmin, max: txmax };\n    }\n\n    center(): GlobalPoint;\n    center(centerPoint: GlobalPoint): void;\n    center(centerPoint?: GlobalPoint): GlobalPoint | void {\n        if (centerPoint === undefined) return this.topLeft.add(new Vector(this.w / 2, this.h / 2));\n        this.topLeft.x = centerPoint.x - this.w / 2;\n        this.topLeft.y = centerPoint.y - this.h / 2;\n    }\n    inCorner(point: GlobalPoint, corner: string) {\n        const sw = Math.min(6, this.w / 2) / 2;\n        switch (corner) {\n            case \"ne\":\n                return (\n                    this.topRight.x - sw <= point.x &&\n                    point.x <= this.topRight.x + sw &&\n                    this.topLeft.y - sw <= point.y &&\n                    point.y <= this.topLeft.y + sw\n                );\n            case \"nw\":\n                return (\n                    this.topLeft.x - sw <= point.x &&\n                    point.x <= this.topLeft.x + sw &&\n                    this.topLeft.y - sw <= point.y &&\n                    point.y <= this.topLeft.y + sw\n                );\n            case \"sw\":\n                return (\n                    this.topLeft.x - sw <= point.x &&\n                    point.x <= this.topLeft.x + sw &&\n                    this.botLeft.y - sw <= point.y &&\n                    point.y <= this.botLeft.y + sw\n                );\n            case \"se\":\n                return (\n                    this.topRight.x - sw <= point.x &&\n                    point.x <= this.topRight.x + sw &&\n                    this.botLeft.y - sw <= point.y &&\n                    point.y <= this.botLeft.y + sw\n                );\n            default:\n                return false;\n        }\n    }\n    getCorner(point: GlobalPoint): string | undefined {\n        if (this.inCorner(point, \"ne\")) return \"ne\";\n        else if (this.inCorner(point, \"nw\")) return \"nw\";\n        else if (this.inCorner(point, \"se\")) return \"se\";\n        else if (this.inCorner(point, \"sw\")) return \"sw\";\n    }\n\n    getMaxExtent() {\n        return this.w > this.h ? 0 : 1;\n    }\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"formcontainer\"}},[(_vm.owned || _vm.joined)?_c('form',[_c('fieldset',[_c('legend',{staticClass:\"legend\"},[_vm._v(\"Your sessions\")]),_c('div',{staticClass:\"input\"},[_vm._l((_vm.owned),function(room,i){return _c('router-link',{key:'o-'+i,attrs:{\"to\":'/game/' + room[1] + '/' + room[0]}},[_vm._v(_vm._s(room[0]))])}),_vm._l((_vm.joined),function(room,i){return _c('router-link',{key:'j-'+i,attrs:{\"to\":'/game/' + room[1] + '/' + room[0]}},[_vm._v(_vm._s(room[1])+\"/\"+_vm._s(room[0]))])})],2),(_vm.owned.length === 0)?_c('div',{staticClass:\"input\"},[_vm._v(\"No active sessions\")]):_vm._e()])]):_vm._e(),_vm._m(0),_c('form',{on:{\"submit\":function($event){$event.preventDefault();return _vm.createRoom($event)}}},[_c('fieldset',[(!_vm.owned && !_vm.joined)?_c('legend',{staticClass:\"legend\"},[_vm._v(\"Create a session\")]):_c('div',{staticClass:\"input\"},[_vm._v(\"Create a new session\")]),_c('div',{staticClass:\"input\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.newSessionName),expression:\"newSessionName\"}],attrs:{\"type\":\"text\",\"name\":\"room_name\",\"placeholder\":\"Session Name\"},domProps:{\"value\":(_vm.newSessionName)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.newSessionName=$event.target.value}}}),_vm._m(1)]),_vm._m(2)])]),_c('div',{attrs:{\"id\":\"account-options\"}},[_c('form',{on:{\"submit\":function($event){$event.preventDefault();}}},[_c('router-link',{staticClass:\"submit\",attrs:{\"tag\":\"button\",\"title\":\"Account Settings\",\"to\":\"/account\"}},[_c('i',{staticClass:\"fas fa-cog\"})])],1),_c('form',{on:{\"submit\":function($event){$event.preventDefault();}}},[_c('router-link',{staticClass:\"submit\",attrs:{\"tag\":\"button\",\"title\":\"Logout\",\"to\":\"/auth/logout\"}},[_c('i',{staticClass:\"fas fa-sign-out-alt\"})])],1)])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('h4',[_c('span',[_vm._v(\"OR\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',[_c('i',{staticClass:\"fab fa-d-and-d\"})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('button',{staticClass:\"submit\",attrs:{\"type\":\"submit\",\"title\":\"Create\"}},[_c('i',{staticClass:\"fas fa-arrow-right\"})])}]\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"74f43d04-vue-loader-template\\\"}!../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./main.vue?vue&type=template&id=61eb1455&scoped=true&\"","/*\nThis module defines some Point classes.\nA strong focus is made to ensure that at no time a global and a local point are mixed up with each other.\nAt first glance this adds weird looking hacks as ts does not support nominal typing.\n*/\n\nexport function getPointDistance(p1: Point, p2: Point) {\n    const a = p1.x - p2.x;\n    const b = p1.y - p2.y;\n    return Math.sqrt(a * a + b * b);\n}\n\nexport class Point {\n    x: number;\n    y: number;\n    constructor(x: number, y: number) {\n        this.x = x;\n        this.y = y;\n    }\n    add(vec: Vector) {\n        return new Point(this.x + vec.x, this.y + vec.y);\n    }\n    subtract(other: Point) {\n        return new Vector(this.x - other.x, this.y - other.y);\n    }\n    clone(): Point {\n        return new Point(this.x, this.y);\n    }\n    get(dimension: 0 | 1) {\n        if (dimension === 0) return this.x;\n        return this.y;\n    }\n}\nexport class GlobalPoint extends Point {\n    // This is to differentiate with LocalPoint, is actually never used\n    // We do ! to prevent errors that it never gets initialized\n    // tslint:disable-next-line:variable-name\n    _GlobalPoint!: string;\n    add(vec: Vector): GlobalPoint {\n        return <GlobalPoint>super.add(vec);\n    }\n    subtract(other: GlobalPoint): Vector {\n        return super.subtract(other);\n    }\n    clone(): GlobalPoint {\n        return <GlobalPoint>super.clone();\n    }\n}\n\nexport class LocalPoint extends Point {\n    // This is to differentiate with GlobalPoint, is actually never used\n    // We do ! to prevent errors that it never gets initialized\n    // tslint:disable-next-line:variable-name\n    _LocalPoint!: string;\n    add(vec: Vector): LocalPoint {\n        return <LocalPoint>super.add(vec);\n    }\n    subtract(other: LocalPoint): Vector {\n        return super.subtract(other);\n    }\n    clone(): LocalPoint {\n        return <LocalPoint>super.clone();\n    }\n}\n\nexport class Vector {\n    readonly x: number;\n    readonly y: number;\n    constructor(x: number, y: number) {\n        this.x = x;\n        this.y = y;\n    }\n    dot(other: Vector) {\n        return this.x * other.x + this.y * other.y;\n    }\n    inverse() {\n        return new Vector(1 / this.x, 1 / this.y);\n    }\n    length() {\n        return Math.sqrt(Math.pow(this.x, 2) + Math.pow(this.y, 2));\n    }\n    normalize() {\n        const l = this.length();\n        return new Vector(this.x / l, this.y / l);\n    }\n    reverse() {\n        return new Vector(-this.x, -this.y);\n    }\n    multiply(scale: number) {\n        return new Vector(this.x * scale, this.y * scale);\n    }\n}\n\nexport class Ray<T extends Point> {\n    readonly direction: Vector;\n    readonly origin: T;\n    tMax: number;\n    constructor(origin: T, direction: Vector, tMax?: number) {\n        this.direction = direction;\n        this.origin = origin;\n        if (tMax === undefined) tMax = Infinity;\n        this.tMax = tMax;\n    }\n    static fromPoints<T extends Point>(p1: T, p2: T): Ray<T> {\n        const vec = new Vector(p2.x - p1.x, p2.y - p1.y);\n        let maxT;\n        if (Math.abs(vec.x) > 0.01) maxT = (p2.x - p1.x) / vec.x;\n        else maxT = (p2.y - p1.y) / vec.y;\n        return new Ray(p1, vec, maxT);\n    }\n    get(t: number): T {\n        return <T>new Point(this.origin.x + t * this.direction.x, this.origin.y + t * this.direction.y);\n    }\n    getDistance(t1: number, t2: number) {\n        return Math.sqrt(Math.pow(t2 - t1, 2) * (Math.pow(this.direction.x, 2) + Math.pow(this.direction.y, 2)));\n    }\n    getT(t1: number, distance: number) {\n        return t1 + Math.sqrt(Math.pow(distance, 2) / (Math.pow(this.direction.x, 2) + Math.pow(this.direction.y, 2)));\n    }\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\nimport vueSlider from \"vue-slider-component\";\n\nimport \"@/game/api/events\";\n\nimport { throttle } from \"lodash\";\nimport { mapGetters, mapState } from \"vuex\";\n\nimport ConfirmDialog from \"@/core/components/modals/confirm.vue\";\nimport Prompt from \"@/core/components/modals/prompt.vue\";\nimport Initiative from \"@/game/ui/initiative.vue\";\nimport MenuBar from \"@/game/ui/menu/menu.vue\";\nimport NoteDialog from \"@/game/ui/note.vue\";\nimport SelectionInfo from \"@/game/ui/selection/selection_info.vue\";\nimport Tools from \"@/game/ui/tools/tools.vue\";\n\nimport { createConnection, socket } from \"@/game/api/socket\";\nimport { onKeyDown, onKeyUp } from \"@/game/events/keyboard\";\nimport { scrollZoom } from \"@/game/events/mouse\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { gameStore } from \"@/game/store\";\nimport { l2g } from \"@/game/units\";\nimport { LocalPoint } from \"./geom\";\n\n@Component({\n    components: {\n        \"tool-bar\": Tools,\n        \"selection-info\": SelectionInfo,\n        \"prompt-dialog\": Prompt,\n        \"confirm-dialog\": ConfirmDialog,\n        \"menu-bar\": MenuBar,\n        \"initiative-dialog\": Initiative,\n        \"zoom-slider\": vueSlider,\n        \"note-dialog\": NoteDialog,\n    },\n    beforeRouteEnter(to, from, next) {\n        createConnection(to);\n        next();\n    },\n    beforeRouteLeave(to, from, next) {\n        socket.disconnect();\n        next();\n    },\n})\nexport default class Game extends Vue {\n    $refs!: {\n        confirm: InstanceType<typeof ConfirmDialog>;\n        tools: InstanceType<typeof Tools>;\n    };\n\n    ready = {\n        manager: false,\n        tools: false,\n    };\n\n    get IS_DM(): boolean {\n        return gameStore.IS_DM;\n    }\n\n    get layers(): string[] {\n        return gameStore.layers;\n    }\n\n    get selectedLayer(): string {\n        return gameStore.selectedLayer;\n    }\n\n    get zoomFactor(): number {\n        return gameStore.zoomFactor;\n    }\n\n    set zoomFactor(value: number) {\n        gameStore.updateZoom({\n            newZoomValue: value,\n            zoomLocation: l2g(new LocalPoint(window.innerWidth / 2, window.innerHeight / 2)),\n        });\n    }\n\n    mounted() {\n        window.addEventListener(\"resize\", () => {\n            layerManager.setWidth(window.innerWidth);\n            layerManager.setHeight(window.innerHeight);\n            layerManager.invalidate();\n        });\n        window.addEventListener(\"wheel\", throttle(scrollZoom));\n        window.addEventListener(\"keyup\", onKeyUp);\n        window.addEventListener(\"keydown\", onKeyDown);\n        // // prevent double clicking text selection\n        window.addEventListener(\"selectstart\", e => {\n            e.preventDefault();\n            return false;\n        });\n        this.ready.manager = true;\n    }\n\n    mousedown(event: MouseEvent) {\n        this.$refs.tools.mousedown(event);\n    }\n    mouseup(event: MouseEvent) {\n        this.$refs.tools.mouseup(event);\n    }\n    mousemove(event: MouseEvent) {\n        this.$refs.tools.mousemove(event);\n    }\n    mouseleave(event: MouseEvent) {\n        this.$refs.tools.mouseleave(event);\n    }\n    contextmenu(event: MouseEvent) {\n        this.$refs.tools.contextmenu(event);\n    }\n    selectLayer(layer: string) {\n        layerManager.selectLayer(layer);\n    }\n    drop(event: DragEvent) {\n        if (event === null || event.dataTransfer === null) return;\n        if (event.dataTransfer.files.length > 0) {\n            this.$refs.confirm\n                .open(\"Uploading files should be done through the asset manager.\", \"Ok\", \"\")\n                .then(() => {}, () => {});\n        } else if (event.dataTransfer.getData(\"text/plain\") === \"\") {\n            return;\n        } else {\n            layerManager.dropAsset(event);\n        }\n    }\n}\n","import { GlobalPoint, LocalPoint, Ray } from \"@/game/geom\";\nimport { gameStore } from \"@/game/store\";\n\nexport function g2l(obj: GlobalPoint): LocalPoint {\n    const z = gameStore.zoomFactor;\n    const panX = gameStore.panX;\n    const panY = gameStore.panY;\n    return new LocalPoint((obj.x + panX) * z, (obj.y + panY) * z);\n}\n\nexport function g2lx(x: number) {\n    return g2l(new GlobalPoint(x, 0)).x;\n}\n\nexport function g2ly(y: number) {\n    return g2l(new GlobalPoint(0, y)).y;\n}\n\nexport function g2lz(z: number) {\n    return z * gameStore.zoomFactor;\n}\n\nexport function getUnitDistance(r: number) {\n    return (r / gameStore.unitSize) * gameStore.gridSize;\n}\n\nexport function g2lr(r: number) {\n    return g2lz(getUnitDistance(r));\n}\n\nexport function l2g(obj: LocalPoint): GlobalPoint;\nexport function l2g(obj: Ray<LocalPoint>): Ray<GlobalPoint>;\nexport function l2g(obj: LocalPoint | Ray<LocalPoint>): GlobalPoint | Ray<GlobalPoint> {\n    const z = gameStore.zoomFactor;\n    const panX = gameStore.panX;\n    const panY = gameStore.panY;\n    if (obj instanceof LocalPoint) {\n        return new GlobalPoint(obj.x / z - panX, obj.y / z - panY);\n    } else {\n        return new Ray<GlobalPoint>(l2g(obj.origin), obj.direction.multiply(1 / z), obj.tMax);\n    }\n}\n\nexport function l2gx(x: number) {\n    return l2g(new LocalPoint(x, 0)).x;\n}\n\nexport function l2gy(y: number) {\n    return l2g(new LocalPoint(0, y)).y;\n}\n\nexport function l2gz(z: number) {\n    return z / gameStore.zoomFactor;\n}\n\nexport function l2gr(r: number) {\n    return l2gz(getUnitDistance(r));\n}\n\n(<any>window).g2lx = g2lx;\n(<any>window).g2ly = g2ly;\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\n\nimport { mapState } from \"vuex\";\n\nimport ColorPicker from \"@/core/components/colorpicker.vue\";\nimport Prompt from \"@/core/components/modals/prompt.vue\";\nimport AssetNode from \"@/game/ui/menu/asset_node.vue\";\nimport NoteDialog from \"@/game/ui/note.vue\";\n\nimport { getRef, uuidv4 } from \"@/core/utils\";\nimport { socket } from \"@/game/api/socket\";\nimport { Note } from \"@/game/comm/types/general\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { gameStore } from \"@/game/store\";\n\n@Component({\n    components: {\n        \"color-picker\": ColorPicker,\n        \"asset-node\": AssetNode,\n    },\n    computed: {\n        ...mapState(\"game\", [\"invitationCode\", \"IS_DM\", \"locations\", \"assets\", \"notes\"]),\n    },\n})\nexport default class MenuBar extends Vue {\n    visible = {\n        settings: false,\n        locations: false,\n    };\n\n    get useGrid(): boolean {\n        return gameStore.useGrid;\n    }\n    set useGrid(value: boolean) {\n        gameStore.setUseGrid({ useGrid: value, sync: true });\n    }\n    get fullFOW(): boolean {\n        return gameStore.fullFOW;\n    }\n    set fullFOW(value: boolean) {\n        gameStore.setFullFOW({ fullFOW: value, sync: true });\n    }\n    get fowOpacity(): number {\n        return gameStore.fowOpacity;\n    }\n    set fowOpacity(value: number) {\n        if (typeof value !== \"number\") return;\n        gameStore.setFOWOpacity({ fowOpacity: value, sync: true });\n    }\n    get fowLOS(): boolean {\n        return gameStore.fowLOS;\n    }\n    set fowLOS(value: boolean) {\n        gameStore.setLineOfSight({ fowLOS: value, sync: true });\n    }\n    get unitSize(): number {\n        return gameStore.unitSize;\n    }\n    set unitSize(value: number) {\n        if (typeof value !== \"number\") return;\n        gameStore.setUnitSize({ unitSize: value, sync: true });\n    }\n    get gridSize(): number {\n        return gameStore.gridSize;\n    }\n    set gridSize(value: number) {\n        if (typeof value !== \"number\") return;\n        gameStore.setGridSize({ gridSize: value, sync: true });\n    }\n    get gridColour(): string {\n        return gameStore.gridColour;\n    }\n    set gridColour(value: string) {\n        gameStore.setGridColour({ colour: value, sync: true });\n    }\n    get fowColour(): string {\n        return gameStore.fowColour;\n    }\n    set fowColour(value: string) {\n        gameStore.setFOWColour({ colour: value, sync: true });\n    }\n    get rulerColour(): string {\n        return gameStore.rulerColour;\n    }\n    set rulerColour(value: string) {\n        gameStore.setRulerColour({ colour: value, sync: true });\n    }\n    settingsClick(event: { target: HTMLElement }) {\n        if (event.target.classList.contains(\"accordion\")) {\n            event.target.classList.toggle(\"accordion-active\");\n            const next = <HTMLElement>event.target.nextElementSibling;\n            if (next !== null) next.style.display = next.style.display === \"\" ? \"block\" : \"\";\n        }\n    }\n    changeLocation(name: string) {\n        socket.emit(\"Location.Change\", name);\n    }\n    createLocation() {\n        getRef<Prompt>(\"prompt\")\n            .prompt(`New location name:`, `Create new location`)\n            .then(\n                (value: string) => {\n                    socket.emit(\"Location.New\", value);\n                },\n                () => {},\n            );\n    }\n    createNote() {\n        const note = { title: \"New note\", text: \"\", uuid: uuidv4() };\n        gameStore.newNote({ note, sync: true });\n        this.openNote(note);\n    }\n    openNote(note: Note) {\n        getRef<NoteDialog>(\"note\").open(note);\n    }\n    changeVisionMode(event: { target: HTMLSelectElement }) {\n        const value = event.target.value.toLowerCase();\n        if (value !== \"bvh\" && value !== \"triangle\") return;\n        gameStore.setVisionMode(value);\n        gameStore.recalculateBV();\n        layerManager.invalidate();\n    }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./colorpicker.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./colorpicker.vue?vue&type=script&lang=ts&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ContextMenu',{attrs:{\"visible\":_vm.visible,\"left\":_vm.x + 'px',\"top\":_vm.y + 'px'},on:{\"close\":_vm.close}},[(_vm.IS_DM)?_c('li',{on:{\"click\":_vm.bringPlayers}},[_vm._v(\"Bring players\")]):_vm._e(),_c('li',{on:{\"click\":_vm.createToken}},[_vm._v(\"Create basic token\")]),_c('li',{on:{\"click\":_vm.showInitiative}},[_vm._v(\"Show initiative\")])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"74f43d04-vue-loader-template\\\"}!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./selectcontext.vue?vue&type=template&id=44a31e42&scoped=true&\"","import { CDT } from \"./cdt\";\nimport { ccw, cw, orientation, ulp } from \"./triag\";\n\nexport type Point = number[];\n\nexport const INFINITE = -7e310;\n\nlet _INFINITE_VERTEX: Vertex;\n\nexport enum Sign {\n    NEGATIVE = -1,\n    ZERO = 0,\n    POSITIVE = 1,\n\n    RIGHT_TURN = -1,\n    LEFT_TURN = 1,\n\n    SMALLER = -1,\n    EQUAL = 0,\n    LARGER = 1,\n\n    CLOCKWISE = -1,\n    COUNTERCLOCKWISE = 1,\n\n    COLLINEAR = 0,\n    COPLANAR = 0,\n    DEGENERATE = 0,\n\n    ON_NEGATIVE_SIDE = -1,\n    ON_ORIENTED_BOUNDARY = 0,\n    ON_POSITIVE_SIDE = 1,\n}\n\nenum LineFaceState {\n    UNDEFINED = -1,\n    VERTEX_VERTEX = 0,\n    VERTEX_EDGE = 1,\n    EDGE_VERTEX = 2,\n    EDGE_EDGE = 3,\n}\n\nfunction newPoint(): Point {\n    return [INFINITE, INFINITE];\n}\n\nexport class Triangle {\n    vertices: (Vertex | null)[] = [];\n    neighbours: (Triangle | null)[] = [null, null, null];\n    constraints = [false, false, false];\n    static _counter = 0;\n    uid = Triangle._counter++;\n\n    constructor(...vertices: (Vertex | null)[]) {\n        this.vertices = vertices;\n    }\n\n    from(t: Triangle): this {\n        this.vertices = t.vertices.slice(0, t.vertices.length);\n        this.neighbours = t.neighbours.slice(0, t.neighbours.length);\n        this.constraints = t.constraints.slice(0, t.constraints.length);\n        return this;\n    }\n\n    get dimension() {\n        return this.vertices.length - 1;\n    }\n\n    addVertex(vertex: Vertex) {\n        if (vertex === undefined) {\n            console.log(\"UNDEFINED HIERE\");\n        }\n        this.vertices.push(vertex);\n        vertex.triangle = this;\n    }\n\n    isConstrained(index: number): boolean {\n        return this.constraints[index];\n    }\n\n    reorient() {\n        // If certain indices do not exist yet thay will append faulty undefined's, thus we slice them\n        this.vertices = [this.vertices[1], this.vertices[0], this.vertices[2]].slice(0, this.vertices.length);\n        this.neighbours = [this.neighbours[1], this.neighbours[0], this.neighbours[2]];\n        this.constraints = [this.constraints[1], this.constraints[0], this.constraints[2]];\n    }\n\n    indexV(v: Vertex): number {\n        return this.vertices.indexOf(v);\n    }\n\n    indexT(t: Triangle): number {\n        return this.neighbours.indexOf(t);\n    }\n\n    isInfinite(index?: number): boolean {\n        if (index === undefined) {\n            return this.vertices.includes(_INFINITE_VERTEX);\n        } else {\n            return this.vertices[ccw(index)]!.infinite || this.vertices[cw(index)]!.infinite;\n        }\n    }\n}\n\nexport class Vertex {\n    infinite = false;\n    private _point: Point | undefined;\n    triangle: Triangle | undefined;\n\n    constructor(point?: Point) {\n        this._point = point;\n    }\n\n    get point(): Point | undefined {\n        return this._point;\n    }\n\n    set point(point: Point | undefined) {\n        this._point = point;\n        this.infinite = false;\n    }\n}\n\nexport class EdgeCirculator {\n    ri: number;\n    v: Vertex | null;\n    t: Triangle | null;\n    _ri: number;\n    _v: Vertex | null;\n    _t: Triangle | null;\n\n    constructor(v: Vertex | null, t: Triangle | null) {\n        this.v = v;\n        this.t = t;\n        if (v === null) {\n            this.t = null;\n        } else if (t === null) {\n            this.t = v.triangle!;\n        }\n        if (this.t == null || this.t.dimension < 1) {\n            this.ri = 0;\n            this.v = null;\n            this.t = null;\n        } else {\n            const i = this.t.indexV(v!);\n            if (this.t.dimension === 2) this.ri = ccw(i);\n            else this.ri = 2;\n        }\n        this._ri = this.ri;\n        this._v = this.v;\n        this._t = this.t;\n    }\n\n    get valid() {\n        return this.t !== null && this.v !== null;\n    }\n\n    next(): boolean {\n        let i = this.t!.indexV(this.v!);\n        if (this.t!.dimension === 1) {\n            this.t = this.t!.neighbours[i === 0 ? 1 : 0];\n        } else {\n            this.t = this.t!.neighbours[ccw(i)];\n            i = this.t!.indexV(this.v!);\n            this.ri = ccw(i);\n        }\n        return this.ri !== this._ri || this.v !== this._v || this.t !== this._t;\n    }\n}\n\nexport class EdgeIterator {\n    private i = 0;\n    pos: Triangle | null;\n    edge: Edge = new Edge();\n    tds: TDS;\n    _es = 0;\n    constructor(tds: TDS) {\n        this.tds = tds;\n        this.edge.second = 0;\n        if (tds.dimension <= 0) {\n            this.pos = null;\n            return;\n        }\n        this.pos = tds.triangles[0];\n        if (tds.dimension === 1) this.edge.second = 2;\n        while (this.pos !== null && !this.associatedEdge()) {\n            throw new Error(\"[poi\");\n        }\n\n        if (tds.dimension === 1) this._es = 2;\n    }\n\n    get valid(): boolean {\n        return (this.pos !== null || this._es !== this.edge.second) && this.pos!.isInfinite(this.edge.second);\n    }\n\n    next() {\n        do {\n            this.increment();\n        } while (this.pos !== null && !this.associatedEdge());\n    }\n\n    collect(): Edge {\n        this.edge.first = this.pos;\n        return this.edge;\n    }\n\n    associatedEdge(): boolean {\n        if (this.tds.dimension === 1) return true;\n        return (\n            this.tds.triangles.indexOf(this.pos!) < this.tds.triangles.indexOf(this.pos!.neighbours[this.edge.second]!)\n        );\n    }\n\n    increment() {\n        if (this.tds.dimension === 1) {\n            this.i++;\n            if (this.tds.triangles.length <= this.i) this.pos = null;\n            else this.pos = this.tds.triangles[this.i];\n        } else if (this.edge.second === 2) {\n            this.edge.second = 0;\n            this.i++;\n            if (this.tds.triangles.length <= this.i) this.pos = null;\n            else this.pos = this.tds.triangles[this.i];\n        } else {\n            this.edge.second++;\n        }\n    }\n}\n\nexport class FaceCirculator {\n    v: Vertex | null;\n    t: Triangle | null;\n    _v: Vertex | null;\n    _t: Triangle | null;\n\n    constructor(v: Vertex | null, t: Triangle | null) {\n        this.v = v;\n        this.t = t;\n        if (v === null) {\n            this.t = null;\n        } else if (t === null) {\n            this.t = v.triangle!;\n        }\n        if (this.t == null || this.t.dimension < 2) {\n            this.v = null;\n            this.t = null;\n        }\n        this._v = this.v;\n        this._t = this.t;\n    }\n\n    get valid() {\n        return this.t !== null && this.v !== null;\n    }\n\n    prev() {\n        const i = this.t!.indexV(this.v!);\n        this.t = this.t!.neighbours[cw(i)];\n    }\n\n    next(): boolean {\n        const i = this.t!.indexV(this.v!);\n        this.t = this.t!.neighbours[ccw(i)];\n        return this.v !== this._v || this.t !== this._t;\n    }\n}\n\nexport class LineFaceCirculator {\n    private i = 0;\n    pos: Triangle | null = null;\n    _tr: CDT;\n    s: LineFaceState = LineFaceState.UNDEFINED;\n    p: Point;\n    q: Point;\n\n    constructor(v: Vertex, tr: CDT, dir: Point) {\n        this._tr = tr;\n        this.p = v.point!;\n        this.q = dir;\n\n        const fc = new FaceCirculator(v, null);\n        let ic = fc.t!.indexV(v);\n        let vt = fc.t!.vertices[cw(ic)]!;\n        while (v === _INFINITE_VERTEX || orientation(this.p, this.q, vt.point!) !== Sign.LEFT_TURN) {\n            fc.next();\n            ic = fc.t!.indexV(v);\n            vt = fc.t!.vertices[cw(ic)]!;\n            if (!fc.valid) {\n                return;\n            }\n        }\n\n        let vr = fc.t!.vertices[ccw(ic)]!;\n        let pqr: Sign = Sign.RIGHT_TURN;\n        // tslint:disable:no-conditional-assignment\n        while (vr !== _INFINITE_VERTEX && (pqr = orientation(this.p, this.q, vr.point!)) === Sign.LEFT_TURN) {\n            fc.prev();\n            ic = fc.t!.indexV(v);\n            vr = fc.t!.vertices[ccw(ic)]!;\n        }\n\n        ic = fc.t!.indexV(v);\n        vt = fc.t!.vertices[cw(ic)]!;\n\n        if (vr === _INFINITE_VERTEX) {\n            fc.prev();\n            ic = fc.t!.indexV(v);\n            vr = fc.t!.vertices[ccw(ic)]!;\n            pqr = orientation(this.p, this.q, vr.point!);\n            switch (pqr) {\n                case Sign.RIGHT_TURN:\n                case Sign.COLLINEAR: {\n                    fc.next();\n                    ic = fc.t!.indexV(_INFINITE_VERTEX);\n                    this.pos = fc.t!;\n                    this.s = LineFaceState.VERTEX_VERTEX;\n                    this.i = ic;\n                    break;\n                }\n                case Sign.LEFT_TURN: {\n                    break;\n                }\n            }\n        } else if (pqr === Sign.COLLINEAR) {\n            this.pos = fc.t!;\n            this.s = LineFaceState.VERTEX_VERTEX;\n            this.i = ccw(ic);\n        } else {\n            this.pos = fc.t!;\n            this.s = LineFaceState.VERTEX_EDGE;\n            this.i = ic;\n        }\n    }\n\n    next() {\n        this.increment();\n    }\n\n    increment() {\n        let o: Sign;\n        if (this.s === LineFaceState.VERTEX_VERTEX || this.s === LineFaceState.EDGE_VERTEX) {\n            do {\n                const n = this.pos!.neighbours[cw(this.i)]!;\n                this.i = n.indexT(this.pos!);\n                this.pos = n;\n                if (this.pos!.vertices[this.i] === _INFINITE_VERTEX) {\n                    o = Sign.COLLINEAR;\n                    this.i = cw(this.i);\n                    break;\n                }\n                o = orientation(this.p, this.q, this.pos!.vertices[this.i]!.point!);\n                this.i = cw(this.i);\n            } while (o === Sign.LEFT_TURN);\n            if (o === Sign.COLLINEAR) {\n                this.s = LineFaceState.VERTEX_VERTEX;\n                this.i = ccw(this.i);\n            } else {\n                this.s = LineFaceState.VERTEX_EDGE;\n            }\n        } else {\n            const n = this.pos!.neighbours[this.i]!;\n            const ni = n.indexT(this.pos!);\n            this.pos = n;\n            o =\n                this.pos!.vertices[ni]! === _INFINITE_VERTEX\n                    ? Sign.COLLINEAR\n                    : orientation(this.p, this.q, this.pos!.vertices[ni]!.point!);\n            switch (o) {\n                case Sign.LEFT_TURN: {\n                    this.s = LineFaceState.EDGE_EDGE;\n                    this.i = ccw(ni);\n                    break;\n                }\n                case Sign.RIGHT_TURN: {\n                    this.s = LineFaceState.EDGE_EDGE;\n                    this.i = cw(ni);\n                    break;\n                }\n                default: {\n                    this.s = LineFaceState.EDGE_VERTEX;\n                    this.i = ni;\n                }\n            }\n        }\n    }\n}\n\nclass Edge {\n    first: Triangle | null = null;\n    second: number = 0;\n}\n\nexport enum LocateType {\n    VERTEX,\n    EDGE,\n    FACE,\n    OUTSIDE_CONVEX_HULL,\n    OUTSIDE_AFFINE_HULL,\n}\n\nexport class TDS {\n    dimension = -1;\n    vertices: Vertex[] = [];\n    triangles: Triangle[] = [];\n    _infinite: Vertex;\n\n    constructor() {\n        this._infinite = this.createVertex();\n        _INFINITE_VERTEX = this._infinite;\n        const t = new Triangle();\n        t.addVertex(this._infinite);\n        this.triangles.push(t);\n    }\n\n    createVertex(): Vertex {\n        const v = this.infiniteVertex;\n        if (v === undefined) {\n            console.log(\"UNDEFINED HIERE\");\n        }\n        this.vertices.push(v);\n        return v;\n    }\n\n    createTriangle(\n        v0: Vertex | null,\n        v1: Vertex | null,\n        v2: Vertex | null,\n        n0: Triangle | null,\n        n1: Triangle | null,\n        n2: Triangle | null,\n    ) {\n        const t = new Triangle(v0, v1, v2);\n        t.neighbours[0] = n0;\n        t.neighbours[1] = n1;\n        t.neighbours[2] = n2;\n        this.triangles.push(t);\n        return t;\n    }\n\n    deleteTriangle(trig: Triangle) {\n        this.triangles = this.triangles.filter(t => t !== trig);\n    }\n\n    setAdjacency(t0: Triangle, i0: number, t1: Triangle, i1: number) {\n        t0.neighbours[i0] = t1;\n        t1.neighbours[i1] = t0;\n    }\n\n    get finiteVertex(): Vertex {\n        return this.vertices[1];\n    }\n\n    get infiniteVertex(): Vertex {\n        const v = new Vertex(newPoint());\n        v.infinite = true;\n        return v;\n    }\n\n    get finiteEdge(): Edge {\n        if (this.dimension < 1) throw new Error(\"aspo\");\n        const ei = new EdgeIterator(this);\n        while (ei.valid) ei.next();\n        return ei.collect();\n    }\n\n    insertDimUp(w: Vertex = new Vertex(), orient: boolean = true): Vertex {\n        const v = this.createVertex();\n        this.dimension++;\n        let t1: Triangle;\n        let t2: Triangle;\n        switch (this.dimension) {\n            case 0: {\n                t1 = this.triangles[0];\n                t2 = new Triangle(v);\n                this.triangles.push(t2);\n                this.setAdjacency(t1, 0, t2, 0);\n                v.triangle = t2;\n                break;\n            }\n            case 1:\n            case 2: {\n                const deleteList: Triangle[] = [];\n                const triangles = this.triangles.slice(0, this.triangles.length);\n                for (const trig of triangles) {\n                    const copy = new Triangle().from(trig);\n                    this.triangles.push(copy);\n                    trig.vertices[this.dimension] = v;\n                    copy.vertices[this.dimension] = w;\n                    this.setAdjacency(trig, this.dimension, copy, this.dimension);\n                    if (trig.vertices.includes(w)) deleteList.push(copy);\n                }\n                for (const trig of triangles) {\n                    const neighbour = trig.neighbours[this.dimension];\n                    for (let j = 0; j < this.dimension; ++j) {\n                        neighbour!.neighbours[j] = trig.neighbours[j]!.neighbours[this.dimension];\n                    }\n                }\n\n                let lfit = 0;\n                if (this.dimension === 1) {\n                    if (orient) {\n                        triangles[lfit].reorient();\n                        lfit++;\n                        triangles[lfit].neighbours[1]!.reorient();\n                    } else {\n                        triangles[lfit].neighbours[1]!.reorient();\n                        lfit++;\n                        triangles[lfit].reorient();\n                    }\n                } else {\n                    for (const trig of triangles) {\n                        if (orient) trig.neighbours[2]!.reorient();\n                        else trig.reorient();\n                    }\n                }\n\n                for (const trig of deleteList) {\n                    let j = 1;\n                    if (trig.vertices[0] === w) j = 0;\n                    t1 = trig.neighbours[this.dimension]!;\n                    const i1 = this.mirrorIndex(trig, this.dimension);\n                    t2 = trig.neighbours[j]!;\n                    const i2 = this.mirrorIndex(trig, j);\n                    this.setAdjacency(t1, i1, t2, i2);\n                    this.deleteTriangle(trig);\n                }\n                v.triangle = triangles[0];\n                break;\n            }\n            default: {\n                throw new Error(\"Dimension unknown\");\n            }\n        }\n        return v;\n    }\n\n    mirrorIndex(t: Triangle, i: number): number {\n        if (t.dimension === 1) {\n            const j = t.neighbours[i]!.indexV(t.vertices[i === 0 ? 1 : 0]!);\n            return j === 0 ? 1 : 0;\n        }\n        return ccw(t.neighbours[i]!.indexV(t.vertices[ccw(i)]!));\n    }\n\n    insertInFace(t: Triangle) {\n        const v = this.createVertex();\n        const v0 = t.vertices[0]!;\n        const v1 = t.vertices[1]!;\n        const v2 = t.vertices[2]!;\n        const n1 = t.neighbours[1]!;\n        const n2 = t.neighbours[2]!;\n        const t1 = this.createTriangle(v0, v, v2, t, n1, null);\n        const t2 = this.createTriangle(v0, v1, v, t, null, n2);\n        this.setAdjacency(t1, 2, t2, 1);\n        if (n1 !== null) {\n            const i1 = this.mirrorIndex(t, 1);\n            n1.neighbours[i1] = t1;\n        }\n        if (n2 !== null) {\n            const i2 = this.mirrorIndex(t, 2);\n            n2.neighbours[i2] = t2;\n        }\n        t.vertices[0] = v;\n        t.neighbours[1] = t1;\n        t.neighbours[2] = t2;\n        if (v0.triangle === t) v0.triangle = t2;\n        v.triangle = t;\n        return v;\n    }\n\n    flip(t: Triangle, i: number) {\n        const n = t.neighbours[i]!;\n        const ni = this.mirrorIndex(t, i);\n        const vCW = t.vertices[cw(i)]!;\n        const vCCW = t.vertices[ccw(i)]!;\n        const tr = t.neighbours[ccw(i)]!;\n        const tri = this.mirrorIndex(t, ccw(i));\n        const bl = n.neighbours[ccw(ni)]!;\n        const bli = this.mirrorIndex(n, ccw(ni));\n\n        t.vertices[cw(i)] = n.vertices[ni]!;\n        n.vertices[cw(ni)] = t.vertices[i]!;\n\n        this.setAdjacency(t, i, bl, bli);\n        this.setAdjacency(t, ccw(i), n, ccw(ni));\n        this.setAdjacency(n, ni, tr, tri);\n\n        if (vCW.triangle! === t) vCW.triangle = n;\n        if (vCCW.triangle! === n) vCCW.triangle = t;\n    }\n\n    insertInEdge(t: Triangle, i: number) {\n        let v: Vertex;\n        if (this.dimension === 1) {\n            v = this.createVertex();\n            const ff = t.neighbours[0]!;\n            const vv = t.vertices[1]!;\n            const g = this.createTriangle(v, vv, null, ff, t, null);\n            t.vertices[1] = v;\n            t.neighbours[0] = g;\n            ff.neighbours[1] = g;\n            v.triangle = g;\n            vv.triangle = ff;\n        } else {\n            const n = t.neighbours[i]!;\n            const ni = this.mirrorIndex(t, i);\n            v = this.insertInFace(t);\n            this.flip(n, ni);\n        }\n        return v;\n    }\n}\n\nexport class BoundingBox {\n    x1: number;\n    x2: number;\n    y1: number;\n    y2: number;\n    constructor(p: Point) {\n        this.x1 = p[0];\n        this.y1 = p[1];\n        this.x2 = p[0];\n        this.y2 = p[1];\n    }\n\n    dilate(dist: number) {\n        this.x1 -= dist * ulp(this.x1);\n        this.y1 -= dist * ulp(this.y1);\n        this.x2 += dist * ulp(this.x2);\n        this.y2 += dist * ulp(this.y2);\n    }\n\n    overlaps(other: BoundingBox): boolean {\n        if (this.x2 < other.x1 || other.x2 < this.x1) return false;\n        if (this.y2 < other.y1 || other.y2 < this.y1) return false;\n        return true;\n    }\n}\n","import { partition } from \"@/core/utils\";\nimport { GlobalPoint, Ray } from \"@/game/geom\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { BoundingRect } from \"@/game/shapes/boundingrect\";\nimport { gameStore } from \"@/game/store\";\nimport { g2lx, g2ly, g2lz } from \"@/game/units\";\nimport { BoundingNode, InteriorNode, LeafNode } from \"@/game/visibility/bvh/node\";\n\ninterface BuildInfo {\n    index: number;\n    bbox: BoundingRect;\n    center: BoundingRect;\n}\ninterface LinearBHVNode {\n    bbox: BoundingRect;\n    nPrimitives: number;\n}\ninterface LinearLeafNode extends LinearBHVNode {\n    primitivesOffset: number;\n}\ninterface LinearInternalNode extends LinearBHVNode {\n    secondChildOffset: number;\n    dimension: number;\n}\n\nexport class BoundingVolume {\n    totalNodes = 0;\n    buildData: BuildInfo[] = [];\n    shapes: string[];\n    orderedPrims: string[] = [];\n    root: BoundingNode | null;\n    nodes: LinearBHVNode[] = [];\n\n    offset = 0;\n\n    constructor(shapes: string[]) {\n        this.shapes = shapes;\n        if (this.shapes.length === 0) {\n            this.root = null;\n            this.nodes = [];\n            return;\n        }\n        for (let i = 0; i < shapes.length; i++) {\n            const shape = layerManager.UUIDMap.get(shapes[i])!;\n            try {\n                this.buildData.push({\n                    index: i,\n                    bbox: shape.getBoundingBox(),\n                    center: new BoundingRect(shape.center(), 0, 0),\n                });\n            } catch {\n                console.warn(`Shape ${shape.type} - ${shape.uuid} cannot be used for vision blocking !!!`);\n                shape.visionObstruction = false;\n                gameStore.visionBlockers.splice(i, 1);\n                throw new Error();\n            }\n        }\n        this.root = this.recursiveBuild(0, shapes.length);\n        this.compact();\n    }\n\n    draw() {\n        const ctx = layerManager.getLayer(\"draw\")!.ctx;\n        for (const node of this.nodes) {\n            const b = node.bbox;\n            ctx.strokeRect(g2lx(b.topLeft.x), g2ly(b.topLeft.y), g2lz(b.w), g2lz(b.h));\n        }\n    }\n\n    recursiveBuild(start: number, end: number): BoundingNode {\n        this.totalNodes++;\n        let bbox = this.buildData[start].bbox;\n        for (let i = start + 1; i < end; i++) bbox = bbox.union(this.buildData[i].bbox);\n        const nPrimitives = end - start;\n        if (nPrimitives === 1) {\n            return this.createLeaf(start, end, nPrimitives, bbox);\n        } else {\n            let centroidBbox = this.buildData[start].center;\n            for (let i = start; i < end; i++) centroidBbox = centroidBbox.union(this.buildData[i].center);\n            const dimension = centroidBbox.getMaxExtent();\n            if (centroidBbox.botRight.get(dimension) === centroidBbox.topLeft.get(dimension)) {\n                return this.createLeaf(start, end, nPrimitives, bbox);\n            }\n            // Use shitty Middle thingy until an introselect js algo is added\n            const pMid = 0.5 * (centroidBbox.topLeft.get(dimension) + centroidBbox.botRight.get(dimension));\n            const partitionedData = partition(\n                this.buildData.slice(start, end),\n                (n: BuildInfo) => n.center.center().get(dimension) < pMid,\n            );\n            const flattened = (<BuildInfo[]>[]).concat.apply([], partitionedData);\n            if (partitionedData[0].length === 0 || partitionedData[1].length === 0) console.log(\"EMPTY\");\n            this.buildData.splice(start, flattened.length, ...flattened);\n            const mid = partitionedData[0].length + start;\n            return new InteriorNode(dimension, this.recursiveBuild(start, mid), this.recursiveBuild(mid, end));\n        }\n    }\n\n    intersect(ray: Ray<GlobalPoint>, stopOnFirstHit?: boolean) {\n        if (this.nodes.length === 0) return { hit: false, intersect: ray.get(0), tMin: 0, tMax: ray.tMax };\n        if (stopOnFirstHit === undefined) stopOnFirstHit = false;\n        // Initialize return values\n        let hit = false;\n        let tMin = 0;\n        let tMax = ray.tMax;\n\n        // Initialize work variables\n        let todoOffset = 0;\n        let nodeNum = 0;\n        const todo: number[] = [];\n\n        // Precalculate intersection vectors\n        const invDir = ray.direction.inverse();\n        const dirIsNegative = [invDir.x < 0, invDir.y < 0];\n\n        while (true) {\n            const node = this.nodes[nodeNum];\n\n            const i = node.bbox.intersectP(ray, invDir, dirIsNegative);\n            if (i.hit) {\n                if (node.nPrimitives > 0) {\n                    // TODO: nPrimitives is currently always 1 , this could be generalised\n                    // for (let i=0; i < node.nPrimitives; i++) {\n                    //     if (this.shapes[(<LinearLeafNode>node).primitivesOffset + i])\n                    // }\n                    hit = true;\n                    tMin = ray.tMax = i.min;\n                    tMax = i.max;\n                    if (todoOffset === 0 || stopOnFirstHit) break;\n                    nodeNum = todo[--todoOffset];\n                } else {\n                    if (dirIsNegative[(<LinearInternalNode>node).dimension]) {\n                        todo[todoOffset++] = nodeNum + 1;\n                        nodeNum = (<LinearInternalNode>node).secondChildOffset;\n                    } else {\n                        todo[todoOffset++] = (<LinearInternalNode>node).secondChildOffset;\n                        nodeNum++;\n                    }\n                }\n            } else {\n                if (todoOffset === 0) break;\n                nodeNum = todo[--todoOffset];\n            }\n        }\n        return { hit, intersect: ray.get(tMin), tMin, tMax };\n    }\n\n    private compact() {\n        this.offset = 0;\n        if (this.root !== null) this.flatten(this.root);\n    }\n\n    private flatten(node: BoundingNode) {\n        const index = this.offset;\n        const myOffset = this.offset++;\n        if (node.nPrimitives === 0) {\n            this.flatten(node.children[0]);\n            const secondOffset = this.flatten(node.children[1]);\n            this.nodes[index] = <LinearInternalNode>{\n                bbox: node.bbox,\n                dimension: (<InteriorNode>node).dimension,\n                nPrimitives: 0,\n                secondChildOffset: secondOffset,\n            };\n        } else {\n            this.nodes[index] = <LinearLeafNode>{\n                bbox: node.bbox,\n                primitivesOffset: (<LeafNode>node).firstPrimOffset,\n                nPrimitives: node.nPrimitives,\n            };\n        }\n        return myOffset;\n    }\n\n    private createLeaf(start: number, end: number, nPrimitives: number, bbox: BoundingRect) {\n        const size = this.orderedPrims.length;\n        for (let i = start; i < end; i++) this.orderedPrims.push(this.shapes[this.buildData[i].index]);\n        return new LeafNode(size, nPrimitives, bbox);\n    }\n}\n","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./shapecontext.vue?vue&type=style&index=0&id=7111f3f6&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./shapecontext.vue?vue&type=style&index=0&id=7111f3f6&scoped=true&lang=css&\"","import Initiative from \"./ui/initiative.vue\";\n\nimport { getRef } from \"@/core/utils\";\nimport { sendClientOptions } from \"@/game/api/utils\";\nimport { ServerShape } from \"@/game/comm/types/shapes\";\nimport { GlobalPoint } from \"@/game/geom\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { createShapeFromDict } from \"@/game/shapes/utils\";\nimport { gameStore } from \"@/game/store\";\nimport { AnnotationManager } from \"@/game/ui/annotation\";\nimport { g2l } from \"@/game/units\";\n\nexport class GameManager {\n    selectedTool: number = 0;\n\n    annotationManager = new AnnotationManager();\n\n    addShape(shape: ServerShape): void {\n        if (!layerManager.hasLayer(shape.layer)) {\n            console.log(`Shape with unknown layer ${shape.layer} could not be added`);\n            return;\n        }\n        const layer = layerManager.getLayer(shape.layer)!;\n        const sh = createShapeFromDict(shape);\n        if (sh === undefined) {\n            console.log(`Shape with unknown type ${shape.type_} could not be added`);\n            return;\n        }\n        layer.addShape(sh, false);\n        layer.invalidate(false);\n    }\n\n    updateShape(data: { shape: ServerShape; redraw: boolean; move: boolean }): void {\n        if (!layerManager.hasLayer(data.shape.layer)) {\n            console.log(`Shape with unknown layer ${data.shape.layer} could not be added`);\n            return;\n        }\n        const sh = createShapeFromDict(data.shape, true);\n        if (sh === undefined) {\n            console.log(`Shape with unknown type ${data.shape.type_} could not be added`);\n            return;\n        }\n        const oldShape = layerManager.UUIDMap.get(data.shape.uuid);\n        if (oldShape === undefined) {\n            console.log(`Shape with unknown id could not be updated`);\n            return;\n        }\n        const redrawInitiative = sh.owners !== oldShape.owners;\n        const shape = Object.assign(oldShape, sh);\n        shape.checkVisionSources();\n        shape.setMovementBlock(shape.movementObstruction);\n        shape.setIsToken(shape.isToken);\n        if (data.move && shape.visionObstruction) gameStore.recalculateBV();\n        if (data.redraw) layerManager.getLayer(data.shape.layer)!.invalidate(false);\n        if (redrawInitiative) getRef<Initiative>(\"initiative\").$forceUpdate();\n    }\n\n    setCenterPosition(position: GlobalPoint) {\n        const localPos = g2l(position);\n        gameStore.increasePanX((window.innerWidth / 2 - localPos.x) / gameStore.zoomFactor);\n        gameStore.increasePanY((window.innerHeight / 2 - localPos.y) / gameStore.zoomFactor);\n        layerManager.invalidate();\n        sendClientOptions();\n    }\n}\n\nexport const gameManager = new GameManager();\n(<any>window).gameManager = gameManager;\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('modal',{attrs:{\"visible\":_vm.visible,\"mask\":false},on:{\"close\":function($event){_vm.visible = false}},scopedSlots:_vm._u([{key:\"header\",fn:function(m){return _c('div',{staticClass:\"modal-header\",attrs:{\"draggable\":\"true\"},on:{\"dragstart\":m.dragStart,\"dragend\":m.dragEnd}},[_c('div',[_vm._v(\"Initiative\")]),_c('div',{staticClass:\"header-close\",on:{\"click\":function($event){_vm.visible = false}}},[_c('i',{staticClass:\"far fa-window-close\"})])])}}])},[_c('div',{staticClass:\"modal-body\"},[_c('draggable',{attrs:{\"id\":\"initiative-list\",\"options\":{setData: _vm.fakeSetData, disabled: !_vm.$store.state.game.IS_DM}},on:{\"change\":_vm.updateOrder},model:{value:(_vm.data),callback:function ($$v) {_vm.data=$$v},expression:\"data\"}},[_vm._l((_vm.data),function(actor){return [_c('div',{key:actor.uuid,staticStyle:{\"display\":\"flex\",\"flex-direction\":\"column\",\"align-items\":\"flex-end\"}},[_c('div',{staticClass:\"initiative-actor\",class:{'initiative-selected': _vm.currentActor === actor.uuid},style:({'cursor': _vm.$store.state.game.IS_DM && 'move'}),on:{\"mouseenter\":function($event){_vm.toggleHighlight(actor, true)},\"mouseleave\":function($event){_vm.toggleHighlight(actor, false)}}},[(actor.has_img)?[_c('img',{attrs:{\"src\":actor.source,\"width\":\"30px\",\"height\":\"30px\"}})]:[_c('span',{staticStyle:{\"width\":\"auto\"}},[_vm._v(_vm._s(actor.source))])],_c('input',{directives:[{name:\"model\",rawName:\"v-model.lazy.number\",value:(actor.initiative),expression:\"actor.initiative\",modifiers:{\"lazy\":true,\"number\":true}}],class:{'notAllowed': !_vm.owns(actor)},attrs:{\"type\":\"text\",\"placeholder\":\"value\",\"disabled\":!_vm.owns(actor)},domProps:{\"value\":(actor.initiative)},on:{\"change\":[function($event){_vm.$set(actor, \"initiative\", _vm._n($event.target.value))},function($event){_vm.syncInitiative(actor)}],\"blur\":function($event){_vm.$forceUpdate()}}}),_c('div',{staticClass:\"initiative-effects-icon\",class:{'notAllowed': !_vm.owns(actor)},staticStyle:{\"opacity\":\"0.6\"},on:{\"click\":function($event){_vm.createEffect(actor, _vm.getDefaultEffect(), true)}}},[_c('i',{staticClass:\"fas fa-stopwatch\"}),(actor.effects)?[_vm._v(_vm._s(actor.effects.length))]:[_vm._v(\"0\")]],2),_c('div',{class:{'notAllowed': !_vm.owns(actor)},style:({'opacity': actor.visible ? '1.0' : '0.3'}),on:{\"click\":function($event){_vm.toggleOption(actor, 'visible')}}},[_c('i',{staticClass:\"fas fa-eye\"})]),_c('div',{class:{'notAllowed': !_vm.owns(actor)},style:({'opacity': actor.group ? '1.0' : '0.3'}),on:{\"click\":function($event){_vm.toggleOption(actor, 'group')}}},[_c('i',{staticClass:\"fas fa-users\"})]),_c('div',{class:{'notAllowed': !_vm.owns(actor)},style:({'opacity': _vm.owns(actor) ? '1.0' : '0.3'}),on:{\"click\":function($event){_vm.removeInitiative(actor.uuid, true, true)}}},[_c('i',{staticClass:\"fas fa-trash-alt\"})])],2),(actor.effects)?_c('div',{staticClass:\"initiative-effect\"},_vm._l((actor.effects),function(effect){return _c('div',{key:effect.uuid},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(effect.name),expression:\"effect.name\"}],attrs:{\"type\":\"text\",\"size\":effect.name.length || 1},domProps:{\"value\":(effect.name)},on:{\"change\":function($event){_vm.updateEffect(actor.uuid, effect, true)},\"input\":function($event){if($event.target.composing){ return; }_vm.$set(effect, \"name\", $event.target.value)}}}),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(effect.turns),expression:\"effect.turns\"}],attrs:{\"type\":\"text\",\"size\":effect.turns.toString().length || 1},domProps:{\"value\":(effect.turns)},on:{\"change\":function($event){_vm.updateEffect(actor.uuid, effect, true)},\"input\":function($event){if($event.target.composing){ return; }_vm.$set(effect, \"turns\", $event.target.value)}}})])})):_vm._e()])]})],2),_c('div',{attrs:{\"id\":\"initiative-bar\"}},[_c('div',{attrs:{\"id\":\"initiative-round\"}},[_vm._v(\"Round \"+_vm._s(_vm.roundCounter))]),_c('div',{staticStyle:{\"display\":\"flex\"}}),_c('div',{staticClass:\"initiative-bar-button\",class:{'notAllowed': !_vm.$store.state.game.IS_DM},on:{\"click\":function($event){_vm.setRound(0, true); _vm.setTurn(_vm.data[0].uuid, true)}}},[_c('i',{staticClass:\"fas fa-sync-alt\"})]),_c('div',{staticClass:\"initiative-bar-button\",class:{'notAllowed': !_vm.$store.state.game.IS_DM},on:{\"click\":_vm.nextTurn}},[_c('i',{staticClass:\"fas fa-chevron-right\"})])])],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"74f43d04-vue-loader-template\\\"}!../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./initiative.vue?vue&type=template&id=ccaf03d6&scoped=true&\"","\n\n\n\n\n\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\n\n@Component\nexport default class LoadComponent extends Vue {\n    message = \"Loading...\";\n}\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./game.vue?vue&type=style&index=1&id=6d744362&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./game.vue?vue&type=style&index=1&id=6d744362&scoped=true&lang=css&\"","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport axios, { AxiosError, AxiosResponse } from \"axios\";\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\nimport { Route } from \"vue-router\";\n\nimport { coreStore } from \"@/core/store\";\n\nComponent.registerHooks([\"beforeRouteEnter\"]);\n\n@Component\nexport default class Dashboard extends Vue {\n    owned = [];\n    joined = [];\n    error = \"\";\n\n    newSessionName = \"\";\n\n    beforeRouteEnter(to: Route, from: Route, next: ({}) => {}) {\n        axios\n            .get(\"/api/rooms\")\n            .then((response: AxiosResponse) => {\n                next((vm: this) => {\n                    vm.owned = response.data.owned;\n                    vm.joined = response.data.joined;\n                });\n            })\n            .catch((err: AxiosError) => {\n                next((vm: this) => {\n                    vm.error = err.message;\n                });\n            });\n    }\n\n    createRoom(event: Event) {\n        axios\n            .post(\"/api/rooms\", {\n                name: this.newSessionName,\n            })\n            .then((response: AxiosResponse) => {\n                this.$router.push(`/game/${coreStore.username}/${this.newSessionName}`);\n            })\n            .catch((err: AxiosError) => {\n                this.error = err.message;\n            });\n    }\n}\n","import { render, staticRenderFns } from \"./confirm.vue?vue&type=template&id=1883e207&scoped=true&\"\nimport script from \"./confirm.vue?vue&type=script&lang=ts&\"\nexport * from \"./confirm.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./confirm.vue?vue&type=style&index=0&id=1883e207&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1883e207\",\n  null\n  \n)\n\ncomponent.options.__file = \"confirm.vue\"\nexport default component.exports","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./shapecontext.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./shapecontext.vue?vue&type=script&lang=ts&\"","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--12-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./manager.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--12-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./manager.vue?vue&type=script&lang=ts&\"","import Vue from \"vue\";\nexport const EventBus = new Vue();\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--12-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./main.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--12-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./main.vue?vue&type=script&lang=ts&\"","import { GlobalPoint } from \"@/game/geom\";\nimport { BaseRect } from \"@/game/shapes/baserect\";\nimport { gameStore } from \"@/game/store\";\nimport { g2l } from \"@/game/units\";\nimport { getFogColour } from \"@/game/utils\";\n\nexport class Rect extends BaseRect {\n    type = \"rect\";\n    constructor(topleft: GlobalPoint, w: number, h: number, fillColour?: string, strokeColour?: string, uuid?: string) {\n        super(topleft, w, h, fillColour, strokeColour, uuid);\n    }\n    asDict() {\n        return super.getBaseDict();\n    }\n    draw(ctx: CanvasRenderingContext2D) {\n        super.draw(ctx);\n        if (this.fillColour === \"fog\") ctx.fillStyle = getFogColour();\n        else ctx.fillStyle = this.fillColour;\n        const z = gameStore.zoomFactor;\n        const loc = g2l(this.refPoint);\n        ctx.fillRect(loc.x, loc.y, this.w * z, this.h * z);\n        if (this.strokeColour !== \"rgba(0, 0, 0, 0)\") {\n            ctx.strokeStyle = this.strokeColour;\n            ctx.lineWidth = 5;\n            ctx.strokeRect(loc.x, loc.y, this.w * z, this.h * z);\n        }\n    }\n}\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./selectcontext.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./selectcontext.vue?vue&type=script&lang=ts&\"","import { Ray, Vector } from \"@/game/geom\";\nimport { Layer } from \"@/game/layers/layer\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { Settings } from \"@/game/settings\";\nimport { gameStore } from \"@/game/store\";\nimport { g2l, g2lx, g2ly } from \"@/game/units\";\nimport { computeVisibility } from \"../visibility/te/te\";\n\nexport class FOWPlayersLayer extends Layer {\n    isVisionLayer: boolean = true;\n\n    draw(): void {\n        if (!this.valid) {\n            // console.time(\"VI\");\n            const ctx = this.ctx;\n\n            if (!gameStore.fowLOS || Settings.skipPlayerFOW) {\n                ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n                this.valid = true;\n                return;\n            }\n\n            ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n\n            const drctx = layerManager.getLayer(\"draw\")!.ctx;\n            drctx.clearRect(0, 0, window.innerWidth, window.innerHeight);\n\n            const originalOperation = ctx.globalCompositeOperation;\n\n            ctx.fillStyle = \"rgba(0, 0, 0, 1)\";\n\n            // For the DM this is done at the end of this function.  TODO: why the split up ???\n            // This was done in commit be1e65cff1e7369375fe11cfa1643fab1d11beab.\n            if (!gameStore.IS_DM) super.draw(!gameStore.fullFOW);\n\n            // Then cut out all the player vision auras\n            const maxLength = ctx.canvas.width + ctx.canvas.height;\n\n            for (const tokenId of gameStore.ownedtokens) {\n                const token = layerManager.UUIDMap.get(tokenId);\n                if (token === undefined) continue;\n                if (gameStore.visionMode === \"bvh\") {\n                    ctx.beginPath();\n                    let lastArcAngle = -1;\n                    const center = token.center();\n                    const lcenter = g2l(center);\n\n                    for (let angle = 0; angle < 2 * Math.PI; angle += (Settings.angleSteps / 2 / 180) * Math.PI) {\n                        const cos = Math.cos(angle);\n                        const sin = Math.sin(angle);\n                        // Check if there is a hit with one of the nearby light blockers.\n                        const lightRay = new Ray(center, new Vector(cos, sin));\n                        const hitResult = gameStore.BV.intersect(lightRay);\n\n                        // We can move on to the next angle if nothing was hit.\n                        if (!hitResult.hit) {\n                            // If an earlier hit caused the aura to leave the arc, we need to go back to the arc\n                            if (lastArcAngle === -1) {\n                                // Draw a line from the last non arc location back to the arc\n                                ctx.lineTo(lcenter.x + maxLength * cos, lcenter.y + maxLength * sin);\n                                // Set the start of a new arc beginning at the current angle\n                                lastArcAngle = angle;\n                            }\n                            continue;\n                        }\n                        // If hit , first finish any ongoing arc, then move to the intersection point\n                        if (lastArcAngle !== -1) {\n                            ctx.arc(lcenter.x, lcenter.y, maxLength, lastArcAngle, angle);\n                            lastArcAngle = -1;\n                        }\n                        ctx.lineTo(g2lx(hitResult.intersect.x), g2ly(hitResult.intersect.y));\n                    }\n\n                    // Finish the final arc.\n                    if (lastArcAngle !== -1) ctx.arc(lcenter.x, lcenter.y, maxLength, lastArcAngle, 2 * Math.PI);\n                    else ctx.closePath();\n                    ctx.fill();\n                } else {\n                    try {\n                        const polygon = computeVisibility(token.center());\n                        ctx.beginPath();\n                        ctx.moveTo(g2lx(polygon[0][0]), g2ly(polygon[0][1]));\n                        for (const point of polygon) ctx.lineTo(g2lx(point[0]), g2ly(point[1]));\n                        ctx.closePath();\n                        ctx.fill();\n                    } catch {}\n                }\n            }\n\n            // For the players this is done at the beginning of this function.  TODO: why the split up ???\n            // This was done in commit be1e65cff1e7369375fe11cfa1643fab1d11beab.\n            if (gameStore.IS_DM) super.draw(!gameStore.fullFOW);\n\n            ctx.globalCompositeOperation = originalOperation;\n            // console.timeEnd(\"VI\");\n        }\n    }\n}\n","import { socket } from \"@/game/api/socket\";\nimport { ServerShape } from \"@/game/comm/types/shapes\";\nimport { EventBus } from \"@/game/event-bus\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { Shape } from \"@/game/shapes/shape\";\nimport { createShapeFromDict } from \"@/game/shapes/utils\";\nimport { gameStore } from \"@/game/store\";\nimport { g2lx, g2ly } from \"@/game/units\";\n\nexport class Layer {\n    name: string;\n    width: number;\n    height: number;\n    canvas: HTMLCanvasElement;\n    ctx: CanvasRenderingContext2D;\n\n    selectable: boolean = false;\n    playerEditable: boolean = false;\n    isVisionLayer: boolean = false;\n\n    // When set to false, the layer will be redrawn on the next tick\n    valid: boolean = false;\n    // The collection of shapes that this layer contains.\n    // These are ordered on a depth basis.\n    shapes: Shape[] = [];\n\n    // Collection of shapes that are currently selected\n    selection: Shape[] = [];\n\n    // Extra selection highlighting settings\n    selectionColor = \"#CC0000\";\n    selectionWidth = 2;\n\n    constructor(canvas: HTMLCanvasElement, name: string) {\n        this.canvas = canvas;\n        this.name = name;\n        this.width = canvas.width;\n        this.height = canvas.height;\n        this.ctx = canvas.getContext(\"2d\")!;\n    }\n\n    invalidate(skipLightUpdate: boolean): void {\n        this.valid = false;\n        if (!skipLightUpdate) {\n            layerManager.invalidateLight();\n        }\n    }\n\n    addShape(shape: Shape, sync: boolean, temporary?: boolean): void {\n        if (temporary === undefined) temporary = false;\n        shape.layer = this.name;\n        this.shapes.push(shape);\n        layerManager.UUIDMap.set(shape.uuid, shape);\n        shape.checkVisionSources();\n        shape.setMovementBlock(shape.movementObstruction);\n        if (shape.ownedBy(gameStore.username) && shape.isToken) gameStore.ownedtokens.push(shape.uuid);\n        if (shape.annotation.length) gameStore.annotations.push(shape.uuid);\n        if (sync) socket.emit(\"Shape.Add\", { shape: shape.asDict(), temporary });\n        this.invalidate(!sync);\n    }\n\n    setShapes(shapes: ServerShape[]): void {\n        for (const serverShape of shapes) {\n            const shape = createShapeFromDict(serverShape);\n            if (shape === undefined) {\n                console.log(`Shape with unknown type ${serverShape.type_} could not be added`);\n                return;\n            }\n            this.addShape(shape, false, false);\n        }\n        this.clearSelection(); // TODO: Fix keeping selection on those items that are not moved.\n        this.invalidate(false);\n    }\n\n    removeShape(shape: Shape, sync: boolean, temporary?: boolean) {\n        if (temporary === undefined) temporary = false;\n        this.shapes.splice(this.shapes.indexOf(shape), 1);\n\n        if (sync) socket.emit(\"Shape.Remove\", { shape, temporary });\n        const lsI = gameStore.visionSources.findIndex(ls => ls.shape === shape.uuid);\n        const lbI = gameStore.visionBlockers.findIndex(ls => ls === shape.uuid);\n\n        const mbI = gameStore.movementblockers.findIndex(ls => ls === shape.uuid);\n        const anI = gameStore.annotations.findIndex(ls => ls === shape.uuid);\n        if (lsI >= 0) gameStore.visionSources.splice(lsI, 1);\n        if (lbI >= 0) gameStore.visionBlockers.splice(lbI, 1);\n        if (mbI >= 0) gameStore.movementblockers.splice(mbI, 1);\n        if (anI >= 0) gameStore.annotations.splice(anI, 1);\n\n        const annotationIndex = gameStore.annotations.indexOf(shape.uuid);\n        if (annotationIndex >= 0) gameStore.annotations.splice(annotationIndex, 1);\n\n        const ownedIndex = gameStore.ownedtokens.indexOf(shape.uuid);\n        if (ownedIndex >= 0) gameStore.ownedtokens.splice(ownedIndex, 1);\n\n        layerManager.UUIDMap.delete(shape.uuid);\n\n        const index = this.selection.indexOf(shape);\n        if (index >= 0) this.selection.splice(index, 1);\n        if (lbI >= 0) gameStore.recalculateBV();\n        this.invalidate(!sync);\n    }\n\n    clear(): void {\n        this.ctx.clearRect(0, 0, this.width, this.height);\n    }\n\n    clearSelection(): void {\n        this.selection = [];\n        EventBus.$emit(\"SelectionInfo.Shape.Set\", null);\n    }\n\n    draw(doClear?: boolean): void {\n        if (!this.valid) {\n            const ctx = this.ctx;\n            const ogOP = ctx.globalCompositeOperation;\n            doClear = doClear === undefined ? true : doClear;\n\n            if (doClear) this.clear();\n\n            const state = this;\n\n            // We iteratre twice over all shapes\n            // First to draw the auras and a second time to draw the shapes themselves\n            // Otherwise auras from one shape could be overlapping another shape itself.\n\n            this.shapes.forEach(shape => {\n                if (shape.options.has(\"skipDraw\") && shape.options.get(\"skipDraw\")) return;\n                if (layerManager.getLayer() === undefined) return;\n                if (!shape.visibleInCanvas(state.canvas)) return;\n                if (state.name === \"fow\" && shape.visionObstruction && layerManager.getLayer()!.name !== state.name)\n                    return;\n                shape.drawAuras(ctx);\n            });\n            this.shapes.forEach(shape => {\n                if (shape.options.has(\"skipDraw\") && shape.options.get(\"skipDraw\")) return;\n                if (layerManager.getLayer() === undefined) return;\n                if (!shape.visibleInCanvas(state.canvas)) return;\n                if (state.name === \"fow\" && shape.visionObstruction && layerManager.getLayer()!.name !== state.name)\n                    return;\n                shape.draw(ctx);\n            });\n\n            if (this.selection != null) {\n                ctx.fillStyle = this.selectionColor;\n                ctx.strokeStyle = this.selectionColor;\n                ctx.lineWidth = this.selectionWidth;\n                const z = gameStore.zoomFactor;\n                this.selection.forEach(sel => {\n                    ctx.globalCompositeOperation = sel.globalCompositeOperation;\n                    const bb = sel.getBoundingBox();\n                    // TODO: REFACTOR THIS TO Shape.drawSelection(ctx);\n                    ctx.strokeRect(g2lx(bb.topLeft.x), g2ly(bb.topLeft.y), bb.w * z, bb.h * z);\n\n                    const sw = Math.min(6, bb.w / 2);\n\n                    // topright\n                    ctx.fillRect(g2lx(bb.topRight.x - sw / 2), g2ly(bb.topLeft.y - sw / 2), sw * z, sw * z);\n                    // topleft\n                    ctx.fillRect(g2lx(bb.topLeft.x - sw / 2), g2ly(bb.topLeft.y - sw / 2), sw * z, sw * z);\n                    // botright\n                    ctx.fillRect(g2lx(bb.topRight.x - sw / 2), g2ly(bb.botLeft.y - sw / 2), sw * z, sw * z);\n                    // botleft\n                    ctx.fillRect(g2lx(bb.topLeft.x - sw / 2), g2ly(bb.botLeft.y - sw / 2), sw * z, sw * z);\n                });\n            }\n            ctx.globalCompositeOperation = ogOP;\n            this.valid = true;\n        }\n    }\n\n    moveShapeOrder(shape: Shape, destinationIndex: number, sync: boolean): void {\n        const oldIdx = this.shapes.indexOf(shape);\n        if (oldIdx === destinationIndex) return;\n        this.shapes.splice(oldIdx, 1);\n        this.shapes.splice(destinationIndex, 0, shape);\n        if (sync) socket.emit(\"Shape.Order.Set\", { shape: shape.asDict(), index: destinationIndex });\n        this.invalidate(true);\n    }\n\n    onShapeMove(shape: Shape): void {\n        shape.checkVisionSources();\n        if (shape.visionObstruction) gameStore.recalculateBV();\n        this.invalidate(false);\n    }\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('SelectContext',{ref:\"selectcontext\"})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"74f43d04-vue-loader-template\\\"}!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./select.vue?vue&type=template&id=0ed49b21&\"","import { gameStore } from \"@/game/store\";\nimport { l2g } from \"@/game/units\";\nimport { getMouse } from \"@/game/utils\";\n\nexport function scrollZoom(e: WheelEvent) {\n    if (!e.target || !(<HTMLElement>e.target).tagName || (<HTMLElement>e.target).tagName !== \"CANVAS\") return;\n    let delta: number;\n    delta = Math.sign(e.deltaY) * -1;\n    gameStore.updateZoom({ newZoomValue: gameStore.zoomFactor + 0.1 * delta, zoomLocation: l2g(getMouse(e)) });\n}\n","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./asset_node.vue?vue&type=style&index=0&id=62c91cd3&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./asset_node.vue?vue&type=style&index=0&id=62c91cd3&scoped=true&lang=css&\"","import { GlobalPoint, LocalPoint, Vector } from \"@/game/geom\";\nimport { BoundingRect } from \"@/game/shapes/boundingrect\";\nimport { Shape } from \"@/game/shapes/shape\";\nimport { gameStore } from \"@/game/store\";\nimport { calculateDelta } from \"@/game/ui/tools/utils\";\nimport { g2lx, g2ly, l2g, l2gx, l2gy } from \"@/game/units\";\n\nexport abstract class BaseRect extends Shape {\n    w: number;\n    h: number;\n    constructor(topleft: GlobalPoint, w: number, h: number, fillColour?: string, strokeColour?: string, uuid?: string) {\n        super(topleft, fillColour, strokeColour, uuid);\n        this.w = w;\n        this.h = h;\n    }\n    getBaseDict() {\n        return Object.assign(super.getBaseDict(), {\n            width: this.w,\n            height: this.h,\n        });\n    }\n    getBoundingBox() {\n        return new BoundingRect(this.refPoint, this.w, this.h);\n    }\n\n    get points() {\n        if (this.w === 0 || this.h === 0) return [[this.refPoint.x, this.refPoint.y]];\n        // note to self: topright and botleft are swapped because I'm retarded.\n        const topright = this.refPoint.add(new Vector(0, this.h));\n        const botright = this.refPoint.add(new Vector(this.w, this.h));\n        const botleft = this.refPoint.add(new Vector(this.w, 0));\n        return [\n            [this.refPoint.x, this.refPoint.y],\n            [topright.x, topright.y],\n            [botright.x, botright.y],\n            [botleft.x, botleft.y],\n        ];\n    }\n\n    contains(point: GlobalPoint): boolean {\n        return (\n            this.refPoint.x <= point.x &&\n            this.refPoint.x + this.w >= point.x &&\n            this.refPoint.y <= point.y &&\n            this.refPoint.y + this.h >= point.y\n        );\n    }\n    inCorner(point: GlobalPoint, corner: string) {\n        switch (corner) {\n            case \"ne\":\n                return (\n                    this.refPoint.x + this.w - 3 <= point.x &&\n                    point.x <= this.refPoint.x + this.w + 3 &&\n                    this.refPoint.y - 3 <= point.y &&\n                    point.y <= this.refPoint.y + 3\n                );\n            case \"nw\":\n                return (\n                    this.refPoint.x - 3 <= point.x &&\n                    point.x <= this.refPoint.x + 3 &&\n                    this.refPoint.y - 3 <= point.y &&\n                    point.y <= this.refPoint.y + 3\n                );\n            case \"sw\":\n                return (\n                    this.refPoint.x - 3 <= point.x &&\n                    point.x <= this.refPoint.x + 3 &&\n                    this.refPoint.y + this.h - 3 <= point.y &&\n                    point.y <= this.refPoint.y + this.h + 3\n                );\n            case \"se\":\n                return (\n                    this.refPoint.x + this.w - 3 <= point.x &&\n                    point.x <= this.refPoint.x + this.w + 3 &&\n                    this.refPoint.y + this.h - 3 <= point.y &&\n                    point.y <= this.refPoint.y + this.h + 3\n                );\n            default:\n                return false;\n        }\n    }\n    getCorner(point: GlobalPoint): string | undefined {\n        if (this.inCorner(point, \"ne\")) return \"ne\";\n        else if (this.inCorner(point, \"nw\")) return \"nw\";\n        else if (this.inCorner(point, \"se\")) return \"se\";\n        else if (this.inCorner(point, \"sw\")) return \"sw\";\n    }\n    center(): GlobalPoint;\n    center(centerPoint: GlobalPoint): void;\n    center(centerPoint?: GlobalPoint): GlobalPoint | void {\n        if (centerPoint === undefined) return this.refPoint.add(new Vector(this.w / 2, this.h / 2));\n        this.refPoint.x = centerPoint.x - this.w / 2;\n        this.refPoint.y = centerPoint.y - this.h / 2;\n    }\n\n    visibleInCanvas(canvas: HTMLCanvasElement): boolean {\n        if (super.visibleInCanvas(canvas)) return true;\n        const coreVisible = !(\n            g2lx(this.refPoint.x) > canvas.width ||\n            g2ly(this.refPoint.y) > canvas.height ||\n            g2lx(this.refPoint.x + this.w) < 0 ||\n            g2ly(this.refPoint.y + this.h) < 0\n        );\n        if (coreVisible) return true;\n        return false;\n    }\n    snapToGrid() {\n        const gs = gameStore.gridSize;\n        const center = this.center();\n        const mx = center.x;\n        const my = center.y;\n\n        let targetX;\n        let targetY;\n\n        if ((this.w / gs) % 2 === 0) {\n            targetX = Math.round(mx / gs) * gs - this.w / 2;\n        } else {\n            targetX = (Math.round((mx + gs / 2) / gs) - 1 / 2) * gs - this.w / 2;\n        }\n        if ((this.h / gs) % 2 === 0) {\n            targetY = Math.round(my / gs) * gs - this.h / 2;\n        } else {\n            targetY = (Math.round((my + gs / 2) / gs) - 1 / 2) * gs - this.h / 2;\n        }\n\n        const delta = calculateDelta(new Vector(targetX - this.refPoint.x, targetY - this.refPoint.y), this);\n        this.refPoint = this.refPoint.add(delta);\n\n        this.invalidate(false);\n    }\n    resizeToGrid() {\n        const gs = gameStore.gridSize;\n        this.refPoint.x = Math.round(this.refPoint.x / gs) * gs;\n        this.refPoint.y = Math.round(this.refPoint.y / gs) * gs;\n        this.w = Math.max(Math.round(this.w / gs) * gs, gs);\n        this.h = Math.max(Math.round(this.h / gs) * gs, gs);\n        this.invalidate(false);\n    }\n    resize(resizedir: string, point: LocalPoint) {\n        const z = gameStore.zoomFactor;\n        if (resizedir === \"nw\") {\n            this.w = g2lx(this.refPoint.x) + this.w * z - point.x;\n            this.h = g2ly(this.refPoint.y) + this.h * z - point.y;\n            this.refPoint = l2g(point);\n        } else if (resizedir === \"ne\") {\n            this.w = point.x - g2lx(this.refPoint.x);\n            this.h = g2ly(this.refPoint.y) + this.h * z - point.y;\n            this.refPoint.y = l2gy(point.y);\n        } else if (resizedir === \"se\") {\n            this.w = point.x - g2lx(this.refPoint.x);\n            this.h = point.y - g2ly(this.refPoint.y);\n        } else if (resizedir === \"sw\") {\n            this.w = g2lx(this.refPoint.x) + this.w * z - point.x;\n            this.h = point.y - g2ly(this.refPoint.y);\n            this.refPoint.x = l2gx(point.x);\n        }\n        this.w /= z;\n        this.h /= z;\n\n        if (this.w < 0) {\n            this.refPoint.x += this.w;\n            this.w = Math.abs(this.w);\n        }\n        if (this.h < 0) {\n            this.refPoint.y += this.h;\n            this.h = Math.abs(this.h);\n        }\n    }\n}\n","import { render, staticRenderFns } from \"./select.vue?vue&type=template&id=0ed49b21&\"\nimport script from \"./select.vue?vue&type=script&lang=ts&\"\nexport * from \"./select.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"select.vue\"\nexport default component.exports","import { render, staticRenderFns } from \"./main.vue?vue&type=template&id=61eb1455&scoped=true&\"\nimport script from \"./main.vue?vue&type=script&lang=ts&\"\nexport * from \"./main.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./main.vue?vue&type=style&index=0&id=61eb1455&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"61eb1455\",\n  null\n  \n)\n\ncomponent.options.__file = \"main.vue\"\nexport default component.exports","\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\n\nimport ContextMenu from \"@/core/components/contextmenu.vue\";\n\nimport { socket } from \"@/game/api/socket\";\nimport { EventBus } from \"@/game/event-bus\";\nimport { gameStore } from \"@/game/store\";\nimport { l2gx, l2gy } from \"@/game/units\";\n\n@Component({\n    components: {\n        ContextMenu,\n    },\n})\nexport default class SelectContext extends Vue {\n    visible = false;\n    x = 0;\n    y = 0;\n\n    get IS_DM(): boolean {\n        return gameStore.IS_DM;\n    }\n\n    open(event: MouseEvent) {\n        this.visible = true;\n        this.x = event.pageX;\n        this.y = event.pageY;\n        this.$nextTick(() => this.$children[0].$el.focus());\n    }\n    close() {\n        this.visible = false;\n    }\n    bringPlayers() {\n        if (!gameStore.IS_DM) return;\n        socket.emit(\"Players.Bring\", { x: l2gx(this.x), y: l2gy(this.y) });\n        this.close();\n    }\n    createToken() {\n        (<any>this.$parent.$parent.$refs.createtokendialog).open(this.x, this.y);\n        this.close();\n    }\n    showInitiative() {\n        EventBus.$emit(\"Initiative.Show\");\n        this.close();\n    }\n}\n","import Axios from \"axios\";\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\nimport { Route } from \"vue-router\";\n\nimport { coreStore } from \"@/core/store\";\n\n@Component({ template: \"\" })\nexport default class Logout extends Vue {\n    beforeRouteEnter(to: Route, from: Route, next: ({}) => {}) {\n        Axios.post(\"/api/logout\").then(() => {\n            coreStore.setAuthenticated(false);\n            coreStore.setUsername(\"\");\n            next({ path: \"/auth/login\" });\n        });\n    }\n}\n","import { getModule, Module, Mutation, VuexModule } from \"vuex-module-decorators\";\n\nimport { rootStore } from \"@/store\";\n\nexport interface CoreState {\n    authenticated: boolean;\n    initialized: boolean;\n}\n\n@Module({ dynamic: true, store: rootStore, name: \"core\" })\nclass CoreStore extends VuexModule {\n    authenticated = false;\n    initialized = false;\n    username = \"\";\n\n    @Mutation\n    setAuthenticated(auth: boolean) {\n        this.authenticated = auth;\n    }\n\n    @Mutation\n    setInitialized(init: boolean) {\n        this.initialized = init;\n    }\n\n    @Mutation\n    setUsername(username: string) {\n        this.username = username;\n    }\n}\n\nexport const coreStore = getModule(CoreStore);\n","import Vue from \"vue\";\n\nimport App from \"@/App.vue\";\nimport { router } from \"@/router\";\nimport { rootStore } from \"@/store\";\n\nVue.config.productionTip = false;\nVue.config.devtools = true;\nVue.config.performance = true;\n\nexport const app = new Vue({\n    router,\n    store: rootStore,\n    render: h => h(App),\n}).$mount(\"#app\");\n\n(<any>window).app = app;\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\n\n@Component({\n    props: [\"visible\", \"left\", \"top\"],\n})\nexport default class ContextMenu extends Vue {}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"menuContainer\"}},[_c('div',{ref:\"rm\",style:({\n              left: _vm.visible.settings ? '200px' : '0',\n              top: _vm.visible.locations ? '100px' : '0'\n          }),attrs:{\"id\":\"radialmenu\"}},[_c('div',{staticClass:\"rm-wrapper\"},[_c('div',{staticClass:\"rm-toggler\"},[_c('ul',{staticClass:\"rm-list\",class:{ 'rm-list-dm': _vm.IS_DM }},[(_vm.IS_DM)?_c('li',{staticClass:\"rm-item\",attrs:{\"id\":\"rm-locations\"},on:{\"click\":function($event){_vm.visible.locations = !_vm.visible.locations}}},[_vm._m(0)]):_vm._e(),_c('li',{staticClass:\"rm-item\",attrs:{\"id\":\"rm-settings\"},on:{\"click\":function($event){_vm.visible.settings = !_vm.visible.settings}}},[_vm._m(1)])])]),_vm._m(2)])]),_c('transition',{attrs:{\"name\":\"settings\"},on:{\"enter\":function($event){_vm.$refs.rm.style.transition = 'left 500ms'}}},[(_vm.visible.settings)?_c('div',{ref:\"settings\",attrs:{\"id\":\"menu\"},on:{\"click\":_vm.settingsClick}},[_c('div',{staticStyle:{\"width\":\"200px\",\"height\":\"90%\",\"overflow-y\":\"auto\",\"overflow-x\":\"hidden\"}},[(_vm.IS_DM)?[_c('button',{staticClass:\"accordion\"},[_vm._v(\"Assets\")]),_c('div',{staticClass:\"accordion-panel\"},[_c('a',{staticClass:\"actionButton\",attrs:{\"href\":\"/assets\",\"target\":\"blank\",\"title\":\"Open asset manager\"}},[_c('i',{staticClass:\"fas fa-external-link-alt\"})]),_c('div',{staticClass:\"directory\",attrs:{\"id\":\"menu-tokens\"}},[_c('asset-node',{attrs:{\"asset\":_vm.assets}}),(!_vm.assets)?_c('div',[_vm._v(\"No assets\")]):_vm._e()],1)]),_c('button',{staticClass:\"accordion\"},[_vm._v(\"Notes\")]),_c('div',{staticClass:\"accordion-panel\"},[_c('div',{staticClass:\"accordion-subpanel\",attrs:{\"id\":\"menu-notes\"}},[_c('a',{staticClass:\"actionButton\",on:{\"click\":_vm.createNote}},[_c('i',{staticClass:\"far fa-plus-square\"})]),_vm._l((_vm.notes),function(note){return _c('div',{key:note.uuid,staticStyle:{\"cursor\":\"pointer\"},on:{\"click\":function($event){_vm.openNote(note)}}},[_vm._v(_vm._s(note.title || \"[?]\"))])}),(!_vm.notes.length)?_c('div',[_vm._v(\"No notes\")]):_vm._e()],2)]),_c('button',{staticClass:\"accordion\"},[_vm._v(\"DM Options\")]),_c('div',{staticClass:\"accordion-panel\"},[_c('div',{staticClass:\"accordion-subpanel\"},[_c('label',{attrs:{\"for\":\"useGridInput\"}},[_vm._v(\"Use grid:\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.useGrid),expression:\"useGrid\"}],attrs:{\"id\":\"useGridInput\",\"type\":\"checkbox\",\"checked\":\"checked\"},domProps:{\"checked\":Array.isArray(_vm.useGrid)?_vm._i(_vm.useGrid,null)>-1:(_vm.useGrid)},on:{\"change\":function($event){var $$a=_vm.useGrid,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.useGrid=$$a.concat([$$v]))}else{$$i>-1&&(_vm.useGrid=$$a.slice(0,$$i).concat($$a.slice($$i+1)))}}else{_vm.useGrid=$$c}}}}),_c('label',{attrs:{\"for\":\"useFOWInput\"}},[_vm._v(\"Fill entire canvas with FOW:\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.fullFOW),expression:\"fullFOW\"}],attrs:{\"id\":\"useFOWInput\",\"type\":\"checkbox\"},domProps:{\"checked\":Array.isArray(_vm.fullFOW)?_vm._i(_vm.fullFOW,null)>-1:(_vm.fullFOW)},on:{\"change\":function($event){var $$a=_vm.fullFOW,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.fullFOW=$$a.concat([$$v]))}else{$$i>-1&&(_vm.fullFOW=$$a.slice(0,$$i).concat($$a.slice($$i+1)))}}else{_vm.fullFOW=$$c}}}}),_c('label',{attrs:{\"for\":\"fowOpacity\"}},[_vm._v(\"FOW opacity:\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.fowOpacity),expression:\"fowOpacity\",modifiers:{\"number\":true}}],attrs:{\"id\":\"fowOpacity\",\"type\":\"number\",\"min\":\"0\",\"max\":\"1\",\"step\":\"0.1\"},domProps:{\"value\":(_vm.fowOpacity)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.fowOpacity=_vm._n($event.target.value)},\"blur\":function($event){_vm.$forceUpdate()}}}),_c('label',{attrs:{\"for\":\"fowLOS\"}},[_vm._v(\"Only show lights in LoS:\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.fowLOS),expression:\"fowLOS\"}],attrs:{\"id\":\"fowLOS\",\"type\":\"checkbox\"},domProps:{\"checked\":Array.isArray(_vm.fowLOS)?_vm._i(_vm.fowLOS,null)>-1:(_vm.fowLOS)},on:{\"change\":function($event){var $$a=_vm.fowLOS,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.fowLOS=$$a.concat([$$v]))}else{$$i>-1&&(_vm.fowLOS=$$a.slice(0,$$i).concat($$a.slice($$i+1)))}}else{_vm.fowLOS=$$c}}}}),_c('label',{attrs:{\"for\":\"unitSizeInput\"}},[_vm._v(\"Unit Size (in ft.):\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.unitSize),expression:\"unitSize\",modifiers:{\"number\":true}}],attrs:{\"id\":\"unitSizeInput\",\"type\":\"number\"},domProps:{\"value\":(_vm.unitSize)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.unitSize=_vm._n($event.target.value)},\"blur\":function($event){_vm.$forceUpdate()}}}),_c('label',{attrs:{\"for\":\"gridSizeInput\"}},[_vm._v(\"Grid Size (in pixels):\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.gridSize),expression:\"gridSize\",modifiers:{\"number\":true}}],attrs:{\"id\":\"gridSizeInput\",\"type\":\"number\",\"min\":\"0\"},domProps:{\"value\":(_vm.gridSize)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.gridSize=_vm._n($event.target.value)},\"blur\":function($event){_vm.$forceUpdate()}}}),_c('label',{attrs:{\"for\":\"invitation\"}},[_vm._v(\"Invitation Code:\")]),_c('input',{attrs:{\"id\":\"invitation\",\"type\":\"text\",\"readonly\":\"readonly\"},domProps:{\"value\":_vm.invitationCode}})])])]:_vm._e(),_c('button',{staticClass:\"accordion\"},[_vm._v(\"Client Options\")]),_c('div',{staticClass:\"accordion-panel\"},[_c('div',{staticClass:\"accordion-subpanel\"},[_c('label',{attrs:{\"for\":\"gridColour\"}},[_vm._v(\"Grid Colour:\")]),_c('color-picker',{attrs:{\"id\":\"gridColour\",\"color\":_vm.gridColour},on:{\"update:color\":function($event){_vm.gridColour=$event}}}),_c('label',{attrs:{\"for\":\"fowColour\"}},[_vm._v(\"FOW Colour:\")]),_c('color-picker',{attrs:{\"id\":\"fowColour\",\"color\":_vm.fowColour},on:{\"update:color\":function($event){_vm.fowColour=$event}}}),_c('label',{attrs:{\"for\":\"rulerColour\"}},[_vm._v(\"Ruler Colour:\")]),_c('color-picker',{attrs:{\"id\":\"rulerColour\",\"color\":_vm.rulerColour},on:{\"update:color\":function($event){_vm.rulerColour=$event}}}),_c('label',{attrs:{\"for\":\"visionMode\"}},[_vm._v(\"Vision Mode:\")]),_c('select',{attrs:{\"id\":\"visionMode\"},on:{\"change\":_vm.changeVisionMode}},[_c('option',[_vm._v(\"BVH\")]),_c('option',[_vm._v(\"Triangle\")])])],1)])],2),_c('router-link',{staticClass:\"accordion\",staticStyle:{\"text-decoration\":\"none\",\"display\":\"inline-block\",\"position\":\"absolute\",\"bottom\":\"0\"},attrs:{\"to\":\"/dashboard\"}},[_vm._v(\"Exit\")])],1):_vm._e()]),_c('transition',{attrs:{\"name\":\"locations\"},on:{\"enter\":function($event){_vm.$refs.rm.style.transition = 'top 500ms'}}},[(_vm.IS_DM && _vm.visible.locations)?_c('div',{attrs:{\"id\":\"locations-menu\"}},[_c('div',[_vm._l((_vm.locations),function(location){return _c('div',{key:location,on:{\"click\":function($event){_vm.changeLocation(location)}}},[_vm._v(_vm._s(location))])}),_c('div',{on:{\"click\":_vm.createLocation}},[_c('i',{staticClass:\"fas fa-plus\"})])],2)]):_vm._e()]),_c('img',{attrs:{\"id\":\"dragImage\"}})],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('a',{attrs:{\"href\":\"#\"}},[_c('i',{staticClass:\"far fa-compass\"})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('a',{attrs:{\"href\":\"#\"}},[_c('i',{staticClass:\"fas fa-cog\"})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',{staticClass:\"rm-topper\"},[_c('i',{staticClass:\"icon-share-alt\"})])}]\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"74f43d04-vue-loader-template\\\"}!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./menu.vue?vue&type=template&id=5ecfceea&scoped=true&\"","import Axios, { AxiosError, AxiosResponse } from \"axios\";\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\nimport { Route } from \"vue-router\";\n\n@Component({ template: \"\" })\nexport default class Initiative extends Vue {\n    beforeRouteEnter(to: Route, from: Route, next: ({}) => {}) {\n        Axios.post(\"/api/invite\", {\n            code: to.params.code,\n        })\n            .then((response: AxiosResponse) => {\n                next({ path: response.data.sessionUrl });\n            })\n            .catch((error: AxiosError) => {\n                console.error(\"Invitation code could not be redeemed\");\n                next({ path: \"/dashboard\" });\n            });\n    }\n}\n","import { render, staticRenderFns } from \"./prompt.vue?vue&type=template&id=0602c2e6&scoped=true&\"\nimport script from \"./prompt.vue?vue&type=script&lang=ts&\"\nexport * from \"./prompt.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./prompt.vue?vue&type=style&index=0&id=0602c2e6&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0602c2e6\",\n  null\n  \n)\n\ncomponent.options.__file = \"prompt.vue\"\nexport default component.exports","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./draw.vue?vue&type=style&index=0&id=7abc7fe9&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./draw.vue?vue&type=style&index=0&id=7abc7fe9&scoped=true&lang=css&\"","import { GlobalPoint } from \"@/game/geom\";\n\nimport { Edge } from \"./cdt\";\nimport { drawPolygon } from \"./draw\";\nimport { PA_CDT } from \"./pa\";\nimport { Point, Sign, Triangle } from \"./tds\";\nimport { ccw, cw, orientation } from \"./triag\";\n\nexport function computeVisibility(q: GlobalPoint, it = 0, drawt = false): number[][] {\n    // console.time(\"CV\");\n    const Q: Point = [q.x, q.y];\n    const rawOutput: number[][] = [];\n    const triangle = PA_CDT.locate(Q, null).loc;\n    if (triangle === null) {\n        console.error(\"Triangle not found\");\n        return [];\n    }\n    // triangle.fill();\n    rawOutput.push(triangle.vertices[1]!.point!);\n    if (!triangle.isConstrained(0))\n        expandEdge(Q, triangle.vertices[2]!.point!, triangle.vertices[1]!.point!, triangle, 0, rawOutput);\n    rawOutput.push(triangle.vertices[2]!.point!);\n    if (!triangle.isConstrained(1))\n        expandEdge(Q, triangle.vertices[0]!.point!, triangle.vertices[2]!.point!, triangle, 1, rawOutput);\n    rawOutput.push(triangle.vertices[0]!.point!);\n    if (!triangle.isConstrained(2))\n        expandEdge(Q, triangle.vertices[1]!.point!, triangle.vertices[0]!.point!, triangle, 2, rawOutput);\n    // console.timeEnd(\"CV\");\n\n    if (drawt) drawPolygon(rawOutput, \"red\");\n\n    return rawOutput;\n}\n\nfunction expandEdge(\n    q: Point,\n    left: number[],\n    right: number[],\n    fh: Triangle,\n    index: number,\n    rawOutput: number[][],\n): void {\n    // fh.edge(index).draw();\n    const nfh = fh.neighbours[index]!;\n    // nfh.fill(\"rgba(255, 0, 0, 0.25)\");\n    const nIndex = nfh.indexT(fh);\n    const rIndex = ccw(nIndex);\n    const lIndex = cw(nIndex);\n    const nvh = nfh.vertices[nIndex]!;\n    const rvh = nfh.vertices[lIndex]!;\n    const lvh = nfh.vertices[rIndex]!;\n\n    const re: Edge = [nfh, rIndex];\n    const le: Edge = [nfh, lIndex];\n\n    const ro = orientation(q, right, nvh.point!);\n    const lo = orientation(q, left, nvh.point!);\n\n    // const ctx = layerManager.getLayer(\"draw\")!.ctx;\n    // ctx.beginPath();\n    // ctx.strokeStyle = \"red\";\n    // ctx.lineJoin = \"round\";\n    // ctx.moveTo(g2lx(q.x), g2ly(q.y));\n    // ctx.lineTo(g2lx(left[0]), g2ly(left[1]));\n    // ctx.moveTo(g2lx(q.x), g2ly(q.y));\n    // ctx.lineTo(g2lx(nvh[0]), g2ly(nvh[1]));\n    // ctx.strokeStyle = \"blue\";\n    // ctx.moveTo(g2lx(q.x), g2ly(q.y));\n    // ctx.lineTo(g2lx(right[0]), g2ly(right[1]));\n    // ctx.moveTo(g2lx(q.x), g2ly(q.y));\n    // ctx.lineTo(g2lx(nvh[0]), g2ly(nvh[1]));\n    // ctx.closePath();\n    // ctx.stroke();\n\n    // Right edge is seen if the new vertex is ccw of the right ray\n    if (ro === Sign.COUNTERCLOCKWISE) {\n        if (re[0].isConstrained(re[1])) {\n            // See if current right ray is rvh\n            if (right !== rvh.point!) rawOutput.push(raySegIntersection(q, right, nvh.point!, rvh.point!));\n            if (lo === Sign.COUNTERCLOCKWISE) rawOutput.push(raySegIntersection(q, left, nvh.point!, rvh.point!));\n        } else {\n            if (lo === Sign.COUNTERCLOCKWISE) return expandEdge(q, left, right, nfh, rIndex, rawOutput);\n            else expandEdge(q, nvh.point!, right, nfh, rIndex, rawOutput);\n        }\n    }\n\n    if (ro !== Sign.CLOCKWISE && lo !== Sign.COUNTERCLOCKWISE) {\n        rawOutput.push(nvh.point!);\n    }\n\n    if (lo === Sign.CLOCKWISE) {\n        if (le[0].isConstrained(le[1])) {\n            if (ro === Sign.CLOCKWISE) {\n                rawOutput.push(raySegIntersection(q, right, nvh.point!, lvh.point!));\n            }\n            if (left !== lvh.point!) {\n                rawOutput.push(raySegIntersection(q, left, nvh.point!, lvh.point!));\n            }\n            return;\n        } else {\n            if (ro === Sign.CLOCKWISE) {\n                return expandEdge(q, left, right, nfh, lIndex, rawOutput);\n            } else {\n                return expandEdge(q, left, nvh.point!, nfh, lIndex, rawOutput);\n            }\n        }\n    }\n}\n\nfunction raySegIntersection(q: Point, b: Point, s: Point, t: Point) {\n    const denominator = (t[1] - s[1]) * (b[0] - q[0]) - (t[0] - s[0]) * (b[1] - q[1]);\n    const ua = ((t[0] - s[0]) * (q[1] - s[1]) - (t[1] - s[1]) * (q[0] - s[0])) / denominator;\n    // const ub = ((b[0] - q.x) * (q.y - s[1]) - (b[1] - q.y) * (q.x - s[0])) / denominator;\n    const x = q[0] + ua * (b[0] - q[0]);\n    const y = q[1] + ua * (b[1] - q[1]);\n\n    return [x, y];\n}\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./login.vue?vue&type=style&index=0&id=6bbf3b79&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./login.vue?vue&type=style&index=0&id=6bbf3b79&scoped=true&lang=css&\"","import { render, staticRenderFns } from \"./edit_dialog.vue?vue&type=template&id=078b3b76&scoped=true&\"\nimport script from \"./edit_dialog.vue?vue&type=script&lang=ts&\"\nexport * from \"./edit_dialog.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./edit_dialog.vue?vue&type=style&index=0&id=078b3b76&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"078b3b76\",\n  null\n  \n)\n\ncomponent.options.__file = \"edit_dialog.vue\"\nexport default component.exports","export class Settings {\n    static angleSteps = 4;\n    static drawAngleLines = false;\n    static drawFirstLightHit = false;\n    static skipPlayerFOW = false;\n    static skipLightFOW = false;\n\n    static tempFill: string = \"fog\";\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport axios, { AxiosError, AxiosResponse } from \"axios\";\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\n\nimport { coreStore } from \"@/core/store\";\n\n@Component\nexport default class Login extends Vue {\n    username = \"\";\n    password = \"\";\n    error = \"\";\n\n    login() {\n        axios\n            .post(\"/api/login\", {\n                username: this.username,\n                password: this.password,\n            })\n            .then((response: AxiosResponse) => {\n                coreStore.setUsername(this.username);\n                coreStore.setAuthenticated(true);\n                this.$router.push(<string>this.$route.query.redirect || \"/\");\n            })\n            .catch((error: AxiosError) => {\n                if (error.response) this.error = error.response.statusText;\n                else this.error = \"Unknown error occured\";\n            });\n    }\n\n    register() {\n        axios\n            .post(\"/api/register\", {\n                username: this.username,\n                password: this.password,\n            })\n            .then((response: AxiosResponse) => {\n                coreStore.setUsername(this.username);\n                coreStore.setAuthenticated(true);\n                this.$router.push(<string>this.$route.query.redirect || \"/\");\n            })\n            .catch((error: AxiosError) => {\n                if (error.response) this.error = error.response.statusText;\n                else this.error = \"Unknown error occured\";\n            });\n    }\n\n    focusin(event: { target?: { nextElementSibling?: HTMLElement } }) {\n        if (event.target && event.target.nextElementSibling) {\n            const span = event.target.nextElementSibling;\n            span.style.opacity = \"0\";\n        }\n    }\n\n    focusout(event: { target?: { nextElementSibling?: HTMLElement } }) {\n        if (event.target && event.target.nextElementSibling) {\n            const span = event.target.nextElementSibling;\n            span.style.opacity = \"1\";\n        }\n    }\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c(\"div\")}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"74f43d04-vue-loader-template\\\"}!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tool.vue?vue&type=template&id=1e034b42&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('transition',{attrs:{\"name\":\"modal\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.visible),expression:\"visible\"}],staticClass:\"mask\",class:{'modal-mask': _vm.mask, 'dialog-mask': !_vm.mask},on:{\"click\":_vm.close,\"dragover\":function($event){$event.preventDefault();return _vm.dragOver($event)}}},[_c('div',{ref:\"container\",staticClass:\"modal-container\",on:{\"click\":function($event){$event.stopPropagation();}}},[_vm._t(\"header\",null,{dragStart:_vm.dragStart,dragEnd:_vm.dragEnd}),_vm._t(\"default\")],2)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"74f43d04-vue-loader-template\\\"}!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./modal.vue?vue&type=template&id=12ed61ba&scoped=true&\"","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--12-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./game.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--12-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./game.vue?vue&type=script&lang=ts&\"","import Component from \"vue-class-component\";\n\nimport Tool from \"@/game/ui/tools/tool.vue\";\n\nimport { socket } from \"@/game/api/socket\";\nimport { GlobalPoint } from \"@/game/geom\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { Line } from \"@/game/shapes/line\";\nimport { Text } from \"@/game/shapes/text\";\nimport { gameStore } from \"@/game/store\";\nimport { l2g } from \"@/game/units\";\nimport { getMouse } from \"@/game/utils\";\n\n@Component\nexport class RulerTool extends Tool {\n    name = \"Ruler\";\n    active = false;\n    startPoint: GlobalPoint | null = null;\n    ruler: Line | null = null;\n    text: Text | null = null;\n    onMouseDown(event: MouseEvent) {\n        const layer = layerManager.getLayer(\"draw\");\n        if (layer === undefined) {\n            console.log(\"No draw layer!\");\n            return;\n        }\n        this.active = true;\n        this.startPoint = l2g(getMouse(event));\n        this.ruler = new Line(this.startPoint, this.startPoint, 3, gameStore.rulerColour);\n        this.text = new Text(this.startPoint.clone(), \"\", \"bold 20px serif\");\n        this.ruler.owners.push(gameStore.username);\n        this.text.owners.push(gameStore.username);\n        layer.addShape(this.ruler, true, true);\n        layer.addShape(this.text, true, true);\n    }\n    onMouseMove(event: MouseEvent) {\n        if (!this.active || this.ruler === null || this.startPoint === null || this.text === null) return;\n\n        const layer = layerManager.getLayer(\"draw\");\n        if (layer === undefined) {\n            console.log(\"No draw layer!\");\n            return;\n        }\n        const endPoint = l2g(getMouse(event));\n\n        this.ruler.endPoint = endPoint;\n        socket.emit(\"Shape.Update\", { shape: this.ruler!.asDict(), redraw: true, temporary: true });\n\n        const diffsign = Math.sign(endPoint.x - this.startPoint.x) * Math.sign(endPoint.y - this.startPoint.y);\n        const xdiff = Math.abs(endPoint.x - this.startPoint.x);\n        const ydiff = Math.abs(endPoint.y - this.startPoint.y);\n        const label =\n            Math.round((Math.sqrt(xdiff ** 2 + ydiff ** 2) * gameStore.unitSize) / gameStore.gridSize) + \" ft\";\n        const angle = Math.atan2(diffsign * ydiff, xdiff);\n        const xmid = Math.min(this.startPoint.x, endPoint.x) + xdiff / 2;\n        const ymid = Math.min(this.startPoint.y, endPoint.y) + ydiff / 2;\n        this.text.refPoint.x = xmid;\n        this.text.refPoint.y = ymid;\n        this.text.text = label;\n        this.text.angle = angle;\n        socket.emit(\"Shape.Update\", { shape: this.text.asDict(), redraw: true, temporary: true });\n        layer.invalidate(true);\n    }\n    onMouseUp(event: MouseEvent) {\n        if (!this.active || this.ruler === null || this.startPoint === null || this.text === null) return;\n\n        const layer = layerManager.getLayer(\"draw\");\n        if (layer === undefined) {\n            console.log(\"No active layer!\");\n            return;\n        }\n        this.active = false;\n\n        layer.removeShape(this.ruler, true, true);\n        layer.removeShape(this.text, true, true);\n        layer.invalidate(true);\n        this.ruler = this.startPoint = this.text = null;\n    }\n}\n","import { render, staticRenderFns } from \"./modal.vue?vue&type=template&id=12ed61ba&scoped=true&\"\nimport script from \"./modal.vue?vue&type=script&lang=ts&\"\nexport * from \"./modal.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./modal.vue?vue&type=style&index=0&id=12ed61ba&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"12ed61ba\",\n  null\n  \n)\n\ncomponent.options.__file = \"modal.vue\"\nexport default component.exports","import { layerManager } from \"@/game/layers/manager\";\nimport { gameStore } from \"@/game/store\";\n\nimport { CDT } from \"./cdt\";\n\nexport let PA_CDT = new CDT();\n\nexport function triangulate(partial: boolean = false) {\n    const cdt = new CDT();\n    for (const sh of gameStore.visionBlockers) {\n        const shape = layerManager.UUIDMap.get(sh)!;\n        if (partial && !shape.visibleInCanvas(layerManager.getLayer()!.canvas)) continue;\n        for (let i = 0; i < shape.points.length; i++) {\n            cdt.insertConstraint(shape.points[i], shape.points[(i + 1) % shape.points.length]);\n        }\n    }\n    PA_CDT = cdt;\n    (<any>window).CDT = PA_CDT;\n}\n","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./createtoken_modal.vue?vue&type=style&index=0&id=66ccc134&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./createtoken_modal.vue?vue&type=style&index=0&id=66ccc134&scoped=true&lang=css&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./main.vue?vue&type=style&index=0&id=61eb1455&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./main.vue?vue&type=style&index=0&id=61eb1455&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('form',{on:{\"focusin\":_vm.focusin,\"focusout\":_vm.focusout,\"submit\":function($event){$event.preventDefault();return _vm.login($event)}}},[_c('fieldset',[_c('legend',{staticClass:\"legend\"},[_vm._v(\"PlanarAlly\")]),_c('div',{staticClass:\"input\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.username),expression:\"username\"}],attrs:{\"type\":\"text\",\"name\":\"username\",\"placeholder\":\"Username\",\"required\":\"\"},domProps:{\"value\":(_vm.username)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.username=$event.target.value}}}),_vm._m(0)]),_c('div',{staticClass:\"input\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.password),expression:\"password\"}],attrs:{\"type\":\"password\",\"name\":\"password\",\"placeholder\":\"Password\",\"required\":\"\"},domProps:{\"value\":(_vm.password)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.password=$event.target.value}}}),_vm._m(1)]),_c('div',{staticStyle:{\"display\":\"flex\"}},[_c('button',{staticStyle:{\"visibility\":\"hidden\",\"display\":\"none\"},attrs:{\"type\":\"submit\",\"name\":\"login\"}}),_c('button',{staticClass:\"submit\",attrs:{\"type\":\"button\",\"name\":\"register\",\"title\":\"Register\"},on:{\"click\":_vm.register}},[_c('i',{staticClass:\"fas fa-plus\"})]),_vm._m(2)])]),(_vm.error)?_c('div',{staticClass:\"feedback\"},[_c('p',{staticClass:\"error\"},[_c('strong',[_vm._v(\"Error:\")]),_vm._v(\"\\n      \"+_vm._s(_vm.error)+\"\\n    \")])]):_vm._e()])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',[_c('i',{staticClass:\"fas fa-user-circle\"})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',[_c('i',{staticClass:\"fas fa-lock\"})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('button',{staticClass:\"submit\",attrs:{\"type\":\"submit\",\"name\":\"login\",\"title\":\"Login\"}},[_c('i',{staticClass:\"fas fa-arrow-right\"})])}]\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"74f43d04-vue-loader-template\\\"}!../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./login.vue?vue&type=template&id=6bbf3b79&scoped=true&\"","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\n\nimport ColorPicker from \"@/core/components/colorpicker.vue\";\nimport Modal from \"@/core/components/modals/modal.vue\";\n\nimport { uuidv4 } from \"@/core/utils\";\nimport { socket } from \"@/game/api/socket\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { Shape } from \"@/game/shapes/shape\";\nimport { gameStore } from \"@/game/store\";\nimport { Prop } from \"vue-property-decorator\";\n\n@Component({\n    components: {\n        Modal,\n        \"color-picker\": ColorPicker,\n    },\n})\nexport default class EditDialog extends Vue {\n    @Prop() shape!: Shape;\n\n    visible = false;\n    updated() {\n        this.addEmpty();\n    }\n    addEmpty() {\n        if (this.shape.owners[this.shape.owners.length - 1] !== \"\") this.shape.owners.push(\"\");\n        if (\n            !this.shape.trackers.length ||\n            this.shape.trackers[this.shape.trackers.length - 1].name !== \"\" ||\n            this.shape.trackers[this.shape.trackers.length - 1].value !== 0\n        )\n            this.shape.trackers.push({ uuid: uuidv4(), name: \"\", value: 0, maxvalue: 0, visible: false });\n        if (\n            !this.shape.auras.length ||\n            this.shape.auras[this.shape.auras.length - 1].name !== \"\" ||\n            this.shape.auras[this.shape.auras.length - 1].value !== 0\n        )\n            this.shape.auras.push({\n                uuid: uuidv4(),\n                name: \"\",\n                value: 0,\n                dim: 0,\n                visionSource: false,\n                colour: \"rgba(0,0,0,0)\",\n                visible: false,\n            });\n    }\n    updateShape(redraw: boolean) {\n        socket.emit(\"Shape.Update\", { shape: this.shape.asDict(), redraw, temporary: false });\n        if (redraw) layerManager.invalidate();\n        this.addEmpty();\n    }\n    setToken(event: { target: HTMLInputElement }) {\n        this.shape.setIsToken(event.target.checked);\n        this.updateShape(true);\n    }\n    setVisionBlocker(event: { target: HTMLInputElement }) {\n        this.shape.checkVisionSources();\n        this.updateShape(true);\n    }\n    setMovementBlocker(event: { target: HTMLInputElement }) {\n        this.shape.setMovementBlock(event.target.checked);\n        this.updateShape(false);\n    }\n    updateAnnotation(event: { target: HTMLInputElement }) {\n        const hadAnnotation = this.shape.annotation !== \"\";\n        this.shape.annotation = event.target.value;\n        if (this.shape.annotation !== \"\" && !hadAnnotation) {\n            gameStore.annotations.push(this.shape.uuid);\n            if (layerManager.hasLayer(\"draw\")) layerManager.getLayer(\"draw\")!.invalidate(true);\n        } else if (this.shape.annotation === \"\" && hadAnnotation) {\n            gameStore.annotations.splice(gameStore.annotations.findIndex(an => an === this.shape.uuid));\n            if (layerManager.hasLayer(\"draw\")) layerManager.getLayer(\"draw\")!.invalidate(true);\n        }\n        this.updateShape(false);\n    }\n    updateOwner(event: { target: HTMLInputElement }, oldValue: string) {\n        const ownerIndex = this.shape.owners.findIndex(o => o === oldValue);\n        if (ownerIndex >= 0) this.shape.owners.splice(ownerIndex, 1, event.target.value);\n        else this.shape.owners.push(event.target.value);\n        this.updateShape(gameStore.fowLOS);\n    }\n    removeOwner(value: string) {\n        const ownerIndex = this.shape.owners.findIndex(o => o === value);\n        this.shape.owners.splice(ownerIndex, 1);\n        this.updateShape(gameStore.fowLOS);\n    }\n    removeTracker(uuid: string) {\n        this.shape.trackers = this.shape.trackers.filter(tr => tr.uuid !== uuid);\n        this.updateShape(false);\n    }\n    removeAura(uuid: string) {\n        this.shape.auras = this.shape.auras.filter(au => au.uuid !== uuid);\n        this.shape.checkVisionSources();\n        this.updateShape(true);\n    }\n    updateAuraVisionSource(aura: Aura) {\n        aura.visionSource = !aura.visionSource;\n        const i = gameStore.visionSources.findIndex(ls => ls.aura === aura.uuid);\n        if (aura.visionSource && i === -1) gameStore.visionSources.push({ shape: this.shape.uuid, aura: aura.uuid });\n        else if (!aura.visionSource && i >= 0) gameStore.visionSources.splice(i, 1);\n        // aura.lastPath = undefined;\n        layerManager.invalidateLight();\n        this.updateShape(true);\n    }\n    updateAuraColour(aura: Aura, colour: string) {\n        const layer = layerManager.getLayer(this.shape.layer);\n        if (layer === undefined) return;\n        layer.invalidate(!aura.visionSource);\n    }\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"main\"},on:{\"mouseleave\":_vm.mouseleave}},[_c('menu-bar'),_c('div',{attrs:{\"id\":\"board\"}},[(_vm.ready.manager)?[_c('tool-bar',{ref:\"tools\"})]:_vm._e(),_c('div',{attrs:{\"id\":\"layers\"},on:{\"mousedown\":_vm.mousedown,\"mouseup\":_vm.mouseup,\"mousemove\":_vm.mousemove,\"contextmenu\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.contextmenu($event)},\"dragover\":function($event){$event.preventDefault();},\"drop\":_vm.drop}}),(_vm.layers.length > 1)?_c('div',{attrs:{\"id\":\"layerselect\"}},[_c('ul',_vm._l((_vm.layers),function(layer){return _c('li',{key:layer.name,class:{ 'layer-selected': layer === _vm.selectedLayer },on:{\"click\":function($event){_vm.selectLayer(layer)}}},[_c('a',{attrs:{\"href\":\"#\"}},[_vm._v(_vm._s(layer))])])}))]):_vm._e()],2),_c('selection-info',{ref:\"selectionInfo\"}),_c('initiative-dialog',{ref:\"initiative\",attrs:{\"id\":\"initiativedialog\"}}),_c('note-dialog',{ref:\"note\"}),_c('zoom-slider',{attrs:{\"id\":\"zoomer\",\"height\":6,\"width\":200,\"min\":0.01,\"max\":5.0,\"interval\":0.1,\"dot-width\":8,\"dot-height\":20,\"tooltip-dir\":'bottom',\"tooltip\":'hover',\"formatter\":_vm.zoomFactor.toFixed(1),\"slider-style\":{'border-radius': '15%'},\"bg-style\":{'background-color': '#fff', 'box-shadow': '0.5px 0.5px 3px 1px rgba(0, 0, 0, .36)'},\"process-style\":{'background-color': '#fff'}},model:{value:(_vm.zoomFactor),callback:function ($$v) {_vm.zoomFactor=$$v},expression:\"zoomFactor\"}}),_c('prompt-dialog',{ref:\"prompt\"}),_c('confirm-dialog',{ref:\"confirm\"})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"74f43d04-vue-loader-template\\\"}!../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./game.vue?vue&type=template&id=6d744362&scoped=true&\"","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\n\nimport Modal from \"@/core/components/modals/modal.vue\";\n\n@Component({\n    components: {\n        Modal,\n    },\n})\nexport default class ConfirmDialog extends Vue {\n    $refs!: {\n        confirm: HTMLButtonElement;\n    };\n\n    visible = false;\n    yes = \"Yes\";\n    no = \"No\";\n    title = \"\";\n\n    resolve = (ok: boolean) => {};\n    reject = () => {};\n\n    confirm() {\n        this.resolve(true);\n        this.close();\n    }\n    deny() {\n        this.resolve(false);\n        this.close();\n    }\n    close() {\n        this.reject();\n        this.visible = false;\n        this.title = \"\";\n    }\n    open(title: string, yes = \"yes\", no = \"no\"): Promise<boolean> {\n        this.yes = yes;\n        this.no = no;\n        this.title = title;\n\n        this.visible = true;\n        this.$nextTick(() => {\n            this.$refs.confirm.focus();\n        });\n\n        return new Promise((resolve, reject) => {\n            this.resolve = resolve;\n            this.reject = reject;\n        });\n    }\n}\n","import { render, staticRenderFns } from \"./map.vue?vue&type=template&id=f93438ce&\"\nimport script from \"./map.vue?vue&type=script&lang=ts&\"\nexport * from \"./map.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"map.vue\"\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ContextMenu',{attrs:{\"visible\":_vm.visible,\"left\":_vm.left + 'px',\"top\":_vm.top + 'px'},on:{\"close\":_vm.close}},[_c('li',{on:{\"click\":_vm.rename}},[_vm._v(\"Rename\")]),_c('li',{on:{\"click\":_vm.remove}},[_vm._v(\"Remove\")])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"74f43d04-vue-loader-template\\\"}!../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./contextMenu.vue?vue&type=template&id=d4f084a4&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('modal',{attrs:{\"visible\":_vm.visible},on:{\"close\":_vm.close},scopedSlots:_vm._u([{key:\"header\",fn:function(m){return _c('div',{staticClass:\"modal-header\",attrs:{\"draggable\":\"true\"},on:{\"dragstart\":m.dragStart,\"dragend\":m.dragEnd}},[_vm._v(_vm._s(_vm.title))])}}])},[_c('div',{staticClass:\"modal-body\"},[_c('button',{ref:\"confirm\",on:{\"click\":_vm.confirm}},[_vm._v(_vm._s(_vm.yes))]),(!!_vm.no)?_c('button',{on:{\"click\":_vm.deny}},[_vm._v(_vm._s(_vm.no))]):_vm._e()])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"74f43d04-vue-loader-template\\\"}!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./confirm.vue?vue&type=template&id=1883e207&scoped=true&\"","\n\n\n\n\n\n\n\nimport Vue from \"vue\";\n\nimport Component from \"vue-class-component\";\n\nimport AssetManager from \"@/assetManager/manager.vue\";\nimport ContextMenu from \"@/core/components/contextmenu.vue\";\nimport ConfirmDialog from \"@/core/components/modals/confirm.vue\";\nimport Prompt from \"@/core/components/modals/prompt.vue\";\n\nimport { socket } from \"@/assetManager/socket\";\nimport { assetStore } from \"@/assetManager/store\";\nimport { getComponent, getRef } from \"@/core/utils\";\n\n@Component({\n    components: {\n        ContextMenu,\n    },\n})\nexport default class AssetContextMenu extends Vue {\n    visible = false;\n    left = 0;\n    top = 0;\n    open(event: MouseEvent, inode: number) {\n        if (!assetStore.selected.includes(inode)) getComponent<any>().select(event, inode);\n\n        this.visible = true;\n        this.left = event.pageX;\n        this.top = event.pageY;\n        this.$nextTick(() => {\n            this.$children[0].$el.focus();\n        });\n    }\n    close() {\n        this.visible = false;\n    }\n    rename() {\n        if (assetStore.selected.length !== 1) return;\n        const asset = assetStore.idMap.get(assetStore.selected[0])!;\n\n        getRef<Prompt>(\"prompt\")\n            .prompt(\"New name:\", `Renaming ${asset.name}`)\n            .then(\n                (name: string) => {\n                    socket.emit(\"Asset.Rename\", {\n                        asset: asset.id,\n                        name,\n                    });\n                    asset.name = name;\n                    getComponent().$forceUpdate();\n                },\n                () => {},\n            );\n        this.close();\n    }\n    remove() {\n        if (assetStore.selected.length === 0) return;\n        getRef<ConfirmDialog>(\"confirm\")\n            .open(\"Are you sure you wish to remove this?\")\n            .then(\n                (result: boolean) => {\n                    if (result) {\n                        for (const sel of assetStore.selected) {\n                            socket.emit(\"Asset.Remove\", sel);\n                            if (assetStore.isFile(sel)) assetStore.files.splice(assetStore.files.indexOf(sel), 1);\n                            else assetStore.folders.splice(assetStore.folders.indexOf(sel), 1);\n                        }\n                        assetStore.selected = [];\n                    }\n                },\n                () => {},\n            );\n        this.close();\n    }\n}\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./select.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./select.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./manager.vue?vue&type=template&id=d1ce9748&\"\nimport script from \"./manager.vue?vue&type=script&lang=ts&\"\nexport * from \"./manager.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./manager.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"manager.vue\"\nexport default component.exports","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tools.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tools.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./tool.vue?vue&type=template&id=1e034b42&\"\nimport script from \"./tool.vue?vue&type=script&lang=ts&\"\nexport * from \"./tool.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./tool.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"tool.vue\"\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('Modal',{attrs:{\"visible\":_vm.visible},on:{\"close\":_vm.close},scopedSlots:_vm._u([{key:\"header\",fn:function(m){return _c('div',{staticClass:\"modal-header\",attrs:{\"draggable\":\"true\"},on:{\"dragstart\":m.dragStart,\"dragend\":m.dragEnd}},[_vm._v(_vm._s(_vm.title))])}}])},[_c('div',{staticClass:\"modal-body\"},[_vm._v(\"\\n    \"+_vm._s(_vm.question)+\"\\n    \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.answer),expression:\"answer\"}],ref:\"answer\",attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.answer)},on:{\"keyup\":function($event){if(!('button' in $event)&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.submit($event)},\"input\":function($event){if($event.target.composing){ return; }_vm.answer=$event.target.value}}})]),_c('div',{staticClass:\"modal-footer\"},[_c('button',{on:{\"click\":_vm.submit}},[_vm._v(\"Submit\")])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"74f43d04-vue-loader-template\\\"}!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./prompt.vue?vue&type=template&id=0602c2e6&scoped=true&\"","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\nimport draggable from \"vuedraggable\";\nVue.component(\"draggable\", draggable);\n\nimport Modal from \"@/core/components/modals/modal.vue\";\n\nimport { uuidv4 } from \"@/core/utils\";\nimport { socket } from \"@/game/api/socket\";\nimport { InitiativeData, InitiativeEffect } from \"@/game/comm/types/general\";\nimport { EventBus } from \"@/game/event-bus\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { gameStore } from \"@/game/store\";\n\n@Component({\n    components: {\n        Modal,\n        draggable,\n    },\n})\nexport default class Initiative extends Vue {\n    visible = false;\n    data: InitiativeData[] = [];\n    currentActor: string | null = null;\n    roundCounter = 0;\n\n    mounted() {\n        EventBus.$on(\"Initiative.Clear\", this.clear);\n        EventBus.$on(\"Initiative.Remove\", (data: string) => this.removeInitiative(data));\n        EventBus.$on(\"Initiative.Show\", () => (this.visible = true));\n\n        socket.on(\"Initiative.Set\", (data: InitiativeData[]) => {\n            this.data = data;\n        });\n        socket.on(\"Initiative.Turn.Update\", (data: string) => this.setTurn(data, false));\n        socket.on(\"Initiative.Round.Update\", (data: number) => this.setRound(data, false));\n        socket.on(\"Initiative.Effect.New\", (data: { actor: string; effect: InitiativeEffect }) => {\n            const actor = this.getActor(data.actor);\n            if (actor === undefined) return;\n            this.createEffect(actor, data.effect, false);\n        });\n        socket.on(\"Initiative.Effect.Update\", (data: { actor: string; effect: InitiativeEffect }) =>\n            this.updateEffect(data.actor, data.effect, false),\n        );\n    }\n\n    beforeDestroy() {\n        EventBus.$off();\n    }\n\n    // Utilities\n    clear() {\n        this.data = [];\n        this.currentActor = null;\n    }\n    getActor(actorId: string) {\n        return this.data.find(a => a.uuid === actorId);\n    }\n    contains(uuid: string) {\n        return this.data.some(d => d.uuid === uuid);\n    }\n    owns(actor: InitiativeData): boolean {\n        if (gameStore.IS_DM) return true;\n        const shape = layerManager.UUIDMap.get(actor.uuid);\n        // Shapes that are unknown to this client are hidden from this client but owned by other clients\n        if (shape === undefined) return false;\n        return shape.owners.includes(gameStore.username);\n    }\n    getDefaultEffect() {\n        return { uuid: uuidv4(), name: \"New Effect\", turns: 10 };\n    }\n    fakeSetData(dataTransfer: DataTransfer) {\n        dataTransfer.setData(\"Hack\", \"\");\n    }\n    syncInitiative(data: InitiativeData | { uuid: string }) {\n        socket.emit(\"Initiative.Update\", data);\n    }\n    // Events\n    addInitiative(data: InitiativeData) {\n        const d = this.data.findIndex(a => a.uuid === data.uuid);\n        if (d >= 0) return;\n        if (data.initiative === undefined) data.initiative = 0;\n        this.syncInitiative(data);\n    }\n    removeInitiative(uuid: string) {\n        const d = this.data.findIndex(a => a.uuid === uuid);\n        if (d < 0 || this.data[d].group) return;\n        this.syncInitiative({ uuid });\n        // Remove highlight\n        const shape = layerManager.UUIDMap.get(uuid);\n        if (shape === undefined) return;\n        if (shape.showHighlight) {\n            shape.showHighlight = false;\n            layerManager.getLayer(shape.layer)!.invalidate(true);\n        }\n    }\n    updateOrder() {\n        if (!gameStore.IS_DM) return;\n        socket.emit(\"Initiative.Set\", this.data.map(d => d.uuid));\n    }\n    setTurn(actorId: string | null, sync: boolean) {\n        if (!gameStore.IS_DM && sync) return;\n        this.currentActor = actorId;\n        const actor = this.data.find(a => a.uuid === actorId);\n        if (actor === undefined) return;\n        if (actor.effects) {\n            for (let e = actor.effects.length - 1; e >= 0; e--) {\n                if (actor.effects[e].turns <= 0) actor.effects.splice(e, 1);\n                else actor.effects[e].turns--;\n            }\n        }\n        if (sync) socket.emit(\"Initiative.Turn.Update\", actorId);\n    }\n    setRound(round: number, sync: boolean) {\n        if (!gameStore.IS_DM && sync) return;\n        this.roundCounter = round;\n        if (sync) socket.emit(\"Initiative.Round.Update\", round);\n    }\n    nextTurn() {\n        if (!gameStore.IS_DM) return;\n        const order = this.data;\n        const next = order[(order.findIndex(a => a.uuid === this.currentActor) + 1) % order.length];\n        if (this.data[0].uuid === next.uuid) this.setRound(this.roundCounter + 1, true);\n        this.setTurn(next.uuid, true);\n    }\n    toggleHighlight(actor: InitiativeData, show: boolean) {\n        const shape = layerManager.UUIDMap.get(actor.uuid);\n        if (shape === undefined) return;\n        shape.showHighlight = show;\n        layerManager.getLayer(shape.layer)!.invalidate(true);\n    }\n    toggleOption(actor: InitiativeData, option: \"visible\" | \"group\") {\n        if (!this.owns(actor)) return;\n        actor[option] = !actor[option];\n        this.syncInitiative(actor);\n    }\n    createEffect(actor: InitiativeData, effect: InitiativeEffect, sync: boolean) {\n        if (!this.owns(actor)) return;\n        actor.effects.push(effect);\n        if (sync) socket.emit(\"Initiative.Effect.New\", { actor: actor.uuid, effect });\n    }\n    syncEffect(actor: InitiativeData, effect: InitiativeEffect) {\n        if (!this.owns(actor)) return;\n        socket.emit(\"Initiative.Effect.Update\", { actor: actor.uuid, effect });\n    }\n    updateEffect(actorId: string, effect: InitiativeEffect, sync: boolean) {\n        const actor = this.data.find(a => a.uuid === actorId);\n        if (actor === undefined) return;\n        const effectIndex = actor.effects.findIndex(e => e.uuid === effect.uuid);\n        if (effectIndex === undefined) return;\n        actor.effects[effectIndex] = effect;\n        if (sync) this.syncEffect(actor, effect);\n        else this.$forceUpdate();\n    }\n}\n","import { render, staticRenderFns } from \"./selection_info.vue?vue&type=template&id=32cec914&scoped=true&\"\nimport script from \"./selection_info.vue?vue&type=script&lang=ts&\"\nexport * from \"./selection_info.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./selection_info.vue?vue&type=style&index=0&id=32cec914&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"32cec914\",\n  null\n  \n)\n\ncomponent.options.__file = \"selection_info.vue\"\nexport default component.exports","// import Vuex from \"vuex\";\nimport { Action, getModule, Module, Mutation, VuexModule } from \"vuex-module-decorators\";\n\nimport { AssetList } from \"@/core/comm/types\";\nimport { socket } from \"@/game/api/socket\";\nimport { sendClientOptions } from \"@/game/api/utils\";\nimport { Note } from \"@/game/comm/types/general\";\nimport { GlobalPoint } from \"@/game/geom\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { g2l, l2g } from \"@/game/units\";\nimport { BoundingVolume } from \"@/game/visibility/bvh/bvh\";\nimport { rootStore } from \"@/store\";\nimport { triangulate } from \"./visibility/te/pa\";\n\nexport interface GameState {\n    boardInitialized: boolean;\n}\n\n@Module({ dynamic: true, store: rootStore, name: \"game\", namespaced: true })\nclass GameStore extends VuexModule {\n    // This is a limited view of selectable layers that is used to generate the layer selection UI and ability to switch layers\n    // See the layerManager for proper layer management tools\n    layers: string[] = [];\n    selectedLayerIndex = -1;\n    boardInitialized = false;\n\n    locations: string[] = [];\n\n    assets: AssetList = {};\n\n    notes: Note[] = [];\n\n    IS_DM = false;\n    gridSize = 50;\n    username = \"\";\n    roomName = \"\";\n    roomCreator = \"\";\n    invitationCode = \"\";\n\n    gridColour = \"rgba(0, 0, 0, 1)\";\n    fowColour = \"rgba(0, 0, 0, 1)\";\n    rulerColour = \"rgba(255, 0, 0, 1)\";\n    panX = 0;\n    panY = 0;\n    zoomFactor = 1;\n\n    unitSize = 5;\n    useGrid = true;\n    fullFOW = false;\n    fowOpacity = 0.3;\n    fowLOS = false;\n    locationName = \"\";\n\n    visionSources: { shape: string; aura: string }[] = [];\n    visionBlockers: string[] = [];\n    annotations: string[] = [];\n    movementblockers: string[] = [];\n    ownedtokens: string[] = [];\n\n    BV = Object.freeze(new BoundingVolume([]));\n\n    visionMode: \"bvh\" | \"triangle\" = \"bvh\";\n\n    get selectedLayer() {\n        return this.layers[this.selectedLayerIndex];\n    }\n\n    @Mutation\n    setVisionMode(visionMode: \"bvh\" | \"triangle\") {\n        this.visionMode = visionMode;\n    }\n\n    @Mutation\n    setBoardInitialized(boardInitialized: boolean) {\n        this.boardInitialized = boardInitialized;\n    }\n\n    @Mutation\n    setDM(isDM: boolean) {\n        this.IS_DM = isDM;\n    }\n\n    @Mutation\n    setUsername(username: string) {\n        this.username = username;\n    }\n\n    @Mutation\n    setRoomName(name: string) {\n        this.roomName = name;\n    }\n\n    @Mutation\n    setRoomCreator(name: string) {\n        this.roomCreator = name;\n    }\n\n    @Mutation\n    setInvitationCode(code: string) {\n        this.invitationCode = code;\n    }\n\n    @Mutation\n    addLayer(name: string) {\n        this.layers.push(name);\n        if (this.selectedLayerIndex === -1) this.selectedLayerIndex = this.layers.indexOf(name);\n    }\n\n    @Mutation\n    selectLayer(data: { name: string; sync: boolean }) {\n        const index = this.layers.indexOf(data.name);\n        if (index >= 0) this.selectedLayerIndex = index;\n        if (data.sync) socket.emit(\"Client.ActiveLayer.Set\", data.name);\n    }\n\n    @Mutation\n    newNote(data: { note: Note; sync: boolean }) {\n        this.notes.push(data.note);\n        if (data.sync) socket.emit(\"Note.New\", data.note);\n    }\n\n    @Mutation\n    setAssets(assets: AssetList) {\n        this.assets = assets;\n    }\n\n    @Mutation\n    setLocations(locations: string[]) {\n        this.locations = locations;\n    }\n\n    @Mutation\n    resetLayerInfo() {\n        this.layers = [];\n        this.selectedLayerIndex = -1;\n    }\n\n    @Mutation\n    recalculateBV(partial = false) {\n        // TODO: This needs to be cleaned up..\n        if (this.boardInitialized) {\n            if (this.visionMode === \"triangle\") triangulate(partial);\n            else {\n                let success = false;\n                let tries = 0;\n                while (!success) {\n                    success = true;\n                    try {\n                        this.BV = Object.freeze(new BoundingVolume(this.visionBlockers));\n                    } catch (error) {\n                        success = false;\n                        tries++;\n                        if (tries > 10) {\n                            console.error(error);\n                            return;\n                        }\n                    }\n                }\n            }\n        }\n    }\n\n    @Mutation\n    updateZoom(data: { newZoomValue: number; zoomLocation: GlobalPoint }) {\n        if (data.newZoomValue === this.zoomFactor) return;\n        if (data.newZoomValue < 0.1) data.newZoomValue = 0.01;\n        if (data.newZoomValue > 5) data.newZoomValue = 5;\n\n        const oldLoc = g2l(data.zoomLocation);\n\n        this.zoomFactor = data.newZoomValue;\n\n        const newLoc = l2g(oldLoc);\n\n        // Change the pan settings to keep the zoomLocation in the same exact location before and after the zoom.\n        const diff = newLoc.subtract(data.zoomLocation);\n        this.panX += diff.x;\n        this.panY += diff.y;\n\n        layerManager.invalidate();\n        sendClientOptions();\n    }\n\n    @Mutation\n    setGridColour(data: { colour: string; sync: boolean }) {\n        this.gridColour = data.colour;\n        layerManager.getGridLayer()!.drawGrid();\n        if (data.sync) socket.emit(\"Client.Options.Set\", { gridColour: data.colour });\n    }\n\n    @Mutation\n    setFOWColour(data: { colour: string; sync: boolean }) {\n        this.fowColour = data.colour;\n        layerManager.invalidate();\n        if (data.sync) socket.emit(\"Client.Options.Set\", { fowColour: data.colour });\n    }\n\n    @Mutation\n    setRulerColour(data: { colour: string; sync: boolean }) {\n        this.rulerColour = data.colour;\n        if (data.sync) socket.emit(\"Client.Options.Set\", { rulerColour: data.colour });\n    }\n\n    @Mutation\n    setPanX(x: number) {\n        this.panX = x;\n    }\n\n    @Mutation\n    setPanY(y: number) {\n        this.panY = y;\n    }\n\n    @Mutation\n    setZoomFactor(zoomFactor: number) {\n        this.zoomFactor = zoomFactor;\n    }\n\n    @Mutation\n    increasePanX(increase: number) {\n        this.panX += increase;\n    }\n\n    @Mutation\n    increasePanY(increase: number) {\n        this.panY += increase;\n    }\n\n    @Mutation\n    setUnitSize(data: { unitSize: number; sync: boolean }) {\n        if (this.unitSize !== data.unitSize && data.unitSize > 0 && data.unitSize < Infinity) {\n            this.unitSize = data.unitSize;\n            layerManager.invalidate();\n            if (data.sync) socket.emit(\"Location.Options.Set\", { unit_size: data.unitSize });\n        }\n    }\n\n    @Mutation\n    setUseGrid(data: { useGrid: boolean; sync: boolean }) {\n        if (this.useGrid !== data.useGrid) {\n            this.useGrid = data.useGrid;\n            const gridLayer = layerManager.getGridLayer()!;\n            if (data.useGrid) gridLayer.canvas.style.display = \"block\";\n            else gridLayer.canvas.style.display = \"none\";\n            if (data.sync) socket.emit(\"Location.Options.Set\", { use_grid: data.useGrid });\n        }\n    }\n\n    @Mutation\n    setGridSize(data: { gridSize: number; sync: boolean }): void {\n        if (this.gridSize !== data.gridSize && data.gridSize > 0) {\n            this.gridSize = data.gridSize;\n            const gridLayer = layerManager.getGridLayer();\n            if (gridLayer !== undefined) gridLayer.drawGrid();\n            if (data.sync) socket.emit(\"Gridsize.Set\", data.gridSize);\n        }\n    }\n\n    @Mutation\n    setFullFOW(data: { fullFOW: boolean; sync: boolean }) {\n        if (this.fullFOW !== data.fullFOW) {\n            this.fullFOW = data.fullFOW;\n            layerManager.invalidateLight();\n            if (data.sync) socket.emit(\"Location.Options.Set\", { full_fow: data.fullFOW });\n        }\n    }\n\n    @Mutation\n    setFOWOpacity(data: { fowOpacity: number; sync: boolean }) {\n        this.fowOpacity = data.fowOpacity;\n        layerManager.invalidateLight();\n        if (data.sync) socket.emit(\"Location.Options.Set\", { fow_opacity: data.fowOpacity });\n    }\n\n    @Mutation\n    setLineOfSight(data: { fowLOS: boolean; sync: boolean }) {\n        if (this.fowLOS !== data.fowLOS) {\n            this.fowLOS = data.fowLOS;\n            layerManager.invalidate();\n            if (data.sync) socket.emit(\"Location.Options.Set\", { fow_los: data.fowLOS });\n        }\n    }\n\n    @Mutation\n    setLocationName(name: string) {\n        this.locationName = name;\n    }\n\n    @Mutation\n    updateNote(data: { note: Note; sync: boolean }) {\n        const actualNote = this.notes.find(n => n.uuid === data.note.uuid);\n        if (actualNote === undefined) return;\n        actualNote.title = data.note.title;\n        actualNote.text = data.note.text;\n        if (data.sync) socket.emit(\"Note.Update\", actualNote);\n    }\n\n    @Mutation\n    removeNote(data: { note: Note; sync: boolean }) {\n        this.notes = this.notes.filter(n => n.uuid !== data.note.uuid);\n        if (data.sync) socket.emit(\"Note.Remove\", data.note.uuid);\n    }\n\n    @Action\n    clear() {\n        (<any>this.context.state).visionSources = [];\n        (<any>this.context.state).visionBlockers = [];\n        (<any>this.context.state).ownedtokens = [];\n        (<any>this.context.state).annotations = [];\n        (<any>this.context.state).movementblockers = [];\n        this.context.commit(\"recalculateBV\");\n    }\n}\n\nexport const gameStore = getModule(GameStore);\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./confirm.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./confirm.vue?vue&type=script&lang=ts&\"","import { ServerAura } from \"@/game/comm/types/shapes\";\n\nexport const aurasFromServer = (auras: ServerAura[]): Aura[] => {\n    const result = [];\n    for (const aura of auras) {\n        result.push({\n            uuid: aura.uuid,\n            visionSource: aura.vision_source,\n            visible: aura.visible,\n            name: aura.name,\n            value: aura.value,\n            dim: aura.dim,\n            colour: aura.colour,\n        });\n    }\n    return result;\n};\n\nexport const aurasToServer = (auras: Aura[]): ServerAura[] => {\n    const result = [];\n    for (const aura of auras) {\n        result.push({\n            uuid: aura.uuid,\n            vision_source: aura.visionSource,\n            visible: aura.visible,\n            name: aura.name,\n            value: aura.value,\n            dim: aura.dim,\n            colour: aura.colour,\n        });\n    }\n    return result;\n};\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--12-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./contextMenu.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--12-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./contextMenu.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./note.vue?vue&type=template&id=7a3669fd&scoped=true&\"\nimport script from \"./note.vue?vue&type=script&lang=ts&\"\nexport * from \"./note.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./note.vue?vue&type=style&index=0&id=7a3669fd&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7a3669fd\",\n  null\n  \n)\n\ncomponent.options.__file = \"note.vue\"\nexport default component.exports","import { render, staticRenderFns } from \"./initiative.vue?vue&type=template&id=ccaf03d6&scoped=true&\"\nimport script from \"./initiative.vue?vue&type=script&lang=ts&\"\nexport * from \"./initiative.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./initiative.vue?vue&type=style&index=0&id=ccaf03d6&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"ccaf03d6\",\n  null\n  \n)\n\ncomponent.options.__file = \"initiative.vue\"\nexport default component.exports","import { ServerLayer } from \"@/game/comm/types/general\";\nimport { FOWLayer } from \"@/game/layers/fow\";\nimport { FOWPlayersLayer } from \"@/game/layers/fowplayers\";\nimport { GridLayer } from \"@/game/layers/grid\";\nimport { Layer } from \"@/game/layers/layer\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { gameStore } from \"@/game/store\";\n\nexport function createLayer(layerInfo: ServerLayer) {\n    // Create canvas element\n    const canvas = document.createElement(\"canvas\");\n    canvas.style.zIndex = layerManager.layers.length.toString();\n    canvas.width = window.innerWidth;\n    canvas.height = window.innerHeight;\n\n    // Create the Layer instance\n    let layer: Layer;\n    if (layerInfo.type_ === \"grid\") layer = new GridLayer(canvas, layerInfo.name);\n    else if (layerInfo.type_ === \"fow\") layer = new FOWLayer(canvas, layerInfo.name);\n    else if (layerInfo.type_ === \"fow-players\") layer = new FOWPlayersLayer(canvas, layerInfo.name);\n    else layer = new Layer(canvas, layerInfo.name);\n    layer.selectable = layerInfo.selectable;\n    layer.playerEditable = layerInfo.player_editable;\n    layerManager.addLayer(layer);\n\n    // Add the element to the DOM\n    const layers = document.getElementById(\"layers\");\n    if (layers === null) {\n        console.warn(\"Layers div is missing, this will prevent the main game board from loading!\");\n        return;\n    }\n    if (layerInfo.name !== \"fow-players\") layers.appendChild(canvas);\n\n    if (layerInfo.type_ === \"grid\" && layerInfo.size) gameStore.setGridSize({ gridSize: layerInfo.size, sync: false });\n    // Load layer shapes\n    layer.setShapes(layerInfo.shapes);\n}\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./edit_dialog.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./edit_dialog.vue?vue&type=script&lang=ts&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.selected)?_c('div',{staticClass:\"tool-detail\",style:({'--detailRight': _vm.detailRight, '--detailArrow': _vm.detailArrow})},[_c('div',[_vm._v(\"#X\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.xCount),expression:\"xCount\"}],attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.xCount)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.xCount=$event.target.value}}}),_c('div',[_vm._v(\"#Y\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.yCount),expression:\"yCount\"}],attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.yCount)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.yCount=$event.target.value}}})]):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"74f43d04-vue-loader-template\\\"}!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./map.vue?vue&type=template&id=f93438ce&\"","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\n\nimport Prompt from \"@/core/components/modals/prompt.vue\";\nimport EditDialog from \"@/game/ui/selection/edit_dialog.vue\";\n\nimport { getRef } from \"@/core/utils\";\nimport { socket } from \"@/game/api/socket\";\nimport { EventBus } from \"@/game/event-bus\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { Shape } from \"@/game/shapes/shape\";\n\n@Component({\n    components: {\n        \"edit-dialog\": EditDialog,\n    },\n})\nexport default class SelectionInfo extends Vue {\n    shape: Shape | null = null;\n\n    mounted() {\n        EventBus.$on(\"SelectionInfo.Shape.Set\", (shape: Shape | null) => {\n            this.shape = shape;\n        });\n    }\n\n    beforeDestroy() {\n        EventBus.$off();\n    }\n\n    openEditDialog() {\n        (<any>this.$refs.editDialog).visible = true;\n    }\n    changeValue(object: Tracker | Aura, redraw: boolean) {\n        if (this.shape === null) return;\n        getRef<Prompt>(\"prompt\")\n            .prompt(`New  ${object.name} value:`, `Updating ${object.name}`)\n            .then(\n                (value: string) => {\n                    if (this.shape === null) return;\n                    const ogValue = object.value;\n                    if (value[0] === \"+\" || value[0] === \"-\") object.value += parseInt(value, 10);\n                    else object.value = parseInt(value, 10);\n                    if (isNaN(object.value)) object.value = ogValue;\n                    socket.emit(\"Shape.Update\", { shape: this.shape.asDict(), redraw, temporary: false });\n                    if (redraw) layerManager.invalidate();\n                },\n                () => {},\n            );\n    }\n}\n","import { AssetList } from \"@/core/comm/types\";\nimport { socket } from \"@/game/api/socket\";\nimport { BoardInfo, Note, ServerClient, ServerLocation } from \"@/game/comm/types/general\";\nimport { ServerShape } from \"@/game/comm/types/shapes\";\nimport { EventBus } from \"@/game/event-bus\";\nimport { GlobalPoint } from \"@/game/geom\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { createLayer } from \"@/game/layers/utils\";\nimport { gameManager } from \"@/game/manager\";\nimport { gameStore } from \"@/game/store\";\nimport { router } from \"@/router\";\n\nsocket.on(\"connect\", () => {\n    console.log(\"Connected\");\n});\nsocket.on(\"disconnect\", () => {\n    console.log(\"Disconnected\");\n});\nsocket.on(\"connect_error\", (error: any) => {\n    console.error(\"Could not connect to game session.\");\n    router.push(\"/dashboard\");\n});\nsocket.on(\"error\", (error: any) => {\n    console.error(\"Game session does not exist.\");\n    router.push(\"/dashboard\");\n});\nsocket.on(\"redirect\", (destination: string) => {\n    console.log(\"redirecting\");\n    router.push(destination);\n});\nsocket.on(\"Room.Info.Set\", (data: { name: string; creator: string; invitationCode: string }) => {\n    gameStore.setRoomName(data.name);\n    gameStore.setRoomCreator(data.creator);\n    gameStore.setInvitationCode(data.invitationCode);\n});\nsocket.on(\"Username.Set\", (username: string) => {\n    gameStore.setUsername(username);\n    gameStore.setDM(username === window.location.pathname.split(\"/\")[2]);\n});\nsocket.on(\"Client.Options.Set\", (options: ServerClient) => {\n    gameStore.setGridColour({ colour: options.grid_colour, sync: false });\n    gameStore.setFOWColour({ colour: options.fow_colour, sync: false });\n    gameStore.setRulerColour({ colour: options.ruler_colour, sync: false });\n    gameStore.setPanX(options.pan_x);\n    gameStore.setPanY(options.pan_y);\n    gameStore.setZoomFactor(options.zoom_factor);\n    if (options.active_layer) layerManager.selectLayer(options.active_layer, false);\n    if (layerManager.getGridLayer() !== undefined) layerManager.getGridLayer()!.invalidate();\n});\nsocket.on(\"Location.Set\", (data: Partial<ServerLocation>) => {\n    if (data.name !== undefined) gameStore.setLocationName(data.name);\n    if (data.unit_size !== undefined) gameStore.setUnitSize({ unitSize: data.unit_size, sync: false });\n    if (data.use_grid !== undefined) gameStore.setUseGrid({ useGrid: data.use_grid, sync: false });\n    if (data.full_fow !== undefined) gameStore.setFullFOW({ fullFOW: data.full_fow, sync: false });\n    if (data.fow_opacity !== undefined) gameStore.setFOWOpacity({ fowOpacity: data.fow_opacity, sync: false });\n    if (data.fow_los !== undefined) gameStore.setLineOfSight({ fowLOS: data.fow_los, sync: false });\n});\nsocket.on(\"Position.Set\", (data: { x: number; y: number }) => {\n    gameManager.setCenterPosition(new GlobalPoint(data.x, data.y));\n});\nsocket.on(\"Notes.Set\", (notes: Note[]) => {\n    for (const note of notes) gameStore.newNote({ note, sync: false });\n});\nsocket.on(\"Asset.List.Set\", (assets: AssetList) => {\n    gameStore.setAssets(assets);\n});\nsocket.on(\"Board.Set\", (locationInfo: BoardInfo) => {\n    gameStore.clear();\n    gameStore.setLocations(locationInfo.locations);\n    document.getElementById(\"layers\")!.innerHTML = \"\";\n    gameStore.resetLayerInfo();\n    layerManager.reset();\n    for (const layer of locationInfo.layers) createLayer(layer);\n    // Force the correct opacity render on other layers.\n    layerManager.selectLayer(layerManager.getLayer()!.name, false);\n    EventBus.$emit(\"Initiative.Clear\");\n    gameStore.setBoardInitialized(true);\n    gameStore.recalculateBV();\n});\nsocket.on(\"Gridsize.Set\", (gridSize: number) => {\n    gameStore.setGridSize({ gridSize, sync: false });\n});\nsocket.on(\"Shape.Add\", (shape: ServerShape) => {\n    gameManager.addShape(shape);\n});\nsocket.on(\"Shape.Remove\", (shape: ServerShape) => {\n    if (!layerManager.UUIDMap.has(shape.uuid)) {\n        console.log(`Attempted to remove an unknown shape`);\n        return;\n    }\n    if (!layerManager.hasLayer(shape.layer)) {\n        console.log(`Attempted to remove shape from an unknown layer ${shape.layer}`);\n        return;\n    }\n    const layer = layerManager.getLayer(shape.layer)!;\n    layer.removeShape(layerManager.UUIDMap.get(shape.uuid)!, false);\n    layer.invalidate(false);\n});\nsocket.on(\"Shape.Order.Set\", (data: { shape: ServerShape; index: number }) => {\n    if (!layerManager.UUIDMap.has(data.shape.uuid)) {\n        console.log(`Attempted to move the shape order of an unknown shape`);\n        return;\n    }\n    if (!layerManager.hasLayer(data.shape.layer)) {\n        console.log(`Attempted to remove shape from an unknown layer ${data.shape.layer}`);\n        return;\n    }\n    const shape = layerManager.UUIDMap.get(data.shape.uuid)!;\n    const layer = layerManager.getLayer(shape.layer)!;\n    layer.moveShapeOrder(shape, data.index, false);\n});\nsocket.on(\"Shape.Layer.Change\", (data: { uuid: string; layer: string }) => {\n    const shape = layerManager.UUIDMap.get(data.uuid);\n    if (shape === undefined) return;\n    shape.moveLayer(data.layer, false);\n});\nsocket.on(\"Shape.Update\", (data: { shape: ServerShape; redraw: boolean; move: boolean }) => {\n    gameManager.updateShape(data);\n});\nsocket.on(\"Temp.Clear\", (shapes: ServerShape[]) => {\n    shapes.forEach(shape => {\n        if (!layerManager.UUIDMap.has(shape.uuid)) {\n            console.log(\"Attempted to remove an unknown temporary shape\");\n            return;\n        }\n        if (!layerManager.hasLayer(shape.layer)) {\n            console.log(`Attempted to remove shape from an unknown layer ${shape.layer}`);\n            return;\n        }\n        const realShape = layerManager.UUIDMap.get(shape.uuid)!;\n        layerManager.getLayer(shape.layer)!.removeShape(realShape, false);\n    });\n});\n"],"sourceRoot":""}