{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/game/shapes/text.ts","webpack:///./src/game/ui/selection/shapecontext.vue","webpack:///./src/App.vue?5b85","webpack:///./src/core/components/modals/prompt.vue?d33d","webpack:///./src/core/components/colorpicker.vue?4d88","webpack:///./src/game/game.vue","webpack:///./src/game/api/socket.ts","webpack:///./src/assetManager/manager.vue?5633","webpack:///./src/game/ui/menu/asset_node.vue","webpack:///./src/game/ui/tools/selectcontext.vue?02dc","webpack:///./src/auth/login.vue","webpack:///./src/game/visibility/te/draw.ts","webpack:///./src/game/ui/tools/tool.vue?5b17","webpack:///./src/game/shapes/circulartoken.ts","webpack:///./src/game/ui/annotation.ts","webpack:///./src/core/components/colorpicker.vue?8070","webpack:///./src/game/ui/menu/menu.vue","webpack:///./src/core/components/contextmenu.vue","webpack:///./src/game/ui/note.vue?49b7","webpack:///./src/auth/login.vue?c159","webpack:///./src/game/ui/tools/select.vue?9b60","webpack:///./src/game/ui/tools/select.vue?1885","webpack:///./src/game/shapes/utils.ts","webpack:///./src/core/components/modals/confirm.vue?e6fb","webpack:///./src/game/shapes/shape.ts","webpack:///./src/core/components/modals/prompt.vue?d457","webpack:///./src/game/ui/note.vue?a34d","webpack:///./src/game/ui/note.vue?23aa","webpack:///./src/core/components/modals/modal.vue?33b9","webpack:///./src/game/ui/tools/select.vue?49f9","webpack:///./src/game/ui/tools/utils.ts","webpack:///./src/game/ui/note.vue?a508","webpack:///./src/game/api/utils.ts","webpack:///./src/game/ui/menu/asset_node.vue?f519","webpack:///./src/core/components/contextmenu.vue?f03a","webpack:///./src/core/components/contextmenu.vue?7efa","webpack:///./src/assetManager/store.ts","webpack:///./src/core/components/contextmenu.vue?50e1","webpack:///./src/game/ui/selection/shapecontext.vue?1cf6","webpack:///./src/game/ui/selection/selection_info.vue?321c","webpack:///./src/game/ui/selection/selection_info.vue?8aba","webpack:///./src/game/ui/tools/map.vue?284a","webpack:///./src/game/layers/grid.ts","webpack:///./src/store.ts","webpack:///./src/core/components/colorpicker.vue","webpack:///./src/auth/login.vue?3521","webpack:///./src/App.vue?2e53","webpack:///./src/App.vue","webpack:///./src/game/layers/fow.ts","webpack:///./src/core/components/load.vue?18c2","webpack:///./src/game/ui/menu/menu.vue?002b","webpack:///./src/game/ui/menu/menu.vue?9e9a","webpack:///./src/game/shapes/circle.ts","webpack:///./src/game/ui/tools/map.vue?a3ab","webpack:///./src/core/components/load.vue","webpack:///./src/game/ui/tools/pan.ts","webpack:///./src/game/ui/tools/selectcontext.vue","webpack:///./src/core/utils.ts","webpack:///./src/assetManager/contextMenu.vue","webpack:///./src/game/visibility/te/triag.ts","webpack:///./src/game/ui/menu/asset_node.vue?1f27","webpack:///./src/game/ui/selection/edit_dialog.vue?530c","webpack:///./src/core/components/modals/modal.vue?44ae","webpack:///./src/assetManager/socket.ts","webpack:///./src/game/ui/tools/tools.vue?c96e","webpack:///./src/game/game.vue?5550","webpack:///./src/game/shapes/multiline.ts","webpack:///./src/core/components/colorpicker.vue?eaab","webpack:///./src/core/components/colorpicker.vue?8615","webpack:///./src/game/ui/tools/draw.vue","webpack:///./src/game/utils.ts","webpack:///./src/game/ui/tools/createtoken_modal.vue?d0df","webpack:///./src/game/ui/note.vue?f9bd","webpack:///./src/game/ui/initiative.vue?f4e1","webpack:///./src/game/ui/tools/draw.vue?b96d","webpack:///./src/game/shapes/line.ts","webpack:///./src/router.ts","webpack:///./src/game/ui/tools/tool.vue?d136","webpack:///./src/game/ui/tools/tools.vue","webpack:///./src/game/ui/tools/tool.vue?8ce3","webpack:///./src/game/shapes/asset.ts","webpack:///./src/game/visibility/te/cdt.ts","webpack:///./src/game/ui/tools/draw.vue?1261","webpack:///./src/game/layers/manager.ts","webpack:///./src/game/ui/initiative.vue?c7e1","webpack:///./src/game/ui/tools/createtoken_modal.vue","webpack:///./src/game/visibility/bvh/node.ts","webpack:///./src/game/ui/tools/createtoken_modal.vue?f918","webpack:///./src/game/events/keyboard.ts","webpack:///./src/assetManager/manager.vue?433f","webpack:///./src/game/ui/selection/shapecontext.vue?17f5","webpack:///./src/game/ui/tools/tools.vue?25b2","webpack:///./src/game/ui/selection/selection_info.vue?2310","webpack:///./src/core/components/modals/modal.vue?09d2","webpack:///./src/core/components/contextmenu.vue?a0a2","webpack:///./src/game/ui/selection/selection_info.vue?b9a9","webpack:///./src/core/components/modals/prompt.vue?4e1b","webpack:///./src/game/ui/menu/asset_node.vue?4088","webpack:///./src/game/ui/menu/asset_node.vue?fc27","webpack:///./src/core/components/load.vue?4ab2","webpack:///./src/core/components/load.vue?0f87","webpack:///./src/game/ui/tools/tools.vue?d74c","webpack:///./src/game/ui/tools/tools.vue?35df","webpack:///./src/game/ui/menu/menu.vue?8b23","webpack:///./src/game/shapes/boundingrect.ts","webpack:///./src/dashboard/main.vue?5e14","webpack:///./src/dashboard/main.vue?94d1","webpack:///./src/game/geom.ts","webpack:///./src/game/game.vue?5592","webpack:///./src/game/units.ts","webpack:///./src/game/ui/menu/menu.vue?ae57","webpack:///./src/core/components/colorpicker.vue?1682","webpack:///./src/game/ui/tools/selectcontext.vue?0020","webpack:///./src/game/ui/tools/selectcontext.vue?758c","webpack:///./src/game/visibility/te/tds.ts","webpack:///./src/game/visibility/bvh/bvh.ts","webpack:///./src/game/manager.ts","webpack:///./src/game/ui/initiative.vue?e806","webpack:///./src/game/ui/initiative.vue?ca6b","webpack:///./src/core/components/load.vue?8cd0","webpack:///./src/game/ui/selection/shapecontext.vue?4b66","webpack:///./src/game/ui/selection/shapecontext.vue?0558","webpack:///./src/game/game.vue?9a3e","webpack:///./src/dashboard/main.vue?3f72","webpack:///./src/core/components/modals/confirm.vue","webpack:///./src/game/ui/selection/shapecontext.vue?aac0","webpack:///./src/assetManager/contextMenu.vue?c131","webpack:///./src/assetManager/contextMenu.vue?a185","webpack:///./src/game/ui/tools/draw.vue?60f4","webpack:///./src/assetManager/manager.vue?a11e","webpack:///./src/game/ui/selection/edit_dialog.vue?6a1d","webpack:///./src/game/ui/selection/edit_dialog.vue?d983","webpack:///./src/game/event-bus.ts","webpack:///./src/dashboard/main.vue?d5a9","webpack:///./src/game/shapes/rect.ts","webpack:///./src/game/ui/tools/selectcontext.vue?6f66","webpack:///./src/game/layers/fowplayers.ts","webpack:///./src/game/layers/layer.ts","webpack:///./src/game/events/mouse.ts","webpack:///./src/game/ui/menu/asset_node.vue?be10","webpack:///./src/game/ui/menu/menu.vue?904d","webpack:///./src/game/shapes/baserect.ts","webpack:///./src/game/ui/tools/select.vue","webpack:///./src/dashboard/main.vue","webpack:///./src/game/ui/tools/createtoken_modal.vue?6f0b","webpack:///./src/assetManager/manager.vue?765a","webpack:///./src/assetManager/manager.vue?a045","webpack:///./src/game/ui/tools/selectcontext.vue?d61f","webpack:///./src/auth/logout.ts","webpack:///./src/core/store.ts","webpack:///./src/main.ts","webpack:///./src/core/components/contextmenu.vue?f402","webpack:///./src/invitation/invitation.ts","webpack:///./src/core/components/modals/prompt.vue","webpack:///./src/game/visibility/te/te.ts","webpack:///./src/game/ui/tools/map.vue?f96f","webpack:///./src/game/ui/tools/map.vue?7f60","webpack:///./src/game/ui/selection/edit_dialog.vue","webpack:///./src/game/settings.ts","webpack:///./src/auth/login.vue?283c","webpack:///./src/game/ui/tools/createtoken_modal.vue?e7b2","webpack:///./src/game/ui/tools/createtoken_modal.vue?5fcc","webpack:///./src/game/ui/tools/tool.vue?6323","webpack:///./src/game/ui/tools/tool.vue?f5ba","webpack:///./src/core/components/modals/modal.vue?1854","webpack:///./src/core/components/modals/modal.vue?e329","webpack:///./src/game/game.vue?d01c","webpack:///./src/game/ui/tools/ruler.ts","webpack:///./src/core/components/modals/modal.vue","webpack:///./src/game/visibility/te/pa.ts","webpack:///./src/dashboard/main.vue?1359","webpack:///./src/game/ui/selection/edit_dialog.vue?9a84","webpack:///./src/game/game.vue?5ab9","webpack:///./src/game/game.vue?07bd","webpack:///./src/core/components/modals/confirm.vue?f9ee","webpack:///./src/game/ui/tools/map.vue","webpack:///./src/core/components/modals/confirm.vue?e141","webpack:///./src/core/components/modals/confirm.vue?be48","webpack:///./src/assetManager/contextMenu.vue?1b1b","webpack:///./src/game/ui/tools/select.vue?b7fd","webpack:///./src/game/shapes/polygon.ts","webpack:///./src/game/ui/tools/draw.vue?1866","webpack:///./src/game/ui/tools/draw.vue?03b4","webpack:///./src/assetManager/manager.vue","webpack:///./src/game/ui/tools/tools.vue?fa4a","webpack:///./src/game/ui/tools/tool.vue","webpack:///./src/core/components/modals/prompt.vue?0a11","webpack:///./src/core/components/modals/prompt.vue?36e2","webpack:///./src/game/ui/initiative.vue?36c8","webpack:///./src/game/ui/selection/selection_info.vue","webpack:///./src/game/store.ts","webpack:///./src/core/components/modals/confirm.vue?a22f","webpack:///./src/game/comm/conversion/aura.ts","webpack:///./src/assetManager/contextMenu.vue?1e9a","webpack:///./src/game/ui/note.vue","webpack:///./src/game/ui/initiative.vue","webpack:///./src/game/layers/utils.ts","webpack:///./src/game/ui/selection/edit_dialog.vue?3800","webpack:///./src/auth/login.vue?e4a1","webpack:///./src/auth/login.vue?8f9e","webpack:///./src/game/ui/selection/selection_info.vue?5d62","webpack:///./src/game/api/events.ts"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","installedChunks","push","Object","prototype","hasOwnProperty","call","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","app","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","boundingrect_1","shape_1","units_1","Text","Shape","[object Object]","position","text","font","angle","fillColour","strokeColour","uuid","super","this","type","assign","getBaseDict","points","refPoint","x","y","BoundingRect","ctx","draw","fillStyle","save","dest","g2l","translate","rotate","textAlign","getLines","map","line","fillText","restore","point","centerPoint","canvas","getBoundingBox","visibleInCanvas","resizePoint","lines","lineHeight","widths","measureText","width","Math","max","split","allLines","maxWidth","targetLine","words","word","testLine","metrics","testWidth","__webpack_exports__","_shapecontext_vue_vue_type_template_id_759e5a8a_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_shapecontext_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","__WEBPACK_IMPORT_KEY__","_node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_3__","component","options","__file","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_App_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_App_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_prompt_vue_vue_type_style_index_0_id_0602c2e6_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_prompt_vue_vue_type_style_index_0_id_0602c2e6_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","tinycolor2_1","tslib_1","__importDefault","vue_1","vue_class_component_1","vue_color_1","vue_property_decorator_1","ColorPicker","default","display","left","top","transparent","$refs","chromePicker","val","rgba","a","setPosition","$nextTick","$children","$el","focus","newColor","toRgbString","$emit","color","rect","getBoundingClientRect","right","innerWidth","bottom","innerHeight","__decorate","Prop","String","components","chrome-picker","Chrome","_game_vue_vue_type_template_id_6d744362_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_game_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","_node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_4__","socket_io_client_1","createConnection","route","socket","io","opts","query","params","creator","room","connect","location","protocol","host","autoConnect","contextMenu_vue_1","confirm_vue_1","prompt_vue_1","socket_1","store_1","utils_1","AssetManager","path","draggingSelection","folders","assetStore","files","selected","idMap","currentFolder","root","parentFolder","parent","undefined","firstSelectedFile","sel","file_hash","nextFolder","pop","clearSelected","emit","prompt","inode","target","includes","indexOf","delete","event","shiftKey","inodes","start","end","ctrlKey","file","dataTransfer","setData","dropEffect","classList","contains","add","remove","moveInode","upload","document","getElementById","click","fls","CHUNK_SIZE","uuidv4","slices","ceil","size","fr","FileReader","readAsArrayBuffer","min","onload","e","directory","totalSlices","Prompt","ConfirmDialog","AssetContextMenu","to","from","next","disconnect","_asset_node_vue_vue_type_template_id_62c91cd3_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_asset_node_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_selectcontext_vue_vue_type_style_index_0_id_44a31e42_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_selectcontext_vue_vue_type_style_index_0_id_44a31e42_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","_login_vue_vue_type_template_id_bc30fc14_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_login_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","manager_1","tds_1","triag_1","drawPolygon","polygon","colour","dl","layerManager","getLayer","lineJoin","beginPath","strokeStyle","random","moveTo","g2lx","g2ly","lineTo","closePath","stroke","drawPolygonL","xx","local","yy","I","J","drl","constrained","drawPolygonT","tds","clear","logs","T","clearRect","ei","EdgeIterator","valid","collect","fromP","edge","first","vertices","ccw","second","toP","cw","Infinity","constraints","console","log","pos","triangles","isInfinite","po","arc","PI","fill","DP","DPL","DPT","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_tool_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_tool_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default","tinycolor","__importStar","circle_1","CircularToken","Circle","center","radius","fromDict","textBaseline","xs","calcFontScale","g2lz","ys","transform","mostReadable","toHexString","visible","gameStore","IS_DM","group","source","has_img","effects","index","geom_1","rect_1","text_1","AnnotationManager","shown","origin","GlobalPoint","annotationText","annotationRect","Rect","layer","hasLayer","warn","addShape","l2g","LocalPoint","getMaxWidth","height","getMaxHeight","w","zoomFactor","h","invalidate","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_colorpicker_vue_vue_type_style_index_0_id_b4f2c0b0_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_colorpicker_vue_vue_type_style_index_0_id_b4f2c0b0_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","_menu_vue_vue_type_template_id_aaf3f05e_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_menu_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","_contextmenu_vue_vue_type_template_id_256dde9c___WEBPACK_IMPORTED_MODULE_0__","_contextmenu_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_note_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_note_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_login_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_login_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","render","_vm","_h","$createElement","_c","_self","ref","staticRenderFns","asset_1","circulartoken_1","line_1","multiline_1","polygon_1","createShapeFromDict","shape","dummy","UUIDMap","has","sh","type_","fill_colour","stroke_colour","circ","token","Line","x2","y2","line_width","multiline","MultiLine","Polygon","v","asset","img","Image","src","startsWith","URL","pathname","Asset","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_confirm_vue_vue_type_style_index_0_id_1883e207_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_confirm_vue_vue_type_style_index_0_id_1883e207_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","aura_1","trackers","auras","_owners","visionObstruction","movementObstruction","isToken","showHighlight","annotation","globalCompositeOperation","Map","_refPoint","delta","idx","entries","abs","prev","fromArray","vec","subtract","mid","multiply","normalize","skipLightUpdate","recalculate","self","obstructionIndex","visionBlockers","update","recalculateVision","forEach","au","ls","visionSources","findIndex","aura","visionSource","some","blocksMovement","movementblockers","recalculateMovement","ownedBy","ownedtokens","draw_operator","movement_obstruction","vision_obstruction","aurasToServer","owners","is_token","JSON","stringify","aurasFromServer","parse","bbox","strokeRect","topLeft","dim","loc","innerRange","g2lr","gradient","createRadialGradient","tc","addColorStop","setAlpha","lastPath","sync","oldLayer","newLayer","shapes","freeze","username","owner","oldValue","newValue","ownerIndex","addOwner","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_prompt_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_prompt_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","note","attrs","mask","on","close","$event","scopedSlots","_u","fn","staticClass","draggable","dragstart","dragStart","dragend","dragEnd","title","select","staticStyle","font-size","directives","rawName","expression","domProps","change","updateNote","input","composing","$set","style","calcHeight","removeNote","_v","_e","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_modal_vue_vue_type_style_index_0_id_12ed61ba_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_modal_vue_vue_type_style_index_0_id_12ed61ba_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","selectcontext_vue_1","tool_vue_1","utils_2","utils_3","SelectOperations","SelectTool","showContextMenu","active","Noop","deltaChanged","dragRay","Ray","Vector","selectionStartPoint","selectionHelper","mouse","getMouse","globalMouse","selectionStack","hit","selection","concat","getPointIndex","l2gz","getRef","Resize","Drag","localRefPoint","GroupSelect","endPoint","og","direction","ogDelta","calculateDelta","asDict","redraw","temporary","resize","updateCursor","body","cursor","clearSelection","topRight","botLeft","useGrid","altKey","snapToGrid","resizeToGrid","$parent","shapecontext","open","selectcontext","getPointOrientation","SelectContext","pa_1","done","visionMode","ogSelBBox","newSelBBox","offset","refine","movementBlocker","blocker","blockerBBox","found","intersectsWithInner","ray","fromPoints","invDir","inverse","dirIsNegative","intersectP","bCenter","sCenter","ux","uy","dx","dot","dy","centerTriangle","PA_CDT","movement","locate","asArray","lt","triangle","checkTriangle","skip","endpoint","neighbours","_cw","_ccw","ix","intersection","isConstrained","orientation","Sign","LEFT_TURN","ZERO","newDelta","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_note_vue_vue_type_style_index_0_id_7a3669fd_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_note_vue_vue_type_style_index_0_id_7a3669fd_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","sendClientOptions","locationOptions","panX","panY","AssetNode","showImage","keys","filter","el","sort","alphSort","__files","b","toLowerCase","children","imageSource","querySelector","setDragImage","tabindex","blur","_t","vuex_module_decorators_1","AssetStore","VuexModule","Mutation","Module","dynamic","store","rootStore","namespaced","getModule","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_contextmenu_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_contextmenu_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","contextmenu_vue_1","event_bus_1","ShapeContext","activeLayer","pageX","pageY","layers","selectable","playerEditable","moveLayer","getActiveLayer","moveShapeOrder","initiative","addInitiative","getInitiativeRepr","EventBus","ContextMenu","id","openEditDialog","_s","_l","tracker","changeValue","maxvalue","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_map_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_map_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","layer_1","GridLayer","Layer","doClear","drawGrid","gs","gridSize","gridColour","lineWidth","vuex_1","use","Store","_colorpicker_vue_vue_type_template_id_b4f2c0b0_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_colorpicker_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_login_vue_vue_type_style_index_0_id_bc30fc14_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_login_vue_vue_type_style_index_0_id_bc30fc14_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","script","componentNormalizer","settings_1","te_1","FOWLayer","isVisionLayer","preFogShapes","virtualCanvas","createElement","vCtx","getContext","removeShape","Settings","skipLightFOW","originalOperation","dctx","drawAngleLines","drawFirstLightHit","fullFOW","bb","lcenter","alm","light","find","auraLength","getUnitDistance","auraCircle","lastArcAngle","Path2D","firstPoint","angleSteps","anglePoint","cos","sin","lightRay","hitResult","BV","intersect","computeVisibility","drawImage","fowLOS","preShape","ogComposite","getFogColour","fillRect","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_load_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_load_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","settings","locations","class","rm-list-dm","_m","enter","rm","transition","settingsClick","overflow-y","overflow-x","href","assets","createNote","openNote","notes","for","checked","Array","isArray","_i","$$a","$$el","$$c","$$v","$$i","modifiers","number","step","fowOpacity","_n","$forceUpdate","unitSize","changeVisionMode","$store","state","game","lazy","visionRangeMin","visionRangeMax","readonly","invitationCode","update:color","fowColour","rulerColour","text-decoration","changeLocation","createLocation","pow","targetX","targetY","round","diff","sqrt","baserect_1","MapTool","xCount","yCount","startPoint","clone","BaseRect","_load_vue_vue_type_template_id_ff095222___WEBPACK_IMPORTED_MODULE_0__","_load_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","_node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_2__","PanTool","panStart","distance","increasePanX","increasePanY","_selectcontext_vue_vue_type_template_id_44a31e42_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_selectcontext_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","main_1","replace","toString","capitalize","charAt","toUpperCase","getHTMLFont","element","parentElement","getComputedStyle","getPropertyValue","getHTMLTextWidth","fakeElement","appendChild","partition","arr","predicate","ret","Number","fontWidth","fixedEncodeURIComponent","str","encodeURIComponent","charCodeAt","OrderedMap","values","getComponent","activeComponent","_contextMenu_vue_vue_type_template_id_606797b4___WEBPACK_IMPORTED_MODULE_0__","_contextMenu_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","edgeInfo","va","vb","ec","EdgeCirculator","indv","indexV","ri","infinite","vi","orient","COLLINEAR","collinearBetween","q","cPQ","cQR","compare","EQUAL","SMALLER","LARGER","px","py","qx","qy","rx","ry","pqx","pqy","prx","pry","det","determinant","maxX","maxY","aprX","aprY","eps","EPSILON","POSITIVE","NEGATIVE","a00","a01","a10","a11","hasInexactNegativeOrientation","sideOfOrientedCircle","perturb","sideOfOrientedCircleP","Error","p0","p1","p2","os","getOrientedSide","ON_ORIENTED_BOUNDARY","reverse","ON_NEGATIVE_SIDE","xyEqual","xySmaller","xyCompare","qpx","qpy","rpx","rpy","tpx","tpy","tqx","tqy","rqx","rqy","maxx","maxy","arpx","arpy","atqx","atqy","atpx","atpy","arqx","arqy","ON_POSITIVE_SIDE","segSegDoIntersectCrossing","p3","p4","RIGHT_TURN","segSegDoIntersectContained","pa","pb","pc","pd","getIntersectionType","intersectionType","IntersectionType","POINT","NO_INTERSECTION","getLine","doIntersect","l1","l2","info","getIntersectionTypeLine","la","lb","denom","nom1","nom2","A1","A2","B1","B2","nextUp","MAX_VALUE","MIN_VALUE","ulp","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_asset_node_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_asset_node_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_edit_dialog_vue_vue_type_style_index_0_id_7c80ae3a_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_edit_dialog_vue_vue_type_style_index_0_id_7c80ae3a_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","Modal","positioned","offsetX","offsetY","screenX","screenY","dragging","updatePosition","container","offsetWidth","offsetHeight","clientX","clientY","parseInt","Boolean","destination","setRoot","folder","child","set","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_tools_vue_vue_type_style_index_0_id_1fee50f5_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_tools_vue_vue_type_style_index_0_id_1fee50f5_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_game_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_game_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default","_points","minx","miny","lineCap","currentTarget","closePicker","z-index","updateColor","_draw_vue_vue_type_template_id_639cd890_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_draw_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","opposite","colorpicker_vue_1","modal_vue_1","CreateTokenModal","borderColour","updatePreview","Watch","color-picker","computed","mapState","NoteDialog","textarea","scrollHeight","then","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_initiative_vue_vue_type_style_index_0_id_ccaf03d6_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_initiative_vue_vue_type_style_index_0_id_ccaf03d6_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","DrawTool","brushHelper","ruler","shapeSelect","modeSelect","modes","brushSize","helperSize","onModeChange","fowLayer","normalLayer","setupBrush","_vertices","pushBrushBack","lastPoint","finaliseShape","axios_1","vue_router_1","manager_vue_1","login_vue_1","logout_1","load_vue_1","main_vue_1","game_vue_1","invitation_1","router","base","routes","redirect","meta","auth","template","beforeEach","coreStore","initialized","matched","record","authenticated","response","setAuthenticated","setUsername","setInitialized","catch","error","Tool","detailRight","detailArrow","$on","tool","onMouseDown","onMouseUp","onMouseMove","onContextMenu","onDeselect","onSelect","_tools_vue_vue_type_template_id_1fee50f5_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_tools_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_tool_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_tool_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","topleft","CDT","TDS","insert","insertConstraintV","stack","markConstraint","intersectionInfo","findIntersectedFaces","triangulateHole","intersectedFaces","listAB","listBA","edges","triangulateHole2","propagatingFlipE","triangulateHalfHole","fl","deleteTriangle","conflictBoundaries","iN","iT","iC","current","n1","n2","ind","ind1","ind2","mirrorIndex","v0","v1","v2","newlf","createTriangle","vaa","vbb","aa","lfc","LineFaceCirculator","lf","rf","indexT","unshift","previousFace","currentVertex","i1","i2","vcc","vdd","pi","BoundingBox","dilate","overlaps","removeConstrainedEdge","dimension","indf","locateInfo","iLocate","insertb","li","flipAround","propagatingFlip","depth","isFlipable","maxDepth","ni","flip","e1","e2","uid","eni","eI","edgeSet","lessEdge","indn","ed","tt","ii","u","t1","t2","t3","i3","t4","i4","insertInConstrainedEdge","LocateType","EDGE","insertc","updateConstraintsIncident","VERTEX","clearConstraintsIncident","updateConstraintsOpposite","c1","c2","fc","FaceCirculator","cwi","ccwi","insertFirst","finiteVertex","insertSecond","OUTSIDE_AFFINE_HULL","insertOutsideAffineHull","OUTSIDE_CONVEX_HULL","insertOutsideConvexHull","insertInEdge","FACE","insertInFace","insertDimUp","_infinite","conform","finiteEdge","COUNTERCLOCKWISE","insertOutsideConvexHull2","ccwlist","cwlist","th","marchLocate1D","marchLocate2D","ff","iv","pqt","Triangle","leftFirst","o0","o1","o2","sum","nTurns","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_draw_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_draw_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","LayerManager","interval","drawLoop","requestAnimationFrame","addLayer","selectedLayer","globalAlpha","selectLayer","getSelection","image","getData","l2gx","l2gy","lm","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_initiative_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_initiative_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","_createtoken_modal_vue_vue_type_template_id_73816298_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_createtoken_modal_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","BoundingNode","nPrimitives","LeafNode","firstPrimOffset","InteriorNode","union","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_createtoken_modal_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_createtoken_modal_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","onKeyUp","HTMLInputElement","HTMLTextAreaElement","selectTool","onKeyDown","keyCode","hasSelection","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_manager_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_manager_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_shapecontext_vue_vue_type_style_index_0_id_759e5a8a_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_shapecontext_vue_vue_type_style_index_0_id_759e5a8a_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","shapecontext_vue_1","createtoken_modal_vue_1","draw_vue_1","map_vue_1","pan_1","select_vue_1","manager_2","ruler_1","Tools","currentTool","tools","dmTools","currentToolComponent","tagName","targetTool","button","buttons","annotations","gameManager","annotationManager","setActiveText","select-tool","pan-tool","draw-tool","ruler-tool","RulerTool","map-tool","shape-menu","createtoken-dialog","watch","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_selection_info_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_selection_info_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_modal_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_modal_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_contextmenu_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_contextmenu_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_selection_info_vue_vue_type_style_index_0_id_32cec914_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_selection_info_vue_vue_type_style_index_0_id_32cec914_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","question","answer","resolve","reject","Promise","stopPropagation","toggle","mouseover","hash","mouseout","message","refInFor","tool-selected","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_menu_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_menu_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","botRight","vector","other","xmin","xmax","ymin","ymax","botright","dirIsNeg","txmin","getDiagCorner","txmax","tymin","tymax","tMax","coreVisible","owned","joined","submit","preventDefault","createRoom","placeholder","newSessionName","tag","getPointDistance","Point","scale","atan2","maxT","vue_slider_component_1","lodash_1","initiative_vue_1","menu_vue_1","note_vue_1","selection_info_vue_1","tools_vue_1","keyboard_1","mouse_1","Game","ready","manager","updateZoom","newZoomValue","zoomLocation","addEventListener","setWidth","setHeight","throttle","scrollZoom","mousedown","mouseup","mousemove","mouseleave","contextmenu","confirm","dropAsset","tool-bar","selection-info","prompt-dialog","confirm-dialog","menu-bar","initiative-dialog","zoom-slider","note-dialog","obj","z","l2gr","asset_node_vue_1","MenuBar","setUseGrid","setFullFOW","setFOWOpacity","setLineOfSight","setUnitSize","setGridSize","setGridColour","setFOWColour","setRulerColour","setVisionRangeMin","setVisionRangeMax","nextElementSibling","newNote","setVisionMode","asset-node","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_colorpicker_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_colorpicker_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","bringPlayers","createToken","showInitiative","_INFINITE_VERTEX","LineFaceState","newPoint","INFINITE","_counter","vertex","A","sign","Vertex","_point","_ri","Edge","_es","associatedEdge","increment","tr","dir","UNDEFINED","_tr","ic","vt","vr","pqr","VERTEX_VERTEX","VERTEX_EDGE","EDGE_VERTEX","EDGE_EDGE","createVertex","addVertex","infiniteVertex","n0","trig","t0","i0","setAdjacency","deleteList","copy","neighbour","lfit","reorient","vCW","vCCW","tri","bl","bli","vv","g","x1","y1","dist","node_1","BoundingVolume","totalNodes","buildData","orderedPrims","nodes","recursiveBuild","compact","node","createLeaf","centroidBbox","getMaxExtent","pMid","partitionedData","flattened","stopOnFirstHit","tMin","todoOffset","nodeNum","todo","secondChildOffset","flatten","myOffset","secondOffset","primitivesOffset","annotation_1","GameManager","selectedTool","oldShape","redrawInitiative","checkVisionSources","setMovementBlock","setIsToken","localPos","fakeSetData","disabled","updateOrder","model","callback","actor","flex-direction","align-items","initiative-selected","currentActor","mouseenter","toggleHighlight","notAllowed","owns","syncInitiative","opacity","createEffect","getDefaultEffect","toggleOption","removeInitiative","effect","updateEffect","turns","roundCounter","setRound","setTurn","nextTurn","LoadComponent","getLayers","background-color","setLayer","moveToBack","moveToFront","getInitiativeWord","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_game_vue_vue_type_style_index_1_id_6d744362_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_game_vue_vue_type_style_index_1_id_6d744362_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","registerHooks","Dashboard","vm","err","post","$router","_confirm_vue_vue_type_template_id_1883e207_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_confirm_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_shapecontext_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_shapecontext_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","rename","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_draw_vue_vue_type_style_index_0_id_639cd890_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_draw_vue_vue_type_style_index_0_id_639cd890_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_manager_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_manager_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","grid-column","updateShape","grid-column-start","setToken","setVisionBlocker","setMovementBlocker","updateOwner","removeOwner","removeTracker","updateAuraColour","updateAuraVisionSource","removeAura","updateAnnotation","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_main_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_main_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_selectcontext_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_selectcontext_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","FOWPlayersLayer","skipPlayerFOW","drctx","maxLength","tokenId","_a","selectionColor","selectionWidth","invalidateLight","serverShape","lsI","lbI","mbI","anI","annotationIndex","ownedIndex","ogOP","drawAuras","destinationIndex","oldIdx","deltaY","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_asset_node_vue_vue_type_style_index_0_id_62c91cd3_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_asset_node_vue_vue_type_style_index_0_id_62c91cd3_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_menu_vue_vue_type_style_index_0_id_aaf3f05e_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_menu_vue_vue_type_style_index_0_id_aaf3f05e_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","topright","botleft","mx","my","_select_vue_vue_type_template_id_cad11dd2___WEBPACK_IMPORTED_MODULE_0__","_select_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","_main_vue_vue_type_template_id_61eb1455_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_main_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_createtoken_modal_vue_vue_type_style_index_0_id_73816298_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_createtoken_modal_vue_vue_type_style_index_0_id_73816298_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","dragover","moveDrag","drop","stopDrag","multiple","hidden","createDirectory","prepareUpload","dblclick","changeDirectory","dragleave","leaveDrag","inode-selected","cm","startDrag","createtokendialog","Logout","CoreStore","init","App_vue_1","router_1","config","productionTip","devtools","performance","$mount","props","Initiative","code","sessionUrl","_prompt_vue_vue_type_template_id_0602c2e6_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_prompt_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","draw_1","drawt","drawTEContour","Q","rawOutput","expandEdge","fh","nfh","nIndex","rIndex","lIndex","nvh","rvh","lvh","re","le","ro","lo","raySegIntersection","CLOCKWISE","denominator","ua","--detailRight","--detailArrow","_edit_dialog_vue_vue_type_template_id_7c80ae3a_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_edit_dialog_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","tempFill","Login","password","$route","statusText","span","modal-mask","dialog-mask","dragOver","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_game_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_game_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","diffsign","xdiff","ydiff","label","xmid","ymid","_modal_vue_vue_type_template_id_12ed61ba_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_modal_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","cdt_1","triangulate","partial","cdt","insertConstraint","vision","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_main_vue_vue_type_style_index_0_id_61eb1455_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_main_vue_vue_type_style_index_0_id_61eb1455_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","EditDialog","$off","addEmpty","hadAnnotation","an","layer-selected","dot-width","dot-height","tooltip-dir","tooltip","formatter","toFixed","slider-style","border-radius","bg-style","box-shadow","process-style","yes","no","ok","_map_vue_vue_type_template_id_2104f147___WEBPACK_IMPORTED_MODULE_0__","_map_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","deny","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_select_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_select_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","option-selected","max-width","_manager_vue_vue_type_template_id_5b0def98___WEBPACK_IMPORTED_MODULE_0__","_manager_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_tools_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_tools_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","_tool_vue_vue_type_template_id_1e034b42___WEBPACK_IMPORTED_MODULE_0__","_tool_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","keyup","_k","vuedraggable_1","getActor","actorId","order","show","option","effectIndex","syncEffect","_selection_info_vue_vue_type_template_id_32cec914_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_selection_info_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","bvh_1","GameStore","selectedLayerIndex","boardInitialized","roomName","roomCreator","locationName","vision_mode","isDM","oldLoc","newLoc","getGridLayer","increase","unit_size","gridLayer","use_grid","vision_min_range","vision_max_range","full_fow","fow_opacity","fow_los","actualNote","context","commit","Action","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_confirm_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_confirm_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","vision_source","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_contextMenu_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_contextMenu_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","_note_vue_vue_type_template_id_7a3669fd_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_note_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","_initiative_vue_vue_type_template_id_ccaf03d6_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_initiative_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","fow_1","fowplayers_1","grid_1","createLayer","layerInfo","zIndex","player_editable","setShapes","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_edit_dialog_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_edit_dialog_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","focusin","focusout","login","autocomplete","required","visibility","register","edit_dialog_vue_1","SelectionInfo","editDialog","ogValue","isNaN","edit-dialog","setRoomName","setRoomCreator","setInvitationCode","setDM","grid_colour","fow_colour","ruler_colour","setPanX","pan_x","setPanY","pan_y","setZoomFactor","zoom_factor","active_layer","setLocationName","setCenterPosition","setAssets","locationInfo","setLocations","innerHTML","resetLayerInfo","reset","setBoardInitialized","realShape"],"mappings":"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","file":"static/js/app-legacy.f228bc3b.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import { GlobalPoint, LocalPoint } from \"@/game/geom\";\nimport { BoundingRect } from \"@/game/shapes/boundingrect\";\nimport { Shape } from \"@/game/shapes/shape\";\nimport { g2l } from \"@/game/units\";\n\nexport class Text extends Shape {\n    type = \"text\";\n    text: string;\n    font: string;\n    angle: number;\n    constructor(\n        position: GlobalPoint,\n        text: string,\n        font: string,\n        angle?: number,\n        fillColour?: string,\n        strokeColour?: string,\n        uuid?: string,\n    ) {\n        super(position, fillColour, strokeColour, uuid);\n        this.text = text;\n        this.font = font;\n        this.angle = angle || 0;\n    }\n    asDict() {\n        return Object.assign(this.getBaseDict(), {\n            text: this.text,\n            font: this.font,\n            angle: this.angle,\n        });\n    }\n    get points() {\n        return [[this.refPoint.x, this.refPoint.y]];\n    }\n    getBoundingBox(): BoundingRect {\n        return new BoundingRect(this.refPoint, 5, 5); // TODO: fix this bounding box\n    }\n    draw(ctx: CanvasRenderingContext2D) {\n        super.draw(ctx);\n        ctx.font = this.font;\n        ctx.fillStyle = this.fillColour;\n        ctx.save();\n        const dest = g2l(this.refPoint);\n        ctx.translate(dest.x, dest.y);\n        ctx.rotate(this.angle);\n        ctx.textAlign = \"center\";\n        this.getLines(ctx).map(line => ctx.fillText(line.text, line.x, line.y));\n        ctx.restore();\n    }\n    contains(point: GlobalPoint): boolean {\n        return false; // TODO\n    }\n\n    center(): GlobalPoint;\n    center(centerPoint: GlobalPoint): void;\n    center(centerPoint?: GlobalPoint): GlobalPoint | void {} // TODO\n    visibleInCanvas(canvas: HTMLCanvasElement): boolean {\n        return this.getBoundingBox().visibleInCanvas(canvas);\n    } // TODO\n    snapToGrid(): void {}\n    resizeToGrid(): void {}\n    resize(resizePoint: number, point: LocalPoint): void {}\n\n    getMaxHeight(ctx: CanvasRenderingContext2D) {\n        const lines = this.getLines(ctx);\n        const lineHeight = 30;\n        return lineHeight * lines.length;\n    }\n\n    getMaxWidth(ctx: CanvasRenderingContext2D) {\n        const lines = this.getLines(ctx);\n        const widths = lines.map(line => ctx.measureText(line.text).width);\n        return Math.max(...widths);\n    }\n\n    private getLines(ctx: CanvasRenderingContext2D) {\n        const lines = this.text.split(\"\\n\");\n        const allLines: { text: string; x: number; y: number }[] = [];\n        const maxWidth = ctx.canvas.width;\n        const lineHeight = 30;\n        const x = 0; // this.refPoint.x;\n        let y = 0; // this.refPoint.y;\n\n        for (const line of lines) {\n            let targetLine = \"\";\n            const words = line.split(\" \");\n            for (const word of words) {\n                const testLine = targetLine + word + \" \";\n                const metrics = ctx.measureText(testLine);\n                const testWidth = metrics.width;\n                if (testWidth > maxWidth) {\n                    ctx.fillText(targetLine, x, y);\n                    allLines.push({ text: targetLine, x, y });\n                    targetLine = word + \" \";\n                    y += lineHeight;\n                } else {\n                    targetLine = testLine;\n                }\n            }\n            allLines.push({ text: targetLine, x, y });\n            y += lineHeight;\n        }\n        return allLines;\n    }\n}\n","import { render, staticRenderFns } from \"./shapecontext.vue?vue&type=template&id=759e5a8a&scoped=true&\"\nimport script from \"./shapecontext.vue?vue&type=script&lang=ts&\"\nexport * from \"./shapecontext.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./shapecontext.vue?vue&type=style&index=0&id=759e5a8a&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"759e5a8a\",\n  null\n  \n)\n\ncomponent.options.__file = \"shapecontext.vue\"\nexport default component.exports","import mod from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./prompt.vue?vue&type=style&index=0&id=0602c2e6&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./prompt.vue?vue&type=style&index=0&id=0602c2e6&scoped=true&lang=css&\"","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport tinycolor from \"tinycolor2\";\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\n\nimport { Chrome } from \"vue-color\";\nimport { Prop } from \"vue-property-decorator\";\n\n@Component<ColorPicker>({\n    components: {\n        \"chrome-picker\": Chrome,\n    },\n})\nexport default class ColorPicker extends Vue {\n    @Prop(String) color!: string;\n\n    display = false;\n    left = 0;\n    top = 0;\n    transparent = false;\n\n    mounted() {\n        this.transparent = (<any>this.$refs.chromePicker).val.rgba.a === 0;\n        this.setPosition();\n    }\n\n    open() {\n        if (this.display) return; // click on the picker itself\n        this.setPosition();\n        this.display = true;\n        this.$nextTick(() => this.$children[0].$el.focus());\n    }\n    updateColor(value: { rgba: { r: number; g: number; b: number; a: number } }) {\n        this.transparent = value.rgba.a === 0;\n        const newColor = tinycolor(value.rgba).toRgbString();\n        this.$emit(\"update:color\", newColor);\n        this.$emit(\"input\", newColor);\n    }\n    closePicker() {\n        this.display = false;\n        this.$emit(\"change\", this.color);\n    }\n    setPosition() {\n        const rect = this.$el.getBoundingClientRect();\n        // 224 is the width of the picker, 242 the height\n        if (rect.right + 224 > window.innerWidth) this.left = rect.left - 224;\n        else this.left = rect.right;\n        if (rect.bottom + 242 > window.innerHeight) this.top = rect.top - 242;\n        else this.top = rect.bottom;\n    }\n}\n","import { render, staticRenderFns } from \"./game.vue?vue&type=template&id=6d744362&scoped=true&\"\nimport script from \"./game.vue?vue&type=script&lang=ts&\"\nexport * from \"./game.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./game.vue?vue&type=style&index=0&lang=css&\"\nimport style1 from \"./game.vue?vue&type=style&index=1&id=6d744362&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6d744362\",\n  null\n  \n)\n\ncomponent.options.__file = \"game.vue\"\nexport default component.exports","import io from \"socket.io-client\";\nimport { Route } from \"vue-router\";\n\nexport const socket = io(location.protocol + \"//\" + location.host + \"/planarally\", { autoConnect: false });\n\nexport function createConnection(route: Route) {\n    socket.io.opts.query = `user=${route.params.creator}&room=${route.params.room}`;\n    socket.connect();\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\n\nimport AssetContextMenu from \"@/assetManager/contextMenu.vue\";\nimport ConfirmDialog from \"@/core/components/modals/confirm.vue\";\nimport Prompt from \"@/core/components/modals/prompt.vue\";\n\nimport { socket } from \"@/assetManager/socket\";\nimport { assetStore } from \"@/assetManager/store\";\nimport { Asset } from \"@/core/comm/types\";\nimport { uuidv4 } from \"@/core/utils\";\n\n@Component({\n    components: {\n        Prompt,\n        ConfirmDialog,\n        AssetContextMenu,\n    },\n    beforeRouteEnter(to, from, next) {\n        socket.connect();\n        next();\n    },\n    beforeRouteLeave(to, from, next) {\n        socket.disconnect();\n        next();\n    },\n})\nexport default class AssetManager extends Vue {\n    path: number[] = [];\n    draggingSelection = false;\n\n    get folders(): number[] {\n        return assetStore.folders;\n    }\n\n    get files(): number[] {\n        return assetStore.files;\n    }\n\n    get selected(): number[] {\n        return assetStore.selected;\n    }\n\n    get idMap() {\n        return assetStore.idMap;\n    }\n\n    get currentFolder(): number {\n        if (this.path.length) return this.path[this.path.length - 1];\n        return assetStore.root;\n    }\n    get parentFolder(): number {\n        let parent = this.path[this.path.length - 2];\n        if (parent === undefined) parent = assetStore.root;\n        return parent;\n    }\n    get firstSelectedFile(): Asset | null {\n        for (const sel of assetStore.selected) {\n            if (assetStore.idMap.get(sel)!.file_hash) {\n                return assetStore.idMap.get(sel)!;\n            }\n        }\n        return null;\n    }\n    changeDirectory(nextFolder: number) {\n        if (nextFolder < 0) this.path.pop();\n        else this.path.push(nextFolder);\n        assetStore.clearSelected();\n        socket.emit(\"Folder.Get\", this.currentFolder);\n    }\n    createDirectory() {\n        const name = window.prompt(\"New folder name\");\n        if (name !== null) {\n            socket.emit(\"Folder.Create\", { name, parent: this.currentFolder });\n        }\n    }\n    moveInode(inode: number, target: number) {\n        if (assetStore.files.includes(inode)) assetStore.files.splice(assetStore.files.indexOf(inode), 1);\n        else assetStore.folders.splice(assetStore.folders.indexOf(inode), 1);\n        assetStore.idMap.delete(inode);\n        socket.emit(\"Inode.Move\", { inode, target });\n    }\n    select(event: MouseEvent, inode: number) {\n        if (event.shiftKey && assetStore.selected.length > 0) {\n            const inodes = [...assetStore.files, ...assetStore.folders];\n            const start = inodes.indexOf(assetStore.selected[assetStore.selected.length - 1]);\n            const end = inodes.indexOf(inode);\n            for (let i = start; i !== end; start < end ? i++ : i--) {\n                if (i === start) continue;\n                assetStore.selected.push(inodes[i]);\n            }\n            assetStore.selected.push(inodes[end]);\n        } else {\n            if (!event.ctrlKey) {\n                assetStore.clearSelected();\n            }\n            assetStore.selected.push(inode);\n        }\n    }\n    startDrag(event: DragEvent, file: number) {\n        if (event.dataTransfer === null) return;\n        event.dataTransfer.setData(\"Hack\", \"ittyHack\");\n        event.dataTransfer.dropEffect = \"move\";\n        if (!assetStore.selected.includes(file)) assetStore.selected.push(file);\n        this.draggingSelection = true;\n    }\n    moveDrag(event: DragEvent) {\n        if ((<HTMLElement>event.target).classList.contains(\"folder\"))\n            (<HTMLElement>event.target).classList.add(\"inode-selected\");\n    }\n    leaveDrag(event: DragEvent) {\n        if ((<HTMLElement>event.target).classList.contains(\"folder\"))\n            (<HTMLElement>event.target).classList.remove(\"inode-selected\");\n    }\n    stopDrag(event: DragEvent, target: number) {\n        (<HTMLElement>event.target).classList.remove(\"inode-selected\");\n        if (this.draggingSelection) {\n            if (\n                (target === assetStore.root || assetStore.folders.includes(target)) &&\n                !assetStore.selected.includes(target)\n            ) {\n                for (const inode of assetStore.selected) {\n                    this.moveInode(inode, target);\n                }\n            }\n            assetStore.clearSelected();\n        } else if (event.dataTransfer && event.dataTransfer.files.length > 0) {\n            this.upload(event.dataTransfer.files, target);\n        }\n        this.draggingSelection = false;\n    }\n    prepareUpload() {\n        document.getElementById(\"files\")!.click();\n    }\n    upload(fls?: FileList, target?: number) {\n        const files = (<HTMLInputElement>document.getElementById(\"files\")!).files;\n        if (fls === undefined) {\n            if (files) fls = files;\n            else return;\n        }\n        if (target === undefined) target = this.currentFolder;\n        const CHUNK_SIZE = 100000;\n        for (const file of fls) {\n            const uuid = uuidv4();\n            const slices = Math.ceil(file.size / CHUNK_SIZE);\n            for (let slice = 0; slice < slices; slice++) {\n                const fr = new FileReader();\n                fr.readAsArrayBuffer(\n                    file.slice(\n                        slice * CHUNK_SIZE,\n                        slice * CHUNK_SIZE + Math.min(CHUNK_SIZE, file.size - slice * CHUNK_SIZE),\n                    ),\n                );\n                fr.onload = e => {\n                    socket.emit(\"Asset.Upload\", {\n                        name: file.name,\n                        directory: target,\n                        data: fr.result,\n                        slice,\n                        totalSlices: slices,\n                        uuid,\n                    });\n                };\n            }\n        }\n    }\n}\n","import { render, staticRenderFns } from \"./asset_node.vue?vue&type=template&id=62c91cd3&scoped=true&\"\nimport script from \"./asset_node.vue?vue&type=script&lang=ts&\"\nexport * from \"./asset_node.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./asset_node.vue?vue&type=style&index=0&id=62c91cd3&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"62c91cd3\",\n  null\n  \n)\n\ncomponent.options.__file = \"asset_node.vue\"\nexport default component.exports","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./selectcontext.vue?vue&type=style&index=0&id=44a31e42&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./selectcontext.vue?vue&type=style&index=0&id=44a31e42&scoped=true&lang=css&\"","import { render, staticRenderFns } from \"./login.vue?vue&type=template&id=bc30fc14&scoped=true&\"\nimport script from \"./login.vue?vue&type=script&lang=ts&\"\nexport * from \"./login.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./login.vue?vue&type=style&index=0&id=bc30fc14&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"bc30fc14\",\n  null\n  \n)\n\ncomponent.options.__file = \"login.vue\"\nexport default component.exports","import { layerManager } from \"@/game/layers/manager\";\nimport { g2lx, g2ly } from \"@/game/units\";\nimport { EdgeIterator, TDS } from \"./tds\";\nimport { ccw, cw } from \"./triag\";\n\nexport function drawPolygon(polygon: number[][], colour?: string) {\n    const dl = layerManager.getLayer(\"draw\");\n    if (dl === undefined) return;\n    const ctx = dl.ctx;\n    ctx.lineJoin = \"round\";\n    // ctx.clearRect(0, 0, window.innerWidth, window.innerHeight);\n    ctx.lineJoin = \"round\";\n    ctx.beginPath();\n    ctx.strokeStyle =\n        colour === undefined ? `rgb(${Math.random() * 255}, ${Math.random() * 255}, ${Math.random() * 255})` : colour;\n    ctx.moveTo(g2lx(polygon[0][0]), g2ly(polygon[0][1]));\n    for (const point of polygon) {\n        ctx.lineTo(g2lx(point[0]), g2ly(point[1]));\n    }\n    ctx.closePath();\n    ctx.stroke();\n}\n\nexport function drawPolygonL(polygon: number[][], colour?: string) {\n    const dl = layerManager.getLayer(\"draw\");\n    if (dl === undefined) return;\n    const ctx = dl.ctx;\n    ctx.lineJoin = \"round\";\n    // ctx.clearRect(0, 0, window.innerWidth, window.innerHeight);\n    ctx.lineJoin = \"round\";\n    ctx.beginPath();\n    ctx.strokeStyle =\n        colour === undefined ? `rgb(${Math.random() * 255}, ${Math.random() * 255}, ${Math.random() * 255})` : colour;\n    ctx.moveTo(polygon[0][0], polygon[0][1]);\n    for (const point of polygon) {\n        ctx.lineTo(point[0], point[1]);\n    }\n    ctx.closePath();\n    ctx.stroke();\n}\n\nfunction x(xx: number, local: boolean) {\n    if (local) return xx;\n    else return g2lx(xx);\n}\n\nfunction y(yy: number, local: boolean) {\n    if (local) return yy;\n    else return g2ly(yy);\n}\n\nlet I = 0;\nlet J = 0;\n\nfunction drl(ctx: CanvasRenderingContext2D, from: number[], to: number[], constrained: boolean, local: boolean) {\n    // J++;\n    // if (constrained) {\n    //     I++;\n    //     console.log(\"*\", from, to);\n    // } else {\n    //     console.log(\" \", from, to);\n    // }\n    ctx.beginPath();\n    ctx.strokeStyle = constrained ? \"rgba(255, 0, 0, 0.30)\" : \"rgba(0, 0, 0, 0.30)\";\n    ctx.moveTo(x(from[0], local), y(from[1], local));\n    ctx.lineTo(x(to[0], local), y(to[1], local));\n    ctx.closePath();\n    ctx.stroke();\n}\n\nfunction drawPolygonT(tds: TDS, local = true, clear = true, logs: 0 | 1 | 2 = 0) {\n    I = 0;\n    J = 0;\n    let T = 0;\n    const dl = layerManager.getLayer(\"draw\");\n    if (dl === undefined) return;\n    const ctx = dl.ctx;\n    if (clear) ctx.clearRect(0, 0, 2000, 1000);\n    ctx.lineJoin = \"round\";\n    // ctx.clearRect(0, 0, window.innerWidth, window.innerHeight);\n    ctx.lineJoin = \"round\";\n    const ei = new EdgeIterator(tds);\n    while (ei.valid) {\n        ei.next();\n        ei.collect();\n    }\n    ei.collect();\n    do {\n        const fromP = ei.edge.first!.vertices[ccw(ei.edge.second)]!.point!;\n        const toP = ei.edge.first!.vertices[cw(ei.edge.second)]!.point!;\n        if (logs > 0) {\n            if (fromP[0] === -Infinity || toP[0] === -Infinity) {\n                ei.next();\n                continue;\n            }\n            J++;\n            if (ei.edge.first!.constraints[ei.edge.second]) {\n                I++;\n                if (logs === 2) console.log(`Edge: (*) ${fromP} > ${toP}`);\n            } else if (logs === 2) console.log(`Edge: ${fromP} > ${toP}`);\n        }\n        do {\n            ei.next();\n            ei.collect();\n        } while (ei.valid);\n    } while (ei.pos !== null);\n    for (const t of tds.triangles) {\n        if (t.isInfinite()) continue;\n        T++;\n        const po = [];\n        ctx.fillStyle = \"red\";\n        if (t.vertices[0] !== undefined) {\n            po.push(t.vertices[0]!.point);\n            ctx.beginPath();\n            ctx.arc(x(t.vertices[0]!.point![0], local), y(t.vertices[0]!.point![1], local), 5, 0, 2 * Math.PI);\n            ctx.closePath();\n            ctx.fill();\n        }\n        if (t.vertices[1] !== undefined) {\n            po.push(t.vertices[1]!.point);\n            ctx.arc(x(t.vertices[1]!.point![0], local), y(t.vertices[1]!.point![1], local), 5, 0, 2 * Math.PI);\n            ctx.closePath();\n            ctx.fill();\n        }\n        if (t.vertices[2] !== undefined) {\n            po.push(t.vertices[2]!.point);\n            ctx.arc(x(t.vertices[2]!.point![0], local), y(t.vertices[2]!.point![1], local), 5, 0, 2 * Math.PI);\n            ctx.closePath();\n            ctx.fill();\n        }\n        if (logs === 2) console.log(\"[T] \", ...po, t.constraints);\n\n        ctx.moveTo(x(t.vertices[0]!.point![0], local), y(t.vertices[0]!.point![1], local));\n        if (t.vertices[0] !== undefined && t.vertices[1] !== undefined)\n            drl(ctx, t.vertices[0]!.point!, t.vertices[1]!.point!, t.constraints[2], local);\n        if (t.vertices[1] !== undefined && t.vertices[2] !== undefined)\n            drl(ctx, t.vertices[1]!.point!, t.vertices[2]!.point!, t.constraints[0], local);\n        if (t.vertices[2] !== undefined && t.vertices[0] !== undefined)\n            drl(ctx, t.vertices[2]!.point!, t.vertices[0]!.point!, t.constraints[1], local);\n    }\n    if (logs > 0) {\n        console.log(`Edges: ${I}/${J}`);\n        console.log(`Faces: ${T}`);\n    }\n}\n\n(<any>window).DP = drawPolygon;\n(<any>window).DPL = drawPolygonL;\n(<any>window).DPT = drawPolygonT;\n","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tool.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tool.vue?vue&type=style&index=0&lang=css&\"","import * as tinycolor from \"tinycolor2\";\n\nimport { calcFontScale } from \"@/core/utils\";\nimport { InitiativeData } from \"@/game/comm/types/general\";\nimport { ServerCircularToken } from \"@/game/comm/types/shapes\";\nimport { GlobalPoint } from \"@/game/geom\";\nimport { Circle } from \"@/game/shapes/circle\";\nimport { gameStore } from \"@/game/store\";\nimport { g2l, g2lz } from \"@/game/units\";\n\nexport class CircularToken extends Circle {\n    type = \"circulartoken\";\n    text: string;\n    font: string;\n    constructor(\n        center: GlobalPoint,\n        r: number,\n        text: string,\n        font: string,\n        fillColour?: string,\n        strokeColour?: string,\n        uuid?: string,\n    ) {\n        super(center, r, fillColour, strokeColour, uuid);\n        this.text = text;\n        this.font = font;\n    }\n    asDict(): ServerCircularToken {\n        return Object.assign(this.getBaseDict(), {\n            radius: this.r,\n            text: this.text,\n            font: this.font,\n        });\n    }\n    fromDict(data: ServerCircularToken) {\n        super.fromDict(data);\n        this.r = data.radius;\n        this.text = data.text;\n        this.font = data.font;\n    }\n    draw(ctx: CanvasRenderingContext2D) {\n        super.draw(ctx);\n        ctx.font = this.font;\n        ctx.save();\n        const dest = g2l(this.center());\n        ctx.textAlign = \"center\";\n        ctx.textBaseline = \"middle\";\n        const xs = calcFontScale(ctx, this.text, g2lz(this.r), g2lz(this.r));\n        const ys = 0;\n        ctx.transform(xs, ys, -ys, xs, dest.x, dest.y);\n        ctx.fillStyle = tinycolor.mostReadable(this.fillColour, [\"#000\", \"#fff\"]).toHexString();\n        ctx.fillText(this.text, 0, 0);\n        ctx.restore();\n    }\n    getInitiativeRepr(): InitiativeData {\n        return {\n            uuid: this.uuid,\n            visible: !gameStore.IS_DM,\n            group: false,\n            source: this.name === \"\" || this.name === \"Unknown shape\" ? this.text : this.name,\n            has_img: false,\n            effects: [],\n            index: Infinity,\n        };\n    }\n}\n","import { GlobalPoint, LocalPoint } from \"@/game/geom\";\nimport { Layer } from \"@/game/layers/layer\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { Rect } from \"@/game/shapes/rect\";\nimport { Text } from \"@/game/shapes/text\";\nimport { gameStore } from \"@/game/store\";\nimport { l2g } from \"@/game/units\";\n\nexport class AnnotationManager {\n    annotationText: Text;\n    annotationRect: Rect;\n    layer: Layer | undefined;\n    shown: boolean = false;\n\n    constructor() {\n        const origin = new GlobalPoint(0, 0);\n        this.annotationText = new Text(origin, \"\", \"bold 20px serif\", 0, \"rgba(230, 230, 230, 1)\");\n        this.annotationRect = new Rect(origin, 0, 0, \"rgba(0, 0, 0, 0.6)\");\n    }\n\n    setActiveText(text: string) {\n        if (this.layer === undefined) {\n            if (layerManager.hasLayer(\"draw\")) {\n                this.layer = layerManager.getLayer(\"draw\")!;\n                this.layer.addShape(this.annotationRect, false);\n                this.layer.addShape(this.annotationText, false);\n            } else {\n                console.warn(\"There is no draw layer to draw annotations on!\");\n                return;\n            }\n        }\n        this.shown = text !== \"\";\n        this.annotationText.refPoint = l2g(new LocalPoint(this.layer.canvas.width / 2, 50));\n        this.annotationText.text = text;\n        const width = this.shown ? this.annotationText.getMaxWidth(this.layer.ctx) + 10 : 0;\n        const height = this.shown ? this.annotationText.getMaxHeight(this.layer.ctx) + 10 : 0;\n        this.annotationRect.refPoint = l2g(new LocalPoint(this.layer.canvas.width / 2 - width / 2, 30));\n        this.annotationRect.w = width / gameStore.zoomFactor;\n        this.annotationRect.h = height / gameStore.zoomFactor;\n        this.layer.invalidate(true);\n    }\n}\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./colorpicker.vue?vue&type=style&index=0&id=b4f2c0b0&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./colorpicker.vue?vue&type=style&index=0&id=b4f2c0b0&scoped=true&lang=css&\"","import { render, staticRenderFns } from \"./menu.vue?vue&type=template&id=aaf3f05e&scoped=true&\"\nimport script from \"./menu.vue?vue&type=script&lang=ts&\"\nexport * from \"./menu.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./menu.vue?vue&type=style&index=0&id=aaf3f05e&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"aaf3f05e\",\n  null\n  \n)\n\ncomponent.options.__file = \"menu.vue\"\nexport default component.exports","import { render, staticRenderFns } from \"./contextmenu.vue?vue&type=template&id=256dde9c&\"\nimport script from \"./contextmenu.vue?vue&type=script&lang=ts&\"\nexport * from \"./contextmenu.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./contextmenu.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"contextmenu.vue\"\nexport default component.exports","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./note.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./note.vue?vue&type=script&lang=ts&\"","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--12-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./login.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--12-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./login.vue?vue&type=script&lang=ts&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('SelectContext',{ref:\"selectcontext\"})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"74f43d04-vue-loader-template\\\"}!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./select.vue?vue&type=template&id=cad11dd2&\"","import {\n    ServerAsset,\n    ServerCircle,\n    ServerCircularToken,\n    ServerLine,\n    ServerMultiLine,\n    ServerPolygon,\n    ServerRect,\n    ServerShape,\n    ServerText,\n} from \"@/game/comm/types/shapes\";\nimport { GlobalPoint } from \"@/game/geom\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { Asset } from \"@/game/shapes/asset\";\nimport { Circle } from \"@/game/shapes/circle\";\nimport { CircularToken } from \"@/game/shapes/circulartoken\";\nimport { Line } from \"@/game/shapes/line\";\nimport { MultiLine } from \"@/game/shapes/multiline\";\nimport { Rect } from \"@/game/shapes/rect\";\nimport { Shape } from \"@/game/shapes/shape\";\nimport { Text } from \"@/game/shapes/text\";\nimport { Polygon } from \"./polygon\";\n\nexport function createShapeFromDict(shape: ServerShape, dummy?: boolean) {\n    // TODO: is this dummy stuff actually needed, do we ever want to return the local shape?\n    if (dummy === undefined) dummy = false;\n    if (!dummy && layerManager.UUIDMap.has(shape.uuid)) return layerManager.UUIDMap.get(shape.uuid);\n\n    let sh: Shape;\n\n    // A fromJSON and toJSON on Shape would be cleaner but ts does not allow for static abstracts so yeah.\n\n    // Shape Type specifics\n\n    const refPoint = new GlobalPoint(shape.x, shape.y);\n    if (shape.type_ === \"rect\") {\n        const rect = <ServerRect>shape;\n        sh = new Rect(refPoint, rect.width, rect.height, rect.fill_colour, rect.stroke_colour, rect.uuid);\n    } else if (shape.type_ === \"circle\") {\n        const circ = <ServerCircle>shape;\n        sh = new Circle(refPoint, circ.radius, circ.fill_colour, circ.stroke_colour, circ.uuid);\n    } else if (shape.type_ === \"circulartoken\") {\n        const token = <ServerCircularToken>shape;\n        sh = new CircularToken(\n            refPoint,\n            token.radius,\n            token.text,\n            token.font,\n            token.fill_colour,\n            token.stroke_colour,\n            token.uuid,\n        );\n    } else if (shape.type_ === \"line\") {\n        const line = <ServerLine>shape;\n        sh = new Line(refPoint, new GlobalPoint(line.x2, line.y2), line.line_width, line.stroke_colour, line.uuid);\n    } else if (shape.type_ === \"multiline\") {\n        const multiline = <ServerMultiLine>shape;\n        sh = new MultiLine(\n            refPoint,\n            multiline.points.map(p => new GlobalPoint(p.x, p.y)),\n            multiline.line_width,\n            multiline.stroke_colour,\n            multiline.uuid,\n        );\n    } else if (shape.type_ === \"polygon\") {\n        const polygon = <ServerPolygon>shape;\n        sh = new Polygon(\n            refPoint,\n            polygon.vertices.map(v => new GlobalPoint(v.x, v.y)),\n            polygon.fill_colour,\n            polygon.stroke_colour,\n            polygon.uuid,\n        );\n    } else if (shape.type_ === \"text\") {\n        const text = <ServerText>shape;\n        sh = new Text(refPoint, text.text, text.font, text.angle, text.fill_colour, text.stroke_colour, text.uuid);\n    } else if (shape.type_ === \"assetrect\") {\n        const asset = <ServerAsset>shape;\n        const img = new Image(asset.width, asset.height);\n        if (asset.src.startsWith(\"http\")) img.src = new URL(asset.src).pathname;\n        else img.src = asset.src;\n        sh = new Asset(img, refPoint, asset.width, asset.height, asset.uuid);\n        img.onload = () => {\n            layerManager.getLayer(shape.layer)!.invalidate(false);\n        };\n    } else {\n        return undefined;\n    }\n    sh.fromDict(shape);\n    return sh;\n}\n","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./confirm.vue?vue&type=style&index=0&id=1883e207&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./confirm.vue?vue&type=style&index=0&id=1883e207&scoped=true&lang=css&\"","import tinycolor from \"tinycolor2\";\n\nimport { uuidv4 } from \"@/core/utils\";\nimport { socket } from \"@/game/api/socket\";\nimport { aurasFromServer, aurasToServer } from \"@/game/comm/conversion/aura\";\nimport { InitiativeData } from \"@/game/comm/types/general\";\nimport { ServerShape } from \"@/game/comm/types/shapes\";\nimport { GlobalPoint, LocalPoint, Vector } from \"@/game/geom\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { BoundingRect } from \"@/game/shapes/boundingrect\";\nimport { gameStore } from \"@/game/store\";\nimport { g2l, g2lr, g2lx, g2ly, g2lz } from \"@/game/units\";\n\nexport abstract class Shape {\n    // Used to create class instance from server shape data\n    abstract readonly type: string;\n    // The unique ID of this shape\n    readonly uuid: string;\n    // The layer the shape is currently on\n    layer!: string;\n\n    // A reference point regarding that specific shape's structure\n    protected _refPoint: GlobalPoint;\n\n    // Fill colour of the shape\n    fillColour: string = \"#000\";\n    strokeColour: string = \"rgba(0,0,0,0)\";\n    // The optional name associated with the shape\n    name = \"Unknown shape\";\n\n    // Associated trackers/auras/owners\n    trackers: Tracker[] = [];\n    auras: Aura[] = [];\n    protected _owners: string[] = [];\n\n    // Block light sources\n    visionObstruction = false;\n    // Prevent shapes from overlapping with this shape\n    movementObstruction = false;\n    // Does this shape represent a playable token\n    isToken = false;\n    // Show a highlight box\n    showHighlight = false;\n\n    // Mouseover annotation\n    annotation: string = \"\";\n\n    // Draw modus to use\n    globalCompositeOperation: string = \"source-over\";\n\n    // Additional options for specialized uses\n    options: Map<string, any> = new Map();\n\n    constructor(refPoint: GlobalPoint, fillColour?: string, strokeColour?: string, uuid?: string) {\n        this._refPoint = refPoint;\n        this.uuid = uuid || uuidv4();\n        if (fillColour !== undefined) this.fillColour = fillColour;\n        if (strokeColour !== undefined) this.strokeColour = strokeColour;\n    }\n\n    get refPoint() {\n        return this._refPoint;\n    }\n    set refPoint(point: GlobalPoint) {\n        this._refPoint = point;\n    }\n\n    abstract getBoundingBox(): BoundingRect;\n\n    // If inWorldCoord is\n    abstract contains(point: GlobalPoint): boolean;\n\n    abstract center(): GlobalPoint;\n    abstract center(centerPoint: GlobalPoint): void;\n    visibleInCanvas(canvas: HTMLCanvasElement): boolean {\n        // for (const aura of this.auras) {\n        //     if (aura.value > 0) {\n        //         const auraCircle = new Circle(this.center(), aura.value);\n        //         if (auraCircle.visibleInCanvas(canvas)) return true;\n        //     }\n        // }\n        return false;\n    }\n\n    // Code to snap a shape to the grid\n    // This is shape dependent as the shape refPoints are shape specific in\n    abstract snapToGrid(): void;\n    abstract resizeToGrid(): void;\n    abstract resize(resizePoint: number, point: LocalPoint): void;\n\n    abstract get points(): number[][];\n\n    getPointIndex(p: GlobalPoint, delta = 0): number {\n        for (const [idx, point] of this.points.entries()) {\n            if (Math.abs(p.x - point[0]) <= delta && Math.abs(p.y - point[1]) <= delta) return idx;\n        }\n        return -1;\n    }\n\n    getPointOrientation(i: number): Vector {\n        const prev = GlobalPoint.fromArray(this.points[(this.points.length + i - 1) % this.points.length]);\n        const point = GlobalPoint.fromArray(this.points[i]);\n        const next = GlobalPoint.fromArray(this.points[(i + 1) % this.points.length]);\n        const vec = next.subtract(prev);\n        const mid = prev.add(vec.multiply(0.5));\n        return point.subtract(mid).normalize();\n    }\n\n    invalidate(skipLightUpdate: boolean) {\n        const l = layerManager.getLayer(this.layer);\n        if (l) l.invalidate(skipLightUpdate);\n    }\n\n    checkVisionSources(recalculate = true) {\n        const self = this;\n        const obstructionIndex = gameStore.visionBlockers.indexOf(this.uuid);\n        let update = false;\n        if (this.visionObstruction && obstructionIndex === -1) {\n            gameStore.visionBlockers.push(this.uuid);\n            update = true;\n        } else if (!this.visionObstruction && obstructionIndex >= 0) {\n            gameStore.visionBlockers.splice(obstructionIndex, 1);\n            update = true;\n        }\n        if (update && recalculate) gameStore.recalculateVision();\n\n        // Check if the visionsource auras are in the gameManager\n        this.auras.forEach(au => {\n            const ls = gameStore.visionSources;\n            const i = ls.findIndex(o => o.aura === au.uuid);\n            if (au.visionSource && i === -1) {\n                ls.push({ shape: self.uuid, aura: au.uuid });\n            } else if (!au.visionSource && i >= 0) {\n                ls.splice(i, 1);\n            }\n        });\n        // Check if anything in the gameManager referencing this shape is in fact still a visionsource\n        for (let i = gameStore.visionSources.length - 1; i >= 0; i--) {\n            const ls = gameStore.visionSources[i];\n            if (ls.shape === self.uuid) {\n                if (!self.auras.some(a => a.uuid === ls.aura && a.visionSource)) gameStore.visionSources.splice(i, 1);\n            }\n        }\n    }\n\n    setMovementBlock(blocksMovement: boolean, recalculate = true) {\n        this.movementObstruction = blocksMovement || false;\n        const obstructionIndex = gameStore.movementblockers.indexOf(this.uuid);\n        let update = false;\n        if (this.movementObstruction && obstructionIndex === -1) {\n            gameStore.movementblockers.push(this.uuid);\n            update = true;\n        } else if (!this.movementObstruction && obstructionIndex >= 0) {\n            gameStore.movementblockers.splice(obstructionIndex, 1);\n            update = true;\n        }\n        if (update && recalculate) gameStore.recalculateMovement();\n    }\n\n    setIsToken(isToken: boolean) {\n        this.isToken = isToken;\n        if (this.ownedBy()) {\n            const i = gameStore.ownedtokens.indexOf(this.uuid);\n            if (this.isToken && i === -1) gameStore.ownedtokens.push(this.uuid);\n            else if (!this.isToken && i >= 0) gameStore.ownedtokens.splice(i, 1);\n        }\n    }\n\n    abstract asDict(): ServerShape;\n    getBaseDict(): ServerShape {\n        return {\n            type_: this.type,\n            uuid: this.uuid,\n            x: this.refPoint.x,\n            y: this.refPoint.y,\n            layer: this.layer,\n            draw_operator: this.globalCompositeOperation,\n            movement_obstruction: this.movementObstruction,\n            vision_obstruction: this.visionObstruction,\n            auras: aurasToServer(this.auras),\n            trackers: this.trackers,\n            owners: this._owners,\n            fill_colour: this.fillColour,\n            stroke_colour: this.strokeColour,\n            name: this.name,\n            annotation: this.annotation,\n            is_token: this.isToken,\n            options: JSON.stringify([...this.options]),\n        };\n    }\n    fromDict(data: ServerShape) {\n        this.layer = data.layer;\n        this.globalCompositeOperation = data.draw_operator;\n        this.movementObstruction = data.movement_obstruction;\n        this.visionObstruction = data.vision_obstruction;\n        this.auras = aurasFromServer(data.auras);\n        this.trackers = data.trackers;\n        this._owners = data.owners;\n        this.isToken = data.is_token;\n        if (data.annotation) this.annotation = data.annotation;\n        if (data.name) this.name = data.name;\n        if (data.options) this.options = new Map(JSON.parse(data.options));\n    }\n\n    draw(ctx: CanvasRenderingContext2D) {\n        if (this.globalCompositeOperation !== undefined) ctx.globalCompositeOperation = this.globalCompositeOperation;\n        else ctx.globalCompositeOperation = \"source-over\";\n        if (this.showHighlight) {\n            const bbox = this.getBoundingBox();\n            ctx.strokeStyle = \"red\";\n            ctx.strokeRect(g2lx(bbox.topLeft.x) - 5, g2ly(bbox.topLeft.y) - 5, g2lz(bbox.w) + 10, g2lz(bbox.h) + 10);\n        }\n    }\n\n    drawAuras(ctx: CanvasRenderingContext2D) {\n        for (const aura of this.auras) {\n            if (aura.value === 0 && aura.dim === 0) return;\n            ctx.beginPath();\n\n            const loc = g2l(this.center());\n            const innerRange = g2lr(aura.value + aura.dim);\n\n            if (aura.dim === 0) ctx.fillStyle = aura.colour;\n            else {\n                const gradient = ctx.createRadialGradient(\n                    loc.x,\n                    loc.y,\n                    g2lr(aura.value),\n                    loc.x,\n                    loc.y,\n                    g2lr(aura.value + aura.dim),\n                );\n                const tc = tinycolor(aura.colour);\n                ctx.fillStyle = gradient;\n                gradient.addColorStop(0, aura.colour);\n                gradient.addColorStop(1, tc.setAlpha(0).toRgbString());\n            }\n            if (!aura.visionSource || aura.lastPath === undefined) {\n                ctx.arc(loc.x, loc.y, innerRange, 0, 2 * Math.PI);\n                ctx.fill();\n            } else {\n                try {\n                    ctx.fill(aura.lastPath);\n                } catch (e) {\n                    ctx.arc(loc.x, loc.y, innerRange, 0, 2 * Math.PI);\n                    ctx.fill();\n                    console.warn(e);\n                }\n            }\n        }\n    }\n\n    getInitiativeRepr(): InitiativeData {\n        return {\n            uuid: this.uuid,\n            visible: !gameStore.IS_DM,\n            group: false,\n            source: this.name,\n            has_img: false,\n            effects: [],\n            index: Infinity,\n        };\n    }\n\n    moveLayer(layer: string, sync: boolean) {\n        const oldLayer = layerManager.getLayer(this.layer);\n        const newLayer = layerManager.getLayer(layer);\n        if (oldLayer === undefined || newLayer === undefined) return;\n        this.layer = layer;\n        // Update layer shapes\n        oldLayer.shapes.splice(oldLayer.shapes.indexOf(this), 1);\n        newLayer.shapes.push(this);\n        // Revalidate layers  (light should at most be redone once)\n        oldLayer.invalidate(true);\n        newLayer.invalidate(false);\n        // Sync!\n        if (sync) socket.emit(\"Shape.Layer.Change\", { uuid: this.uuid, layer });\n    }\n\n    get owners() {\n        return Object.freeze(this._owners.slice());\n    }\n\n    ownedBy(username?: string) {\n        if (username === undefined) username = gameStore.username;\n        return gameStore.IS_DM || this._owners.includes(username);\n    }\n\n    addOwner(owner: string) {\n        if (!this._owners.includes(owner)) this._owners.push(owner);\n    }\n\n    updateOwner(oldValue: string, newValue: string) {\n        const ownerIndex = this._owners.findIndex(o => o === oldValue);\n        if (ownerIndex >= 0) this._owners.splice(ownerIndex, 1, newValue);\n        else this.addOwner(newValue);\n    }\n\n    removeOwner(owner: string) {\n        const ownerIndex = this._owners.findIndex(o => o === owner);\n        this._owners.splice(ownerIndex, 1);\n    }\n}\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./prompt.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./prompt.vue?vue&type=script&lang=ts&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.note !== null)?_c('modal',{attrs:{\"visible\":_vm.visible,\"mask\":false},on:{\"close\":function($event){_vm.visible = false}},scopedSlots:_vm._u([{key:\"header\",fn:function(m){return _c('div',{staticClass:\"modal-header\",attrs:{\"draggable\":\"true\"},on:{\"dragstart\":m.dragStart,\"dragend\":m.dragEnd}},[_c('span',{on:{\"click\":function($event){_vm.$refs.title.select()}}},[_c('i',{staticClass:\"fas fa-pencil-alt\",staticStyle:{\"font-size\":\"15px\"}})]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.note.title),expression:\"note.title\"}],ref:\"title\",domProps:{\"value\":(_vm.note.title)},on:{\"change\":_vm.updateNote,\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.note, \"title\", $event.target.value)}}}),_c('div',{staticClass:\"header-close\",on:{\"click\":function($event){_vm.visible = false}}},[_c('i',{staticClass:\"far fa-window-close\"})])])}}])},[_c('div',{staticClass:\"modal-body\"},[_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.note.text),expression:\"note.text\"}],ref:\"textarea\",style:({'height': _vm.calcHeight()}),domProps:{\"value\":(_vm.note.text)},on:{\"change\":_vm.updateNote,\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.note, \"text\", $event.target.value)}}})]),_c('div',{staticClass:\"modal-footer\"},[_c('button',{on:{\"click\":_vm.removeNote}},[_c('i',{staticClass:\"far fa-trash-alt\"}),_vm._v(\" Remove\\n    \")])])]):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"74f43d04-vue-loader-template\\\"}!../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./note.vue?vue&type=template&id=7a3669fd&scoped=true&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./modal.vue?vue&type=style&index=0&id=12ed61ba&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./modal.vue?vue&type=style&index=0&id=12ed61ba&scoped=true&lang=css&\"","\n\n\n\n\nimport Component from \"vue-class-component\";\n\nimport SelectContext from \"@/game/ui/tools/selectcontext.vue\";\nimport Tool from \"@/game/ui/tools/tool.vue\";\nimport SelectionInfo from \"../selection/selection_info.vue\";\n\nimport { getRef } from \"@/core/utils\";\nimport { socket } from \"@/game/api/socket\";\nimport { GlobalPoint, LocalPoint, Ray, Vector } from \"@/game/geom\";\nimport { Layer } from \"@/game/layers/layer\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { Rect } from \"@/game/shapes/rect\";\nimport { gameStore } from \"@/game/store\";\nimport { calculateDelta } from \"@/game/ui/tools/utils\";\nimport { g2l, g2lr, g2lx, g2ly, g2lz, l2g, l2gz } from \"@/game/units\";\nimport { getMouse } from \"@/game/utils\";\n\nexport enum SelectOperations {\n    Noop,\n    Resize,\n    Drag,\n    GroupSelect,\n}\n\nconst start = new GlobalPoint(-1000, -1000);\n\n@Component({\n    components: {\n        SelectContext,\n    },\n})\nexport default class SelectTool extends Tool {\n    name = \"Select\";\n    showContextMenu = false;\n    active = false;\n\n    mode = SelectOperations.Noop;\n    resizePoint = 0;\n    deltaChanged = false;\n    // Because we never drag from the asset's (0, 0) coord and want a smoother drag experience\n    // we keep track of the actual offset within the asset.\n    dragRay = new Ray<LocalPoint>(new LocalPoint(0, 0), new Vector(0, 0));\n    selectionStartPoint = start;\n    selectionHelper = new Rect(start, 0, 0);\n    created() {\n        this.selectionHelper.globalCompositeOperation = \"source-over\";\n    }\n    onMouseDown(event: MouseEvent) {\n        const layer = layerManager.getLayer();\n        if (layer === undefined) {\n            console.log(\"No active layer!\");\n            return;\n        }\n\n        if (!this.selectionHelper.owners.includes(gameStore.username)) {\n            this.selectionHelper.addOwner(gameStore.username);\n        }\n\n        const mouse = getMouse(event);\n        const globalMouse = l2g(mouse);\n\n        let hit = false;\n        // The selectionStack allows for lower positioned objects that are selected to have precedence during overlap.\n        let selectionStack;\n        if (!layer.selection.length) selectionStack = layer.shapes;\n        else selectionStack = layer.shapes.concat(layer.selection);\n        for (let i = selectionStack.length - 1; i >= 0; i--) {\n            const shape = selectionStack[i];\n\n            if (!shape.ownedBy()) continue;\n\n            this.resizePoint = shape.getPointIndex(globalMouse, l2gz(3));\n\n            // Resize case, a corner is selected\n            if (this.resizePoint >= 0) {\n                layer.selection = [shape];\n                getRef<SelectionInfo>(\"selectionInfo\").shape = shape;\n                this.mode = SelectOperations.Resize;\n                layer.invalidate(true);\n                hit = true;\n                break;\n\n                // Drag case, a shape is selected\n            } else if (shape.contains(globalMouse)) {\n                const selection = shape;\n                if (layer.selection.indexOf(selection) === -1) {\n                    layer.selection = [selection];\n                    getRef<SelectionInfo>(\"selectionInfo\").shape = selection;\n                }\n                this.mode = SelectOperations.Drag;\n                const localRefPoint = g2l(selection.refPoint);\n                this.dragRay = new Ray<LocalPoint>(localRefPoint, mouse.subtract(localRefPoint));\n                layer.invalidate(true);\n                hit = true;\n                break;\n            }\n        }\n\n        // GroupSelect case, draw a selection box to select multiple shapes\n        if (!hit) {\n            this.mode = SelectOperations.GroupSelect;\n            for (const selection of layer.selection) getRef<SelectionInfo>(\"selectionInfo\").shape = selection;\n\n            this.selectionStartPoint = globalMouse;\n\n            this.selectionHelper.refPoint = this.selectionStartPoint;\n            this.selectionHelper.w = 0;\n            this.selectionHelper.h = 0;\n\n            layer.selection = [this.selectionHelper];\n            layer.invalidate(true);\n        }\n        this.active = true;\n    }\n    onMouseMove(event: MouseEvent) {\n        // if (!this.active) return;   we require mousemove for the resize cursor\n        const layer = layerManager.getLayer();\n        if (layer === undefined) {\n            console.log(\"No active layer!\");\n            return;\n        }\n        const mouse = getMouse(event);\n        const globalMouse = l2g(mouse);\n        this.deltaChanged = false;\n\n        if (this.mode === SelectOperations.GroupSelect) {\n            // Currently draw on active layer\n            const endPoint = globalMouse;\n\n            this.selectionHelper.w = Math.abs(endPoint.x - this.selectionStartPoint.x);\n            this.selectionHelper.h = Math.abs(endPoint.y - this.selectionStartPoint.y);\n            this.selectionHelper.refPoint = new GlobalPoint(\n                Math.min(this.selectionStartPoint.x, endPoint.x),\n                Math.min(this.selectionStartPoint.y, endPoint.y),\n            );\n            layer.invalidate(true);\n        } else if (layer.selection.length) {\n            const og = g2l(layer.selection[layer.selection.length - 1].refPoint);\n            const origin = og.add(this.dragRay.direction);\n            let delta = mouse.subtract(origin).multiply(1 / gameStore.zoomFactor);\n            const ogDelta = delta;\n            if (this.mode === SelectOperations.Drag) {\n                // If we are on the tokens layer do a movement block check.\n                if (layer.name === \"tokens\" && !(event.shiftKey && gameStore.IS_DM)) {\n                    for (const sel of layer.selection) {\n                        if (sel.uuid === this.selectionHelper.uuid) continue; // the selection helper should not be treated as a real shape.\n                        delta = calculateDelta(delta, sel);\n                        if (delta !== ogDelta) this.deltaChanged = true;\n                    }\n                }\n                // Actually apply the delta on all shapes\n                for (const sel of layer.selection) {\n                    sel.refPoint = sel.refPoint.add(delta);\n                    if (sel !== this.selectionHelper) {\n                        if (sel.visionObstruction) gameStore.recalculateVision(true);\n                        socket.emit(\"Shape.Update\", { shape: sel.asDict(), redraw: true, temporary: true });\n                    }\n                }\n                layer.invalidate(false);\n            } else if (this.mode === SelectOperations.Resize) {\n                for (const sel of layer.selection) {\n                    sel.resize(this.resizePoint, mouse);\n                    if (sel !== this.selectionHelper) {\n                        if (sel.visionObstruction) gameStore.recalculateVision(true);\n                        socket.emit(\"Shape.Update\", { shape: sel.asDict(), redraw: true, temporary: true });\n                    }\n                    layer.invalidate(false);\n                    this.updateCursor(layer, globalMouse);\n                }\n            } else {\n                this.updateCursor(layer, globalMouse);\n            }\n        } else {\n            document.body.style.cursor = \"default\";\n        }\n    }\n    onMouseUp(e: MouseEvent): void {\n        if (!this.active) return;\n        if (layerManager.getLayer() === undefined) {\n            console.log(\"No active layer!\");\n            return;\n        }\n        const layer = layerManager.getLayer()!;\n\n        if (this.mode === SelectOperations.GroupSelect) {\n            layer.clearSelection();\n            layer.shapes.forEach(shape => {\n                if (shape === this.selectionHelper) return;\n                const bbox = shape.getBoundingBox();\n                if (!shape.ownedBy()) return;\n                if (\n                    this.selectionHelper!.refPoint.x <= bbox.topRight.x &&\n                    this.selectionHelper!.refPoint.x + this.selectionHelper!.w >= bbox.topLeft.x &&\n                    this.selectionHelper!.refPoint.y <= bbox.botLeft.y &&\n                    this.selectionHelper!.refPoint.y + this.selectionHelper!.h >= bbox.topLeft.y\n                ) {\n                    layer.selection.push(shape);\n                }\n            });\n\n            // Push the selection helper as the last element of the selection\n            // This makes sure that it will be the first one to be hit in the hit detection onMouseDown\n            if (layer.selection.length > 0) layer.selection.push(this.selectionHelper);\n\n            layer.invalidate(true);\n        } else if (layer.selection.length) {\n            layer.selection.forEach(sel => {\n                if (this.mode === SelectOperations.Drag) {\n                    if (\n                        this.dragRay.origin!.x === g2lx(sel.refPoint.x) &&\n                        this.dragRay.origin!.y === g2ly(sel.refPoint.y)\n                    )\n                        return;\n\n                    if (gameStore.useGrid && !e.altKey && !this.deltaChanged) {\n                        sel.snapToGrid();\n                    }\n\n                    if (sel !== this.selectionHelper) {\n                        if (sel.visionObstruction) gameStore.recalculateVision();\n                        if (sel.movementObstruction) gameStore.recalculateMovement();\n                        socket.emit(\"Shape.Update\", { shape: sel.asDict(), redraw: true, temporary: false });\n                    }\n                    layer.invalidate(false);\n                }\n                if (this.mode === SelectOperations.Resize) {\n                    if (gameStore.useGrid && !e.altKey) {\n                        sel.resizeToGrid();\n                    }\n                    if (sel !== this.selectionHelper) {\n                        if (sel.visionObstruction) gameStore.recalculateVision();\n                        if (sel.movementObstruction) gameStore.recalculateMovement();\n                        socket.emit(\"Shape.Update\", { shape: sel.asDict(), redraw: true, temporary: false });\n                    }\n                    layer.invalidate(false);\n                }\n            });\n        }\n        this.mode = SelectOperations.Noop;\n        this.active = false;\n    }\n    onContextMenu(event: MouseEvent) {\n        if (layerManager.getLayer() === undefined) {\n            console.log(\"No active layer!\");\n            return;\n        }\n        const layer = layerManager.getLayer()!;\n        const mouse = getMouse(event);\n        const globalMouse = l2g(mouse);\n\n        for (const shape of layer.selection) {\n            if (shape.contains(globalMouse) && shape !== this.selectionHelper) {\n                layer.selection = [shape];\n                getRef<SelectionInfo>(\"selectionInfo\").shape = shape;\n                layer.invalidate(true);\n                (<any>this.$parent.$refs.shapecontext).open(event, shape);\n                return;\n            }\n        }\n        (<any>this.$refs.selectcontext).open(event);\n    }\n    updateCursor(layer: Layer, globalMouse: GlobalPoint) {\n        for (const sel of layer.selection) {\n            const resizePoint = sel.getPointIndex(globalMouse, l2gz(3));\n            if (resizePoint < 0) document.body.style.cursor = \"default\";\n            else {\n                let angle = sel.getPointOrientation(resizePoint).angle();\n                if (angle < 0) angle += 360;\n                const d = 45 / 2;\n                if (angle >= 315 + d || angle < d || (angle >= 135 + d && angle < 225 - d))\n                    document.body.style.cursor = \"ew-resize\";\n                if ((angle >= 45 + d && angle < 135 - d) || (angle >= 225 + d && angle < 315 - d))\n                    document.body.style.cursor = \"ns-resize\";\n                if ((angle >= d && angle < 90 - d) || (angle >= 180 + d && angle < 270 - d))\n                    document.body.style.cursor = \"nwse-resize\";\n                if ((angle >= 90 + d && angle < 180 - d) || (angle >= 270 + d && angle < 360 - d))\n                    document.body.style.cursor = \"nesw-resize\";\n            }\n        }\n    }\n}\n","import { GlobalPoint, Ray, Vector } from \"@/game/geom\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { Shape } from \"@/game/shapes/shape\";\nimport { gameStore } from \"@/game/store\";\nimport { PA_CDT } from \"@/game/visibility/te/pa\";\nimport { Point, Sign, Triangle } from \"@/game/visibility/te/tds\";\nimport { ccw, cw, intersection, orientation } from \"@/game/visibility/te/triag\";\n\n// First go through each shape in the selection and see if the delta has to be truncated due to movement blockers\n\n// This is definitely super convoluted and inefficient but I was tired and really wanted the smooth wall sliding collision stuff to work\n// And it does now, so hey \\_()_/\nexport function calculateDelta(delta: Vector, sel: Shape, done?: string[]) {\n    if (delta.x === 0 && delta.y === 0) return delta;\n    if (gameStore.visionMode === \"bvh\") {\n        if (done === undefined) done = [];\n        const ogSelBBox = sel.getBoundingBox();\n        const newSelBBox = ogSelBBox.offset(delta);\n        let refine = false;\n        for (const movementBlocker of gameStore.movementblockers) {\n            if (done.includes(movementBlocker)) continue;\n            const blocker = layerManager.UUIDMap.get(movementBlocker)!;\n            const blockerBBox = blocker.getBoundingBox();\n            let found = blockerBBox.intersectsWithInner(newSelBBox);\n            if (!found) {\n                // This is an edge case, precalculating the rays is not worth in this case.\n                const ray = Ray.fromPoints(ogSelBBox.topLeft.add(delta.normalize()), newSelBBox.topLeft);\n                const invDir = ray.direction.inverse();\n                const dirIsNegative = [invDir.x < 0, invDir.y < 0];\n                found = blockerBBox.intersectP(ray, invDir, dirIsNegative).hit;\n            }\n            // Check if the bounding box of our destination would intersect with the bounding box of the movementblocker\n            if (found) {\n                const bCenter = blockerBBox.center();\n                const sCenter = ogSelBBox.center();\n\n                const d = sCenter.subtract(bCenter);\n                const ux = new Vector(1, 0);\n                const uy = new Vector(0, 1);\n                let dx = d.dot(ux);\n                let dy = d.dot(uy);\n                if (dx > blockerBBox.w / 2) dx = blockerBBox.w / 2;\n                if (dx < -blockerBBox.w / 2) dx = -blockerBBox.w / 2;\n                if (dy > blockerBBox.h / 2) dy = blockerBBox.h / 2;\n                if (dy < -blockerBBox.h / 2) dy = -blockerBBox.h / 2;\n\n                // Closest point / intersection point between the two bboxes.  Not the delta intersect!\n                const p = bCenter.add(ux.multiply(dx)).add(uy.multiply(dy));\n\n                if (p.x === ogSelBBox.topLeft.x || p.x === ogSelBBox.topRight.x) delta = new Vector(0, delta.y);\n                else if (p.y === ogSelBBox.topLeft.y || p.y === ogSelBBox.botLeft.y) delta = new Vector(delta.x, 0);\n                else {\n                    if (p.x < ogSelBBox.topLeft.x) delta = new Vector(p.x - ogSelBBox.topLeft.x, delta.y);\n                    else if (p.x > ogSelBBox.topRight.x) delta = new Vector(p.x - ogSelBBox.topRight.x, delta.y);\n                    else if (p.y < ogSelBBox.topLeft.y) delta = new Vector(delta.x, p.y - ogSelBBox.topLeft.y);\n                    else if (p.y > ogSelBBox.botLeft.y) delta = new Vector(delta.x, p.y - ogSelBBox.botLeft.y);\n                }\n                refine = true;\n                done.push(movementBlocker);\n                break;\n            }\n        }\n        if (refine) delta = calculateDelta(delta, sel, done);\n        return delta;\n    } else {\n        const centerTriangle = PA_CDT.movement.locate(sel.center().asArray(), null).loc;\n        for (const point of sel.points) {\n            const lt = PA_CDT.movement.locate(point, centerTriangle);\n            const triangle = lt.loc;\n            if (triangle === null) continue;\n            delta = checkTriangle(point, triangle, delta);\n        }\n        return delta;\n    }\n}\n\nfunction checkTriangle(point: Point, triangle: Triangle, delta: Vector, skip: Triangle[] = []): Vector {\n    const p = new GlobalPoint(point[0], point[1]);\n    const endpoint = p.add(delta).asArray();\n    if (triangle.contains(endpoint)) return delta;\n    skip.push(triangle);\n\n    for (let i = 0; i < 3; i++) {\n        if (skip.includes(triangle.neighbours[i]!)) continue;\n\n        const _cw = triangle.vertices[cw(i)]!.point!;\n        const _ccw = triangle.vertices[ccw(i)]!.point!;\n        const ix = intersection(point, endpoint, _cw, _ccw);\n\n        if (ix === null) continue;\n\n        if (!triangle.isConstrained(i)) return checkTriangle(point, triangle.neighbours[i]!, delta, skip);\n\n        if (ix[0] === p.x && ix[1] === p.y) {\n            const OR = orientation;\n            const o = orientation(point, endpoint, _ccw);\n            // Remember: canvas y axis is inverted\n            if (o === Sign.LEFT_TURN) continue;\n            if (o === Sign.ZERO) continue;\n        }\n        let newDelta = new GlobalPoint(ix[0], ix[1]).subtract(p).multiply(0.8);\n        if (newDelta.length() < 1) newDelta = new Vector(0, 0);\n        if (newDelta.length() < delta.length()) delta = newDelta;\n    }\n    return delta;\n}\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./note.vue?vue&type=style&index=0&id=7a3669fd&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./note.vue?vue&type=style&index=0&id=7a3669fd&scoped=true&lang=css&\"","import { socket } from \"@/game/api/socket\";\nimport { gameStore } from \"@/game/store\";\n\nexport function sendClientOptions() {\n    socket.emit(\"Client.Options.Set\", {\n        locationOptions: {\n            panX: gameStore.panX,\n            panY: gameStore.panY,\n            zoomFactor: gameStore.zoomFactor,\n        },\n    });\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\nimport { Prop } from \"vue-property-decorator\";\n\nimport { AssetFile, AssetList } from \"@/core/comm/types\";\nimport { alphSort } from \"@/core/utils\";\n\n@Component({\n    name: \"asset-node\",\n})\nexport default class AssetNode extends Vue {\n    @Prop() asset!: AssetList;\n\n    showImage = null;\n    get folders(): string[] {\n        return Object.keys(this.asset)\n            .filter(el => ![\"__files\"].includes(el))\n            .sort(alphSort);\n    }\n\n    get files(): AssetFile[] {\n        if (this.asset.__files)\n            return (<AssetFile[]>this.asset.__files)\n                .concat()\n                .sort((a, b) => (a.name.toLowerCase() > b.name.toLowerCase() ? 1 : -1));\n        return [];\n    }\n\n    toggle(event: { target: HTMLElement }) {\n        // tslint:disable-next-line:prefer-for-of\n        for (let i = 0; i < event.target.children.length; i++) {\n            const el = <HTMLElement>event.target.children[i];\n            el.style.display = el.style.display === \"\" ? \"block\" : \"\";\n        }\n    }\n\n    dragStart(event: DragEvent, imageSource: string) {\n        if (event === null || event.dataTransfer === null) return;\n        const img = (<HTMLElement>event.target).querySelector(\".preview\")!;\n        event.dataTransfer.setDragImage(img, 0, 0);\n        event.dataTransfer.setData(\"text/plain\", imageSource);\n    }\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.visible)?_c('div',{staticClass:\"ContextMenu\",style:({left:_vm.left, top:_vm.top}),attrs:{\"tabindex\":\"-1\"},on:{\"blur\":function($event){_vm.$emit('close')}}},[_c('ul',[_vm._t(\"default\")],2)]):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"74f43d04-vue-loader-template\\\"}!../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./contextmenu.vue?vue&type=template&id=256dde9c&\"","// import Vuex from \"vuex\";\nimport { getModule, Module, Mutation, VuexModule } from \"vuex-module-decorators\";\n\nimport { Asset } from \"@/core/comm/types\";\nimport { rootStore } from \"@/store\";\n\nexport interface AssetState {\n    root: number;\n    files: number[];\n    folders: number[];\n    idMap: Map<number, Asset>;\n    selected: number[];\n}\n\n@Module({ dynamic: true, store: rootStore, name: \"assets\", namespaced: true })\nclass AssetStore extends VuexModule {\n    root = -1;\n    files: number[] = [];\n    folders: number[] = [];\n    idMap: Map<number, Asset> = new Map();\n    selected: number[] = [];\n\n    @Mutation\n    clear() {\n        this.folders = [];\n        this.files = [];\n    }\n\n    @Mutation\n    clearSelected() {\n        console.log(\"Cleared\");\n        this.selected = [];\n    }\n\n    @Mutation\n    setRoot(root: number) {\n        this.root = root;\n    }\n}\n\nexport const assetStore = getModule(AssetStore);\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./contextmenu.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./contextmenu.vue?vue&type=script&lang=ts&\"","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\n\nimport ContextMenu from \"@/core/components/contextmenu.vue\";\nimport Initiative from \"@/game/ui/initiative.vue\";\n\nimport { getRef } from \"@/core/utils\";\nimport { EventBus } from \"@/game/event-bus\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { Shape } from \"@/game/shapes/shape\";\nimport { gameStore } from \"@/game/store\";\n\n@Component({\n    components: {\n        ContextMenu,\n    },\n})\nexport default class ShapeContext extends Vue {\n    visible = false;\n    x = 0;\n    y = 0;\n    shape: Shape | null = null;\n    get activeLayer(): string {\n        const layer = layerManager.getLayer();\n        return layer === undefined ? \"\" : layer.name;\n    }\n    open(event: MouseEvent, shape: Shape) {\n        this.visible = true;\n        this.x = event.pageX;\n        this.y = event.pageY;\n        this.shape = shape;\n        this.$nextTick(() => this.$children[0].$el.focus());\n    }\n    close() {\n        this.visible = false;\n        this.shape = null;\n    }\n    getLayers() {\n        return layerManager.layers.filter(l => l.selectable && (gameStore.IS_DM || l.playerEditable));\n    }\n    getActiveLayer() {\n        return layerManager.getLayer();\n    }\n    getInitiativeWord() {\n        if (this.shape === null) return \"\";\n        return getRef<Initiative>(\"initiative\").contains(this.shape.uuid) ? \"Show\" : \"Add\";\n    }\n    setLayer(newLayer: string) {\n        if (this.shape === null) return;\n        this.shape.moveLayer(newLayer, true);\n        this.close();\n    }\n    moveToBack() {\n        if (this.shape === null) return;\n        const layer = this.getActiveLayer()!;\n        layer.moveShapeOrder(this.shape, 0, true);\n        this.close();\n    }\n    moveToFront() {\n        if (this.shape === null) return;\n        const layer = this.getActiveLayer()!;\n        layer.moveShapeOrder(this.shape, layer.shapes.length - 1, true);\n        this.close();\n    }\n    addInitiative() {\n        if (this.shape === null) return;\n        const initiative = getRef<Initiative>(\"initiative\");\n        if (!initiative.contains(this.shape.uuid)) initiative.addInitiative(this.shape.getInitiativeRepr());\n        initiative.visible = true;\n        this.close();\n    }\n    openEditDialog() {\n        EventBus.$emit(\"EditDialog.Open\", this.shape);\n        this.close();\n    }\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.shape !== null)?_c('div',[_c('div',{attrs:{\"id\":\"selection-menu\"}},[_c('div',{attrs:{\"id\":\"selection-edit-button\"},on:{\"click\":_vm.openEditDialog}},[_c('i',{staticClass:\"fas fa-edit\"})]),_c('div',{attrs:{\"id\":\"selection-name\"}},[_vm._v(_vm._s(_vm.shape.name))]),_c('div',{attrs:{\"id\":\"selection-trackers\"}},[_vm._l((_vm.shape.trackers),function(tracker){return (tracker.name !== '' || tracker.value !== 0)?[_c('div',{key:'name-' + tracker.uuid},[_vm._v(_vm._s(tracker.name))]),_c('div',{key:'value-' + tracker.uuid,staticClass:\"selection-tracker-value\",on:{\"click\":function($event){_vm.changeValue(tracker, false)}}},[(tracker.maxvalue === 0)?[_vm._v(_vm._s(tracker.value))]:[_vm._v(_vm._s(tracker.value)+\" / \"+_vm._s(tracker.maxvalue))]],2)]:_vm._e()})],2),_c('div',{attrs:{\"id\":\"selection-auras\"}},[_vm._l((_vm.shape.auras),function(aura){return (aura.name !== '' || aura.value !== 0)?[_c('div',{key:'name-' + aura.uuid},[_vm._v(_vm._s(aura.name))]),_c('div',{key:'value-' + aura.uuid,staticClass:\"selection-tracker-value\",on:{\"click\":function($event){_vm.changeValue(aura, true)}}},[(aura.dim === 0)?[_vm._v(_vm._s(aura.value))]:[_vm._v(_vm._s(aura.value)+\" / \"+_vm._s(aura.dim))]],2)]:_vm._e()})],2)]),_c('edit-dialog',{ref:\"editDialog\",attrs:{\"shape\":_vm.shape}})],1):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"74f43d04-vue-loader-template\\\"}!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./selection_info.vue?vue&type=template&id=32cec914&scoped=true&\"","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./map.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./map.vue?vue&type=script&lang=ts&\"","import { Layer } from \"@/game/layers/layer\";\nimport { gameStore } from \"@/game/store\";\n\nexport class GridLayer extends Layer {\n    invalidate(): void {\n        this.valid = false;\n    }\n    draw(doClear?: boolean): void {\n        if (!this.valid) {\n            this.drawGrid();\n        }\n    }\n    drawGrid(): void {\n        const ctx = this.ctx;\n        this.clear();\n        ctx.beginPath();\n\n        const gs = gameStore.gridSize;\n\n        for (let i = 0; i < this.width; i += gs * gameStore.zoomFactor) {\n            ctx.moveTo(i + (gameStore.panX % gs) * gameStore.zoomFactor, 0);\n            ctx.lineTo(i + (gameStore.panX % gs) * gameStore.zoomFactor, this.height);\n            ctx.moveTo(0, i + (gameStore.panY % gs) * gameStore.zoomFactor);\n            ctx.lineTo(this.width, i + (gameStore.panY % gs) * gameStore.zoomFactor);\n        }\n\n        ctx.strokeStyle = gameStore.gridColour;\n        ctx.lineWidth = 1;\n        ctx.stroke();\n        this.valid = true;\n    }\n}\n","import Vue from \"vue\";\nimport Vuex from \"vuex\";\n\nimport { AssetState } from \"@/assetManager/store\";\nimport { CoreState } from \"@/core/store\";\nimport { GameState } from \"@/game/store\";\n\nVue.use(Vuex);\n\nexport interface RootState {\n    assets: AssetState;\n    core: CoreState;\n    game: GameState;\n}\n\nexport const rootStore = new Vuex.Store<RootState>({});\n","import { render, staticRenderFns } from \"./colorpicker.vue?vue&type=template&id=b4f2c0b0&scoped=true&\"\nimport script from \"./colorpicker.vue?vue&type=script&lang=ts&\"\nexport * from \"./colorpicker.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./colorpicker.vue?vue&type=style&index=0&id=b4f2c0b0&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"b4f2c0b0\",\n  null\n  \n)\n\ncomponent.options.__file = \"colorpicker.vue\"\nexport default component.exports","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./login.vue?vue&type=style&index=0&id=bc30fc14&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./login.vue?vue&type=style&index=0&id=bc30fc14&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('router-view',{ref:\"activeComponent\"})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=196415f0&\"\nvar script = {}\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"App.vue\"\nexport default component.exports","import { GlobalPoint, Ray } from \"@/game/geom\";\nimport { Layer } from \"@/game/layers/layer\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { Settings } from \"@/game/settings\";\nimport { Circle } from \"@/game/shapes/circle\";\nimport { Shape } from \"@/game/shapes/shape\";\nimport { gameStore } from \"@/game/store\";\nimport { g2l, g2lr, g2lx, g2ly, g2lz, getUnitDistance } from \"@/game/units\";\nimport { getFogColour } from \"@/game/utils\";\nimport { computeVisibility } from \"../visibility/te/te\";\n\nexport class FOWLayer extends Layer {\n    isVisionLayer: boolean = true;\n    preFogShapes: Shape[] = [];\n    virtualCanvas: HTMLCanvasElement;\n    vCtx: CanvasRenderingContext2D;\n\n    constructor(canvas: HTMLCanvasElement, name: string) {\n        super(canvas, name);\n        this.virtualCanvas = document.createElement(\"canvas\");\n        this.virtualCanvas.width = window.innerWidth;\n        this.virtualCanvas.height = window.innerHeight;\n        this.vCtx = this.virtualCanvas.getContext(\"2d\")!;\n    }\n\n    addShape(shape: Shape, sync: boolean, temporary?: boolean, invalidate = true): void {\n        super.addShape(shape, sync, temporary, invalidate);\n        if (shape.options.has(\"preFogShape\") && shape.options.get(\"preFogShape\")) {\n            this.preFogShapes.push(shape);\n        }\n    }\n\n    removeShape(shape: Shape, sync: boolean, temporary?: boolean) {\n        if (shape.options.has(\"preFogShape\") && shape.options.get(\"preFogShape\")) {\n            const idx = this.preFogShapes.findIndex(s => s.uuid === shape.uuid);\n            this.preFogShapes.splice(idx, 1);\n        }\n        super.removeShape(shape, sync, temporary);\n    }\n\n    draw(): void {\n        if (!this.valid) {\n            const ctx = this.ctx;\n\n            if (Settings.skipLightFOW) {\n                ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n                this.valid = true;\n                return;\n            }\n\n            const originalOperation = ctx.globalCompositeOperation;\n            ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n\n            ctx.fillStyle = \"rgba(0, 0, 0, 1)\";\n\n            const dctx = layerManager.getLayer(\"draw\")!.ctx;\n            if (Settings.drawAngleLines || Settings.drawFirstLightHit) {\n                dctx.clearRect(0, 0, dctx.canvas.width, dctx.canvas.height);\n            }\n\n            // At all times provide a minimal vision range to prevent losing your tokens in fog.\n            if (gameStore.fullFOW && layerManager.hasLayer(\"tokens\")) {\n                layerManager.getLayer(\"tokens\")!.shapes.forEach(sh => {\n                    if (!sh.ownedBy() || !sh.isToken) return;\n                    const bb = sh.getBoundingBox();\n                    const lcenter = g2l(sh.center());\n                    const alm = 0.8 * g2lz(bb.w);\n                    ctx.beginPath();\n                    ctx.arc(lcenter.x, lcenter.y, alm, 0, 2 * Math.PI);\n                    const gradient = ctx.createRadialGradient(lcenter.x, lcenter.y, alm / 2, lcenter.x, lcenter.y, alm);\n                    gradient.addColorStop(0, \"rgba(0, 0, 0, 1)\");\n                    gradient.addColorStop(1, \"rgba(0, 0, 0, 0)\");\n                    ctx.fillStyle = gradient;\n                    ctx.fill();\n                });\n            }\n\n            this.vCtx.clearRect(0, 0, window.innerWidth, window.innerHeight);\n\n            // First cut out all the light sources\n            for (const light of gameStore.visionSources) {\n                const shape = layerManager.UUIDMap.get(light.shape);\n                if (shape === undefined) continue;\n                const aura = shape.auras.find(a => a.uuid === light.aura);\n                if (aura === undefined) continue;\n\n                const auraLength = getUnitDistance(aura.value + aura.dim);\n                const center = shape.center();\n                const lcenter = g2l(center);\n\n                const auraCircle = new Circle(center, auraLength);\n                if (!auraCircle.visibleInCanvas(ctx.canvas)) continue;\n\n                if (gameStore.visionMode === \"bvh\") {\n                    let lastArcAngle = -1;\n\n                    const path = new Path2D();\n                    path.moveTo(lcenter.x, lcenter.y);\n                    let firstPoint: GlobalPoint;\n\n                    for (let angle = 0; angle < 2 * Math.PI; angle += (Settings.angleSteps / 180) * Math.PI) {\n                        const anglePoint = new GlobalPoint(\n                            center.x + auraLength * Math.cos(angle),\n                            center.y + auraLength * Math.sin(angle),\n                        );\n                        if (Settings.drawAngleLines) {\n                            dctx!.beginPath();\n                            dctx!.moveTo(g2lx(center.x), g2ly(center.y));\n                            dctx!.lineTo(g2lx(anglePoint.x), g2ly(anglePoint.y));\n                            dctx!.stroke();\n                        }\n\n                        // Check if there is a hit with one of the nearby light blockers.\n                        const lightRay = Ray.fromPoints(center, anglePoint);\n                        const hitResult = gameStore.BV.intersect(lightRay);\n\n                        if (angle === 0) firstPoint = hitResult.hit ? hitResult.intersect : anglePoint;\n\n                        // We can move on to the next angle if nothing was hit.\n                        if (!hitResult.hit) {\n                            // If an earlier hit caused the aura to leave the arc, we need to go back to the arc\n                            if (lastArcAngle === -1) {\n                                // Set the start of a new arc beginning at the current angle\n                                lastArcAngle = angle;\n                                // Draw a line from the last non arc location back to the arc\n                                const dest = g2l(anglePoint);\n                                ctx.lineTo(dest.x, dest.y);\n                            }\n                            continue;\n                        }\n                        // If hit , first finish any ongoing arc, then move to the intersection point\n                        if (lastArcAngle !== -1) {\n                            path.arc(lcenter.x, lcenter.y, g2lr(aura.value + aura.dim), lastArcAngle, angle);\n                            lastArcAngle = -1;\n                        }\n                        path.lineTo(g2lx(hitResult.intersect.x), g2ly(hitResult.intersect.y));\n                    }\n                    // Finish the final arc.\n                    if (lastArcAngle === -1) path.lineTo(g2lx(firstPoint!.x), g2ly(firstPoint!.y));\n                    else path.arc(lcenter.x, lcenter.y, g2lr(aura.value + aura.dim), lastArcAngle, 2 * Math.PI);\n\n                    if (gameStore.fullFOW) {\n                        if (aura.dim > 0) {\n                            // Fill the light aura with a radial dropoff towards the outside.\n                            const gradient = ctx.createRadialGradient(\n                                lcenter.x,\n                                lcenter.y,\n                                g2lr(aura.value),\n                                lcenter.x,\n                                lcenter.y,\n                                g2lr(aura.value + aura.dim),\n                            );\n                            gradient.addColorStop(0, \"rgba(0, 0, 0, 1)\");\n                            gradient.addColorStop(1, \"rgba(0, 0, 0, 0)\");\n                            ctx.fillStyle = gradient;\n                        } else {\n                            ctx.fillStyle = \"rgba(0, 0, 0, 1)\";\n                        }\n                        ctx.fill(path);\n                    }\n\n                    aura.lastPath = path;\n                } else {\n                    this.vCtx.globalCompositeOperation = \"source-over\";\n                    this.vCtx.fillStyle = \"rgba(0, 0, 0, 1)\";\n                    const polygon = computeVisibility(center, \"vision\");\n                    this.vCtx.beginPath();\n                    this.vCtx.moveTo(g2lx(polygon[0][0]), g2ly(polygon[0][1]));\n                    for (const point of polygon) this.vCtx.lineTo(g2lx(point[0]), g2ly(point[1]));\n                    this.vCtx.closePath();\n                    this.vCtx.fill();\n                    if (aura.dim > 0) {\n                        // Fill the light aura with a radial dropoff towards the outside.\n                        const gradient = this.vCtx.createRadialGradient(\n                            lcenter.x,\n                            lcenter.y,\n                            g2lr(aura.value),\n                            lcenter.x,\n                            lcenter.y,\n                            g2lr(aura.value + aura.dim),\n                        );\n                        gradient.addColorStop(0, \"rgba(0, 0, 0, 1)\");\n                        gradient.addColorStop(1, \"rgba(0, 0, 0, 0)\");\n                        this.vCtx.fillStyle = gradient;\n                    } else {\n                        this.vCtx.fillStyle = \"rgba(0, 0, 0, 1)\";\n                    }\n                    this.vCtx.globalCompositeOperation = \"source-in\";\n                    this.vCtx.beginPath();\n                    this.vCtx.arc(lcenter.x, lcenter.y, g2lr(aura.value + aura.dim), 0, 2 * Math.PI);\n                    this.vCtx.fill();\n                    ctx.drawImage(this.virtualCanvas, 0, 0);\n                }\n            }\n\n            // At the DM Side due to opacity of the two fow layers, it looks strange if we just render them on top of eachother like players.\n            if (gameStore.fowLOS) {\n                ctx.globalCompositeOperation = \"source-in\";\n                ctx.drawImage(layerManager.getLayer(\"fow-players\")!.canvas, 0, 0);\n            }\n\n            for (const preShape of this.preFogShapes) {\n                if (!preShape.visibleInCanvas(this.canvas)) continue;\n                const ogComposite = preShape.globalCompositeOperation;\n                if (!gameStore.fullFOW) {\n                    if (preShape.globalCompositeOperation === \"source-over\")\n                        preShape.globalCompositeOperation = \"destination-out\";\n                    else if (preShape.globalCompositeOperation === \"destination-out\")\n                        preShape.globalCompositeOperation = \"source-over\";\n                }\n                preShape.draw(ctx);\n                preShape.globalCompositeOperation = ogComposite;\n            }\n\n            if (gameStore.fullFOW) {\n                ctx.globalCompositeOperation = \"source-out\";\n                ctx.fillStyle = getFogColour();\n                ctx.fillRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n            }\n\n            super.draw(false);\n\n            ctx.globalCompositeOperation = originalOperation;\n        }\n    }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./load.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./load.vue?vue&type=script&lang=ts&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"menuContainer\"}},[_c('div',{ref:\"rm\",style:({\n              left: _vm.visible.settings ? '200px' : '0',\n              top: _vm.visible.locations ? '100px' : '0'\n          }),attrs:{\"id\":\"radialmenu\"}},[_c('div',{staticClass:\"rm-wrapper\"},[_c('div',{staticClass:\"rm-toggler\"},[_c('ul',{staticClass:\"rm-list\",class:{ 'rm-list-dm': _vm.IS_DM }},[(_vm.IS_DM)?_c('li',{staticClass:\"rm-item\",attrs:{\"id\":\"rm-locations\"},on:{\"click\":function($event){_vm.visible.locations = !_vm.visible.locations}}},[_vm._m(0)]):_vm._e(),_c('li',{staticClass:\"rm-item\",attrs:{\"id\":\"rm-settings\"},on:{\"click\":function($event){_vm.visible.settings = !_vm.visible.settings}}},[_vm._m(1)])])]),_vm._m(2)])]),_c('transition',{attrs:{\"name\":\"settings\"},on:{\"enter\":function($event){_vm.$refs.rm.style.transition = 'left 500ms'}}},[(_vm.visible.settings)?_c('div',{ref:\"settings\",attrs:{\"id\":\"menu\"},on:{\"click\":_vm.settingsClick}},[_c('div',{staticStyle:{\"width\":\"200px\",\"height\":\"90%\",\"overflow-y\":\"auto\",\"overflow-x\":\"hidden\"}},[(_vm.IS_DM)?[_c('button',{staticClass:\"accordion\"},[_vm._v(\"Assets\")]),_c('div',{staticClass:\"accordion-panel\"},[_c('a',{staticClass:\"actionButton\",attrs:{\"href\":\"/assets\",\"target\":\"blank\",\"title\":\"Open asset manager\"}},[_c('i',{staticClass:\"fas fa-external-link-alt\"})]),_c('div',{staticClass:\"directory\",attrs:{\"id\":\"menu-tokens\"}},[_c('asset-node',{attrs:{\"asset\":_vm.assets}}),(!_vm.assets)?_c('div',[_vm._v(\"No assets\")]):_vm._e()],1)]),_c('button',{staticClass:\"accordion\"},[_vm._v(\"Notes\")]),_c('div',{staticClass:\"accordion-panel\"},[_c('div',{staticClass:\"accordion-subpanel\",attrs:{\"id\":\"menu-notes\"}},[_c('a',{staticClass:\"actionButton\",on:{\"click\":_vm.createNote}},[_c('i',{staticClass:\"far fa-plus-square\"})]),_vm._l((_vm.notes),function(note){return _c('div',{key:note.uuid,staticStyle:{\"cursor\":\"pointer\"},on:{\"click\":function($event){_vm.openNote(note)}}},[_vm._v(_vm._s(note.title || \"[?]\"))])}),(!_vm.notes.length)?_c('div',[_vm._v(\"No notes\")]):_vm._e()],2)]),_c('button',{staticClass:\"accordion\"},[_vm._v(\"DM Options\")]),_c('div',{staticClass:\"accordion-panel\"},[_c('div',{staticClass:\"accordion-subpanel\"},[_c('label',{attrs:{\"for\":\"useGridInput\"}},[_vm._v(\"Use grid:\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.useGrid),expression:\"useGrid\"}],attrs:{\"id\":\"useGridInput\",\"type\":\"checkbox\",\"checked\":\"checked\"},domProps:{\"checked\":Array.isArray(_vm.useGrid)?_vm._i(_vm.useGrid,null)>-1:(_vm.useGrid)},on:{\"change\":function($event){var $$a=_vm.useGrid,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.useGrid=$$a.concat([$$v]))}else{$$i>-1&&(_vm.useGrid=$$a.slice(0,$$i).concat($$a.slice($$i+1)))}}else{_vm.useGrid=$$c}}}}),_c('label',{attrs:{\"for\":\"useFOWInput\"}},[_vm._v(\"Fill entire canvas with FOW:\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.fullFOW),expression:\"fullFOW\"}],attrs:{\"id\":\"useFOWInput\",\"type\":\"checkbox\"},domProps:{\"checked\":Array.isArray(_vm.fullFOW)?_vm._i(_vm.fullFOW,null)>-1:(_vm.fullFOW)},on:{\"change\":function($event){var $$a=_vm.fullFOW,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.fullFOW=$$a.concat([$$v]))}else{$$i>-1&&(_vm.fullFOW=$$a.slice(0,$$i).concat($$a.slice($$i+1)))}}else{_vm.fullFOW=$$c}}}}),_c('label',{attrs:{\"for\":\"fowOpacity\"}},[_vm._v(\"FOW opacity:\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.fowOpacity),expression:\"fowOpacity\",modifiers:{\"number\":true}}],attrs:{\"id\":\"fowOpacity\",\"type\":\"number\",\"min\":\"0\",\"max\":\"1\",\"step\":\"0.1\"},domProps:{\"value\":(_vm.fowOpacity)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.fowOpacity=_vm._n($event.target.value)},\"blur\":function($event){_vm.$forceUpdate()}}}),_c('label',{attrs:{\"for\":\"fowLOS\"}},[_vm._v(\"Only show lights in LoS:\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.fowLOS),expression:\"fowLOS\"}],attrs:{\"id\":\"fowLOS\",\"type\":\"checkbox\"},domProps:{\"checked\":Array.isArray(_vm.fowLOS)?_vm._i(_vm.fowLOS,null)>-1:(_vm.fowLOS)},on:{\"change\":function($event){var $$a=_vm.fowLOS,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.fowLOS=$$a.concat([$$v]))}else{$$i>-1&&(_vm.fowLOS=$$a.slice(0,$$i).concat($$a.slice($$i+1)))}}else{_vm.fowLOS=$$c}}}}),_c('label',{attrs:{\"for\":\"unitSizeInput\"}},[_vm._v(\"Unit Size (in ft.):\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.unitSize),expression:\"unitSize\",modifiers:{\"number\":true}}],attrs:{\"id\":\"unitSizeInput\",\"type\":\"number\"},domProps:{\"value\":(_vm.unitSize)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.unitSize=_vm._n($event.target.value)},\"blur\":function($event){_vm.$forceUpdate()}}}),_c('label',{attrs:{\"for\":\"gridSizeInput\"}},[_vm._v(\"Grid Size (in pixels):\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.gridSize),expression:\"gridSize\",modifiers:{\"number\":true}}],attrs:{\"id\":\"gridSizeInput\",\"type\":\"number\",\"min\":\"0\"},domProps:{\"value\":(_vm.gridSize)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.gridSize=_vm._n($event.target.value)},\"blur\":function($event){_vm.$forceUpdate()}}}),_c('label',{attrs:{\"for\":\"visionMode\"}},[_vm._v(\"Vision Mode:\")]),_c('select',{attrs:{\"id\":\"visionMode\"},on:{\"change\":_vm.changeVisionMode}},[_c('option',{domProps:{\"selected\":_vm.$store.state.game.visionMode === 'bvh'}},[_vm._v(\"BVH\")]),_c('option',{domProps:{\"selected\":_vm.$store.state.game.visionMode === 'triangle'}},[_vm._v(\"Triangle\")])]),_c('label',{attrs:{\"for\":\"vmininp\"}},[_vm._v(\"Minimal full vision (ft):\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model.lazy.number\",value:(_vm.visionRangeMin),expression:\"visionRangeMin\",modifiers:{\"lazy\":true,\"number\":true}}],attrs:{\"id\":\"vmininp\",\"type\":\"number\",\"min\":\"0\"},domProps:{\"value\":(_vm.visionRangeMin)},on:{\"change\":function($event){_vm.visionRangeMin=_vm._n($event.target.value)},\"blur\":function($event){_vm.$forceUpdate()}}}),_c('label',{attrs:{\"for\":\"vmaxinp\"}},[_vm._v(\"Maximal vision (ft):\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model.lazy.number\",value:(_vm.visionRangeMax),expression:\"visionRangeMax\",modifiers:{\"lazy\":true,\"number\":true}}],attrs:{\"id\":\"vmaxinp\",\"type\":\"number\",\"min\":\"0\"},domProps:{\"value\":(_vm.visionRangeMax)},on:{\"change\":function($event){_vm.visionRangeMax=_vm._n($event.target.value)},\"blur\":function($event){_vm.$forceUpdate()}}}),_c('label',{attrs:{\"for\":\"invitation\"}},[_vm._v(\"Invitation Code:\")]),_c('input',{attrs:{\"id\":\"invitation\",\"type\":\"text\",\"readonly\":\"readonly\"},domProps:{\"value\":_vm.invitationCode}})])])]:_vm._e(),_c('button',{staticClass:\"accordion\"},[_vm._v(\"Client Options\")]),_c('div',{staticClass:\"accordion-panel\"},[_c('div',{staticClass:\"accordion-subpanel\"},[_c('label',{attrs:{\"for\":\"gridColour\"}},[_vm._v(\"Grid Colour:\")]),_c('color-picker',{attrs:{\"id\":\"gridColour\",\"color\":_vm.gridColour},on:{\"update:color\":function($event){_vm.gridColour=$event}}}),_c('label',{attrs:{\"for\":\"fowColour\"}},[_vm._v(\"FOW Colour:\")]),_c('color-picker',{attrs:{\"id\":\"fowColour\",\"color\":_vm.fowColour},on:{\"update:color\":function($event){_vm.fowColour=$event}}}),_c('label',{attrs:{\"for\":\"rulerColour\"}},[_vm._v(\"Ruler Colour:\")]),_c('color-picker',{attrs:{\"id\":\"rulerColour\",\"color\":_vm.rulerColour},on:{\"update:color\":function($event){_vm.rulerColour=$event}}})],1)])],2),_c('router-link',{staticClass:\"accordion\",staticStyle:{\"text-decoration\":\"none\",\"display\":\"inline-block\",\"position\":\"absolute\",\"bottom\":\"0\"},attrs:{\"to\":\"/dashboard\"}},[_vm._v(\"Exit\")])],1):_vm._e()]),_c('transition',{attrs:{\"name\":\"locations\"},on:{\"enter\":function($event){_vm.$refs.rm.style.transition = 'top 500ms'}}},[(_vm.IS_DM && _vm.visible.locations)?_c('div',{attrs:{\"id\":\"locations-menu\"}},[_c('div',[_vm._l((_vm.locations),function(location){return _c('div',{key:location,on:{\"click\":function($event){_vm.changeLocation(location)}}},[_vm._v(_vm._s(location))])}),_c('div',{on:{\"click\":_vm.createLocation}},[_c('i',{staticClass:\"fas fa-plus\"})])],2)]):_vm._e()]),_c('img',{attrs:{\"id\":\"dragImage\"}})],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('a',{attrs:{\"href\":\"#\"}},[_c('i',{staticClass:\"far fa-compass\"})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('a',{attrs:{\"href\":\"#\"}},[_c('i',{staticClass:\"fas fa-cog\"})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',{staticClass:\"rm-topper\"},[_c('i',{staticClass:\"icon-share-alt\"})])}]\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"74f43d04-vue-loader-template\\\"}!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./menu.vue?vue&type=template&id=aaf3f05e&scoped=true&\"","import { ServerCircle } from \"@/game/comm/types/shapes\";\nimport { GlobalPoint, LocalPoint, Vector } from \"@/game/geom\";\nimport { BoundingRect } from \"@/game/shapes/boundingrect\";\nimport { Shape } from \"@/game/shapes/shape\";\nimport { gameStore } from \"@/game/store\";\nimport { calculateDelta } from \"@/game/ui/tools/utils\";\nimport { g2l, g2lz, l2g } from \"@/game/units\";\nimport { getFogColour } from \"@/game/utils\";\n\nexport class Circle extends Shape {\n    type = \"circle\";\n    r: number;\n    constructor(center: GlobalPoint, r: number, fillColour?: string, strokeColour?: string, uuid?: string) {\n        super(center, fillColour, strokeColour, uuid);\n        this.r = r || 1;\n    }\n    asDict(): ServerCircle {\n        // const base = <ServerCircle>this.getBaseDict();\n        // base.r = this.r;\n        // base.border = this.border;\n        // return base;\n        return Object.assign(this.getBaseDict(), {\n            radius: this.r,\n        });\n    }\n    fromDict(data: ServerCircle) {\n        super.fromDict(data);\n        this.r = data.radius;\n    }\n    getBoundingBox(): BoundingRect {\n        return new BoundingRect(\n            new GlobalPoint(this.refPoint.x - this.r, this.refPoint.y - this.r),\n            this.r * 2,\n            this.r * 2,\n        );\n    }\n\n    get points() {\n        return this.getBoundingBox().points;\n    }\n\n    draw(ctx: CanvasRenderingContext2D) {\n        super.draw(ctx);\n        ctx.beginPath();\n        if (this.fillColour === \"fog\") ctx.fillStyle = getFogColour();\n        else ctx.fillStyle = this.fillColour;\n        const loc = g2l(this.refPoint);\n        ctx.arc(loc.x, loc.y, g2lz(this.r), 0, 2 * Math.PI);\n        ctx.fill();\n        if (this.strokeColour !== \"rgba(0, 0, 0, 0)\") {\n            ctx.beginPath();\n            ctx.lineWidth = g2lz(5);\n            ctx.strokeStyle = this.strokeColour;\n            ctx.arc(loc.x, loc.y, g2lz(this.r), 0, 2 * Math.PI);\n            ctx.stroke();\n        }\n    }\n    contains(point: GlobalPoint): boolean {\n        return (point.x - this.refPoint.x) ** 2 + (point.y - this.refPoint.y) ** 2 < this.r ** 2;\n    }\n    center(): GlobalPoint;\n    center(centerPoint: GlobalPoint): void;\n    center(centerPoint?: GlobalPoint): GlobalPoint | void {\n        if (centerPoint === undefined) return this.refPoint;\n        this.refPoint = centerPoint;\n    }\n    visibleInCanvas(canvas: HTMLCanvasElement): boolean {\n        return this.getBoundingBox().visibleInCanvas(canvas);\n    } // TODO\n    snapToGrid() {\n        const gs = gameStore.gridSize;\n        let targetX;\n        let targetY;\n        if (((2 * this.r) / gs) % 2 === 0) {\n            targetX = Math.round(this.refPoint.x / gs) * gs;\n        } else {\n            targetX = Math.round((this.refPoint.x - gs / 2) / gs) * gs + this.r;\n        }\n        if (((2 * this.r) / gs) % 2 === 0) {\n            targetY = Math.round(this.refPoint.y / gs) * gs;\n        } else {\n            targetY = Math.round((this.refPoint.y - gs / 2) / gs) * gs + this.r;\n        }\n        const delta = calculateDelta(new Vector(targetX - this.refPoint.x, targetY - this.refPoint.y), this);\n        this.refPoint = this.refPoint.add(delta);\n        this.invalidate(false);\n    }\n    resizeToGrid() {\n        const gs = gameStore.gridSize;\n        this.r = Math.max(Math.round(this.r / gs) * gs, gs / 2);\n        this.invalidate(false);\n    }\n    resize(resizePoint: number, point: LocalPoint) {\n        const z = gameStore.zoomFactor;\n        const diff = l2g(point).subtract(this.refPoint);\n        this.r = Math.sqrt(Math.pow(diff.length(), 2) / 2);\n    }\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Tool from \"@/game/ui/tools/tool.vue\";\n\nimport { GlobalPoint } from \"@/game/geom\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { BaseRect } from \"@/game/shapes/baserect\";\nimport { Rect } from \"@/game/shapes/rect\";\nimport { gameStore } from \"@/game/store\";\nimport { l2g } from \"@/game/units\";\nimport { getMouse } from \"@/game/utils\";\nimport Component from \"vue-class-component\";\n\n@Component\nexport default class MapTool extends Tool {\n    name = \"Map\";\n    active = false;\n    xCount = 3;\n    yCount = 3;\n    startPoint: GlobalPoint | null = null;\n    rect: Rect | null = null;\n\n    onMouseDown(event: MouseEvent) {\n        const layer = layerManager.getLayer();\n        if (layer === undefined) {\n            console.log(\"No active layer!\");\n            return;\n        }\n        this.active = true;\n\n        this.startPoint = l2g(getMouse(event));\n        this.rect = new Rect(this.startPoint.clone(), 0, 0, \"rgba(0,0,0,0)\", \"black\");\n        layer.addShape(this.rect, false, false);\n    }\n    onMouseMove(event: MouseEvent) {\n        if (!this.active || this.rect === null || this.startPoint === null) return;\n        const layer = layerManager.getLayer();\n        if (layer === undefined) {\n            console.log(\"No active layer!\");\n            return;\n        }\n\n        const endPoint = l2g(getMouse(event));\n\n        this.rect.w = Math.abs(endPoint.x - this.startPoint.x);\n        this.rect.h = Math.abs(endPoint.y - this.startPoint.y);\n        this.rect.refPoint = new GlobalPoint(\n            Math.min(this.startPoint.x, endPoint.x),\n            Math.min(this.startPoint.y, endPoint.y),\n        );\n        layer.invalidate(false);\n    }\n    onMouseUp(event: MouseEvent) {\n        if (!this.active || this.rect === null) return;\n        const layer = layerManager.getLayer();\n        if (layer === undefined) {\n            console.log(\"No active layer!\");\n            return;\n        }\n        this.active = false;\n\n        if (layer.selection.length !== 1) {\n            layer.removeShape(this.rect, false, false);\n            return;\n        }\n\n        const w = this.rect.w;\n        const h = this.rect.h;\n        const sel = layer.selection[0];\n\n        if (sel instanceof BaseRect) {\n            sel.w *= (this.xCount * gameStore.gridSize) / w;\n            sel.h *= (this.yCount * gameStore.gridSize) / h;\n        }\n\n        layer.removeShape(this.rect, false, false);\n    }\n}\n","import { render, staticRenderFns } from \"./load.vue?vue&type=template&id=ff095222&\"\nimport script from \"./load.vue?vue&type=script&lang=ts&\"\nexport * from \"./load.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"load.vue\"\nexport default component.exports","import Tool from \"@/game/ui/tools/tool.vue\";\n\nimport { sendClientOptions } from \"@/game/api/utils\";\nimport { LocalPoint } from \"@/game/geom\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { gameStore } from \"@/game/store\";\nimport { getMouse } from \"@/game/utils\";\nimport Component from \"vue-class-component\";\n\n@Component\nexport default class PanTool extends Tool {\n    name = \"Pan\";\n    panStart = new LocalPoint(0, 0);\n    active = false;\n\n    onMouseDown(event: MouseEvent) {\n        this.panStart = getMouse(event);\n        this.active = true;\n    }\n    onMouseMove(event: MouseEvent) {\n        if (!this.active) return;\n        const mouse = getMouse(event);\n        const distance = mouse.subtract(this.panStart).multiply(1 / gameStore.zoomFactor);\n        gameStore.increasePanX(Math.round(distance.x));\n        gameStore.increasePanY(Math.round(distance.y));\n        this.panStart = mouse;\n        layerManager.invalidate();\n    }\n    onMouseUp(event: MouseEvent) {\n        this.active = false;\n        sendClientOptions();\n    }\n}\n","import { render, staticRenderFns } from \"./selectcontext.vue?vue&type=template&id=44a31e42&scoped=true&\"\nimport script from \"./selectcontext.vue?vue&type=script&lang=ts&\"\nexport * from \"./selectcontext.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./selectcontext.vue?vue&type=style&index=0&id=44a31e42&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"44a31e42\",\n  null\n  \n)\n\ncomponent.options.__file = \"selectcontext.vue\"\nexport default component.exports","import Vue from \"vue\";\n\nimport { app } from \"@/main\";\n\n// Reference: https://stackoverflow.com/questions/105034/create-guid-uuid-in-javascript\nexport function uuidv4() {\n    return \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g, c => {\n        const r = (Math.random() * 16) | 0;\n        const v = c === \"x\" ? r : (r & 0x3) | 0x8;\n        return v.toString(16);\n    });\n}\n\nexport function capitalize(text: string) {\n    return text.charAt(0).toUpperCase() + text.slice(1);\n}\n\nexport function alphSort(a: string, b: string) {\n    if (a.toLowerCase() < b.toLowerCase()) return -1;\n    else return 1;\n}\n\nexport function getHTMLFont(element: HTMLElement) {\n    let font = element.style.font;\n    while (font === null && element.parentElement !== null) {\n        element = element.parentElement;\n        font = element.style.font;\n    }\n    if (font === null) font = window.getComputedStyle(document.body).getPropertyValue(\"font\");\n    return font;\n}\n\nexport function getHTMLTextWidth(text: string, font: string): number {\n    let fakeElement = <HTMLCanvasElement>document.getElementById(\"emptycanvas\");\n    if (fakeElement === null) {\n        fakeElement = document.createElement(\"canvas\");\n        fakeElement.id = \"emptycanvas\";\n        fakeElement.style.display = \"\";\n        document.body.appendChild(fakeElement);\n    }\n    const ctx = fakeElement.getContext(\"2d\")!;\n    ctx.font = font;\n    return Math.ceil(ctx.measureText(text).width);\n}\n\nexport function partition<T>(arr: T[], predicate: (n: T) => boolean) {\n    const ret: T[][] = [[], []];\n    arr.forEach(n => (predicate(n) ? ret[1].push(n) : ret[0].push(n)));\n    return ret;\n}\n\nexport function calcFontScale(ctx: CanvasRenderingContext2D, text: string, width: number, height: number) {\n    const points = Number(ctx.font.split(\"px\")[0]) * 0.2;\n    const fontWidth = ctx.measureText(text).width;\n    return Math.min(width / fontWidth, height / points);\n}\n\nexport function fixedEncodeURIComponent(str: string) {\n    return encodeURIComponent(str).replace(/[!'()*]/g, c => {\n        return \"%\" + c.charCodeAt(0).toString(16);\n    });\n}\n\nexport class OrderedMap<K, V> {\n    keys: K[] = [];\n    values: V[] = [];\n\n    get length() {\n        return this.keys.length;\n    }\n\n    get(key: K) {\n        return this.values[this.keys.indexOf(key)];\n    }\n    getIndexValue(idx: number) {\n        return this.values[idx];\n    }\n    getIndexKey(idx: number) {\n        return this.keys[idx];\n    }\n    set(key: K, value: V) {\n        this.keys.push(key);\n        this.values.push(value);\n    }\n    has(key: K) {\n        return this.indexOf(key) >= 0;\n    }\n    indexOf(element: K) {\n        return this.keys.indexOf(element);\n    }\n    remove(element: K) {\n        const idx = this.indexOf(element);\n        this.keys.splice(idx, 1);\n        this.values.splice(idx, 1);\n    }\n}\n\nexport function getComponent<T extends Vue>(): T {\n    return <T>app.$children[0].$refs.activeComponent;\n}\n\nexport function getRef<T extends Vue>(ref: string): T {\n    const active = <Vue>app.$children[0].$refs.activeComponent;\n    return <T>active.$refs[ref];\n}\n","import { render, staticRenderFns } from \"./contextMenu.vue?vue&type=template&id=606797b4&\"\nimport script from \"./contextMenu.vue?vue&type=script&lang=ts&\"\nexport * from \"./contextMenu.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"contextMenu.vue\"\nexport default component.exports","import { EdgeCirculator, Point, Sign, Triangle, Vertex } from \"./tds\";\n\ntype Line = number[];\n\nexport function cw(index: number) {\n    return (index + 2) % 3;\n}\n\nexport function ccw(index: number) {\n    return (index + 1) % 3;\n}\n\nexport function edgeInfo(va: Vertex, vb: Vertex) {\n    const ec = new EdgeCirculator(va, null);\n    if (ec.valid) {\n        do {\n            const indv = 3 - ec.t!.indexV(va) - ec.ri;\n            const v = ec.t!.vertices[indv]!;\n            if (!v.infinite) {\n                if (v === vb) {\n                    return { includes: true, vi: vb, fr: ec.t!, i: ec.ri };\n                } else {\n                    const orient = orientation(va.point!, vb.point!, v.point!);\n                    if (orient === Sign.COLLINEAR && collinearBetween(va.point!, v.point!, vb.point!)) {\n                        return { includes: true, vi: v, fr: ec.t!, i: ec.ri };\n                    }\n                }\n            }\n        } while (ec.next());\n    }\n    return { includes: false };\n}\n\nexport function collinearBetween(p: Point, q: Point, r: Point): boolean {\n    let cPQ: Sign;\n    let cQR: Sign;\n    if (compare(0, p, r) === Sign.EQUAL) {\n        cPQ = compare(1, p, q);\n        cQR = compare(1, q, r);\n    } else {\n        cPQ = compare(0, p, q);\n        cQR = compare(0, q, r);\n    }\n    return (cPQ === Sign.SMALLER && cQR === Sign.SMALLER) || (cPQ === Sign.LARGER && cQR === Sign.LARGER);\n}\n\nfunction compare(index: number, a: Point, b: Point): Sign {\n    if (a[index] < b[index]) return Sign.SMALLER;\n    if (a[index] > b[index]) return Sign.LARGER;\n    return Sign.EQUAL;\n}\n\nexport function orientation(p: Point, q: Point, r: Point) {\n    const px = p[0];\n    const py = p[1];\n    const qx = q[0];\n    const qy = q[1];\n    const rx = r[0];\n    const ry = r[1];\n    const pqx = qx - px;\n    const pqy = qy - py;\n    const prx = rx - px;\n    const pry = ry - py;\n    const det = determinant(pqx, pqy, prx, pry);\n    let maxX = Math.abs(pqx);\n    let maxY = Math.abs(pqy);\n    const aprX = Math.abs(prx);\n    const aprY = Math.abs(pry);\n    if (maxX < aprX) maxX = aprX;\n    if (maxY < aprY) maxY = aprY;\n    if (maxX > maxY) [maxX, maxY] = [maxY, maxX];\n    // underflow proection in eps computation?? Math.sqrt(Number.MIN_VALUE, Number.EPSILON)\n    if (maxX < 2e-162 && maxX === 0) {\n        return Sign.ZERO;\n    }\n    // overflow protection in det computation\n    if (maxY < 1e153) {\n        const eps = Number.EPSILON * maxX * maxY;\n        if (det > eps) return Sign.POSITIVE;\n        if (det < -eps) return Sign.NEGATIVE;\n    }\n    return Sign.ZERO;\n}\n\nexport function determinant(a00: number, a01: number, a10: number, a11: number) {\n    return a00 * a11 - a01 * a10;\n}\n\nexport function hasInexactNegativeOrientation(p: Point, q: Point, r: Point) {\n    return determinant(q[0] - p[0], q[1] - p[1], r[0] - p[0], r[1] - p[1]) < 0;\n}\n\nexport function sideOfOrientedCircle(t: Triangle, p: Point, perturb: boolean): Sign {\n    if (!t.isInfinite())\n        return sideOfOrientedCircleP(t.vertices[0]!.point!, t.vertices[1]!.point!, t.vertices[2]!.point!, p, perturb);\n    throw new Error(\"SSS\");\n}\n\nfunction sideOfOrientedCircleP(p0: Point, p1: Point, p2: Point, p: Point, perturb: boolean): Sign {\n    const os = getOrientedSide(p0, p1, p2, p);\n    if (os !== Sign.ON_ORIENTED_BOUNDARY || !perturb) return os;\n    const points = [p0, p1, p2, p];\n    points.sort((a, b) => a[0] - b[0] || a[1] - b[1]);\n    for (const point of points.reverse()) {\n        if (point === p) return Sign.ON_NEGATIVE_SIDE;\n        let o = orientation(p0, p1, p);\n        if (point === p2 && o !== Sign.COLLINEAR) return o;\n        o = orientation(p0, p, p2);\n        if (point === p1 && o !== Sign.COLLINEAR) return o;\n        o = orientation(p, p1, p2);\n        if (point === p0 && o !== Sign.COLLINEAR) return o;\n    }\n    return Sign.ON_NEGATIVE_SIDE;\n}\n\nexport function xyEqual(p: Point, q: Point) {\n    return p[0] === q[0] && p[1] === q[1];\n}\n\nexport function xySmaller(p: Point, q: Point) {\n    return p[0] < q[0] || (p[0] === q[0] && p[1] < q[1]);\n}\n\nexport function xyCompare(p: Point, q: Point) {\n    if (xySmaller(p, q)) return Sign.SMALLER;\n    if (xyEqual(p, q)) return Sign.EQUAL;\n    return Sign.LARGER;\n}\n\nfunction getOrientedSide(p: Point, q: Point, r: Point, t: Point): Sign {\n    const qpx = q[0] - p[0];\n    const qpy = q[1] - p[1];\n    const rpx = r[0] - p[0];\n    const rpy = r[1] - p[1];\n    const tpx = t[0] - p[0];\n    const tpy = t[1] - p[1];\n    const tqx = t[0] - q[0];\n    const tqy = t[1] - q[1];\n    const rqx = r[0] - q[0];\n    const rqy = r[1] - q[1];\n\n    const det = determinant(qpx * tpy - qpy * tpx, tpx * tqx + tpy * tqy, qpx * rpy - qpy * rpx, rpx * rqx + rpy * rqy);\n    let maxx = Math.abs(qpx);\n    let maxy = Math.abs(qpy);\n    const arpx = Math.abs(rpx);\n    const arpy = Math.abs(rpy);\n    const atqx = Math.abs(tqx);\n    const atqy = Math.abs(tqy);\n    const atpx = Math.abs(tpx);\n    const atpy = Math.abs(tpy);\n    const arqx = Math.abs(rqx);\n    const arqy = Math.abs(rqy);\n\n    if (maxx < arpx) maxx = arpx;\n    if (maxx < atpx) maxx = atpx;\n    if (maxx < atqx) maxx = atqx;\n    if (maxx < arqx) maxx = arqx;\n\n    if (maxy < arpy) maxy = arpy;\n    if (maxy < atpy) maxy = atpy;\n    if (maxy < atqy) maxy = atqy;\n    if (maxy < arqy) maxy = arqy;\n\n    if (maxx > maxy) [maxx, maxy] = [maxy, maxx];\n\n    if (maxx < 1e-73 && maxx === 0) return Sign.ON_ORIENTED_BOUNDARY;\n    // sqrt(sqrt(max_double/16\n    else if (maxy < 1e76) {\n        const eps = Number.EPSILON * maxx * maxy * (maxy * maxy);\n        if (det > eps) return Sign.ON_POSITIVE_SIDE;\n        if (det < -eps) return Sign.ON_NEGATIVE_SIDE;\n    }\n\n    return Sign.ZERO;\n}\n\nfunction segSegDoIntersectCrossing(p1: Point, p2: Point, p3: Point, p4: Point): boolean {\n    switch (orientation(p1, p2, p3)) {\n        case Sign.LEFT_TURN:\n            return orientation(p3, p4, p2) !== Sign.RIGHT_TURN;\n        case Sign.RIGHT_TURN:\n            return orientation(p3, p4, p2) !== Sign.LEFT_TURN;\n        case Sign.COLLINEAR:\n            return true;\n    }\n}\n\nfunction segSegDoIntersectContained(p1: Point, p2: Point, p3: Point, p4: Point): boolean {\n    switch (orientation(p1, p2, p3)) {\n        case Sign.LEFT_TURN:\n            return orientation(p1, p2, p4) !== Sign.LEFT_TURN;\n        case Sign.RIGHT_TURN:\n            return orientation(p1, p2, p4) !== Sign.RIGHT_TURN;\n        case Sign.COLLINEAR:\n            return true;\n    }\n}\n\nexport function intersection(pa: Point, pb: Point, pc: Point, pd: Point) {\n    const i = getIntersectionType(pa, pb, pc, pd);\n    switch (i.intersectionType) {\n        case IntersectionType.POINT:\n            return i.point!;\n        case IntersectionType.NO_INTERSECTION:\n            return null;\n    }\n    throw new Error(\"sdfgighowen\");\n}\n\nenum IntersectionType {\n    NO_INTERSECTION,\n    POINT,\n    SEGMENT,\n}\n\nfunction getLine(p0: Point, p1: Point): Line {\n    if (p0[0] === p1[0]) return [1, 0, -p0[0]];\n    if (p0[1] === p1[1]) return [0, 1, -p0[1]];\n    const x = p1[0] - p0[0];\n    const y = p1[1] - p0[1];\n    return [-y, x, -x * p0[1] + y * p0[0]];\n}\n\nfunction getIntersectionType(pa: Point, pb: Point, pc: Point, pd: Point) {\n    if (!doIntersect(pa, pb, pc, pd)) return { intersectionType: IntersectionType.NO_INTERSECTION, point: null };\n    const l1 = getLine(pa, pb);\n    const l2 = getLine(pc, pd);\n    const info = getIntersectionTypeLine(l1, l2);\n    switch (info.intersectionType) {\n        case IntersectionType.POINT: {\n            return info;\n        }\n    }\n    throw new Error(\"gzseuihgpib\");\n}\n\nfunction getIntersectionTypeLine(la: Line, lb: Line) {\n    const denom = la[0] * lb[1] - lb[0] * la[1];\n    const nom1 = la[1] * lb[2] - lb[1] * la[2];\n    const nom2 = lb[0] * la[2] - la[0] * lb[2];\n    return {\n        intersectionType: IntersectionType.POINT,\n        point: [nom1 / denom, nom2 / denom],\n    };\n}\n\nfunction doIntersect(A1: Point, A2: Point, B1: Point, B2: Point): boolean {\n    if (xySmaller(A1, A2)) {\n        if (xySmaller(B1, B2)) {\n            if (xySmaller(A2, B1) || xySmaller(B2, A1)) return false;\n        } else {\n            if (xySmaller(A2, B2) || xySmaller(B1, A1)) return false;\n        }\n    } else {\n        if (xySmaller(B1, B2)) {\n            if (xySmaller(A1, B1) || xySmaller(B2, A2)) return false;\n        } else {\n            if (xySmaller(A1, B2) || xySmaller(B1, A2)) return false;\n        }\n    }\n    if (xySmaller(A1, A2)) {\n        if (xySmaller(B1, B2)) {\n            switch (xyCompare(A1, B1)) {\n                case Sign.SMALLER: {\n                    switch (xyCompare(A2, B1)) {\n                        case Sign.SMALLER:\n                            return false;\n                        case Sign.EQUAL:\n                            return true;\n                        default: {\n                            switch (xyCompare(A2, B2)) {\n                                case Sign.SMALLER:\n                                    return segSegDoIntersectCrossing(A1, A2, B1, B2);\n                                case Sign.EQUAL:\n                                    return true;\n                                default:\n                                    return segSegDoIntersectContained(A1, A2, B1, B2);\n                            }\n                        }\n                    }\n                }\n                case Sign.EQUAL:\n                    return true;\n                default:\n                    switch (xyCompare(B2, A1)) {\n                        case Sign.SMALLER:\n                            return false;\n                        case Sign.EQUAL:\n                            return true;\n                        default: {\n                            switch (xyCompare(B2, A2)) {\n                                case Sign.SMALLER:\n                                    return segSegDoIntersectCrossing(B1, B2, A1, A2);\n                                case Sign.EQUAL:\n                                    return true;\n                                default:\n                                    return segSegDoIntersectContained(B1, B2, A1, A2);\n                            }\n                        }\n                    }\n            }\n        } else {\n            switch (xyCompare(A1, B2)) {\n                case Sign.SMALLER: {\n                    switch (xyCompare(A2, B2)) {\n                        case Sign.SMALLER:\n                            return false;\n                        case Sign.EQUAL:\n                            return true;\n                        default: {\n                            switch (xyCompare(A2, B1)) {\n                                case Sign.SMALLER:\n                                    return segSegDoIntersectCrossing(A1, A2, B2, B1);\n                                case Sign.EQUAL:\n                                    return true;\n                                default:\n                                    return segSegDoIntersectContained(A1, A2, B2, B1);\n                            }\n                        }\n                    }\n                }\n                case Sign.EQUAL:\n                    return true;\n                default:\n                    switch (xyCompare(B1, A1)) {\n                        case Sign.SMALLER:\n                            return false;\n                        case Sign.EQUAL:\n                            return true;\n                        default: {\n                            switch (xyCompare(B1, A2)) {\n                                case Sign.SMALLER:\n                                    return segSegDoIntersectCrossing(B2, B1, A1, A2);\n                                case Sign.EQUAL:\n                                    return true;\n                                default:\n                                    return segSegDoIntersectContained(B2, B1, A1, A2);\n                            }\n                        }\n                    }\n            }\n        }\n    } else {\n        if (xySmaller(B1, B2)) {\n            switch (xyCompare(A2, B1)) {\n                case Sign.SMALLER: {\n                    switch (xyCompare(A1, B1)) {\n                        case Sign.SMALLER:\n                            return false;\n                        case Sign.EQUAL:\n                            return true;\n                        default: {\n                            switch (xyCompare(A1, B2)) {\n                                case Sign.SMALLER:\n                                    return segSegDoIntersectCrossing(A2, A1, B1, B2);\n                                case Sign.EQUAL:\n                                    return true;\n                                default:\n                                    return segSegDoIntersectContained(A2, A1, B1, B2);\n                            }\n                        }\n                    }\n                }\n                case Sign.EQUAL:\n                    return true;\n                default:\n                    switch (xyCompare(B2, A2)) {\n                        case Sign.SMALLER:\n                            return false;\n                        case Sign.EQUAL:\n                            return true;\n                        default: {\n                            switch (xyCompare(B2, A1)) {\n                                case Sign.SMALLER:\n                                    return segSegDoIntersectCrossing(B1, B2, A2, A1);\n                                case Sign.EQUAL:\n                                    return true;\n                                default:\n                                    return segSegDoIntersectContained(B1, B2, A2, A1);\n                            }\n                        }\n                    }\n            }\n        } else {\n            switch (xyCompare(A2, B2)) {\n                case Sign.SMALLER: {\n                    switch (xyCompare(A1, B2)) {\n                        case Sign.SMALLER:\n                            return false;\n                        case Sign.EQUAL:\n                            return true;\n                        default: {\n                            switch (xyCompare(A1, B1)) {\n                                case Sign.SMALLER:\n                                    return segSegDoIntersectCrossing(A2, A1, B2, B1);\n                                case Sign.EQUAL:\n                                    return true;\n                                default:\n                                    return segSegDoIntersectContained(A2, A1, B2, B1);\n                            }\n                        }\n                    }\n                }\n                case Sign.EQUAL:\n                    return true;\n                default:\n                    switch (xyCompare(B1, A2)) {\n                        case Sign.SMALLER:\n                            return false;\n                        case Sign.EQUAL:\n                            return true;\n                        default: {\n                            switch (xyCompare(B1, A1)) {\n                                case Sign.SMALLER:\n                                    return segSegDoIntersectCrossing(B2, B1, A2, A1);\n                                case Sign.EQUAL:\n                                    return true;\n                                default:\n                                    return segSegDoIntersectContained(B2, B1, A2, A1);\n                            }\n                        }\n                    }\n            }\n        }\n    }\n}\n\nfunction nextUp(x: number) {\n    if (x !== x) {\n        return x;\n    }\n    if (x === -1 / 0) {\n        return -Number.MAX_VALUE;\n    }\n    if (x === +1 / 0) {\n        return +1 / 0;\n    }\n    if (x === +Number.MAX_VALUE) {\n        return +1 / 0;\n    }\n    let y = x * (x < 0 ? 1 - Number.EPSILON / 2 : 1 + Number.EPSILON);\n    if (y === x) {\n        y = Number.MIN_VALUE * Number.EPSILON > 0 ? x + Number.MIN_VALUE * Number.EPSILON : x + Number.MIN_VALUE;\n    }\n    if (y === +1 / 0) {\n        y = +Number.MAX_VALUE;\n    }\n    const b = x + (y - x) / 2;\n    if (x < b && b < y) {\n        y = b;\n    }\n    const c = (y + x) / 2;\n    if (x < c && c < y) {\n        y = c;\n    }\n    return y === 0 ? -0 : y;\n}\n\nexport function ulp(x: number) {\n    return x < 0 ? nextUp(x) - x : x + nextUp(-x);\n}\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./asset_node.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./asset_node.vue?vue&type=script&lang=ts&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./edit_dialog.vue?vue&type=style&index=0&id=7c80ae3a&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./edit_dialog.vue?vue&type=style&index=0&id=7c80ae3a&scoped=true&lang=css&\"","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\nimport { Prop } from \"vue-property-decorator\";\n\n@Component\nexport default class Modal extends Vue {\n    @Prop(Boolean) visible!: boolean;\n    @Prop({ type: Boolean, default: true }) mask!: boolean;\n\n    $refs!: {\n        container: HTMLElement;\n    };\n\n    positioned = false;\n    offsetX = 0;\n    offsetY = 0;\n    screenX = 0;\n    screenY = 0;\n    dragging = false;\n\n    // Example of mounted required: opening note\n    mounted() {\n        this.updatePosition();\n    }\n    // Example of updated required: opening initiative\n    updated() {\n        this.updatePosition();\n    }\n\n    close(event: MouseEvent) {\n        this.$emit(\"close\");\n    }\n    updatePosition() {\n        if (!this.positioned) {\n            const container = <any>this.$refs.container;\n            if (container.offsetWidth === 0 && container.offsetHeight === 0) return;\n            this.$refs.container.style.left = (window.innerWidth - container.offsetWidth) / 2 + \"px\";\n            this.$refs.container.style.top = (window.innerHeight - container.offsetHeight) / 2 + \"px\";\n            this.positioned = true;\n        }\n    }\n    dragStart(event: DragEvent) {\n        if (event === null || event.dataTransfer === null) return;\n        event.dataTransfer.setData(\"Hack\", \"\");\n        // Because the drag event is happening on the header, we have to change the drag image\n        // in order to give the impression that the entire modal is dragged.\n        event.dataTransfer.setDragImage(<Element>this.$refs.container, event.offsetX, event.offsetY);\n        this.offsetX = event.offsetX;\n        this.offsetY = event.offsetY;\n        this.screenX = event.screenX;\n        this.screenY = event.screenY;\n        this.dragging = true;\n    }\n    dragEnd(event: DragEvent) {\n        this.dragging = false;\n        let left = event.clientX - this.offsetX;\n        let top = event.clientY - this.offsetY;\n        if (event.clientX === 0 && event.clientY === 0 && event.pageX === 0 && event.pageY === 0) {\n            left = parseInt(this.$refs.container.style.left!, 10) - (this.screenX - event.screenX);\n            top = parseInt(this.$refs.container.style.top!, 10) - (this.screenY - event.screenY);\n        }\n        if (left < 0) left = 0;\n        if (left > window.innerWidth - 100) left = window.innerWidth - 100;\n        if (top < 0) top = 0;\n        if (top > window.innerHeight - 100) top = window.innerHeight - 100;\n        this.$refs.container.style.left = left + \"px\";\n        this.$refs.container.style.top = top + \"px\";\n        this.$refs.container.style.display = \"block\";\n    }\n    dragOver(event: DragEvent) {\n        if (this.dragging) this.$refs.container.style.display = \"none\";\n    }\n}\n","import io from \"socket.io-client\";\n\nimport { Asset } from \"@/core/comm/types\";\nimport { assetStore } from \"./store\";\n\nexport const socket = io(location.protocol + \"//\" + location.host + \"/pa_assetmgmt\", { autoConnect: false });\n\n// export const socket = io.connect(location.protocol + \"//\" + location.host + \"/pa_assetmgmt\");\nsocket.on(\"connect\", () => {\n    console.log(\"Connected\");\n});\nsocket.on(\"disconnect\", () => {\n    console.log(\"Disconnected\");\n});\nsocket.on(\"redirect\", (destination: string) => {\n    console.log(\"redirecting\");\n    window.location.href = destination;\n});\nsocket.on(\"Folder.Root.Set\", (root: number) => {\n    assetStore.setRoot(root);\n});\nsocket.on(\"Folder.Set\", (folder: Asset) => {\n    assetStore.clear();\n    if (folder.children) {\n        for (const child of folder.children) {\n            assetStore.idMap.set(child.id, child);\n            if (child.file_hash) {\n                assetStore.files.push(child.id);\n            } else {\n                assetStore.folders.push(child.id);\n            }\n        }\n    }\n});\nsocket.on(\"Folder.Create\", (folder: Asset) => {\n    assetStore.folders.push(folder.id);\n    assetStore.idMap.set(folder.id, folder);\n});\nsocket.on(\"Asset.Upload.Finish\", (asset: Asset) => {\n    assetStore.idMap.set(asset.id, asset);\n    assetStore.files.push(asset.id);\n});\n","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tools.vue?vue&type=style&index=0&id=1fee50f5&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tools.vue?vue&type=style&index=0&id=1fee50f5&scoped=true&lang=css&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./game.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./game.vue?vue&type=style&index=0&lang=css&\"","import { GlobalPoint, LocalPoint } from \"@/game/geom\";\nimport { BoundingRect } from \"@/game/shapes/boundingrect\";\nimport { Shape } from \"@/game/shapes/shape\";\nimport { g2lx, g2ly, g2lz, l2g } from \"@/game/units\";\nimport { getFogColour } from \"@/game/utils\";\nimport { ServerMultiLine } from \"../comm/types/shapes\";\n\nexport class MultiLine extends Shape {\n    type = \"multiline\";\n    _points: GlobalPoint[] = [];\n    lineWidth: number;\n    constructor(\n        startPoint: GlobalPoint,\n        points?: GlobalPoint[],\n        lineWidth?: number,\n        strokeColour?: string,\n        uuid?: string,\n    ) {\n        super(startPoint, \"rgba(0, 0, 0, 0)\", strokeColour || \"#000\", uuid);\n        this._points = points || [];\n        this.lineWidth = lineWidth || 3;\n    }\n\n    get refPoint() {\n        return this._refPoint;\n    }\n    set refPoint(point: GlobalPoint) {\n        const delta = point.subtract(this._refPoint);\n        this._refPoint = point;\n        for (let i = 0; i < this._points.length; i++) this._points[i] = this._points[i].add(delta);\n    }\n\n    asDict() {\n        return Object.assign(this.getBaseDict(), {\n            line_width: this.lineWidth,\n            points: this._points.map(p => ({ x: p.x, y: p.y })),\n        });\n    }\n    fromDict(data: ServerMultiLine) {\n        super.fromDict(data);\n        this._points = data.points.map(p => new GlobalPoint(p.x, p.y));\n    }\n    get points() {\n        return this._points.map(point => [point.x, point.y]);\n    }\n    getBoundingBox(): BoundingRect {\n        let minx: number = this.refPoint.x;\n        let maxx: number = this.refPoint.x;\n        let miny: number = this.refPoint.y;\n        let maxy: number = this.refPoint.y;\n        for (const p of this._points) {\n            if (p.x < minx) minx = p.x;\n            if (p.x > maxx) maxx = p.x;\n            if (p.y < miny) miny = p.y;\n            if (p.y > maxy) maxy = p.y;\n        }\n        return new BoundingRect(new GlobalPoint(minx, miny), maxx - minx, maxy - miny);\n    }\n    draw(ctx: CanvasRenderingContext2D) {\n        super.draw(ctx);\n        ctx.beginPath();\n        ctx.lineCap = \"round\";\n        ctx.lineJoin = \"round\";\n        ctx.moveTo(g2lx(this.refPoint.x), g2ly(this.refPoint.y));\n        for (const p of this._points) ctx.lineTo(g2lx(p.x), g2ly(p.y));\n        if (this.strokeColour === \"fog\") ctx.strokeStyle = getFogColour();\n        else ctx.strokeStyle = this.strokeColour;\n        ctx.lineWidth = g2lz(this.lineWidth);\n        ctx.stroke();\n    }\n    contains(point: GlobalPoint): boolean {\n        return this.getBoundingBox().contains(point);\n    }\n\n    center(): GlobalPoint;\n    center(centerPoint: GlobalPoint): void;\n    center(centerPoint?: GlobalPoint): GlobalPoint | void {\n        return this.getBoundingBox().center();\n    }\n    visibleInCanvas(canvas: HTMLCanvasElement): boolean {\n        return this.getBoundingBox().visibleInCanvas(canvas);\n    } // TODO\n    snapToGrid(): void {}\n    resizeToGrid(): void {}\n    resize(resizePoint: number, point: LocalPoint): void {\n        if (resizePoint === 0) this._refPoint = l2g(point);\n        else this._points[resizePoint - 1] = l2g(point);\n    }\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"outer\",on:{\"click\":function($event){if($event.target !== $event.currentTarget){ return null; }return _vm.open($event)}}},[_c('div',{staticClass:\"current-color\",style:(_vm.transparent ? 'background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAIAAADZF8uwAAAAGUlEQVQYV2M4gwH+YwCGIasIUwhT25BVBADtzYNYrHvv4gAAAABJRU5ErkJggg==)' : 'background-color:' + _vm.color),on:{\"click\":function($event){if($event.target !== $event.currentTarget){ return null; }return _vm.open($event)}}}),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.display),expression:\"display\"}],staticClass:\"mask\",on:{\"click\":function($event){if($event.target !== $event.currentTarget){ return null; }return _vm.closePicker($event)}}}),_c('chrome-picker',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.display),expression:\"display\"}],ref:\"chromePicker\",style:({position: 'fixed', left:_vm.left + 'px', top:_vm.top + 'px', 'z-index': 9999}),attrs:{\"value\":_vm.color,\"tabindex\":\"-1\"},on:{\"input\":_vm.updateColor}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"74f43d04-vue-loader-template\\\"}!../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./colorpicker.vue?vue&type=template&id=b4f2c0b0&scoped=true&\"","import { render, staticRenderFns } from \"./draw.vue?vue&type=template&id=639cd890&scoped=true&\"\nimport script from \"./draw.vue?vue&type=script&lang=ts&\"\nexport * from \"./draw.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./draw.vue?vue&type=style&index=0&id=639cd890&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"639cd890\",\n  null\n  \n)\n\ncomponent.options.__file = \"draw.vue\"\nexport default component.exports","import tinycolor from \"tinycolor2\";\n\nimport { LocalPoint } from \"@/game/geom\";\nimport { gameStore } from \"@/game/store\";\n\nexport function getMouse(e: MouseEvent): LocalPoint {\n    return new LocalPoint(e.pageX, e.pageY);\n}\n\nexport function getFogColour(opposite: boolean = false): string {\n    const tc = tinycolor(gameStore.fowColour);\n    if (gameStore.IS_DM) tc.setAlpha(opposite ? 1 : gameStore.fowOpacity);\n    else tc.setAlpha(1);\n    return tc.toRgbString();\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport * as tinycolor from \"tinycolor2\";\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\n\nimport { mapState } from \"vuex\";\n\nimport ColorPicker from \"@/core/components/colorpicker.vue\";\nimport Modal from \"@/core/components/modals/modal.vue\";\n\nimport { calcFontScale } from \"@/core/utils\";\nimport { LocalPoint } from \"@/game/geom\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { CircularToken } from \"@/game/shapes/circulartoken\";\nimport { gameStore } from \"@/game/store\";\nimport { getUnitDistance, l2g } from \"@/game/units\";\nimport { Watch } from \"vue-property-decorator\";\n\n@Component({\n    components: {\n        Modal,\n        \"color-picker\": ColorPicker,\n    },\n    computed: {\n        ...mapState(\"game\", [\"unitSize\"]),\n    },\n})\nexport default class CreateTokenModal extends Vue {\n    x = 0;\n    y = 0;\n    visible = false;\n    text = \"X\";\n    fillColour = \"rgba(255, 255, 255, 1)\";\n    borderColour = \"rgba(0, 0, 0, 1)\";\n\n    mounted() {\n        this.updatePreview();\n    }\n\n    @Watch(\"text\")\n    onTextChange(newValue: string, oldValue: string) {\n        this.updatePreview();\n    }\n    @Watch(\"fillColour\")\n    onFillChange(newValue: string, oldValue: string) {\n        this.updatePreview();\n    }\n    @Watch(\"borderColour\")\n    onBorderChange(newValue: string, oldValue: string) {\n        this.updatePreview();\n    }\n\n    open(x: number, y: number) {\n        this.visible = true;\n        this.x = x;\n        this.y = y;\n    }\n    submit() {\n        const layer = layerManager.getLayer();\n        if (layer === undefined) return;\n        const token = new CircularToken(\n            l2g(new LocalPoint(this.x, this.y)),\n            getUnitDistance(gameStore.unitSize / 2),\n            this.text,\n            \"10px serif\",\n            this.fillColour,\n            this.borderColour,\n        );\n        token.addOwner(gameStore.username);\n        layer.addShape(token, true);\n        layer.invalidate(false);\n        this.visible = false;\n    }\n    updatePreview() {\n        const ctx = (<HTMLCanvasElement>this.$refs.canvas).getContext(\"2d\")!;\n        ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n        ctx.beginPath();\n        const dest = { x: ctx.canvas.width / 2, y: ctx.canvas.height / 2 };\n        const r = Math.min(dest.x, dest.y) * 0.9;\n\n        ctx.fillStyle = this.fillColour;\n\n        ctx.arc(dest.x, dest.y, r, 0, 2 * Math.PI);\n        ctx.fill();\n        if (this.borderColour !== \"rgba(0, 0, 0, 0)\") {\n            ctx.beginPath();\n            ctx.lineWidth = 5;\n            ctx.strokeStyle = this.borderColour;\n            ctx.arc(dest.x, dest.y, r, 0, 2 * Math.PI);\n            ctx.stroke();\n        }\n        ctx.save();\n        ctx.textAlign = \"center\";\n        ctx.textBaseline = \"middle\";\n        const xs = calcFontScale(ctx, this.text, r, r);\n        const ys = 0;\n        ctx.transform(xs, ys, -ys, xs, dest.x, dest.y);\n        ctx.fillStyle = tinycolor.mostReadable(this.fillColour, [\"#000\", \"#fff\"]).toHexString();\n        ctx.fillText(this.text, 0, 0);\n        ctx.restore();\n    }\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\n\nimport ConfirmDialog from \"@/core/components/modals/confirm.vue\";\nimport Modal from \"@/core/components/modals/modal.vue\";\n\nimport { getRef } from \"@/core/utils\";\nimport { Note } from \"@/game/comm/types/general\";\nimport { gameStore } from \"@/game/store\";\n\n@Component({\n    components: {\n        Modal,\n    },\n})\nexport default class NoteDialog extends Vue {\n    visible = false;\n    note: Note | null = null;\n\n    open(note: Note) {\n        this.visible = true;\n        this.note = note;\n    }\n    calcHeight() {\n        if (this.$refs.textarea) {\n            const el = <HTMLElement>this.$refs.textarea;\n            el.style.height = \"auto\";\n            el.style.height = el.scrollHeight + \"px\";\n            // Using the return value without the above did not achieve what I want, so hey /shrug\n            return el.scrollHeight + \"px\";\n        }\n        return \"100px\";\n    }\n    updateNote() {\n        if (this.note) gameStore.updateNote({ note: this.note, sync: true });\n    }\n    removeNote() {\n        getRef<ConfirmDialog>(\"confirm\")\n            .open(\"Are you sure you wish to remove this?\")\n            .then(\n                (result: boolean) => {\n                    if (result && this.note) {\n                        gameStore.removeNote({ note: this.note, sync: true });\n                        this.visible = false;\n                    }\n                },\n                () => {},\n            );\n    }\n}\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./initiative.vue?vue&type=style&index=0&id=ccaf03d6&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./initiative.vue?vue&type=style&index=0&id=ccaf03d6&scoped=true&lang=css&\"","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Component from \"vue-class-component\";\n\nimport { Watch } from \"vue-property-decorator\";\n\nimport ColorPicker from \"@/core/components/colorpicker.vue\";\nimport Tool from \"@/game/ui/tools/tool.vue\";\n\nimport { socket } from \"@/game/api/socket\";\nimport { GlobalPoint } from \"@/game/geom\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { Circle } from \"@/game/shapes/circle\";\nimport { Line } from \"@/game/shapes/line\";\nimport { MultiLine } from \"@/game/shapes/multiline\";\nimport { Polygon } from \"@/game/shapes/polygon\";\nimport { Rect } from \"@/game/shapes/rect\";\nimport { Shape } from \"@/game/shapes/shape\";\nimport { gameStore } from \"@/game/store\";\nimport { getUnitDistance, l2g } from \"@/game/units\";\nimport { getMouse } from \"@/game/utils\";\n\n@Component({\n    components: {\n        \"color-picker\": ColorPicker,\n    },\n})\nexport default class DrawTool extends Tool {\n    name = \"Draw\";\n    active = false;\n\n    startPoint: GlobalPoint | null = null;\n    shape: Shape | null = null;\n    brushHelper: Circle | null = null;\n    ruler: Line | null = null;\n\n    fillColour = \"rgba(0, 0, 0, 1)\";\n    borderColour = \"rgba(255, 255, 255, 0)\";\n\n    shapeSelect = \"square\";\n    shapes = [\"square\", \"circle\", \"draw-polygon\", \"paint-brush\"];\n    modeSelect = \"normal\";\n    modes = [\"normal\", \"reveal\", \"hide\"];\n\n    brushSize = getUnitDistance(gameStore.unitSize);\n\n    get helperSize(): number {\n        if (this.shapeSelect === \"paint-brush\") return this.brushSize / 2;\n        return getUnitDistance(this.unitSize) / 8;\n    }\n    get IS_DM(): boolean {\n        return gameStore.IS_DM;\n    }\n    get unitSize(): number {\n        return gameStore.unitSize;\n    }\n    get useGrid(): boolean {\n        return gameStore.useGrid;\n    }\n\n    @Watch(\"fillColour\")\n    onFillChange() {\n        if (this.brushHelper) this.brushHelper.fillColour = this.fillColour;\n    }\n\n    @Watch(\"modeSelect\")\n    onModeUpdate(newValue: string, oldValue: string) {\n        this.onModeChange(newValue, oldValue);\n    }\n\n    setupBrush() {\n        if (this.brushHelper === null) return;\n        if (this.modeSelect === \"reveal\" || this.modeSelect === \"hide\") {\n            this.brushHelper.options.set(\"preFogShape\", true);\n            this.brushHelper.options.set(\"skipDraw\", true);\n            this.brushHelper.fillColour = \"rgba(0, 0, 0, 1)\";\n\n            if (this.modeSelect === \"reveal\") this.brushHelper.globalCompositeOperation = \"source-over\";\n            else if (this.modeSelect === \"hide\") this.brushHelper.globalCompositeOperation = \"destination-out\";\n        } else {\n            this.brushHelper.options.delete(\"preFogShape\");\n            this.brushHelper.options.delete(\"skipDraw\");\n            this.brushHelper.globalCompositeOperation = \"source-over\";\n            this.brushHelper.fillColour = this.fillColour;\n        }\n    }\n    onModeChange(newValue: string, oldValue: string) {\n        if (this.brushHelper === null) return;\n\n        const fowLayer = layerManager.getLayer(\"fow\");\n        const normalLayer = layerManager.getLayer();\n        if (fowLayer === undefined || normalLayer === undefined) return;\n\n        this.setupBrush();\n\n        if (newValue !== \"normal\" && oldValue === \"normal\") {\n            normalLayer.removeShape(this.brushHelper, false);\n            fowLayer.addShape(this.brushHelper, false);\n        } else if (newValue === \"normal\" && oldValue !== \"normal\") {\n            normalLayer.addShape(this.brushHelper, false);\n            fowLayer.removeShape(this.brushHelper, false);\n        }\n    }\n    getLayer() {\n        if (this.modeSelect === \"normal\") return layerManager.getLayer();\n        return layerManager.getLayer(\"fow\");\n    }\n    onMouseDown(event: MouseEvent) {\n        const layer = this.getLayer();\n        if (layer === undefined) {\n            console.log(\"No active layer!\");\n            return;\n        }\n        if (!this.active) {\n            this.startPoint = l2g(getMouse(event));\n            this.active = true;\n            switch (this.shapeSelect) {\n                case \"square\": {\n                    this.shape = new Rect(this.startPoint.clone(), 0, 0, this.fillColour, this.borderColour);\n                    break;\n                }\n                case \"circle\": {\n                    this.shape = new Circle(\n                        this.startPoint.clone(),\n                        this.helperSize,\n                        this.fillColour,\n                        this.borderColour,\n                    );\n                    break;\n                }\n                case \"paint-brush\": {\n                    this.shape = new MultiLine(this.startPoint.clone(), [], this.brushSize);\n                    this.shape.fillColour = this.fillColour;\n                    break;\n                }\n                case \"draw-polygon\": {\n                    this.shape = new Polygon(this.startPoint.clone(), [], this.fillColour, this.borderColour);\n                    break;\n                }\n                default:\n                    return;\n            }\n\n            if (this.modeSelect !== \"normal\") {\n                this.shape.options.set(\"preFogShape\", true);\n                this.shape.options.set(\"skipDraw\", true);\n                this.shape.fillColour = \"rgba(0, 0, 0, 1)\";\n            }\n            if (this.modeSelect === \"reveal\") this.shape.globalCompositeOperation = \"source-over\";\n            else if (this.modeSelect === \"hide\") this.shape.globalCompositeOperation = \"destination-out\";\n\n            this.shape.addOwner(gameStore.username);\n            if (layer.name === \"fow\" && this.modeSelect === \"normal\") {\n                this.shape.visionObstruction = true;\n                this.shape.movementObstruction = true;\n            }\n            layer.addShape(this.shape, true, false, false);\n\n            // Push brushhelper to back\n            this.pushBrushBack();\n        } else if (this.shape !== null && this.shape instanceof Polygon) {\n            // For polygon draw\n            this.shape._vertices.push(l2g(getMouse(event)));\n        }\n        if (this.shape !== null && this.shape instanceof Polygon) {\n            const lastPoint = l2g(getMouse(event));\n            if (this.ruler === null) {\n                this.ruler = new Line(lastPoint, lastPoint, 3, \"black\");\n                layer.addShape(this.ruler, false);\n            } else {\n                this.ruler.refPoint = lastPoint;\n                this.ruler.endPoint = lastPoint;\n            }\n            if (this.shape.visionObstruction) gameStore.recalculateVision(true);\n            layer.invalidate(false);\n            socket.emit(\"Shape.Update\", { shape: this.shape!.asDict(), redraw: true, temporary: true });\n        }\n    }\n    onMouseMove(event: MouseEvent) {\n        const endPoint = l2g(getMouse(event));\n        const layer = this.getLayer();\n        if (layer === undefined) {\n            console.log(\"No active layer!\");\n            return;\n        }\n\n        if (this.brushHelper !== null) {\n            this.brushHelper.r = this.helperSize;\n            this.brushHelper.refPoint = endPoint;\n            if (!this.active) layer.invalidate(false);\n        }\n\n        if (!this.active || this.startPoint === null || this.shape === null) return;\n\n        switch (this.shapeSelect) {\n            case \"square\": {\n                (<Rect>this.shape).w = Math.abs(endPoint.x - this.startPoint.x);\n                (<Rect>this.shape).h = Math.abs(endPoint.y - this.startPoint.y);\n                this.shape.refPoint = new GlobalPoint(\n                    Math.min(this.startPoint.x, endPoint.x),\n                    Math.min(this.startPoint.y, endPoint.y),\n                );\n                break;\n            }\n            case \"circle\": {\n                (<Circle>this.shape).r = endPoint.subtract(this.startPoint).length();\n                break;\n            }\n            case \"paint-brush\": {\n                (<MultiLine>this.shape)._points.push(endPoint);\n                break;\n            }\n            case \"draw-polygon\": {\n                this.ruler!.endPoint = endPoint;\n                break;\n            }\n        }\n\n        if (!(this.shape instanceof Polygon)) {\n            socket.emit(\"Shape.Update\", { shape: this.shape!.asDict(), redraw: true, temporary: true });\n            if (this.shape.visionObstruction) gameStore.recalculateVision(true);\n        }\n        layer.invalidate(false);\n    }\n    onMouseUp(event: MouseEvent) {\n        if (!this.active || this.shape === null || this.shape instanceof Polygon) return;\n        if (!event.altKey && this.useGrid) {\n            this.shape.resizeToGrid();\n        }\n        this.finaliseShape();\n    }\n    onContextMenu(event: MouseEvent) {\n        if (!this.active || this.shape === null || !(this.shape instanceof Polygon)) return;\n        const layer = this.getLayer();\n        if (layer === undefined) {\n            console.log(\"No active layer!\");\n            return;\n        }\n        layer.removeShape(this.ruler!, false);\n        this.ruler = null;\n        this.finaliseShape();\n    }\n\n    private finaliseShape() {\n        if (this.shape === null) return;\n        if (this.shape.visionObstruction) gameStore.recalculateVision();\n        if (this.shape.movementObstruction) gameStore.recalculateMovement();\n        socket.emit(\"Shape.Update\", { shape: this.shape!.asDict(), redraw: true, temporary: false });\n        this.active = false;\n    }\n\n    onSelect() {\n        const layer = this.getLayer();\n        if (layer === undefined) return;\n        this.brushHelper = new Circle(new GlobalPoint(-1000, -1000), this.brushSize / 2, this.fillColour);\n        this.setupBrush();\n        layer.addShape(this.brushHelper, false); // during mode change the shape is already added\n    }\n    onDeselect() {\n        const layer = this.getLayer();\n        if (this.brushHelper !== null && layer !== undefined) layer.removeShape(this.brushHelper, false);\n        if (this.active && layer !== undefined && this.shape !== null) {\n            layer.removeShape(this.shape, true, false);\n            this.shape = null;\n            this.active = false;\n            layer.invalidate(false);\n        }\n    }\n\n    private pushBrushBack() {\n        const layer = this.getLayer();\n        if (layer === undefined) {\n            console.log(\"No active layer!\");\n            return;\n        }\n        if (this.brushHelper !== null) layer.removeShape(this.brushHelper, false);\n        this.brushHelper = new Circle(new GlobalPoint(-1000, -1000), this.brushSize / 2, this.fillColour);\n        this.setupBrush();\n        layer.addShape(this.brushHelper, false); // during mode change the shape is already added\n    }\n}\n","import { GlobalPoint, LocalPoint } from \"@/game/geom\";\nimport { BoundingRect } from \"@/game/shapes/boundingrect\";\nimport { Shape } from \"@/game/shapes/shape\";\nimport { g2lx, g2ly, l2g } from \"@/game/units\";\n\nexport class Line extends Shape {\n    type = \"line\";\n    endPoint: GlobalPoint;\n    lineWidth: number;\n    constructor(\n        startPoint: GlobalPoint,\n        endPoint: GlobalPoint,\n        lineWidth?: number,\n        strokeColour?: string,\n        uuid?: string,\n    ) {\n        super(startPoint, \"rgba(0, 0, 0, 0)\", strokeColour || \"#000\", uuid);\n        this.endPoint = endPoint;\n        this.lineWidth = lineWidth === undefined ? 1 : lineWidth;\n    }\n    asDict() {\n        return Object.assign(this.getBaseDict(), {\n            x2: this.endPoint.x,\n            y2: this.endPoint.y,\n            line_width: this.lineWidth,\n        });\n    }\n    get points() {\n        return [[this.refPoint.x, this.refPoint.y], [this.endPoint.x, this.endPoint.y]];\n    }\n    getBoundingBox(): BoundingRect {\n        return new BoundingRect(\n            new GlobalPoint(Math.min(this.refPoint.x, this.endPoint.x), Math.min(this.refPoint.y, this.endPoint.y)),\n            Math.abs(this.refPoint.x - this.endPoint.x),\n            Math.abs(this.refPoint.y - this.endPoint.y),\n        );\n    }\n    draw(ctx: CanvasRenderingContext2D) {\n        super.draw(ctx);\n        ctx.strokeStyle = this.strokeColour;\n        ctx.beginPath();\n        ctx.moveTo(g2lx(this.refPoint.x), g2ly(this.refPoint.y));\n        ctx.lineTo(g2lx(this.endPoint.x), g2ly(this.endPoint.y));\n        ctx.lineWidth = this.lineWidth;\n        ctx.stroke();\n    }\n    contains(point: GlobalPoint): boolean {\n        return false; // TODO\n    }\n\n    center(): GlobalPoint;\n    center(centerPoint: GlobalPoint): void;\n    center(centerPoint?: GlobalPoint): GlobalPoint | void {} // TODO\n    visibleInCanvas(canvas: HTMLCanvasElement): boolean {\n        return this.getBoundingBox().visibleInCanvas(canvas);\n    } // TODO\n    snapToGrid(): void {}\n    resizeToGrid(): void {}\n    resize(resizePoint: number, point: LocalPoint): void {\n        if (resizePoint === 0) this.refPoint = l2g(point);\n        else this.endPoint = l2g(point);\n    }\n}\n","// import \"./class-component-hooks\";\n\nimport axios, { AxiosResponse } from \"axios\";\nimport Vue from \"vue\";\nimport Router from \"vue-router\";\n\nVue.use(Router);\n\nimport AssetManager from \"@/assetManager/manager.vue\";\nimport Login from \"@/auth/login.vue\";\nimport Logout from \"@/auth/logout\";\nimport LoadComponent from \"@/core/components/load.vue\";\nimport Dashboard from \"@/dashboard/main.vue\";\nimport Game from \"@/game/game.vue\";\nimport Invitation from \"@/invitation/invitation\";\n\nimport { coreStore } from \"@/core/store\";\n// import { AssetManager } from \"./assetManager/assets\";\n// const AssetManager = () => import(\"./assetManager/assets\").then(m => m.AssetManager);\n\nexport const router = new Router({\n    mode: \"history\",\n    base: process.env.BASE_URL,\n    routes: [\n        {\n            path: \"/\",\n            redirect: \"/dashboard\",\n        },\n        {\n            path: \"/_load\",\n            name: \"load\",\n            component: LoadComponent,\n        },\n        {\n            path: \"/assets\",\n            component: AssetManager,\n            meta: {\n                auth: true,\n            },\n        },\n        {\n            path: \"/auth\",\n            component: { template: \"<router-view></router-view>\" },\n            children: [{ path: \"login\", component: Login }, { path: \"logout\", component: Logout }],\n        },\n        {\n            path: \"/invite/:code\",\n            component: Invitation,\n            meta: {\n                auth: true,\n            },\n        },\n        {\n            path: \"/dashboard\",\n            component: Dashboard,\n            meta: {\n                auth: true,\n            },\n        },\n        {\n            path: \"/game/:creator/:room\",\n            component: Game,\n            meta: {\n                auth: true,\n            },\n        },\n    ],\n});\n\nrouter.beforeEach((to, from, next) => {\n    if (!coreStore.initialized && to.path !== \"/_load\") {\n        next({ path: \"/_load\" });\n        axios\n            .get(\"/api/auth\")\n            .then((response: AxiosResponse) => {\n                if (response.data.auth) {\n                    coreStore.setAuthenticated(true);\n                    coreStore.setUsername(response.data.username);\n                }\n                coreStore.setInitialized(true);\n                router.push(to.path);\n            })\n            .catch(() => {\n                console.error(\"Authentication check could not be fulfilled.\");\n            });\n    } else if (to.matched.some(record => record.meta.auth) && !coreStore.authenticated) {\n        next({ path: \"/auth/login\", query: { redirect: to.path } });\n    } else {\n        next();\n    }\n});\n","\n\n\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\n\n@Component\nexport default class Tool extends Vue {\n    name = \"\";\n    selected = false;\n    active = false;\n    get detailRight(): string {\n        const rect = (<any>this.$parent.$refs[this.name + \"-selector\"])[0].getBoundingClientRect();\n        const mid = rect.left + rect.width / 2;\n\n        return `${window.innerWidth - Math.min(window.innerWidth - 25, mid + 75)}px`;\n    }\n    get detailArrow(): string {\n        const rect = (<any>this.$parent.$refs[this.name + \"-selector\"])[0].getBoundingClientRect();\n        const mid = rect.left + rect.width / 2;\n        const right = Math.min(window.innerWidth - 25, mid + 75);\n        return `${right - mid - 14}px`; // border width\n    }\n    created() {\n        this.$parent.$on(\"mousedown\", (event: MouseEvent, tool: string) => {\n            if (tool === this.name) this.onMouseDown(event);\n        });\n        this.$parent.$on(\"mouseup\", (event: MouseEvent, tool: string) => {\n            if (tool === this.name) this.onMouseUp(event);\n        });\n        this.$parent.$on(\"mousemove\", (event: MouseEvent, tool: string) => {\n            if (tool === this.name) this.onMouseMove(event);\n        });\n        this.$parent.$on(\"contextmenu\", (event: MouseEvent, tool: string) => {\n            if (tool === this.name) this.onContextMenu(event);\n        });\n        this.$parent.$on(\"tools-select-change\", (newValue: string, oldValue: string) => {\n            if (oldValue === this.name) {\n                this.selected = false;\n                this.onDeselect();\n            } else if (newValue === this.name) {\n                this.selected = true;\n                this.onSelect();\n            }\n        });\n    }\n    onSelect() {}\n    onDeselect() {}\n    onMouseDown(event: MouseEvent) {}\n    onMouseUp(event: MouseEvent) {}\n    onMouseMove(event: MouseEvent) {}\n    onContextMenu(event: MouseEvent) {}\n}\n","import { render, staticRenderFns } from \"./tools.vue?vue&type=template&id=1fee50f5&scoped=true&\"\nimport script from \"./tools.vue?vue&type=script&lang=ts&\"\nexport * from \"./tools.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./tools.vue?vue&type=style&index=0&id=1fee50f5&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1fee50f5\",\n  null\n  \n)\n\ncomponent.options.__file = \"tools.vue\"\nexport default component.exports","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tool.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tool.vue?vue&type=script&lang=ts&\"","import { InitiativeData } from \"@/game/comm/types/general\";\nimport { ServerAsset } from \"@/game/comm/types/shapes\";\nimport { GlobalPoint } from \"@/game/geom\";\nimport { BaseRect } from \"@/game/shapes/baserect\";\nimport { gameStore } from \"@/game/store\";\nimport { g2lx, g2ly, g2lz } from \"@/game/units\";\n\nexport class Asset extends BaseRect {\n    type = \"assetrect\";\n    img: HTMLImageElement;\n    src: string = \"\";\n    constructor(img: HTMLImageElement, topleft: GlobalPoint, w: number, h: number, uuid?: string) {\n        super(topleft, w, h, undefined, undefined, uuid);\n        this.img = img;\n    }\n    asDict() {\n        return Object.assign(this.getBaseDict(), {\n            src: this.src,\n        });\n    }\n    fromDict(data: ServerAsset) {\n        super.fromDict(data);\n        this.src = data.src;\n    }\n    draw(ctx: CanvasRenderingContext2D) {\n        super.draw(ctx);\n        try {\n            ctx.drawImage(this.img, g2lx(this.refPoint.x), g2ly(this.refPoint.y), g2lz(this.w), g2lz(this.h));\n        } catch (error) {\n            console.warn(`Shape ${this.uuid} could not load the image ${this.src}`);\n        }\n    }\n    getInitiativeRepr(): InitiativeData {\n        return {\n            uuid: this.uuid,\n            visible: !gameStore.IS_DM,\n            group: false,\n            source: this.src,\n            has_img: true,\n            effects: [],\n            index: Infinity,\n        };\n    }\n}\n","import {\n    BoundingBox,\n    EdgeCirculator,\n    FaceCirculator,\n    LineFaceCirculator,\n    LocateType,\n    Point,\n    Sign,\n    TDS,\n    Triangle,\n    Vertex,\n} from \"./tds\";\nimport {\n    ccw,\n    collinearBetween,\n    cw,\n    edgeInfo,\n    hasInexactNegativeOrientation,\n    intersection,\n    orientation,\n    sideOfOrientedCircle,\n    xyEqual,\n} from \"./triag\";\n\nexport type Edge = [Triangle, number];\n\nexport class CDT {\n    tds: TDS;\n    constructor() {\n        this.tds = new TDS();\n    }\n    insertConstraint(a: Point, b: Point) {\n        const va = this.insert(a);\n        const vb = this.insert(b);\n        if (va !== vb) this.insertConstraintV(va, vb);\n    }\n\n    insertConstraintV(va: Vertex, vb: Vertex) {\n        const stack = [[va, vb]];\n        while (stack.length > 0) {\n            const v = stack.pop()!;\n            const info = edgeInfo(v[0], v[1]);\n            if (info.includes) {\n                this.markConstraint(info.fr!, info.i!);\n                if (info.vi! !== v[1]) {\n                    stack.push([info.vi!, v[1]]);\n                }\n                continue;\n            }\n            const intersectionInfo = this.findIntersectedFaces(v[0], v[1]);\n            if (intersectionInfo.found) {\n                if (intersectionInfo.vi !== v[0] && intersectionInfo.vi !== v[1]) {\n                    stack.push([v[0], intersectionInfo.vi]);\n                    stack.push([intersectionInfo.vi, v[1]]);\n                } else {\n                    stack.push(v);\n                }\n                continue;\n            }\n            this.triangulateHole(intersectionInfo.intersectedFaces, intersectionInfo.listAB, intersectionInfo.listBA);\n            if (intersectionInfo.vi !== v[1]) {\n                stack.push([intersectionInfo.vi, v[1]]);\n            }\n        }\n    }\n\n    triangulateHole(intersectedFaces: Triangle[], listAB: Edge[], listBA: Edge[]) {\n        const edges: Edge[] = [];\n        this.triangulateHole2(intersectedFaces, listAB, listBA, edges);\n        this.propagatingFlipE(edges);\n    }\n\n    triangulateHole2(intersectedFaces: Triangle[], listAB: Edge[], listBA: Edge[], edges: Edge[]) {\n        if (listAB.length > 0) {\n            this.triangulateHalfHole(listAB, edges);\n            this.triangulateHalfHole(listBA, edges);\n            const fl = listAB[0][0];\n            const fr = listBA[0][0];\n            fl.neighbours[2] = fr;\n            fr.neighbours[2] = fl;\n            fl.constraints[2] = true;\n            fr.constraints[2] = true;\n\n            while (intersectedFaces.length > 0) {\n                this.tds.deleteTriangle(intersectedFaces.shift()!);\n            }\n        }\n    }\n\n    triangulateHalfHole(conflictBoundaries: Edge[], edges: Edge[]) {\n        let iC = 0;\n        let iN: number;\n        let iT: number;\n        const current = () => conflictBoundaries[iC];\n        const next = () => conflictBoundaries[iN];\n        const tempo = () => conflictBoundaries[iT];\n\n        const va = current()[0].vertices[ccw(current()[1])]!;\n        iN = iC;\n        ++iN;\n\n        let n: Triangle;\n        let n1: Triangle;\n        let n2: Triangle;\n        let ind: number;\n        let ind1: number;\n        let ind2: number;\n        do {\n            n1 = current()[0];\n            ind1 = current()[1];\n            if (n1.neighbours[ind1] !== null) {\n                n = n1.neighbours[ind1]!;\n                ind = cw(n.indexV(n1.vertices[cw(ind1)]!));\n                n1 = n.neighbours[ind]!;\n                ind1 = this.tds.mirrorIndex(n, ind);\n            }\n            n2 = next()[0];\n            ind2 = next()[1];\n            if (n2.neighbours[ind2] !== null) {\n                n = n2.neighbours[ind2]!;\n                ind = cw(n.indexV(n2.vertices[cw(ind2)]!));\n                n2 = n.neighbours[ind]!;\n                ind2 = this.tds.mirrorIndex(n, ind);\n            }\n            const v0 = n1.vertices[ccw(ind1)]!;\n            const v1 = n1.vertices[cw(ind1)]!;\n            const v2 = n2.vertices[cw(ind2)]!;\n            const orient = orientation(v0.point!, v1.point!, v2.point!);\n            switch (orient) {\n                case Sign.RIGHT_TURN: {\n                    const newlf = this.tds.createTriangle(v0, v2, v1, null, null, null);\n                    edges.push([newlf, 2]);\n                    newlf.neighbours[1] = n1;\n                    newlf.neighbours[0] = n2;\n                    n1.neighbours[ind1] = newlf;\n                    n2.neighbours[ind2] = newlf;\n                    if (n1.isConstrained(ind1)) newlf.constraints[1] = true;\n                    if (n2.isConstrained(ind2)) newlf.constraints[0] = true;\n                    v0.triangle = newlf;\n                    v1.triangle = newlf;\n                    v2.triangle = newlf;\n                    iT = iC + 1;\n                    conflictBoundaries.splice(iC, 0, [newlf, 2]);\n                    conflictBoundaries.splice(Math.max(iT, iN), 1);\n                    conflictBoundaries.splice(Math.min(iT, iN), 1);\n                    iN = iC;\n                    if (v0 !== va) --iC;\n                    else ++iN;\n                    break;\n                }\n                case Sign.LEFT_TURN:\n                case Sign.COLLINEAR: {\n                    ++iC;\n                    ++iN;\n                    break;\n                }\n            }\n        } while (iN < conflictBoundaries.length);\n    }\n\n    findIntersectedFaces(vaa: Vertex, vbb: Vertex) {\n        const aa = vaa.point!;\n        const bb = vbb.point!;\n        const listAB: Edge[] = [];\n        const listBA: Edge[] = [];\n        const intersectedFaces: Triangle[] = [];\n        const lfc = new LineFaceCirculator(vaa, this, bb);\n        let ind = lfc.pos!.indexV(vaa);\n        let vi: Vertex;\n        if (lfc.pos!.isConstrained(ind)) {\n            vi = this.intersect(lfc.pos!, ind, vaa, vbb);\n            return { found: true, vi, listAB, listBA, intersectedFaces };\n        }\n        let lf = lfc.pos!.neighbours[ccw(ind)]!;\n        let rf = lfc.pos!.neighbours[cw(ind)]!;\n        listAB.push([lf, lf.indexT(lfc.pos!)]);\n        listBA.unshift([rf, rf.indexT(lfc.pos!)]);\n        intersectedFaces.unshift(lfc.pos!);\n        let previousFace = lfc.pos!;\n        lfc.next();\n        ind = lfc.pos!.indexT(previousFace);\n        let currentVertex = lfc.pos!.vertices[ind]!;\n        let done = false;\n        while (currentVertex !== vbb && !done) {\n            let i1: number;\n            let i2: number;\n            const orient = orientation(aa, bb, currentVertex.point!);\n            switch (orient) {\n                case Sign.COLLINEAR: {\n                    done = true;\n                    break;\n                }\n                case Sign.LEFT_TURN:\n                case Sign.RIGHT_TURN: {\n                    if (orient === Sign.LEFT_TURN) {\n                        i1 = ccw(ind);\n                        i2 = cw(ind);\n                    } else {\n                        i1 = cw(ind);\n                        i2 = ccw(ind);\n                    }\n                    if (lfc.pos!.isConstrained(i1)) {\n                        vi = this.intersect(lfc.pos!, i1, vaa, vbb);\n                        return { found: true, vi, listAB, listBA, intersectedFaces };\n                    } else {\n                        lf = lfc.pos!.neighbours[i2]!;\n                        intersectedFaces.unshift(lfc.pos!);\n                        if (orient === Sign.LEFT_TURN) listAB.push([lf, lf.indexT(lfc.pos!)]);\n                        else listBA.unshift([lf, lf.indexT(lfc.pos!)]);\n                        previousFace = lfc.pos!;\n                        lfc.next();\n                        ind = lfc.pos!.indexT(previousFace);\n                        currentVertex = lfc.pos!.vertices[ind]!;\n                    }\n                    break;\n                }\n            }\n        }\n        vi = currentVertex;\n        intersectedFaces.unshift(lfc.pos!);\n        lf = lfc.pos!.neighbours[cw(ind)]!;\n        listAB.push([lf, lf.indexT(lfc.pos!)]);\n        rf = lfc.pos!.neighbours[ccw(ind)]!;\n        listBA.unshift([rf, rf.indexT(lfc.pos!)]);\n        return { found: false, vi, listAB, listBA, intersectedFaces };\n    }\n\n    intersect(t: Triangle, i: number, vaa: Vertex, vbb: Vertex): Vertex {\n        const vcc = t.vertices[cw(i)]!;\n        const vdd = t.vertices[ccw(i)]!;\n        const pa = vaa.point!;\n        const pb = vbb.point!;\n        const pc = vcc.point!;\n        const pd = vdd.point!;\n        let pi = intersection(pa, pb, pc, pd);\n        if (pi !== pa && pi !== pb && pi !== pc && pi !== pd) {\n            const bbox = new BoundingBox(pi!);\n            bbox.dilate(4);\n            if (bbox.overlaps(new BoundingBox(pa))) pi = pa;\n            if (bbox.overlaps(new BoundingBox(pb))) pi = pb;\n            if (bbox.overlaps(new BoundingBox(pc))) pi = pc;\n            if (bbox.overlaps(new BoundingBox(pd))) pi = pd;\n        }\n        let vi: Vertex;\n        if (pi === null) throw new Error(\"what\");\n        else {\n            this.removeConstrainedEdge(t, i);\n            vi = this.insert(pi, t);\n        }\n\n        if (vi !== vcc && vi !== vdd) {\n            this.insertConstraintV(vcc, vi);\n            this.insertConstraintV(vi, vdd);\n        } else {\n            this.insertConstraintV(vcc, vdd);\n        }\n        return vi;\n    }\n\n    removeConstrainedEdge(t: Triangle, i: number) {\n        t.constraints[i] = false;\n        if (this.tds.dimension === 2) t.neighbours[i]!.constraints[this.tds.mirrorIndex(t, i)] = false;\n    }\n\n    updateConstraintsOpposite(v: Vertex) {\n        let t = v.triangle!;\n        const start = t;\n        let indf: number;\n        do {\n            indf = t.indexV(v);\n            if (t.neighbours[indf]!.constraints[this.tds.mirrorIndex(t, indf)]) t.constraints[indf] = true;\n            else t.constraints[indf] = false;\n            t = t.neighbours[ccw(indf)]!;\n        } while (t !== start);\n    }\n\n    markConstraint(t: Triangle, i: number) {\n        if (this.tds.dimension === 1) t.constraints[2] = true;\n        else {\n            t.constraints[i] = true;\n            t.neighbours[i]!.constraints[this.tds.mirrorIndex(t, i)] = true;\n        }\n    }\n\n    insert(p: Point, start: Triangle | null = null) {\n        const locateInfo = this.locate(p, this.iLocate(p, start));\n        const va = this.insertb(p, locateInfo.loc, locateInfo.lt, locateInfo.li);\n        this.flipAround(va);\n        return va;\n    }\n\n    flipAround(v: Vertex) {\n        if (this.tds.dimension <= 1) return;\n        let t = v.triangle!;\n        let i: number;\n        let next: Triangle;\n        const start = t;\n        do {\n            i = t.indexV(v);\n            next = t.neighbours[ccw(i)]!;\n            this.propagatingFlip(t, i);\n            t = next;\n        } while (next !== start);\n    }\n\n    propagatingFlip(t: Triangle, i: number, depth = 0) {\n        if (!this.isFlipable(t, i)) return;\n        const maxDepth = 100;\n        if (depth === maxDepth) {\n            throw new Error(\"maxde\");\n            return;\n        }\n        const ni = t.neighbours[i]!;\n        this.flip(t, i);\n        this.propagatingFlip(t, i, depth + 1);\n        i = ni.indexV(t.vertices[i]!);\n        this.propagatingFlip(ni, i, depth + 1);\n    }\n\n    lessEdge(e1: Edge, e2: Edge) {\n        const ind1 = e1[1];\n        const ind2 = e2[1];\n        return e1[0].uid < e2[0].uid || (e1[0].uid === e2[0].uid && ind1 < ind2);\n    }\n\n    propagatingFlipE(edges: Edge[]) {\n        let eI = 0;\n        let t: Triangle;\n        let i: number;\n        let eni: Edge;\n        const edgeSet: Edge[] = [];\n        while (eI < edges.length) {\n            t = edges[eI][0];\n            i = edges[eI][1];\n            if (this.isFlipable(t, i)) {\n                eni = [t.neighbours[i]!, this.tds.mirrorIndex(t, i)];\n                if (this.lessEdge(edges[eI], eni)) edgeSet.push(edges[eI]);\n                else edgeSet.push(eni);\n            }\n            ++eI;\n        }\n        let indf: number;\n        let ni: Triangle;\n        let indn: number;\n        let ei: Edge;\n        const e: (Edge | null)[] = [null, null, null, null];\n        while (edgeSet.length > 0) {\n            t = edgeSet[0][0];\n            indf = edgeSet[0][1];\n            ni = t.neighbours[indf]!;\n            indn = this.tds.mirrorIndex(t, indf);\n            ei = [t, indf];\n            edgeSet.splice(edgeSet.findIndex(ed => ed[0] === ei[0] && ed[1] === ei[1]), 1);\n            e[0] = [t, cw(indf)];\n            e[1] = [t, ccw(indf)];\n            e[2] = [ni, cw(indn)];\n            e[3] = [ni, ccw(indn)];\n\n            for (const edge of e) {\n                const tt = edge![0];\n                const ii = edge![1];\n                eni = [tt.neighbours[ii]!, this.tds.mirrorIndex(tt, ii)];\n                if (this.lessEdge(edge!, eni))\n                    edgeSet.splice(edgeSet.findIndex(ed => ed[0] === edge![0] && ed[1] === edge![1]), 1);\n                else edgeSet.splice(edgeSet.findIndex(ed => ed[0] === eni[0] && ed[1] === eni[1]), 1);\n            }\n\n            this.flip(t, indf);\n\n            for (const edge of e) {\n                const tt = edge![0];\n                const ii = edge![1];\n                if (this.isFlipable(tt, ii)) {\n                    eni = [tt.neighbours[ii]!, this.tds.mirrorIndex(tt, ii)];\n                    if (this.lessEdge(edge!, eni)) edgeSet.push(edge!);\n                    else edgeSet.push(eni);\n                }\n            }\n        }\n    }\n\n    flip(t: Triangle, i: number) {\n        const u = t.neighbours[i]!;\n        const j = this.tds.mirrorIndex(t, i);\n        const t1 = t.neighbours[cw(i)]!;\n        const i1 = this.tds.mirrorIndex(t, cw(i));\n        const t2 = t.neighbours[ccw(i)]!;\n        const i2 = this.tds.mirrorIndex(t, ccw(i));\n        const t3 = u.neighbours[cw(j)]!;\n        const i3 = this.tds.mirrorIndex(u, cw(j));\n        const t4 = u.neighbours[ccw(j)]!;\n        const i4 = this.tds.mirrorIndex(u, ccw(j));\n        this.tds.flip(t, i);\n        t.constraints[t.indexT(u)] = false;\n        u.constraints[u.indexT(t)] = false;\n        t1.neighbours[i1]!.constraints[this.tds.mirrorIndex(t1, i1)] = t1.constraints[i1];\n        t2.neighbours[i2]!.constraints[this.tds.mirrorIndex(t2, i2)] = t2.constraints[i2];\n        t3.neighbours[i3]!.constraints[this.tds.mirrorIndex(t3, i3)] = t3.constraints[i3];\n        t4.neighbours[i4]!.constraints[this.tds.mirrorIndex(t4, i4)] = t4.constraints[i4];\n    }\n\n    isFlipable(t: Triangle, i: number, perturb = true) {\n        const ni = t.neighbours[i]!;\n        if (t.isInfinite() || ni.isInfinite()) return false;\n        if (t.constraints[i]) return false;\n        return sideOfOrientedCircle(ni, t.vertices[i]!.point!, perturb) === Sign.ON_POSITIVE_SIDE;\n    }\n\n    insertb(a: Point, loc: Triangle | null, lt: LocateType, li: number): Vertex {\n        let insertInConstrainedEdge = false;\n        let v1: Vertex;\n        let v2: Vertex;\n        if (lt === LocateType.EDGE && loc!.isConstrained(li)) {\n            insertInConstrainedEdge = true;\n            v1 = loc!.vertices[ccw(li)]!;\n            v2 = loc!.vertices[cw(li)]!;\n        }\n        const va = this.insertc(a, loc, lt, li);\n        if (insertInConstrainedEdge) this.updateConstraintsIncident(va, v1!, v2!);\n        else if (lt !== LocateType.VERTEX) this.clearConstraintsIncident(va);\n        if (this.tds.dimension === 2) this.updateConstraintsOpposite(va);\n        return va;\n    }\n\n    updateConstraintsIncident(va: Vertex, c1: Vertex, c2: Vertex) {\n        if (this.tds.dimension === 0) return;\n        if (this.tds.dimension === 1) {\n            const ec = new EdgeCirculator(va, null);\n            do {\n                ec.t!.constraints[2] = true;\n            } while (ec.next());\n        } else {\n            const fc = new FaceCirculator(va, null);\n            do {\n                const indf = fc.t!.indexV(va);\n                const cwi = cw(indf);\n                const ccwi = ccw(indf);\n                if (fc.t!.vertices[cwi] === c1 || fc.t!.vertices[cwi] === c2) {\n                    fc.t!.constraints[ccwi] = true;\n                    fc.t!.constraints[cwi] = false;\n                } else {\n                    fc.t!.constraints[ccwi] = false;\n                    fc.t!.constraints[cwi] = true;\n                }\n            } while (fc.next());\n        }\n    }\n\n    clearConstraintsIncident(v: Vertex) {\n        const ec = new EdgeCirculator(v, null);\n        if (ec.valid) {\n            do {\n                const t = ec.t!;\n                const indf = ec.ri;\n                t.constraints[indf] = false;\n                if (this.tds.dimension === 2) t.neighbours[indf]!.constraints[this.tds.mirrorIndex(t, indf)] = false;\n            } while (ec.next());\n        }\n    }\n\n    insertc(p: Point, loc: Triangle | null, lt: LocateType, li: number): Vertex {\n        if (this.tds.vertices.length === 1) {\n            return this.insertFirst(p);\n        } else if (this.tds.vertices.length === 2) {\n            if (lt === LocateType.VERTEX) return this.tds.finiteVertex;\n            else return this.insertSecond(p);\n        }\n        switch (lt) {\n            case LocateType.VERTEX: {\n                return loc!.vertices[li]!;\n            }\n            case LocateType.OUTSIDE_AFFINE_HULL: {\n                return this.insertOutsideAffineHull(p);\n            }\n            case LocateType.OUTSIDE_CONVEX_HULL: {\n                return this.insertOutsideConvexHull(p, loc!);\n            }\n            case LocateType.EDGE: {\n                return this.insertInEdge(p, loc!, li);\n            }\n            case LocateType.FACE: {\n                return this.insertInFace(p, loc!);\n            }\n        }\n        throw new Error(\"qwe\");\n        return new Vertex();\n    }\n\n    insertInEdge(p: Point, loc: Triangle, li: number): Vertex {\n        const v = this.tds.insertInEdge(loc, li);\n        v.point = p;\n        return v;\n    }\n\n    insertInFace(p: Point, loc: Triangle): Vertex {\n        const v = this.tds.insertInFace(loc);\n        v.point = p;\n        return v;\n    }\n\n    insertFirst(p: Point): Vertex {\n        const v = this.tds.insertDimUp();\n        v.point = p;\n        return v;\n    }\n\n    insertSecond(p: Point): Vertex {\n        const v = this.tds.insertDimUp(this.tds._infinite, true);\n        v.point = p;\n        return v;\n    }\n\n    insertOutsideAffineHull(p: Point): Vertex {\n        let conform = false;\n        if (this.tds.dimension === 1) {\n            const t = this.tds.finiteEdge.first!;\n            const orient = orientation(t.vertices[0]!.point!, t.vertices[1]!.point!, p);\n            conform = orient === Sign.COUNTERCLOCKWISE;\n        }\n        const v = this.tds.insertDimUp(this.tds._infinite, conform);\n        v.point = p;\n        return v;\n    }\n\n    insertOutsideConvexHull(p: Point, t: Triangle): Vertex {\n        let v: Vertex;\n        if (this.tds.dimension === 1) {\n            throw new Error(\"sdfasdasd\");\n        } else {\n            v = this.insertOutsideConvexHull2(p, t);\n        }\n        v.point = p;\n        return v;\n    }\n\n    insertOutsideConvexHull2(p: Point, t: Triangle): Vertex {\n        let li = t.indexV(this.tds._infinite);\n        const ccwlist: Triangle[] = [];\n        const cwlist: Triangle[] = [];\n        let fc = new FaceCirculator(this.tds._infinite, t);\n        let done = false;\n        while (!done) {\n            fc.prev();\n            li = fc.t!.indexV(this.tds._infinite);\n            const q = fc.t!.vertices[ccw(li)]!.point!;\n            const r = fc.t!.vertices[cw(li)]!.point!;\n            if (orientation(p, q, r) === Sign.LEFT_TURN) ccwlist.push(fc.t!);\n            else done = true;\n        }\n        fc = new FaceCirculator(this.tds._infinite, t);\n        done = false;\n        while (!done) {\n            fc.next();\n            li = fc.t!.indexV(this.tds._infinite);\n            const q = fc.t!.vertices[ccw(li)]!.point!;\n            const r = fc.t!.vertices[cw(li)]!.point!;\n            if (orientation(p, q, r) === Sign.LEFT_TURN) cwlist.push(fc.t!);\n            else done = true;\n        }\n        const v = this.tds.insertInFace(t);\n        v.point = p;\n        let th;\n        while (ccwlist.length > 0) {\n            th = ccwlist[0];\n            li = ccw(th.indexV(this.tds._infinite));\n            this.tds.flip(th, li);\n            ccwlist.shift();\n        }\n        while (cwlist.length > 0) {\n            th = cwlist[0];\n            li = cw(th.indexV(this.tds._infinite));\n            this.tds.flip(th, li);\n            cwlist.shift();\n        }\n        fc = new FaceCirculator(v, null);\n        while (!fc.t!.isInfinite()) fc.next();\n        this.tds._infinite.triangle = fc.t!;\n        return v;\n    }\n\n    locate(p: Point, start: Triangle | null) {\n        let lt = 0;\n        let li = 0;\n        if (this.tds.dimension < 0) {\n            lt = LocateType.OUTSIDE_AFFINE_HULL;\n            li = 4;\n            return { loc: null, lt, li };\n        } else if (this.tds.dimension === 0) {\n            if (xyEqual(p, this.tds.finiteVertex.triangle!.vertices[0]!.point!)) {\n                lt = LocateType.VERTEX;\n            } else {\n                lt = LocateType.OUTSIDE_AFFINE_HULL;\n            }\n            li = 4;\n            return { loc: null, lt, li };\n        } else if (this.tds.dimension === 1) {\n            return this.marchLocate1D(p);\n        }\n        if (start === null) {\n            const t = this.tds._infinite.triangle!;\n            start = t.neighbours[t.indexV(this.tds._infinite)]!;\n        } else if (start.isInfinite()) {\n            start = start.neighbours[start.indexV(this.tds._infinite)]!;\n        }\n        return this.marchLocate2D(start, p);\n    }\n\n    marchLocate1D(p: Point) {\n        const ff = this.tds._infinite.triangle!;\n        const iv = ff.indexV(this.tds._infinite);\n        const t = ff.neighbours[iv]!;\n        const pqt = orientation(t.vertices[0]!.point!, t.vertices[1]!.point!, p);\n        if (pqt === Sign.RIGHT_TURN || pqt === Sign.LEFT_TURN) {\n            return { loc: new Triangle(), lt: LocateType.OUTSIDE_AFFINE_HULL, li: 4 };\n        }\n        const i = t.indexT(ff);\n        if (collinearBetween(p, t.vertices[1 - i]!.point!, t.vertices[i]!.point!))\n            return { loc: ff, lt: LocateType.OUTSIDE_CONVEX_HULL, li: iv };\n\n        if (xyEqual(p, t.vertices[1 - i]!.point!)) return { loc: t, lt: LocateType.VERTEX, li: 1 - i };\n        throw new Error(\"sdfsdf\");\n    }\n\n    marchLocate2D(c: Triangle, p: Point) {\n        let prev = null;\n        let first = true;\n        let lt: LocateType | undefined;\n        let li: number | undefined;\n        while (true) {\n            if (c.isInfinite()) {\n                return { loc: c, lt: LocateType.OUTSIDE_CONVEX_HULL, li: c.indexV(this.tds._infinite) };\n            }\n            const leftFirst = 0; // Math.round(Math.random());\n            const p0 = c.vertices[0]!.point!;\n            const p1 = c.vertices[1]!.point!;\n            const p2 = c.vertices[2]!.point!;\n            let o0: Sign;\n            let o1: Sign;\n            let o2: Sign;\n            if (first) {\n                prev = c;\n                first = false;\n                o0 = orientation(p0, p1, p);\n                if (o0 === Sign.NEGATIVE) {\n                    c = c.neighbours[2]!;\n                    continue;\n                }\n                o1 = orientation(p1, p2, p);\n                if (o1 === Sign.NEGATIVE) {\n                    c = c.neighbours[0]!;\n                    continue;\n                }\n                o2 = orientation(p2, p0, p);\n                if (o2 === Sign.NEGATIVE) {\n                    c = c.neighbours[1]!;\n                    continue;\n                }\n            } else if (leftFirst) {\n                if (c.neighbours[0]! === prev) {\n                    prev = c;\n                    o0 = orientation(p0, p1, p);\n                    if (o0 === Sign.NEGATIVE) {\n                        c = c.neighbours[2]!;\n                        continue;\n                    }\n                    o2 = orientation(p2, p0, p);\n                    if (o2 === Sign.NEGATIVE) {\n                        c = c.neighbours[1]!;\n                        continue;\n                    }\n                    o1 = Sign.POSITIVE;\n                } else if (c.neighbours[1]! === prev) {\n                    prev = c;\n                    o1 = orientation(p1, p2, p);\n                    if (o1 === Sign.NEGATIVE) {\n                        c = c.neighbours[0]!;\n                        continue;\n                    }\n                    o0 = orientation(p0, p1, p);\n                    if (o0 === Sign.NEGATIVE) {\n                        c = c.neighbours[2]!;\n                        continue;\n                    }\n                    o2 = Sign.POSITIVE;\n                } else {\n                    prev = c;\n                    o2 = orientation(p2, p0, p);\n                    if (o2 === Sign.NEGATIVE) {\n                        c = c.neighbours[1]!;\n                        continue;\n                    }\n                    o1 = orientation(p1, p2, p);\n                    if (o1 === Sign.NEGATIVE) {\n                        c = c.neighbours[0]!;\n                        continue;\n                    }\n                    o0 = Sign.POSITIVE;\n                }\n            } else {\n                if (c.neighbours[0] === prev) {\n                    prev = c;\n                    o2 = orientation(p2, p0, p);\n                    if (o2 === Sign.NEGATIVE) {\n                        c = c.neighbours[1]!;\n                        continue;\n                    }\n                    o0 = orientation(p0, p1, p);\n                    if (o0 === Sign.NEGATIVE) {\n                        c = c.neighbours[2]!;\n                        continue;\n                    }\n                    o1 = Sign.POSITIVE;\n                } else if (c.neighbours[1] === prev) {\n                    prev = c;\n                    o0 = orientation(p0, p1, p);\n                    if (o0 === Sign.NEGATIVE) {\n                        c = c.neighbours[2]!;\n                        continue;\n                    }\n                    o1 = orientation(p1, p2, p);\n                    if (o1 === Sign.NEGATIVE) {\n                        c = c.neighbours[0]!;\n                        continue;\n                    }\n                    o2 = Sign.POSITIVE;\n                } else {\n                    prev = c;\n                    o1 = orientation(p1, p2, p);\n                    if (o1 === Sign.NEGATIVE) {\n                        c = c.neighbours[0]!;\n                        continue;\n                    }\n                    o2 = orientation(p2, p0, p);\n                    if (o2 === Sign.NEGATIVE) {\n                        c = c.neighbours[1]!;\n                        continue;\n                    }\n                    o0 = Sign.POSITIVE;\n                }\n            }\n            const sum =\n                (o0 === Sign.COLLINEAR ? 1 : 0) + (o1 === Sign.COLLINEAR ? 1 : 0) + (o2 === Sign.COLLINEAR ? 1 : 0);\n            switch (sum) {\n                case 0: {\n                    lt = LocateType.FACE;\n                    li = 4;\n                    break;\n                }\n                case 1: {\n                    lt = LocateType.EDGE;\n                    li = o0 === Sign.COLLINEAR ? 2 : o1 === Sign.COLLINEAR ? 0 : 1;\n                    break;\n                }\n                case 2: {\n                    lt = LocateType.VERTEX;\n                    li = o0 !== Sign.COLLINEAR ? 2 : o1 !== Sign.COLLINEAR ? 0 : 1;\n                    break;\n                }\n            }\n            if (lt === undefined || li === undefined) throw new Error(\"ert\");\n            return { loc: c, lt, li };\n        }\n    }\n\n    iLocate(p: Point, start: Triangle | null) {\n        if (this.tds.dimension < 2) return start;\n        if (start === null) {\n            const t = this.tds._infinite.triangle!;\n            start = t.neighbours[t.indexV(this.tds._infinite)];\n        } else if (start.isInfinite()) {\n            start = start.neighbours[start.indexV(this.tds._infinite)];\n        }\n        let prev = null;\n        let c = start!;\n        let first = true;\n        let nTurns = 2500;\n        while (true) {\n            if (!nTurns--) return c;\n            if (c.isInfinite()) return c;\n            const p0 = c.vertices[0]!.point!;\n            const p1 = c.vertices[1]!.point!;\n            const p2 = c.vertices[2]!.point!;\n            if (first) {\n                prev = c;\n                first = false;\n                if (hasInexactNegativeOrientation(p0, p1, p)) {\n                    c = c.neighbours[2]!;\n                    continue;\n                }\n                if (hasInexactNegativeOrientation(p1, p2, p)) {\n                    c = c.neighbours[0]!;\n                    continue;\n                }\n                if (hasInexactNegativeOrientation(p2, p0, p)) {\n                    c = c.neighbours[1]!;\n                    continue;\n                }\n            } else {\n                if (c.neighbours[0] === prev) {\n                    prev = c;\n                    if (hasInexactNegativeOrientation(p0, p1, p)) {\n                        c = c.neighbours[2]!;\n                        continue;\n                    }\n                    if (hasInexactNegativeOrientation(p2, p0, p)) {\n                        c = c.neighbours[1]!;\n                        continue;\n                    }\n                } else if (c.neighbours[1] === prev) {\n                    prev = c;\n                    if (hasInexactNegativeOrientation(p0, p1, p)) {\n                        c = c.neighbours[2]!;\n                        continue;\n                    }\n                    if (hasInexactNegativeOrientation(p1, p2, p)) {\n                        c = c.neighbours[0]!;\n                        continue;\n                    }\n                } else {\n                    prev = c;\n                    if (hasInexactNegativeOrientation(p2, p0, p)) {\n                        c = c.neighbours[1]!;\n                        continue;\n                    }\n                    if (hasInexactNegativeOrientation(p1, p2, p)) {\n                        c = c.neighbours[0]!;\n                        continue;\n                    }\n                }\n            }\n            break;\n        }\n        return c;\n    }\n}\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./draw.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./draw.vue?vue&type=script&lang=ts&\"","import { GlobalPoint } from \"@/game/geom\";\nimport { GridLayer } from \"@/game/layers/grid\";\nimport { Layer } from \"@/game/layers/layer\";\nimport { Asset } from \"@/game/shapes/asset\";\nimport { Shape } from \"@/game/shapes/shape\";\nimport { gameStore } from \"@/game/store\";\nimport { l2gx, l2gy, l2gz } from \"@/game/units\";\n\nclass LayerManager {\n    layers: Layer[] = [];\n    width = window.innerWidth;\n    height = window.innerHeight;\n\n    UUIDMap: Map<string, Shape> = new Map();\n\n    // Refresh interval and redraw setter.\n    interval = 30;\n\n    constructor() {\n        requestAnimationFrame(this.drawLoop);\n    }\n\n    reset() {\n        this.layers = [];\n        this.UUIDMap = new Map();\n    }\n\n    drawLoop = () => {\n        for (let i = this.layers.length - 1; i >= 0; i--) {\n            this.layers[i].draw();\n        }\n        requestAnimationFrame(this.drawLoop);\n    };\n\n    setWidth(width: number): void {\n        this.width = width;\n        for (const layer of this.layers) {\n            layer.canvas.width = width;\n            layer.width = width;\n        }\n    }\n\n    setHeight(height: number): void {\n        this.height = height;\n        for (const layer of this.layers) {\n            layer.canvas.height = height;\n            layer.height = height;\n        }\n    }\n\n    addLayer(layer: Layer): void {\n        this.layers.push(layer);\n        if (!gameStore.IS_DM && !layer.playerEditable) return;\n        if (layer.selectable) gameStore.addLayer(layer.name);\n    }\n\n    hasLayer(name: string): boolean {\n        return this.layers.some(l => l.name === name);\n    }\n\n    getLayer(name?: string) {\n        name = name === undefined ? gameStore.selectedLayer : name;\n        for (const layer of this.layers) {\n            if (layer.name === name) return layer;\n        }\n    }\n\n    selectLayer(name: string, sync: boolean = true): void {\n        let found = false;\n        for (const layer of this.layers) {\n            if (!layer.selectable) continue;\n            if (found && layer.name !== \"fow\") layer.ctx.globalAlpha = 0.3;\n            else layer.ctx.globalAlpha = 1.0;\n\n            if (name === layer.name) {\n                gameStore.selectLayer({ name, sync });\n                found = true;\n            }\n\n            layer.clearSelection();\n            layer.invalidate(true);\n        }\n    }\n\n    getGridLayer(): GridLayer | undefined {\n        return <GridLayer>this.getLayer(\"grid\");\n    }\n\n    hasSelection() {\n        const selection = this.getSelection();\n        return selection !== undefined && selection.length > 0;\n    }\n\n    // THIS INCLUDES POTENTIALLY THE SelectTool.SelectionHelper !!!\n    getSelection() {\n        const layer = this.getLayer();\n        if (layer === undefined) return undefined;\n        return layer.selection;\n    }\n\n    invalidate(): void {\n        for (let i = this.layers.length - 1; i >= 0; i--) {\n            this.layers[i].invalidate(true);\n        }\n    }\n\n    invalidateLight() {\n        for (let i = this.layers.length - 1; i >= 0; i--)\n            if (this.layers[i].isVisionLayer) this.layers[i].invalidate(true);\n    }\n\n    dropAsset(event: DragEvent) {\n        const layer = this.getLayer();\n        if (layer === undefined || event === null || event.dataTransfer === null) return;\n        const image = document.createElement(\"img\");\n        image.src = event.dataTransfer.getData(\"text/plain\");\n        const asset = new Asset(\n            image,\n            new GlobalPoint(l2gx(event.clientX), l2gy(event.clientY)),\n            l2gz(image.width),\n            l2gz(image.height),\n        );\n        asset.src = new URL(image.src).pathname;\n\n        if (gameStore.useGrid) {\n            const gs = gameStore.gridSize;\n            asset.refPoint = new GlobalPoint(\n                Math.round(asset.refPoint.x / gs) * gs,\n                Math.round(asset.refPoint.y / gs) * gs,\n            );\n            asset.w = Math.max(Math.round(asset.w / gs) * gs, gs);\n            asset.h = Math.max(Math.round(asset.h / gs) * gs, gs);\n        }\n\n        layer.addShape(asset, true);\n    }\n}\n\nexport const layerManager = new LayerManager();\n(<any>window).lm = layerManager;\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./initiative.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./initiative.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./createtoken_modal.vue?vue&type=template&id=73816298&scoped=true&\"\nimport script from \"./createtoken_modal.vue?vue&type=script&lang=ts&\"\nexport * from \"./createtoken_modal.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./createtoken_modal.vue?vue&type=style&index=0&id=73816298&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"73816298\",\n  null\n  \n)\n\ncomponent.options.__file = \"createtoken_modal.vue\"\nexport default component.exports","import { BoundingRect } from \"@/game/shapes/boundingrect\";\n\nexport class BoundingNode {\n    bbox: BoundingRect;\n    nPrimitives: number;\n    children: BoundingNode[] = [];\n    constructor(nPrimitives: number, bbox: BoundingRect) {\n        this.nPrimitives = nPrimitives;\n        this.bbox = bbox;\n    }\n}\n\nexport class LeafNode extends BoundingNode {\n    firstPrimOffset: number;\n    constructor(first: number, n: number, bbox: BoundingRect) {\n        super(n, bbox);\n        this.firstPrimOffset = first;\n    }\n}\n\nexport class InteriorNode extends BoundingNode {\n    dimension: number;\n    constructor(dimension: number, c1: BoundingNode, c2: BoundingNode) {\n        super(0, c1.bbox.union(c2.bbox));\n        this.dimension = dimension;\n        this.children.push(c1);\n        this.children.push(c2);\n    }\n}\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./createtoken_modal.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./createtoken_modal.vue?vue&type=script&lang=ts&\"","import Tools from \"../ui/tools/tools.vue\";\n\nimport { getRef } from \"@/core/utils\";\nimport { socket } from \"@/game/api/socket\";\nimport { sendClientOptions } from \"@/game/api/utils\";\nimport { EventBus } from \"@/game/event-bus\";\nimport { Vector } from \"@/game/geom\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { gameStore } from \"@/game/store\";\nimport { calculateDelta } from \"@/game/ui/tools/utils\";\n\nexport function onKeyUp(event: KeyboardEvent) {\n    if (event.target instanceof HTMLInputElement || event.target instanceof HTMLTextAreaElement) {\n    } else {\n        if (event.key === \"Delete\" || event.key === \"Del\" || event.key === \"Backspace\") {\n            if (layerManager.getLayer === undefined) {\n                console.log(\"No active layer selected for delete operation\");\n                return;\n            }\n            const l = layerManager.getLayer()!;\n            for (let i = l.selection.length - 1; i >= 0; i--) {\n                const sel = l.selection[i];\n                if ((<any>getRef<Tools>(\"tools\").$refs.selectTool).selectionHelper.uuid === sel.uuid) {\n                    l.selection.splice(i, 1);\n                    continue;\n                }\n                l.removeShape(sel, true, false);\n                EventBus.$emit(\"SelectionInfo.Shape.Set\", null);\n                EventBus.$emit(\"Initiative.Remove\", sel.uuid);\n            }\n        }\n    }\n}\n\nexport function onKeyDown(event: KeyboardEvent) {\n    if (event.target instanceof HTMLInputElement || event.target instanceof HTMLTextAreaElement) {\n        if (event.keyCode === 65 && event.ctrlKey) event.target!.select();\n    } else {\n        if (event.keyCode >= 37 && event.keyCode <= 40) {\n            // todo: this should already be rounded\n            const gridSize = Math.round(gameStore.gridSize);\n            let offsetX = gridSize * (event.keyCode % 2);\n            let offsetY = gridSize * (event.keyCode % 2 ? 0 : 1);\n            if (layerManager.hasSelection()) {\n                const selection = layerManager.getSelection()!;\n                offsetX *= event.keyCode <= 38 ? -1 : 1;\n                offsetY *= event.keyCode <= 38 ? -1 : 1;\n                let delta = new Vector(offsetX, offsetY);\n                if (!event.shiftKey || !gameStore.IS_DM) {\n                    // First check for collisions.  Using the smooth wall slide collision check used on mouse move is overkill here.\n                    for (const sel of selection) {\n                        if ((<any>getRef<Tools>(\"tools\").$refs.selectTool).selectionHelper.uuid === sel.uuid) continue;\n                        delta = calculateDelta(delta, sel);\n                    }\n                }\n                for (const sel of selection) {\n                    if ((<any>getRef<Tools>(\"tools\").$refs.selectTool).selectionHelper.uuid === sel.uuid) continue;\n                    sel.refPoint = sel.refPoint.add(delta);\n                    // todo: Fix again\n                    // if (sel.refPoint.x % gridSize !== 0 || sel.refPoint.y % gridSize !== 0) sel.snapToGrid();\n                    socket.emit(\"Shape.Position.Update\", { shape: sel.asDict(), redraw: true, temporary: false });\n                }\n                gameStore.recalculateVision();\n                layerManager.getLayer()!.invalidate(false);\n            } else {\n                // The pan offsets should be in the opposite direction to give the correct feel.\n                gameStore.increasePanX(offsetX * (event.keyCode <= 38 ? 1 : -1));\n                gameStore.increasePanY(offsetY * (event.keyCode <= 38 ? 1 : -1));\n                layerManager.invalidate();\n                sendClientOptions();\n            }\n        } else if (event.keyCode === 68) {\n            const layer = layerManager.getLayer();\n            if (layer) {\n                layer.clearSelection();\n                layer.invalidate(true);\n            }\n        }\n    }\n}\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./manager.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./manager.vue?vue&type=style&index=0&lang=css&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./shapecontext.vue?vue&type=style&index=0&id=759e5a8a&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./shapecontext.vue?vue&type=style&index=0&id=759e5a8a&scoped=true&lang=css&\"","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\n\nimport ShapeContext from \"@/game/ui/selection/shapecontext.vue\";\nimport CreateTokenModal from \"@/game/ui/tools/createtoken_modal.vue\";\nimport DrawTool from \"@/game/ui/tools/draw.vue\";\nimport MapTool from \"@/game/ui/tools/map.vue\";\nimport PanTool from \"@/game/ui/tools/pan\";\nimport SelectTool from \"@/game/ui/tools/select.vue\";\n\nimport { layerManager } from \"@/game/layers/manager\";\nimport { gameManager } from \"@/game/manager\";\nimport { gameStore } from \"@/game/store\";\nimport { RulerTool } from \"@/game/ui/tools/ruler\";\nimport { l2g } from \"@/game/units\";\nimport { getMouse } from \"@/game/utils\";\nimport Component from \"vue-class-component\";\n\n@Component({\n    components: {\n        \"select-tool\": SelectTool,\n        \"pan-tool\": PanTool,\n        \"draw-tool\": DrawTool,\n        \"ruler-tool\": RulerTool,\n        \"map-tool\": MapTool,\n        \"shape-menu\": ShapeContext,\n        \"createtoken-dialog\": CreateTokenModal,\n    },\n    watch: {\n        currentTool(newValue, oldValue) {\n            this.$emit(\"tools-select-change\", newValue, oldValue);\n        },\n    },\n})\nexport default class Tools extends Vue {\n    $refs!: {\n        selectTool: InstanceType<typeof SelectTool>;\n    };\n\n    currentTool = \"Select\";\n    tools = [\"Select\", \"Pan\", \"Draw\", \"Ruler\", \"Map\"];\n    dmTools = [\"Map\"];\n\n    get IS_DM(): boolean {\n        return gameStore.IS_DM;\n    }\n\n    get currentToolComponent(): string {\n        return `${this.currentTool.toLowerCase()}-tool`;\n    }\n\n    mousedown(event: MouseEvent) {\n        if ((<HTMLElement>event.target).tagName !== \"CANVAS\") return;\n\n        let targetTool = this.currentTool;\n        if (event.button === 1) {\n            targetTool = \"Pan\";\n        } else if (event.button !== 0) {\n            return;\n        }\n\n        this.$emit(\"mousedown\", event, targetTool);\n    }\n    mouseup(event: MouseEvent) {\n        if ((<HTMLElement>event.target).tagName !== \"CANVAS\") return;\n\n        let targetTool = this.currentTool;\n        if (event.button === 1) {\n            targetTool = \"Pan\";\n        } else if (event.button !== 0) {\n            return;\n        }\n\n        this.$emit(\"mouseup\", event, targetTool);\n    }\n    mousemove(event: MouseEvent) {\n        if ((<HTMLElement>event.target).tagName !== \"CANVAS\") return;\n\n        let targetTool = this.currentTool;\n        if ((event.buttons & 4) !== 0) {\n            targetTool = \"Pan\";\n        } else if ((event.button & 1) > 1) {\n            return;\n        }\n\n        this.$emit(\"mousemove\", event, targetTool);\n\n        // Annotation hover\n        let found = false;\n        for (const uuid of gameStore.annotations) {\n            if (layerManager.UUIDMap.has(uuid) && layerManager.hasLayer(\"draw\")) {\n                const shape = layerManager.UUIDMap.get(uuid)!;\n                if (shape.contains(l2g(getMouse(event)))) {\n                    found = true;\n                    gameManager.annotationManager.setActiveText(shape.annotation);\n                }\n            }\n        }\n        if (!found && gameManager.annotationManager.shown) {\n            gameManager.annotationManager.setActiveText(\"\");\n        }\n    }\n    mouseleave(event: MouseEvent) {\n        // When leaving the window while a mouse is pressed down, act as if it was released\n        if ((event.buttons & 1) !== 0) {\n            this.$emit(\"mouseup\", event, this.currentTool);\n        }\n    }\n    contextmenu(event: MouseEvent) {\n        if ((<HTMLElement>event.target).tagName !== \"CANVAS\") return;\n        if (event.button !== 2 || (<HTMLElement>event.target).tagName !== \"CANVAS\") return;\n        this.$emit(\"contextmenu\", event, this.currentTool);\n    }\n}\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./selection_info.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./selection_info.vue?vue&type=script&lang=ts&\"","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./modal.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./modal.vue?vue&type=script&lang=ts&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./contextmenu.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./contextmenu.vue?vue&type=style&index=0&lang=css&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./selection_info.vue?vue&type=style&index=0&id=32cec914&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./selection_info.vue?vue&type=style&index=0&id=32cec914&scoped=true&lang=css&\"","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\n\nimport Modal from \"@/core/components/modals/modal.vue\";\n\n@Component({\n    components: {\n        Modal,\n    },\n})\nexport default class Prompt extends Vue {\n    $refs!: {\n        answer: HTMLElement;\n    };\n\n    visible = false;\n    question = \"\";\n    answer = \"\";\n    title = \"\";\n\n    resolve = (value: string) => {};\n    reject = () => {};\n\n    submit() {\n        this.resolve(this.answer);\n        this.close();\n    }\n    close() {\n        this.reject();\n        this.visible = false;\n        this.question = \"\";\n        this.answer = \"\";\n        this.title = \"\";\n    }\n    prompt(question: string, title: string): Promise<string> {\n        this.question = question;\n        this.title = title;\n        this.visible = true;\n        this.$nextTick(() => {\n            this.$refs.answer.focus();\n        });\n        return new Promise((resolve, reject) => {\n            this.resolve = resolve;\n            this.reject = reject;\n        });\n    }\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ul',[_vm._l((_vm.folders),function(folder){return _c('li',{key:folder,staticClass:\"folder\",on:{\"click\":function($event){$event.stopPropagation();return _vm.toggle($event)}}},[_vm._v(\"\\n    \"+_vm._s(folder)+\"\\n    \"),_c('asset-node',{attrs:{\"asset\":_vm.asset[folder]}})],1)}),_vm._l((_vm.files),function(file){return _c('li',{key:file.name,staticClass:\"file draggable token\",attrs:{\"draggable\":\"true\"},on:{\"mouseover\":function($event){_vm.showImage = file.hash},\"mouseout\":function($event){_vm.showImage = null},\"dragstart\":function($event){_vm.dragStart($event, '/static/assets/' + file.hash)}}},[_vm._v(\"\\n    \"+_vm._s(file.name)+\"\\n    \"),(_vm.showImage == file.hash)?_c('div',{staticClass:\"preview\"},[_c('img',{staticClass:\"asset-preview-image\",attrs:{\"src\":'/static/assets/' + file.hash}})]):_vm._e()])})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"74f43d04-vue-loader-template\\\"}!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./asset_node.vue?vue&type=template&id=62c91cd3&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_vm._v(_vm._s(_vm.message))])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"74f43d04-vue-loader-template\\\"}!../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./load.vue?vue&type=template&id=ff095222&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{attrs:{\"id\":\"toolselect\"}},[_c('ul',_vm._l((_vm.tools),function(tool){return (!_vm.dmTools.includes(tool) || _vm.IS_DM)?_c('li',{key:tool,ref:tool + '-selector',refInFor:true,class:{'tool-selected': _vm.currentTool === tool},on:{\"click\":function($event){_vm.currentTool = tool}}},[_c('a',{attrs:{\"href\":\"#\"}},[_vm._v(_vm._s(tool))])]):_vm._e()}))]),_c('div',[[_c('select-tool',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.currentTool === 'Select'),expression:\"currentTool === 'Select'\"}],ref:\"selectTool\"}),_c('pan-tool',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.currentTool === 'Pan'),expression:\"currentTool === 'Pan'\"}]}),_c('keep-alive',[_c('draw-tool',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.currentTool === 'Draw'),expression:\"currentTool === 'Draw'\"}]})],1),_c('ruler-tool',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.currentTool === 'Ruler'),expression:\"currentTool === 'Ruler'\"}]}),_c('map-tool',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.currentTool === 'Map'),expression:\"currentTool === 'Map'\"}]}),_c('shape-menu',{ref:\"shapecontext\"}),_c('createtoken-dialog',{ref:\"createtokendialog\"})]],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"74f43d04-vue-loader-template\\\"}!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tools.vue?vue&type=template&id=1fee50f5&scoped=true&\"","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./menu.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./menu.vue?vue&type=script&lang=ts&\"","import { GlobalPoint, Point, Ray, Vector } from \"@/game/geom\";\nimport { g2lx, g2ly } from \"../units\";\n\nexport class BoundingRect {\n    readonly w: number;\n    readonly h: number;\n    readonly topLeft: GlobalPoint;\n    readonly topRight: GlobalPoint;\n    readonly botRight: GlobalPoint;\n    readonly botLeft: GlobalPoint;\n\n    constructor(topleft: GlobalPoint, w: number, h: number) {\n        this.w = w;\n        this.h = h;\n        this.topLeft = topleft;\n        this.topRight = new GlobalPoint(topleft.x + w, topleft.y);\n        this.botRight = new GlobalPoint(topleft.x + w, topleft.y + h);\n        this.botLeft = new GlobalPoint(topleft.x, topleft.y + h);\n    }\n\n    contains(point: GlobalPoint): boolean {\n        return (\n            this.topLeft.x <= point.x &&\n            this.topRight.x >= point.x &&\n            this.topLeft.y <= point.y &&\n            this.botLeft.y >= point.y\n        );\n    }\n\n    get points() {\n        if (this.w === 0 || this.h === 0) return [[this.topLeft.x, this.topLeft.y]];\n        return [\n            [this.topLeft.x, this.topLeft.y],\n            [this.botLeft.x, this.botLeft.y],\n            [this.botRight.x, this.botRight.y],\n            [this.topRight.x, this.topRight.y],\n        ];\n    }\n\n    offset(vector: Vector): BoundingRect {\n        return new BoundingRect(this.topLeft.add(vector), this.w, this.h);\n    }\n\n    union(other: BoundingRect): BoundingRect {\n        const xmin = Math.min(this.topLeft.x, other.topLeft.x);\n        const xmax = Math.max(this.topRight.x, other.topRight.x);\n        const ymin = Math.min(this.topLeft.y, other.topLeft.y);\n        const ymax = Math.max(this.botLeft.y, other.botLeft.y);\n        return new BoundingRect(new GlobalPoint(xmin, ymin), xmax - xmin, ymax - ymin);\n    }\n\n    getDiagCorner(botright: boolean) {\n        return botright ? this.botRight : this.topLeft;\n    }\n\n    intersectsWith(other: BoundingRect): boolean {\n        return !(\n            other.topLeft.x > this.topRight.x ||\n            other.topRight.x < this.topLeft.x ||\n            other.topLeft.y > this.botLeft.y ||\n            other.botLeft.y < this.topLeft.y\n        );\n    }\n\n    intersectsWithInner(other: BoundingRect): boolean {\n        return !(\n            other.topLeft.x >= this.topRight.x ||\n            other.topRight.x <= this.topLeft.x ||\n            other.topLeft.y >= this.botLeft.y ||\n            other.botLeft.y <= this.topLeft.y\n        );\n    }\n\n    intersectP(ray: Ray<Point>, invDir: Vector, dirIsNeg: boolean[]) {\n        let txmin = invDir.x * (this.getDiagCorner(dirIsNeg[0]).x - ray.origin!.x);\n        let txmax = invDir.x * (this.getDiagCorner(!dirIsNeg[0]).x - ray.origin!.x);\n        const tymin = invDir.y * (this.getDiagCorner(dirIsNeg[1]).y - ray.origin!.y);\n        const tymax = invDir.y * (this.getDiagCorner(!dirIsNeg[1]).y - ray.origin!.y);\n        if (txmin > tymax || tymin > txmax) return { hit: false, min: txmin, max: txmax };\n        if (tymin > txmin) txmin = tymin;\n        if (tymax < txmax) txmax = tymax;\n        return { hit: txmin < ray.tMax! && txmax > 0, min: txmin, max: txmax };\n    }\n\n    center(): GlobalPoint {\n        return this.topLeft.add(new Vector(this.w / 2, this.h / 2));\n    }\n\n    getMaxExtent() {\n        return this.w > this.h ? 0 : 1;\n    }\n    visibleInCanvas(canvas: HTMLCanvasElement): boolean {\n        const coreVisible = !(\n            g2lx(this.topLeft.x) > canvas.width ||\n            g2ly(this.topLeft.y) > canvas.height ||\n            g2lx(this.topRight.x) < 0 ||\n            g2ly(this.botRight.y) < 0\n        );\n        if (coreVisible) return true;\n        return false;\n    }\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"formcontainer\"}},[(_vm.owned || _vm.joined)?_c('form',[_c('fieldset',[_c('legend',{staticClass:\"legend\"},[_vm._v(\"Your sessions\")]),_c('div',{staticClass:\"input\"},[_vm._l((_vm.owned),function(room,i){return _c('router-link',{key:'o-'+i,attrs:{\"to\":'/game/' + room[1] + '/' + room[0]}},[_vm._v(_vm._s(room[0]))])}),_vm._l((_vm.joined),function(room,i){return _c('router-link',{key:'j-'+i,attrs:{\"to\":'/game/' + room[1] + '/' + room[0]}},[_vm._v(_vm._s(room[1])+\"/\"+_vm._s(room[0]))])})],2),(_vm.owned.length === 0)?_c('div',{staticClass:\"input\"},[_vm._v(\"No active sessions\")]):_vm._e()])]):_vm._e(),_vm._m(0),_c('form',{on:{\"submit\":function($event){$event.preventDefault();return _vm.createRoom($event)}}},[_c('fieldset',[(!_vm.owned && !_vm.joined)?_c('legend',{staticClass:\"legend\"},[_vm._v(\"Create a session\")]):_c('div',{staticClass:\"input\"},[_vm._v(\"Create a new session\")]),_c('div',{staticClass:\"input\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.newSessionName),expression:\"newSessionName\"}],attrs:{\"type\":\"text\",\"name\":\"room_name\",\"placeholder\":\"Session Name\"},domProps:{\"value\":(_vm.newSessionName)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.newSessionName=$event.target.value}}}),_vm._m(1)]),_vm._m(2)])]),_c('div',{attrs:{\"id\":\"account-options\"}},[_c('form',{on:{\"submit\":function($event){$event.preventDefault();}}},[_c('router-link',{staticClass:\"submit\",attrs:{\"tag\":\"button\",\"title\":\"Account Settings\",\"to\":\"/account\"}},[_c('i',{staticClass:\"fas fa-cog\"})])],1),_c('form',{on:{\"submit\":function($event){$event.preventDefault();}}},[_c('router-link',{staticClass:\"submit\",attrs:{\"tag\":\"button\",\"title\":\"Logout\",\"to\":\"/auth/logout\"}},[_c('i',{staticClass:\"fas fa-sign-out-alt\"})])],1)])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('h4',[_c('span',[_vm._v(\"OR\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',[_c('i',{staticClass:\"fab fa-d-and-d\"})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('button',{staticClass:\"submit\",attrs:{\"type\":\"submit\",\"title\":\"Create\"}},[_c('i',{staticClass:\"fas fa-arrow-right\"})])}]\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"74f43d04-vue-loader-template\\\"}!../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./main.vue?vue&type=template&id=61eb1455&scoped=true&\"","/*\nThis module defines some Point classes.\nA strong focus is made to ensure that at no time a global and a local point are mixed up with each other.\nAt first glance this adds weird looking hacks as ts does not support nominal typing.\n*/\n\nexport function getPointDistance(p1: Point, p2: Point) {\n    const a = p1.x - p2.x;\n    const b = p1.y - p2.y;\n    return Math.sqrt(a * a + b * b);\n}\n\nexport class Point {\n    readonly x: number;\n    readonly y: number;\n    constructor(x: number, y: number) {\n        this.x = x;\n        this.y = y;\n    }\n    static fromArray(point: number[]) {\n        return new Point(point[0], point[1]);\n    }\n    add(vec: Vector) {\n        return new Point(this.x + vec.x, this.y + vec.y);\n    }\n    subtract(other: Point) {\n        return new Vector(this.x - other.x, this.y - other.y);\n    }\n    clone(): Point {\n        return new Point(this.x, this.y);\n    }\n    get(dimension: 0 | 1) {\n        if (dimension === 0) return this.x;\n        return this.y;\n    }\n    asArray(): number[] {\n        return [this.x, this.y];\n    }\n}\nexport class GlobalPoint extends Point {\n    // This is to differentiate with LocalPoint, is actually never used\n    // We do ! to prevent errors that it never gets initialized\n    // tslint:disable-next-line:variable-name\n    _GlobalPoint!: string;\n    add(vec: Vector): GlobalPoint {\n        return <GlobalPoint>super.add(vec);\n    }\n    subtract(other: GlobalPoint): Vector {\n        return super.subtract(other);\n    }\n    clone(): GlobalPoint {\n        return <GlobalPoint>super.clone();\n    }\n    static fromArray(point: number[]) {\n        return new GlobalPoint(point[0], point[1]);\n    }\n}\n\nexport class LocalPoint extends Point {\n    // This is to differentiate with GlobalPoint, is actually never used\n    // We do ! to prevent errors that it never gets initialized\n    // tslint:disable-next-line:variable-name\n    _LocalPoint!: string;\n    add(vec: Vector): LocalPoint {\n        return <LocalPoint>super.add(vec);\n    }\n    subtract(other: LocalPoint): Vector {\n        return super.subtract(other);\n    }\n    clone(): LocalPoint {\n        return <LocalPoint>super.clone();\n    }\n}\n\nexport class Vector {\n    readonly x: number;\n    readonly y: number;\n    constructor(x: number, y: number) {\n        this.x = x;\n        this.y = y;\n    }\n    dot(other: Vector): number {\n        return this.x * other.x + this.y * other.y;\n    }\n    inverse(): Vector {\n        return new Vector(this.x === 0 ? 0 : 1 / this.x, this.y === 0 ? 0 : 1 / this.y);\n    }\n    length(): number {\n        return Math.sqrt(Math.pow(this.x, 2) + Math.pow(this.y, 2));\n    }\n    normalize(): Vector {\n        const l = this.length();\n        return new Vector(this.x / l, this.y / l);\n    }\n    reverse(): Vector {\n        return new Vector(-this.x, -this.y);\n    }\n    multiply(scale: number): Vector {\n        return new Vector(this.x * scale, this.y * scale);\n    }\n    angle(): number {\n        return (Math.atan2(this.y, this.x) * 180) / Math.PI;\n    }\n}\n\nexport class Ray<T extends Point> {\n    readonly direction: Vector;\n    readonly origin: T;\n    tMax: number;\n    constructor(origin: T, direction: Vector, tMax?: number) {\n        this.direction = direction;\n        this.origin = origin;\n        if (tMax === undefined) tMax = Infinity;\n        this.tMax = tMax;\n    }\n    static fromPoints<T extends Point>(p1: T, p2: T): Ray<T> {\n        const vec = new Vector(p2.x - p1.x, p2.y - p1.y);\n        let maxT;\n        if (Math.abs(vec.x) > 0.01) maxT = (p2.x - p1.x) / vec.x;\n        else maxT = (p2.y - p1.y) / vec.y;\n        return new Ray(p1, vec, maxT);\n    }\n    get(t: number): T {\n        return <T>new Point(this.origin.x + t * this.direction.x, this.origin.y + t * this.direction.y);\n    }\n    getDistance(t1: number, t2: number) {\n        return Math.sqrt(Math.pow(t2 - t1, 2) * (Math.pow(this.direction.x, 2) + Math.pow(this.direction.y, 2)));\n    }\n    getT(t1: number, distance: number) {\n        return t1 + Math.sqrt(Math.pow(distance, 2) / (Math.pow(this.direction.x, 2) + Math.pow(this.direction.y, 2)));\n    }\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\nimport vueSlider from \"vue-slider-component\";\n\nimport \"@/game/api/events\";\n\nimport { throttle } from \"lodash\";\nimport { mapGetters, mapState } from \"vuex\";\n\nimport ConfirmDialog from \"@/core/components/modals/confirm.vue\";\nimport Prompt from \"@/core/components/modals/prompt.vue\";\nimport Initiative from \"@/game/ui/initiative.vue\";\nimport MenuBar from \"@/game/ui/menu/menu.vue\";\nimport NoteDialog from \"@/game/ui/note.vue\";\nimport SelectionInfo from \"@/game/ui/selection/selection_info.vue\";\nimport Tools from \"@/game/ui/tools/tools.vue\";\n\nimport { createConnection, socket } from \"@/game/api/socket\";\nimport { onKeyDown, onKeyUp } from \"@/game/events/keyboard\";\nimport { scrollZoom } from \"@/game/events/mouse\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { gameStore } from \"@/game/store\";\nimport { l2g } from \"@/game/units\";\nimport { LocalPoint } from \"./geom\";\n\n@Component({\n    components: {\n        \"tool-bar\": Tools,\n        \"selection-info\": SelectionInfo,\n        \"prompt-dialog\": Prompt,\n        \"confirm-dialog\": ConfirmDialog,\n        \"menu-bar\": MenuBar,\n        \"initiative-dialog\": Initiative,\n        \"zoom-slider\": vueSlider,\n        \"note-dialog\": NoteDialog,\n    },\n    beforeRouteEnter(to, from, next) {\n        createConnection(to);\n        next();\n    },\n    beforeRouteLeave(to, from, next) {\n        socket.disconnect();\n        next();\n    },\n})\nexport default class Game extends Vue {\n    $refs!: {\n        confirm: InstanceType<typeof ConfirmDialog>;\n        tools: InstanceType<typeof Tools>;\n    };\n\n    ready = {\n        manager: false,\n        tools: false,\n    };\n\n    get IS_DM(): boolean {\n        return gameStore.IS_DM;\n    }\n\n    get layers(): string[] {\n        return gameStore.layers;\n    }\n\n    get selectedLayer(): string {\n        return gameStore.selectedLayer;\n    }\n\n    get zoomFactor(): number {\n        return gameStore.zoomFactor;\n    }\n\n    set zoomFactor(value: number) {\n        gameStore.updateZoom({\n            newZoomValue: value,\n            zoomLocation: l2g(new LocalPoint(window.innerWidth / 2, window.innerHeight / 2)),\n        });\n    }\n\n    mounted() {\n        window.addEventListener(\"resize\", () => {\n            layerManager.setWidth(window.innerWidth);\n            layerManager.setHeight(window.innerHeight);\n            layerManager.invalidate();\n        });\n        window.addEventListener(\"wheel\", throttle(scrollZoom));\n        window.addEventListener(\"keyup\", onKeyUp);\n        window.addEventListener(\"keydown\", onKeyDown);\n        // // prevent double clicking text selection\n        window.addEventListener(\"selectstart\", e => {\n            e.preventDefault();\n            return false;\n        });\n        this.ready.manager = true;\n    }\n\n    mousedown(event: MouseEvent) {\n        this.$refs.tools.mousedown(event);\n    }\n    mouseup(event: MouseEvent) {\n        this.$refs.tools.mouseup(event);\n    }\n    mousemove(event: MouseEvent) {\n        this.$refs.tools.mousemove(event);\n    }\n    mouseleave(event: MouseEvent) {\n        this.$refs.tools.mouseleave(event);\n    }\n    contextmenu(event: MouseEvent) {\n        this.$refs.tools.contextmenu(event);\n    }\n    selectLayer(layer: string) {\n        layerManager.selectLayer(layer);\n    }\n    drop(event: DragEvent) {\n        if (event === null || event.dataTransfer === null) return;\n        if (event.dataTransfer.files.length > 0) {\n            this.$refs.confirm\n                .open(\"Uploading files should be done through the asset manager.\", \"Ok\", \"\")\n                .then(() => {}, () => {});\n        } else if (event.dataTransfer.getData(\"text/plain\") === \"\") {\n            return;\n        } else {\n            layerManager.dropAsset(event);\n        }\n    }\n}\n","import { GlobalPoint, LocalPoint, Ray } from \"@/game/geom\";\nimport { gameStore } from \"@/game/store\";\n\nexport function g2l(obj: GlobalPoint): LocalPoint {\n    const z = gameStore.zoomFactor;\n    const panX = gameStore.panX;\n    const panY = gameStore.panY;\n    return new LocalPoint((obj.x + panX) * z, (obj.y + panY) * z);\n}\n\nexport function g2lx(x: number) {\n    return g2l(new GlobalPoint(x, 0)).x;\n}\n\nexport function g2ly(y: number) {\n    return g2l(new GlobalPoint(0, y)).y;\n}\n\nexport function g2lz(z: number) {\n    return z * gameStore.zoomFactor;\n}\n\nexport function getUnitDistance(r: number) {\n    return (r / gameStore.unitSize) * gameStore.gridSize;\n}\n\nexport function g2lr(r: number) {\n    return g2lz(getUnitDistance(r));\n}\n\nexport function l2g(obj: LocalPoint): GlobalPoint;\nexport function l2g(obj: Ray<LocalPoint>): Ray<GlobalPoint>;\nexport function l2g(obj: LocalPoint | Ray<LocalPoint>): GlobalPoint | Ray<GlobalPoint> {\n    const z = gameStore.zoomFactor;\n    const panX = gameStore.panX;\n    const panY = gameStore.panY;\n    if (obj instanceof LocalPoint) {\n        return new GlobalPoint(obj.x / z - panX, obj.y / z - panY);\n    } else {\n        return new Ray<GlobalPoint>(l2g(obj.origin), obj.direction.multiply(1 / z), obj.tMax);\n    }\n}\n\nexport function l2gx(x: number) {\n    return l2g(new LocalPoint(x, 0)).x;\n}\n\nexport function l2gy(y: number) {\n    return l2g(new LocalPoint(0, y)).y;\n}\n\nexport function l2gz(z: number) {\n    return z / gameStore.zoomFactor;\n}\n\nexport function l2gr(r: number) {\n    return l2gz(getUnitDistance(r));\n}\n\n(<any>window).g2lx = g2lx;\n(<any>window).g2ly = g2ly;\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\n\nimport { mapState } from \"vuex\";\n\nimport ColorPicker from \"@/core/components/colorpicker.vue\";\nimport Prompt from \"@/core/components/modals/prompt.vue\";\nimport AssetNode from \"@/game/ui/menu/asset_node.vue\";\nimport NoteDialog from \"@/game/ui/note.vue\";\n\nimport { getRef, uuidv4 } from \"@/core/utils\";\nimport { socket } from \"@/game/api/socket\";\nimport { Note } from \"@/game/comm/types/general\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { gameStore } from \"@/game/store\";\n\n@Component({\n    components: {\n        \"color-picker\": ColorPicker,\n        \"asset-node\": AssetNode,\n    },\n    computed: {\n        ...mapState(\"game\", [\"invitationCode\", \"IS_DM\", \"locations\", \"assets\", \"notes\"]),\n    },\n})\nexport default class MenuBar extends Vue {\n    visible = {\n        settings: false,\n        locations: false,\n    };\n\n    get useGrid(): boolean {\n        return gameStore.useGrid;\n    }\n    set useGrid(value: boolean) {\n        gameStore.setUseGrid({ useGrid: value, sync: true });\n    }\n    get fullFOW(): boolean {\n        return gameStore.fullFOW;\n    }\n    set fullFOW(value: boolean) {\n        gameStore.setFullFOW({ fullFOW: value, sync: true });\n    }\n    get fowOpacity(): number {\n        return gameStore.fowOpacity;\n    }\n    set fowOpacity(value: number) {\n        if (typeof value !== \"number\") return;\n        gameStore.setFOWOpacity({ fowOpacity: value, sync: true });\n    }\n    get fowLOS(): boolean {\n        return gameStore.fowLOS;\n    }\n    set fowLOS(value: boolean) {\n        gameStore.setLineOfSight({ fowLOS: value, sync: true });\n    }\n    get unitSize(): number {\n        return gameStore.unitSize;\n    }\n    set unitSize(value: number) {\n        if (typeof value !== \"number\") return;\n        gameStore.setUnitSize({ unitSize: value, sync: true });\n    }\n    get gridSize(): number {\n        return gameStore.gridSize;\n    }\n    set gridSize(value: number) {\n        if (typeof value !== \"number\") return;\n        gameStore.setGridSize({ gridSize: value, sync: true });\n    }\n    get gridColour(): string {\n        return gameStore.gridColour;\n    }\n    set gridColour(value: string) {\n        gameStore.setGridColour({ colour: value, sync: true });\n    }\n    get fowColour(): string {\n        return gameStore.fowColour;\n    }\n    set fowColour(value: string) {\n        gameStore.setFOWColour({ colour: value, sync: true });\n    }\n    get rulerColour(): string {\n        return gameStore.rulerColour;\n    }\n    set rulerColour(value: string) {\n        gameStore.setRulerColour({ colour: value, sync: true });\n    }\n    get visionRangeMin(): number {\n        return gameStore.visionRangeMin;\n    }\n    set visionRangeMin(value: number) {\n        if (typeof value !== \"number\") return;\n        gameStore.setVisionRangeMin({ value, sync: true });\n    }\n    get visionRangeMax(): number {\n        return gameStore.visionRangeMax;\n    }\n    set visionRangeMax(value: number) {\n        if (typeof value !== \"number\") return;\n        gameStore.setVisionRangeMax({ value, sync: true });\n    }\n    settingsClick(event: { target: HTMLElement }) {\n        if (event.target.classList.contains(\"accordion\")) {\n            event.target.classList.toggle(\"accordion-active\");\n            const next = <HTMLElement>event.target.nextElementSibling;\n            if (next !== null) next.style.display = next.style.display === \"\" ? \"block\" : \"\";\n        }\n    }\n    changeLocation(name: string) {\n        socket.emit(\"Location.Change\", name);\n    }\n    createLocation() {\n        getRef<Prompt>(\"prompt\")\n            .prompt(`New location name:`, `Create new location`)\n            .then(\n                (value: string) => {\n                    socket.emit(\"Location.New\", value);\n                },\n                () => {},\n            );\n    }\n    createNote() {\n        const note = { title: \"New note\", text: \"\", uuid: uuidv4() };\n        gameStore.newNote({ note, sync: true });\n        this.openNote(note);\n    }\n    openNote(note: Note) {\n        getRef<NoteDialog>(\"note\").open(note);\n    }\n    changeVisionMode(event: { target: HTMLSelectElement }) {\n        const value = event.target.value.toLowerCase();\n        if (value !== \"bvh\" && value !== \"triangle\") return;\n        gameStore.setVisionMode({ mode: value, sync: true });\n        gameStore.recalculateVision();\n        gameStore.recalculateMovement();\n        layerManager.invalidate();\n    }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./colorpicker.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./colorpicker.vue?vue&type=script&lang=ts&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ContextMenu',{attrs:{\"visible\":_vm.visible,\"left\":_vm.x + 'px',\"top\":_vm.y + 'px'},on:{\"close\":_vm.close}},[(_vm.IS_DM)?_c('li',{on:{\"click\":_vm.bringPlayers}},[_vm._v(\"Bring players\")]):_vm._e(),_c('li',{on:{\"click\":_vm.createToken}},[_vm._v(\"Create basic token\")]),_c('li',{on:{\"click\":_vm.showInitiative}},[_vm._v(\"Show initiative\")])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"74f43d04-vue-loader-template\\\"}!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./selectcontext.vue?vue&type=template&id=44a31e42&scoped=true&\"","import { CDT } from \"./cdt\";\nimport { ccw, cw, orientation, ulp } from \"./triag\";\n\nexport type Point = number[];\n\nexport const INFINITE = -7e310;\n\nlet _INFINITE_VERTEX: Vertex;\n\nexport enum Sign {\n    NEGATIVE = -1,\n    ZERO = 0,\n    POSITIVE = 1,\n\n    RIGHT_TURN = -1,\n    LEFT_TURN = 1,\n\n    SMALLER = -1,\n    EQUAL = 0,\n    LARGER = 1,\n\n    CLOCKWISE = -1,\n    COUNTERCLOCKWISE = 1,\n\n    COLLINEAR = 0,\n    COPLANAR = 0,\n    DEGENERATE = 0,\n\n    ON_NEGATIVE_SIDE = -1,\n    ON_ORIENTED_BOUNDARY = 0,\n    ON_POSITIVE_SIDE = 1,\n}\n\nenum LineFaceState {\n    UNDEFINED = -1,\n    VERTEX_VERTEX = 0,\n    VERTEX_EDGE = 1,\n    EDGE_VERTEX = 2,\n    EDGE_EDGE = 3,\n}\n\nfunction newPoint(): Point {\n    return [INFINITE, INFINITE];\n}\n\nexport class Triangle {\n    vertices: (Vertex | null)[] = [];\n    neighbours: (Triangle | null)[] = [null, null, null];\n    constraints = [false, false, false];\n    static _counter = 0;\n    uid = Triangle._counter++;\n\n    constructor(...vertices: (Vertex | null)[]) {\n        this.vertices = vertices;\n    }\n\n    from(t: Triangle): this {\n        this.vertices = t.vertices.slice(0, t.vertices.length);\n        this.neighbours = t.neighbours.slice(0, t.neighbours.length);\n        this.constraints = t.constraints.slice(0, t.constraints.length);\n        return this;\n    }\n\n    get dimension() {\n        return this.vertices.length - 1;\n    }\n\n    addVertex(vertex: Vertex) {\n        if (vertex === undefined) {\n            console.log(\"UNDEFINED HIERE\");\n        }\n        this.vertices.push(vertex);\n        vertex.triangle = this;\n    }\n\n    isConstrained(index: number): boolean {\n        return this.constraints[index];\n    }\n\n    reorient() {\n        // If certain indices do not exist yet thay will append faulty undefined's, thus we slice them\n        this.vertices = [this.vertices[1], this.vertices[0], this.vertices[2]].slice(0, this.vertices.length);\n        this.neighbours = [this.neighbours[1], this.neighbours[0], this.neighbours[2]];\n        this.constraints = [this.constraints[1], this.constraints[0], this.constraints[2]];\n    }\n\n    indexV(v: Vertex): number {\n        return this.vertices.indexOf(v);\n    }\n\n    indexT(t: Triangle): number {\n        return this.neighbours.indexOf(t);\n    }\n\n    isInfinite(index?: number): boolean {\n        if (index === undefined) {\n            return this.vertices.includes(_INFINITE_VERTEX);\n        } else {\n            return this.vertices[ccw(index)]!.infinite || this.vertices[cw(index)]!.infinite;\n        }\n    }\n\n    contains(point: Point) {\n        const A =\n            -this.vertices[1]!.point![1] * this.vertices[2]!.point![0] +\n            this.vertices[0]!.point![1] * (-this.vertices[1]!.point![0] + this.vertices[2]!.point![0]) +\n            this.vertices[0]!.point![0] * (this.vertices[1]!.point![1] - this.vertices[2]!.point![1]) +\n            this.vertices[1]!.point![0] * this.vertices[2]!.point![1];\n        const sign = A < 0 ? -1 : 1;\n        const s =\n            (this.vertices[0]!.point![1] * this.vertices[2]!.point![0] -\n                this.vertices[0]!.point![0] * this.vertices[2]!.point![1] +\n                (this.vertices[2]!.point![1] - this.vertices[0]!.point![1]) * point[0] +\n                (this.vertices[0]!.point![0] - this.vertices[2]!.point![0]) * point[1]) *\n            sign;\n        if (s < 0) return false;\n        const t =\n            (this.vertices[0]!.point![0] * this.vertices[1]!.point![1] -\n                this.vertices[0]!.point![1] * this.vertices[1]!.point![0] +\n                (this.vertices[0]!.point![1] - this.vertices[1]!.point![1]) * point[0] +\n                (this.vertices[1]!.point![0] - this.vertices[0]!.point![0]) * point[1]) *\n            sign;\n\n        return t > 0 && s + t < A * sign;\n    }\n}\n\nexport class Vertex {\n    infinite = false;\n    private _point: Point | undefined;\n    triangle: Triangle | undefined;\n\n    constructor(point?: Point) {\n        this._point = point;\n    }\n\n    get point(): Point | undefined {\n        return this._point;\n    }\n\n    set point(point: Point | undefined) {\n        this._point = point;\n        this.infinite = false;\n    }\n}\n\nexport class EdgeCirculator {\n    ri: number;\n    v: Vertex | null;\n    t: Triangle | null;\n    _ri: number;\n    _v: Vertex | null;\n    _t: Triangle | null;\n\n    constructor(v: Vertex | null, t: Triangle | null) {\n        this.v = v;\n        this.t = t;\n        if (v === null) {\n            this.t = null;\n        } else if (t === null) {\n            this.t = v.triangle!;\n        }\n        if (this.t == null || this.t.dimension < 1) {\n            this.ri = 0;\n            this.v = null;\n            this.t = null;\n        } else {\n            const i = this.t.indexV(v!);\n            if (this.t.dimension === 2) this.ri = ccw(i);\n            else this.ri = 2;\n        }\n        this._ri = this.ri;\n        this._v = this.v;\n        this._t = this.t;\n    }\n\n    get valid() {\n        return this.t !== null && this.v !== null;\n    }\n\n    next(): boolean {\n        let i = this.t!.indexV(this.v!);\n        if (this.t!.dimension === 1) {\n            this.t = this.t!.neighbours[i === 0 ? 1 : 0];\n        } else {\n            this.t = this.t!.neighbours[ccw(i)];\n            i = this.t!.indexV(this.v!);\n            this.ri = ccw(i);\n        }\n        return this.ri !== this._ri || this.v !== this._v || this.t !== this._t;\n    }\n}\n\nexport class EdgeIterator {\n    private i = 0;\n    pos: Triangle | null;\n    edge: Edge = new Edge();\n    tds: TDS;\n    _es = 0;\n    constructor(tds: TDS) {\n        this.tds = tds;\n        this.edge.second = 0;\n        if (tds.dimension <= 0) {\n            this.pos = null;\n            return;\n        }\n        this.pos = tds.triangles[0];\n        if (tds.dimension === 1) this.edge.second = 2;\n        while (this.pos !== null && !this.associatedEdge()) {\n            throw new Error(\"[poi\");\n        }\n\n        if (tds.dimension === 1) this._es = 2;\n    }\n\n    get valid(): boolean {\n        return (this.pos !== null || this._es !== this.edge.second) && this.pos!.isInfinite(this.edge.second);\n    }\n\n    next() {\n        do {\n            this.increment();\n        } while (this.pos !== null && !this.associatedEdge());\n    }\n\n    collect(): Edge {\n        this.edge.first = this.pos;\n        return this.edge;\n    }\n\n    associatedEdge(): boolean {\n        if (this.tds.dimension === 1) return true;\n        return (\n            this.tds.triangles.indexOf(this.pos!) < this.tds.triangles.indexOf(this.pos!.neighbours[this.edge.second]!)\n        );\n    }\n\n    increment() {\n        if (this.tds.dimension === 1) {\n            this.i++;\n            if (this.tds.triangles.length <= this.i) this.pos = null;\n            else this.pos = this.tds.triangles[this.i];\n        } else if (this.edge.second === 2) {\n            this.edge.second = 0;\n            this.i++;\n            if (this.tds.triangles.length <= this.i) this.pos = null;\n            else this.pos = this.tds.triangles[this.i];\n        } else {\n            this.edge.second++;\n        }\n    }\n}\n\nexport class FaceCirculator {\n    v: Vertex | null;\n    t: Triangle | null;\n    _v: Vertex | null;\n    _t: Triangle | null;\n\n    constructor(v: Vertex | null, t: Triangle | null) {\n        this.v = v;\n        this.t = t;\n        if (v === null) {\n            this.t = null;\n        } else if (t === null) {\n            this.t = v.triangle!;\n        }\n        if (this.t == null || this.t.dimension < 2) {\n            this.v = null;\n            this.t = null;\n        }\n        this._v = this.v;\n        this._t = this.t;\n    }\n\n    get valid() {\n        return this.t !== null && this.v !== null;\n    }\n\n    prev() {\n        const i = this.t!.indexV(this.v!);\n        this.t = this.t!.neighbours[cw(i)];\n    }\n\n    next(): boolean {\n        const i = this.t!.indexV(this.v!);\n        this.t = this.t!.neighbours[ccw(i)];\n        return this.v !== this._v || this.t !== this._t;\n    }\n}\n\nexport class LineFaceCirculator {\n    private i = 0;\n    pos: Triangle | null = null;\n    _tr: CDT;\n    s: LineFaceState = LineFaceState.UNDEFINED;\n    p: Point;\n    q: Point;\n\n    constructor(v: Vertex, tr: CDT, dir: Point) {\n        this._tr = tr;\n        this.p = v.point!;\n        this.q = dir;\n\n        const fc = new FaceCirculator(v, null);\n        let ic = fc.t!.indexV(v);\n        let vt = fc.t!.vertices[cw(ic)]!;\n        while (v === _INFINITE_VERTEX || orientation(this.p, this.q, vt.point!) !== Sign.LEFT_TURN) {\n            fc.next();\n            ic = fc.t!.indexV(v);\n            vt = fc.t!.vertices[cw(ic)]!;\n            if (!fc.valid) {\n                return;\n            }\n        }\n\n        let vr = fc.t!.vertices[ccw(ic)]!;\n        let pqr: Sign = Sign.RIGHT_TURN;\n        // tslint:disable:no-conditional-assignment\n        while (vr !== _INFINITE_VERTEX && (pqr = orientation(this.p, this.q, vr.point!)) === Sign.LEFT_TURN) {\n            fc.prev();\n            ic = fc.t!.indexV(v);\n            vr = fc.t!.vertices[ccw(ic)]!;\n        }\n\n        ic = fc.t!.indexV(v);\n        vt = fc.t!.vertices[cw(ic)]!;\n\n        if (vr === _INFINITE_VERTEX) {\n            fc.prev();\n            ic = fc.t!.indexV(v);\n            vr = fc.t!.vertices[ccw(ic)]!;\n            pqr = orientation(this.p, this.q, vr.point!);\n            switch (pqr) {\n                case Sign.RIGHT_TURN:\n                case Sign.COLLINEAR: {\n                    fc.next();\n                    ic = fc.t!.indexV(_INFINITE_VERTEX);\n                    this.pos = fc.t!;\n                    this.s = LineFaceState.VERTEX_VERTEX;\n                    this.i = ic;\n                    break;\n                }\n                case Sign.LEFT_TURN: {\n                    break;\n                }\n            }\n        } else if (pqr === Sign.COLLINEAR) {\n            this.pos = fc.t!;\n            this.s = LineFaceState.VERTEX_VERTEX;\n            this.i = ccw(ic);\n        } else {\n            this.pos = fc.t!;\n            this.s = LineFaceState.VERTEX_EDGE;\n            this.i = ic;\n        }\n    }\n\n    next() {\n        this.increment();\n    }\n\n    increment() {\n        let o: Sign;\n        if (this.s === LineFaceState.VERTEX_VERTEX || this.s === LineFaceState.EDGE_VERTEX) {\n            do {\n                const n = this.pos!.neighbours[cw(this.i)]!;\n                this.i = n.indexT(this.pos!);\n                this.pos = n;\n                if (this.pos!.vertices[this.i] === _INFINITE_VERTEX) {\n                    o = Sign.COLLINEAR;\n                    this.i = cw(this.i);\n                    break;\n                }\n                o = orientation(this.p, this.q, this.pos!.vertices[this.i]!.point!);\n                this.i = cw(this.i);\n            } while (o === Sign.LEFT_TURN);\n            if (o === Sign.COLLINEAR) {\n                this.s = LineFaceState.VERTEX_VERTEX;\n                this.i = ccw(this.i);\n            } else {\n                this.s = LineFaceState.VERTEX_EDGE;\n            }\n        } else {\n            const n = this.pos!.neighbours[this.i]!;\n            const ni = n.indexT(this.pos!);\n            this.pos = n;\n            o =\n                this.pos!.vertices[ni]! === _INFINITE_VERTEX\n                    ? Sign.COLLINEAR\n                    : orientation(this.p, this.q, this.pos!.vertices[ni]!.point!);\n            switch (o) {\n                case Sign.LEFT_TURN: {\n                    this.s = LineFaceState.EDGE_EDGE;\n                    this.i = ccw(ni);\n                    break;\n                }\n                case Sign.RIGHT_TURN: {\n                    this.s = LineFaceState.EDGE_EDGE;\n                    this.i = cw(ni);\n                    break;\n                }\n                default: {\n                    this.s = LineFaceState.EDGE_VERTEX;\n                    this.i = ni;\n                }\n            }\n        }\n    }\n}\n\nclass Edge {\n    first: Triangle | null = null;\n    second: number = 0;\n}\n\nexport enum LocateType {\n    VERTEX,\n    EDGE,\n    FACE,\n    OUTSIDE_CONVEX_HULL,\n    OUTSIDE_AFFINE_HULL,\n}\n\nexport class TDS {\n    dimension = -1;\n    vertices: Vertex[] = [];\n    triangles: Triangle[] = [];\n    _infinite: Vertex;\n\n    constructor() {\n        this._infinite = this.createVertex();\n        _INFINITE_VERTEX = this._infinite;\n        const t = new Triangle();\n        t.addVertex(this._infinite);\n        this.triangles.push(t);\n    }\n\n    createVertex(): Vertex {\n        const v = this.infiniteVertex;\n        if (v === undefined) {\n            console.log(\"UNDEFINED HIERE\");\n        }\n        this.vertices.push(v);\n        return v;\n    }\n\n    createTriangle(\n        v0: Vertex | null,\n        v1: Vertex | null,\n        v2: Vertex | null,\n        n0: Triangle | null,\n        n1: Triangle | null,\n        n2: Triangle | null,\n    ) {\n        const t = new Triangle(v0, v1, v2);\n        t.neighbours[0] = n0;\n        t.neighbours[1] = n1;\n        t.neighbours[2] = n2;\n        this.triangles.push(t);\n        return t;\n    }\n\n    deleteTriangle(trig: Triangle) {\n        this.triangles = this.triangles.filter(t => t !== trig);\n    }\n\n    setAdjacency(t0: Triangle, i0: number, t1: Triangle, i1: number) {\n        t0.neighbours[i0] = t1;\n        t1.neighbours[i1] = t0;\n    }\n\n    get finiteVertex(): Vertex {\n        return this.vertices[1];\n    }\n\n    get infiniteVertex(): Vertex {\n        const v = new Vertex(newPoint());\n        v.infinite = true;\n        return v;\n    }\n\n    get finiteEdge(): Edge {\n        if (this.dimension < 1) throw new Error(\"aspo\");\n        const ei = new EdgeIterator(this);\n        while (ei.valid) ei.next();\n        return ei.collect();\n    }\n\n    insertDimUp(w: Vertex = new Vertex(), orient: boolean = true): Vertex {\n        const v = this.createVertex();\n        this.dimension++;\n        let t1: Triangle;\n        let t2: Triangle;\n        switch (this.dimension) {\n            case 0: {\n                t1 = this.triangles[0];\n                t2 = new Triangle(v);\n                this.triangles.push(t2);\n                this.setAdjacency(t1, 0, t2, 0);\n                v.triangle = t2;\n                break;\n            }\n            case 1:\n            case 2: {\n                const deleteList: Triangle[] = [];\n                const triangles = this.triangles.slice(0, this.triangles.length);\n                for (const trig of triangles) {\n                    const copy = new Triangle().from(trig);\n                    this.triangles.push(copy);\n                    trig.vertices[this.dimension] = v;\n                    copy.vertices[this.dimension] = w;\n                    this.setAdjacency(trig, this.dimension, copy, this.dimension);\n                    if (trig.vertices.includes(w)) deleteList.push(copy);\n                }\n                for (const trig of triangles) {\n                    const neighbour = trig.neighbours[this.dimension];\n                    for (let j = 0; j < this.dimension; ++j) {\n                        neighbour!.neighbours[j] = trig.neighbours[j]!.neighbours[this.dimension];\n                    }\n                }\n\n                let lfit = 0;\n                if (this.dimension === 1) {\n                    if (orient) {\n                        triangles[lfit].reorient();\n                        lfit++;\n                        triangles[lfit].neighbours[1]!.reorient();\n                    } else {\n                        triangles[lfit].neighbours[1]!.reorient();\n                        lfit++;\n                        triangles[lfit].reorient();\n                    }\n                } else {\n                    for (const trig of triangles) {\n                        if (orient) trig.neighbours[2]!.reorient();\n                        else trig.reorient();\n                    }\n                }\n\n                for (const trig of deleteList) {\n                    let j = 1;\n                    if (trig.vertices[0] === w) j = 0;\n                    t1 = trig.neighbours[this.dimension]!;\n                    const i1 = this.mirrorIndex(trig, this.dimension);\n                    t2 = trig.neighbours[j]!;\n                    const i2 = this.mirrorIndex(trig, j);\n                    this.setAdjacency(t1, i1, t2, i2);\n                    this.deleteTriangle(trig);\n                }\n                v.triangle = triangles[0];\n                break;\n            }\n            default: {\n                throw new Error(\"Dimension unknown\");\n            }\n        }\n        return v;\n    }\n\n    mirrorIndex(t: Triangle, i: number): number {\n        if (t.dimension === 1) {\n            const j = t.neighbours[i]!.indexV(t.vertices[i === 0 ? 1 : 0]!);\n            return j === 0 ? 1 : 0;\n        }\n        return ccw(t.neighbours[i]!.indexV(t.vertices[ccw(i)]!));\n    }\n\n    insertInFace(t: Triangle) {\n        const v = this.createVertex();\n        const v0 = t.vertices[0]!;\n        const v1 = t.vertices[1]!;\n        const v2 = t.vertices[2]!;\n        const n1 = t.neighbours[1]!;\n        const n2 = t.neighbours[2]!;\n        const t1 = this.createTriangle(v0, v, v2, t, n1, null);\n        const t2 = this.createTriangle(v0, v1, v, t, null, n2);\n        this.setAdjacency(t1, 2, t2, 1);\n        if (n1 !== null) {\n            const i1 = this.mirrorIndex(t, 1);\n            n1.neighbours[i1] = t1;\n        }\n        if (n2 !== null) {\n            const i2 = this.mirrorIndex(t, 2);\n            n2.neighbours[i2] = t2;\n        }\n        t.vertices[0] = v;\n        t.neighbours[1] = t1;\n        t.neighbours[2] = t2;\n        if (v0.triangle === t) v0.triangle = t2;\n        v.triangle = t;\n        return v;\n    }\n\n    flip(t: Triangle, i: number) {\n        const n = t.neighbours[i]!;\n        const ni = this.mirrorIndex(t, i);\n        const vCW = t.vertices[cw(i)]!;\n        const vCCW = t.vertices[ccw(i)]!;\n        const tr = t.neighbours[ccw(i)]!;\n        const tri = this.mirrorIndex(t, ccw(i));\n        const bl = n.neighbours[ccw(ni)]!;\n        const bli = this.mirrorIndex(n, ccw(ni));\n\n        t.vertices[cw(i)] = n.vertices[ni]!;\n        n.vertices[cw(ni)] = t.vertices[i]!;\n\n        this.setAdjacency(t, i, bl, bli);\n        this.setAdjacency(t, ccw(i), n, ccw(ni));\n        this.setAdjacency(n, ni, tr, tri);\n\n        if (vCW.triangle! === t) vCW.triangle = n;\n        if (vCCW.triangle! === n) vCCW.triangle = t;\n    }\n\n    insertInEdge(t: Triangle, i: number) {\n        let v: Vertex;\n        if (this.dimension === 1) {\n            v = this.createVertex();\n            const ff = t.neighbours[0]!;\n            const vv = t.vertices[1]!;\n            const g = this.createTriangle(v, vv, null, ff, t, null);\n            t.vertices[1] = v;\n            t.neighbours[0] = g;\n            ff.neighbours[1] = g;\n            v.triangle = g;\n            vv.triangle = ff;\n        } else {\n            const n = t.neighbours[i]!;\n            const ni = this.mirrorIndex(t, i);\n            v = this.insertInFace(t);\n            this.flip(n, ni);\n        }\n        return v;\n    }\n}\n\nexport class BoundingBox {\n    x1: number;\n    x2: number;\n    y1: number;\n    y2: number;\n    constructor(p: Point) {\n        this.x1 = p[0];\n        this.y1 = p[1];\n        this.x2 = p[0];\n        this.y2 = p[1];\n    }\n\n    dilate(dist: number) {\n        this.x1 -= dist * ulp(this.x1);\n        this.y1 -= dist * ulp(this.y1);\n        this.x2 += dist * ulp(this.x2);\n        this.y2 += dist * ulp(this.y2);\n    }\n\n    overlaps(other: BoundingBox): boolean {\n        if (this.x2 < other.x1 || other.x2 < this.x1) return false;\n        if (this.y2 < other.y1 || other.y2 < this.y1) return false;\n        return true;\n    }\n}\n","import { partition } from \"@/core/utils\";\nimport { GlobalPoint, Ray } from \"@/game/geom\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { BoundingRect } from \"@/game/shapes/boundingrect\";\nimport { gameStore } from \"@/game/store\";\nimport { g2lx, g2ly, g2lz } from \"@/game/units\";\nimport { BoundingNode, InteriorNode, LeafNode } from \"@/game/visibility/bvh/node\";\n\ninterface BuildInfo {\n    index: number;\n    bbox: BoundingRect;\n    center: BoundingRect;\n}\ninterface LinearBHVNode {\n    bbox: BoundingRect;\n    nPrimitives: number;\n}\ninterface LinearLeafNode extends LinearBHVNode {\n    primitivesOffset: number;\n}\ninterface LinearInternalNode extends LinearBHVNode {\n    secondChildOffset: number;\n    dimension: number;\n}\n\nexport class BoundingVolume {\n    totalNodes = 0;\n    buildData: BuildInfo[] = [];\n    shapes: string[];\n    orderedPrims: string[] = [];\n    root: BoundingNode | null;\n    nodes: LinearBHVNode[] = [];\n\n    offset = 0;\n\n    constructor(shapes: string[]) {\n        this.shapes = shapes;\n        if (this.shapes.length === 0) {\n            this.root = null;\n            this.nodes = [];\n            return;\n        }\n        for (let i = 0; i < shapes.length; i++) {\n            const shape = layerManager.UUIDMap.get(shapes[i])!;\n            this.buildData.push({\n                index: i,\n                bbox: shape.getBoundingBox(),\n                center: new BoundingRect(shape.center(), 0, 0),\n            });\n        }\n        this.root = this.recursiveBuild(0, shapes.length);\n        this.compact();\n    }\n\n    draw() {\n        const ctx = layerManager.getLayer(\"draw\")!.ctx;\n        for (const node of this.nodes) {\n            const b = node.bbox;\n            ctx.strokeRect(g2lx(b.topLeft.x), g2ly(b.topLeft.y), g2lz(b.w), g2lz(b.h));\n        }\n    }\n\n    recursiveBuild(start: number, end: number): BoundingNode {\n        this.totalNodes++;\n        let bbox = this.buildData[start].bbox;\n        for (let i = start + 1; i < end; i++) bbox = bbox.union(this.buildData[i].bbox);\n        const nPrimitives = end - start;\n        if (nPrimitives === 1) {\n            return this.createLeaf(start, end, nPrimitives, bbox);\n        } else {\n            let centroidBbox = this.buildData[start].center;\n            for (let i = start; i < end; i++) centroidBbox = centroidBbox.union(this.buildData[i].center);\n            const dimension = centroidBbox.getMaxExtent();\n            if (centroidBbox.botRight.get(dimension) === centroidBbox.topLeft.get(dimension)) {\n                return this.createLeaf(start, end, nPrimitives, bbox);\n            }\n            // Use shitty Middle thingy until an introselect js algo is added\n            const pMid = 0.5 * (centroidBbox.topLeft.get(dimension) + centroidBbox.botRight.get(dimension));\n            const partitionedData = partition(\n                this.buildData.slice(start, end),\n                (n: BuildInfo) => n.center.center().get(dimension) < pMid,\n            );\n            const flattened = (<BuildInfo[]>[]).concat.apply([], partitionedData);\n            if (partitionedData[0].length === 0 || partitionedData[1].length === 0) console.log(\"EMPTY\");\n            this.buildData.splice(start, flattened.length, ...flattened);\n            const mid = partitionedData[0].length + start;\n            return new InteriorNode(dimension, this.recursiveBuild(start, mid), this.recursiveBuild(mid, end));\n        }\n    }\n\n    intersect(ray: Ray<GlobalPoint>, stopOnFirstHit?: boolean) {\n        if (this.nodes.length === 0) return { hit: false, intersect: ray.get(0), tMin: 0, tMax: ray.tMax };\n        if (stopOnFirstHit === undefined) stopOnFirstHit = false;\n        // Initialize return values\n        let hit = false;\n        let tMin = 0;\n        let tMax = ray.tMax;\n\n        // Initialize work variables\n        let todoOffset = 0;\n        let nodeNum = 0;\n        const todo: number[] = [];\n\n        // Precalculate intersection vectors\n        const invDir = ray.direction.inverse();\n        const dirIsNegative = [invDir.x < 0, invDir.y < 0];\n\n        while (true) {\n            const node = this.nodes[nodeNum];\n\n            const i = node.bbox.intersectP(ray, invDir, dirIsNegative);\n            if (i.hit) {\n                if (node.nPrimitives > 0) {\n                    // TODO: nPrimitives is currently always 1 , this could be generalised\n                    // for (let i=0; i < node.nPrimitives; i++) {\n                    //     if (this.shapes[(<LinearLeafNode>node).primitivesOffset + i])\n                    // }\n                    hit = true;\n                    tMin = ray.tMax = i.min;\n                    tMax = i.max;\n                    if (todoOffset === 0 || stopOnFirstHit) break;\n                    nodeNum = todo[--todoOffset];\n                } else {\n                    if (dirIsNegative[(<LinearInternalNode>node).dimension]) {\n                        todo[todoOffset++] = nodeNum + 1;\n                        nodeNum = (<LinearInternalNode>node).secondChildOffset;\n                    } else {\n                        todo[todoOffset++] = (<LinearInternalNode>node).secondChildOffset;\n                        nodeNum++;\n                    }\n                }\n            } else {\n                if (todoOffset === 0) break;\n                nodeNum = todo[--todoOffset];\n            }\n        }\n        return { hit, intersect: ray.get(tMin), tMin, tMax };\n    }\n\n    private compact() {\n        this.offset = 0;\n        if (this.root !== null) this.flatten(this.root);\n    }\n\n    private flatten(node: BoundingNode) {\n        const index = this.offset;\n        const myOffset = this.offset++;\n        if (node.nPrimitives === 0) {\n            this.flatten(node.children[0]);\n            const secondOffset = this.flatten(node.children[1]);\n            this.nodes[index] = <LinearInternalNode>{\n                bbox: node.bbox,\n                dimension: (<InteriorNode>node).dimension,\n                nPrimitives: 0,\n                secondChildOffset: secondOffset,\n            };\n        } else {\n            this.nodes[index] = <LinearLeafNode>{\n                bbox: node.bbox,\n                primitivesOffset: (<LeafNode>node).firstPrimOffset,\n                nPrimitives: node.nPrimitives,\n            };\n        }\n        return myOffset;\n    }\n\n    private createLeaf(start: number, end: number, nPrimitives: number, bbox: BoundingRect) {\n        const size = this.orderedPrims.length;\n        for (let i = start; i < end; i++) this.orderedPrims.push(this.shapes[this.buildData[i].index]);\n        return new LeafNode(size, nPrimitives, bbox);\n    }\n}\n","import Initiative from \"./ui/initiative.vue\";\n\nimport { getRef } from \"@/core/utils\";\nimport { sendClientOptions } from \"@/game/api/utils\";\nimport { ServerShape } from \"@/game/comm/types/shapes\";\nimport { GlobalPoint } from \"@/game/geom\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { createShapeFromDict } from \"@/game/shapes/utils\";\nimport { gameStore } from \"@/game/store\";\nimport { AnnotationManager } from \"@/game/ui/annotation\";\nimport { g2l } from \"@/game/units\";\n\nexport class GameManager {\n    selectedTool: number = 0;\n\n    annotationManager = new AnnotationManager();\n\n    addShape(shape: ServerShape): void {\n        if (!layerManager.hasLayer(shape.layer)) {\n            console.log(`Shape with unknown layer ${shape.layer} could not be added`);\n            return;\n        }\n        const layer = layerManager.getLayer(shape.layer)!;\n        const sh = createShapeFromDict(shape);\n        if (sh === undefined) {\n            console.log(`Shape with unknown type ${shape.type_} could not be added`);\n            return;\n        }\n        layer.addShape(sh, false);\n        layer.invalidate(false);\n    }\n\n    updateShape(data: { shape: ServerShape; redraw: boolean; move: boolean }): void {\n        if (!layerManager.hasLayer(data.shape.layer)) {\n            console.log(`Shape with unknown layer ${data.shape.layer} could not be added`);\n            return;\n        }\n        const sh = createShapeFromDict(data.shape, true);\n        if (sh === undefined) {\n            console.log(`Shape with unknown type ${data.shape.type_} could not be added`);\n            return;\n        }\n        const oldShape = layerManager.UUIDMap.get(data.shape.uuid);\n        if (oldShape === undefined) {\n            console.log(`Shape with unknown id could not be updated`);\n            return;\n        }\n        const redrawInitiative = sh.owners !== oldShape.owners;\n        const shape = Object.assign(oldShape, sh);\n        shape.checkVisionSources();\n        shape.setMovementBlock(shape.movementObstruction);\n        shape.setIsToken(shape.isToken);\n        if (data.redraw) layerManager.getLayer(data.shape.layer)!.invalidate(false);\n        if (redrawInitiative) getRef<Initiative>(\"initiative\").$forceUpdate();\n    }\n\n    setCenterPosition(position: GlobalPoint) {\n        const localPos = g2l(position);\n        gameStore.increasePanX((window.innerWidth / 2 - localPos.x) / gameStore.zoomFactor);\n        gameStore.increasePanY((window.innerHeight / 2 - localPos.y) / gameStore.zoomFactor);\n        layerManager.invalidate();\n        sendClientOptions();\n    }\n}\n\nexport const gameManager = new GameManager();\n(<any>window).gameManager = gameManager;\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('modal',{attrs:{\"visible\":_vm.visible,\"mask\":false},on:{\"close\":function($event){_vm.visible = false}},scopedSlots:_vm._u([{key:\"header\",fn:function(m){return _c('div',{staticClass:\"modal-header\",attrs:{\"draggable\":\"true\"},on:{\"dragstart\":m.dragStart,\"dragend\":m.dragEnd}},[_c('div',[_vm._v(\"Initiative\")]),_c('div',{staticClass:\"header-close\",on:{\"click\":function($event){_vm.visible = false}}},[_c('i',{staticClass:\"far fa-window-close\"})])])}}])},[_c('div',{staticClass:\"modal-body\"},[_c('draggable',{attrs:{\"id\":\"initiative-list\",\"options\":{setData: _vm.fakeSetData, disabled: !_vm.$store.state.game.IS_DM}},on:{\"change\":_vm.updateOrder},model:{value:(_vm.data),callback:function ($$v) {_vm.data=$$v},expression:\"data\"}},[_vm._l((_vm.data),function(actor){return [_c('div',{key:actor.uuid,staticStyle:{\"display\":\"flex\",\"flex-direction\":\"column\",\"align-items\":\"flex-end\"}},[_c('div',{staticClass:\"initiative-actor\",class:{'initiative-selected': _vm.currentActor === actor.uuid},style:({'cursor': _vm.$store.state.game.IS_DM && 'move'}),on:{\"mouseenter\":function($event){_vm.toggleHighlight(actor, true)},\"mouseleave\":function($event){_vm.toggleHighlight(actor, false)}}},[(actor.has_img)?[_c('img',{attrs:{\"src\":actor.source,\"width\":\"30px\",\"height\":\"30px\"}})]:[_c('span',{staticStyle:{\"width\":\"auto\"}},[_vm._v(_vm._s(actor.source))])],_c('input',{directives:[{name:\"model\",rawName:\"v-model.lazy.number\",value:(actor.initiative),expression:\"actor.initiative\",modifiers:{\"lazy\":true,\"number\":true}}],class:{'notAllowed': !_vm.owns(actor)},attrs:{\"type\":\"text\",\"placeholder\":\"value\",\"disabled\":!_vm.owns(actor)},domProps:{\"value\":(actor.initiative)},on:{\"change\":[function($event){_vm.$set(actor, \"initiative\", _vm._n($event.target.value))},function($event){_vm.syncInitiative(actor)}],\"blur\":function($event){_vm.$forceUpdate()}}}),_c('div',{staticClass:\"initiative-effects-icon\",class:{'notAllowed': !_vm.owns(actor)},staticStyle:{\"opacity\":\"0.6\"},on:{\"click\":function($event){_vm.createEffect(actor, _vm.getDefaultEffect(), true)}}},[_c('i',{staticClass:\"fas fa-stopwatch\"}),(actor.effects)?[_vm._v(_vm._s(actor.effects.length))]:[_vm._v(\"0\")]],2),_c('div',{class:{'notAllowed': !_vm.owns(actor)},style:({'opacity': actor.visible ? '1.0' : '0.3'}),on:{\"click\":function($event){_vm.toggleOption(actor, 'visible')}}},[_c('i',{staticClass:\"fas fa-eye\"})]),_c('div',{class:{'notAllowed': !_vm.owns(actor)},style:({'opacity': actor.group ? '1.0' : '0.3'}),on:{\"click\":function($event){_vm.toggleOption(actor, 'group')}}},[_c('i',{staticClass:\"fas fa-users\"})]),_c('div',{class:{'notAllowed': !_vm.owns(actor)},style:({'opacity': _vm.owns(actor) ? '1.0' : '0.3'}),on:{\"click\":function($event){_vm.removeInitiative(actor.uuid, true, true)}}},[_c('i',{staticClass:\"fas fa-trash-alt\"})])],2),(actor.effects)?_c('div',{staticClass:\"initiative-effect\"},_vm._l((actor.effects),function(effect){return _c('div',{key:effect.uuid},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(effect.name),expression:\"effect.name\"}],attrs:{\"type\":\"text\",\"size\":effect.name.length || 1},domProps:{\"value\":(effect.name)},on:{\"change\":function($event){_vm.updateEffect(actor.uuid, effect, true)},\"input\":function($event){if($event.target.composing){ return; }_vm.$set(effect, \"name\", $event.target.value)}}}),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(effect.turns),expression:\"effect.turns\"}],attrs:{\"type\":\"text\",\"size\":effect.turns.toString().length || 1},domProps:{\"value\":(effect.turns)},on:{\"change\":function($event){_vm.updateEffect(actor.uuid, effect, true)},\"input\":function($event){if($event.target.composing){ return; }_vm.$set(effect, \"turns\", $event.target.value)}}})])})):_vm._e()])]})],2),_c('div',{attrs:{\"id\":\"initiative-bar\"}},[_c('div',{attrs:{\"id\":\"initiative-round\"}},[_vm._v(\"Round \"+_vm._s(_vm.roundCounter))]),_c('div',{staticStyle:{\"display\":\"flex\"}}),_c('div',{staticClass:\"initiative-bar-button\",class:{'notAllowed': !_vm.$store.state.game.IS_DM},on:{\"click\":function($event){_vm.setRound(0, true); _vm.setTurn(_vm.data[0].uuid, true)}}},[_c('i',{staticClass:\"fas fa-sync-alt\"})]),_c('div',{staticClass:\"initiative-bar-button\",class:{'notAllowed': !_vm.$store.state.game.IS_DM},on:{\"click\":_vm.nextTurn}},[_c('i',{staticClass:\"fas fa-chevron-right\"})])])],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"74f43d04-vue-loader-template\\\"}!../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./initiative.vue?vue&type=template&id=ccaf03d6&scoped=true&\"","\n\n\n\n\n\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\n\n@Component\nexport default class LoadComponent extends Vue {\n    message = \"Loading...\";\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.getActiveLayer() !== undefined)?_c('ContextMenu',{attrs:{\"visible\":_vm.visible,\"left\":_vm.x + 'px',\"top\":_vm.y + 'px'},on:{\"close\":_vm.close}},[(_vm.getLayers().length > 1)?_c('li',[_vm._v(\"Layer\\n        \"),_c('ul',_vm._l((_vm.getLayers()),function(layer){return _c('li',{key:layer.name,style:([_vm.getActiveLayer().name === layer.name ? {'background-color':'#82c8a0'}: {}]),on:{\"click\":function($event){_vm.setLayer(layer.name)}}},[_vm._v(_vm._s(layer.name))])}))]):_vm._e(),_c('li',{on:{\"click\":_vm.moveToBack}},[_vm._v(\"Move to back\")]),_c('li',{on:{\"click\":_vm.moveToFront}},[_vm._v(\"Move to front\")]),_c('li',{on:{\"click\":_vm.addInitiative}},[_vm._v(_vm._s(_vm.getInitiativeWord())+\" initiative\")]),_c('li',{on:{\"click\":_vm.openEditDialog}},[_vm._v(\"Show properties\")])]):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"74f43d04-vue-loader-template\\\"}!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./shapecontext.vue?vue&type=template&id=759e5a8a&scoped=true&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./game.vue?vue&type=style&index=1&id=6d744362&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./game.vue?vue&type=style&index=1&id=6d744362&scoped=true&lang=css&\"","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport axios, { AxiosError, AxiosResponse } from \"axios\";\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\nimport { Route } from \"vue-router\";\n\nimport { coreStore } from \"@/core/store\";\n\nComponent.registerHooks([\"beforeRouteEnter\"]);\n\n@Component\nexport default class Dashboard extends Vue {\n    owned = [];\n    joined = [];\n    error = \"\";\n\n    newSessionName = \"\";\n\n    beforeRouteEnter(to: Route, from: Route, next: ({}) => {}) {\n        axios\n            .get(\"/api/rooms\")\n            .then((response: AxiosResponse) => {\n                next((vm: this) => {\n                    vm.owned = response.data.owned;\n                    vm.joined = response.data.joined;\n                });\n            })\n            .catch((err: AxiosError) => {\n                next((vm: this) => {\n                    vm.error = err.message;\n                });\n            });\n    }\n\n    createRoom(event: Event) {\n        axios\n            .post(\"/api/rooms\", {\n                name: this.newSessionName,\n            })\n            .then((response: AxiosResponse) => {\n                this.$router.push(`/game/${coreStore.username}/${this.newSessionName}`);\n            })\n            .catch((err: AxiosError) => {\n                this.error = err.message;\n            });\n    }\n}\n","import { render, staticRenderFns } from \"./confirm.vue?vue&type=template&id=1883e207&scoped=true&\"\nimport script from \"./confirm.vue?vue&type=script&lang=ts&\"\nexport * from \"./confirm.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./confirm.vue?vue&type=style&index=0&id=1883e207&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1883e207\",\n  null\n  \n)\n\ncomponent.options.__file = \"confirm.vue\"\nexport default component.exports","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./shapecontext.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./shapecontext.vue?vue&type=script&lang=ts&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ContextMenu',{attrs:{\"visible\":_vm.visible,\"left\":_vm.left + 'px',\"top\":_vm.top + 'px'},on:{\"close\":_vm.close}},[_c('li',{on:{\"click\":_vm.rename}},[_vm._v(\"Rename\")]),_c('li',{on:{\"click\":_vm.remove}},[_vm._v(\"Remove\")])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"74f43d04-vue-loader-template\\\"}!../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./contextMenu.vue?vue&type=template&id=606797b4&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./draw.vue?vue&type=style&index=0&id=639cd890&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./draw.vue?vue&type=style&index=0&id=639cd890&scoped=true&lang=css&\"","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--12-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./manager.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--12-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./manager.vue?vue&type=script&lang=ts&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('Modal',{attrs:{\"visible\":_vm.visible,\"mask\":false},on:{\"close\":function($event){_vm.visible = false}},scopedSlots:_vm._u([{key:\"header\",fn:function(m){return _c('div',{staticClass:\"modal-header\",attrs:{\"draggable\":\"true\"},on:{\"dragstart\":m.dragStart,\"dragend\":m.dragEnd}},[_c('div',[_vm._v(\"Edit asset\")]),_c('div',{staticClass:\"header-close\",on:{\"click\":function($event){_vm.visible = false}}},[_c('i',{staticClass:\"far fa-window-close\"})])])}}])},[_c('div',{staticClass:\"modal-body\"},[_c('label',{attrs:{\"for\":\"shapeselectiondialog-name\"}},[_vm._v(\"Name\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.shape.name),expression:\"shape.name\"}],staticStyle:{\"grid-column\":\"numerator / end\"},attrs:{\"type\":\"text\",\"id\":\"shapeselectiondialog-name\"},domProps:{\"value\":(_vm.shape.name)},on:{\"change\":function($event){_vm.updateShape(false)},\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.shape, \"name\", $event.target.value)}}}),_c('label',{attrs:{\"for\":\"shapeselectiondialog-istoken\"}},[_vm._v(\"Is a token\")]),_c('input',{staticStyle:{\"grid-column-start\":\"remove\",\"width\":\"15px\",\"height\":\"15px\"},attrs:{\"type\":\"checkbox\",\"id\":\"shapeselectiondialog-istoken\"},domProps:{\"checked\":_vm.shape.isToken},on:{\"click\":_vm.setToken}}),_c('label',{attrs:{\"for\":\"shapeselectiondialog-visionblocker\"}},[_vm._v(\"Blocks vision/light\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.shape.visionObstruction),expression:\"shape.visionObstruction\"}],staticStyle:{\"grid-column-start\":\"remove\",\"width\":\"15px\",\"height\":\"15px\"},attrs:{\"type\":\"checkbox\",\"id\":\"shapeselectiondialog-visionblocker\"},domProps:{\"checked\":Array.isArray(_vm.shape.visionObstruction)?_vm._i(_vm.shape.visionObstruction,null)>-1:(_vm.shape.visionObstruction)},on:{\"change\":[function($event){var $$a=_vm.shape.visionObstruction,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.$set(_vm.shape, \"visionObstruction\", $$a.concat([$$v])))}else{$$i>-1&&(_vm.$set(_vm.shape, \"visionObstruction\", $$a.slice(0,$$i).concat($$a.slice($$i+1))))}}else{_vm.$set(_vm.shape, \"visionObstruction\", $$c)}},_vm.setVisionBlocker]}}),_c('label',{attrs:{\"for\":\"shapeselectiondialog-moveblocker\"}},[_vm._v(\"Blocks movement\")]),_c('input',{staticStyle:{\"grid-column-start\":\"remove\",\"width\":\"15px\",\"height\":\"15px\"},attrs:{\"type\":\"checkbox\",\"id\":\"shapeselectiondialog-moveblocker\"},domProps:{\"checked\":_vm.shape.movementObstruction},on:{\"click\":_vm.setMovementBlocker}}),_c('label',{attrs:{\"for\":\"shapeselectiondialog-strokecolour\"}},[_vm._v(\"Border colour\")]),_c('color-picker',{staticStyle:{\"grid-column-start\":\"remove\",\"width\":\"15px\",\"height\":\"15px\"},attrs:{\"color\":_vm.shape.strokeColour},on:{\"update:color\":function($event){_vm.$set(_vm.shape, \"strokeColour\", $event)},\"input\":function($event){_vm.updateShape(true, true)},\"change\":function($event){_vm.updateShape(true)}}}),_c('label',{attrs:{\"for\":\"shapeselectiondialog-fillcolour\"}},[_vm._v(\"Fill colour\")]),_c('color-picker',{staticStyle:{\"grid-column-start\":\"remove\",\"width\":\"15px\",\"height\":\"15px\"},attrs:{\"color\":_vm.shape.fillColour},on:{\"update:color\":function($event){_vm.$set(_vm.shape, \"fillColour\", $event)},\"input\":function($event){_vm.updateShape(true, true)},\"change\":function($event){_vm.updateShape(true)}}}),_c('div',{staticClass:\"spanrow header\"},[_vm._v(\"Access\")]),_vm._l((_vm.shape.owners),function(owner){return [_c('input',{key:owner,staticStyle:{\"grid-column-start\":\"name\"},attrs:{\"type\":\"text\",\"placeholder\":\"name\"},domProps:{\"value\":owner},on:{\"change\":function($event){_vm.updateOwner($event, owner)}}}),(owner !== '')?_c('div',{key:'remove-' + owner,staticStyle:{\"grid-column-start\":\"remove\"},on:{\"click\":function($event){_vm.removeOwner(owner)}}},[_c('i',{staticClass:\"fas fa-trash-alt\"})]):_vm._e()]}),_c('div',{staticClass:\"spanrow header\"},[_vm._v(\"Trackers\")]),_vm._l((_vm.shape.trackers),function(tracker){return [_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(tracker.name),expression:\"tracker.name\"}],key:'name-'+tracker.uuid,staticStyle:{\"grid-column-start\":\"name\"},attrs:{\"type\":\"text\",\"placeholder\":\"name\"},domProps:{\"value\":(tracker.name)},on:{\"change\":function($event){_vm.updateShape(false);},\"input\":function($event){if($event.target.composing){ return; }_vm.$set(tracker, \"name\", $event.target.value)}}}),_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(tracker.value),expression:\"tracker.value\",modifiers:{\"number\":true}}],key:'value-'+tracker.uuid,attrs:{\"type\":\"text\",\"title\":\"Current value\"},domProps:{\"value\":(tracker.value)},on:{\"change\":function($event){_vm.updateShape(false)},\"input\":function($event){if($event.target.composing){ return; }_vm.$set(tracker, \"value\", _vm._n($event.target.value))},\"blur\":function($event){_vm.$forceUpdate()}}}),_c('span',{key:'fspan-'+tracker.uuid},[_vm._v(\"/\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(tracker.maxvalue),expression:\"tracker.maxvalue\",modifiers:{\"number\":true}}],key:'maxvalue-'+tracker.uuid,attrs:{\"type\":\"text\",\"title\":\"Current value\"},domProps:{\"value\":(tracker.maxvalue)},on:{\"change\":function($event){_vm.updateShape(false)},\"input\":function($event){if($event.target.composing){ return; }_vm.$set(tracker, \"maxvalue\", _vm._n($event.target.value))},\"blur\":function($event){_vm.$forceUpdate()}}}),_c('span',{key:'sspan-'+tracker.uuid}),_c('div',{key:'visibility-'+tracker.uuid,style:({opacity: tracker.visible ? 1.0 : 0.3}),on:{\"click\":function($event){tracker.visible = !tracker.visible;_vm.updateShape(false)}}},[_c('i',{staticClass:\"fas fa-eye\"})]),_c('span',{key:'tspan-'+tracker.uuid}),(tracker.name !== '' || tracker.value !== 0)?_c('div',{key:'remove-'+tracker.uuid,on:{\"click\":function($event){_vm.removeTracker(tracker.uuid)}}},[_c('i',{staticClass:\"fas fa-trash-alt\"})]):_vm._e()]}),_c('div',{staticClass:\"spanrow header\"},[_vm._v(\"Auras\")]),_vm._l((_vm.shape.auras),function(aura){return [_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(aura.name),expression:\"aura.name\"}],key:'name-'+aura.uuid,staticStyle:{\"grid-column-start\":\"name\"},attrs:{\"type\":\"text\",\"placeholder\":\"name\"},domProps:{\"value\":(aura.name)},on:{\"change\":function($event){_vm.updateShape(false)},\"input\":function($event){if($event.target.composing){ return; }_vm.$set(aura, \"name\", $event.target.value)}}}),_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(aura.value),expression:\"aura.value\",modifiers:{\"number\":true}}],key:'value-'+aura.uuid,attrs:{\"type\":\"text\",\"title\":\"Current value\"},domProps:{\"value\":(aura.value)},on:{\"change\":function($event){_vm.updateShape(true)},\"input\":function($event){if($event.target.composing){ return; }_vm.$set(aura, \"value\", _vm._n($event.target.value))},\"blur\":function($event){_vm.$forceUpdate()}}}),_c('span',{key:'fspan-'+aura.uuid},[_vm._v(\"/\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(aura.dim),expression:\"aura.dim\",modifiers:{\"number\":true}}],key:'dimvalue-'+aura.uuid,attrs:{\"type\":\"text\",\"title\":\"Dim value\"},domProps:{\"value\":(aura.dim)},on:{\"change\":function($event){_vm.updateShape(true)},\"input\":function($event){if($event.target.composing){ return; }_vm.$set(aura, \"dim\", _vm._n($event.target.value))},\"blur\":function($event){_vm.$forceUpdate()}}}),_c('color-picker',{key:'colour-'+aura.uuid,attrs:{\"color\":aura.colour},on:{\"update:color\":function($event){_vm.$set(aura, \"colour\", $event)},\"input\":function($event){_vm.updateAuraColour(aura, $event)},\"change\":function($event){_vm.updateShape(true)}}}),_c('div',{key:'visibility-'+aura.uuid,style:({opacity: aura.visible ? 1.0 : 0.3}),on:{\"click\":function($event){aura.visible = !aura.visible;_vm.updateShape(true)}}},[_c('i',{staticClass:\"fas fa-eye\"})]),_c('div',{key:'visionsource-'+aura.uuid,style:({opacity: aura.visionSource ? 1.0 : 0.3}),on:{\"click\":function($event){_vm.updateAuraVisionSource(aura)}}},[_c('i',{staticClass:\"fas fa-lightbulb\"})]),(aura.name !== '' || aura.value !== 0)?_c('div',{key:'remove-'+aura.uuid,on:{\"click\":function($event){_vm.removeAura(aura.uuid)}}},[_c('i',{staticClass:\"fas fa-trash-alt\"})]):_vm._e()]}),_c('div',{staticClass:\"spanrow header\"},[_vm._v(\"Annotation\")]),_c('textarea',{staticClass:\"spanrow\",domProps:{\"value\":_vm.shape.annotation},on:{\"change\":_vm.updateAnnotation}})],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"74f43d04-vue-loader-template\\\"}!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./edit_dialog.vue?vue&type=template&id=7c80ae3a&scoped=true&\"","import Vue from \"vue\";\nexport const EventBus = new Vue();\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--12-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./main.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--12-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./main.vue?vue&type=script&lang=ts&\"","import { GlobalPoint } from \"@/game/geom\";\nimport { BaseRect } from \"@/game/shapes/baserect\";\nimport { gameStore } from \"@/game/store\";\nimport { g2l } from \"@/game/units\";\nimport { getFogColour } from \"@/game/utils\";\n\nexport class Rect extends BaseRect {\n    type = \"rect\";\n    constructor(topleft: GlobalPoint, w: number, h: number, fillColour?: string, strokeColour?: string, uuid?: string) {\n        super(topleft, w, h, fillColour, strokeColour, uuid);\n    }\n    asDict() {\n        return super.getBaseDict();\n    }\n    draw(ctx: CanvasRenderingContext2D) {\n        super.draw(ctx);\n        if (this.fillColour === \"fog\") ctx.fillStyle = getFogColour();\n        else ctx.fillStyle = this.fillColour;\n        const z = gameStore.zoomFactor;\n        const loc = g2l(this.refPoint);\n        ctx.fillRect(loc.x, loc.y, this.w * z, this.h * z);\n        if (this.strokeColour !== \"rgba(0, 0, 0, 0)\") {\n            ctx.strokeStyle = this.strokeColour;\n            ctx.lineWidth = 5;\n            ctx.strokeRect(loc.x, loc.y, this.w * z, this.h * z);\n        }\n    }\n}\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./selectcontext.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./selectcontext.vue?vue&type=script&lang=ts&\"","import { Ray, Vector } from \"@/game/geom\";\nimport { Layer } from \"@/game/layers/layer\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { Settings } from \"@/game/settings\";\nimport { gameStore } from \"@/game/store\";\nimport { g2l, g2lr, g2lx, g2ly } from \"@/game/units\";\nimport { computeVisibility } from \"../visibility/te/te\";\n\nexport class FOWPlayersLayer extends Layer {\n    isVisionLayer: boolean = true;\n\n    draw(): void {\n        if (!this.valid) {\n            // console.time(\"VI\");\n            const ctx = this.ctx;\n\n            if (!gameStore.fowLOS || Settings.skipPlayerFOW) {\n                ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n                this.valid = true;\n                return;\n            }\n\n            ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n\n            const drctx = layerManager.getLayer(\"draw\")!.ctx;\n            drctx.clearRect(0, 0, window.innerWidth, window.innerHeight);\n\n            const originalOperation = ctx.globalCompositeOperation;\n\n            ctx.fillStyle = \"rgba(0, 0, 0, 1)\";\n\n            // For the DM this is done at the end of this function.  TODO: why the split up ???\n            // This was done in commit be1e65cff1e7369375fe11cfa1643fab1d11beab.\n            if (!gameStore.IS_DM) super.draw(!gameStore.fullFOW);\n\n            // Then cut out all the player vision auras\n            const maxLength = ctx.canvas.width + ctx.canvas.height;\n\n            for (const tokenId of gameStore.ownedtokens) {\n                const token = layerManager.UUIDMap.get(tokenId);\n                if (token === undefined) continue;\n                const center = token.center();\n                const lcenter = g2l(center);\n                if (gameStore.visionMode === \"bvh\") {\n                    ctx.beginPath();\n                    let lastArcAngle = -1;\n\n                    for (let angle = 0; angle < 2 * Math.PI; angle += (Settings.angleSteps / 2 / 180) * Math.PI) {\n                        const cos = Math.cos(angle);\n                        const sin = Math.sin(angle);\n                        // Check if there is a hit with one of the nearby light blockers.\n                        const lightRay = new Ray(center, new Vector(cos, sin));\n                        const hitResult = gameStore.BV.intersect(lightRay);\n\n                        // We can move on to the next angle if nothing was hit.\n                        if (!hitResult.hit) {\n                            // If an earlier hit caused the aura to leave the arc, we need to go back to the arc\n                            if (lastArcAngle === -1) {\n                                // Draw a line from the last non arc location back to the arc\n                                ctx.lineTo(lcenter.x + maxLength * cos, lcenter.y + maxLength * sin);\n                                // Set the start of a new arc beginning at the current angle\n                                lastArcAngle = angle;\n                            }\n                            continue;\n                        }\n                        // If hit , first finish any ongoing arc, then move to the intersection point\n                        if (lastArcAngle !== -1) {\n                            ctx.arc(lcenter.x, lcenter.y, maxLength, lastArcAngle, angle);\n                            lastArcAngle = -1;\n                        }\n                        ctx.lineTo(g2lx(hitResult.intersect.x), g2ly(hitResult.intersect.y));\n                    }\n\n                    // Finish the final arc.\n                    if (lastArcAngle !== -1) ctx.arc(lcenter.x, lcenter.y, maxLength, lastArcAngle, 2 * Math.PI);\n                    else ctx.closePath();\n                    ctx.fill();\n                } else {\n                    if (true) {\n                        // Add a gradient vision dropoff\n                        const gradient = ctx.createRadialGradient(\n                            lcenter.x,\n                            lcenter.y,\n                            g2lr(gameStore.visionRangeMin),\n                            lcenter.x,\n                            lcenter.y,\n                            g2lr(gameStore.visionRangeMax),\n                        );\n                        gradient.addColorStop(0, \"rgba(0, 0, 0, 1)\");\n                        gradient.addColorStop(1, \"rgba(0, 0, 0, 0)\");\n                        ctx.fillStyle = gradient;\n                    } else {\n                        ctx.fillStyle = \"rgba(0, 0, 0, 1)\";\n                    }\n                    try {\n                        const polygon = computeVisibility(token.center(), \"vision\");\n                        ctx.beginPath();\n                        ctx.moveTo(g2lx(polygon[0][0]), g2ly(polygon[0][1]));\n                        for (const point of polygon) ctx.lineTo(g2lx(point[0]), g2ly(point[1]));\n                        ctx.closePath();\n                        ctx.fill();\n                    } catch {}\n                }\n            }\n\n            // For the players this is done at the beginning of this function.  TODO: why the split up ???\n            // This was done in commit be1e65cff1e7369375fe11cfa1643fab1d11beab.\n            if (gameStore.IS_DM) super.draw(!gameStore.fullFOW);\n\n            ctx.globalCompositeOperation = originalOperation;\n            // console.timeEnd(\"VI\");\n        }\n    }\n}\n","import { socket } from \"@/game/api/socket\";\nimport { ServerShape } from \"@/game/comm/types/shapes\";\nimport { EventBus } from \"@/game/event-bus\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { Shape } from \"@/game/shapes/shape\";\nimport { createShapeFromDict } from \"@/game/shapes/utils\";\nimport { gameStore } from \"@/game/store\";\nimport { g2lx, g2ly } from \"@/game/units\";\n\nexport class Layer {\n    name: string;\n    width: number;\n    height: number;\n    canvas: HTMLCanvasElement;\n    ctx: CanvasRenderingContext2D;\n\n    selectable: boolean = false;\n    playerEditable: boolean = false;\n    isVisionLayer: boolean = false;\n\n    // When set to false, the layer will be redrawn on the next tick\n    valid: boolean = false;\n    // The collection of shapes that this layer contains.\n    // These are ordered on a depth basis.\n    shapes: Shape[] = [];\n\n    // Collection of shapes that are currently selected\n    selection: Shape[] = [];\n\n    // Extra selection highlighting settings\n    selectionColor = \"#CC0000\";\n    selectionWidth = 2;\n\n    constructor(canvas: HTMLCanvasElement, name: string) {\n        this.canvas = canvas;\n        this.name = name;\n        this.width = canvas.width;\n        this.height = canvas.height;\n        this.ctx = canvas.getContext(\"2d\")!;\n    }\n\n    invalidate(skipLightUpdate: boolean): void {\n        this.valid = false;\n        if (!skipLightUpdate) {\n            layerManager.invalidateLight();\n        }\n    }\n\n    addShape(shape: Shape, sync: boolean, temporary?: boolean, invalidate = true): void {\n        if (temporary === undefined) temporary = false;\n        shape.layer = this.name;\n        this.shapes.push(shape);\n        layerManager.UUIDMap.set(shape.uuid, shape);\n        shape.checkVisionSources(invalidate);\n        shape.setMovementBlock(shape.movementObstruction, invalidate);\n        if (shape.ownedBy(gameStore.username) && shape.isToken) gameStore.ownedtokens.push(shape.uuid);\n        if (shape.annotation.length) gameStore.annotations.push(shape.uuid);\n        if (sync) socket.emit(\"Shape.Add\", { shape: shape.asDict(), temporary });\n        if (invalidate) this.invalidate(!sync);\n    }\n\n    setShapes(shapes: ServerShape[]): void {\n        for (const serverShape of shapes) {\n            const shape = createShapeFromDict(serverShape);\n            if (shape === undefined) {\n                console.log(`Shape with unknown type ${serverShape.type_} could not be added`);\n                return;\n            }\n            this.addShape(shape, false, false, false);\n        }\n        this.clearSelection(); // TODO: Fix keeping selection on those items that are not moved.\n        this.invalidate(false);\n    }\n\n    removeShape(shape: Shape, sync: boolean, temporary?: boolean) {\n        if (temporary === undefined) temporary = false;\n        this.shapes.splice(this.shapes.indexOf(shape), 1);\n\n        if (sync) socket.emit(\"Shape.Remove\", { shape, temporary });\n        const lsI = gameStore.visionSources.findIndex(ls => ls.shape === shape.uuid);\n        const lbI = gameStore.visionBlockers.findIndex(ls => ls === shape.uuid);\n\n        const mbI = gameStore.movementblockers.findIndex(ls => ls === shape.uuid);\n        const anI = gameStore.annotations.findIndex(ls => ls === shape.uuid);\n        if (lsI >= 0) gameStore.visionSources.splice(lsI, 1);\n        if (lbI >= 0) gameStore.visionBlockers.splice(lbI, 1);\n        if (mbI >= 0) gameStore.movementblockers.splice(mbI, 1);\n        if (anI >= 0) gameStore.annotations.splice(anI, 1);\n\n        const annotationIndex = gameStore.annotations.indexOf(shape.uuid);\n        if (annotationIndex >= 0) gameStore.annotations.splice(annotationIndex, 1);\n\n        const ownedIndex = gameStore.ownedtokens.indexOf(shape.uuid);\n        if (ownedIndex >= 0) gameStore.ownedtokens.splice(ownedIndex, 1);\n\n        layerManager.UUIDMap.delete(shape.uuid);\n\n        const index = this.selection.indexOf(shape);\n        if (index >= 0) this.selection.splice(index, 1);\n        if (lbI >= 0) gameStore.recalculateVision();\n        if (mbI >= 0) gameStore.recalculateMovement();\n        this.invalidate(!sync);\n    }\n\n    clear(): void {\n        this.ctx.clearRect(0, 0, this.width, this.height);\n    }\n\n    clearSelection(): void {\n        this.selection = [];\n        EventBus.$emit(\"SelectionInfo.Shape.Set\", null);\n    }\n\n    draw(doClear?: boolean): void {\n        if (!this.valid) {\n            const ctx = this.ctx;\n            const ogOP = ctx.globalCompositeOperation;\n            doClear = doClear === undefined ? true : doClear;\n\n            if (doClear) this.clear();\n\n            const state = this;\n\n            // We iteratre twice over all shapes\n            // First to draw the auras and a second time to draw the shapes themselves\n            // Otherwise auras from one shape could be overlapping another shape itself.\n\n            this.shapes.forEach(shape => {\n                if (shape.options.has(\"skipDraw\") && shape.options.get(\"skipDraw\")) return;\n                if (layerManager.getLayer() === undefined) return;\n                if (!shape.visibleInCanvas(state.canvas)) return;\n                if (state.name === \"fow\" && shape.visionObstruction && layerManager.getLayer()!.name !== state.name)\n                    return;\n                shape.drawAuras(ctx);\n            });\n            this.shapes.forEach(shape => {\n                if (shape.options.has(\"skipDraw\") && shape.options.get(\"skipDraw\")) return;\n                if (layerManager.getLayer() === undefined) return;\n                if (!shape.visibleInCanvas(state.canvas)) return;\n                if (state.name === \"fow\" && shape.visionObstruction && layerManager.getLayer()!.name !== state.name)\n                    return;\n                shape.draw(ctx);\n            });\n\n            if (this.selection != null) {\n                ctx.fillStyle = this.selectionColor;\n                ctx.strokeStyle = this.selectionColor;\n                ctx.lineWidth = this.selectionWidth;\n                const z = gameStore.zoomFactor;\n                this.selection.forEach(sel => {\n                    ctx.globalCompositeOperation = sel.globalCompositeOperation;\n                    const bb = sel.getBoundingBox();\n                    // TODO: REFACTOR THIS TO Shape.drawSelection(ctx);\n                    ctx.strokeRect(g2lx(bb.topLeft.x), g2ly(bb.topLeft.y), bb.w * z, bb.h * z);\n\n                    for (const p of sel.points) {\n                        ctx.beginPath();\n                        ctx.arc(g2lx(p[0]), g2ly(p[1]), 3, 0, 2 * Math.PI);\n                        ctx.fill();\n                    }\n                    ctx.beginPath();\n                    ctx.moveTo(g2lx(sel.points[0][0]), g2ly(sel.points[0][1]));\n                    for (let i = 1; i <= sel.points.length; i++) {\n                        const vertex = sel.points[i % sel.points.length];\n                        ctx.lineTo(g2lx(vertex[0]), g2ly(vertex[1]));\n                    }\n                    ctx.stroke();\n                });\n            }\n            ctx.globalCompositeOperation = ogOP;\n            this.valid = true;\n        }\n    }\n\n    moveShapeOrder(shape: Shape, destinationIndex: number, sync: boolean): void {\n        const oldIdx = this.shapes.indexOf(shape);\n        if (oldIdx === destinationIndex) return;\n        this.shapes.splice(oldIdx, 1);\n        this.shapes.splice(destinationIndex, 0, shape);\n        if (sync) socket.emit(\"Shape.Order.Set\", { shape: shape.asDict(), index: destinationIndex });\n        this.invalidate(true);\n    }\n}\n","import { gameStore } from \"@/game/store\";\nimport { l2g } from \"@/game/units\";\nimport { getMouse } from \"@/game/utils\";\n\nexport function scrollZoom(e: WheelEvent) {\n    if (!e.target || !(<HTMLElement>e.target).tagName || (<HTMLElement>e.target).tagName !== \"CANVAS\") return;\n    let delta: number;\n    delta = Math.sign(e.deltaY) * -1;\n    gameStore.updateZoom({ newZoomValue: gameStore.zoomFactor + 0.1 * delta, zoomLocation: l2g(getMouse(e)) });\n}\n","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./asset_node.vue?vue&type=style&index=0&id=62c91cd3&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./asset_node.vue?vue&type=style&index=0&id=62c91cd3&scoped=true&lang=css&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./menu.vue?vue&type=style&index=0&id=aaf3f05e&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./menu.vue?vue&type=style&index=0&id=aaf3f05e&scoped=true&lang=css&\"","import { GlobalPoint, LocalPoint, Vector } from \"@/game/geom\";\nimport { BoundingRect } from \"@/game/shapes/boundingrect\";\nimport { Shape } from \"@/game/shapes/shape\";\nimport { gameStore } from \"@/game/store\";\nimport { calculateDelta } from \"@/game/ui/tools/utils\";\nimport { g2lx, g2ly, l2g, l2gx, l2gy } from \"@/game/units\";\n\nexport abstract class BaseRect extends Shape {\n    w: number;\n    h: number;\n    constructor(topleft: GlobalPoint, w: number, h: number, fillColour?: string, strokeColour?: string, uuid?: string) {\n        super(topleft, fillColour, strokeColour, uuid);\n        this.w = w;\n        this.h = h;\n    }\n    getBaseDict() {\n        return Object.assign(super.getBaseDict(), {\n            width: this.w,\n            height: this.h,\n        });\n    }\n    getBoundingBox() {\n        return new BoundingRect(this.refPoint, this.w, this.h);\n    }\n\n    get points() {\n        if (this.w === 0 || this.h === 0) return [[this.refPoint.x, this.refPoint.y]];\n        // note to self: topright and botleft are swapped because I'm retarded.\n        const topright = this.refPoint.add(new Vector(0, this.h));\n        const botright = this.refPoint.add(new Vector(this.w, this.h));\n        const botleft = this.refPoint.add(new Vector(this.w, 0));\n        return [\n            [this.refPoint.x, this.refPoint.y],\n            [topright.x, topright.y],\n            [botright.x, botright.y],\n            [botleft.x, botleft.y],\n        ];\n    }\n\n    contains(point: GlobalPoint): boolean {\n        return (\n            this.refPoint.x <= point.x &&\n            this.refPoint.x + this.w >= point.x &&\n            this.refPoint.y <= point.y &&\n            this.refPoint.y + this.h >= point.y\n        );\n    }\n    center(): GlobalPoint;\n    center(centerPoint: GlobalPoint): void;\n    center(centerPoint?: GlobalPoint): GlobalPoint | void {\n        if (centerPoint === undefined) return this.refPoint.add(new Vector(this.w / 2, this.h / 2));\n        this.refPoint = new GlobalPoint(centerPoint.x - this.w / 2, centerPoint.y - this.h / 2);\n    }\n\n    visibleInCanvas(canvas: HTMLCanvasElement): boolean {\n        if (super.visibleInCanvas(canvas)) return true;\n        const coreVisible = !(\n            g2lx(this.refPoint.x) > canvas.width ||\n            g2ly(this.refPoint.y) > canvas.height ||\n            g2lx(this.refPoint.x + this.w) < 0 ||\n            g2ly(this.refPoint.y + this.h) < 0\n        );\n        if (coreVisible) return true;\n        return false;\n    }\n    snapToGrid() {\n        const gs = gameStore.gridSize;\n        const center = this.center();\n        const mx = center.x;\n        const my = center.y;\n\n        let targetX;\n        let targetY;\n\n        if ((this.w / gs) % 2 === 0) {\n            targetX = Math.round(mx / gs) * gs - this.w / 2;\n        } else {\n            targetX = (Math.round((mx + gs / 2) / gs) - 1 / 2) * gs - this.w / 2;\n        }\n        if ((this.h / gs) % 2 === 0) {\n            targetY = Math.round(my / gs) * gs - this.h / 2;\n        } else {\n            targetY = (Math.round((my + gs / 2) / gs) - 1 / 2) * gs - this.h / 2;\n        }\n\n        const delta = calculateDelta(new Vector(targetX - this.refPoint.x, targetY - this.refPoint.y), this);\n        this.refPoint = this.refPoint.add(delta);\n\n        this.invalidate(false);\n    }\n    resizeToGrid() {\n        const gs = gameStore.gridSize;\n        this.refPoint = new GlobalPoint(Math.round(this.refPoint.x / gs) * gs, Math.round(this.refPoint.y / gs) * gs);\n        this.w = Math.max(Math.round(this.w / gs) * gs, gs);\n        this.h = Math.max(Math.round(this.h / gs) * gs, gs);\n        this.invalidate(false);\n    }\n    resize(resizePoint: number, point: LocalPoint) {\n        const z = gameStore.zoomFactor;\n        switch (resizePoint) {\n            case 0: {\n                this.w = g2lx(this.refPoint.x) + this.w * z - point.x;\n                this.h = g2ly(this.refPoint.y) + this.h * z - point.y;\n                this.refPoint = l2g(point);\n                break;\n            }\n            case 1: {\n                this.w = g2lx(this.refPoint.x) + this.w * z - point.x;\n                this.h = point.y - g2ly(this.refPoint.y);\n                this.refPoint = new GlobalPoint(l2gx(point.x), this.refPoint.y);\n                break;\n            }\n            case 2: {\n                this.w = point.x - g2lx(this.refPoint.x);\n                this.h = point.y - g2ly(this.refPoint.y);\n                break;\n            }\n            case 3: {\n                this.w = point.x - g2lx(this.refPoint.x);\n                this.h = g2ly(this.refPoint.y) + this.h * z - point.y;\n                this.refPoint = new GlobalPoint(this.refPoint.x, l2gy(point.y));\n                break;\n            }\n        }\n\n        this.w /= z;\n        this.h /= z;\n\n        if (this.w < 0) {\n            this.refPoint = this.refPoint.add(new Vector(this.w, 0));\n            this.w = Math.abs(this.w);\n        }\n        if (this.h < 0) {\n            this.refPoint = this.refPoint.add(new Vector(0, this.h));\n            this.h = Math.abs(this.h);\n        }\n    }\n}\n","import { render, staticRenderFns } from \"./select.vue?vue&type=template&id=cad11dd2&\"\nimport script from \"./select.vue?vue&type=script&lang=ts&\"\nexport * from \"./select.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"select.vue\"\nexport default component.exports","import { render, staticRenderFns } from \"./main.vue?vue&type=template&id=61eb1455&scoped=true&\"\nimport script from \"./main.vue?vue&type=script&lang=ts&\"\nexport * from \"./main.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./main.vue?vue&type=style&index=0&id=61eb1455&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"61eb1455\",\n  null\n  \n)\n\ncomponent.options.__file = \"main.vue\"\nexport default component.exports","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./createtoken_modal.vue?vue&type=style&index=0&id=73816298&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./createtoken_modal.vue?vue&type=style&index=0&id=73816298&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"AssetManager\"}},[_c('div',{attrs:{\"id\":\"titlebar\"}},[_vm._v(\"Asset Manager\")]),_c('div',{attrs:{\"id\":\"main\"}},[_c('div',{attrs:{\"id\":\"assets\"},on:{\"dragover\":function($event){$event.preventDefault();return _vm.moveDrag($event)},\"drop\":function($event){$event.preventDefault();$event.stopPropagation();_vm.stopDrag($event, _vm.currentFolder)}}},[_c('div',{attrs:{\"id\":\"breadcrumbs\"}},[_c('div',[_vm._v(\"/\")]),_vm._l((_vm.path),function(dir){return _c('div',{key:dir},[_vm._v(_vm._s(_vm.idMap.get(dir).name))])})],2),_c('div',{attrs:{\"id\":\"actionbar\"}},[_c('input',{attrs:{\"id\":\"files\",\"type\":\"file\",\"multiple\":\"\",\"hidden\":\"\"},on:{\"change\":function($event){_vm.upload()}}}),_c('div',{attrs:{\"title\":\"Create folder\"},on:{\"click\":_vm.createDirectory}},[_c('i',{staticClass:\"fas fa-plus-square\"})]),_c('div',{attrs:{\"title\":\"Upload files\"},on:{\"click\":_vm.prepareUpload}},[_c('i',{staticClass:\"fas fa-upload\"})])]),_c('div',{attrs:{\"id\":\"explorer\"}},[(_vm.path.length)?_c('div',{staticClass:\"inode folder\",on:{\"dblclick\":function($event){_vm.changeDirectory(-1)},\"dragover\":function($event){$event.preventDefault();return _vm.moveDrag($event)},\"dragleave\":function($event){$event.preventDefault();return _vm.leaveDrag($event)},\"drop\":function($event){$event.preventDefault();$event.stopPropagation();_vm.stopDrag($event, _vm.parentFolder)}}},[_c('i',{staticClass:\"fas fa-folder\",staticStyle:{\"font-size\":\"50px\"}}),_c('div',{staticClass:\"title\"},[_vm._v(\"..\")])]):_vm._e(),_vm._l((_vm.folders),function(key){return _c('div',{key:key,staticClass:\"inode folder\",class:{'inode-selected': _vm.selected.includes(key)},attrs:{\"draggable\":\"true\"},on:{\"click\":function($event){_vm.select($event, key)},\"dblclick\":function($event){_vm.changeDirectory(key)},\"contextmenu\":function($event){$event.preventDefault();_vm.$refs.cm.open($event, key)},\"dragstart\":function($event){_vm.startDrag($event, key)},\"dragover\":function($event){$event.preventDefault();return _vm.moveDrag($event)},\"dragleave\":function($event){$event.preventDefault();return _vm.leaveDrag($event)},\"drop\":function($event){$event.preventDefault();$event.stopPropagation();_vm.stopDrag($event, key)}}},[_c('i',{staticClass:\"fas fa-folder\",staticStyle:{\"font-size\":\"50px\"}}),_c('div',{staticClass:\"title\"},[_vm._v(_vm._s(_vm.idMap.get(key).name))])])}),_vm._l((_vm.files),function(file){return _c('div',{key:file,staticClass:\"inode file\",class:{'inode-selected': _vm.selected.includes(file)},attrs:{\"draggable\":\"true\"},on:{\"click\":function($event){_vm.select($event, file)},\"contextmenu\":function($event){$event.preventDefault();_vm.$refs.cm.open($event, file)},\"dragstart\":function($event){_vm.startDrag($event, file)}}},[_c('img',{attrs:{\"src\":'/static/assets/' + _vm.idMap.get(file).file_hash,\"width\":\"50\"}}),_c('div',{staticClass:\"title\"},[_vm._v(_vm._s(_vm.idMap.get(file).name))])])})],2)]),(_vm.firstSelectedFile)?_c('div',{attrs:{\"id\":\"asset-details\"}},[_c('div',{attrs:{\"id\":\"asset-detail-title\"}},[_vm._v(_vm._s(_vm.firstSelectedFile.name))]),_c('img',{attrs:{\"src\":'/static/assets/' + _vm.firstSelectedFile.file_hash}})]):_vm._e()]),_c('AssetContextMenu',{ref:\"cm\"}),_c('Prompt',{ref:\"prompt\"}),_c('ConfirmDialog',{ref:\"confirm\"})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"74f43d04-vue-loader-template\\\"}!../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./manager.vue?vue&type=template&id=5b0def98&\"","\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\n\nimport ContextMenu from \"@/core/components/contextmenu.vue\";\n\nimport { socket } from \"@/game/api/socket\";\nimport { EventBus } from \"@/game/event-bus\";\nimport { gameStore } from \"@/game/store\";\nimport { l2gx, l2gy } from \"@/game/units\";\n\n@Component({\n    components: {\n        ContextMenu,\n    },\n})\nexport default class SelectContext extends Vue {\n    visible = false;\n    x = 0;\n    y = 0;\n\n    get IS_DM(): boolean {\n        return gameStore.IS_DM;\n    }\n\n    open(event: MouseEvent) {\n        this.visible = true;\n        this.x = event.pageX;\n        this.y = event.pageY;\n        this.$nextTick(() => this.$children[0].$el.focus());\n    }\n    close() {\n        this.visible = false;\n    }\n    bringPlayers() {\n        if (!gameStore.IS_DM) return;\n        socket.emit(\"Players.Bring\", { x: l2gx(this.x), y: l2gy(this.y) });\n        this.close();\n    }\n    createToken() {\n        (<any>this.$parent.$parent.$refs.createtokendialog).open(this.x, this.y);\n        this.close();\n    }\n    showInitiative() {\n        EventBus.$emit(\"Initiative.Show\");\n        this.close();\n    }\n}\n","import Axios from \"axios\";\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\nimport { Route } from \"vue-router\";\n\nimport { coreStore } from \"@/core/store\";\n\nComponent.registerHooks([\"beforeRouteEnter\"]);\n\n@Component({})\nexport default class Logout extends Vue {\n    beforeRouteEnter(to: Route, from: Route, next: ({}) => {}) {\n        Axios.post(\"/api/logout\").then(() => {\n            coreStore.setAuthenticated(false);\n            coreStore.setUsername(\"\");\n            next({ path: \"/auth/login\" });\n        });\n    }\n}\n","import { getModule, Module, Mutation, VuexModule } from \"vuex-module-decorators\";\n\nimport { rootStore } from \"@/store\";\n\nexport interface CoreState {\n    authenticated: boolean;\n    initialized: boolean;\n    username: string;\n}\n\n@Module({ dynamic: true, store: rootStore, name: \"core\" })\nclass CoreStore extends VuexModule implements CoreState {\n    authenticated = false;\n    initialized = false;\n    username = \"\";\n\n    @Mutation\n    setAuthenticated(auth: boolean) {\n        this.authenticated = auth;\n    }\n\n    @Mutation\n    setInitialized(init: boolean) {\n        this.initialized = init;\n    }\n\n    @Mutation\n    setUsername(username: string) {\n        this.username = username;\n    }\n}\n\nexport const coreStore = getModule(CoreStore);\n","import Vue from \"vue\";\n\nimport App from \"@/App.vue\";\nimport { router } from \"@/router\";\nimport { rootStore } from \"@/store\";\n\nVue.config.productionTip = false;\nVue.config.devtools = true;\nVue.config.performance = true;\n\nexport const app = new Vue({\n    router,\n    store: rootStore,\n    render: h => h(App),\n}).$mount(\"#app\");\n\n(<any>window).app = app;\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\n\n@Component({\n    props: [\"visible\", \"left\", \"top\"],\n})\nexport default class ContextMenu extends Vue {}\n","import Axios, { AxiosError, AxiosResponse } from \"axios\";\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\nimport { Route } from \"vue-router\";\n\n@Component({ template: \"\" })\nexport default class Initiative extends Vue {\n    beforeRouteEnter(to: Route, from: Route, next: ({}) => {}) {\n        Axios.post(\"/api/invite\", {\n            code: to.params.code,\n        })\n            .then((response: AxiosResponse) => {\n                next({ path: response.data.sessionUrl });\n            })\n            .catch((error: AxiosError) => {\n                console.error(\"Invitation code could not be redeemed\");\n                next({ path: \"/dashboard\" });\n            });\n    }\n}\n","import { render, staticRenderFns } from \"./prompt.vue?vue&type=template&id=0602c2e6&scoped=true&\"\nimport script from \"./prompt.vue?vue&type=script&lang=ts&\"\nexport * from \"./prompt.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./prompt.vue?vue&type=style&index=0&id=0602c2e6&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0602c2e6\",\n  null\n  \n)\n\ncomponent.options.__file = \"prompt.vue\"\nexport default component.exports","import { GlobalPoint } from \"@/game/geom\";\nimport { gameStore } from \"@/game/store\";\n\nimport { Edge } from \"./cdt\";\nimport { drawPolygon } from \"./draw\";\nimport { PA_CDT } from \"./pa\";\nimport { Point, Sign, Triangle } from \"./tds\";\nimport { ccw, cw, orientation } from \"./triag\";\n\nexport function computeVisibility(q: GlobalPoint, target: \"vision\" | \"movement\", drawt?: boolean): number[][] {\n    if (drawt === undefined) drawt = gameStore.drawTEContour;\n    // console.time(\"CV\");\n    const Q: Point = [q.x, q.y];\n    const rawOutput: number[][] = [];\n    const triangle = PA_CDT[target].locate(Q, null).loc;\n    if (triangle === null) {\n        console.error(\"Triangle not found\");\n        return [];\n    }\n    // triangle.fill();\n    rawOutput.push(triangle.vertices[1]!.point!);\n    if (!triangle.isConstrained(0))\n        expandEdge(Q, triangle.vertices[2]!.point!, triangle.vertices[1]!.point!, triangle, 0, rawOutput);\n    rawOutput.push(triangle.vertices[2]!.point!);\n    if (!triangle.isConstrained(1))\n        expandEdge(Q, triangle.vertices[0]!.point!, triangle.vertices[2]!.point!, triangle, 1, rawOutput);\n    rawOutput.push(triangle.vertices[0]!.point!);\n    if (!triangle.isConstrained(2))\n        expandEdge(Q, triangle.vertices[1]!.point!, triangle.vertices[0]!.point!, triangle, 2, rawOutput);\n    // console.timeEnd(\"CV\");\n\n    if (drawt) drawPolygon(rawOutput, \"red\");\n\n    return rawOutput;\n}\n\nfunction expandEdge(\n    q: Point,\n    left: number[],\n    right: number[],\n    fh: Triangle,\n    index: number,\n    rawOutput: number[][],\n): void {\n    // fh.edge(index).draw();\n    const nfh = fh.neighbours[index]!;\n    // nfh.fill(\"rgba(255, 0, 0, 0.25)\");\n    const nIndex = nfh.indexT(fh);\n    const rIndex = ccw(nIndex);\n    const lIndex = cw(nIndex);\n    const nvh = nfh.vertices[nIndex]!;\n    const rvh = nfh.vertices[lIndex]!;\n    const lvh = nfh.vertices[rIndex]!;\n\n    const re: Edge = [nfh, rIndex];\n    const le: Edge = [nfh, lIndex];\n\n    const ro = orientation(q, right, nvh.point!);\n    const lo = orientation(q, left, nvh.point!);\n\n    // const ctx = layerManager.getLayer(\"draw\")!.ctx;\n    // ctx.beginPath();\n    // ctx.strokeStyle = \"red\";\n    // ctx.lineJoin = \"round\";\n    // ctx.moveTo(g2lx(q.x), g2ly(q.y));\n    // ctx.lineTo(g2lx(left[0]), g2ly(left[1]));\n    // ctx.moveTo(g2lx(q.x), g2ly(q.y));\n    // ctx.lineTo(g2lx(nvh[0]), g2ly(nvh[1]));\n    // ctx.strokeStyle = \"blue\";\n    // ctx.moveTo(g2lx(q.x), g2ly(q.y));\n    // ctx.lineTo(g2lx(right[0]), g2ly(right[1]));\n    // ctx.moveTo(g2lx(q.x), g2ly(q.y));\n    // ctx.lineTo(g2lx(nvh[0]), g2ly(nvh[1]));\n    // ctx.closePath();\n    // ctx.stroke();\n\n    // Right edge is seen if the new vertex is ccw of the right ray\n    if (ro === Sign.COUNTERCLOCKWISE) {\n        if (re[0].isConstrained(re[1])) {\n            // See if current right ray is rvh\n            if (right !== rvh.point!) rawOutput.push(raySegIntersection(q, right, nvh.point!, rvh.point!));\n            if (lo === Sign.COUNTERCLOCKWISE) rawOutput.push(raySegIntersection(q, left, nvh.point!, rvh.point!));\n        } else {\n            if (lo === Sign.COUNTERCLOCKWISE) return expandEdge(q, left, right, nfh, rIndex, rawOutput);\n            else expandEdge(q, nvh.point!, right, nfh, rIndex, rawOutput);\n        }\n    }\n\n    if (ro !== Sign.CLOCKWISE && lo !== Sign.COUNTERCLOCKWISE) {\n        rawOutput.push(nvh.point!);\n    }\n\n    if (lo === Sign.CLOCKWISE) {\n        if (le[0].isConstrained(le[1])) {\n            if (ro === Sign.CLOCKWISE) {\n                rawOutput.push(raySegIntersection(q, right, nvh.point!, lvh.point!));\n            }\n            if (left !== lvh.point!) {\n                rawOutput.push(raySegIntersection(q, left, nvh.point!, lvh.point!));\n            }\n            return;\n        } else {\n            if (ro === Sign.CLOCKWISE) {\n                return expandEdge(q, left, right, nfh, lIndex, rawOutput);\n            } else {\n                return expandEdge(q, left, nvh.point!, nfh, lIndex, rawOutput);\n            }\n        }\n    }\n}\n\nfunction raySegIntersection(q: Point, b: Point, s: Point, t: Point) {\n    const denominator = (t[1] - s[1]) * (b[0] - q[0]) - (t[0] - s[0]) * (b[1] - q[1]);\n    const ua = ((t[0] - s[0]) * (q[1] - s[1]) - (t[1] - s[1]) * (q[0] - s[0])) / denominator;\n    // const ub = ((b[0] - q.x) * (q.y - s[1]) - (b[1] - q.y) * (q.x - s[0])) / denominator;\n    const x = q[0] + ua * (b[0] - q[0]);\n    const y = q[1] + ua * (b[1] - q[1]);\n\n    return [x, y];\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.selected)?_c('div',{staticClass:\"tool-detail\",style:({'--detailRight': _vm.detailRight, '--detailArrow': _vm.detailArrow})},[_c('div',[_vm._v(\"#X\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.xCount),expression:\"xCount\"}],attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.xCount)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.xCount=$event.target.value}}}),_c('div',[_vm._v(\"#Y\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.yCount),expression:\"yCount\"}],attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.yCount)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.yCount=$event.target.value}}})]):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"74f43d04-vue-loader-template\\\"}!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./map.vue?vue&type=template&id=2104f147&\"","import { render, staticRenderFns } from \"./edit_dialog.vue?vue&type=template&id=7c80ae3a&scoped=true&\"\nimport script from \"./edit_dialog.vue?vue&type=script&lang=ts&\"\nexport * from \"./edit_dialog.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./edit_dialog.vue?vue&type=style&index=0&id=7c80ae3a&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7c80ae3a\",\n  null\n  \n)\n\ncomponent.options.__file = \"edit_dialog.vue\"\nexport default component.exports","export class Settings {\n    static angleSteps = 4;\n    static drawAngleLines = false;\n    static drawFirstLightHit = false;\n    static skipPlayerFOW = false;\n    static skipLightFOW = false;\n\n    static tempFill: string = \"fog\";\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport axios, { AxiosError, AxiosResponse } from \"axios\";\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\n\nimport { coreStore } from \"@/core/store\";\n\n@Component\nexport default class Login extends Vue {\n    username = \"\";\n    password = \"\";\n    error = \"\";\n\n    login() {\n        axios\n            .post(\"/api/login\", {\n                username: this.username,\n                password: this.password,\n            })\n            .then((response: AxiosResponse) => {\n                coreStore.setUsername(this.username);\n                coreStore.setAuthenticated(true);\n                this.$router.push(<string>this.$route.query.redirect || \"/\");\n            })\n            .catch((error: AxiosError) => {\n                if (error.response) this.error = error.response.statusText;\n                else this.error = \"Unknown error occured\";\n            });\n    }\n\n    register() {\n        axios\n            .post(\"/api/register\", {\n                username: this.username,\n                password: this.password,\n            })\n            .then((response: AxiosResponse) => {\n                coreStore.setUsername(this.username);\n                coreStore.setAuthenticated(true);\n                this.$router.push(<string>this.$route.query.redirect || \"/\");\n            })\n            .catch((error: AxiosError) => {\n                if (error.response) this.error = error.response.statusText;\n                else this.error = \"Unknown error occured\";\n            });\n    }\n\n    focusin(event: { target?: { nextElementSibling?: HTMLElement } }) {\n        if (event.target && event.target.nextElementSibling) {\n            const span = event.target.nextElementSibling;\n            span.style.opacity = \"0\";\n        }\n    }\n\n    focusout(event: { target?: { nextElementSibling?: HTMLElement } }) {\n        if (event.target && event.target.nextElementSibling) {\n            const span = event.target.nextElementSibling;\n            span.style.opacity = \"1\";\n        }\n    }\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('modal',{attrs:{\"visible\":_vm.visible},on:{\"close\":function($event){_vm.visible = false}},scopedSlots:_vm._u([{key:\"header\",fn:function(m){return _c('div',{staticClass:\"modal-header\",attrs:{\"draggable\":\"true\"},on:{\"dragstart\":m.dragStart,\"dragend\":m.dragEnd}},[_vm._v(\"Create basic token\")])}}])},[_c('div',{staticClass:\"modal-body\"},[_c('label',{attrs:{\"for\":\"createtokendialog-text\"}},[_vm._v(\"Text\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.text),expression:\"text\"}],attrs:{\"type\":\"text\",\"id\":\"createtokendialog-name\"},domProps:{\"value\":(_vm.text)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.text=$event.target.value}}}),_c('label',[_vm._v(\"Colours\")]),_c('div',{staticClass:\"colours\"},[_c('span',[_vm._v(\"Fill:\")]),_c('color-picker',{attrs:{\"color\":_vm.fillColour},on:{\"update:color\":function($event){_vm.fillColour=$event}}}),_c('span',[_vm._v(\"Border:\")]),_c('color-picker',{attrs:{\"color\":_vm.borderColour},on:{\"update:color\":function($event){_vm.borderColour=$event}}})],1),_c('canvas',{ref:\"canvas\",attrs:{\"width\":\"100px\",\"height\":\"100px\"}})]),_c('div',{staticClass:\"modal-footer\"},[_c('button',{on:{\"click\":_vm.submit}},[_vm._v(\"Submit\")])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"74f43d04-vue-loader-template\\\"}!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./createtoken_modal.vue?vue&type=template&id=73816298&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c(\"div\")}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"74f43d04-vue-loader-template\\\"}!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tool.vue?vue&type=template&id=1e034b42&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('transition',{attrs:{\"name\":\"modal\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.visible),expression:\"visible\"}],staticClass:\"mask\",class:{'modal-mask': _vm.mask, 'dialog-mask': !_vm.mask},on:{\"click\":_vm.close,\"dragover\":function($event){$event.preventDefault();return _vm.dragOver($event)}}},[_c('div',{ref:\"container\",staticClass:\"modal-container\",on:{\"click\":function($event){$event.stopPropagation();}}},[_vm._t(\"header\",null,{dragStart:_vm.dragStart,dragEnd:_vm.dragEnd}),_vm._t(\"default\")],2)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"74f43d04-vue-loader-template\\\"}!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./modal.vue?vue&type=template&id=12ed61ba&scoped=true&\"","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--12-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./game.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--12-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./game.vue?vue&type=script&lang=ts&\"","import Component from \"vue-class-component\";\n\nimport Tool from \"@/game/ui/tools/tool.vue\";\n\nimport { socket } from \"@/game/api/socket\";\nimport { GlobalPoint } from \"@/game/geom\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { Line } from \"@/game/shapes/line\";\nimport { Text } from \"@/game/shapes/text\";\nimport { gameStore } from \"@/game/store\";\nimport { l2g } from \"@/game/units\";\nimport { getMouse } from \"@/game/utils\";\n\n@Component\nexport class RulerTool extends Tool {\n    name = \"Ruler\";\n    active = false;\n    startPoint: GlobalPoint | null = null;\n    ruler: Line | null = null;\n    text: Text | null = null;\n    onMouseDown(event: MouseEvent) {\n        const layer = layerManager.getLayer(\"draw\");\n        if (layer === undefined) {\n            console.log(\"No draw layer!\");\n            return;\n        }\n        this.active = true;\n        this.startPoint = l2g(getMouse(event));\n        this.ruler = new Line(this.startPoint, this.startPoint, 3, gameStore.rulerColour);\n        this.text = new Text(this.startPoint.clone(), \"\", \"bold 20px serif\");\n        this.ruler.addOwner(gameStore.username);\n        this.text.addOwner(gameStore.username);\n        layer.addShape(this.ruler, true, true);\n        layer.addShape(this.text, true, true);\n    }\n    onMouseMove(event: MouseEvent) {\n        if (!this.active || this.ruler === null || this.startPoint === null || this.text === null) return;\n\n        const layer = layerManager.getLayer(\"draw\");\n        if (layer === undefined) {\n            console.log(\"No draw layer!\");\n            return;\n        }\n        const endPoint = l2g(getMouse(event));\n\n        this.ruler.endPoint = endPoint;\n        socket.emit(\"Shape.Update\", { shape: this.ruler!.asDict(), redraw: true, temporary: true });\n\n        const diffsign = Math.sign(endPoint.x - this.startPoint.x) * Math.sign(endPoint.y - this.startPoint.y);\n        const xdiff = Math.abs(endPoint.x - this.startPoint.x);\n        const ydiff = Math.abs(endPoint.y - this.startPoint.y);\n        const label =\n            Math.round((Math.sqrt(xdiff ** 2 + ydiff ** 2) * gameStore.unitSize) / gameStore.gridSize) + \" ft\";\n        const angle = Math.atan2(diffsign * ydiff, xdiff);\n        const xmid = Math.min(this.startPoint.x, endPoint.x) + xdiff / 2;\n        const ymid = Math.min(this.startPoint.y, endPoint.y) + ydiff / 2;\n        this.text.refPoint = new GlobalPoint(xmid, ymid);\n        this.text.text = label;\n        this.text.angle = angle;\n        socket.emit(\"Shape.Update\", { shape: this.text.asDict(), redraw: true, temporary: true });\n        layer.invalidate(true);\n    }\n    onMouseUp(event: MouseEvent) {\n        if (!this.active || this.ruler === null || this.startPoint === null || this.text === null) return;\n\n        const layer = layerManager.getLayer(\"draw\");\n        if (layer === undefined) {\n            console.log(\"No active layer!\");\n            return;\n        }\n        this.active = false;\n\n        layer.removeShape(this.ruler, true, true);\n        layer.removeShape(this.text, true, true);\n        layer.invalidate(true);\n        this.ruler = this.startPoint = this.text = null;\n    }\n}\n","import { render, staticRenderFns } from \"./modal.vue?vue&type=template&id=12ed61ba&scoped=true&\"\nimport script from \"./modal.vue?vue&type=script&lang=ts&\"\nexport * from \"./modal.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./modal.vue?vue&type=style&index=0&id=12ed61ba&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"12ed61ba\",\n  null\n  \n)\n\ncomponent.options.__file = \"modal.vue\"\nexport default component.exports","import { layerManager } from \"@/game/layers/manager\";\nimport { gameStore } from \"@/game/store\";\n\nimport { CDT } from \"./cdt\";\n\nexport let PA_CDT = {\n    vision: new CDT(),\n    movement: new CDT(),\n};\n\nexport function triangulate(target: \"vision\" | \"movement\", partial: boolean = false) {\n    const cdt = new CDT();\n\n    let shapes;\n    if (target === \"vision\") shapes = gameStore.visionBlockers;\n    else shapes = gameStore.movementblockers;\n\n    for (const sh of shapes) {\n        const shape = layerManager.UUIDMap.get(sh)!;\n        if (partial && !shape.visibleInCanvas(layerManager.getLayer()!.canvas)) continue;\n        for (let i = 0; i < shape.points.length; i++) {\n            cdt.insertConstraint(shape.points[i], shape.points[(i + 1) % shape.points.length]);\n        }\n    }\n    // LEFT WALL\n    cdt.insertConstraint([-1e10, -1e10], [-1e10, 1e10]);\n    cdt.insertConstraint([-1e10, 1e10], [-1e11, 1e10]);\n    cdt.insertConstraint([-1e11, 1e10], [-1e11, -1e10]);\n    cdt.insertConstraint([-1e11, -1e10], [-1e10, -1e10]);\n    // TOP WALL\n    cdt.insertConstraint([-1e10, -1e10], [1e10, -1e10]);\n    cdt.insertConstraint([1e10, -1e10], [1e10, -1e11]);\n    cdt.insertConstraint([1e10, -1e11], [-1e10, -1e11]);\n    cdt.insertConstraint([-1e10, -1e11], [-1e10, -1e10]);\n    // RIGHT WALL\n    cdt.insertConstraint([1e10, -1e10], [1e10, 1e10]);\n    cdt.insertConstraint([1e10, 1e10], [1e11, 1e10]);\n    cdt.insertConstraint([1e11, 1e10], [1e11, -1e10]);\n    cdt.insertConstraint([1e11, -1e10], [1e10, -1e10]);\n    // BOT WALL\n    cdt.insertConstraint([-1e10, 1e10], [1e10, 1e10]);\n    cdt.insertConstraint([1e10, 1e10], [1e10, 1e11]);\n    cdt.insertConstraint([1e10, 1e11], [-1e10, 1e11]);\n    cdt.insertConstraint([-1e10, 1e11], [-1e10, 1e10]);\n    PA_CDT[target] = cdt;\n    (<any>window).CDT = PA_CDT;\n}\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./main.vue?vue&type=style&index=0&id=61eb1455&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./main.vue?vue&type=style&index=0&id=61eb1455&scoped=true&lang=css&\"","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\n\nimport { Prop } from \"vue-property-decorator\";\n\nimport ColorPicker from \"@/core/components/colorpicker.vue\";\nimport Modal from \"@/core/components/modals/modal.vue\";\n\nimport { uuidv4 } from \"@/core/utils\";\nimport { socket } from \"@/game/api/socket\";\nimport { EventBus } from \"@/game/event-bus\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { Shape } from \"@/game/shapes/shape\";\nimport { gameStore } from \"@/game/store\";\n\n@Component({\n    components: {\n        Modal,\n        \"color-picker\": ColorPicker,\n    },\n})\nexport default class EditDialog extends Vue {\n    @Prop() shape!: Shape;\n\n    visible = false;\n\n    mounted() {\n        EventBus.$on(\"EditDialog.Open\", (shape: Shape) => {\n            this.shape = shape;\n            this.visible = true;\n        });\n    }\n\n    beforeDestroy() {\n        EventBus.$off();\n    }\n\n    updated() {\n        this.addEmpty();\n    }\n\n    addEmpty() {\n        if (this.shape.owners[this.shape.owners.length - 1] !== \"\") this.shape.addOwner(\"\");\n        if (\n            !this.shape.trackers.length ||\n            this.shape.trackers[this.shape.trackers.length - 1].name !== \"\" ||\n            this.shape.trackers[this.shape.trackers.length - 1].value !== 0\n        )\n            this.shape.trackers.push({ uuid: uuidv4(), name: \"\", value: 0, maxvalue: 0, visible: false });\n        if (\n            !this.shape.auras.length ||\n            this.shape.auras[this.shape.auras.length - 1].name !== \"\" ||\n            this.shape.auras[this.shape.auras.length - 1].value !== 0\n        )\n            this.shape.auras.push({\n                uuid: uuidv4(),\n                name: \"\",\n                value: 0,\n                dim: 0,\n                visionSource: false,\n                colour: \"rgba(0,0,0,0)\",\n                visible: false,\n            });\n    }\n    updateShape(redraw: boolean, temporary = false) {\n        socket.emit(\"Shape.Update\", { shape: this.shape.asDict(), redraw, temporary });\n        if (redraw) layerManager.invalidate();\n        this.addEmpty();\n    }\n    setToken(event: { target: HTMLInputElement }) {\n        this.shape.setIsToken(event.target.checked);\n        this.updateShape(true);\n    }\n    setVisionBlocker(event: { target: HTMLInputElement }) {\n        this.shape.checkVisionSources();\n        this.updateShape(true);\n    }\n    setMovementBlocker(event: { target: HTMLInputElement }) {\n        this.shape.setMovementBlock(event.target.checked);\n        this.updateShape(false);\n    }\n    updateAnnotation(event: { target: HTMLInputElement }) {\n        const hadAnnotation = this.shape.annotation !== \"\";\n        this.shape.annotation = event.target.value;\n        if (this.shape.annotation !== \"\" && !hadAnnotation) {\n            gameStore.annotations.push(this.shape.uuid);\n            if (layerManager.hasLayer(\"draw\")) layerManager.getLayer(\"draw\")!.invalidate(true);\n        } else if (this.shape.annotation === \"\" && hadAnnotation) {\n            gameStore.annotations.splice(gameStore.annotations.findIndex(an => an === this.shape.uuid));\n            if (layerManager.hasLayer(\"draw\")) layerManager.getLayer(\"draw\")!.invalidate(true);\n        }\n        this.updateShape(false);\n    }\n    updateOwner(event: { target: HTMLInputElement }, oldValue: string) {\n        this.shape.updateOwner(oldValue, event.target.value);\n        this.updateShape(gameStore.fowLOS);\n    }\n    removeOwner(value: string) {\n        this.shape.removeOwner(value);\n        this.updateShape(gameStore.fowLOS);\n    }\n    removeTracker(uuid: string) {\n        this.shape.trackers = this.shape.trackers.filter(tr => tr.uuid !== uuid);\n        this.updateShape(false);\n    }\n    removeAura(uuid: string) {\n        this.shape.auras = this.shape.auras.filter(au => au.uuid !== uuid);\n        this.shape.checkVisionSources();\n        this.updateShape(true);\n    }\n    updateAuraVisionSource(aura: Aura) {\n        aura.visionSource = !aura.visionSource;\n        const i = gameStore.visionSources.findIndex(ls => ls.aura === aura.uuid);\n        if (aura.visionSource && i === -1) gameStore.visionSources.push({ shape: this.shape.uuid, aura: aura.uuid });\n        else if (!aura.visionSource && i >= 0) gameStore.visionSources.splice(i, 1);\n        // aura.lastPath = undefined;\n        layerManager.invalidateLight();\n        this.updateShape(true);\n    }\n    updateAuraColour(aura: Aura, colour: string) {\n        const layer = layerManager.getLayer(this.shape.layer);\n        if (layer === undefined) return;\n        layer.invalidate(!aura.visionSource);\n    }\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"main\"},on:{\"mouseleave\":_vm.mouseleave}},[_c('menu-bar'),_c('div',{attrs:{\"id\":\"board\"}},[(_vm.ready.manager)?[_c('tool-bar',{ref:\"tools\"})]:_vm._e(),_c('div',{attrs:{\"id\":\"layers\"},on:{\"mousedown\":_vm.mousedown,\"mouseup\":_vm.mouseup,\"mousemove\":_vm.mousemove,\"contextmenu\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.contextmenu($event)},\"dragover\":function($event){$event.preventDefault();},\"drop\":_vm.drop}}),(_vm.layers.length > 1)?_c('div',{attrs:{\"id\":\"layerselect\"}},[_c('ul',_vm._l((_vm.layers),function(layer){return _c('li',{key:layer.name,class:{ 'layer-selected': layer === _vm.selectedLayer },on:{\"click\":function($event){_vm.selectLayer(layer)}}},[_c('a',{attrs:{\"href\":\"#\"}},[_vm._v(_vm._s(layer))])])}))]):_vm._e()],2),_c('selection-info',{ref:\"selectionInfo\"}),_c('initiative-dialog',{ref:\"initiative\",attrs:{\"id\":\"initiativedialog\"}}),_c('note-dialog',{ref:\"note\"}),_c('zoom-slider',{attrs:{\"id\":\"zoomer\",\"height\":6,\"width\":200,\"min\":0.01,\"max\":5.0,\"interval\":0.1,\"dot-width\":8,\"dot-height\":20,\"tooltip-dir\":'bottom',\"tooltip\":'hover',\"formatter\":_vm.zoomFactor.toFixed(1),\"slider-style\":{'border-radius': '15%'},\"bg-style\":{'background-color': '#fff', 'box-shadow': '0.5px 0.5px 3px 1px rgba(0, 0, 0, .36)'},\"process-style\":{'background-color': '#fff'}},model:{value:(_vm.zoomFactor),callback:function ($$v) {_vm.zoomFactor=$$v},expression:\"zoomFactor\"}}),_c('prompt-dialog',{ref:\"prompt\"}),_c('confirm-dialog',{ref:\"confirm\"})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"74f43d04-vue-loader-template\\\"}!../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./game.vue?vue&type=template&id=6d744362&scoped=true&\"","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\n\nimport Modal from \"@/core/components/modals/modal.vue\";\n\n@Component({\n    components: {\n        Modal,\n    },\n})\nexport default class ConfirmDialog extends Vue {\n    $refs!: {\n        confirm: HTMLButtonElement;\n    };\n\n    visible = false;\n    yes = \"Yes\";\n    no = \"No\";\n    title = \"\";\n\n    resolve = (ok: boolean) => {};\n    reject = () => {};\n\n    confirm() {\n        this.resolve(true);\n        this.close();\n    }\n    deny() {\n        this.resolve(false);\n        this.close();\n    }\n    close() {\n        this.reject();\n        this.visible = false;\n        this.title = \"\";\n    }\n    open(title: string, yes = \"yes\", no = \"no\"): Promise<boolean> {\n        this.yes = yes;\n        this.no = no;\n        this.title = title;\n\n        this.visible = true;\n        this.$nextTick(() => {\n            this.$refs.confirm.focus();\n        });\n\n        return new Promise((resolve, reject) => {\n            this.resolve = resolve;\n            this.reject = reject;\n        });\n    }\n}\n","import { render, staticRenderFns } from \"./map.vue?vue&type=template&id=2104f147&\"\nimport script from \"./map.vue?vue&type=script&lang=ts&\"\nexport * from \"./map.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"map.vue\"\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('modal',{attrs:{\"visible\":_vm.visible},on:{\"close\":_vm.close},scopedSlots:_vm._u([{key:\"header\",fn:function(m){return _c('div',{staticClass:\"modal-header\",attrs:{\"draggable\":\"true\"},on:{\"dragstart\":m.dragStart,\"dragend\":m.dragEnd}},[_vm._v(_vm._s(_vm.title))])}}])},[_c('div',{staticClass:\"modal-body\"},[_c('button',{ref:\"confirm\",on:{\"click\":_vm.confirm}},[_vm._v(_vm._s(_vm.yes))]),(!!_vm.no)?_c('button',{on:{\"click\":_vm.deny}},[_vm._v(_vm._s(_vm.no))]):_vm._e()])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"74f43d04-vue-loader-template\\\"}!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./confirm.vue?vue&type=template&id=1883e207&scoped=true&\"","\n\n\n\n\n\n\n\nimport Vue from \"vue\";\n\nimport Component from \"vue-class-component\";\n\nimport ContextMenu from \"@/core/components/contextmenu.vue\";\nimport ConfirmDialog from \"@/core/components/modals/confirm.vue\";\nimport Prompt from \"@/core/components/modals/prompt.vue\";\n\nimport { socket } from \"@/assetManager/socket\";\nimport { assetStore } from \"@/assetManager/store\";\nimport { getComponent, getRef } from \"@/core/utils\";\n\n@Component({\n    components: {\n        ContextMenu,\n    },\n})\nexport default class AssetContextMenu extends Vue {\n    visible = false;\n    left = 0;\n    top = 0;\n    open(event: MouseEvent, inode: number) {\n        if (!assetStore.selected.includes(inode)) getComponent<any>().select(event, inode);\n\n        this.visible = true;\n        this.left = event.pageX;\n        this.top = event.pageY;\n        this.$nextTick(() => {\n            this.$children[0].$el.focus();\n        });\n    }\n    close() {\n        this.visible = false;\n    }\n    rename() {\n        if (assetStore.selected.length !== 1) return;\n        const asset = assetStore.idMap.get(assetStore.selected[0])!;\n\n        getRef<Prompt>(\"prompt\")\n            .prompt(\"New name:\", `Renaming ${asset.name}`)\n            .then(\n                (name: string) => {\n                    socket.emit(\"Asset.Rename\", {\n                        asset: asset.id,\n                        name,\n                    });\n                    asset.name = name;\n                    getComponent().$forceUpdate();\n                },\n                () => {},\n            );\n        this.close();\n    }\n    remove() {\n        if (assetStore.selected.length === 0) return;\n        getRef<ConfirmDialog>(\"confirm\")\n            .open(\"Are you sure you wish to remove this?\")\n            .then(\n                (result: boolean) => {\n                    if (result) {\n                        for (const sel of assetStore.selected) {\n                            socket.emit(\"Asset.Remove\", sel);\n                            if (assetStore.files.includes(sel))\n                                assetStore.files.splice(assetStore.files.indexOf(sel), 1);\n                            else assetStore.folders.splice(assetStore.folders.indexOf(sel), 1);\n                        }\n                        assetStore.clearSelected();\n                    }\n                },\n                () => {},\n            );\n        this.close();\n    }\n}\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./select.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./select.vue?vue&type=script&lang=ts&\"","import { ServerPolygon } from \"../comm/types/shapes\";\nimport { GlobalPoint, LocalPoint } from \"../geom\";\nimport { g2lx, g2ly, g2lz, l2g } from \"../units\";\nimport { getFogColour } from \"../utils\";\nimport { BoundingRect } from \"./boundingrect\";\nimport { Shape } from \"./shape\";\n\nexport class Polygon extends Shape {\n    type = \"polygon\";\n    _vertices: GlobalPoint[] = [];\n\n    constructor(\n        startPoint: GlobalPoint,\n        vertices: GlobalPoint[] = [],\n        fillColour?: string,\n        strokeColour?: string,\n        uuid?: string,\n    ) {\n        super(startPoint, fillColour, strokeColour, uuid);\n        this._vertices = vertices;\n    }\n\n    get refPoint() {\n        return this._refPoint;\n    }\n    set refPoint(point: GlobalPoint) {\n        const delta = point.subtract(this._refPoint);\n        this._refPoint = point;\n        for (let i = 0; i < this._vertices.length; i++) this._vertices[i] = this._vertices[i].add(delta);\n    }\n\n    get vertices() {\n        return [this._refPoint, ...this._vertices];\n    }\n\n    asDict() {\n        return Object.assign(this.getBaseDict(), {\n            vertices: this._vertices.map(p => ({ x: p.x, y: p.y })),\n        });\n    }\n\n    fromDict(data: ServerPolygon) {\n        super.fromDict(data);\n        this._vertices = data.vertices.map(v => new GlobalPoint(v.x, v.y));\n    }\n\n    get points() {\n        return this.vertices.map(point => [point.x, point.y]);\n    }\n\n    draw(ctx: CanvasRenderingContext2D) {\n        super.draw(ctx);\n        ctx.lineCap = \"round\";\n        ctx.lineJoin = \"round\";\n\n        if (this.strokeColour === \"fog\") ctx.strokeStyle = getFogColour();\n        else if (this.vertices.length === 2) ctx.strokeStyle = this.fillColour;\n        else ctx.strokeStyle = this.strokeColour;\n        if (this.fillColour === \"fog\") ctx.fillStyle = getFogColour();\n        else ctx.fillStyle = this.fillColour;\n        ctx.lineWidth = g2lz(2);\n\n        ctx.beginPath();\n        ctx.moveTo(g2lx(this.vertices[0].x), g2ly(this.vertices[0].y));\n        for (let i = 1; i <= this.vertices.length; i++) {\n            const vertex = this.vertices[i % this.vertices.length];\n            ctx.lineTo(g2lx(vertex.x), g2ly(vertex.y));\n        }\n        ctx.fill();\n        ctx.stroke();\n    }\n\n    contains(point: GlobalPoint): boolean {\n        return this.getBoundingBox().contains(point);\n    }\n\n    center(): GlobalPoint;\n    center(centerPoint: GlobalPoint): void;\n    center(centerPoint?: GlobalPoint): GlobalPoint | void {\n        return this.getBoundingBox().center();\n    }\n    visibleInCanvas(canvas: HTMLCanvasElement): boolean {\n        return this.getBoundingBox().visibleInCanvas(canvas);\n    } // TODO\n    snapToGrid(): void {}\n    resizeToGrid(): void {}\n    resize(resizePoint: number, point: LocalPoint): void {\n        if (resizePoint === 0) this._refPoint = l2g(point);\n        else this._vertices[resizePoint - 1] = l2g(point);\n    }\n    getBoundingBox(): BoundingRect {\n        let minx: number = this.refPoint.x;\n        let maxx: number = this.refPoint.x;\n        let miny: number = this.refPoint.y;\n        let maxy: number = this.refPoint.y;\n        for (const p of this._vertices) {\n            if (p.x < minx) minx = p.x;\n            if (p.x > maxx) maxx = p.x;\n            if (p.y < miny) miny = p.y;\n            if (p.y > maxy) maxy = p.y;\n        }\n        return new BoundingRect(new GlobalPoint(minx, miny), maxx - minx, maxy - miny);\n    }\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.selected)?_c('div',{staticClass:\"tool-detail\",style:({'--detailRight': _vm.detailRight, '--detailArrow': _vm.detailArrow})},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.IS_DM),expression:\"IS_DM\"}]},[_vm._v(\"Mode\")]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.IS_DM),expression:\"IS_DM\"}],staticClass:\"selectgroup\"},_vm._l((_vm.modes),function(mode){return _c('div',{key:mode,staticClass:\"option\",class:{'option-selected': _vm.modeSelect === mode},on:{\"click\":function($event){_vm.modeSelect = mode}}},[_vm._v(_vm._s(mode))])})),_c('div',[_vm._v(\"Shape\")]),_c('div',{staticClass:\"selectgroup\"},_vm._l((_vm.shapes),function(shape){return _c('div',{key:shape,staticClass:\"option\",class:{'option-selected': _vm.shapeSelect === shape},on:{\"click\":function($event){_vm.shapeSelect = shape}}},[_c('i',{staticClass:\"fas\",class:'fa-' + shape})])})),_c('div',[_vm._v(\"Colours\")]),_c('div',{staticClass:\"selectgroup\"},[_c('color-picker',{staticClass:\"option\",attrs:{\"color\":_vm.fillColour},on:{\"update:color\":function($event){_vm.fillColour=$event}}}),_c('color-picker',{staticClass:\"option\",attrs:{\"color\":_vm.borderColour},on:{\"update:color\":function($event){_vm.borderColour=$event}}})],1),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.shapeSelect === 'paint-brush'),expression:\"shapeSelect === 'paint-brush'\"}]},[_vm._v(\"Brush size\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.brushSize),expression:\"brushSize\"},{name:\"show\",rawName:\"v-show\",value:(_vm.shapeSelect === 'paint-brush'),expression:\"shapeSelect === 'paint-brush'\"}],staticStyle:{\"max-width\":\"100px\"},attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.brushSize)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.brushSize=$event.target.value}}})]):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"74f43d04-vue-loader-template\\\"}!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./draw.vue?vue&type=template&id=639cd890&scoped=true&\"","import { render, staticRenderFns } from \"./manager.vue?vue&type=template&id=5b0def98&\"\nimport script from \"./manager.vue?vue&type=script&lang=ts&\"\nexport * from \"./manager.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./manager.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"manager.vue\"\nexport default component.exports","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tools.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tools.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./tool.vue?vue&type=template&id=1e034b42&\"\nimport script from \"./tool.vue?vue&type=script&lang=ts&\"\nexport * from \"./tool.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./tool.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"tool.vue\"\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('Modal',{attrs:{\"visible\":_vm.visible},on:{\"close\":_vm.close},scopedSlots:_vm._u([{key:\"header\",fn:function(m){return _c('div',{staticClass:\"modal-header\",attrs:{\"draggable\":\"true\"},on:{\"dragstart\":m.dragStart,\"dragend\":m.dragEnd}},[_vm._v(_vm._s(_vm.title))])}}])},[_c('div',{staticClass:\"modal-body\"},[_vm._v(\"\\n    \"+_vm._s(_vm.question)+\"\\n    \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.answer),expression:\"answer\"}],ref:\"answer\",attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.answer)},on:{\"keyup\":function($event){if(!('button' in $event)&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.submit($event)},\"input\":function($event){if($event.target.composing){ return; }_vm.answer=$event.target.value}}})]),_c('div',{staticClass:\"modal-footer\"},[_c('button',{on:{\"click\":_vm.submit}},[_vm._v(\"Submit\")])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"74f43d04-vue-loader-template\\\"}!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./prompt.vue?vue&type=template&id=0602c2e6&scoped=true&\"","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\nimport draggable from \"vuedraggable\";\nVue.component(\"draggable\", draggable);\n\nimport Modal from \"@/core/components/modals/modal.vue\";\n\nimport { uuidv4 } from \"@/core/utils\";\nimport { socket } from \"@/game/api/socket\";\nimport { InitiativeData, InitiativeEffect } from \"@/game/comm/types/general\";\nimport { EventBus } from \"@/game/event-bus\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { gameStore } from \"@/game/store\";\n\n@Component({\n    components: {\n        Modal,\n        draggable,\n    },\n})\nexport default class Initiative extends Vue {\n    visible = false;\n    data: InitiativeData[] = [];\n    currentActor: string | null = null;\n    roundCounter = 0;\n\n    mounted() {\n        EventBus.$on(\"Initiative.Clear\", this.clear);\n        EventBus.$on(\"Initiative.Remove\", (data: string) => this.removeInitiative(data));\n        EventBus.$on(\"Initiative.Show\", () => (this.visible = true));\n\n        socket.on(\"Initiative.Set\", (data: InitiativeData[]) => {\n            this.data = data;\n        });\n        socket.on(\"Initiative.Turn.Update\", (data: string) => this.setTurn(data, false));\n        socket.on(\"Initiative.Round.Update\", (data: number) => this.setRound(data, false));\n        socket.on(\"Initiative.Effect.New\", (data: { actor: string; effect: InitiativeEffect }) => {\n            const actor = this.getActor(data.actor);\n            if (actor === undefined) return;\n            this.createEffect(actor, data.effect, false);\n        });\n        socket.on(\"Initiative.Effect.Update\", (data: { actor: string; effect: InitiativeEffect }) =>\n            this.updateEffect(data.actor, data.effect, false),\n        );\n    }\n\n    beforeDestroy() {\n        EventBus.$off();\n    }\n\n    // Utilities\n    clear() {\n        this.data = [];\n        this.currentActor = null;\n    }\n    getActor(actorId: string) {\n        return this.data.find(a => a.uuid === actorId);\n    }\n    contains(uuid: string) {\n        return this.data.some(d => d.uuid === uuid);\n    }\n    owns(actor: InitiativeData): boolean {\n        if (gameStore.IS_DM) return true;\n        const shape = layerManager.UUIDMap.get(actor.uuid);\n        // Shapes that are unknown to this client are hidden from this client but owned by other clients\n        if (shape === undefined) return false;\n        return shape.owners.includes(gameStore.username);\n    }\n    getDefaultEffect() {\n        return { uuid: uuidv4(), name: \"New Effect\", turns: 10 };\n    }\n    fakeSetData(dataTransfer: DataTransfer) {\n        dataTransfer.setData(\"Hack\", \"\");\n    }\n    syncInitiative(data: InitiativeData | { uuid: string }) {\n        socket.emit(\"Initiative.Update\", data);\n    }\n    // Events\n    addInitiative(data: InitiativeData) {\n        const d = this.data.findIndex(a => a.uuid === data.uuid);\n        if (d >= 0) return;\n        if (data.initiative === undefined) data.initiative = 0;\n        this.syncInitiative(data);\n    }\n    removeInitiative(uuid: string) {\n        const d = this.data.findIndex(a => a.uuid === uuid);\n        if (d < 0 || this.data[d].group) return;\n        this.syncInitiative({ uuid });\n        // Remove highlight\n        const shape = layerManager.UUIDMap.get(uuid);\n        if (shape === undefined) return;\n        if (shape.showHighlight) {\n            shape.showHighlight = false;\n            layerManager.getLayer(shape.layer)!.invalidate(true);\n        }\n    }\n    updateOrder() {\n        if (!gameStore.IS_DM) return;\n        socket.emit(\"Initiative.Set\", this.data.map(d => d.uuid));\n    }\n    setTurn(actorId: string | null, sync: boolean) {\n        if (!gameStore.IS_DM && sync) return;\n        this.currentActor = actorId;\n        const actor = this.data.find(a => a.uuid === actorId);\n        if (actor === undefined) return;\n        if (actor.effects) {\n            for (let e = actor.effects.length - 1; e >= 0; e--) {\n                if (actor.effects[e].turns <= 0) actor.effects.splice(e, 1);\n                else actor.effects[e].turns--;\n            }\n        }\n        if (sync) socket.emit(\"Initiative.Turn.Update\", actorId);\n    }\n    setRound(round: number, sync: boolean) {\n        if (!gameStore.IS_DM && sync) return;\n        this.roundCounter = round;\n        if (sync) socket.emit(\"Initiative.Round.Update\", round);\n    }\n    nextTurn() {\n        if (!gameStore.IS_DM) return;\n        const order = this.data;\n        const next = order[(order.findIndex(a => a.uuid === this.currentActor) + 1) % order.length];\n        if (this.data[0].uuid === next.uuid) this.setRound(this.roundCounter + 1, true);\n        this.setTurn(next.uuid, true);\n    }\n    toggleHighlight(actor: InitiativeData, show: boolean) {\n        const shape = layerManager.UUIDMap.get(actor.uuid);\n        if (shape === undefined) return;\n        shape.showHighlight = show;\n        layerManager.getLayer(shape.layer)!.invalidate(true);\n    }\n    toggleOption(actor: InitiativeData, option: \"visible\" | \"group\") {\n        if (!this.owns(actor)) return;\n        actor[option] = !actor[option];\n        this.syncInitiative(actor);\n    }\n    createEffect(actor: InitiativeData, effect: InitiativeEffect, sync: boolean) {\n        if (!this.owns(actor)) return;\n        actor.effects.push(effect);\n        if (sync) socket.emit(\"Initiative.Effect.New\", { actor: actor.uuid, effect });\n    }\n    syncEffect(actor: InitiativeData, effect: InitiativeEffect) {\n        if (!this.owns(actor)) return;\n        socket.emit(\"Initiative.Effect.Update\", { actor: actor.uuid, effect });\n    }\n    updateEffect(actorId: string, effect: InitiativeEffect, sync: boolean) {\n        const actor = this.data.find(a => a.uuid === actorId);\n        if (actor === undefined) return;\n        const effectIndex = actor.effects.findIndex(e => e.uuid === effect.uuid);\n        if (effectIndex === undefined) return;\n        actor.effects[effectIndex] = effect;\n        if (sync) this.syncEffect(actor, effect);\n        else this.$forceUpdate();\n    }\n}\n","import { render, staticRenderFns } from \"./selection_info.vue?vue&type=template&id=32cec914&scoped=true&\"\nimport script from \"./selection_info.vue?vue&type=script&lang=ts&\"\nexport * from \"./selection_info.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./selection_info.vue?vue&type=style&index=0&id=32cec914&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"32cec914\",\n  null\n  \n)\n\ncomponent.options.__file = \"selection_info.vue\"\nexport default component.exports","// import Vuex from \"vuex\";\nimport { Action, getModule, Module, Mutation, VuexModule } from \"vuex-module-decorators\";\n\nimport { AssetList } from \"@/core/comm/types\";\nimport { socket } from \"@/game/api/socket\";\nimport { sendClientOptions } from \"@/game/api/utils\";\nimport { Note } from \"@/game/comm/types/general\";\nimport { GlobalPoint } from \"@/game/geom\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { g2l, l2g } from \"@/game/units\";\nimport { BoundingVolume } from \"@/game/visibility/bvh/bvh\";\nimport { rootStore } from \"@/store\";\nimport { triangulate } from \"./visibility/te/pa\";\n\nexport interface GameState {\n    boardInitialized: boolean;\n}\n\n@Module({ dynamic: true, store: rootStore, name: \"game\", namespaced: true })\nclass GameStore extends VuexModule implements GameState {\n    // This is a limited view of selectable layers that is used to generate the layer selection UI and ability to switch layers\n    // See the layerManager for proper layer management tools\n    layers: string[] = [];\n    selectedLayerIndex = -1;\n    boardInitialized = false;\n\n    locations: string[] = [];\n\n    assets: AssetList = {};\n\n    notes: Note[] = [];\n\n    IS_DM = false;\n    gridSize = 50;\n    username = \"\";\n    roomName = \"\";\n    roomCreator = \"\";\n    invitationCode = \"\";\n\n    gridColour = \"rgba(0, 0, 0, 1)\";\n    fowColour = \"rgba(0, 0, 0, 1)\";\n    rulerColour = \"rgba(255, 0, 0, 1)\";\n    panX = 0;\n    panY = 0;\n    zoomFactor = 1;\n\n    unitSize = 5;\n    useGrid = true;\n    fullFOW = false;\n    fowOpacity = 0.3;\n    fowLOS = false;\n    locationName = \"\";\n\n    visionSources: { shape: string; aura: string }[] = [];\n    visionBlockers: string[] = [];\n    annotations: string[] = [];\n    movementblockers: string[] = [];\n    ownedtokens: string[] = [];\n\n    BV = Object.freeze(new BoundingVolume([]));\n\n    visionMode: \"bvh\" | \"triangle\" = \"bvh\";\n    drawTEContour = false;\n    visionRangeMin = 1640;\n    visionRangeMax = 3281;\n\n    get selectedLayer() {\n        return this.layers[this.selectedLayerIndex];\n    }\n\n    @Mutation\n    setVisionMode(data: { mode: \"bvh\" | \"triangle\"; sync: boolean }) {\n        this.visionMode = data.mode;\n        if (data.sync) socket.emit(\"Location.Options.Set\", { vision_mode: data.mode });\n    }\n\n    @Mutation\n    setBoardInitialized(boardInitialized: boolean) {\n        this.boardInitialized = boardInitialized;\n    }\n\n    @Mutation\n    setDM(isDM: boolean) {\n        this.IS_DM = isDM;\n    }\n\n    @Mutation\n    setUsername(username: string) {\n        this.username = username;\n    }\n\n    @Mutation\n    setRoomName(name: string) {\n        this.roomName = name;\n    }\n\n    @Mutation\n    setRoomCreator(name: string) {\n        this.roomCreator = name;\n    }\n\n    @Mutation\n    setInvitationCode(code: string) {\n        this.invitationCode = code;\n    }\n\n    @Mutation\n    addLayer(name: string) {\n        this.layers.push(name);\n        if (this.selectedLayerIndex === -1) this.selectedLayerIndex = this.layers.indexOf(name);\n    }\n\n    @Mutation\n    selectLayer(data: { name: string; sync: boolean }) {\n        const index = this.layers.indexOf(data.name);\n        if (index >= 0) this.selectedLayerIndex = index;\n        if (data.sync) socket.emit(\"Client.ActiveLayer.Set\", data.name);\n    }\n\n    @Mutation\n    newNote(data: { note: Note; sync: boolean }) {\n        this.notes.push(data.note);\n        if (data.sync) socket.emit(\"Note.New\", data.note);\n    }\n\n    @Mutation\n    setAssets(assets: AssetList) {\n        this.assets = assets;\n    }\n\n    @Mutation\n    setLocations(locations: string[]) {\n        this.locations = locations;\n    }\n\n    @Mutation\n    resetLayerInfo() {\n        this.layers = [];\n        this.selectedLayerIndex = -1;\n    }\n\n    @Mutation\n    recalculateVision(partial = false) {\n        if (this.boardInitialized) {\n            if (this.visionMode === \"triangle\") triangulate(\"vision\", partial);\n            else this.BV = Object.freeze(new BoundingVolume(this.visionBlockers));\n        }\n    }\n\n    @Mutation\n    recalculateMovement(partial = false) {\n        if (this.boardInitialized && this.visionMode === \"triangle\") triangulate(\"movement\", partial);\n    }\n\n    @Mutation\n    updateZoom(data: { newZoomValue: number; zoomLocation: GlobalPoint }) {\n        if (data.newZoomValue === this.zoomFactor) return;\n        if (data.newZoomValue < 0.1) data.newZoomValue = 0.01;\n        if (data.newZoomValue > 5) data.newZoomValue = 5;\n\n        const oldLoc = g2l(data.zoomLocation);\n\n        this.zoomFactor = data.newZoomValue;\n\n        const newLoc = l2g(oldLoc);\n\n        // Change the pan settings to keep the zoomLocation in the same exact location before and after the zoom.\n        const diff = newLoc.subtract(data.zoomLocation);\n        this.panX += diff.x;\n        this.panY += diff.y;\n\n        layerManager.invalidate();\n        sendClientOptions();\n    }\n\n    @Mutation\n    setGridColour(data: { colour: string; sync: boolean }) {\n        this.gridColour = data.colour;\n        layerManager.getGridLayer()!.drawGrid();\n        if (data.sync) socket.emit(\"Client.Options.Set\", { gridColour: data.colour });\n    }\n\n    @Mutation\n    setFOWColour(data: { colour: string; sync: boolean }) {\n        this.fowColour = data.colour;\n        layerManager.invalidate();\n        if (data.sync) socket.emit(\"Client.Options.Set\", { fowColour: data.colour });\n    }\n\n    @Mutation\n    setRulerColour(data: { colour: string; sync: boolean }) {\n        this.rulerColour = data.colour;\n        if (data.sync) socket.emit(\"Client.Options.Set\", { rulerColour: data.colour });\n    }\n\n    @Mutation\n    setPanX(x: number) {\n        this.panX = x;\n    }\n\n    @Mutation\n    setPanY(y: number) {\n        this.panY = y;\n    }\n\n    @Mutation\n    setZoomFactor(zoomFactor: number) {\n        this.zoomFactor = zoomFactor;\n    }\n\n    @Mutation\n    increasePanX(increase: number) {\n        this.panX += increase;\n    }\n\n    @Mutation\n    increasePanY(increase: number) {\n        this.panY += increase;\n    }\n\n    @Mutation\n    setUnitSize(data: { unitSize: number; sync: boolean }) {\n        if (this.unitSize !== data.unitSize && data.unitSize > 0 && data.unitSize < Infinity) {\n            this.unitSize = data.unitSize;\n            layerManager.invalidate();\n            if (data.sync) socket.emit(\"Location.Options.Set\", { unit_size: data.unitSize });\n        }\n    }\n\n    @Mutation\n    setUseGrid(data: { useGrid: boolean; sync: boolean }) {\n        if (this.useGrid !== data.useGrid) {\n            this.useGrid = data.useGrid;\n            const gridLayer = layerManager.getGridLayer()!;\n            if (data.useGrid) gridLayer.canvas.style.display = \"block\";\n            else gridLayer.canvas.style.display = \"none\";\n            if (data.sync) socket.emit(\"Location.Options.Set\", { use_grid: data.useGrid });\n        }\n    }\n\n    @Mutation\n    setGridSize(data: { gridSize: number; sync: boolean }): void {\n        if (this.gridSize !== data.gridSize && data.gridSize > 0) {\n            this.gridSize = data.gridSize;\n            const gridLayer = layerManager.getGridLayer();\n            if (gridLayer !== undefined) gridLayer.drawGrid();\n            if (data.sync) socket.emit(\"Gridsize.Set\", data.gridSize);\n        }\n    }\n\n    @Mutation\n    setVisionRangeMin(data: { value: number; sync: boolean }): void {\n        this.visionRangeMin = data.value;\n        layerManager.invalidateLight();\n        if (data.sync) socket.emit(\"Location.Options.Set\", { vision_min_range: data.value });\n    }\n\n    @Mutation\n    setVisionRangeMax(data: { value: number; sync: boolean }): void {\n        this.visionRangeMax = Math.max(data.value, this.visionRangeMin);\n        layerManager.invalidateLight();\n        if (data.sync) socket.emit(\"Location.Options.Set\", { vision_max_range: this.visionRangeMax });\n    }\n\n    @Mutation\n    setFullFOW(data: { fullFOW: boolean; sync: boolean }) {\n        if (this.fullFOW !== data.fullFOW) {\n            this.fullFOW = data.fullFOW;\n            layerManager.invalidateLight();\n            if (data.sync) socket.emit(\"Location.Options.Set\", { full_fow: data.fullFOW });\n        }\n    }\n\n    @Mutation\n    setFOWOpacity(data: { fowOpacity: number; sync: boolean }) {\n        this.fowOpacity = data.fowOpacity;\n        layerManager.invalidateLight();\n        if (data.sync) socket.emit(\"Location.Options.Set\", { fow_opacity: data.fowOpacity });\n    }\n\n    @Mutation\n    setLineOfSight(data: { fowLOS: boolean; sync: boolean }) {\n        if (this.fowLOS !== data.fowLOS) {\n            this.fowLOS = data.fowLOS;\n            layerManager.invalidate();\n            if (data.sync) socket.emit(\"Location.Options.Set\", { fow_los: data.fowLOS });\n        }\n    }\n\n    @Mutation\n    setLocationName(name: string) {\n        this.locationName = name;\n    }\n\n    @Mutation\n    updateNote(data: { note: Note; sync: boolean }) {\n        const actualNote = this.notes.find(n => n.uuid === data.note.uuid);\n        if (actualNote === undefined) return;\n        actualNote.title = data.note.title;\n        actualNote.text = data.note.text;\n        if (data.sync) socket.emit(\"Note.Update\", actualNote);\n    }\n\n    @Mutation\n    removeNote(data: { note: Note; sync: boolean }) {\n        this.notes = this.notes.filter(n => n.uuid !== data.note.uuid);\n        if (data.sync) socket.emit(\"Note.Remove\", data.note.uuid);\n    }\n\n    @Action\n    clear() {\n        (<any>this.context.state).visionSources = [];\n        (<any>this.context.state).visionBlockers = [];\n        (<any>this.context.state).ownedtokens = [];\n        (<any>this.context.state).annotations = [];\n        (<any>this.context.state).movementblockers = [];\n        (<any>this.context.state).notes = [];\n        this.context.commit(\"recalculateVision\");\n        this.context.commit(\"recalculateMovement\");\n    }\n}\n\nexport const gameStore = getModule(GameStore);\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./confirm.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./confirm.vue?vue&type=script&lang=ts&\"","import { ServerAura } from \"@/game/comm/types/shapes\";\n\nexport const aurasFromServer = (auras: ServerAura[]): Aura[] => {\n    const result = [];\n    for (const aura of auras) {\n        result.push({\n            uuid: aura.uuid,\n            visionSource: aura.vision_source,\n            visible: aura.visible,\n            name: aura.name,\n            value: aura.value,\n            dim: aura.dim,\n            colour: aura.colour,\n        });\n    }\n    return result;\n};\n\nexport const aurasToServer = (auras: Aura[]): ServerAura[] => {\n    const result = [];\n    for (const aura of auras) {\n        result.push({\n            uuid: aura.uuid,\n            vision_source: aura.visionSource,\n            visible: aura.visible,\n            name: aura.name,\n            value: aura.value,\n            dim: aura.dim,\n            colour: aura.colour,\n        });\n    }\n    return result;\n};\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--12-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./contextMenu.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--12-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./contextMenu.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./note.vue?vue&type=template&id=7a3669fd&scoped=true&\"\nimport script from \"./note.vue?vue&type=script&lang=ts&\"\nexport * from \"./note.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./note.vue?vue&type=style&index=0&id=7a3669fd&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7a3669fd\",\n  null\n  \n)\n\ncomponent.options.__file = \"note.vue\"\nexport default component.exports","import { render, staticRenderFns } from \"./initiative.vue?vue&type=template&id=ccaf03d6&scoped=true&\"\nimport script from \"./initiative.vue?vue&type=script&lang=ts&\"\nexport * from \"./initiative.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./initiative.vue?vue&type=style&index=0&id=ccaf03d6&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"ccaf03d6\",\n  null\n  \n)\n\ncomponent.options.__file = \"initiative.vue\"\nexport default component.exports","import { ServerLayer } from \"@/game/comm/types/general\";\nimport { FOWLayer } from \"@/game/layers/fow\";\nimport { FOWPlayersLayer } from \"@/game/layers/fowplayers\";\nimport { GridLayer } from \"@/game/layers/grid\";\nimport { Layer } from \"@/game/layers/layer\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { gameStore } from \"@/game/store\";\n\nexport function createLayer(layerInfo: ServerLayer) {\n    // Create canvas element\n    const canvas = document.createElement(\"canvas\");\n    canvas.style.zIndex = layerManager.layers.length.toString();\n    canvas.width = window.innerWidth;\n    canvas.height = window.innerHeight;\n\n    // Create the Layer instance\n    let layer: Layer;\n    if (layerInfo.type_ === \"grid\") layer = new GridLayer(canvas, layerInfo.name);\n    else if (layerInfo.type_ === \"fow\") layer = new FOWLayer(canvas, layerInfo.name);\n    else if (layerInfo.type_ === \"fow-players\") layer = new FOWPlayersLayer(canvas, layerInfo.name);\n    else layer = new Layer(canvas, layerInfo.name);\n    layer.selectable = layerInfo.selectable;\n    layer.playerEditable = layerInfo.player_editable;\n    layerManager.addLayer(layer);\n\n    // Add the element to the DOM\n    const layers = document.getElementById(\"layers\");\n    if (layers === null) {\n        console.warn(\"Layers div is missing, this will prevent the main game board from loading!\");\n        return;\n    }\n    if (layerInfo.name !== \"fow-players\") layers.appendChild(canvas);\n\n    if (layerInfo.type_ === \"grid\" && layerInfo.size) gameStore.setGridSize({ gridSize: layerInfo.size, sync: false });\n    // Load layer shapes\n    layer.setShapes(layerInfo.shapes);\n}\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./edit_dialog.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./edit_dialog.vue?vue&type=script&lang=ts&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('form',{on:{\"focusin\":_vm.focusin,\"focusout\":_vm.focusout,\"submit\":function($event){$event.preventDefault();return _vm.login($event)}}},[_c('fieldset',[_c('legend',{staticClass:\"legend\"},[_vm._v(\"PlanarAlly\")]),_c('div',{staticClass:\"input\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.username),expression:\"username\"}],attrs:{\"type\":\"text\",\"name\":\"username\",\"placeholder\":\"Username\",\"autocomplete\":\"username\",\"required\":\"\"},domProps:{\"value\":(_vm.username)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.username=$event.target.value}}}),_vm._m(0)]),_c('div',{staticClass:\"input\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.password),expression:\"password\"}],attrs:{\"type\":\"password\",\"name\":\"password\",\"placeholder\":\"Password\",\"autocomplete\":\"current-password\",\"required\":\"\"},domProps:{\"value\":(_vm.password)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.password=$event.target.value}}}),_vm._m(1)]),_c('div',{staticStyle:{\"display\":\"flex\"}},[_c('button',{staticStyle:{\"visibility\":\"hidden\",\"display\":\"none\"},attrs:{\"type\":\"submit\",\"name\":\"login\"}}),_c('button',{staticClass:\"submit\",attrs:{\"type\":\"button\",\"name\":\"register\",\"title\":\"Register\"},on:{\"click\":_vm.register}},[_c('i',{staticClass:\"fas fa-plus\"})]),_vm._m(2)])]),(_vm.error)?_c('div',{staticClass:\"feedback\"},[_c('p',{staticClass:\"error\"},[_c('strong',[_vm._v(\"Error:\")]),_vm._v(\"\\n      \"+_vm._s(_vm.error)+\"\\n    \")])]):_vm._e()])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',[_c('i',{staticClass:\"fas fa-user-circle\"})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',[_c('i',{staticClass:\"fas fa-lock\"})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('button',{staticClass:\"submit\",attrs:{\"type\":\"submit\",\"name\":\"login\",\"title\":\"Login\"}},[_c('i',{staticClass:\"fas fa-arrow-right\"})])}]\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"74f43d04-vue-loader-template\\\"}!../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./login.vue?vue&type=template&id=bc30fc14&scoped=true&\"","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\n\nimport Prompt from \"@/core/components/modals/prompt.vue\";\nimport EditDialog from \"@/game/ui/selection/edit_dialog.vue\";\n\nimport { getRef } from \"@/core/utils\";\nimport { socket } from \"@/game/api/socket\";\nimport { EventBus } from \"@/game/event-bus\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { Shape } from \"@/game/shapes/shape\";\n\n@Component({\n    components: {\n        \"edit-dialog\": EditDialog,\n    },\n})\nexport default class SelectionInfo extends Vue {\n    shape: Shape | null = null;\n\n    mounted() {\n        EventBus.$on(\"SelectionInfo.Shape.Set\", (shape: Shape | null) => {\n            this.shape = shape;\n        });\n    }\n\n    beforeDestroy() {\n        EventBus.$off();\n    }\n\n    openEditDialog() {\n        (<any>this.$refs.editDialog).visible = true;\n    }\n    changeValue(object: Tracker | Aura, redraw: boolean) {\n        if (this.shape === null) return;\n        getRef<Prompt>(\"prompt\")\n            .prompt(`New  ${object.name} value:`, `Updating ${object.name}`)\n            .then(\n                (value: string) => {\n                    if (this.shape === null) return;\n                    const ogValue = object.value;\n                    if (value[0] === \"+\" || value[0] === \"-\") object.value += parseInt(value, 10);\n                    else object.value = parseInt(value, 10);\n                    if (isNaN(object.value)) object.value = ogValue;\n                    socket.emit(\"Shape.Update\", { shape: this.shape.asDict(), redraw, temporary: false });\n                    if (redraw) layerManager.invalidate();\n                },\n                () => {},\n            );\n    }\n}\n","import { AssetList } from \"@/core/comm/types\";\nimport { socket } from \"@/game/api/socket\";\nimport { BoardInfo, Note, ServerClient, ServerLocation } from \"@/game/comm/types/general\";\nimport { ServerShape } from \"@/game/comm/types/shapes\";\nimport { EventBus } from \"@/game/event-bus\";\nimport { GlobalPoint } from \"@/game/geom\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { createLayer } from \"@/game/layers/utils\";\nimport { gameManager } from \"@/game/manager\";\nimport { gameStore } from \"@/game/store\";\nimport { router } from \"@/router\";\n\nsocket.on(\"connect\", () => {\n    console.log(\"Connected\");\n});\nsocket.on(\"disconnect\", () => {\n    console.log(\"Disconnected\");\n});\nsocket.on(\"connect_error\", (error: any) => {\n    console.error(\"Could not connect to game session.\");\n    router.push(\"/dashboard\");\n});\nsocket.on(\"error\", (error: any) => {\n    console.error(\"Game session does not exist.\");\n    router.push(\"/dashboard\");\n});\nsocket.on(\"redirect\", (destination: string) => {\n    console.log(\"redirecting\");\n    router.push(destination);\n});\nsocket.on(\"Room.Info.Set\", (data: { name: string; creator: string; invitationCode: string }) => {\n    gameStore.setRoomName(data.name);\n    gameStore.setRoomCreator(data.creator);\n    gameStore.setInvitationCode(data.invitationCode);\n});\nsocket.on(\"Username.Set\", (username: string) => {\n    gameStore.setUsername(username);\n    gameStore.setDM(username === window.location.pathname.split(\"/\")[2]);\n});\nsocket.on(\"Client.Options.Set\", (options: ServerClient) => {\n    gameStore.setGridColour({ colour: options.grid_colour, sync: false });\n    gameStore.setFOWColour({ colour: options.fow_colour, sync: false });\n    gameStore.setRulerColour({ colour: options.ruler_colour, sync: false });\n    gameStore.setPanX(options.pan_x);\n    gameStore.setPanY(options.pan_y);\n    gameStore.setZoomFactor(options.zoom_factor);\n    if (options.active_layer) layerManager.selectLayer(options.active_layer, false);\n    if (layerManager.getGridLayer() !== undefined) layerManager.getGridLayer()!.invalidate();\n});\nsocket.on(\"Location.Set\", (data: Partial<ServerLocation>) => {\n    if (data.name !== undefined) gameStore.setLocationName(data.name);\n    if (data.unit_size !== undefined) gameStore.setUnitSize({ unitSize: data.unit_size, sync: false });\n    if (data.use_grid !== undefined) gameStore.setUseGrid({ useGrid: data.use_grid, sync: false });\n    if (data.full_fow !== undefined) gameStore.setFullFOW({ fullFOW: data.full_fow, sync: false });\n    if (data.fow_opacity !== undefined) gameStore.setFOWOpacity({ fowOpacity: data.fow_opacity, sync: false });\n    if (data.fow_los !== undefined) gameStore.setLineOfSight({ fowLOS: data.fow_los, sync: false });\n    if (data.vision_min_range !== undefined) gameStore.setVisionRangeMin({ value: data.vision_min_range, sync: false });\n    if (data.vision_max_range !== undefined) gameStore.setVisionRangeMax({ value: data.vision_max_range, sync: false });\n    if (data.vision_mode !== undefined) {\n        gameStore.setVisionMode({ mode: data.vision_mode, sync: false });\n        gameStore.recalculateVision();\n        gameStore.recalculateMovement();\n    }\n});\nsocket.on(\"Position.Set\", (data: { x: number; y: number }) => {\n    gameManager.setCenterPosition(new GlobalPoint(data.x, data.y));\n});\nsocket.on(\"Notes.Set\", (notes: Note[]) => {\n    for (const note of notes) gameStore.newNote({ note, sync: false });\n});\nsocket.on(\"Asset.List.Set\", (assets: AssetList) => {\n    gameStore.setAssets(assets);\n});\nsocket.on(\"Board.Set\", (locationInfo: BoardInfo) => {\n    gameStore.clear();\n    gameStore.setLocations(locationInfo.locations);\n    document.getElementById(\"layers\")!.innerHTML = \"\";\n    gameStore.resetLayerInfo();\n    layerManager.reset();\n    for (const layer of locationInfo.layers) createLayer(layer);\n    // Force the correct opacity render on other layers.\n    layerManager.selectLayer(layerManager.getLayer()!.name, false);\n    EventBus.$emit(\"Initiative.Clear\");\n    gameStore.recalculateVision();\n    gameStore.recalculateMovement();\n    gameStore.setBoardInitialized(true);\n});\nsocket.on(\"Gridsize.Set\", (gridSize: number) => {\n    gameStore.setGridSize({ gridSize, sync: false });\n});\nsocket.on(\"Shape.Add\", (shape: ServerShape) => {\n    gameManager.addShape(shape);\n});\nsocket.on(\"Shape.Remove\", (shape: ServerShape) => {\n    if (!layerManager.UUIDMap.has(shape.uuid)) {\n        console.log(`Attempted to remove an unknown shape`);\n        return;\n    }\n    if (!layerManager.hasLayer(shape.layer)) {\n        console.log(`Attempted to remove shape from an unknown layer ${shape.layer}`);\n        return;\n    }\n    const layer = layerManager.getLayer(shape.layer)!;\n    layer.removeShape(layerManager.UUIDMap.get(shape.uuid)!, false);\n    layer.invalidate(false);\n});\nsocket.on(\"Shape.Order.Set\", (data: { shape: ServerShape; index: number }) => {\n    if (!layerManager.UUIDMap.has(data.shape.uuid)) {\n        console.log(`Attempted to move the shape order of an unknown shape`);\n        return;\n    }\n    if (!layerManager.hasLayer(data.shape.layer)) {\n        console.log(`Attempted to remove shape from an unknown layer ${data.shape.layer}`);\n        return;\n    }\n    const shape = layerManager.UUIDMap.get(data.shape.uuid)!;\n    const layer = layerManager.getLayer(shape.layer)!;\n    layer.moveShapeOrder(shape, data.index, false);\n});\nsocket.on(\"Shape.Layer.Change\", (data: { uuid: string; layer: string }) => {\n    const shape = layerManager.UUIDMap.get(data.uuid);\n    if (shape === undefined) return;\n    shape.moveLayer(data.layer, false);\n});\nsocket.on(\"Shape.Update\", (data: { shape: ServerShape; redraw: boolean; move: boolean }) => {\n    gameManager.updateShape(data);\n});\nsocket.on(\"Temp.Clear\", (shapes: ServerShape[]) => {\n    shapes.forEach(shape => {\n        if (!layerManager.UUIDMap.has(shape.uuid)) {\n            console.log(\"Attempted to remove an unknown temporary shape\");\n            return;\n        }\n        if (!layerManager.hasLayer(shape.layer)) {\n            console.log(`Attempted to remove shape from an unknown layer ${shape.layer}`);\n            return;\n        }\n        const realShape = layerManager.UUIDMap.get(shape.uuid)!;\n        layerManager.getLayer(shape.layer)!.removeShape(realShape, false);\n    });\n});\n"],"sourceRoot":""}