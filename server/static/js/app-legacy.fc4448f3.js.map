{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/game/shapes/text.ts","webpack:///./src/game/ui/selection/shapecontext.vue","webpack:///./src/App.vue?5b85","webpack:///./src/core/components/modals/prompt.vue?d33d","webpack:///./src/core/components/colorpicker.vue?4d88","webpack:///./src/game/game.vue","webpack:///./src/game/api/socket.ts","webpack:///./src/assetManager/manager.vue?5633","webpack:///./src/game/ui/menu/asset_node.vue","webpack:///./src/auth/login.vue","webpack:///./src/game/ui/initiative.vue?b24a","webpack:///./src/game/ui/initiative.vue?fb8b","webpack:///./src/game/visibility/te/draw.ts","webpack:///./src/core/components/accordion.vue","webpack:///./src/game/ui/tools/tool.vue?5b17","webpack:///./src/game/shapes/circulartoken.ts","webpack:///./src/game/ui/annotation.ts","webpack:///./src/game/ui/menu/menu.vue","webpack:///./src/core/components/contextmenu.vue","webpack:///./src/game/ui/note.vue?49b7","webpack:///./src/auth/login.vue?c159","webpack:///./src/game/ui/labels.vue?da86","webpack:///./src/game/ui/labels.vue?1ecb","webpack:///./src/game/shapes/utils.ts","webpack:///./src/game/ui/dmsettings.vue?f205","webpack:///./src/core/components/modals/confirm.vue?e6fb","webpack:///./src/game/ui/dmsettings.vue?a899","webpack:///./src/game/ui/dmsettings.vue?814f","webpack:///./src/game/shapes/shape.ts","webpack:///./src/core/components/modals/prompt.vue?d457","webpack:///./src/game/ui/menu/menu.vue?5c18","webpack:///./src/game/ui/menu/menu.vue?44af","webpack:///./src/game/ui/note.vue?e0e5","webpack:///./src/game/ui/note.vue?23aa","webpack:///./src/game/ui/tools/select.vue?49f9","webpack:///./src/game/ui/dmsettings.vue?fed3","webpack:///./src/game/ui/tools/utils.ts","webpack:///./src/game/ui/note.vue?a508","webpack:///./src/core/components/inputCopy.vue?4a5e","webpack:///./src/game/ui/labels.vue?15af","webpack:///./src/game/ui/tools/vision.vue?4f0c","webpack:///./src/game/api/utils.ts","webpack:///./src/game/ui/menu/asset_node.vue?f519","webpack:///./src/core/components/colorpicker.vue?893c","webpack:///./src/core/components/contextmenu.vue?113a","webpack:///./src/core/components/contextmenu.vue?7efa","webpack:///./src/assetManager/store.ts","webpack:///./src/core/components/contextmenu.vue?50e1","webpack:///./src/game/ui/selection/shapecontext.vue?1cf6","webpack:///./src/game/ui/menu/menu.vue?b354","webpack:///./src/core/components/inputCopy.vue?f87b","webpack:///./src/game/ui/tools/map.vue?284a","webpack:///./src/assetManager/contextMenu.vue?c688","webpack:///./src/assetManager/contextMenu.vue?bce4","webpack:///./src/game/layers/grid.ts","webpack:///./src/core/components/colorpicker.vue?5bf8","webpack:///./src/core/components/colorpicker.vue?7374","webpack:///./src/store.ts","webpack:///./src/core/components/colorpicker.vue","webpack:///./src/game/ui/tools/vision.vue?48bb","webpack:///./src/auth/login.vue?3521","webpack:///./src/App.vue?5130","webpack:///./src/App.vue","webpack:///./src/game/layers/fow.ts","webpack:///./src/core/components/load.vue?18c2","webpack:///./src/game/ui/selection/edit_dialog.vue?b816","webpack:///./src/game/ui/selection/edit_dialog.vue?6334","webpack:///./src/game/shapes/circle.ts","webpack:///./src/game/ui/tools/map.vue?a3ab","webpack:///./src/core/components/load.vue","webpack:///./src/game/ui/tools/pan.ts","webpack:///./src/game/ui/tools/selectcontext.vue","webpack:///./src/core/utils.ts","webpack:///./src/assetManager/contextMenu.vue","webpack:///./src/game/visibility/te/triag.ts","webpack:///./src/game/ui/tools/select.vue?a7ff","webpack:///./src/game/ui/tools/select.vue?7da2","webpack:///./src/game/ui/menu/asset_node.vue?1f27","webpack:///./src/game/ui/tools/selectcontext.vue?d72f","webpack:///./src/game/ui/tools/selectcontext.vue?3109","webpack:///./src/game/ui/tools/vision.vue?d25b","webpack:///./src/game/ui/selection/edit_dialog.vue?1206","webpack:///./src/core/components/modals/modal.vue?44ae","webpack:///./src/assetManager/socket.ts","webpack:///./src/game/ui/tools/filter.vue?ee60","webpack:///./src/core/components/accordion.vue?3e09","webpack:///./src/game/ui/tools/vision.vue?07fd","webpack:///./src/game/ui/tools/vision.vue?9b57","webpack:///./src/game/ui/tools/selectcontext.vue?6c84","webpack:///./src/game/game.vue?5550","webpack:///./src/game/shapes/multiline.ts","webpack:///./src/game/ui/tools/draw.vue","webpack:///./src/game/utils.ts","webpack:///./src/game/ui/tools/createtoken_modal.vue?d0df","webpack:///./src/game/ui/note.vue?f9bd","webpack:///./src/game/ui/tools/draw.vue?b96d","webpack:///./src/game/shapes/line.ts","webpack:///./src/router.ts","webpack:///./src/game/ui/tools/tool.vue?d136","webpack:///./src/game/ui/tools/tools.vue","webpack:///./src/game/ui/tools/tool.vue?8ce3","webpack:///./src/game/game.vue?dae5","webpack:///./src/game/game.vue?5780","webpack:///./src/core/components/inputCopy.vue?e1ee","webpack:///./src/core/components/inputCopy.vue?0a6a","webpack:///./src/game/shapes/asset.ts","webpack:///./src/core/components/inputCopy.vue","webpack:///./src/game/visibility/te/cdt.ts","webpack:///./src/game/ui/tools/draw.vue?1261","webpack:///./src/game/layers/manager.ts","webpack:///./src/game/ui/initiative.vue?c7e1","webpack:///./src/game/ui/tools/createtoken_modal.vue","webpack:///./src/game/visibility/bvh/node.ts","webpack:///./src/game/ui/tools/createtoken_modal.vue?f918","webpack:///./src/game/events/keyboard.ts","webpack:///./src/assetManager/manager.vue?433f","webpack:///./src/game/ui/tools/tools.vue?25b2","webpack:///./src/game/ui/selection/selection_info.vue?2310","webpack:///./src/core/components/modals/modal.vue?09d2","webpack:///./src/game/ui/labels.vue?e465","webpack:///./src/core/components/contextmenu.vue?a0a2","webpack:///./src/core/components/modals/prompt.vue?4e1b","webpack:///./src/core/components/accordion.vue?3d26","webpack:///./src/core/components/load.vue?14cd","webpack:///./src/core/components/load.vue?0f87","webpack:///./src/game/ui/menu/menu.vue?8b23","webpack:///./src/game/shapes/boundingrect.ts","webpack:///./src/dashboard/main.vue?744b","webpack:///./src/dashboard/main.vue?94d1","webpack:///./src/game/geom.ts","webpack:///./src/game/ui/menu/asset_node.vue?61d2","webpack:///./src/game/ui/menu/asset_node.vue?3fe9","webpack:///./src/game/ui/initiative.vue?ebca","webpack:///./src/core/components/inputCopy.vue?946f","webpack:///./src/game/game.vue?5592","webpack:///./src/game/units.ts","webpack:///./src/game/ui/menu/menu.vue?ae57","webpack:///./src/core/components/colorpicker.vue?1682","webpack:///./src/game/visibility/te/tds.ts","webpack:///./src/game/visibility/bvh/bvh.ts","webpack:///./src/game/ui/tools/filter.vue?1da1","webpack:///./src/game/manager.ts","webpack:///./src/game/ui/menu/asset_node.vue?0d0e","webpack:///./src/core/components/modals/modal.vue?9335","webpack:///./src/game/ui/tools/vision.vue","webpack:///./src/core/components/load.vue?8cd0","webpack:///./src/dashboard/main.vue?3f72","webpack:///./src/core/components/modals/confirm.vue","webpack:///./src/game/ui/selection/shapecontext.vue?aac0","webpack:///./src/game/ui/selection/shapecontext.vue?c203","webpack:///./src/assetManager/manager.vue?a11e","webpack:///./src/game/ui/tools/draw.vue?4795","webpack:///./src/game/event-bus.ts","webpack:///./src/game/ui/tools/draw.vue?5bb3","webpack:///./src/game/ui/tools/draw.vue?766c","webpack:///./src/dashboard/main.vue?d5a9","webpack:///./src/game/shapes/rect.ts","webpack:///./src/game/ui/tools/filter.vue?b0f4","webpack:///./src/game/ui/tools/selectcontext.vue?6f66","webpack:///./src/game/layers/fowplayers.ts","webpack:///./src/game/layers/layer.ts","webpack:///./src/game/events/mouse.ts","webpack:///./src/game/ui/tools/filter.vue","webpack:///./src/game/shapes/baserect.ts","webpack:///./src/game/ui/tools/select.vue","webpack:///./src/game/ui/selection/selection_info.vue?1f2b","webpack:///./src/dashboard/main.vue","webpack:///./src/game/ui/tools/createtoken_modal.vue?6f0b","webpack:///./src/assetManager/manager.vue?fbc6","webpack:///./src/assetManager/manager.vue?a045","webpack:///./src/game/ui/tools/selectcontext.vue?d61f","webpack:///./src/auth/logout.ts","webpack:///./src/core/store.ts","webpack:///./src/main.ts","webpack:///./src/core/components/contextmenu.vue?f402","webpack:///./src/invitation/invitation.ts","webpack:///./src/core/components/modals/prompt.vue","webpack:///./src/game/visibility/te/te.ts","webpack:///./src/game/ui/tools/map.vue?ed09","webpack:///./src/game/ui/tools/map.vue?7f60","webpack:///./src/game/ui/selection/edit_dialog.vue","webpack:///./src/core/components/modals/modal.vue?c616","webpack:///./src/core/components/modals/modal.vue?12fd","webpack:///./src/game/settings.ts","webpack:///./src/auth/login.vue?283c","webpack:///./src/game/ui/tools/createtoken_modal.vue?4595","webpack:///./src/game/ui/tools/createtoken_modal.vue?5fcc","webpack:///./src/game/ui/tools/tool.vue?780b","webpack:///./src/game/ui/tools/tool.vue?f5ba","webpack:///./src/game/game.vue?d01c","webpack:///./src/game/ui/tools/ruler.ts","webpack:///./src/core/components/modals/modal.vue","webpack:///./src/core/components/accordion.vue?4b34","webpack:///./src/game/visibility/te/pa.ts","webpack:///./src/game/ui/tools/tools.vue?4580","webpack:///./src/dashboard/main.vue?1359","webpack:///./src/game/ui/selection/edit_dialog.vue?9a84","webpack:///./src/game/ui/selection/shapecontext.vue?3e44","webpack:///./src/game/ui/selection/shapecontext.vue?9807","webpack:///./src/core/components/modals/confirm.vue?f9ee","webpack:///./src/game/ui/dmsettings.vue?7896","webpack:///./src/game/ui/tools/map.vue","webpack:///./src/core/components/accordion.vue?ada1","webpack:///./src/core/components/accordion.vue?6229","webpack:///./src/core/components/modals/confirm.vue?cfcf","webpack:///./src/core/components/modals/confirm.vue?be48","webpack:///./src/game/ui/dmsettings.vue","webpack:///./src/assetManager/contextMenu.vue?1b1b","webpack:///./src/game/ui/tools/select.vue?b7fd","webpack:///./src/game/ui/tools/filter.vue?6447","webpack:///./src/game/ui/labels.vue?8d8f","webpack:///./src/game/shapes/polygon.ts","webpack:///./src/game/game.vue?4949","webpack:///./src/game/ui/selection/selection_info.vue?df44","webpack:///./src/game/ui/selection/selection_info.vue?928f","webpack:///./src/game/ui/tools/filter.vue?fb4f","webpack:///./src/game/ui/tools/filter.vue?fa63","webpack:///./src/assetManager/manager.vue","webpack:///./src/game/ui/tools/tools.vue?fa4a","webpack:///./src/game/ui/tools/tool.vue","webpack:///./src/core/components/modals/prompt.vue?29b4","webpack:///./src/core/components/modals/prompt.vue?36e2","webpack:///./src/game/ui/initiative.vue?36c8","webpack:///./src/game/ui/selection/selection_info.vue","webpack:///./src/game/store.ts","webpack:///./src/core/components/modals/confirm.vue?a22f","webpack:///./src/game/comm/conversion/aura.ts","webpack:///./src/assetManager/contextMenu.vue?1e9a","webpack:///./src/game/ui/note.vue","webpack:///./src/game/ui/initiative.vue","webpack:///./src/game/layers/utils.ts","webpack:///./src/game/ui/labels.vue","webpack:///./src/game/ui/selection/edit_dialog.vue?3800","webpack:///./src/game/ui/tools/tools.vue?28f3","webpack:///./src/game/ui/tools/tools.vue?c2f7","webpack:///./src/auth/login.vue?d700","webpack:///./src/auth/login.vue?8f9e","webpack:///./src/game/ui/selection/selection_info.vue?5d62","webpack:///./src/game/api/events.ts"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","installedChunks","push","Object","prototype","hasOwnProperty","call","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","app","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","boundingrect_1","shape_1","units_1","Text","Shape","[object Object]","position","text","font","angle","fillColour","strokeColour","uuid","super","this","type","assign","getBaseDict","points","refPoint","x","y","BoundingRect","ctx","draw","fillStyle","save","dest","g2l","translate","rotate","textAlign","getLines","map","line","fillText","restore","point","centerPoint","canvas","getBoundingBox","visibleInCanvas","resizePoint","lines","lineHeight","widths","measureText","width","Math","max","split","allLines","maxWidth","targetLine","words","word","testLine","metrics","testWidth","__webpack_exports__","_shapecontext_vue_vue_type_template_id_6c66d243_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_shapecontext_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","__WEBPACK_IMPORT_KEY__","_node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_3__","component","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_App_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_App_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_prompt_vue_vue_type_style_index_0_id_0602c2e6_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_prompt_vue_vue_type_style_index_0_id_0602c2e6_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","tinycolor2_1","tslib_1","__importDefault","vue_1","vue_class_component_1","vue_color_1","vue_property_decorator_1","ColorPicker","default","display","left","top","transparent","$refs","chromePicker","val","rgba","a","setPosition","disabled","$nextTick","$children","$el","focus","newColor","toRgbString","$emit","color","rect","getBoundingClientRect","right","innerWidth","bottom","innerHeight","__decorate","Prop","String","Boolean","components","chrome-picker","Chrome","_game_vue_vue_type_template_id_3d0578ba_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_game_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","_node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_4__","socket_io_client_1","createConnection","route","socket","io","opts","query","params","creator","room","connect","location","protocol","host","autoConnect","contextMenu_vue_1","confirm_vue_1","prompt_vue_1","socket_1","store_1","utils_1","AssetManager","path","draggingSelection","folders","assetStore","files","selected","idMap","currentFolder","root","parentFolder","parent","undefined","firstSelectedFile","sel","file_hash","nextFolder","pop","clearSelected","emit","prompt","inode","target","includes","indexOf","delete","event","shiftKey","inodes","start","end","ctrlKey","file","dataTransfer","setData","dropEffect","classList","contains","add","remove","moveInode","upload","document","getElementById","click","fls","CHUNK_SIZE","uuidv4","slices","ceil","size","fr","FileReader","readAsArrayBuffer","min","onload","e","directory","totalSlices","Prompt","ConfirmDialog","AssetContextMenu","to","from","next","disconnect","_asset_node_vue_vue_type_template_id_6d718094_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_asset_node_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","_login_vue_vue_type_template_id_bc30fc14_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_login_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","render","_vm","_h","$createElement","_c","_self","attrs","visible","mask","on","close","$event","scopedSlots","_u","fn","staticClass","draggable","dragstart","dragStart","dragend","dragEnd","_v","id","fakeSetData","$store","state","game","IS_DM","change","updateOrder","model","callback","$$v","expression","_l","actor","staticStyle","flex-direction","align-items","class","initiative-selected","currentActor","style","cursor","mouseenter","toggleHighlight","mouseleave","src","source","height","_s","directives","rawName","modifiers","lazy","number","notAllowed","owns","placeholder","domProps","$set","_n","syncInitiative","blur","$forceUpdate","opacity","createEffect","getDefaultEffect","effects","toggleOption","group","removeInitiative","effect","updateEffect","input","composing","turns","toString","_e","roundCounter","visionLock","toggleVisionLock","cameraLock","setRound","updateTurn","nextTurn","staticRenderFns","manager_1","tds_1","triag_1","drawPoint","colour","dl","layerManager","getLayer","lineJoin","strokeStyle","random","moveTo","g2lx","g2ly","beginPath","arc","PI","closePath","stroke","drawPolygon","polygon","lineTo","drawPolygonL","xx","local","yy","I","J","drl","constrained","drawPolygonT","tds","clear","logs","T","clearRect","ei","EdgeIterator","valid","collect","fromP","edge","first","vertices","ccw","second","toP","cw","Infinity","constraints","console","log","uid","pos","triangles","isInfinite","po","fill","DC","DP","DPL","DPT","_accordion_vue_vue_type_template_id_0bf2b7ba_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_accordion_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_tool_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_tool_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default","tinycolor","__importStar","circle_1","CircularToken","Circle","center","radius","fromDict","textBaseline","xs","calcFontScale","g2lz","ys","transform","mostReadable","toHexString","gameStore","has_img","index","geom_1","rect_1","text_1","AnnotationManager","shown","origin","GlobalPoint","annotationText","annotationRect","Rect","layer","hasLayer","warn","addShape","l2g","LocalPoint","getMaxWidth","getMaxHeight","w","zoomFactor","h","invalidate","_menu_vue_vue_type_template_id_c7fe324c_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_menu_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","_contextmenu_vue_vue_type_template_id_256dde9c___WEBPACK_IMPORTED_MODULE_0__","_contextmenu_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_note_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_note_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_login_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_login_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","title","margin","ref","search","category","labels","label","selectLabel","lower-opacity","stopPropagation","toggleVisibility","deleteLabel","trim","newCategory","newName","addLabel","asset_1","circulartoken_1","line_1","multiline_1","polygon_1","createShapeFromDict","shape","sh","type_","fill_colour","stroke_colour","circ","token","Line","x2","y2","line_width","multiline","MultiLine","Polygon","v","asset","img","Image","startsWith","URL","pathname","Asset","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_dmsettings_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_dmsettings_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_confirm_vue_vue_type_style_index_0_id_1883e207_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_confirm_vue_vue_type_style_index_0_id_1883e207_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","handleClick","selection","player","kickPlayer","values","players","refreshState","invitationUrl","refreshInviteCode","toggleSessionLock","deleteSession","for","checked","Array","isArray","useGrid","_i","$$a","$$el","$$c","$$i","concat","gridSize","unitSize","fakePlayer","fullFOW","fowLOS","step","fowOpacity","changeVisionMode","visionMode","visionRangeMin","visionRangeMax","aura_1","pa_1","nameVisible","trackers","auras","_owners","visionObstruction","movementObstruction","isToken","showHighlight","annotation","globalCompositeOperation","options","Map","_refPoint","delta","idx","entries","abs","prev","fromArray","vec","subtract","mid","multiply","normalize","skipLightUpdate","recalculate","alteredVision","self","obstructionIndex","visionBlockers","addToTriag","TriangulationTarget","VISION","deleteFromTriag","standalone","forEach","au","ls","visionSources","findIndex","aura","visionSource","some","blocksMovement","movementblockers","alteredMovement","MOVEMENT","ownedBy","ownedtokens","draw_operator","movement_obstruction","vision_obstruction","aurasToServer","owners","name_visible","is_token","JSON","stringify","aurasFromServer","parse","bbox","strokeRect","topLeft","dim","loc","innerRange","g2lr","gradient","createRadialGradient","tc","addColorStop","setAlpha","lastPath","sync","oldLayer","newLayer","shapes","freeze","username","FAKE_PLAYER","activeTokens","owner","oldValue","newValue","ownerIndex","addOwner","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_prompt_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_prompt_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","settings","locations","rm-list-dm","_m","enter","rm","transition","settingsClick","overflow-y","overflow-x","href","assets","createNote","note","openNote","notes","openDmSettings","gridColour","update:color","fowColour","rulerColour","text-decoration","changeLocation","createLocation","select","font-size","updateNote","calcHeight","removeNote","selectcontext_vue_1","tool_vue_1","utils_2","utils_3","SelectOperations","SelectTool","showContextMenu","active","Noop","deltaChanged","dragRay","Ray","Vector","selectionStartPoint","selectionHelper","mouse","getMouse","globalMouse","selectionStack","hit","getPointIndex","l2gz","getRef","Resize","Drag","localRefPoint","GroupSelect","endPoint","og","direction","ogDelta","calculateDelta","asDict","redraw","temporary","resize","updateCursor","body","clearSelection","topRight","botLeft","altKey","snapToGrid","$parent","shapecontext","open","selectcontext","getPointOrientation","SelectContext","vuex_1","inputCopy_vue_1","modal_vue_1","event_bus_1","DmSettings","categories","showRefreshState","EventBus","$on","$off","invitationCode","locked","isLocked","setUseGrid","setUnitSize","setGridSize","setFakePlayer","setFullFOW","setFOWOpacity","setLineOfSight","setVisionRangeMin","setVisionRangeMax","toLowerCase","setVisionMode","recalculateVision","recalculateMovement","child","firstElementChild","HTMLInputElement","setIsLocked","roomCreator","roomName","then","$router","InputCopyElement","Modal","computed","mapState","done","ogSelBBox","newSelBBox","offset","refine","movementBlocker","blocker","UUIDMap","blockerBBox","found","intersectsWithInner","ray","fromPoints","invDir","inverse","dirIsNegative","intersectP","bCenter","sCenter","ux","uy","dx","dot","dy","centerTriangle","PA_CDT","movement","locate","asArray","lt","triangle","checkTriangle","skip","endpoint","neighbours","_cw","_ccw","ix","intersection","isConstrained","orientation","Sign","LEFT_TURN","ZERO","newDelta","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_note_vue_vue_type_style_index_0_id_7a3669fd_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_note_vue_vue_type_style_index_0_id_7a3669fd_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_inputCopy_vue_vue_type_style_index_0_id_20bfdb3e_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_inputCopy_vue_vue_type_style_index_0_id_20bfdb3e_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_labels_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_labels_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_vision_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_vision_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","sendClientOptions","locationOptions","panX","panY","AssetNode","showImage","keys","filter","el","sort","alphSort","__files","b","children","imageSource","querySelector","setDragImage","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_colorpicker_vue_vue_type_style_index_0_id_f8744d60_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_colorpicker_vue_vue_type_style_index_0_id_f8744d60_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","tabindex","_t","vuex_module_decorators_1","AssetStore","VuexModule","Mutation","Module","dynamic","store","rootStore","namespaced","getModule","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_contextmenu_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_contextmenu_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","contextmenu_vue_1","ShapeContext","activeLayer","pageX","pageY","layers","selectable","playerEditable","moveLayer","getActiveLayer","moveShapeOrder","initiative","addInitiative","getInitiativeRepr","ContextMenu","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_menu_vue_vue_type_style_index_0_id_c7fe324c_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_menu_vue_vue_type_style_index_0_id_c7fe324c_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","borderColour","popupString","showPopup","navigator","clipboard","writeText","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_map_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_map_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","rename","layer_1","GridLayer","Layer","doClear","drawGrid","gs","lineWidth","currentTarget","closePicker","z-index","updateColor","use","Store","_colorpicker_vue_vue_type_template_id_f8744d60_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_colorpicker_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","VisionTool","tokens","removeActiveToken","addActiveToken","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_login_vue_vue_type_style_index_0_id_bc30fc14_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_login_vue_vue_type_style_index_0_id_bc30fc14_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","script","componentNormalizer","settings_1","te_1","FOWLayer","isVisionLayer","preFogShapes","virtualCanvas","createElement","vCtx","getContext","has","removeShape","Settings","skipLightFOW","originalOperation","dctx","drawAngleLines","drawFirstLightHit","bb","lcenter","alm","light","find","auraLength","getUnitDistance","auraCircle","lastArcAngle","Path2D","firstPoint","angleSteps","anglePoint","cos","sin","lightRay","hitResult","BV","intersect","computeVisibility","drawImage","preShape","ogComposite","getFogColour","fillRect","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_load_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_load_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","grid-column","owned","updateShape","grid-column-start","setToken","setVisionBlocker","setMovementBlocker","updateOwner","gridColumnStart","removeOwner","tracker","removeTracker","updateAuraColour","updateAuraVisionSource","removeAura","removeLabel","openLabelManager","updateAnnotation","pow","targetX","targetY","round","diff","sqrt","baserect_1","MapTool","xCount","yCount","startPoint","clone","BaseRect","_load_vue_vue_type_template_id_ff095222___WEBPACK_IMPORTED_MODULE_0__","_load_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","_node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_2__","PanTool","panStart","distance","increasePanX","increasePanY","_selectcontext_vue_vue_type_template_id_2e7d4582_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_selectcontext_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","main_1","replace","capitalize","charAt","toUpperCase","getHTMLFont","element","parentElement","getComputedStyle","getPropertyValue","getHTMLTextWidth","fakeElement","appendChild","partition","arr","predicate","ret","Number","fontWidth","fixedEncodeURIComponent","str","encodeURIComponent","charCodeAt","OrderedMap","getComponent","activeComponent","_contextMenu_vue_vue_type_template_id_dbbd4d08___WEBPACK_IMPORTED_MODULE_0__","_contextMenu_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","edgeInfo","va","vb","ec","EdgeCirculator","indv","indexV","ri","infinite","vi","orient","COLLINEAR","collinearBetween","q","cPQ","cQR","compare","EQUAL","SMALLER","LARGER","px","py","qx","qy","rx","ry","pqx","pqy","prx","pry","det","determinant","maxX","maxY","aprX","aprY","eps","EPSILON","POSITIVE","NEGATIVE","a00","a01","a10","a11","hasInexactNegativeOrientation","sideOfOrientedCircle","perturb","sideOfOrientedCircleP","Error","p0","p1","p2","os","getOrientedSide","ON_ORIENTED_BOUNDARY","reverse","ON_NEGATIVE_SIDE","xyEqual","xySmaller","xyCompare","qpx","qpy","rpx","rpy","tpx","tpy","tqx","tqy","rqx","rqy","maxx","maxy","arpx","arpy","atqx","atqy","atpx","atpy","arqx","arqy","ON_POSITIVE_SIDE","segSegDoIntersectCrossing","p3","p4","RIGHT_TURN","segSegDoIntersectContained","pa","pb","pc","pd","getIntersectionType","intersectionType","IntersectionType","POINT","NO_INTERSECTION","getLine","doIntersect","l1","l2","info","getIntersectionTypeLine","la","lb","denom","nom1","nom2","A1","A2","B1","B2","nextUp","MAX_VALUE","MIN_VALUE","ulp","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_asset_node_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_asset_node_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","bringPlayers","createToken","showInitiative","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_vision_vue_vue_type_style_index_0_id_46baf892_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_vision_vue_vue_type_style_index_0_id_46baf892_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_edit_dialog_vue_vue_type_style_index_0_id_23de098e_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_edit_dialog_vue_vue_type_style_index_0_id_23de098e_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","positioned","offsetX","offsetY","screenX","screenY","dragging","updatePosition","container","offsetWidth","offsetHeight","clientX","clientY","parseInt","destination","setRoot","folder","set","accordion_vue_1","FilterTool","cat","","localeCompare","initalValues","labelFilters","f","toggleUnlabeledFilter","_","accordion","Accordion","initialValues","updateCategory","overall","items","indeterminate","item","--detailRight","detailRight","--detailArrow","detailArrow","toggle","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_selectcontext_vue_vue_type_style_index_0_id_2e7d4582_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_selectcontext_vue_vue_type_style_index_0_id_2e7d4582_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_game_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_game_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default","_points","minx","miny","lineCap","_draw_vue_vue_type_template_id_57300176_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_draw_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","opposite","zoomValue","exp","zoomDisplay","equalPoints","colorpicker_vue_1","CreateTokenModal","updatePreview","Watch","color-picker","NoteDialog","textarea","scrollHeight","DrawTool","brushHelper","ruler","shapeSelect","modeSelect","modes","brushSize","helperSize","onModeChange","fowLayer","normalLayer","setupBrush","_vertices","pushBrushBack","lastPoint","vision","insertConstraint","oldPoints","newW","newH","newR","br","resizeToGrid","finaliseShape","axios_1","vue_router_1","manager_vue_1","login_vue_1","logout_1","load_vue_1","main_vue_1","game_vue_1","invitation_1","router","base","routes","redirect","meta","auth","template","beforeEach","coreStore","initialized","matched","record","authenticated","response","setAuthenticated","setUsername","setInitialized","catch","error","Tool","tool","onMouseDown","onMouseUp","onMouseMove","onContextMenu","onDeselect","onSelect","_tools_vue_vue_type_template_id_b6e1f51c_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_tools_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_tool_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_tool_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","wheel","zoom","ready","mousedown","mouseup","mousemove","contextmenu","preventDefault","dragover","drop","showUI","layer-selected","selectedLayer","selectLayer","interval","dot-width","dot-height","tooltip-dir","tooltip","formatter","toFixed","slider-style","border-radius","bg-style","background-color","box-shadow","process-style","copy","topleft","_inputCopy_vue_vue_type_template_id_20bfdb3e_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_inputCopy_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","CDT","TDS","insert","insertConstraintV","stack","markConstraint","intersectionInfo","findIntersectedFaces","triangulateHole","intersectedFaces","listAB","listBA","edges","triangulateHole2","propagatingFlipE","triangulateHalfHole","fl","deleteTriangle","conflictBoundaries","iN","iT","iC","current","n1","n2","ind","ind1","ind2","mirrorIndex","v0","v1","v2","newlf","createTriangle","vaa","vbb","aa","lfc","LineFaceCirculator","lf","rf","indexT","unshift","previousFace","currentVertex","i1","i2","vcc","vdd","pi","BoundingBox","dilate","overlaps","removeConstrainedEdge","dimension","remove1D","remove2D","hole","makeHole","shell","fillHoleDelaunay","updateConstraints","deleteVertex","edgeList","listEdges","indf","locateInfo","iLocate","insertb","li","flipAround","propagatingFlip","depth","isFlipable","maxDepth","ni","flip","e1","e2","eni","eI","edgeSet","lessEdge","indn","ed","tt","ii","u","t1","t2","t3","i3","t4","i4","insertInConstrainedEdge","LocateType","EDGE","insertc","updateConstraintsIncident","VERTEX","clearConstraintsIncident","updateConstraintsOpposite","c1","c2","fc","FaceCirculator","cwi","ccwi","insertFirst","finiteVertex","insertSecond","OUTSIDE_AFFINE_HULL","insertOutsideAffineHull","OUTSIDE_CONVEX_HULL","insertOutsideConvexHull","insertInEdge","FACE","insertInFace","insertDimUp","_infinite","conform","finiteEdge","COUNTERCLOCKWISE","insertOutsideConvexHull2","ccwlist","cwlist","th","marchLocate1D","marchLocate2D","ff","iv","pqt","Triangle","leftFirst","o0","o1","o2","sum","nTurns","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_draw_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_draw_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","LayerManager","drawLoop","requestAnimationFrame","addLayer","globalAlpha","getSelection","image","getData","l2gx","l2gy","lm","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_initiative_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_initiative_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","_createtoken_modal_vue_vue_type_template_id_73816298_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_createtoken_modal_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","BoundingNode","nPrimitives","LeafNode","firstPrimOffset","InteriorNode","union","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_createtoken_modal_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_createtoken_modal_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","utils_4","onKeyUp","HTMLTextAreaElement","selectTool","onKeyDown","keyCode","hasSelection","toggleUI","setClipboard","clip","oldTrackers","newTracker","oldAuras","newAura","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_manager_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_manager_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default","shapecontext_vue_1","createtoken_modal_vue_1","draw_vue_1","filter_vue_1","map_vue_1","pan_1","select_vue_1","vision_vue_1","manager_2","ruler_1","Tools","currentTool","tools","dmTools","currentToolComponent","visibleTools","tagName","targetTool","button","buttons","annotations","gameManager","annotationManager","setActiveText","select-tool","pan-tool","draw-tool","ruler-tool","RulerTool","map-tool","filter-tool","vision-tool","shape-menu","createtoken-dialog","watch","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_selection_info_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_selection_info_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_modal_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_modal_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_labels_vue_vue_type_style_index_0_id_e477c214_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_labels_vue_vue_type_style_index_0_id_e477c214_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_contextmenu_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_contextmenu_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default","question","answer","resolve","reject","Promise","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_accordion_vue_vue_type_style_index_0_id_0bf2b7ba_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_accordion_vue_vue_type_style_index_0_id_0bf2b7ba_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","message","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_menu_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_menu_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","botRight","vector","other","xmin","xmax","ymin","ymax","botright","dirIsNeg","txmin","getDiagCorner","txmax","tymin","tymax","tMax","coreVisible","joined","submit","createRoom","newSessionName","tag","getPointDistance","Point","scale","atan2","maxT","mouseover","hash","mouseout","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_initiative_vue_vue_type_style_index_0_id_62228cde_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_initiative_vue_vue_type_style_index_0_id_62228cde_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_inputCopy_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_inputCopy_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","vue_slider_component_1","lodash_1","initiative_vue_1","labels_vue_1","menu_vue_1","note_vue_1","selection_info_vue_1","tools_vue_1","keyboard_1","mouse_1","dmsettings_vue_1","Game","manager","updateZoom","newZoomDisplay","zoomLocation","addEventListener","resizeWindow","removeEventListener","throttle","scrollZoom","setWidth","setHeight","confirm","dropAsset","tool-bar","selection-info","prompt-dialog","confirm-dialog","menu-bar","initiative-dialog","zoom-slider","note-dialog","label-dialog","dm-settings","obj","z","l2gr","asset_node_vue_1","MenuBar","setGridColour","setFOWColour","setRulerColour","nextElementSibling","newNote","asset-node","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_colorpicker_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_colorpicker_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","_INFINITE_VERTEX","LineFaceState","newPoint","INFINITE","_counter","vertex","A","sign","Vertex","_point","faces","Edge","_ri","_es","associatedEdge","increment","tr","dir","UNDEFINED","_tr","ic","vt","vr","pqr","VERTEX_VERTEX","VERTEX_EDGE","EDGE_VERTEX","EDGE_EDGE","createVertex","addVertex","infiniteVertex","n0","f1","f2","f3","v3","trig","t0","i0","setAdjacency","deleteList","neighbour","lfit","reorient","vCW","vCCW","tri","bl","bli","vv","g","inn","firstHole","holeList","createTriangle2","finite","newf","cutAfter","indx","createTriangle3","newHole","x1","y1","dist","node_1","BoundingVolume","totalNodes","buildData","orderedPrims","nodes","recursiveBuild","compact","node","createLeaf","centroidBbox","getMaxExtent","pMid","partitionedData","flattened","stopOnFirstHit","tMin","todoOffset","nodeNum","todo","secondChildOffset","flatten","myOffset","secondOffset","primitivesOffset","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_filter_vue_vue_type_style_index_1_id_dca395d6_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_filter_vue_vue_type_style_index_1_id_dca395d6_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","annotation_1","GameManager","selectedTool","oldShape","redrawInitiative","checkVisionSources","setMovementBlock","setIsToken","localPos","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_asset_node_vue_vue_type_style_index_0_id_6d718094_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_asset_node_vue_vue_type_style_index_0_id_6d718094_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_modal_vue_vue_type_style_index_0_id_c2851f0e_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_modal_vue_vue_type_style_index_0_id_c2851f0e_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","_vision_vue_vue_type_template_id_46baf892_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_vision_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","LoadComponent","registerHooks","Dashboard","vm","err","post","_confirm_vue_vue_type_template_id_1883e207_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_confirm_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_shapecontext_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_shapecontext_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_shapecontext_vue_vue_type_style_index_0_id_6c66d243_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_shapecontext_vue_vue_type_style_index_0_id_6c66d243_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_manager_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_manager_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_draw_vue_vue_type_style_index_0_id_57300176_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_draw_vue_vue_type_style_index_0_id_57300176_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","option-selected","max-width","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_main_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_main_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_filter_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_filter_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_selectcontext_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_selectcontext_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","FOWPlayersLayer","skipPlayerFOW","maxLength","tokenId","_a","selectionColor","selectionWidth","invalidateLight","serverShape","lsI","lbI","mbI","anI","annotationIndex","ownedIndex","ogOP","drawAuras","filterNoLabel","destinationIndex","oldIdx","deltaY","_filter_vue_vue_type_template_id_dca395d6_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_filter_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","topright","botleft","mx","my","_select_vue_vue_type_template_id_2196c042___WEBPACK_IMPORTED_MODULE_0__","_select_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_selection_info_vue_vue_type_style_index_0_id_43d09857_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_selection_info_vue_vue_type_style_index_0_id_43d09857_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","_main_vue_vue_type_template_id_61eb1455_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_main_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_createtoken_modal_vue_vue_type_style_index_0_id_73816298_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_createtoken_modal_vue_vue_type_style_index_0_id_73816298_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","moveDrag","stopDrag","multiple","hidden","createDirectory","prepareUpload","dblclick","changeDirectory","dragleave","leaveDrag","inode-selected","cm","startDrag","createtokendialog","Logout","CoreStore","init","App_vue_1","router_1","config","productionTip","devtools","performance","$mount","props","Initiative","code","sessionUrl","_prompt_vue_vue_type_template_id_0602c2e6_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_prompt_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","draw_1","drawt","drawTEContour","Q","rawOutput","expandEdge","fh","nfh","nIndex","rIndex","lIndex","nvh","rvh","lvh","re","le","ro","lo","raySegIntersection","CLOCKWISE","denominator","ua","_edit_dialog_vue_vue_type_template_id_23de098e_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_edit_dialog_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","modal-mask","dialog-mask","dragOver","tempFill","Login","password","$route","statusText","span","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_game_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_game_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","diffsign","xdiff","ydiff","xmid","ymid","_modal_vue_vue_type_template_id_c2851f0e_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_modal_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_accordion_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_accordion_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","cdt_1","triangulate","time","cdt","POINT_VERTEX_MAP","PVM","timeEnd","deleteIntersectVertex","queues","getIncidentEdges","fixBridge","nextIntersect","ccwv","ccwp","triBridge","newConstraints","from_","brokenBridge","deleteShapeFromTriag","Set","np","removeConstrainedEdgeDelaunay","removeVertex","addShapeToTriag","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_tools_vue_vue_type_style_index_0_id_b6e1f51c_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_tools_vue_vue_type_style_index_0_id_b6e1f51c_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_main_vue_vue_type_style_index_0_id_61eb1455_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_main_vue_vue_type_style_index_0_id_61eb1455_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","EditDialog","addEmpty","maxvalue","hadAnnotation","an","getLayers","setLayer","moveToBack","moveToFront","getInitiativeWord","openEditDialog","yes","no","ok","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_dmsettings_vue_vue_type_style_index_0_id_b908e87c_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_dmsettings_vue_vue_type_style_index_0_id_b908e87c_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","_map_vue_vue_type_template_id_2104f147___WEBPACK_IMPORTED_MODULE_0__","_map_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","toggleDisplay","toggleCategory","showArrow","toggleSelection","deny","_dmsettings_vue_vue_type_template_id_b908e87c_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_dmsettings_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_select_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_select_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_filter_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_filter_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default","LabelManager","user","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_game_vue_vue_type_style_index_1_id_3d0578ba_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_game_vue_vue_type_style_index_1_id_3d0578ba_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","changeValue","refInFor","selectionupdate","updateSelection","_manager_vue_vue_type_template_id_5b0def98___WEBPACK_IMPORTED_MODULE_0__","_manager_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_tools_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_tools_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","_tool_vue_vue_type_template_id_1e034b42___WEBPACK_IMPORTED_MODULE_0__","_tool_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","keyup","_k","vuedraggable_1","_activeTokens","setTurn","getActor","actorId","setActiveTokens","setCenterPosition","order","show","option","effectIndex","syncEffect","_selection_info_vue_vue_type_template_id_43d09857_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_selection_info_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","bvh_1","GameStore","selectedLayerIndex","boardInitialized","locationName","vision_mode","filters","updatedLayers","isDM","oldLoc","newLoc","getGridLayer","increase","unit_size","gridLayer","use_grid","vision_min_range","vision_max_range","full_fow","fow_opacity","fow_los","actualNote","playerId","context","commit","Action","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_confirm_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_confirm_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","vision_source","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_contextMenu_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_contextMenu_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","_note_vue_vue_type_template_id_7a3669fd_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_note_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","_initiative_vue_vue_type_template_id_62228cde_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_initiative_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","fow_1","fowplayers_1","grid_1","createLayer","layerInfo","zIndex","player_editable","setShapes","_labels_vue_vue_type_template_id_e477c214_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_labels_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_edit_dialog_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_edit_dialog_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","toolVisible","tool-selected","focusin","focusout","login","autocomplete","required","visibility","register","edit_dialog_vue_1","SelectionInfo","visibleTrackers","visibleAuras","editDialog","ogValue","isNaN","edit-dialog","setRoomName","setRoomCreator","setInvitationCode","setPlayers","addPlayer","setDM","grid_colour","fow_colour","ruler_colour","setPanX","pan_x","setPanY","pan_y","setZoomDisplay","zoom_factor","active_layer","setLocationName","setAssets","locationInfo","setLocations","innerHTML","resetLayerInfo","reset","setBoardInitialized","realShape","setLabelVisibility","setLabelFilters"],"mappings":"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","file":"static/js/app-legacy.fc4448f3.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import { GlobalPoint, LocalPoint } from \"@/game/geom\";\nimport { BoundingRect } from \"@/game/shapes/boundingrect\";\nimport { Shape } from \"@/game/shapes/shape\";\nimport { g2l } from \"@/game/units\";\n\nexport class Text extends Shape {\n    type = \"text\";\n    text: string;\n    font: string;\n    angle: number;\n    constructor(\n        position: GlobalPoint,\n        text: string,\n        font: string,\n        angle?: number,\n        fillColour?: string,\n        strokeColour?: string,\n        uuid?: string,\n    ) {\n        super(position, fillColour, strokeColour, uuid);\n        this.text = text;\n        this.font = font;\n        this.angle = angle || 0;\n    }\n    asDict() {\n        return Object.assign(this.getBaseDict(), {\n            text: this.text,\n            font: this.font,\n            angle: this.angle,\n        });\n    }\n    get points() {\n        return [[this.refPoint.x, this.refPoint.y]];\n    }\n    getBoundingBox(): BoundingRect {\n        return new BoundingRect(this.refPoint, 5, 5); // TODO: fix this bounding box\n    }\n    draw(ctx: CanvasRenderingContext2D) {\n        super.draw(ctx);\n        ctx.font = this.font;\n        ctx.fillStyle = this.fillColour;\n        ctx.save();\n        const dest = g2l(this.refPoint);\n        ctx.translate(dest.x, dest.y);\n        ctx.rotate(this.angle);\n        ctx.textAlign = \"center\";\n        this.getLines(ctx).map(line => ctx.fillText(line.text, line.x, line.y));\n        ctx.restore();\n    }\n    contains(point: GlobalPoint): boolean {\n        return false; // TODO\n    }\n\n    center(): GlobalPoint;\n    center(centerPoint: GlobalPoint): void;\n    center(centerPoint?: GlobalPoint): GlobalPoint | void {} // TODO\n    visibleInCanvas(canvas: HTMLCanvasElement): boolean {\n        return this.getBoundingBox().visibleInCanvas(canvas);\n    } // TODO\n    snapToGrid(): void {}\n    resizeToGrid(): void {}\n    resize(resizePoint: number, point: LocalPoint): void {}\n\n    getMaxHeight(ctx: CanvasRenderingContext2D) {\n        const lines = this.getLines(ctx);\n        const lineHeight = 30;\n        return lineHeight * lines.length;\n    }\n\n    getMaxWidth(ctx: CanvasRenderingContext2D) {\n        const lines = this.getLines(ctx);\n        const widths = lines.map(line => ctx.measureText(line.text).width);\n        return Math.max(...widths);\n    }\n\n    private getLines(ctx: CanvasRenderingContext2D) {\n        const lines = this.text.split(\"\\n\");\n        const allLines: { text: string; x: number; y: number }[] = [];\n        const maxWidth = ctx.canvas.width;\n        const lineHeight = 30;\n        const x = 0; // this.refPoint.x;\n        let y = 0; // this.refPoint.y;\n\n        for (const line of lines) {\n            let targetLine = \"\";\n            const words = line.split(\" \");\n            for (const word of words) {\n                const testLine = targetLine + word + \" \";\n                const metrics = ctx.measureText(testLine);\n                const testWidth = metrics.width;\n                if (testWidth > maxWidth) {\n                    ctx.fillText(targetLine, x, y);\n                    allLines.push({ text: targetLine, x, y });\n                    targetLine = word + \" \";\n                    y += lineHeight;\n                } else {\n                    targetLine = testLine;\n                }\n            }\n            allLines.push({ text: targetLine, x, y });\n            y += lineHeight;\n        }\n        return allLines;\n    }\n}\n","import { render, staticRenderFns } from \"./shapecontext.vue?vue&type=template&id=6c66d243&scoped=true&\"\nimport script from \"./shapecontext.vue?vue&type=script&lang=ts&\"\nexport * from \"./shapecontext.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./shapecontext.vue?vue&type=style&index=0&id=6c66d243&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6c66d243\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./prompt.vue?vue&type=style&index=0&id=0602c2e6&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./prompt.vue?vue&type=style&index=0&id=0602c2e6&scoped=true&lang=css&\"","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport tinycolor from \"tinycolor2\";\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\n\nimport { Chrome } from \"vue-color\";\nimport { Prop } from \"vue-property-decorator\";\n\n@Component<ColorPicker>({\n    components: {\n        \"chrome-picker\": Chrome,\n    },\n})\nexport default class ColorPicker extends Vue {\n    @Prop(String) color!: string;\n    @Prop(Boolean) disabled!: boolean;\n\n    display = false;\n    left = 0;\n    top = 0;\n    transparent = false;\n\n    mounted() {\n        this.transparent = (<any>this.$refs.chromePicker).val.rgba.a === 0;\n        this.setPosition();\n    }\n\n    open() {\n        if (this.display || this.disabled) return; // click on the picker itself\n        this.setPosition();\n        this.display = true;\n        this.$nextTick(() => (<HTMLElement>this.$children[0].$el).focus());\n    }\n    updateColor(value: { rgba: { r: number; g: number; b: number; a: number } }) {\n        this.transparent = value.rgba.a === 0;\n        const newColor = tinycolor(value.rgba).toRgbString();\n        this.$emit(\"update:color\", newColor);\n        this.$emit(\"input\", newColor);\n    }\n    closePicker() {\n        this.display = false;\n        this.$emit(\"change\", this.color);\n    }\n    setPosition() {\n        const rect = this.$el.getBoundingClientRect();\n        // 224 is the width of the picker, 242 the height\n        if (rect.right + 224 > window.innerWidth) this.left = rect.left - 224;\n        else this.left = rect.right;\n        if (rect.bottom + 242 > window.innerHeight) this.top = rect.top - 242;\n        else this.top = rect.bottom;\n    }\n}\n","import { render, staticRenderFns } from \"./game.vue?vue&type=template&id=3d0578ba&scoped=true&\"\nimport script from \"./game.vue?vue&type=script&lang=ts&\"\nexport * from \"./game.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./game.vue?vue&type=style&index=0&lang=css&\"\nimport style1 from \"./game.vue?vue&type=style&index=1&id=3d0578ba&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3d0578ba\",\n  null\n  \n)\n\nexport default component.exports","import io from \"socket.io-client\";\nimport { Route } from \"vue-router\";\n\nexport const socket = io(location.protocol + \"//\" + location.host + \"/planarally\", { autoConnect: false });\n\nexport function createConnection(route: Route) {\n    socket.io.opts.query = `user=${route.params.creator}&room=${route.params.room}`;\n    socket.connect();\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\n\nimport AssetContextMenu from \"@/assetManager/contextMenu.vue\";\nimport ConfirmDialog from \"@/core/components/modals/confirm.vue\";\nimport Prompt from \"@/core/components/modals/prompt.vue\";\n\nimport { socket } from \"@/assetManager/socket\";\nimport { assetStore } from \"@/assetManager/store\";\nimport { Asset } from \"@/core/comm/types\";\nimport { uuidv4 } from \"@/core/utils\";\n\n@Component({\n    components: {\n        Prompt,\n        ConfirmDialog,\n        AssetContextMenu,\n    },\n    beforeRouteEnter(to, from, next) {\n        socket.connect();\n        next();\n    },\n    beforeRouteLeave(to, from, next) {\n        socket.disconnect();\n        next();\n    },\n})\nexport default class AssetManager extends Vue {\n    path: number[] = [];\n    draggingSelection = false;\n\n    get folders(): number[] {\n        return assetStore.folders;\n    }\n\n    get files(): number[] {\n        return assetStore.files;\n    }\n\n    get selected(): number[] {\n        return assetStore.selected;\n    }\n\n    get idMap() {\n        return assetStore.idMap;\n    }\n\n    get currentFolder(): number {\n        if (this.path.length) return this.path[this.path.length - 1];\n        return assetStore.root;\n    }\n    get parentFolder(): number {\n        let parent = this.path[this.path.length - 2];\n        if (parent === undefined) parent = assetStore.root;\n        return parent;\n    }\n    get firstSelectedFile(): Asset | null {\n        for (const sel of assetStore.selected) {\n            if (assetStore.idMap.get(sel)!.file_hash) {\n                return assetStore.idMap.get(sel)!;\n            }\n        }\n        return null;\n    }\n    changeDirectory(nextFolder: number) {\n        if (nextFolder < 0) this.path.pop();\n        else this.path.push(nextFolder);\n        assetStore.clearSelected();\n        socket.emit(\"Folder.Get\", this.currentFolder);\n    }\n    createDirectory() {\n        const name = window.prompt(\"New folder name\");\n        if (name !== null) {\n            socket.emit(\"Folder.Create\", { name, parent: this.currentFolder });\n        }\n    }\n    moveInode(inode: number, target: number) {\n        if (assetStore.files.includes(inode)) assetStore.files.splice(assetStore.files.indexOf(inode), 1);\n        else assetStore.folders.splice(assetStore.folders.indexOf(inode), 1);\n        assetStore.idMap.delete(inode);\n        socket.emit(\"Inode.Move\", { inode, target });\n    }\n    select(event: MouseEvent, inode: number) {\n        if (event.shiftKey && assetStore.selected.length > 0) {\n            const inodes = [...assetStore.files, ...assetStore.folders];\n            const start = inodes.indexOf(assetStore.selected[assetStore.selected.length - 1]);\n            const end = inodes.indexOf(inode);\n            for (let i = start; i !== end; start < end ? i++ : i--) {\n                if (i === start) continue;\n                assetStore.selected.push(inodes[i]);\n            }\n            assetStore.selected.push(inodes[end]);\n        } else {\n            if (!event.ctrlKey) {\n                assetStore.clearSelected();\n            }\n            assetStore.selected.push(inode);\n        }\n    }\n    startDrag(event: DragEvent, file: number) {\n        if (event.dataTransfer === null) return;\n        event.dataTransfer.setData(\"Hack\", \"ittyHack\");\n        event.dataTransfer.dropEffect = \"move\";\n        if (!assetStore.selected.includes(file)) assetStore.selected.push(file);\n        this.draggingSelection = true;\n    }\n    moveDrag(event: DragEvent) {\n        if ((<HTMLElement>event.target).classList.contains(\"folder\"))\n            (<HTMLElement>event.target).classList.add(\"inode-selected\");\n    }\n    leaveDrag(event: DragEvent) {\n        if ((<HTMLElement>event.target).classList.contains(\"folder\"))\n            (<HTMLElement>event.target).classList.remove(\"inode-selected\");\n    }\n    stopDrag(event: DragEvent, target: number) {\n        (<HTMLElement>event.target).classList.remove(\"inode-selected\");\n        if (this.draggingSelection) {\n            if (\n                (target === assetStore.root || assetStore.folders.includes(target)) &&\n                !assetStore.selected.includes(target)\n            ) {\n                for (const inode of assetStore.selected) {\n                    this.moveInode(inode, target);\n                }\n            }\n            assetStore.clearSelected();\n        } else if (event.dataTransfer && event.dataTransfer.files.length > 0) {\n            this.upload(event.dataTransfer.files, target);\n        }\n        this.draggingSelection = false;\n    }\n    prepareUpload() {\n        document.getElementById(\"files\")!.click();\n    }\n    upload(fls?: FileList, target?: number) {\n        const files = (<HTMLInputElement>document.getElementById(\"files\")!).files;\n        if (fls === undefined) {\n            if (files) fls = files;\n            else return;\n        }\n        if (target === undefined) target = this.currentFolder;\n        const CHUNK_SIZE = 100000;\n        for (const file of fls) {\n            const uuid = uuidv4();\n            const slices = Math.ceil(file.size / CHUNK_SIZE);\n            for (let slice = 0; slice < slices; slice++) {\n                const fr = new FileReader();\n                fr.readAsArrayBuffer(\n                    file.slice(\n                        slice * CHUNK_SIZE,\n                        slice * CHUNK_SIZE + Math.min(CHUNK_SIZE, file.size - slice * CHUNK_SIZE),\n                    ),\n                );\n                fr.onload = e => {\n                    socket.emit(\"Asset.Upload\", {\n                        name: file.name,\n                        directory: target,\n                        data: fr.result,\n                        slice,\n                        totalSlices: slices,\n                        uuid,\n                    });\n                };\n            }\n        }\n    }\n}\n","import { render, staticRenderFns } from \"./asset_node.vue?vue&type=template&id=6d718094&scoped=true&\"\nimport script from \"./asset_node.vue?vue&type=script&lang=ts&\"\nexport * from \"./asset_node.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./asset_node.vue?vue&type=style&index=0&id=6d718094&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6d718094\",\n  null\n  \n)\n\nexport default component.exports","import { render, staticRenderFns } from \"./login.vue?vue&type=template&id=bc30fc14&scoped=true&\"\nimport script from \"./login.vue?vue&type=script&lang=ts&\"\nexport * from \"./login.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./login.vue?vue&type=style&index=0&id=bc30fc14&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"bc30fc14\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('modal',{attrs:{\"visible\":_vm.visible,\"mask\":false},on:{\"close\":function($event){_vm.visible = false}},scopedSlots:_vm._u([{key:\"header\",fn:function(m){return _c('div',{staticClass:\"modal-header\",attrs:{\"draggable\":\"true\"},on:{\"dragstart\":m.dragStart,\"dragend\":m.dragEnd}},[_c('div',[_vm._v(\"Initiative\")]),_c('div',{staticClass:\"header-close\",on:{\"click\":function($event){_vm.visible = false}}},[_c('i',{staticClass:\"far fa-window-close\"})])])}}])},[_c('div',{staticClass:\"modal-body\"},[_c('draggable',{attrs:{\"id\":\"initiative-list\",\"setData\":_vm.fakeSetData,\"disabled\":!_vm.$store.state.game.IS_DM},on:{\"change\":_vm.updateOrder},model:{value:(_vm.data),callback:function ($$v) {_vm.data=$$v},expression:\"data\"}},[_vm._l((_vm.data),function(actor){return [_c('div',{key:actor.uuid,staticStyle:{\"display\":\"flex\",\"flex-direction\":\"column\",\"align-items\":\"flex-end\"}},[_c('div',{staticClass:\"initiative-actor\",class:{'initiative-selected': _vm.currentActor === actor.uuid},style:({'cursor': _vm.$store.state.game.IS_DM && 'move'}),on:{\"mouseenter\":function($event){return _vm.toggleHighlight(actor, true)},\"mouseleave\":function($event){return _vm.toggleHighlight(actor, false)}}},[(actor.has_img)?[_c('img',{attrs:{\"src\":actor.source,\"width\":\"30px\",\"height\":\"30px\"}})]:[_c('span',{staticStyle:{\"width\":\"auto\"}},[_vm._v(_vm._s(actor.source))])],_c('input',{directives:[{name:\"model\",rawName:\"v-model.lazy.number\",value:(actor.initiative),expression:\"actor.initiative\",modifiers:{\"lazy\":true,\"number\":true}}],class:{'notAllowed': !_vm.owns(actor)},attrs:{\"type\":\"text\",\"placeholder\":\"value\",\"disabled\":!_vm.owns(actor)},domProps:{\"value\":(actor.initiative)},on:{\"change\":[function($event){_vm.$set(actor, \"initiative\", _vm._n($event.target.value))},function($event){return _vm.syncInitiative(actor)}],\"blur\":function($event){return _vm.$forceUpdate()}}}),_c('div',{staticClass:\"initiative-effects-icon\",class:{'notAllowed': !_vm.owns(actor)},staticStyle:{\"opacity\":\"0.6\"},on:{\"click\":function($event){_vm.createEffect(actor, _vm.getDefaultEffect(), true)}}},[_c('i',{staticClass:\"fas fa-stopwatch\"}),(actor.effects)?[_vm._v(_vm._s(actor.effects.length))]:[_vm._v(\"0\")]],2),_c('div',{class:{'notAllowed': !_vm.owns(actor)},style:({'opacity': actor.visible ? '1.0' : '0.3'}),on:{\"click\":function($event){return _vm.toggleOption(actor, 'visible')}}},[_c('i',{staticClass:\"fas fa-eye\"})]),_c('div',{class:{'notAllowed': !_vm.owns(actor)},style:({'opacity': actor.group ? '1.0' : '0.3'}),on:{\"click\":function($event){return _vm.toggleOption(actor, 'group')}}},[_c('i',{staticClass:\"fas fa-users\"})]),_c('div',{class:{'notAllowed': !_vm.owns(actor)},style:({'opacity': _vm.owns(actor) ? '1.0' : '0.3'}),on:{\"click\":function($event){return _vm.removeInitiative(actor.uuid, true, true)}}},[_c('i',{staticClass:\"fas fa-trash-alt\"})])],2),(actor.effects)?_c('div',{staticClass:\"initiative-effect\"},_vm._l((actor.effects),function(effect){return _c('div',{key:effect.uuid},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(effect.name),expression:\"effect.name\"}],attrs:{\"type\":\"text\",\"size\":effect.name.length || 1},domProps:{\"value\":(effect.name)},on:{\"change\":function($event){return _vm.updateEffect(actor.uuid, effect, true)},\"input\":function($event){if($event.target.composing){ return; }_vm.$set(effect, \"name\", $event.target.value)}}}),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(effect.turns),expression:\"effect.turns\"}],attrs:{\"type\":\"text\",\"size\":effect.turns.toString().length || 1},domProps:{\"value\":(effect.turns)},on:{\"change\":function($event){return _vm.updateEffect(actor.uuid, effect, true)},\"input\":function($event){if($event.target.composing){ return; }_vm.$set(effect, \"turns\", $event.target.value)}}})])}),0):_vm._e()])]})],2),_c('div',{attrs:{\"id\":\"initiative-bar\"}},[_c('div',{attrs:{\"id\":\"initiative-round\"}},[_vm._v(\"Round \"+_vm._s(_vm.roundCounter))]),_c('div',{staticStyle:{\"display\":\"flex\"}}),_c('div',{staticClass:\"initiative-bar-button\",style:(_vm.visionLock ? 'background-color: #82c8a0' : ''),on:{\"click\":_vm.toggleVisionLock}},[_c('i',{staticClass:\"fas fa-eye\"})]),_c('div',{staticClass:\"initiative-bar-button\",style:(_vm.cameraLock ? 'background-color: #82c8a0' : ''),on:{\"click\":function($event){_vm.cameraLock = !_vm.cameraLock}}},[_c('i',{staticClass:\"fas fa-video\"})]),_c('div',{staticClass:\"initiative-bar-button\",class:{'notAllowed': !_vm.$store.state.game.IS_DM},on:{\"click\":function($event){_vm.setRound(0, true); _vm.updateTurn(_vm.data[0].uuid, true)}}},[_c('i',{staticClass:\"fas fa-sync-alt\"})]),_c('div',{staticClass:\"initiative-bar-button\",class:{'notAllowed': !_vm.$store.state.game.IS_DM},on:{\"click\":_vm.nextTurn}},[_c('i',{staticClass:\"fas fa-chevron-right\"})])])],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"17a953f2-vue-loader-template\\\"}!../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./initiative.vue?vue&type=template&id=62228cde&scoped=true&\"","import { layerManager } from \"@/game/layers/manager\";\nimport { g2lx, g2ly } from \"@/game/units\";\nimport { EdgeIterator, TDS } from \"./tds\";\nimport { ccw, cw } from \"./triag\";\n\nexport function drawPoint(point: number[], r: number, colour?: string) {\n    const dl = layerManager.getLayer(\"draw\");\n    if (dl === undefined) return;\n    const ctx = dl.ctx;\n    ctx.lineJoin = \"round\";\n    ctx.strokeStyle =\n        colour === undefined ? `rgb(${Math.random() * 255}, ${Math.random() * 255}, ${Math.random() * 255})` : colour;\n    ctx.moveTo(g2lx(point[0]), g2ly(point[1]));\n    ctx.beginPath();\n    ctx.arc(g2lx(point[0]), g2ly(point[1]), r, 0, Math.PI * 2);\n    ctx.closePath();\n    ctx.stroke();\n}\n\nexport function drawPolygon(polygon: number[][], colour?: string) {\n    const dl = layerManager.getLayer(\"draw\");\n    if (dl === undefined) return;\n    const ctx = dl.ctx;\n    ctx.lineJoin = \"round\";\n    // ctx.clearRect(0, 0, window.innerWidth, window.innerHeight);\n    ctx.lineJoin = \"round\";\n    ctx.beginPath();\n    ctx.strokeStyle =\n        colour === undefined ? `rgb(${Math.random() * 255}, ${Math.random() * 255}, ${Math.random() * 255})` : colour;\n    ctx.moveTo(g2lx(polygon[0][0]), g2ly(polygon[0][1]));\n    for (const point of polygon) {\n        ctx.lineTo(g2lx(point[0]), g2ly(point[1]));\n    }\n    ctx.closePath();\n    ctx.stroke();\n}\n\nexport function drawPolygonL(polygon: number[][], colour?: string) {\n    const dl = layerManager.getLayer(\"draw\");\n    if (dl === undefined) return;\n    const ctx = dl.ctx;\n    ctx.lineJoin = \"round\";\n    // ctx.clearRect(0, 0, window.innerWidth, window.innerHeight);\n    ctx.lineJoin = \"round\";\n    ctx.beginPath();\n    ctx.strokeStyle =\n        colour === undefined ? `rgb(${Math.random() * 255}, ${Math.random() * 255}, ${Math.random() * 255})` : colour;\n    ctx.moveTo(polygon[0][0], polygon[0][1]);\n    for (const point of polygon) {\n        ctx.lineTo(point[0], point[1]);\n    }\n    ctx.closePath();\n    ctx.stroke();\n}\n\nfunction x(xx: number, local: boolean) {\n    if (local) return xx;\n    else return g2lx(xx);\n}\n\nfunction y(yy: number, local: boolean) {\n    if (local) return yy;\n    else return g2ly(yy);\n}\n\nlet I = 0;\nlet J = 0;\n\nfunction drl(ctx: CanvasRenderingContext2D, from: number[], to: number[], constrained: boolean, local: boolean) {\n    // J++;\n    // if (constrained) {\n    //     I++;\n    //     console.log(\"*\", from, to);\n    // } else {\n    //     console.log(\" \", from, to);\n    // }\n    ctx.beginPath();\n    ctx.strokeStyle = constrained ? \"rgba(255, 255, 0, 0.30)\" : \"rgba(0, 0, 0, 0.30)\";\n    ctx.moveTo(x(from[0], local), y(from[1], local));\n    ctx.lineTo(x(to[0], local), y(to[1], local));\n    ctx.closePath();\n    ctx.stroke();\n}\n\nexport function drawPolygonT(tds: TDS, local = true, clear = true, logs: 0 | 1 | 2 = 0) {\n    I = 0;\n    J = 0;\n    let T = 0;\n    const dl = layerManager.getLayer(\"draw\");\n    if (dl === undefined) return;\n    const ctx = dl.ctx;\n    if (clear) ctx.clearRect(0, 0, window.innerWidth, window.innerHeight);\n    ctx.lineJoin = \"round\";\n    // ctx.clearRect(0, 0, window.innerWidth, window.innerHeight);\n    ctx.lineJoin = \"round\";\n    const ei = new EdgeIterator(tds);\n    while (ei.valid) {\n        ei.next();\n        ei.collect();\n    }\n    ei.collect();\n    do {\n        const fromP = ei.edge.first!.vertices[ccw(ei.edge.second)]!.point!;\n        const toP = ei.edge.first!.vertices[cw(ei.edge.second)]!.point!;\n        if (logs > 0) {\n            if (fromP[0] === -Infinity || toP[0] === -Infinity) {\n                ei.next();\n                continue;\n            }\n            J++;\n            if (ei.edge.first!.constraints[ei.edge.second]) {\n                I++;\n                if (logs === 2) console.log(`Edge: (*) ${fromP} > ${toP}   (${ei.edge.first!.uid})`);\n            } else if (logs === 2) console.log(`Edge: ${fromP} > ${toP}   (${ei.edge.first!.uid})`);\n        }\n        do {\n            ei.next();\n            ei.collect();\n        } while (ei.valid);\n    } while (ei.pos !== null);\n    for (const t of tds.triangles) {\n        if (t.isInfinite()) continue;\n        T++;\n        const po = [];\n        ctx.fillStyle = \"blue\";\n        if (t.vertices[0] !== undefined) {\n            po.push(t.vertices[0]!.point);\n            ctx.beginPath();\n            ctx.arc(x(t.vertices[0]!.point![0], local), y(t.vertices[0]!.point![1], local), 5, 0, 2 * Math.PI);\n            ctx.closePath();\n            ctx.fill();\n        }\n        if (t.vertices[1] !== undefined) {\n            po.push(t.vertices[1]!.point);\n            ctx.arc(x(t.vertices[1]!.point![0], local), y(t.vertices[1]!.point![1], local), 5, 0, 2 * Math.PI);\n            ctx.closePath();\n            ctx.fill();\n        }\n        if (t.vertices[2] !== undefined) {\n            po.push(t.vertices[2]!.point);\n            ctx.arc(x(t.vertices[2]!.point![0], local), y(t.vertices[2]!.point![1], local), 5, 0, 2 * Math.PI);\n            ctx.closePath();\n            ctx.fill();\n        }\n        if (logs === 2) console.log(`[T ${t.uid}] `, ...po, t.constraints);\n\n        ctx.moveTo(x(t.vertices[0]!.point![0], local), y(t.vertices[0]!.point![1], local));\n        if (t.vertices[0] !== undefined && t.vertices[1] !== undefined)\n            drl(ctx, t.vertices[0]!.point!, t.vertices[1]!.point!, t.constraints[2], local);\n        if (t.vertices[1] !== undefined && t.vertices[2] !== undefined)\n            drl(ctx, t.vertices[1]!.point!, t.vertices[2]!.point!, t.constraints[0], local);\n        if (t.vertices[2] !== undefined && t.vertices[0] !== undefined)\n            drl(ctx, t.vertices[2]!.point!, t.vertices[0]!.point!, t.constraints[1], local);\n    }\n    if (logs > 0) {\n        console.log(`Edges: ${I}/${J}`);\n        console.log(`Faces: ${T}`);\n    }\n}\n\n(<any>window).DC = drawPoint;\n(<any>window).DP = drawPolygon;\n(<any>window).DPL = drawPolygonL;\n(<any>window).DPT = drawPolygonT;\n","import { render, staticRenderFns } from \"./accordion.vue?vue&type=template&id=0bf2b7ba&scoped=true&\"\nimport script from \"./accordion.vue?vue&type=script&lang=ts&\"\nexport * from \"./accordion.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./accordion.vue?vue&type=style&index=0&id=0bf2b7ba&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0bf2b7ba\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tool.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tool.vue?vue&type=style&index=0&lang=css&\"","import * as tinycolor from \"tinycolor2\";\n\nimport { calcFontScale } from \"@/core/utils\";\nimport { InitiativeData } from \"@/game/comm/types/general\";\nimport { ServerCircularToken } from \"@/game/comm/types/shapes\";\nimport { GlobalPoint } from \"@/game/geom\";\nimport { Circle } from \"@/game/shapes/circle\";\nimport { gameStore } from \"@/game/store\";\nimport { g2l, g2lz } from \"@/game/units\";\n\nexport class CircularToken extends Circle {\n    type = \"circulartoken\";\n    text: string;\n    font: string;\n    constructor(\n        center: GlobalPoint,\n        r: number,\n        text: string,\n        font: string,\n        fillColour?: string,\n        strokeColour?: string,\n        uuid?: string,\n    ) {\n        super(center, r, fillColour, strokeColour, uuid);\n        this.text = text;\n        this.font = font;\n    }\n    asDict(): ServerCircularToken {\n        return Object.assign(this.getBaseDict(), {\n            radius: this.r,\n            text: this.text,\n            font: this.font,\n        });\n    }\n    fromDict(data: ServerCircularToken) {\n        super.fromDict(data);\n        this.r = data.radius;\n        this.text = data.text;\n        this.font = data.font;\n    }\n    draw(ctx: CanvasRenderingContext2D) {\n        super.draw(ctx);\n        ctx.font = this.font;\n        ctx.save();\n        const dest = g2l(this.center());\n        ctx.textAlign = \"center\";\n        ctx.textBaseline = \"middle\";\n        const xs = calcFontScale(ctx, this.text, g2lz(this.r), g2lz(this.r));\n        const ys = 0;\n        ctx.transform(xs, ys, -ys, xs, dest.x, dest.y);\n        ctx.fillStyle = tinycolor.mostReadable(this.fillColour, [\"#000\", \"#fff\"]).toHexString();\n        ctx.fillText(this.text, 0, 0);\n        ctx.restore();\n    }\n    getInitiativeRepr(): InitiativeData {\n        return {\n            uuid: this.uuid,\n            visible: !gameStore.IS_DM,\n            group: false,\n            source: this.name === \"\" || this.name === \"Unknown shape\" ? this.text : this.name,\n            has_img: false,\n            effects: [],\n            index: Infinity,\n        };\n    }\n}\n","import { GlobalPoint, LocalPoint } from \"@/game/geom\";\nimport { Layer } from \"@/game/layers/layer\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { Rect } from \"@/game/shapes/rect\";\nimport { Text } from \"@/game/shapes/text\";\nimport { gameStore } from \"@/game/store\";\nimport { l2g } from \"@/game/units\";\n\nexport class AnnotationManager {\n    annotationText: Text;\n    annotationRect: Rect;\n    layer: Layer | undefined;\n    shown: boolean = false;\n\n    constructor() {\n        const origin = new GlobalPoint(0, 0);\n        this.annotationText = new Text(origin, \"\", \"bold 20px serif\", 0, \"rgba(230, 230, 230, 1)\");\n        this.annotationRect = new Rect(origin, 0, 0, \"rgba(0, 0, 0, 0.6)\");\n    }\n\n    setActiveText(text: string) {\n        if (this.layer === undefined) {\n            if (layerManager.hasLayer(\"draw\")) {\n                this.layer = layerManager.getLayer(\"draw\")!;\n                this.layer.addShape(this.annotationRect, false);\n                this.layer.addShape(this.annotationText, false);\n            } else {\n                console.warn(\"There is no draw layer to draw annotations on!\");\n                return;\n            }\n        }\n        this.shown = text !== \"\";\n        this.annotationText.refPoint = l2g(new LocalPoint(this.layer.canvas.width / 2, 50));\n        this.annotationText.text = text;\n        const width = this.shown ? this.annotationText.getMaxWidth(this.layer.ctx) + 10 : 0;\n        const height = this.shown ? this.annotationText.getMaxHeight(this.layer.ctx) + 10 : 0;\n        this.annotationRect.refPoint = l2g(new LocalPoint(this.layer.canvas.width / 2 - width / 2, 30));\n        this.annotationRect.w = width / gameStore.zoomFactor;\n        this.annotationRect.h = height / gameStore.zoomFactor;\n        this.layer.invalidate(true);\n    }\n}\n","import { render, staticRenderFns } from \"./menu.vue?vue&type=template&id=c7fe324c&scoped=true&\"\nimport script from \"./menu.vue?vue&type=script&lang=ts&\"\nexport * from \"./menu.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./menu.vue?vue&type=style&index=0&id=c7fe324c&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"c7fe324c\",\n  null\n  \n)\n\nexport default component.exports","import { render, staticRenderFns } from \"./contextmenu.vue?vue&type=template&id=256dde9c&\"\nimport script from \"./contextmenu.vue?vue&type=script&lang=ts&\"\nexport * from \"./contextmenu.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./contextmenu.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./note.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./note.vue?vue&type=script&lang=ts&\"","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--12-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./login.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--12-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./login.vue?vue&type=script&lang=ts&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('Modal',{attrs:{\"visible\":_vm.visible,\"mask\":false},on:{\"close\":function($event){_vm.visible = false}},scopedSlots:_vm._u([{key:\"header\",fn:function(m){return _c('div',{staticClass:\"modal-header\",attrs:{\"draggable\":\"true\"},on:{\"dragstart\":m.dragStart,\"dragend\":m.dragEnd}},[_c('div',[_vm._v(\"Label manager\")]),_c('div',{staticClass:\"header-close\",on:{\"click\":function($event){_vm.visible = false}}},[_c('i',{staticClass:\"far fa-window-close\"})])])}}])},[_c('div',{staticClass:\"modal-body\"},[_c('div',{staticClass:\"grid\"},[_c('div',{staticClass:\"header\"},[_c('abbr',{attrs:{\"title\":\"Category\"}},[_vm._v(\"Cat.\")])]),_c('div',{staticClass:\"header name\"},[_vm._v(\"Name\")]),_c('div',{staticClass:\"header\"},[_c('abbr',{attrs:{\"title\":\"Visible\"}},[_vm._v(\"Vis.\")])]),_c('div',{staticClass:\"header\"},[_c('abbr',{attrs:{\"title\":\"Delete\"}},[_vm._v(\"Del.\")])]),_c('div',{staticClass:\"separator spanrow\",staticStyle:{\"margin\":\"0 0 7px\"}}),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.search),expression:\"search\"}],ref:\"search\",staticClass:\"spanrow\",attrs:{\"type\":\"text\",\"placeholder\":\"search\"},domProps:{\"value\":(_vm.search)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.search=$event.target.value}}})]),_c('div',{staticClass:\"grid scroll\"},[_vm._l((_vm.categories),function(category){return [_vm._l((_vm.labels[category]),function(label){return [_c('div',{key:'row-'+label.uuid,staticClass:\"row\",on:{\"click\":function($event){return _vm.selectLabel(label.uuid)}}},[(label.category)?[_c('div',{key:'cat-'+label.uuid},[_vm._v(_vm._s(label.category))]),_c('div',{key:'name-'+label.uuid,staticClass:\"name\"},[_vm._v(_vm._s(label.name))])]:_vm._e(),(!label.category)?[_c('div',{key:'cat-'+label.uuid}),_c('div',{key:'name-'+label.uuid,staticClass:\"name\"},[_vm._v(_vm._s(label.name))])]:_vm._e(),_c('div',{key:'visible-'+label.uuid,class:{'lower-opacity': !label.visible},style:({textAlign: 'center'}),on:{\"click\":function($event){$event.stopPropagation();return _vm.toggleVisibility(label)}}},[_c('i',{staticClass:\"fas fa-eye\"})]),_c('div',{key:'delete-'+label.uuid,on:{\"click\":function($event){$event.stopPropagation();return _vm.deleteLabel(label.uuid)}}},[_c('i',{staticClass:\"fas fa-trash-alt\"})])],2)]})]}),(_vm.labels.length === 0)?[_c('div',{attrs:{\"id\":\"no-labels\"}},[_vm._v(\"No labels exist yet\")])]:_vm._e()],2),_c('div',{staticClass:\"grid\"},[_c('div',{staticClass:\"separator spanrow\"}),_c('input',{directives:[{name:\"model\",rawName:\"v-model.trim\",value:(_vm.newCategory),expression:\"newCategory\",modifiers:{\"trim\":true}}],attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.newCategory)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.newCategory=$event.target.value.trim()},\"blur\":function($event){return _vm.$forceUpdate()}}}),_c('input',{directives:[{name:\"model\",rawName:\"v-model.trim\",value:(_vm.newName),expression:\"newName\",modifiers:{\"trim\":true}}],attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.newName)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.newName=$event.target.value.trim()},\"blur\":function($event){return _vm.$forceUpdate()}}}),_c('button',{attrs:{\"id\":\"addLabelButton\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.addLabel($event)}}},[_vm._v(\"Add\")])])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"17a953f2-vue-loader-template\\\"}!../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./labels.vue?vue&type=template&id=e477c214&scoped=true&\"","import {\n    ServerAsset,\n    ServerCircle,\n    ServerCircularToken,\n    ServerLine,\n    ServerMultiLine,\n    ServerPolygon,\n    ServerRect,\n    ServerShape,\n    ServerText,\n} from \"@/game/comm/types/shapes\";\nimport { GlobalPoint } from \"@/game/geom\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { Asset } from \"@/game/shapes/asset\";\nimport { Circle } from \"@/game/shapes/circle\";\nimport { CircularToken } from \"@/game/shapes/circulartoken\";\nimport { Line } from \"@/game/shapes/line\";\nimport { MultiLine } from \"@/game/shapes/multiline\";\nimport { Rect } from \"@/game/shapes/rect\";\nimport { Shape } from \"@/game/shapes/shape\";\nimport { Text } from \"@/game/shapes/text\";\nimport { Polygon } from \"./polygon\";\n\nexport function createShapeFromDict(shape: ServerShape) {\n    let sh: Shape;\n\n    // A fromJSON and toJSON on Shape would be cleaner but ts does not allow for static abstracts so yeah.\n\n    // Shape Type specifics\n\n    const refPoint = new GlobalPoint(shape.x, shape.y);\n    if (shape.type_ === \"rect\") {\n        const rect = <ServerRect>shape;\n        sh = new Rect(refPoint, rect.width, rect.height, rect.fill_colour, rect.stroke_colour, rect.uuid);\n    } else if (shape.type_ === \"circle\") {\n        const circ = <ServerCircle>shape;\n        sh = new Circle(refPoint, circ.radius, circ.fill_colour, circ.stroke_colour, circ.uuid);\n    } else if (shape.type_ === \"circulartoken\") {\n        const token = <ServerCircularToken>shape;\n        sh = new CircularToken(\n            refPoint,\n            token.radius,\n            token.text,\n            token.font,\n            token.fill_colour,\n            token.stroke_colour,\n            token.uuid,\n        );\n    } else if (shape.type_ === \"line\") {\n        const line = <ServerLine>shape;\n        sh = new Line(refPoint, new GlobalPoint(line.x2, line.y2), line.line_width, line.stroke_colour, line.uuid);\n    } else if (shape.type_ === \"multiline\") {\n        const multiline = <ServerMultiLine>shape;\n        sh = new MultiLine(\n            refPoint,\n            multiline.points.map(p => new GlobalPoint(p.x, p.y)),\n            multiline.line_width,\n            multiline.stroke_colour,\n            multiline.uuid,\n        );\n    } else if (shape.type_ === \"polygon\") {\n        const polygon = <ServerPolygon>shape;\n        sh = new Polygon(\n            refPoint,\n            polygon.vertices.map(v => new GlobalPoint(v.x, v.y)),\n            polygon.fill_colour,\n            polygon.stroke_colour,\n            polygon.uuid,\n        );\n    } else if (shape.type_ === \"text\") {\n        const text = <ServerText>shape;\n        sh = new Text(refPoint, text.text, text.font, text.angle, text.fill_colour, text.stroke_colour, text.uuid);\n    } else if (shape.type_ === \"assetrect\") {\n        const asset = <ServerAsset>shape;\n        const img = new Image(asset.width, asset.height);\n        if (asset.src.startsWith(\"http\")) img.src = new URL(asset.src).pathname;\n        else img.src = asset.src;\n        sh = new Asset(img, refPoint, asset.width, asset.height, asset.uuid);\n        img.onload = () => {\n            layerManager.getLayer(shape.layer)!.invalidate(false);\n        };\n    } else {\n        return undefined;\n    }\n    sh.fromDict(shape);\n    return sh;\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./dmsettings.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./dmsettings.vue?vue&type=script&lang=ts&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./confirm.vue?vue&type=style&index=0&id=1883e207&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./confirm.vue?vue&type=style&index=0&id=1883e207&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('Modal',{attrs:{\"visible\":_vm.visible,\"colour\":'rgba(255, 255, 255, 0.8)',\"mask\":false},on:{\"close\":function($event){_vm.visible = false}},scopedSlots:_vm._u([{key:\"header\",fn:function(m){return _c('div',{staticClass:\"modal-header\",attrs:{\"draggable\":\"true\"},on:{\"dragstart\":m.dragStart,\"dragend\":m.dragEnd}},[_c('div',[_vm._v(\"DM Settings\")]),_c('div',{staticClass:\"header-close\",on:{\"click\":function($event){_vm.visible = false}}},[_c('i',{staticClass:\"far fa-window-close\"})])])}}])},[_c('div',{staticClass:\"modal-body\",on:{\"click\":_vm.handleClick}},[_c('div',{attrs:{\"id\":\"categories\"}},_vm._l((_vm.categories),function(category,c){return _c('div',{key:category,staticClass:\"category\",class:{'selected': _vm.selection === c},on:{\"click\":function($event){_vm.selection = c}}},[_vm._v(_vm._s(category))])}),0),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.selection === 0),expression:\"selection === 0\"}],staticClass:\"panel\"},[_c('div',{staticClass:\"spanrow header\"},[_vm._v(\"Players\")]),_vm._l((_vm.$store.state.game.players),function(player){return _c('div',{key:player.id,staticClass:\"row smallrow\"},[_c('div',[_vm._v(_vm._s(player.name))]),_c('div',[_c('div',{on:{\"click\":function($event){return _vm.kickPlayer(player.id)}}},[_vm._v(\"Kick\")])])])}),(Object.values(_vm.$store.state.game.players).length === 0)?_c('div',{staticClass:\"row smallrow\"},[_c('div',{staticClass:\"spanrow\"},[_vm._v(\"There are no players yet, invite some using the link below!\")])]):_vm._e(),_c('div',{staticClass:\"spanrow header\"},[_vm._v(\"Invitecode\")]),_c('div',{staticClass:\"row\"},[_c('div',[_vm._v(\"Invitation URL:\")]),(_vm.showRefreshState)?[_c('InputCopyElement',{attrs:{\"value\":_vm.refreshState}})]:[_c('InputCopyElement',{attrs:{\"value\":_vm.invitationUrl}})]],2),_c('div',{staticClass:\"row\",on:{\"click\":_vm.refreshInviteCode}},[_c('div'),_c('div',[_c('button',[_vm._v(\"Refresh invitation code\")])])]),_c('div',{staticClass:\"spanrow header\"},[_vm._v(\"DangerZone\")]),_c('div',{staticClass:\"row\"},[_c('div',[(_vm.locked)?[_vm._v(\"Unlock\")]:[_vm._v(\"Lock\")],_vm._v(\" Session\"),_c('i',[_vm._v(\"(DM access only)\")])],2),_c('div',[_c('button',{staticClass:\"danger\",on:{\"click\":_vm.toggleSessionLock}},[(_vm.locked)?[_vm._v(\"Unlock\")]:[_vm._v(\"Lock\")],_vm._v(\" this Session\")],2)])]),_c('div',{staticClass:\"row\"},[_c('div',[_vm._v(\"Remove Session\")]),_c('div',[_c('button',{staticClass:\"danger\",on:{\"click\":_vm.deleteSession}},[_vm._v(\"Delete this Session\")])])])],2),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.selection === 1),expression:\"selection === 1\"}],staticClass:\"panel\"},[_c('div',{staticClass:\"row\"},[_c('label',{attrs:{\"for\":\"useGridInput\"}},[_vm._v(\"Use grid\")]),_c('div',[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.useGrid),expression:\"useGrid\"}],attrs:{\"id\":\"useGridInput\",\"type\":\"checkbox\"},domProps:{\"checked\":Array.isArray(_vm.useGrid)?_vm._i(_vm.useGrid,null)>-1:(_vm.useGrid)},on:{\"change\":function($event){var $$a=_vm.useGrid,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.useGrid=$$a.concat([$$v]))}else{$$i>-1&&(_vm.useGrid=$$a.slice(0,$$i).concat($$a.slice($$i+1)))}}else{_vm.useGrid=$$c}}}})])]),_c('div',{staticClass:\"row\"},[_c('label',{attrs:{\"for\":\"gridSizeInput\"}},[_vm._v(\"Grid Size (in pixels):\")]),_c('div',[_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.gridSize),expression:\"gridSize\",modifiers:{\"number\":true}}],attrs:{\"id\":\"gridSizeInput\",\"type\":\"number\",\"min\":\"0\"},domProps:{\"value\":(_vm.gridSize)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.gridSize=_vm._n($event.target.value)},\"blur\":function($event){return _vm.$forceUpdate()}}})])]),_c('div',{staticClass:\"row\"},[_c('label',{attrs:{\"for\":\"unitSizeInput\"}},[_vm._v(\"Unit Size (in ft.):\")]),_c('div',[_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.unitSize),expression:\"unitSize\",modifiers:{\"number\":true}}],attrs:{\"id\":\"unitSizeInput\",\"type\":\"number\"},domProps:{\"value\":(_vm.unitSize)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.unitSize=_vm._n($event.target.value)},\"blur\":function($event){return _vm.$forceUpdate()}}})])])]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.selection === 2),expression:\"selection === 2\"}],staticClass:\"panel\"},[_c('div',{staticClass:\"spanrow header\"},[_vm._v(\"Core\")]),_c('div',{staticClass:\"row\"},[_c('label',{attrs:{\"for\":\"fakePlayerInput\"}},[_vm._v(\"Fake player:\")]),_c('div',[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.fakePlayer),expression:\"fakePlayer\"}],attrs:{\"id\":\"fakePlayerInput\",\"type\":\"checkbox\"},domProps:{\"checked\":Array.isArray(_vm.fakePlayer)?_vm._i(_vm.fakePlayer,null)>-1:(_vm.fakePlayer)},on:{\"change\":function($event){var $$a=_vm.fakePlayer,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.fakePlayer=$$a.concat([$$v]))}else{$$i>-1&&(_vm.fakePlayer=$$a.slice(0,$$i).concat($$a.slice($$i+1)))}}else{_vm.fakePlayer=$$c}}}})])]),_c('div',{staticClass:\"row\"},[_c('label',{attrs:{\"for\":\"useFOWInput\"}},[_vm._v(\"Fill entire canvas with FOW:\")]),_c('div',[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.fullFOW),expression:\"fullFOW\"}],attrs:{\"id\":\"useFOWInput\",\"type\":\"checkbox\"},domProps:{\"checked\":Array.isArray(_vm.fullFOW)?_vm._i(_vm.fullFOW,null)>-1:(_vm.fullFOW)},on:{\"change\":function($event){var $$a=_vm.fullFOW,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.fullFOW=$$a.concat([$$v]))}else{$$i>-1&&(_vm.fullFOW=$$a.slice(0,$$i).concat($$a.slice($$i+1)))}}else{_vm.fullFOW=$$c}}}})])]),_c('div',{staticClass:\"row\"},[_c('label',{attrs:{\"for\":\"fowLOS\"}},[_vm._v(\"Only show lights in LoS:\")]),_c('div',[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.fowLOS),expression:\"fowLOS\"}],attrs:{\"id\":\"fowLOS\",\"type\":\"checkbox\"},domProps:{\"checked\":Array.isArray(_vm.fowLOS)?_vm._i(_vm.fowLOS,null)>-1:(_vm.fowLOS)},on:{\"change\":function($event){var $$a=_vm.fowLOS,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.fowLOS=$$a.concat([$$v]))}else{$$i>-1&&(_vm.fowLOS=$$a.slice(0,$$i).concat($$a.slice($$i+1)))}}else{_vm.fowLOS=$$c}}}})])]),_c('div',{staticClass:\"row\"},[_c('label',{attrs:{\"for\":\"fowOpacity\"}},[_vm._v(\"FOW opacity:\")]),_c('div',[_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.fowOpacity),expression:\"fowOpacity\",modifiers:{\"number\":true}}],attrs:{\"id\":\"fowOpacity\",\"type\":\"number\",\"min\":\"0\",\"max\":\"1\",\"step\":\"0.1\"},domProps:{\"value\":(_vm.fowOpacity)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.fowOpacity=_vm._n($event.target.value)},\"blur\":function($event){return _vm.$forceUpdate()}}})])]),_c('div',{staticClass:\"spanrow header\"},[_vm._v(\"Advanced\")]),_c('div',{staticClass:\"row\"},[_c('label',{attrs:{\"for\":\"visionMode\"}},[_vm._v(\"Vision Mode:\")]),_c('div',[_c('select',{attrs:{\"id\":\"visionMode\"},on:{\"change\":_vm.changeVisionMode}},[_c('option',{domProps:{\"selected\":_vm.$store.state.game.visionMode === 'bvh'}},[_vm._v(\"BVH\")]),_c('option',{domProps:{\"selected\":_vm.$store.state.game.visionMode === 'triangle'}},[_vm._v(\"Triangle\")])])])]),_c('div',{staticClass:\"row\"},[_c('label',{attrs:{\"for\":\"vmininp\"}},[_vm._v(\"Minimal full vision (ft):\")]),_c('div',[_c('input',{directives:[{name:\"model\",rawName:\"v-model.lazy.number\",value:(_vm.visionRangeMin),expression:\"visionRangeMin\",modifiers:{\"lazy\":true,\"number\":true}}],attrs:{\"id\":\"vmininp\",\"type\":\"number\",\"min\":\"0\"},domProps:{\"value\":(_vm.visionRangeMin)},on:{\"change\":function($event){_vm.visionRangeMin=_vm._n($event.target.value)},\"blur\":function($event){return _vm.$forceUpdate()}}})])]),_c('div',{staticClass:\"row\"},[_c('label',{attrs:{\"for\":\"vmaxinp\"}},[_vm._v(\"Maximal vision (ft):\")]),_c('div',[_c('input',{directives:[{name:\"model\",rawName:\"v-model.lazy.number\",value:(_vm.visionRangeMax),expression:\"visionRangeMax\",modifiers:{\"lazy\":true,\"number\":true}}],attrs:{\"id\":\"vmaxinp\",\"type\":\"number\",\"min\":\"0\"},domProps:{\"value\":(_vm.visionRangeMax)},on:{\"change\":function($event){_vm.visionRangeMax=_vm._n($event.target.value)},\"blur\":function($event){return _vm.$forceUpdate()}}})])])])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"17a953f2-vue-loader-template\\\"}!../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./dmsettings.vue?vue&type=template&id=b908e87c&scoped=true&\"","import tinycolor from \"tinycolor2\";\n\nimport { uuidv4 } from \"@/core/utils\";\nimport { socket } from \"@/game/api/socket\";\nimport { aurasFromServer, aurasToServer } from \"@/game/comm/conversion/aura\";\nimport { InitiativeData } from \"@/game/comm/types/general\";\nimport { ServerShape } from \"@/game/comm/types/shapes\";\nimport { GlobalPoint, LocalPoint, Vector } from \"@/game/geom\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { BoundingRect } from \"@/game/shapes/boundingrect\";\nimport { gameStore } from \"@/game/store\";\nimport { g2l, g2lr, g2lx, g2ly, g2lz } from \"@/game/units\";\nimport { TriangulationTarget } from '../visibility/te/pa';\n\nexport abstract class Shape {\n    // Used to create class instance from server shape data\n    abstract readonly type: string;\n    // The unique ID of this shape\n    readonly uuid: string;\n    // The layer the shape is currently on\n    layer!: string;\n\n    // A reference point regarding that specific shape's structure\n    protected _refPoint: GlobalPoint;\n\n    // Fill colour of the shape\n    fillColour: string = \"#000\";\n    strokeColour: string = \"rgba(0,0,0,0)\";\n    // The optional name associated with the shape\n    name = \"Unknown shape\";\n    nameVisible = true;\n\n    // Associated trackers/auras/owners\n    trackers: Tracker[] = [];\n    auras: Aura[] = [];\n    labels: Label[] = [];\n    protected _owners: string[] = [];\n\n    // Block light sources\n    visionObstruction = false;\n    // Prevent shapes from overlapping with this shape\n    movementObstruction = false;\n    // Does this shape represent a playable token\n    isToken = false;\n    // Show a highlight box\n    showHighlight = false;\n\n    // Mouseover annotation\n    annotation: string = \"\";\n\n    // Draw modus to use\n    globalCompositeOperation: string = \"source-over\";\n\n    // Additional options for specialized uses\n    options: Map<string, any> = new Map();\n\n    constructor(refPoint: GlobalPoint, fillColour?: string, strokeColour?: string, uuid?: string) {\n        this._refPoint = refPoint;\n        this.uuid = uuid || uuidv4();\n        if (fillColour !== undefined) this.fillColour = fillColour;\n        if (strokeColour !== undefined) this.strokeColour = strokeColour;\n    }\n\n    get refPoint() {\n        return this._refPoint;\n    }\n    set refPoint(point: GlobalPoint) {\n        this._refPoint = point;\n    }\n\n    abstract getBoundingBox(): BoundingRect;\n\n    // If inWorldCoord is\n    abstract contains(point: GlobalPoint): boolean;\n\n    abstract center(): GlobalPoint;\n    abstract center(centerPoint: GlobalPoint): void;\n    visibleInCanvas(canvas: HTMLCanvasElement): boolean {\n        // for (const aura of this.auras) {\n        //     if (aura.value > 0) {\n        //         const auraCircle = new Circle(this.center(), aura.value);\n        //         if (auraCircle.visibleInCanvas(canvas)) return true;\n        //     }\n        // }\n        return false;\n    }\n\n    // Code to snap a shape to the grid\n    // This is shape dependent as the shape refPoints are shape specific in\n    abstract snapToGrid(): void;\n    abstract resizeToGrid(): void;\n    abstract resize(resizePoint: number, point: LocalPoint): void;\n\n    abstract get points(): number[][];\n\n    getPointIndex(p: GlobalPoint, delta = 0): number {\n        for (const [idx, point] of this.points.entries()) {\n            if (Math.abs(p.x - point[0]) <= delta && Math.abs(p.y - point[1]) <= delta) return idx;\n        }\n        return -1;\n    }\n\n    getPointOrientation(i: number): Vector {\n        const prev = GlobalPoint.fromArray(this.points[(this.points.length + i - 1) % this.points.length]);\n        const point = GlobalPoint.fromArray(this.points[i]);\n        const next = GlobalPoint.fromArray(this.points[(i + 1) % this.points.length]);\n        const vec = next.subtract(prev);\n        const mid = prev.add(vec.multiply(0.5));\n        return point.subtract(mid).normalize();\n    }\n\n    invalidate(skipLightUpdate: boolean) {\n        const l = layerManager.getLayer(this.layer);\n        if (l) l.invalidate(skipLightUpdate);\n    }\n\n    checkVisionSources(recalculate = true): boolean {\n        let alteredVision = false;\n        const self = this;\n        const obstructionIndex = gameStore.visionBlockers.indexOf(this.uuid);\n        if (this.visionObstruction && obstructionIndex === -1) {\n            gameStore.visionBlockers.push(this.uuid);\n            if (recalculate) {\n                gameStore.addToTriag({target: TriangulationTarget.VISION, points: this.points });\n                alteredVision = true;\n            }\n        } else if (!this.visionObstruction && obstructionIndex >= 0) {\n            gameStore.visionBlockers.splice(obstructionIndex, 1);\n            if (recalculate) {\n                gameStore.deleteFromTriag({ target: TriangulationTarget.VISION, points: this.points, standalone: true });\n                alteredVision = true;\n            }\n        }\n\n        // Check if the visionsource auras are in the gameManager\n        this.auras.forEach(au => {\n            const ls = gameStore.visionSources;\n            const i = ls.findIndex(o => o.aura === au.uuid);\n            if (au.visionSource && i === -1) {\n                ls.push({ shape: self.uuid, aura: au.uuid });\n            } else if (!au.visionSource && i >= 0) {\n                ls.splice(i, 1);\n            }\n        });\n        // Check if anything in the gameManager referencing this shape is in fact still a visionsource\n        for (let i = gameStore.visionSources.length - 1; i >= 0; i--) {\n            const ls = gameStore.visionSources[i];\n            if (ls.shape === self.uuid) {\n                if (!self.auras.some(a => a.uuid === ls.aura && a.visionSource)) gameStore.visionSources.splice(i, 1);\n            }\n        }\n        return alteredVision;\n    }\n\n    setMovementBlock(blocksMovement: boolean, recalculate = true) {\n        this.movementObstruction = blocksMovement || false;\n        const obstructionIndex = gameStore.movementblockers.indexOf(this.uuid);\n        let alteredMovement = false;\n        if (this.movementObstruction && obstructionIndex === -1) {\n            gameStore.movementblockers.push(this.uuid);\n            if (recalculate) {\n                gameStore.addToTriag({ target: TriangulationTarget.MOVEMENT, points: this.points });\n                alteredMovement = true;\n            }\n        } else if (!this.movementObstruction && obstructionIndex >= 0) {\n            gameStore.movementblockers.splice(obstructionIndex, 1);\n            if (recalculate) {\n                gameStore.deleteFromTriag({ target: TriangulationTarget.MOVEMENT, points: this.points, standalone: true });\n                alteredMovement = true;\n            }\n        }\n        return alteredMovement;\n    }\n\n    setIsToken(isToken: boolean) {\n        this.isToken = isToken;\n        if (this.ownedBy()) {\n            const i = gameStore.ownedtokens.indexOf(this.uuid);\n            if (this.isToken && i === -1) gameStore.ownedtokens.push(this.uuid);\n            else if (!this.isToken && i >= 0) gameStore.ownedtokens.splice(i, 1);\n        }\n    }\n\n    abstract asDict(): ServerShape;\n    getBaseDict(): ServerShape {\n        return {\n            type_: this.type,\n            uuid: this.uuid,\n            x: this.refPoint.x,\n            y: this.refPoint.y,\n            layer: this.layer,\n            draw_operator: this.globalCompositeOperation,\n            movement_obstruction: this.movementObstruction,\n            vision_obstruction: this.visionObstruction,\n            auras: aurasToServer(this.auras),\n            trackers: this.trackers,\n            labels: this.labels,\n            owners: this._owners,\n            fill_colour: this.fillColour,\n            stroke_colour: this.strokeColour,\n            name: this.name,\n            name_visible: this.nameVisible,\n            annotation: this.annotation,\n            is_token: this.isToken,\n            options: JSON.stringify([...this.options]),\n        };\n    }\n    fromDict(data: ServerShape) {\n        this.layer = data.layer;\n        this.globalCompositeOperation = data.draw_operator;\n        this.movementObstruction = data.movement_obstruction;\n        this.visionObstruction = data.vision_obstruction;\n        this.auras = aurasFromServer(data.auras);\n        this.trackers = data.trackers;\n        this.labels = data.labels;\n        this._owners = data.owners;\n        this.isToken = data.is_token;\n        this.nameVisible = data.name_visible;\n        if (data.annotation) this.annotation = data.annotation;\n        if (data.name) this.name = data.name;\n        if (data.options) this.options = new Map(JSON.parse(data.options));\n    }\n\n    draw(ctx: CanvasRenderingContext2D) {\n        if (this.globalCompositeOperation !== undefined) ctx.globalCompositeOperation = this.globalCompositeOperation;\n        else ctx.globalCompositeOperation = \"source-over\";\n        if (this.showHighlight) {\n            const bbox = this.getBoundingBox();\n            ctx.strokeStyle = \"red\";\n            ctx.strokeRect(g2lx(bbox.topLeft.x) - 5, g2ly(bbox.topLeft.y) - 5, g2lz(bbox.w) + 10, g2lz(bbox.h) + 10);\n        }\n    }\n\n    drawAuras(ctx: CanvasRenderingContext2D) {\n        for (const aura of this.auras) {\n            if (aura.value === 0 && aura.dim === 0) return;\n            ctx.beginPath();\n\n            const loc = g2l(this.center());\n            const innerRange = g2lr(aura.value + aura.dim);\n\n            if (aura.dim === 0) ctx.fillStyle = aura.colour;\n            else {\n                const gradient = ctx.createRadialGradient(\n                    loc.x,\n                    loc.y,\n                    g2lr(aura.value),\n                    loc.x,\n                    loc.y,\n                    g2lr(aura.value + aura.dim),\n                );\n                const tc = tinycolor(aura.colour);\n                ctx.fillStyle = gradient;\n                gradient.addColorStop(0, aura.colour);\n                gradient.addColorStop(1, tc.setAlpha(0).toRgbString());\n            }\n            if (!aura.visionSource || aura.lastPath === undefined) {\n                ctx.arc(loc.x, loc.y, innerRange, 0, 2 * Math.PI);\n                ctx.fill();\n            } else {\n                try {\n                    ctx.fill(aura.lastPath);\n                } catch (e) {\n                    ctx.arc(loc.x, loc.y, innerRange, 0, 2 * Math.PI);\n                    ctx.fill();\n                    console.warn(e);\n                }\n            }\n        }\n    }\n\n    getInitiativeRepr(): InitiativeData {\n        return {\n            uuid: this.uuid,\n            visible: !gameStore.IS_DM,\n            group: false,\n            source: this.name,\n            has_img: false,\n            effects: [],\n            index: Infinity,\n        };\n    }\n\n    moveLayer(layer: string, sync: boolean) {\n        const oldLayer = layerManager.getLayer(this.layer);\n        const newLayer = layerManager.getLayer(layer);\n        if (oldLayer === undefined || newLayer === undefined) return;\n        this.layer = layer;\n        // Update layer shapes\n        oldLayer.shapes.splice(oldLayer.shapes.indexOf(this), 1);\n        newLayer.shapes.push(this);\n        // Revalidate layers  (light should at most be redone once)\n        oldLayer.invalidate(true);\n        newLayer.invalidate(false);\n        // Sync!\n        if (sync) socket.emit(\"Shape.Layer.Change\", { uuid: this.uuid, layer });\n    }\n\n    get owners() {\n        return Object.freeze(this._owners.slice());\n    }\n\n    ownedBy(username?: string) {\n        if (username === undefined) username = gameStore.username;\n        return gameStore.IS_DM || this._owners.includes(username) || (gameStore.FAKE_PLAYER && gameStore.activeTokens.includes(this.uuid));\n    }\n\n    addOwner(owner: string) {\n        if (!this._owners.includes(owner)) this._owners.push(owner);\n    }\n\n    updateOwner(oldValue: string, newValue: string) {\n        const ownerIndex = this._owners.findIndex(o => o === oldValue);\n        if (ownerIndex >= 0) this._owners.splice(ownerIndex, 1, newValue);\n        else this.addOwner(newValue);\n    }\n\n    removeOwner(owner: string) {\n        const ownerIndex = this._owners.findIndex(o => o === owner);\n        this._owners.splice(ownerIndex, 1);\n    }\n}\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./prompt.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./prompt.vue?vue&type=script&lang=ts&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"menuContainer\"}},[_c('div',{ref:\"rm\",style:({\n            left: _vm.visible.settings ? '200px' : '0',\n            top: _vm.visible.locations ? '100px' : '0'\n        }),attrs:{\"id\":\"radialmenu\"}},[_c('div',{staticClass:\"rm-wrapper\"},[_c('div',{staticClass:\"rm-toggler\"},[_c('ul',{staticClass:\"rm-list\",class:{ 'rm-list-dm': _vm.IS_DM }},[(_vm.IS_DM)?_c('li',{staticClass:\"rm-item\",attrs:{\"id\":\"rm-locations\"},on:{\"click\":function($event){_vm.visible.locations = !_vm.visible.locations}}},[_vm._m(0)]):_vm._e(),_c('li',{staticClass:\"rm-item\",attrs:{\"id\":\"rm-settings\"},on:{\"click\":function($event){_vm.visible.settings = !_vm.visible.settings}}},[_vm._m(1)])])]),_vm._m(2)])]),_c('transition',{attrs:{\"name\":\"settings\"},on:{\"enter\":function($event){_vm.$refs.rm.style.transition = 'left 500ms'}}},[(_vm.visible.settings)?_c('div',{ref:\"settings\",attrs:{\"id\":\"menu\"},on:{\"click\":_vm.settingsClick}},[_c('div',{staticStyle:{\"width\":\"200px\",\"height\":\"90%\",\"overflow-y\":\"auto\",\"overflow-x\":\"hidden\"}},[(_vm.IS_DM)?[_c('button',{staticClass:\"menu-accordion\"},[_vm._v(\"Assets\")]),_c('div',{staticClass:\"menu-accordion-panel\"},[_c('a',{staticClass:\"actionButton\",attrs:{\"href\":\"/assets\",\"target\":\"blank\",\"title\":\"Open asset manager\"}},[_c('i',{staticClass:\"fas fa-external-link-alt\"})]),_c('div',{staticClass:\"directory\",attrs:{\"id\":\"menu-tokens\"}},[_c('asset-node',{attrs:{\"asset\":_vm.assets}}),(!_vm.assets)?_c('div',[_vm._v(\"No assets\")]):_vm._e()],1)]),_c('button',{staticClass:\"menu-accordion\"},[_vm._v(\"Notes\")]),_c('div',{staticClass:\"menu-accordion-panel\"},[_c('div',{staticClass:\"menu-accordion-subpanel\",attrs:{\"id\":\"menu-notes\"}},[_c('a',{staticClass:\"actionButton\",on:{\"click\":_vm.createNote}},[_c('i',{staticClass:\"far fa-plus-square\"})]),_vm._l((_vm.notes),function(note){return _c('div',{key:note.uuid,staticStyle:{\"cursor\":\"pointer\"},on:{\"click\":function($event){return _vm.openNote(note)}}},[_vm._v(_vm._s(note.title || \"[?]\"))])}),(!_vm.notes.length)?_c('div',[_vm._v(\"No notes\")]):_vm._e()],2)]),_c('button',{staticClass:\"menu-accordion\",on:{\"click\":_vm.openDmSettings}},[_vm._v(\"DM Options\")])]:_vm._e(),_c('button',{staticClass:\"menu-accordion\"},[_vm._v(\"Client Options\")]),_c('div',{staticClass:\"menu-accordion-panel\"},[_c('div',{staticClass:\"menu-accordion-subpanel\"},[_c('label',{attrs:{\"for\":\"gridColour\"}},[_vm._v(\"Grid Colour:\")]),_c('color-picker',{attrs:{\"id\":\"gridColour\",\"color\":_vm.gridColour},on:{\"update:color\":function($event){_vm.gridColour=$event}}}),_c('label',{attrs:{\"for\":\"fowColour\"}},[_vm._v(\"FOW Colour:\")]),_c('color-picker',{attrs:{\"id\":\"fowColour\",\"color\":_vm.fowColour},on:{\"update:color\":function($event){_vm.fowColour=$event}}}),_c('label',{attrs:{\"for\":\"rulerColour\"}},[_vm._v(\"Ruler Colour:\")]),_c('color-picker',{attrs:{\"id\":\"rulerColour\",\"color\":_vm.rulerColour},on:{\"update:color\":function($event){_vm.rulerColour=$event}}})],1)])],2),_c('router-link',{staticClass:\"menu-accordion\",staticStyle:{\"text-decoration\":\"none\",\"display\":\"inline-block\",\"position\":\"absolute\",\"bottom\":\"0\"},attrs:{\"to\":\"/dashboard\"}},[_vm._v(\"Exit\")])],1):_vm._e()]),_c('transition',{attrs:{\"name\":\"locations\"},on:{\"enter\":function($event){_vm.$refs.rm.style.transition = 'top 500ms'}}},[(_vm.IS_DM && _vm.visible.locations)?_c('div',{attrs:{\"id\":\"locations-menu\"}},[_c('div',[_vm._l((_vm.locations),function(location){return _c('div',{key:location,on:{\"click\":function($event){return _vm.changeLocation(location)}}},[_vm._v(_vm._s(location))])}),_c('div',{on:{\"click\":_vm.createLocation}},[_c('i',{staticClass:\"fas fa-plus\"})])],2)]):_vm._e()]),_c('img',{attrs:{\"id\":\"dragImage\"}})],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('a',{attrs:{\"href\":\"#\"}},[_c('i',{staticClass:\"far fa-compass\"})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('a',{attrs:{\"href\":\"#\"}},[_c('i',{staticClass:\"fas fa-cog\"})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',{staticClass:\"rm-topper\"},[_c('i',{staticClass:\"icon-share-alt\"})])}]\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"17a953f2-vue-loader-template\\\"}!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./menu.vue?vue&type=template&id=c7fe324c&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.note !== null)?_c('modal',{attrs:{\"visible\":_vm.visible,\"mask\":false},on:{\"close\":function($event){_vm.visible = false}},scopedSlots:_vm._u([{key:\"header\",fn:function(m){return _c('div',{staticClass:\"modal-header\",attrs:{\"draggable\":\"true\"},on:{\"dragstart\":m.dragStart,\"dragend\":m.dragEnd}},[_c('span',{on:{\"click\":function($event){return _vm.$refs.title.select()}}},[_c('i',{staticClass:\"fas fa-pencil-alt\",staticStyle:{\"font-size\":\"15px\"}})]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.note.title),expression:\"note.title\"}],ref:\"title\",domProps:{\"value\":(_vm.note.title)},on:{\"change\":_vm.updateNote,\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.note, \"title\", $event.target.value)}}}),_c('div',{staticClass:\"header-close\",on:{\"click\":function($event){_vm.visible = false}}},[_c('i',{staticClass:\"far fa-window-close\"})])])}}],null,false,1320213373)},[_c('div',{staticClass:\"modal-body\"},[_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.note.text),expression:\"note.text\"}],ref:\"textarea\",style:({'height': _vm.calcHeight()}),domProps:{\"value\":(_vm.note.text)},on:{\"change\":_vm.updateNote,\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.note, \"text\", $event.target.value)}}})]),_c('div',{staticClass:\"modal-footer\"},[_c('button',{on:{\"click\":_vm.removeNote}},[_c('i',{staticClass:\"far fa-trash-alt\"}),_vm._v(\" Remove\\n    \")])])]):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"17a953f2-vue-loader-template\\\"}!../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./note.vue?vue&type=template&id=7a3669fd&scoped=true&\"","\n\n\n\n\nimport Component from \"vue-class-component\";\n\nimport SelectContext from \"@/game/ui/tools/selectcontext.vue\";\nimport Tool from \"@/game/ui/tools/tool.vue\";\nimport SelectionInfo from \"../selection/selection_info.vue\";\n\nimport { getRef } from \"@/core/utils\";\nimport { socket } from \"@/game/api/socket\";\nimport { GlobalPoint, LocalPoint, Ray, Vector } from \"@/game/geom\";\nimport { Layer } from \"@/game/layers/layer\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { Rect } from \"@/game/shapes/rect\";\nimport { gameStore } from \"@/game/store\";\nimport { calculateDelta } from \"@/game/ui/tools/utils\";\nimport { g2l, g2lr, g2lx, g2ly, g2lz, l2g, l2gz } from \"@/game/units\";\nimport { getMouse } from \"@/game/utils\";\nimport { TriangulationTarget } from '../../visibility/te/pa';\n\nexport enum SelectOperations {\n    Noop,\n    Resize,\n    Drag,\n    GroupSelect,\n}\n\nconst start = new GlobalPoint(-1000, -1000);\n\n@Component({\n    components: {\n        SelectContext,\n    },\n})\nexport default class SelectTool extends Tool {\n    name = \"Select\";\n    showContextMenu = false;\n    active = false;\n\n    mode = SelectOperations.Noop;\n    resizePoint = 0;\n    deltaChanged = false;\n    // Because we never drag from the asset's (0, 0) coord and want a smoother drag experience\n    // we keep track of the actual offset within the asset.\n    dragRay = new Ray<LocalPoint>(new LocalPoint(0, 0), new Vector(0, 0));\n    selectionStartPoint = start;\n    selectionHelper = new Rect(start, 0, 0);\n    created() {\n        this.selectionHelper.globalCompositeOperation = \"source-over\";\n    }\n    onMouseDown(event: MouseEvent) {\n        const layer = layerManager.getLayer();\n        if (layer === undefined) {\n            console.log(\"No active layer!\");\n            return;\n        }\n\n        if (!this.selectionHelper.owners.includes(gameStore.username)) {\n            this.selectionHelper.addOwner(gameStore.username);\n        }\n\n        const mouse = getMouse(event);\n        const globalMouse = l2g(mouse);\n\n        let hit = false;\n        // The selectionStack allows for lower positioned objects that are selected to have precedence during overlap.\n        let selectionStack;\n        if (!layer.selection.length) selectionStack = layer.shapes;\n        else selectionStack = layer.shapes.concat(layer.selection);\n        for (let i = selectionStack.length - 1; i >= 0; i--) {\n            const shape = selectionStack[i];\n\n            this.resizePoint = shape.getPointIndex(globalMouse, l2gz(3));\n\n            // Resize case, a corner is selected\n            if (this.resizePoint >= 0) {\n                layer.selection = [shape];\n                getRef<SelectionInfo>(\"selectionInfo\").shape = shape;\n                this.mode = SelectOperations.Resize;\n                layer.invalidate(true);\n                hit = true;\n                break;\n\n                // Drag case, a shape is selected\n            } else if (shape.contains(globalMouse)) {\n                const selection = shape;\n                if (layer.selection.indexOf(selection) === -1) {\n                    layer.selection = [selection];\n                    getRef<SelectionInfo>(\"selectionInfo\").shape = selection;\n                }\n                this.mode = SelectOperations.Drag;\n                const localRefPoint = g2l(selection.refPoint);\n                this.dragRay = new Ray<LocalPoint>(localRefPoint, mouse.subtract(localRefPoint));\n                layer.invalidate(true);\n                hit = true;\n                break;\n            }\n        }\n\n        // GroupSelect case, draw a selection box to select multiple shapes\n        if (!hit) {\n            this.mode = SelectOperations.GroupSelect;\n            for (const selection of layer.selection) getRef<SelectionInfo>(\"selectionInfo\").shape = selection;\n\n            this.selectionStartPoint = globalMouse;\n\n            this.selectionHelper.refPoint = this.selectionStartPoint;\n            this.selectionHelper.w = 0;\n            this.selectionHelper.h = 0;\n\n            layer.selection = [this.selectionHelper];\n            layer.invalidate(true);\n        }\n        this.active = true;\n    }\n    onMouseMove(event: MouseEvent) {\n        // if (!this.active) return;   we require mousemove for the resize cursor\n        const layer = layerManager.getLayer();\n        if (layer === undefined) {\n            console.log(\"No active layer!\");\n            return;\n        }\n        const mouse = getMouse(event);\n        const globalMouse = l2g(mouse);\n        this.deltaChanged = false;\n\n        if (this.mode === SelectOperations.GroupSelect) {\n            // Currently draw on active layer\n            const endPoint = globalMouse;\n\n            this.selectionHelper.w = Math.abs(endPoint.x - this.selectionStartPoint.x);\n            this.selectionHelper.h = Math.abs(endPoint.y - this.selectionStartPoint.y);\n            this.selectionHelper.refPoint = new GlobalPoint(\n                Math.min(this.selectionStartPoint.x, endPoint.x),\n                Math.min(this.selectionStartPoint.y, endPoint.y),\n            );\n            layer.invalidate(true);\n        } else if (layer.selection.length) {\n            const og = g2l(layer.selection[layer.selection.length - 1].refPoint);\n            const origin = og.add(this.dragRay.direction);\n            let delta = mouse.subtract(origin).multiply(1 / gameStore.zoomFactor);\n            const ogDelta = delta;\n            if (this.mode === SelectOperations.Drag) {\n                // If we are on the tokens layer do a movement block check.\n                if (layer.name === \"tokens\" && !(event.shiftKey && gameStore.IS_DM)) {\n                    for (const sel of layer.selection) {\n                        if (!sel.ownedBy()) continue;\n                        if (sel.uuid === this.selectionHelper.uuid) continue; // the selection helper should not be treated as a real shape.\n                        delta = calculateDelta(delta, sel);\n                        if (delta !== ogDelta) this.deltaChanged = true;\n                    }\n                }\n                // Actually apply the delta on all shapes\n                for (const sel of layer.selection) {\n                    if (!sel.ownedBy()) continue;\n                    if (sel.visionObstruction) gameStore.deleteFromTriag({ target: TriangulationTarget.VISION, points: sel.points, standalone: false});\n                    sel.refPoint = sel.refPoint.add(delta);\n                    if (sel.visionObstruction) gameStore.addToTriag({ target: TriangulationTarget.VISION, points: sel.points});\n                    if (sel !== this.selectionHelper) {\n                        socket.emit(\"Shape.Update\", { shape: sel.asDict(), redraw: true, temporary: true });\n                    }\n                }\n                layer.invalidate(false);\n            } else if (this.mode === SelectOperations.Resize) {\n                for (const sel of layer.selection) {\n                    if (!sel.ownedBy()) continue;\n                    if (sel.visionObstruction) gameStore.deleteFromTriag({ target: TriangulationTarget.VISION, points: sel.points, standalone: false});\n                    sel.resize(this.resizePoint, mouse);\n                    if (sel !== this.selectionHelper) {\n                        // todo: think about calling deleteIntersectVertex directly on the corner point\n                        if (sel.visionObstruction) gameStore.addToTriag({ target: TriangulationTarget.VISION, points: sel.points});\n                        socket.emit(\"Shape.Update\", { shape: sel.asDict(), redraw: true, temporary: true });\n                    }\n                    layer.invalidate(false);\n                    this.updateCursor(layer, globalMouse);\n                }\n            } else {\n                this.updateCursor(layer, globalMouse);\n            }\n        } else {\n            document.body.style.cursor = \"default\";\n        }\n    }\n    onMouseUp(e: MouseEvent): void {\n        if (!this.active) return;\n        if (layerManager.getLayer() === undefined) {\n            console.log(\"No active layer!\");\n            return;\n        }\n        const layer = layerManager.getLayer()!;\n\n        if (this.mode === SelectOperations.GroupSelect) {\n            layer.clearSelection();\n            layer.shapes.forEach(shape => {\n                if (!shape.ownedBy()) return;\n                if (shape === this.selectionHelper) return;\n                const bbox = shape.getBoundingBox();\n                if (!shape.ownedBy()) return;\n                if (\n                    this.selectionHelper!.refPoint.x <= bbox.topRight.x &&\n                    this.selectionHelper!.refPoint.x + this.selectionHelper!.w >= bbox.topLeft.x &&\n                    this.selectionHelper!.refPoint.y <= bbox.botLeft.y &&\n                    this.selectionHelper!.refPoint.y + this.selectionHelper!.h >= bbox.topLeft.y\n                ) {\n                    layer.selection.push(shape);\n                }\n            });\n\n            // Push the selection helper as the last element of the selection\n            // This makes sure that it will be the first one to be hit in the hit detection onMouseDown\n            if (layer.selection.length > 0) layer.selection.push(this.selectionHelper);\n\n            layer.invalidate(true);\n        } else if (layer.selection.length) {\n            layer.selection.forEach(sel => {\n                if (!sel.ownedBy()) return;\n                if (this.mode === SelectOperations.Drag) {\n                    if (\n                        this.dragRay.origin!.x === g2lx(sel.refPoint.x) &&\n                        this.dragRay.origin!.y === g2ly(sel.refPoint.y)\n                    )\n                        return;\n\n                    if (gameStore.useGrid && !e.altKey && !this.deltaChanged) {\n                        if (sel.visionObstruction) gameStore.deleteFromTriag({ target: TriangulationTarget.VISION, points: sel.points, standalone: false});\n                        if (sel.movementObstruction) gameStore.deleteFromTriag({ target: TriangulationTarget.MOVEMENT, points: sel.points, standalone: false});\n                        sel.snapToGrid();\n                        if (sel.visionObstruction) gameStore.addToTriag({ target: TriangulationTarget.VISION, points: sel.points});\n                        if (sel.movementObstruction) gameStore.addToTriag({ target: TriangulationTarget.MOVEMENT, points: sel.points});\n                    }\n\n                    if (sel !== this.selectionHelper) {\n                        socket.emit(\"Shape.Update\", { shape: sel.asDict(), redraw: true, temporary: false });\n                    }\n                    layer.invalidate(false);\n                }\n                if (this.mode === SelectOperations.Resize) {\n                    if (gameStore.useGrid && !e.altKey) {\n                        if (sel.visionObstruction) gameStore.deleteFromTriag({ target: TriangulationTarget.VISION, points: sel.points, standalone: false});\n                        if (sel.movementObstruction) gameStore.deleteFromTriag({ target: TriangulationTarget.MOVEMENT, points: sel.points, standalone: false});\n                        sel.snapToGrid();\n                        if (sel.visionObstruction) gameStore.addToTriag({ target: TriangulationTarget.VISION, points: sel.points});\n                        if (sel.visionObstruction) gameStore.addToTriag({ target: TriangulationTarget.VISION, points: sel.points});\n                    }\n                    if (sel !== this.selectionHelper) {\n                        socket.emit(\"Shape.Update\", { shape: sel.asDict(), redraw: true, temporary: false });\n                    }\n                    layer.invalidate(false);\n                }\n            });\n        }\n        this.mode = SelectOperations.Noop;\n        this.active = false;\n    }\n    onContextMenu(event: MouseEvent) {\n        if (layerManager.getLayer() === undefined) {\n            console.log(\"No active layer!\");\n            return;\n        }\n        const layer = layerManager.getLayer()!;\n        const mouse = getMouse(event);\n        const globalMouse = l2g(mouse);\n\n        for (const shape of layer.selection) {\n            if (shape.contains(globalMouse) && shape !== this.selectionHelper) {\n                layer.selection = [shape];\n                getRef<SelectionInfo>(\"selectionInfo\").shape = shape;\n                layer.invalidate(true);\n                (<any>this.$parent.$refs.shapecontext).open(event, shape);\n                return;\n            }\n        }\n        (<any>this.$refs.selectcontext).open(event);\n    }\n    updateCursor(layer: Layer, globalMouse: GlobalPoint) {\n        for (const sel of layer.selection) {\n            const resizePoint = sel.getPointIndex(globalMouse, l2gz(3));\n            if (resizePoint < 0) document.body.style.cursor = \"default\";\n            else {\n                let angle = sel.getPointOrientation(resizePoint).angle();\n                if (angle < 0) angle += 360;\n                const d = 45 / 2;\n                if (angle >= 315 + d || angle < d || (angle >= 135 + d && angle < 225 - d))\n                    document.body.style.cursor = \"ew-resize\";\n                if ((angle >= 45 + d && angle < 135 - d) || (angle >= 225 + d && angle < 315 - d))\n                    document.body.style.cursor = \"ns-resize\";\n                if ((angle >= d && angle < 90 - d) || (angle >= 180 + d && angle < 270 - d))\n                    document.body.style.cursor = \"nwse-resize\";\n                if ((angle >= 90 + d && angle < 180 - d) || (angle >= 270 + d && angle < 360 - d))\n                    document.body.style.cursor = \"nesw-resize\";\n            }\n        }\n    }\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\n\nimport { mapState } from \"vuex\";\n\nimport InputCopyElement from \"@/core/components/inputCopy.vue\";\nimport Modal from \"@/core/components/modals/modal.vue\";\nimport Prompt from '../../core/components/modals/prompt.vue';\n\nimport { getRef, uuidv4 } from \"@/core/utils\";\nimport { socket } from \"@/game/api/socket\";\nimport { EventBus } from \"@/game/event-bus\";\nimport { gameStore } from \"@/game/store\";\nimport { layerManager } from \"../layers/manager\";\n\n@Component({\n    components: {\n        InputCopyElement,\n        Modal,\n    },\n    computed: {\n        ...mapState(\"game\", [\"invitationCode\"]),\n    },\n})\nexport default class DmSettings extends Vue {\n    visible = false;\n    categories = [\"Admin\", \"Grid\", \"Vision\"];\n    selection = 0;\n\n    showRefreshState = false;\n    refreshState = \"pending\";\n\n    mounted() {\n        EventBus.$on(\"DmSettings.Open\", () => {\n            this.visible = true;\n        });\n        EventBus.$on(\"DmSettings.RefreshedInviteCode\", () => {\n            this.showRefreshState = false;\n        });\n    }\n\n    beforeDestroy() {\n        EventBus.$off(\"DmSettings.Open\");\n        EventBus.$off(\"DmSettings.RefreshedInviteCode\");\n    }\n\n    // Admin\n    get invitationUrl(): string {\n        return window.location.protocol + '//' + window.location.host + '/invite/' + gameStore.invitationCode;\n    }\n    get locked(): boolean {\n        return gameStore.isLocked;\n    }\n    // Grid\n    get useGrid(): boolean {\n        return gameStore.useGrid;\n    }\n    set useGrid(value: boolean) {\n        gameStore.setUseGrid({ useGrid: value, sync: true });\n    }\n    get unitSize(): number {\n        return gameStore.unitSize;\n    }\n    set unitSize(value: number) {\n        if (typeof value !== \"number\") return;\n        gameStore.setUnitSize({ unitSize: value, sync: true });\n    }\n    get gridSize(): number {\n        return gameStore.gridSize;\n    }\n    set gridSize(value: number) {\n        if (typeof value !== \"number\") return;\n        gameStore.setGridSize({ gridSize: value, sync: true });\n    }\n    // Vision\n    get fakePlayer(): boolean {\n        return gameStore.FAKE_PLAYER;\n    }\n    set fakePlayer(value: boolean) {\n        gameStore.setFakePlayer(value);\n    }\n    get fullFOW(): boolean {\n        return gameStore.fullFOW;\n    }\n    set fullFOW(value: boolean) {\n        gameStore.setFullFOW({ fullFOW: value, sync: true });\n    }\n    get fowOpacity(): number {\n        return gameStore.fowOpacity;\n    }\n    set fowOpacity(value: number) {\n        if (typeof value !== \"number\") return;\n        gameStore.setFOWOpacity({ fowOpacity: value, sync: true });\n    }\n    get fowLOS(): boolean {\n        return gameStore.fowLOS;\n    }\n    set fowLOS(value: boolean) {\n        gameStore.setLineOfSight({ fowLOS: value, sync: true });\n    }\n    get visionRangeMin(): number {\n        return gameStore.visionRangeMin;\n    }\n    set visionRangeMin(value: number) {\n        if (typeof value !== \"number\") return;\n        gameStore.setVisionRangeMin({ value, sync: true });\n    }\n    get visionRangeMax(): number {\n        return gameStore.visionRangeMax;\n    }\n    set visionRangeMax(value: number) {\n        if (typeof value !== \"number\") return;\n        gameStore.setVisionRangeMax({ value, sync: true });\n    }\n    changeVisionMode(event: { target: HTMLSelectElement }) {\n        const value = event.target.value.toLowerCase();\n        if (value !== \"bvh\" && value !== \"triangle\") return;\n        gameStore.setVisionMode({ mode: value, sync: true });\n        gameStore.recalculateVision();\n        gameStore.recalculateMovement();\n        layerManager.invalidate();\n    }\n    handleClick(event: { target: HTMLElement }) {\n        const child = event.target.firstElementChild;\n        if (child instanceof HTMLInputElement) {\n            child.click();\n        }\n    }\n    refreshInviteCode() {\n        socket.emit(\"Room.Info.InviteCode.Refresh\");\n        this.refreshState = \"pending\";\n        this.showRefreshState = true;\n    }\n    kickPlayer(id: number) {\n        socket.emit(\"Room.Info.Players.Kick\", id);\n        gameStore.kickPlayer(id);\n    }\n    toggleSessionLock() {\n        gameStore.setIsLocked({isLocked: !gameStore.isLocked, sync: true});\n    }\n    deleteSession() {\n        getRef<Prompt>(\"prompt\")\n            .prompt(`ENTER ${gameStore.roomCreator}/${gameStore.roomName} TO CONFIRM SESSION REMOVAL.`, `DELETING SESSION`)\n            .then(\n                (value: string) => {\n                    if (value !== `${gameStore.roomCreator}/${gameStore.roomName}`) return;\n                    socket.emit(\"Room.Delete\");\n                    this.$router.push(\"/\");\n                },\n                () => {},\n            );\n    }\n}\n","import { GlobalPoint, Ray, Vector } from \"@/game/geom\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { Shape } from \"@/game/shapes/shape\";\nimport { gameStore } from \"@/game/store\";\nimport { PA_CDT } from \"@/game/visibility/te/pa\";\nimport { Point, Sign, Triangle } from \"@/game/visibility/te/tds\";\nimport { ccw, cw, intersection, orientation } from \"@/game/visibility/te/triag\";\n\n// First go through each shape in the selection and see if the delta has to be truncated due to movement blockers\n\n// This is definitely super convoluted and inefficient but I was tired and really wanted the smooth wall sliding collision stuff to work\n// And it does now, so hey \\_()_/\nexport function calculateDelta(delta: Vector, sel: Shape, done?: string[]) {\n    if (delta.x === 0 && delta.y === 0) return delta;\n    if (gameStore.visionMode === \"bvh\") {\n        if (done === undefined) done = [];\n        const ogSelBBox = sel.getBoundingBox();\n        const newSelBBox = ogSelBBox.offset(delta);\n        let refine = false;\n        for (const movementBlocker of gameStore.movementblockers) {\n            if (done.includes(movementBlocker)) continue;\n            const blocker = layerManager.UUIDMap.get(movementBlocker)!;\n            const blockerBBox = blocker.getBoundingBox();\n            let found = blockerBBox.intersectsWithInner(newSelBBox);\n            if (!found) {\n                // This is an edge case, precalculating the rays is not worth in this case.\n                const ray = Ray.fromPoints(ogSelBBox.topLeft.add(delta.normalize()), newSelBBox.topLeft);\n                const invDir = ray.direction.inverse();\n                const dirIsNegative = [invDir.x < 0, invDir.y < 0];\n                found = blockerBBox.intersectP(ray, invDir, dirIsNegative).hit;\n            }\n            // Check if the bounding box of our destination would intersect with the bounding box of the movementblocker\n            if (found) {\n                const bCenter = blockerBBox.center();\n                const sCenter = ogSelBBox.center();\n\n                const d = sCenter.subtract(bCenter);\n                const ux = new Vector(1, 0);\n                const uy = new Vector(0, 1);\n                let dx = d.dot(ux);\n                let dy = d.dot(uy);\n                if (dx > blockerBBox.w / 2) dx = blockerBBox.w / 2;\n                if (dx < -blockerBBox.w / 2) dx = -blockerBBox.w / 2;\n                if (dy > blockerBBox.h / 2) dy = blockerBBox.h / 2;\n                if (dy < -blockerBBox.h / 2) dy = -blockerBBox.h / 2;\n\n                // Closest point / intersection point between the two bboxes.  Not the delta intersect!\n                const p = bCenter.add(ux.multiply(dx)).add(uy.multiply(dy));\n\n                if (p.x === ogSelBBox.topLeft.x || p.x === ogSelBBox.topRight.x) delta = new Vector(0, delta.y);\n                else if (p.y === ogSelBBox.topLeft.y || p.y === ogSelBBox.botLeft.y) delta = new Vector(delta.x, 0);\n                else {\n                    if (p.x < ogSelBBox.topLeft.x) delta = new Vector(p.x - ogSelBBox.topLeft.x, delta.y);\n                    else if (p.x > ogSelBBox.topRight.x) delta = new Vector(p.x - ogSelBBox.topRight.x, delta.y);\n                    else if (p.y < ogSelBBox.topLeft.y) delta = new Vector(delta.x, p.y - ogSelBBox.topLeft.y);\n                    else if (p.y > ogSelBBox.botLeft.y) delta = new Vector(delta.x, p.y - ogSelBBox.botLeft.y);\n                }\n                refine = true;\n                done.push(movementBlocker);\n                break;\n            }\n        }\n        if (refine) delta = calculateDelta(delta, sel, done);\n        return delta;\n    } else {\n        const centerTriangle = PA_CDT.movement.locate(sel.center().asArray(), null).loc;\n        for (const point of sel.points) {\n            const lt = PA_CDT.movement.locate(point, centerTriangle);\n            const triangle = lt.loc;\n            if (triangle === null) continue;\n            delta = checkTriangle(point, triangle, delta);\n        }\n        return delta;\n    }\n}\n\nfunction checkTriangle(point: Point, triangle: Triangle, delta: Vector, skip: Triangle[] = []): Vector {\n    const p = new GlobalPoint(point[0], point[1]);\n    const endpoint = p.add(delta).asArray();\n    if (triangle.contains(endpoint)) return delta;\n    skip.push(triangle);\n\n    for (let i = 0; i < 3; i++) {\n        if (skip.includes(triangle.neighbours[i]!)) continue;\n\n        const _cw = triangle.vertices[cw(i)]!.point!;\n        const _ccw = triangle.vertices[ccw(i)]!.point!;\n        const ix = intersection(point, endpoint, _cw, _ccw);\n\n        if (ix === null) continue;\n\n        if (!triangle.isConstrained(i)) return checkTriangle(point, triangle.neighbours[i]!, delta, skip);\n\n        if (ix[0] === p.x && ix[1] === p.y) {\n            const OR = orientation;\n            const o = orientation(point, endpoint, _ccw);\n            // Remember: canvas y axis is inverted\n            if (o === Sign.LEFT_TURN) continue;\n            if (o === Sign.ZERO) continue;\n        }\n        let newDelta = new GlobalPoint(ix[0], ix[1]).subtract(p).multiply(0.8);\n        if (newDelta.length() < 1) newDelta = new Vector(0, 0);\n        if (newDelta.length() < delta.length()) delta = newDelta;\n    }\n    return delta;\n}\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./note.vue?vue&type=style&index=0&id=7a3669fd&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./note.vue?vue&type=style&index=0&id=7a3669fd&scoped=true&lang=css&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./inputCopy.vue?vue&type=style&index=0&id=20bfdb3e&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./inputCopy.vue?vue&type=style&index=0&id=20bfdb3e&scoped=true&lang=css&\"","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./labels.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./labels.vue?vue&type=script&lang=ts&\"","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./vision.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./vision.vue?vue&type=script&lang=ts&\"","import { socket } from \"@/game/api/socket\";\nimport { gameStore } from \"@/game/store\";\n\nexport function sendClientOptions() {\n    socket.emit(\"Client.Options.Set\", {\n        locationOptions: {\n            panX: gameStore.panX,\n            panY: gameStore.panY,\n            zoomFactor: gameStore.zoomFactor,\n        },\n    });\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\nimport { Prop } from \"vue-property-decorator\";\n\nimport { AssetFile, AssetList } from \"@/core/comm/types\";\nimport { alphSort } from \"@/core/utils\";\n\n@Component({\n    name: \"asset-node\",\n})\nexport default class AssetNode extends Vue {\n    @Prop() asset!: AssetList;\n\n    showImage = null;\n    get folders(): string[] {\n        return Object.keys(this.asset)\n            .filter(el => ![\"__files\"].includes(el))\n            .sort(alphSort);\n    }\n\n    get files(): AssetFile[] {\n        if (this.asset.__files)\n            return (<AssetFile[]>this.asset.__files)\n                .concat()\n                .sort((a, b) => (a.name.toLowerCase() > b.name.toLowerCase() ? 1 : -1));\n        return [];\n    }\n\n    toggle(event: { target: HTMLElement }) {\n        // tslint:disable-next-line:prefer-for-of\n        for (let i = 0; i < event.target.children.length; i++) {\n            const el = <HTMLElement>event.target.children[i];\n            el.style.display = el.style.display === \"\" ? \"block\" : \"\";\n        }\n    }\n\n    dragStart(event: DragEvent, imageSource: string) {\n        this.showImage = null;\n        if (event === null || event.dataTransfer === null) return;\n        const img = (<HTMLElement>event.target).querySelector(\".preview\")!;\n        event.dataTransfer.setDragImage(img, 0, 0);\n        event.dataTransfer.setData(\"text/plain\", imageSource);\n    }\n}\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./colorpicker.vue?vue&type=style&index=0&id=f8744d60&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./colorpicker.vue?vue&type=style&index=0&id=f8744d60&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.visible)?_c('div',{staticClass:\"ContextMenu\",style:({left:_vm.left, top:_vm.top}),attrs:{\"tabindex\":\"-1\"},on:{\"blur\":function($event){return _vm.$emit('close')}}},[_c('ul',[_vm._t(\"default\")],2)]):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"17a953f2-vue-loader-template\\\"}!../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./contextmenu.vue?vue&type=template&id=256dde9c&\"","// import Vuex from \"vuex\";\nimport { getModule, Module, Mutation, VuexModule } from \"vuex-module-decorators\";\n\nimport { Asset } from \"@/core/comm/types\";\nimport { rootStore } from \"@/store\";\n\nexport interface AssetState {\n    root: number;\n    files: number[];\n    folders: number[];\n    idMap: Map<number, Asset>;\n    selected: number[];\n}\n\n@Module({ dynamic: true, store: rootStore, name: \"assets\", namespaced: true })\nclass AssetStore extends VuexModule {\n    root = -1;\n    files: number[] = [];\n    folders: number[] = [];\n    idMap: Map<number, Asset> = new Map();\n    selected: number[] = [];\n\n    @Mutation\n    clear() {\n        this.folders = [];\n        this.files = [];\n    }\n\n    @Mutation\n    clearSelected() {\n        console.log(\"Cleared\");\n        this.selected = [];\n    }\n\n    @Mutation\n    setRoot(root: number) {\n        this.root = root;\n    }\n}\n\nexport const assetStore = getModule(AssetStore);\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./contextmenu.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./contextmenu.vue?vue&type=script&lang=ts&\"","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\n\nimport ContextMenu from \"@/core/components/contextmenu.vue\";\nimport Initiative from \"@/game/ui/initiative.vue\";\n\nimport { getRef } from \"@/core/utils\";\nimport { EventBus } from \"@/game/event-bus\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { Shape } from \"@/game/shapes/shape\";\nimport { gameStore } from \"@/game/store\";\n\n@Component({\n    components: {\n        ContextMenu,\n    },\n})\nexport default class ShapeContext extends Vue {\n    visible = false;\n    x = 0;\n    y = 0;\n    shape: Shape | null = null;\n    get activeLayer(): string {\n        const layer = layerManager.getLayer();\n        return layer === undefined ? \"\" : layer.name;\n    }\n    open(event: MouseEvent, shape: Shape) {\n        this.visible = true;\n        this.x = event.pageX;\n        this.y = event.pageY;\n        this.shape = shape;\n        this.$nextTick(() => (<HTMLElement>this.$children[0].$el).focus());\n    }\n    close() {\n        this.visible = false;\n        this.shape = null;\n    }\n    getLayers() {\n        return layerManager.layers.filter(l => l.selectable && (gameStore.IS_DM || l.playerEditable));\n    }\n    getActiveLayer() {\n        return layerManager.getLayer();\n    }\n    getInitiativeWord() {\n        if (this.shape === null) return \"\";\n        return getRef<Initiative>(\"initiative\").contains(this.shape.uuid) ? \"Show\" : \"Add\";\n    }\n    setLayer(newLayer: string) {\n        if (this.shape === null) return;\n        this.shape.moveLayer(newLayer, true);\n        this.close();\n    }\n    moveToBack() {\n        if (this.shape === null) return;\n        const layer = this.getActiveLayer()!;\n        layer.moveShapeOrder(this.shape, 0, true);\n        this.close();\n    }\n    moveToFront() {\n        if (this.shape === null) return;\n        const layer = this.getActiveLayer()!;\n        layer.moveShapeOrder(this.shape, layer.shapes.length - 1, true);\n        this.close();\n    }\n    addInitiative() {\n        if (this.shape === null) return;\n        const initiative = getRef<Initiative>(\"initiative\");\n        if (!initiative.contains(this.shape.uuid)) initiative.addInitiative(this.shape.getInitiativeRepr());\n        initiative.visible = true;\n        this.close();\n    }\n    openEditDialog() {\n        EventBus.$emit(\"EditDialog.Open\", this.shape);\n        this.close();\n    }\n}\n","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./menu.vue?vue&type=style&index=0&id=c7fe324c&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./menu.vue?vue&type=style&index=0&id=c7fe324c&scoped=true&lang=css&\"","\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\n\nimport { Prop } from \"vue-property-decorator\";\n\n@Component\nexport default class InputCopyElement extends Vue {\n    @Prop() value!: string;\n\n    borderColour = \"lightgray\";\n    popupString = \"\";\n    showPopup = false;\n\n    copy() {\n        (<any>navigator).clipboard.writeText(this.value).then(\n            () => {\n                this.popupString = \"Copied!\";\n                this.showPopup = true;\n            },\n            () => {\n                console.log(\"Could not copy to clipboard :(\");\n                this.popupString = \"Error!\";\n                this.showPopup = true;\n            },\n        );\n    }\n}\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./map.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./map.vue?vue&type=script&lang=ts&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ContextMenu',{attrs:{\"visible\":_vm.visible,\"left\":_vm.left + 'px',\"top\":_vm.top + 'px'},on:{\"close\":_vm.close}},[_c('li',{on:{\"click\":_vm.rename}},[_vm._v(\"Rename\")]),_c('li',{on:{\"click\":_vm.remove}},[_vm._v(\"Remove\")])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"17a953f2-vue-loader-template\\\"}!../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./contextMenu.vue?vue&type=template&id=dbbd4d08&\"","import { Layer } from \"@/game/layers/layer\";\nimport { gameStore } from \"@/game/store\";\n\nexport class GridLayer extends Layer {\n    invalidate(): void {\n        this.valid = false;\n    }\n    draw(doClear?: boolean): void {\n        if (!this.valid) {\n            this.drawGrid();\n        }\n    }\n    drawGrid(): void {\n        const ctx = this.ctx;\n        this.clear();\n        ctx.beginPath();\n\n        const gs = gameStore.gridSize;\n\n        for (let i = 0; i < this.width; i += gs * gameStore.zoomFactor) {\n            ctx.moveTo(i + (gameStore.panX % gs) * gameStore.zoomFactor, 0);\n            ctx.lineTo(i + (gameStore.panX % gs) * gameStore.zoomFactor, this.height);\n            ctx.moveTo(0, i + (gameStore.panY % gs) * gameStore.zoomFactor);\n            ctx.lineTo(this.width, i + (gameStore.panY % gs) * gameStore.zoomFactor);\n        }\n\n        ctx.strokeStyle = gameStore.gridColour;\n        ctx.lineWidth = 1;\n        ctx.stroke();\n        this.valid = true;\n    }\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"outer\",on:{\"click\":function($event){if($event.target !== $event.currentTarget){ return null; }return _vm.open($event)}}},[_c('div',{staticClass:\"current-color\",style:(_vm.transparent ? 'background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAIAAADZF8uwAAAAGUlEQVQYV2M4gwH+YwCGIasIUwhT25BVBADtzYNYrHvv4gAAAABJRU5ErkJggg==)' : 'background-color:' + _vm.color),on:{\"click\":function($event){if($event.target !== $event.currentTarget){ return null; }return _vm.open($event)}}}),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.display),expression:\"display\"}],staticClass:\"mask\",on:{\"click\":function($event){if($event.target !== $event.currentTarget){ return null; }return _vm.closePicker($event)}}}),_c('chrome-picker',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.display),expression:\"display\"}],ref:\"chromePicker\",style:({position: 'fixed', left:_vm.left + 'px', top:_vm.top + 'px', 'z-index': 9999}),attrs:{\"value\":_vm.color,\"tabindex\":\"-1\"},on:{\"input\":_vm.updateColor}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"17a953f2-vue-loader-template\\\"}!../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./colorpicker.vue?vue&type=template&id=f8744d60&scoped=true&\"","import Vue from \"vue\";\nimport Vuex from \"vuex\";\n\nimport { AssetState } from \"@/assetManager/store\";\nimport { CoreState } from \"@/core/store\";\nimport { GameState } from \"@/game/store\";\n\nVue.use(Vuex);\n\nexport interface RootState {\n    assets: AssetState;\n    core: CoreState;\n    game: GameState;\n}\n\nexport const rootStore = new Vuex.Store<RootState>({});\n","import { render, staticRenderFns } from \"./colorpicker.vue?vue&type=template&id=f8744d60&scoped=true&\"\nimport script from \"./colorpicker.vue?vue&type=script&lang=ts&\"\nexport * from \"./colorpicker.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./colorpicker.vue?vue&type=style&index=0&id=f8744d60&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"f8744d60\",\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Component from \"vue-class-component\";\n\nimport Tool from \"@/game/ui/tools/tool.vue\";\n\nimport { socket } from \"@/game/api/socket\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { gameStore } from \"@/game/store\";\nimport { Shape } from \"../../shapes/shape\";\n\n@Component\nexport default class VisionTool extends Tool {\n    name = \"Vision\";\n    active = false;\n\n    get selection(): string[] {\n        return gameStore.activeTokens;\n    }\n\n    get tokens(): Shape[] {\n        return gameStore.ownedtokens.map(t => layerManager.UUIDMap.get(t)!);\n    }\n\n    toggle(uuid: string) {\n        if (this.selection.includes(uuid)) gameStore.removeActiveToken(uuid);\n        else gameStore.addActiveToken(uuid);\n    }\n}\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./login.vue?vue&type=style&index=0&id=bc30fc14&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./login.vue?vue&type=style&index=0&id=bc30fc14&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('router-view',{ref:\"activeComponent\"})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=196415f0&\"\nvar script = {}\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import { GlobalPoint, Ray } from \"@/game/geom\";\nimport { Layer } from \"@/game/layers/layer\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { Settings } from \"@/game/settings\";\nimport { Circle } from \"@/game/shapes/circle\";\nimport { Shape } from \"@/game/shapes/shape\";\nimport { gameStore } from \"@/game/store\";\nimport { g2l, g2lr, g2lx, g2ly, g2lz, getUnitDistance } from \"@/game/units\";\nimport { getFogColour } from \"@/game/utils\";\nimport { TriangulationTarget } from '../visibility/te/pa';\nimport { computeVisibility } from \"../visibility/te/te\";\n\nexport class FOWLayer extends Layer {\n    isVisionLayer: boolean = true;\n    preFogShapes: Shape[] = [];\n    virtualCanvas: HTMLCanvasElement;\n    vCtx: CanvasRenderingContext2D;\n\n    constructor(canvas: HTMLCanvasElement, name: string) {\n        super(canvas, name);\n        this.virtualCanvas = document.createElement(\"canvas\");\n        this.virtualCanvas.width = window.innerWidth;\n        this.virtualCanvas.height = window.innerHeight;\n        this.vCtx = this.virtualCanvas.getContext(\"2d\")!;\n    }\n\n    addShape(shape: Shape, sync: boolean, temporary?: boolean, invalidate = true): void {\n        super.addShape(shape, sync, temporary, invalidate);\n        if (shape.options.has(\"preFogShape\") && shape.options.get(\"preFogShape\")) {\n            this.preFogShapes.push(shape);\n        }\n    }\n\n    removeShape(shape: Shape, sync: boolean, temporary?: boolean) {\n        if (shape.options.has(\"preFogShape\") && shape.options.get(\"preFogShape\")) {\n            const idx = this.preFogShapes.findIndex(s => s.uuid === shape.uuid);\n            this.preFogShapes.splice(idx, 1);\n        }\n        super.removeShape(shape, sync, temporary);\n    }\n\n    draw(): void {\n        if (!this.valid) {\n            const ctx = this.ctx;\n\n            if (Settings.skipLightFOW) {\n                ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n                this.valid = true;\n                return;\n            }\n\n            const originalOperation = ctx.globalCompositeOperation;\n            ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n\n            ctx.fillStyle = \"rgba(0, 0, 0, 1)\";\n\n            const dctx = layerManager.getLayer(\"draw\")!.ctx;\n            if (Settings.drawAngleLines || Settings.drawFirstLightHit) {\n                dctx.clearRect(0, 0, dctx.canvas.width, dctx.canvas.height);\n            }\n\n            // At all times provide a minimal vision range to prevent losing your tokens in fog.\n            if (gameStore.fullFOW && layerManager.hasLayer(\"tokens\")) {\n                layerManager.getLayer(\"tokens\")!.shapes.forEach(sh => {\n                    if (!sh.ownedBy() || !sh.isToken) return;\n                    const bb = sh.getBoundingBox();\n                    const lcenter = g2l(sh.center());\n                    const alm = 0.8 * g2lz(bb.w);\n                    ctx.beginPath();\n                    ctx.arc(lcenter.x, lcenter.y, alm, 0, 2 * Math.PI);\n                    const gradient = ctx.createRadialGradient(lcenter.x, lcenter.y, alm / 2, lcenter.x, lcenter.y, alm);\n                    gradient.addColorStop(0, \"rgba(0, 0, 0, 1)\");\n                    gradient.addColorStop(1, \"rgba(0, 0, 0, 0)\");\n                    ctx.fillStyle = gradient;\n                    ctx.fill();\n                });\n            }\n\n            this.vCtx.clearRect(0, 0, window.innerWidth, window.innerHeight);\n\n            // First cut out all the light sources\n            for (const light of gameStore.visionSources) {\n                const shape = layerManager.UUIDMap.get(light.shape);\n                if (shape === undefined) continue;\n                const aura = shape.auras.find(a => a.uuid === light.aura);\n                if (aura === undefined) continue;\n\n                const auraLength = getUnitDistance(aura.value + aura.dim);\n                const center = shape.center();\n                const lcenter = g2l(center);\n\n                const auraCircle = new Circle(center, auraLength);\n                if (!auraCircle.visibleInCanvas(ctx.canvas)) continue;\n\n                if (gameStore.visionMode === \"bvh\") {\n                    let lastArcAngle = -1;\n\n                    const path = new Path2D();\n                    path.moveTo(lcenter.x, lcenter.y);\n                    let firstPoint: GlobalPoint;\n\n                    for (let angle = 0; angle < 2 * Math.PI; angle += (Settings.angleSteps / 180) * Math.PI) {\n                        const anglePoint = new GlobalPoint(\n                            center.x + auraLength * Math.cos(angle),\n                            center.y + auraLength * Math.sin(angle),\n                        );\n                        if (Settings.drawAngleLines) {\n                            dctx!.beginPath();\n                            dctx!.moveTo(g2lx(center.x), g2ly(center.y));\n                            dctx!.lineTo(g2lx(anglePoint.x), g2ly(anglePoint.y));\n                            dctx!.stroke();\n                        }\n\n                        // Check if there is a hit with one of the nearby light blockers.\n                        const lightRay = Ray.fromPoints(center, anglePoint);\n                        const hitResult = gameStore.BV.intersect(lightRay);\n\n                        if (angle === 0) firstPoint = hitResult.hit ? hitResult.intersect : anglePoint;\n\n                        // We can move on to the next angle if nothing was hit.\n                        if (!hitResult.hit) {\n                            // If an earlier hit caused the aura to leave the arc, we need to go back to the arc\n                            if (lastArcAngle === -1) {\n                                // Set the start of a new arc beginning at the current angle\n                                lastArcAngle = angle;\n                                // Draw a line from the last non arc location back to the arc\n                                const dest = g2l(anglePoint);\n                                ctx.lineTo(dest.x, dest.y);\n                            }\n                            continue;\n                        }\n                        // If hit , first finish any ongoing arc, then move to the intersection point\n                        if (lastArcAngle !== -1) {\n                            path.arc(lcenter.x, lcenter.y, g2lr(aura.value + aura.dim), lastArcAngle, angle);\n                            lastArcAngle = -1;\n                        }\n                        path.lineTo(g2lx(hitResult.intersect.x), g2ly(hitResult.intersect.y));\n                    }\n                    // Finish the final arc.\n                    if (lastArcAngle === -1) path.lineTo(g2lx(firstPoint!.x), g2ly(firstPoint!.y));\n                    else path.arc(lcenter.x, lcenter.y, g2lr(aura.value + aura.dim), lastArcAngle, 2 * Math.PI);\n\n                    if (gameStore.fullFOW) {\n                        if (aura.dim > 0) {\n                            // Fill the light aura with a radial dropoff towards the outside.\n                            const gradient = ctx.createRadialGradient(\n                                lcenter.x,\n                                lcenter.y,\n                                g2lr(aura.value),\n                                lcenter.x,\n                                lcenter.y,\n                                g2lr(aura.value + aura.dim),\n                            );\n                            gradient.addColorStop(0, \"rgba(0, 0, 0, 1)\");\n                            gradient.addColorStop(1, \"rgba(0, 0, 0, 0)\");\n                            ctx.fillStyle = gradient;\n                        } else {\n                            ctx.fillStyle = \"rgba(0, 0, 0, 1)\";\n                        }\n                        ctx.fill(path);\n                    }\n\n                    aura.lastPath = path;\n                } else {\n                    this.vCtx.globalCompositeOperation = \"source-over\";\n                    this.vCtx.fillStyle = \"rgba(0, 0, 0, 1)\";\n                    const polygon = computeVisibility(center, TriangulationTarget.VISION);\n                    this.vCtx.beginPath();\n                    this.vCtx.moveTo(g2lx(polygon[0][0]), g2ly(polygon[0][1]));\n                    for (const point of polygon) this.vCtx.lineTo(g2lx(point[0]), g2ly(point[1]));\n                    this.vCtx.closePath();\n                    this.vCtx.fill();\n                    if (aura.dim > 0) {\n                        // Fill the light aura with a radial dropoff towards the outside.\n                        const gradient = this.vCtx.createRadialGradient(\n                            lcenter.x,\n                            lcenter.y,\n                            g2lr(aura.value),\n                            lcenter.x,\n                            lcenter.y,\n                            g2lr(aura.value + aura.dim),\n                        );\n                        gradient.addColorStop(0, \"rgba(0, 0, 0, 1)\");\n                        gradient.addColorStop(1, \"rgba(0, 0, 0, 0)\");\n                        this.vCtx.fillStyle = gradient;\n                    } else {\n                        this.vCtx.fillStyle = \"rgba(0, 0, 0, 1)\";\n                    }\n                    this.vCtx.globalCompositeOperation = \"source-in\";\n                    this.vCtx.beginPath();\n                    this.vCtx.arc(lcenter.x, lcenter.y, g2lr(aura.value + aura.dim), 0, 2 * Math.PI);\n                    this.vCtx.fill();\n                    ctx.drawImage(this.virtualCanvas, 0, 0);\n                }\n            }\n\n            // At the DM Side due to opacity of the two fow layers, it looks strange if we just render them on top of eachother like players.\n            if (gameStore.fowLOS) {\n                ctx.globalCompositeOperation = \"source-in\";\n                ctx.drawImage(layerManager.getLayer(\"fow-players\")!.canvas, 0, 0);\n            }\n\n            for (const preShape of this.preFogShapes) {\n                if (!preShape.visibleInCanvas(this.canvas)) continue;\n                const ogComposite = preShape.globalCompositeOperation;\n                if (!gameStore.fullFOW) {\n                    if (preShape.globalCompositeOperation === \"source-over\")\n                        preShape.globalCompositeOperation = \"destination-out\";\n                    else if (preShape.globalCompositeOperation === \"destination-out\")\n                        preShape.globalCompositeOperation = \"source-over\";\n                }\n                preShape.draw(ctx);\n                preShape.globalCompositeOperation = ogComposite;\n            }\n\n            if (gameStore.fullFOW) {\n                ctx.globalCompositeOperation = \"source-out\";\n                ctx.fillStyle = getFogColour();\n                ctx.fillRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n            }\n\n            super.draw(false);\n\n            ctx.globalCompositeOperation = originalOperation;\n        }\n    }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./load.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./load.vue?vue&type=script&lang=ts&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('Modal',{attrs:{\"visible\":_vm.visible,\"mask\":false},on:{\"close\":function($event){_vm.visible = false}},scopedSlots:_vm._u([{key:\"header\",fn:function(m){return _c('div',{staticClass:\"modal-header\",attrs:{\"draggable\":\"true\"},on:{\"dragstart\":m.dragStart,\"dragend\":m.dragEnd}},[_c('div',[_vm._v(\"Edit asset\")]),_c('div',{staticClass:\"header-close\",on:{\"click\":function($event){_vm.visible = false}}},[_c('i',{staticClass:\"far fa-window-close\"})])])}}])},[_c('div',{staticClass:\"modal-body\"},[_c('div',{staticClass:\"grid\"},[_c('label',{attrs:{\"for\":\"shapeselectiondialog-name\"}},[_vm._v(\"Name\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.shape.name),expression:\"shape.name\"}],staticStyle:{\"grid-column\":\"numerator / remove\"},attrs:{\"type\":\"text\",\"id\":\"shapeselectiondialog-name\",\"disabled\":!_vm.owned},domProps:{\"value\":(_vm.shape.name)},on:{\"change\":function($event){return _vm.updateShape(false)},\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.shape, \"name\", $event.target.value)}}}),_c('div',{style:({opacity: _vm.shape.nameVisible ? 1.0 : 0.3, textAlign: 'center'}),attrs:{\"disabled\":!_vm.owned},on:{\"click\":function($event){_vm.shape.nameVisible = !_vm.shape.nameVisible;_vm.updateShape(false)}}},[_c('i',{staticClass:\"fas fa-eye\"})]),_c('label',{attrs:{\"for\":\"shapeselectiondialog-istoken\"}},[_vm._v(\"Is a token\")]),_c('input',{staticClass:\"styled-checkbox\",staticStyle:{\"grid-column-start\":\"remove\"},attrs:{\"type\":\"checkbox\",\"id\":\"shapeselectiondialog-istoken\",\"disabled\":!_vm.owned},domProps:{\"checked\":_vm.shape.isToken},on:{\"click\":_vm.setToken}}),_c('label',{attrs:{\"for\":\"shapeselectiondialog-visionblocker\"}},[_vm._v(\"Blocks vision/light\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.shape.visionObstruction),expression:\"shape.visionObstruction\"}],staticStyle:{\"grid-column-start\":\"remove\"},attrs:{\"type\":\"checkbox\",\"id\":\"shapeselectiondialog-visionblocker\",\"disabled\":!_vm.owned},domProps:{\"checked\":Array.isArray(_vm.shape.visionObstruction)?_vm._i(_vm.shape.visionObstruction,null)>-1:(_vm.shape.visionObstruction)},on:{\"change\":[function($event){var $$a=_vm.shape.visionObstruction,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.$set(_vm.shape, \"visionObstruction\", $$a.concat([$$v])))}else{$$i>-1&&(_vm.$set(_vm.shape, \"visionObstruction\", $$a.slice(0,$$i).concat($$a.slice($$i+1))))}}else{_vm.$set(_vm.shape, \"visionObstruction\", $$c)}},_vm.setVisionBlocker]}}),_c('label',{attrs:{\"for\":\"shapeselectiondialog-moveblocker\"}},[_vm._v(\"Blocks movement\")]),_c('input',{staticStyle:{\"grid-column-start\":\"remove\"},attrs:{\"type\":\"checkbox\",\"id\":\"shapeselectiondialog-moveblocker\",\"disabled\":!_vm.owned},domProps:{\"checked\":_vm.shape.movementObstruction},on:{\"click\":_vm.setMovementBlocker}}),_c('label',{attrs:{\"for\":\"shapeselectiondialog-strokecolour\"}},[_vm._v(\"Border colour\")]),_c('color-picker',{staticStyle:{\"grid-column-start\":\"remove\"},attrs:{\"color\":_vm.shape.strokeColour,\"disabled\":!_vm.owned},on:{\"update:color\":function($event){return _vm.$set(_vm.shape, \"strokeColour\", $event)},\"input\":function($event){return _vm.updateShape(true, true)},\"change\":function($event){return _vm.updateShape(true)}}}),_c('label',{attrs:{\"for\":\"shapeselectiondialog-fillcolour\"}},[_vm._v(\"Fill colour\")]),_c('color-picker',{staticStyle:{\"grid-column-start\":\"remove\"},attrs:{\"color\":_vm.shape.fillColour,\"disabled\":!_vm.owned},on:{\"update:color\":function($event){return _vm.$set(_vm.shape, \"fillColour\", $event)},\"input\":function($event){return _vm.updateShape(true, true)},\"change\":function($event){return _vm.updateShape(true)}}}),_c('div',{staticClass:\"spanrow header\"},[_vm._v(\"Access\")]),_vm._l((_vm.shape.owners),function(owner){return [_c('input',{key:owner,staticStyle:{\"grid-column-start\":\"name\"},attrs:{\"type\":\"text\",\"placeholder\":\"name\",\"disabled\":!_vm.owned},domProps:{\"value\":owner},on:{\"change\":function($event){return _vm.updateOwner($event, owner)}}}),(owner !== '')?_c('div',{key:'remove-' + owner,style:({opacity: _vm.owned ? 1.0 : 0.3, textAlign: 'center', gridColumnStart: 'remove'}),attrs:{\"disabled\":!_vm.owned},on:{\"click\":function($event){return _vm.removeOwner(owner)}}},[_c('i',{staticClass:\"fas fa-trash-alt\"})]):_vm._e()]}),_c('div',{staticClass:\"spanrow header\"},[_vm._v(\"Trackers\")]),_vm._l((_vm.shape.trackers),function(tracker){return [_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(tracker.name),expression:\"tracker.name\"}],key:'name-'+tracker.uuid,staticStyle:{\"grid-column-start\":\"name\"},attrs:{\"type\":\"text\",\"placeholder\":\"name\",\"disabled\":!_vm.owned},domProps:{\"value\":(tracker.name)},on:{\"change\":function($event){return _vm.updateShape(false);},\"input\":function($event){if($event.target.composing){ return; }_vm.$set(tracker, \"name\", $event.target.value)}}}),_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(tracker.value),expression:\"tracker.value\",modifiers:{\"number\":true}}],key:'value-'+tracker.uuid,attrs:{\"type\":\"text\",\"title\":\"Current value\",\"disabled\":!_vm.owned},domProps:{\"value\":(tracker.value)},on:{\"change\":function($event){return _vm.updateShape(false)},\"input\":function($event){if($event.target.composing){ return; }_vm.$set(tracker, \"value\", _vm._n($event.target.value))},\"blur\":function($event){return _vm.$forceUpdate()}}}),_c('span',{key:'fspan-'+tracker.uuid},[_vm._v(\"/\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(tracker.maxvalue),expression:\"tracker.maxvalue\",modifiers:{\"number\":true}}],key:'maxvalue-'+tracker.uuid,attrs:{\"type\":\"text\",\"title\":\"Current value\",\"disabled\":!_vm.owned},domProps:{\"value\":(tracker.maxvalue)},on:{\"change\":function($event){return _vm.updateShape(false)},\"input\":function($event){if($event.target.composing){ return; }_vm.$set(tracker, \"maxvalue\", _vm._n($event.target.value))},\"blur\":function($event){return _vm.$forceUpdate()}}}),_c('span',{key:'sspan-'+tracker.uuid}),_c('div',{key:'visibility-'+tracker.uuid,style:({opacity: tracker.visible ? 1.0 : 0.3, textAlign: 'center'}),attrs:{\"disabled\":!_vm.owned},on:{\"click\":function($event){tracker.visible = !tracker.visible;_vm.updateShape(false)}}},[_c('i',{staticClass:\"fas fa-eye\"})]),_c('span',{key:'tspan-'+tracker.uuid}),(tracker.name !== '' || tracker.value !== 0)?_c('div',{key:'remove-'+tracker.uuid,style:({opacity: _vm.owned ? 1.0 : 0.3, textAlign: 'center'}),attrs:{\"disabled\":!_vm.owned},on:{\"click\":function($event){return _vm.removeTracker(tracker.uuid)}}},[_c('i',{staticClass:\"fas fa-trash-alt\"})]):_vm._e()]}),_c('div',{staticClass:\"spanrow header\"},[_vm._v(\"Auras\")]),_vm._l((_vm.shape.auras),function(aura){return [_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(aura.name),expression:\"aura.name\"}],key:'name-'+aura.uuid,staticStyle:{\"grid-column-start\":\"name\"},attrs:{\"type\":\"text\",\"placeholder\":\"name\",\"disabled\":!_vm.owned},domProps:{\"value\":(aura.name)},on:{\"change\":function($event){return _vm.updateShape(false)},\"input\":function($event){if($event.target.composing){ return; }_vm.$set(aura, \"name\", $event.target.value)}}}),_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(aura.value),expression:\"aura.value\",modifiers:{\"number\":true}}],key:'value-'+aura.uuid,attrs:{\"type\":\"text\",\"title\":\"Current value\",\"disabled\":!_vm.owned},domProps:{\"value\":(aura.value)},on:{\"change\":function($event){return _vm.updateShape(true)},\"input\":function($event){if($event.target.composing){ return; }_vm.$set(aura, \"value\", _vm._n($event.target.value))},\"blur\":function($event){return _vm.$forceUpdate()}}}),_c('span',{key:'fspan-'+aura.uuid},[_vm._v(\"/\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(aura.dim),expression:\"aura.dim\",modifiers:{\"number\":true}}],key:'dimvalue-'+aura.uuid,attrs:{\"type\":\"text\",\"title\":\"Dim value\",\"disabled\":!_vm.owned},domProps:{\"value\":(aura.dim)},on:{\"change\":function($event){return _vm.updateShape(true)},\"input\":function($event){if($event.target.composing){ return; }_vm.$set(aura, \"dim\", _vm._n($event.target.value))},\"blur\":function($event){return _vm.$forceUpdate()}}}),_c('color-picker',{key:'colour-'+aura.uuid,attrs:{\"color\":aura.colour,\"disabled\":!_vm.owned},on:{\"update:color\":function($event){return _vm.$set(aura, \"colour\", $event)},\"input\":function($event){return _vm.updateAuraColour(aura, $event)},\"change\":function($event){return _vm.updateShape(true)}}}),_c('div',{key:'visibility-'+aura.uuid,style:({opacity: aura.visible ? 1.0 : 0.3, textAlign: 'center'}),attrs:{\"disabled\":!_vm.owned},on:{\"click\":function($event){aura.visible = !aura.visible;_vm.updateShape(true)}}},[_c('i',{staticClass:\"fas fa-eye\"})]),_c('div',{key:'visionsource-'+aura.uuid,style:({opacity: aura.visionSource ? 1.0 : 0.3, textAlign: 'center'}),attrs:{\"disabled\":!_vm.owned},on:{\"click\":function($event){return _vm.updateAuraVisionSource(aura)}}},[_c('i',{staticClass:\"fas fa-lightbulb\"})]),(aura.name !== '' || aura.value !== 0)?_c('div',{key:'remove-'+aura.uuid,style:({opacity: _vm.owned ? 1.0 : 0.3, textAlign: 'center'}),attrs:{\"disabled\":!_vm.owned},on:{\"click\":function($event){return _vm.removeAura(aura.uuid)}}},[_c('i',{staticClass:\"fas fa-trash-alt\"})]):_vm._e()]}),_c('div',{staticClass:\"spanrow header\"},[_vm._v(\"Labels\")]),_c('div',{staticClass:\"spanrow\",attrs:{\"id\":\"labels\"}},[_vm._l((_vm.shape.labels),function(label){return _c('div',{key:label.uuid,staticClass:\"label\"},[(label.category)?[_c('div',{staticClass:\"label-user\"},[_vm._v(_vm._s(label.category))]),_c('div',{staticClass:\"label-main\",on:{\"click\":function($event){return _vm.removeLabel(label.uuid)}}},[_vm._v(_vm._s(label.name))])]:_vm._e(),(!label.category)?[_c('div',{staticClass:\"label-main\",on:{\"click\":function($event){return _vm.removeLabel(label.uuid)}}},[_vm._v(_vm._s(label.name))])]:_vm._e()],2)}),(_vm.owned)?_c('div',{staticClass:\"label\",attrs:{\"id\":\"label-add\"}},[_c('div',{staticClass:\"label-main\",on:{\"click\":_vm.openLabelManager}},[_vm._v(\"+\")])]):_vm._e()],2),_c('div',{staticClass:\"spanrow header\"},[_vm._v(\"Annotation\")]),_c('textarea',{staticClass:\"spanrow\",attrs:{\"disabled\":!_vm.owned},domProps:{\"value\":_vm.shape.annotation},on:{\"change\":_vm.updateAnnotation}})],2)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"17a953f2-vue-loader-template\\\"}!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./edit_dialog.vue?vue&type=template&id=23de098e&scoped=true&\"","import { ServerCircle } from \"@/game/comm/types/shapes\";\nimport { GlobalPoint, LocalPoint, Vector } from \"@/game/geom\";\nimport { BoundingRect } from \"@/game/shapes/boundingrect\";\nimport { Shape } from \"@/game/shapes/shape\";\nimport { gameStore } from \"@/game/store\";\nimport { calculateDelta } from \"@/game/ui/tools/utils\";\nimport { g2l, g2lz, l2g } from \"@/game/units\";\nimport { getFogColour } from \"@/game/utils\";\n\nexport class Circle extends Shape {\n    type = \"circle\";\n    r: number;\n    constructor(center: GlobalPoint, r: number, fillColour?: string, strokeColour?: string, uuid?: string) {\n        super(center, fillColour, strokeColour, uuid);\n        this.r = r || 1;\n    }\n    asDict(): ServerCircle {\n        // const base = <ServerCircle>this.getBaseDict();\n        // base.r = this.r;\n        // base.border = this.border;\n        // return base;\n        return Object.assign(this.getBaseDict(), {\n            radius: this.r,\n        });\n    }\n    fromDict(data: ServerCircle) {\n        super.fromDict(data);\n        this.r = data.radius;\n    }\n    getBoundingBox(): BoundingRect {\n        return new BoundingRect(\n            new GlobalPoint(this.refPoint.x - this.r, this.refPoint.y - this.r),\n            this.r * 2,\n            this.r * 2,\n        );\n    }\n\n    get points() {\n        return this.getBoundingBox().points;\n    }\n\n    draw(ctx: CanvasRenderingContext2D) {\n        super.draw(ctx);\n        ctx.beginPath();\n        if (this.fillColour === \"fog\") ctx.fillStyle = getFogColour();\n        else ctx.fillStyle = this.fillColour;\n        const loc = g2l(this.refPoint);\n        ctx.arc(loc.x, loc.y, g2lz(this.r), 0, 2 * Math.PI);\n        ctx.fill();\n        if (this.strokeColour !== \"rgba(0, 0, 0, 0)\") {\n            ctx.beginPath();\n            ctx.lineWidth = g2lz(5);\n            ctx.strokeStyle = this.strokeColour;\n            ctx.arc(loc.x, loc.y, g2lz(this.r), 0, 2 * Math.PI);\n            ctx.stroke();\n        }\n    }\n    contains(point: GlobalPoint): boolean {\n        return (point.x - this.refPoint.x) ** 2 + (point.y - this.refPoint.y) ** 2 < this.r ** 2;\n    }\n    center(): GlobalPoint;\n    center(centerPoint: GlobalPoint): void;\n    center(centerPoint?: GlobalPoint): GlobalPoint | void {\n        if (centerPoint === undefined) return this.refPoint;\n        this.refPoint = centerPoint;\n    }\n    visibleInCanvas(canvas: HTMLCanvasElement): boolean {\n        return this.getBoundingBox().visibleInCanvas(canvas);\n    } // TODO\n    snapToGrid() {\n        const gs = gameStore.gridSize;\n        let targetX;\n        let targetY;\n        if (((2 * this.r) / gs) % 2 === 0) {\n            targetX = Math.round(this.refPoint.x / gs) * gs;\n        } else {\n            targetX = Math.round((this.refPoint.x - gs / 2) / gs) * gs + this.r;\n        }\n        if (((2 * this.r) / gs) % 2 === 0) {\n            targetY = Math.round(this.refPoint.y / gs) * gs;\n        } else {\n            targetY = Math.round((this.refPoint.y - gs / 2) / gs) * gs + this.r;\n        }\n        const delta = calculateDelta(new Vector(targetX - this.refPoint.x, targetY - this.refPoint.y), this);\n        this.refPoint = this.refPoint.add(delta);\n        this.invalidate(false);\n    }\n    resizeToGrid() {\n        const gs = gameStore.gridSize;\n        this.r = Math.max(Math.round(this.r / gs) * gs, gs / 2);\n        this.invalidate(false);\n    }\n    resize(resizePoint: number, point: LocalPoint) {\n        const z = gameStore.zoomFactor;\n        const diff = l2g(point).subtract(this.refPoint);\n        this.r = Math.sqrt(Math.pow(diff.length(), 2) / 2);\n    }\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Tool from \"@/game/ui/tools/tool.vue\";\n\nimport { GlobalPoint } from \"@/game/geom\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { BaseRect } from \"@/game/shapes/baserect\";\nimport { Rect } from \"@/game/shapes/rect\";\nimport { gameStore } from \"@/game/store\";\nimport { l2g } from \"@/game/units\";\nimport { getMouse } from \"@/game/utils\";\nimport Component from \"vue-class-component\";\n\n@Component\nexport default class MapTool extends Tool {\n    name = \"Map\";\n    active = false;\n    xCount = 3;\n    yCount = 3;\n    startPoint: GlobalPoint | null = null;\n    rect: Rect | null = null;\n\n    onMouseDown(event: MouseEvent) {\n        const layer = layerManager.getLayer();\n        if (layer === undefined) {\n            console.log(\"No active layer!\");\n            return;\n        }\n        this.active = true;\n\n        this.startPoint = l2g(getMouse(event));\n        this.rect = new Rect(this.startPoint.clone(), 0, 0, \"rgba(0,0,0,0)\", \"black\");\n        layer.addShape(this.rect, false, false);\n    }\n    onMouseMove(event: MouseEvent) {\n        if (!this.active || this.rect === null || this.startPoint === null) return;\n        const layer = layerManager.getLayer();\n        if (layer === undefined) {\n            console.log(\"No active layer!\");\n            return;\n        }\n\n        const endPoint = l2g(getMouse(event));\n\n        this.rect.w = Math.abs(endPoint.x - this.startPoint.x);\n        this.rect.h = Math.abs(endPoint.y - this.startPoint.y);\n        this.rect.refPoint = new GlobalPoint(\n            Math.min(this.startPoint.x, endPoint.x),\n            Math.min(this.startPoint.y, endPoint.y),\n        );\n        layer.invalidate(false);\n    }\n    onMouseUp(event: MouseEvent) {\n        if (!this.active || this.rect === null) return;\n        const layer = layerManager.getLayer();\n        if (layer === undefined) {\n            console.log(\"No active layer!\");\n            return;\n        }\n        this.active = false;\n\n        if (layer.selection.length !== 1) {\n            layer.removeShape(this.rect, false, false);\n            return;\n        }\n\n        const w = this.rect.w;\n        const h = this.rect.h;\n        const sel = layer.selection[0];\n\n        if (sel instanceof BaseRect) {\n            sel.w *= (this.xCount * gameStore.gridSize) / w;\n            sel.h *= (this.yCount * gameStore.gridSize) / h;\n        }\n\n        layer.removeShape(this.rect, false, false);\n    }\n}\n","import { render, staticRenderFns } from \"./load.vue?vue&type=template&id=ff095222&\"\nimport script from \"./load.vue?vue&type=script&lang=ts&\"\nexport * from \"./load.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Tool from \"@/game/ui/tools/tool.vue\";\n\nimport { sendClientOptions } from \"@/game/api/utils\";\nimport { LocalPoint } from \"@/game/geom\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { gameStore } from \"@/game/store\";\nimport { getMouse } from \"@/game/utils\";\nimport Component from \"vue-class-component\";\n\n@Component\nexport default class PanTool extends Tool {\n    name = \"Pan\";\n    panStart = new LocalPoint(0, 0);\n    active = false;\n\n    onMouseDown(event: MouseEvent) {\n        this.panStart = getMouse(event);\n        this.active = true;\n    }\n    onMouseMove(event: MouseEvent) {\n        if (!this.active) return;\n        const mouse = getMouse(event);\n        const distance = mouse.subtract(this.panStart).multiply(1 / gameStore.zoomFactor);\n        gameStore.increasePanX(Math.round(distance.x));\n        gameStore.increasePanY(Math.round(distance.y));\n        this.panStart = mouse;\n        layerManager.invalidate();\n    }\n    onMouseUp(event: MouseEvent) {\n        this.active = false;\n        sendClientOptions();\n    }\n}\n","import { render, staticRenderFns } from \"./selectcontext.vue?vue&type=template&id=2e7d4582&scoped=true&\"\nimport script from \"./selectcontext.vue?vue&type=script&lang=ts&\"\nexport * from \"./selectcontext.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./selectcontext.vue?vue&type=style&index=0&id=2e7d4582&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2e7d4582\",\n  null\n  \n)\n\nexport default component.exports","import Vue from \"vue\";\n\nimport { app } from \"@/main\";\n\n// Reference: https://stackoverflow.com/questions/105034/create-guid-uuid-in-javascript\nexport function uuidv4() {\n    return \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g, c => {\n        const r = (Math.random() * 16) | 0;\n        const v = c === \"x\" ? r : (r & 0x3) | 0x8;\n        return v.toString(16);\n    });\n}\n\nexport function capitalize(text: string) {\n    return text.charAt(0).toUpperCase() + text.slice(1);\n}\n\nexport function alphSort(a: string, b: string) {\n    if (a.toLowerCase() < b.toLowerCase()) return -1;\n    else return 1;\n}\n\nexport function getHTMLFont(element: HTMLElement) {\n    let font = element.style.font;\n    while (font === null && element.parentElement !== null) {\n        element = element.parentElement;\n        font = element.style.font;\n    }\n    if (font === null) font = window.getComputedStyle(document.body).getPropertyValue(\"font\");\n    return font;\n}\n\nexport function getHTMLTextWidth(text: string, font: string): number {\n    let fakeElement = <HTMLCanvasElement>document.getElementById(\"emptycanvas\");\n    if (fakeElement === null) {\n        fakeElement = document.createElement(\"canvas\");\n        fakeElement.id = \"emptycanvas\";\n        fakeElement.style.display = \"\";\n        document.body.appendChild(fakeElement);\n    }\n    const ctx = fakeElement.getContext(\"2d\")!;\n    ctx.font = font;\n    return Math.ceil(ctx.measureText(text).width);\n}\n\nexport function partition<T>(arr: T[], predicate: (n: T) => boolean) {\n    const ret: T[][] = [[], []];\n    arr.forEach(n => (predicate(n) ? ret[1].push(n) : ret[0].push(n)));\n    return ret;\n}\n\nexport function calcFontScale(ctx: CanvasRenderingContext2D, text: string, width: number, height: number) {\n    const points = Number(ctx.font.split(\"px\")[0]) * 0.2;\n    const fontWidth = ctx.measureText(text).width;\n    return Math.min(width / fontWidth, height / points);\n}\n\nexport function fixedEncodeURIComponent(str: string) {\n    return encodeURIComponent(str).replace(/[!'()*]/g, c => {\n        return \"%\" + c.charCodeAt(0).toString(16);\n    });\n}\n\nexport class OrderedMap<K, V> {\n    keys: K[] = [];\n    values: V[] = [];\n\n    get length() {\n        return this.keys.length;\n    }\n\n    get(key: K) {\n        return this.values[this.keys.indexOf(key)];\n    }\n    getIndexValue(idx: number) {\n        return this.values[idx];\n    }\n    getIndexKey(idx: number) {\n        return this.keys[idx];\n    }\n    set(key: K, value: V) {\n        this.keys.push(key);\n        this.values.push(value);\n    }\n    has(key: K) {\n        return this.indexOf(key) >= 0;\n    }\n    indexOf(element: K) {\n        return this.keys.indexOf(element);\n    }\n    remove(element: K) {\n        const idx = this.indexOf(element);\n        this.keys.splice(idx, 1);\n        this.values.splice(idx, 1);\n    }\n}\n\nexport function getComponent<T extends Vue>(): T {\n    return <T>app.$children[0].$refs.activeComponent;\n}\n\nexport function getRef<T extends Vue>(ref: string): T {\n    const active = <Vue>app.$children[0].$refs.activeComponent;\n    return <T>active.$refs[ref];\n}\n","import { render, staticRenderFns } from \"./contextMenu.vue?vue&type=template&id=dbbd4d08&\"\nimport script from \"./contextMenu.vue?vue&type=script&lang=ts&\"\nexport * from \"./contextMenu.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import { EdgeCirculator, Point, Sign, Triangle, Vertex } from \"./tds\";\n\ntype Line = number[];\n\nexport function cw(index: number) {\n    return (index + 2) % 3;\n}\n\nexport function ccw(index: number) {\n    return (index + 1) % 3;\n}\n\nexport function edgeInfo(va: Vertex, vb: Vertex) {\n    const ec = new EdgeCirculator(va, null);\n    if (ec.valid) {\n        do {\n            const indv = 3 - ec.t!.indexV(va) - ec.ri;\n            const v = ec.t!.vertices[indv]!;\n            if (!v.infinite) {\n                if (v === vb) {\n                    return { includes: true, vi: vb, fr: ec.t!, i: ec.ri };\n                } else {\n                    const orient = orientation(va.point!, vb.point!, v.point!);\n                    if (orient === Sign.COLLINEAR && collinearBetween(va.point!, v.point!, vb.point!)) {\n                        return { includes: true, vi: v, fr: ec.t!, i: ec.ri };\n                    }\n                }\n            }\n        } while (ec.next());\n    }\n    return { includes: false };\n}\n\nexport function collinearBetween(p: Point, q: Point, r: Point): boolean {\n    let cPQ: Sign;\n    let cQR: Sign;\n    if (compare(0, p, r) === Sign.EQUAL) {\n        cPQ = compare(1, p, q);\n        cQR = compare(1, q, r);\n    } else {\n        cPQ = compare(0, p, q);\n        cQR = compare(0, q, r);\n    }\n    return (cPQ === Sign.SMALLER && cQR === Sign.SMALLER) || (cPQ === Sign.LARGER && cQR === Sign.LARGER);\n}\n\nfunction compare(index: number, a: Point, b: Point): Sign {\n    if (a[index] < b[index]) return Sign.SMALLER;\n    if (a[index] > b[index]) return Sign.LARGER;\n    return Sign.EQUAL;\n}\n\nexport function orientation(p: Point, q: Point, r: Point) {\n    const px = p[0];\n    const py = p[1];\n    const qx = q[0];\n    const qy = q[1];\n    const rx = r[0];\n    const ry = r[1];\n    const pqx = qx - px;\n    const pqy = qy - py;\n    const prx = rx - px;\n    const pry = ry - py;\n    const det = determinant(pqx, pqy, prx, pry);\n    let maxX = Math.abs(pqx);\n    let maxY = Math.abs(pqy);\n    const aprX = Math.abs(prx);\n    const aprY = Math.abs(pry);\n    if (maxX < aprX) maxX = aprX;\n    if (maxY < aprY) maxY = aprY;\n    if (maxX > maxY) [maxX, maxY] = [maxY, maxX];\n    // underflow proection in eps computation?? Math.sqrt(Number.MIN_VALUE, Number.EPSILON)\n    if (maxX < 2e-162 && maxX === 0) {\n        return Sign.ZERO;\n    }\n    // overflow protection in det computation\n    if (maxY < 1e153) {\n        const eps = Number.EPSILON * maxX * maxY;\n        if (det > eps) return Sign.POSITIVE;\n        if (det < -eps) return Sign.NEGATIVE;\n    }\n    return Sign.ZERO;\n}\n\nexport function determinant(a00: number, a01: number, a10: number, a11: number) {\n    return a00 * a11 - a01 * a10;\n}\n\nexport function hasInexactNegativeOrientation(p: Point, q: Point, r: Point) {\n    return determinant(q[0] - p[0], q[1] - p[1], r[0] - p[0], r[1] - p[1]) < 0;\n}\n\nexport function sideOfOrientedCircle(t: Triangle, p: Point, perturb: boolean): Sign {\n    if (!t.isInfinite())\n        return sideOfOrientedCircleP(t.vertices[0]!.point!, t.vertices[1]!.point!, t.vertices[2]!.point!, p, perturb);\n    throw new Error(\"SSS\");\n}\n\nexport function sideOfOrientedCircleP(p0: Point, p1: Point, p2: Point, p: Point, perturb: boolean): Sign {\n    const os = getOrientedSide(p0, p1, p2, p);\n    if (os !== Sign.ON_ORIENTED_BOUNDARY || !perturb) return os;\n    const points = [p0, p1, p2, p];\n    points.sort((a, b) => a[0] - b[0] || a[1] - b[1]);\n    for (const point of points.reverse()) {\n        if (point === p) return Sign.ON_NEGATIVE_SIDE;\n        let o = orientation(p0, p1, p);\n        if (point === p2 && o !== Sign.COLLINEAR) return o;\n        o = orientation(p0, p, p2);\n        if (point === p1 && o !== Sign.COLLINEAR) return o;\n        o = orientation(p, p1, p2);\n        if (point === p0 && o !== Sign.COLLINEAR) return o;\n    }\n    return Sign.ON_NEGATIVE_SIDE;\n}\n\nexport function xyEqual(p: Point, q: Point) {\n    return p[0] === q[0] && p[1] === q[1];\n}\n\nexport function xySmaller(p: Point, q: Point) {\n    return p[0] < q[0] || (p[0] === q[0] && p[1] < q[1]);\n}\n\nexport function xyCompare(p: Point, q: Point) {\n    if (xySmaller(p, q)) return Sign.SMALLER;\n    if (xyEqual(p, q)) return Sign.EQUAL;\n    return Sign.LARGER;\n}\n\nfunction getOrientedSide(p: Point, q: Point, r: Point, t: Point): Sign {\n    const qpx = q[0] - p[0];\n    const qpy = q[1] - p[1];\n    const rpx = r[0] - p[0];\n    const rpy = r[1] - p[1];\n    const tpx = t[0] - p[0];\n    const tpy = t[1] - p[1];\n    const tqx = t[0] - q[0];\n    const tqy = t[1] - q[1];\n    const rqx = r[0] - q[0];\n    const rqy = r[1] - q[1];\n\n    const det = determinant(qpx * tpy - qpy * tpx, tpx * tqx + tpy * tqy, qpx * rpy - qpy * rpx, rpx * rqx + rpy * rqy);\n    let maxx = Math.abs(qpx);\n    let maxy = Math.abs(qpy);\n    const arpx = Math.abs(rpx);\n    const arpy = Math.abs(rpy);\n    const atqx = Math.abs(tqx);\n    const atqy = Math.abs(tqy);\n    const atpx = Math.abs(tpx);\n    const atpy = Math.abs(tpy);\n    const arqx = Math.abs(rqx);\n    const arqy = Math.abs(rqy);\n\n    if (maxx < arpx) maxx = arpx;\n    if (maxx < atpx) maxx = atpx;\n    if (maxx < atqx) maxx = atqx;\n    if (maxx < arqx) maxx = arqx;\n\n    if (maxy < arpy) maxy = arpy;\n    if (maxy < atpy) maxy = atpy;\n    if (maxy < atqy) maxy = atqy;\n    if (maxy < arqy) maxy = arqy;\n\n    if (maxx > maxy) [maxx, maxy] = [maxy, maxx];\n\n    if (maxx < 1e-73 && maxx === 0) return Sign.ON_ORIENTED_BOUNDARY;\n    // sqrt(sqrt(max_double/16\n    else if (maxy < 1e76) {\n        const eps = Number.EPSILON * maxx * maxy * (maxy * maxy);\n        if (det > eps) return Sign.ON_POSITIVE_SIDE;\n        if (det < -eps) return Sign.ON_NEGATIVE_SIDE;\n    }\n\n    return Sign.ZERO;\n}\n\nfunction segSegDoIntersectCrossing(p1: Point, p2: Point, p3: Point, p4: Point): boolean {\n    switch (orientation(p1, p2, p3)) {\n        case Sign.LEFT_TURN:\n            return orientation(p3, p4, p2) !== Sign.RIGHT_TURN;\n        case Sign.RIGHT_TURN:\n            return orientation(p3, p4, p2) !== Sign.LEFT_TURN;\n        case Sign.COLLINEAR:\n            return true;\n    }\n}\n\nfunction segSegDoIntersectContained(p1: Point, p2: Point, p3: Point, p4: Point): boolean {\n    switch (orientation(p1, p2, p3)) {\n        case Sign.LEFT_TURN:\n            return orientation(p1, p2, p4) !== Sign.LEFT_TURN;\n        case Sign.RIGHT_TURN:\n            return orientation(p1, p2, p4) !== Sign.RIGHT_TURN;\n        case Sign.COLLINEAR:\n            return true;\n    }\n}\n\nexport function intersection(pa: Point, pb: Point, pc: Point, pd: Point) {\n    const i = getIntersectionType(pa, pb, pc, pd);\n    switch (i.intersectionType) {\n        case IntersectionType.POINT:\n            return i.point!;\n        case IntersectionType.NO_INTERSECTION:\n            return null;\n    }\n    throw new Error(\"sdfgighowen\");\n}\n\nenum IntersectionType {\n    NO_INTERSECTION,\n    POINT,\n    SEGMENT,\n}\n\nfunction getLine(p0: Point, p1: Point): Line {\n    if (p0[0] === p1[0]) return [1, 0, -p0[0]];\n    if (p0[1] === p1[1]) return [0, 1, -p0[1]];\n    const x = p1[0] - p0[0];\n    const y = p1[1] - p0[1];\n    return [-y, x, -x * p0[1] + y * p0[0]];\n}\n\nfunction getIntersectionType(pa: Point, pb: Point, pc: Point, pd: Point) {\n    if (!doIntersect(pa, pb, pc, pd)) return { intersectionType: IntersectionType.NO_INTERSECTION, point: null };\n    const l1 = getLine(pa, pb);\n    const l2 = getLine(pc, pd);\n    const info = getIntersectionTypeLine(l1, l2);\n    switch (info.intersectionType) {\n        case IntersectionType.POINT: {\n            return info;\n        }\n    }\n    throw new Error(\"gzseuihgpib\");\n}\n\nfunction getIntersectionTypeLine(la: Line, lb: Line) {\n    const denom = la[0] * lb[1] - lb[0] * la[1];\n    const nom1 = la[1] * lb[2] - lb[1] * la[2];\n    const nom2 = lb[0] * la[2] - la[0] * lb[2];\n    return {\n        intersectionType: IntersectionType.POINT,\n        point: [nom1 / denom, nom2 / denom],\n    };\n}\n\nfunction doIntersect(A1: Point, A2: Point, B1: Point, B2: Point): boolean {\n    if (xySmaller(A1, A2)) {\n        if (xySmaller(B1, B2)) {\n            if (xySmaller(A2, B1) || xySmaller(B2, A1)) return false;\n        } else {\n            if (xySmaller(A2, B2) || xySmaller(B1, A1)) return false;\n        }\n    } else {\n        if (xySmaller(B1, B2)) {\n            if (xySmaller(A1, B1) || xySmaller(B2, A2)) return false;\n        } else {\n            if (xySmaller(A1, B2) || xySmaller(B1, A2)) return false;\n        }\n    }\n    if (xySmaller(A1, A2)) {\n        if (xySmaller(B1, B2)) {\n            switch (xyCompare(A1, B1)) {\n                case Sign.SMALLER: {\n                    switch (xyCompare(A2, B1)) {\n                        case Sign.SMALLER:\n                            return false;\n                        case Sign.EQUAL:\n                            return true;\n                        default: {\n                            switch (xyCompare(A2, B2)) {\n                                case Sign.SMALLER:\n                                    return segSegDoIntersectCrossing(A1, A2, B1, B2);\n                                case Sign.EQUAL:\n                                    return true;\n                                default:\n                                    return segSegDoIntersectContained(A1, A2, B1, B2);\n                            }\n                        }\n                    }\n                }\n                case Sign.EQUAL:\n                    return true;\n                default:\n                    switch (xyCompare(B2, A1)) {\n                        case Sign.SMALLER:\n                            return false;\n                        case Sign.EQUAL:\n                            return true;\n                        default: {\n                            switch (xyCompare(B2, A2)) {\n                                case Sign.SMALLER:\n                                    return segSegDoIntersectCrossing(B1, B2, A1, A2);\n                                case Sign.EQUAL:\n                                    return true;\n                                default:\n                                    return segSegDoIntersectContained(B1, B2, A1, A2);\n                            }\n                        }\n                    }\n            }\n        } else {\n            switch (xyCompare(A1, B2)) {\n                case Sign.SMALLER: {\n                    switch (xyCompare(A2, B2)) {\n                        case Sign.SMALLER:\n                            return false;\n                        case Sign.EQUAL:\n                            return true;\n                        default: {\n                            switch (xyCompare(A2, B1)) {\n                                case Sign.SMALLER:\n                                    return segSegDoIntersectCrossing(A1, A2, B2, B1);\n                                case Sign.EQUAL:\n                                    return true;\n                                default:\n                                    return segSegDoIntersectContained(A1, A2, B2, B1);\n                            }\n                        }\n                    }\n                }\n                case Sign.EQUAL:\n                    return true;\n                default:\n                    switch (xyCompare(B1, A1)) {\n                        case Sign.SMALLER:\n                            return false;\n                        case Sign.EQUAL:\n                            return true;\n                        default: {\n                            switch (xyCompare(B1, A2)) {\n                                case Sign.SMALLER:\n                                    return segSegDoIntersectCrossing(B2, B1, A1, A2);\n                                case Sign.EQUAL:\n                                    return true;\n                                default:\n                                    return segSegDoIntersectContained(B2, B1, A1, A2);\n                            }\n                        }\n                    }\n            }\n        }\n    } else {\n        if (xySmaller(B1, B2)) {\n            switch (xyCompare(A2, B1)) {\n                case Sign.SMALLER: {\n                    switch (xyCompare(A1, B1)) {\n                        case Sign.SMALLER:\n                            return false;\n                        case Sign.EQUAL:\n                            return true;\n                        default: {\n                            switch (xyCompare(A1, B2)) {\n                                case Sign.SMALLER:\n                                    return segSegDoIntersectCrossing(A2, A1, B1, B2);\n                                case Sign.EQUAL:\n                                    return true;\n                                default:\n                                    return segSegDoIntersectContained(A2, A1, B1, B2);\n                            }\n                        }\n                    }\n                }\n                case Sign.EQUAL:\n                    return true;\n                default:\n                    switch (xyCompare(B2, A2)) {\n                        case Sign.SMALLER:\n                            return false;\n                        case Sign.EQUAL:\n                            return true;\n                        default: {\n                            switch (xyCompare(B2, A1)) {\n                                case Sign.SMALLER:\n                                    return segSegDoIntersectCrossing(B1, B2, A2, A1);\n                                case Sign.EQUAL:\n                                    return true;\n                                default:\n                                    return segSegDoIntersectContained(B1, B2, A2, A1);\n                            }\n                        }\n                    }\n            }\n        } else {\n            switch (xyCompare(A2, B2)) {\n                case Sign.SMALLER: {\n                    switch (xyCompare(A1, B2)) {\n                        case Sign.SMALLER:\n                            return false;\n                        case Sign.EQUAL:\n                            return true;\n                        default: {\n                            switch (xyCompare(A1, B1)) {\n                                case Sign.SMALLER:\n                                    return segSegDoIntersectCrossing(A2, A1, B2, B1);\n                                case Sign.EQUAL:\n                                    return true;\n                                default:\n                                    return segSegDoIntersectContained(A2, A1, B2, B1);\n                            }\n                        }\n                    }\n                }\n                case Sign.EQUAL:\n                    return true;\n                default:\n                    switch (xyCompare(B1, A2)) {\n                        case Sign.SMALLER:\n                            return false;\n                        case Sign.EQUAL:\n                            return true;\n                        default: {\n                            switch (xyCompare(B1, A1)) {\n                                case Sign.SMALLER:\n                                    return segSegDoIntersectCrossing(B2, B1, A2, A1);\n                                case Sign.EQUAL:\n                                    return true;\n                                default:\n                                    return segSegDoIntersectContained(B2, B1, A2, A1);\n                            }\n                        }\n                    }\n            }\n        }\n    }\n}\n\nfunction nextUp(x: number) {\n    if (x !== x) {\n        return x;\n    }\n    if (x === -1 / 0) {\n        return -Number.MAX_VALUE;\n    }\n    if (x === +1 / 0) {\n        return +1 / 0;\n    }\n    if (x === +Number.MAX_VALUE) {\n        return +1 / 0;\n    }\n    let y = x * (x < 0 ? 1 - Number.EPSILON / 2 : 1 + Number.EPSILON);\n    if (y === x) {\n        y = Number.MIN_VALUE * Number.EPSILON > 0 ? x + Number.MIN_VALUE * Number.EPSILON : x + Number.MIN_VALUE;\n    }\n    if (y === +1 / 0) {\n        y = +Number.MAX_VALUE;\n    }\n    const b = x + (y - x) / 2;\n    if (x < b && b < y) {\n        y = b;\n    }\n    const c = (y + x) / 2;\n    if (x < c && c < y) {\n        y = c;\n    }\n    return y === 0 ? -0 : y;\n}\n\nexport function ulp(x: number) {\n    return x < 0 ? nextUp(x) - x : x + nextUp(-x);\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('SelectContext',{ref:\"selectcontext\"})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"17a953f2-vue-loader-template\\\"}!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./select.vue?vue&type=template&id=2196c042&\"","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./asset_node.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./asset_node.vue?vue&type=script&lang=ts&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ContextMenu',{attrs:{\"visible\":_vm.visible,\"left\":_vm.x + 'px',\"top\":_vm.y + 'px'},on:{\"close\":_vm.close}},[(_vm.IS_DM)?_c('li',{on:{\"click\":_vm.bringPlayers}},[_vm._v(\"Bring players\")]):_vm._e(),_c('li',{on:{\"click\":_vm.createToken}},[_vm._v(\"Create basic token\")]),_c('li',{on:{\"click\":_vm.showInitiative}},[_vm._v(\"Show initiative\")])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"17a953f2-vue-loader-template\\\"}!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./selectcontext.vue?vue&type=template&id=2e7d4582&scoped=true&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./vision.vue?vue&type=style&index=0&id=46baf892&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./vision.vue?vue&type=style&index=0&id=46baf892&scoped=true&lang=css&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./edit_dialog.vue?vue&type=style&index=0&id=23de098e&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./edit_dialog.vue?vue&type=style&index=0&id=23de098e&scoped=true&lang=css&\"","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\nimport { Prop } from \"vue-property-decorator\";\n\n@Component\nexport default class Modal extends Vue {\n    @Prop(Boolean) visible!: boolean;\n    @Prop({ type: Boolean, default: true }) mask!: boolean;\n    @Prop({ type: String, default: \"white\" }) colour!: string;\n\n    $refs!: {\n        container: HTMLElement;\n    };\n\n    positioned = false;\n    offsetX = 0;\n    offsetY = 0;\n    screenX = 0;\n    screenY = 0;\n    dragging = false;\n\n    // Example of mounted required: opening note\n    mounted() {\n        this.updatePosition();\n    }\n    // Example of updated required: opening initiative\n    updated() {\n        this.updatePosition();\n    }\n\n    close(event: MouseEvent) {\n        this.$emit(\"close\");\n    }\n    updatePosition() {\n        if (!this.positioned) {\n            const container = <any>this.$refs.container;\n            if (container.offsetWidth === 0 && container.offsetHeight === 0) return;\n            this.$refs.container.style.left = (window.innerWidth - container.offsetWidth) / 2 + \"px\";\n            this.$refs.container.style.top = (window.innerHeight - container.offsetHeight) / 2 + \"px\";\n            this.positioned = true;\n        }\n    }\n    dragStart(event: DragEvent) {\n        if (event === null || event.dataTransfer === null) return;\n        event.dataTransfer.setData(\"Hack\", \"\");\n        // Because the drag event is happening on the header, we have to change the drag image\n        // in order to give the impression that the entire modal is dragged.\n        event.dataTransfer.setDragImage(<Element>this.$refs.container, event.offsetX, event.offsetY);\n        this.offsetX = event.offsetX;\n        this.offsetY = event.offsetY;\n        this.screenX = event.screenX;\n        this.screenY = event.screenY;\n        this.dragging = true;\n    }\n    dragEnd(event: DragEvent) {\n        this.dragging = false;\n        let left = event.clientX - this.offsetX;\n        let top = event.clientY - this.offsetY;\n        if (event.clientX === 0 && event.clientY === 0 && event.pageX === 0 && event.pageY === 0) {\n            left = parseInt(this.$refs.container.style.left!, 10) - (this.screenX - event.screenX);\n            top = parseInt(this.$refs.container.style.top!, 10) - (this.screenY - event.screenY);\n        }\n        if (left < 0) left = 0;\n        if (left > window.innerWidth - 100) left = window.innerWidth - 100;\n        if (top < 0) top = 0;\n        if (top > window.innerHeight - 100) top = window.innerHeight - 100;\n        this.$refs.container.style.left = left + \"px\";\n        this.$refs.container.style.top = top + \"px\";\n        this.$refs.container.style.display = \"block\";\n    }\n    dragOver(event: DragEvent) {\n        if (this.dragging) this.$refs.container.style.display = \"none\";\n    }\n}\n","import io from \"socket.io-client\";\n\nimport { Asset } from \"@/core/comm/types\";\nimport { assetStore } from \"./store\";\n\nexport const socket = io(location.protocol + \"//\" + location.host + \"/pa_assetmgmt\", { autoConnect: false });\n\n// export const socket = io.connect(location.protocol + \"//\" + location.host + \"/pa_assetmgmt\");\nsocket.on(\"connect\", () => {\n    console.log(\"Connected\");\n});\nsocket.on(\"disconnect\", () => {\n    console.log(\"Disconnected\");\n});\nsocket.on(\"redirect\", (destination: string) => {\n    console.log(\"redirecting\");\n    window.location.href = destination;\n});\nsocket.on(\"Folder.Root.Set\", (root: number) => {\n    assetStore.setRoot(root);\n});\nsocket.on(\"Folder.Set\", (folder: Asset) => {\n    assetStore.clear();\n    if (folder.children) {\n        for (const child of folder.children) {\n            assetStore.idMap.set(child.id, child);\n            if (child.file_hash) {\n                assetStore.files.push(child.id);\n            } else {\n                assetStore.folders.push(child.id);\n            }\n        }\n    }\n});\nsocket.on(\"Folder.Create\", (folder: Asset) => {\n    assetStore.folders.push(folder.id);\n    assetStore.idMap.set(folder.id, folder);\n});\nsocket.on(\"Asset.Upload.Finish\", (asset: Asset) => {\n    assetStore.idMap.set(asset.id, asset);\n    assetStore.files.push(asset.id);\n});\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Component from \"vue-class-component\";\n\nimport Accordion from \"@/core/components/accordion.vue\";\nimport Tool from \"@/game/ui/tools/tool.vue\";\n\nimport { socket } from \"@/game/api/socket\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { gameStore } from \"@/game/store\";\n\n@Component({\n    components: {\n        accordion: Accordion,\n    },\n})\nexport default class FilterTool extends Tool {\n    name = \"Filter\";\n    active = false;\n\n    get labels() {\n        const cat: { [category: string]: [string, string][] } = {'': []};\n        for (const uuid of Object.keys(gameStore.labels)) {\n            const label = gameStore.labels[uuid];\n            if (!label.category) cat[\"\"].push([label.uuid, label.name]);\n            else {\n                if (!(label.category in cat)) cat[label.category] = [];\n                cat[label.category].push([label.uuid, label.name]);\n                cat[label.category].sort((a, b) => a[1].localeCompare(b[1]));\n            }\n        }\n        return cat;\n    }\n\n    get initalValues() {\n        const values: { [category: string]: string[] } = {};\n        for (const cat of Object.keys(this.labels)) {\n            values[cat] = gameStore.labelFilters.filter(f => this.labels[cat].map(l => l[0]).includes(f));\n        }\n        return values;\n    }\n\n    get categories() {\n        return Object.keys(this.labels).sort();\n    }\n\n    isFilter(uuid: string): boolean {\n        return gameStore.labelFilters.includes(uuid);\n    }\n\n    toggleFilter(uuid: string) {\n        const i = gameStore.labelFilters.indexOf(uuid);\n        if (i >= 0) gameStore.labelFilters.splice(i, 1);\n        else gameStore.labelFilters.push(uuid);\n        layerManager.invalidate();\n    }\n\n    toggleUnlabeled() {\n        gameStore.toggleUnlabeledFilter();\n        layerManager.invalidate();\n    }\n\n    updateSelection(data: { title: string; selection: string[] }) {\n        if (!(data.title in this.labels)) return;\n        for (const [uuid, _] of this.labels[data.title]) {\n            const idx = gameStore.labelFilters.indexOf(uuid);\n            const selected = data.selection.includes(uuid);\n            if (idx >= 0 && !selected) {\n                gameStore.labelFilters.splice(idx, 1);\n                socket.emit(\"Labels.Filter.Remove\", uuid);\n            } else if (idx < 0 && selected) {\n                gameStore.labelFilters.push(uuid);\n                socket.emit(\"Labels.Filter.Add\", uuid);\n            }\n        }\n        layerManager.invalidate();\n    }\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\n\nimport { Prop } from \"vue-property-decorator\";\nimport { gameStore } from '../../game/store';\n\n@Component\nexport default class Accordion extends Vue {\n    @Prop(String) title!: string;\n    @Prop({ default: true, type: Boolean }) showArrow!: boolean;\n    @Prop({ default: () => []}) items!: [string, string][];\n    @Prop({ default: () => []}) initialValues!: string[];\n\n    selected: string[] = [];\n\n    active = false;\n\n    mounted() {\n        this.selected = this.initialValues;\n        this.updateCategory();\n    }\n\n    toggleDisplay(event: MouseEvent) {\n        this.active = !this.active;\n    }\n\n    toggleCategory() {\n        const overall = this.$refs.overall as HTMLInputElement;\n        if (overall.checked) this.selected = this.items.map((i) => i[0]);\n        else this.selected = [];\n        this.$emit(\"selectionupdate\", {title: this.title, selection: this.selected});\n    }\n\n    updateCategory() {\n        const overall = this.$refs.overall as HTMLInputElement;\n        if (this.selected.length === 0) {\n            overall.checked = false;\n            overall.indeterminate = false;\n        } else if(this.selected.length === this.items.length) {\n            overall.checked = true;\n            overall.indeterminate = false;\n        } else {\n            overall.checked = false;\n            overall.indeterminate = true;\n        }\n    }\n\n    toggleSelection(item: string) {\n        const found = this.selected.indexOf(item);\n        if (found === -1) this.selected.push(item);\n        else this.selected.splice(found, 1);\n        this.updateCategory();\n        this.$emit(\"selectionupdate\", {title: this.title, selection: this.selected});\n    }\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.selected)?_c('div',{staticClass:\"tool-detail\",style:({'--detailRight': _vm.detailRight, '--detailArrow': _vm.detailArrow})},_vm._l((_vm.tokens),function(token){return _c('div',{key:token.uuid,staticClass:\"token\",class:{'selected': _vm.selection.includes(token.uuid)},on:{\"click\":function($event){return _vm.toggle(token.uuid)}}},[(token.src)?_c('img',{attrs:{\"src\":token.src,\"width\":\"30px\",\"height\":\"30px\"}}):_vm._e(),_c('div',[_vm._v(_vm._s(token.name))])])}),0):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"17a953f2-vue-loader-template\\\"}!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./vision.vue?vue&type=template&id=46baf892&scoped=true&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./selectcontext.vue?vue&type=style&index=0&id=2e7d4582&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./selectcontext.vue?vue&type=style&index=0&id=2e7d4582&scoped=true&lang=css&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./game.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./game.vue?vue&type=style&index=0&lang=css&\"","import { GlobalPoint, LocalPoint } from \"@/game/geom\";\nimport { BoundingRect } from \"@/game/shapes/boundingrect\";\nimport { Shape } from \"@/game/shapes/shape\";\nimport { g2lx, g2ly, g2lz, l2g } from \"@/game/units\";\nimport { getFogColour } from \"@/game/utils\";\nimport { ServerMultiLine } from \"../comm/types/shapes\";\n\nexport class MultiLine extends Shape {\n    type = \"multiline\";\n    _points: GlobalPoint[] = [];\n    lineWidth: number;\n    constructor(\n        startPoint: GlobalPoint,\n        points?: GlobalPoint[],\n        lineWidth?: number,\n        strokeColour?: string,\n        uuid?: string,\n    ) {\n        super(startPoint, \"rgba(0, 0, 0, 0)\", strokeColour || \"#000\", uuid);\n        this._points = points || [];\n        this.lineWidth = lineWidth || 3;\n    }\n\n    get refPoint() {\n        return this._refPoint;\n    }\n    set refPoint(point: GlobalPoint) {\n        const delta = point.subtract(this._refPoint);\n        this._refPoint = point;\n        for (let i = 0; i < this._points.length; i++) this._points[i] = this._points[i].add(delta);\n    }\n\n    asDict() {\n        return Object.assign(this.getBaseDict(), {\n            line_width: this.lineWidth,\n            points: this._points.map(p => ({ x: p.x, y: p.y })),\n        });\n    }\n    fromDict(data: ServerMultiLine) {\n        super.fromDict(data);\n        this._points = data.points.map(p => new GlobalPoint(p.x, p.y));\n    }\n    get points() {\n        return this._points.map(point => [point.x, point.y]);\n    }\n    getBoundingBox(): BoundingRect {\n        let minx: number = this.refPoint.x;\n        let maxx: number = this.refPoint.x;\n        let miny: number = this.refPoint.y;\n        let maxy: number = this.refPoint.y;\n        for (const p of this._points) {\n            if (p.x < minx) minx = p.x;\n            if (p.x > maxx) maxx = p.x;\n            if (p.y < miny) miny = p.y;\n            if (p.y > maxy) maxy = p.y;\n        }\n        return new BoundingRect(new GlobalPoint(minx, miny), maxx - minx, maxy - miny);\n    }\n    draw(ctx: CanvasRenderingContext2D) {\n        super.draw(ctx);\n        ctx.beginPath();\n        ctx.lineCap = \"round\";\n        ctx.lineJoin = \"round\";\n        ctx.moveTo(g2lx(this.refPoint.x), g2ly(this.refPoint.y));\n        for (const p of this._points) ctx.lineTo(g2lx(p.x), g2ly(p.y));\n        if (this.strokeColour === \"fog\") ctx.strokeStyle = getFogColour();\n        else ctx.strokeStyle = this.strokeColour;\n        ctx.lineWidth = g2lz(this.lineWidth);\n        ctx.stroke();\n    }\n    contains(point: GlobalPoint): boolean {\n        return this.getBoundingBox().contains(point);\n    }\n\n    center(): GlobalPoint;\n    center(centerPoint: GlobalPoint): void;\n    center(centerPoint?: GlobalPoint): GlobalPoint | void {\n        return this.getBoundingBox().center();\n    }\n    visibleInCanvas(canvas: HTMLCanvasElement): boolean {\n        return this.getBoundingBox().visibleInCanvas(canvas);\n    } // TODO\n    snapToGrid(): void {}\n    resizeToGrid(): void {}\n    resize(resizePoint: number, point: LocalPoint): void {\n        if (resizePoint === 0) this._refPoint = l2g(point);\n        else this._points[resizePoint - 1] = l2g(point);\n    }\n}\n","import { render, staticRenderFns } from \"./draw.vue?vue&type=template&id=57300176&scoped=true&\"\nimport script from \"./draw.vue?vue&type=script&lang=ts&\"\nexport * from \"./draw.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./draw.vue?vue&type=style&index=0&id=57300176&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"57300176\",\n  null\n  \n)\n\nexport default component.exports","import tinycolor from \"tinycolor2\";\n\nimport { LocalPoint } from \"@/game/geom\";\nimport { gameStore } from \"@/game/store\";\n\nexport function getMouse(e: MouseEvent): LocalPoint {\n    return new LocalPoint(e.pageX, e.pageY);\n}\n\nexport function getFogColour(opposite: boolean = false): string {\n    const tc = tinycolor(gameStore.fowColour);\n    if (gameStore.IS_DM) tc.setAlpha(opposite ? 1 : gameStore.fowOpacity);\n    else tc.setAlpha(1);\n    return tc.toRgbString();\n}\n\nexport function zoomValue(display: number) {\n    // Powercurve 0.2/3/10\n    // Based on https://stackoverflow.com/a/17102320\n    return 1 / (-5 / 3 + (28 / 15) * Math.exp(1.83 * display));\n}\n\nexport function zoomDisplay(value: number) {\n    return Math.log((1 / value + 5 / 3) * (15 / 28)) / 1.83;\n}\n\nexport function equalPoints(a: number[], b: number[]): boolean {\n    return a[0] === b[0] && a[1] === b[1];\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport * as tinycolor from \"tinycolor2\";\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\n\nimport { mapState } from \"vuex\";\n\nimport ColorPicker from \"@/core/components/colorpicker.vue\";\nimport Modal from \"@/core/components/modals/modal.vue\";\n\nimport { calcFontScale } from \"@/core/utils\";\nimport { LocalPoint } from \"@/game/geom\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { CircularToken } from \"@/game/shapes/circulartoken\";\nimport { gameStore } from \"@/game/store\";\nimport { getUnitDistance, l2g } from \"@/game/units\";\nimport { Watch } from \"vue-property-decorator\";\n\n@Component({\n    components: {\n        Modal,\n        \"color-picker\": ColorPicker,\n    },\n    computed: {\n        ...mapState(\"game\", [\"unitSize\"]),\n    },\n})\nexport default class CreateTokenModal extends Vue {\n    x = 0;\n    y = 0;\n    visible = false;\n    text = \"X\";\n    fillColour = \"rgba(255, 255, 255, 1)\";\n    borderColour = \"rgba(0, 0, 0, 1)\";\n\n    mounted() {\n        this.updatePreview();\n    }\n\n    @Watch(\"text\")\n    onTextChange(newValue: string, oldValue: string) {\n        this.updatePreview();\n    }\n    @Watch(\"fillColour\")\n    onFillChange(newValue: string, oldValue: string) {\n        this.updatePreview();\n    }\n    @Watch(\"borderColour\")\n    onBorderChange(newValue: string, oldValue: string) {\n        this.updatePreview();\n    }\n\n    open(x: number, y: number) {\n        this.visible = true;\n        this.x = x;\n        this.y = y;\n    }\n    submit() {\n        const layer = layerManager.getLayer();\n        if (layer === undefined) return;\n        const token = new CircularToken(\n            l2g(new LocalPoint(this.x, this.y)),\n            getUnitDistance(gameStore.unitSize / 2),\n            this.text,\n            \"10px serif\",\n            this.fillColour,\n            this.borderColour,\n        );\n        token.addOwner(gameStore.username);\n        layer.addShape(token, true);\n        layer.invalidate(false);\n        this.visible = false;\n    }\n    updatePreview() {\n        const ctx = (<HTMLCanvasElement>this.$refs.canvas).getContext(\"2d\")!;\n        ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n        ctx.beginPath();\n        const dest = { x: ctx.canvas.width / 2, y: ctx.canvas.height / 2 };\n        const r = Math.min(dest.x, dest.y) * 0.9;\n\n        ctx.fillStyle = this.fillColour;\n\n        ctx.arc(dest.x, dest.y, r, 0, 2 * Math.PI);\n        ctx.fill();\n        if (this.borderColour !== \"rgba(0, 0, 0, 0)\") {\n            ctx.beginPath();\n            ctx.lineWidth = 5;\n            ctx.strokeStyle = this.borderColour;\n            ctx.arc(dest.x, dest.y, r, 0, 2 * Math.PI);\n            ctx.stroke();\n        }\n        ctx.save();\n        ctx.textAlign = \"center\";\n        ctx.textBaseline = \"middle\";\n        const xs = calcFontScale(ctx, this.text, r, r);\n        const ys = 0;\n        ctx.transform(xs, ys, -ys, xs, dest.x, dest.y);\n        ctx.fillStyle = tinycolor.mostReadable(this.fillColour, [\"#000\", \"#fff\"]).toHexString();\n        ctx.fillText(this.text, 0, 0);\n        ctx.restore();\n    }\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\n\nimport ConfirmDialog from \"@/core/components/modals/confirm.vue\";\nimport Modal from \"@/core/components/modals/modal.vue\";\n\nimport { getRef } from \"@/core/utils\";\nimport { Note } from \"@/game/comm/types/general\";\nimport { gameStore } from \"@/game/store\";\n\n@Component({\n    components: {\n        Modal,\n    },\n})\nexport default class NoteDialog extends Vue {\n    visible = false;\n    note: Note | null = null;\n\n    open(note: Note) {\n        this.visible = true;\n        this.note = note;\n    }\n    calcHeight() {\n        if (this.$refs.textarea) {\n            const el = <HTMLElement>this.$refs.textarea;\n            el.style.height = \"auto\";\n            el.style.height = el.scrollHeight + \"px\";\n            // Using the return value without the above did not achieve what I want, so hey /shrug\n            return el.scrollHeight + \"px\";\n        }\n        return \"100px\";\n    }\n    updateNote() {\n        if (this.note) gameStore.updateNote({ note: this.note, sync: true });\n    }\n    removeNote() {\n        getRef<ConfirmDialog>(\"confirm\")\n            .open(\"Are you sure you wish to remove this?\")\n            .then(\n                (result: boolean) => {\n                    if (result && this.note) {\n                        gameStore.removeNote({ note: this.note, sync: true });\n                        this.visible = false;\n                    }\n                },\n                () => {},\n            );\n    }\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Component from \"vue-class-component\";\n\nimport { Watch } from \"vue-property-decorator\";\n\nimport ColorPicker from \"@/core/components/colorpicker.vue\";\nimport Tool from \"@/game/ui/tools/tool.vue\";\n\nimport { socket } from \"@/game/api/socket\";\nimport { GlobalPoint } from \"@/game/geom\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { Circle } from \"@/game/shapes/circle\";\nimport { Line } from \"@/game/shapes/line\";\nimport { MultiLine } from \"@/game/shapes/multiline\";\nimport { Polygon } from \"@/game/shapes/polygon\";\nimport { Rect } from \"@/game/shapes/rect\";\nimport { Shape } from \"@/game/shapes/shape\";\nimport { gameStore } from \"@/game/store\";\nimport { getUnitDistance, l2g } from \"@/game/units\";\nimport { getMouse, equalPoints } from \"@/game/utils\";\nimport { TriangulationTarget, PA_CDT } from '../../visibility/te/pa';\n\n@Component({\n    components: {\n        \"color-picker\": ColorPicker,\n    },\n})\nexport default class DrawTool extends Tool {\n    name = \"Draw\";\n    active = false;\n\n    startPoint: GlobalPoint | null = null;\n    shape: Shape | null = null;\n    brushHelper: Circle | null = null;\n    ruler: Line | null = null;\n\n    fillColour = \"rgba(0, 0, 0, 1)\";\n    borderColour = \"rgba(255, 255, 255, 0)\";\n\n    shapeSelect = \"square\";\n    shapes = [\"square\", \"circle\", \"draw-polygon\", \"paint-brush\"];\n    modeSelect = \"normal\";\n    modes = [\"normal\", \"reveal\", \"hide\"];\n\n    brushSize = getUnitDistance(gameStore.unitSize);\n\n    get helperSize(): number {\n        if (this.shapeSelect === \"paint-brush\") return this.brushSize / 2;\n        return getUnitDistance(this.unitSize) / 8;\n    }\n    get IS_DM(): boolean {\n        return gameStore.IS_DM;\n    }\n    get unitSize(): number {\n        return gameStore.unitSize;\n    }\n    get useGrid(): boolean {\n        return gameStore.useGrid;\n    }\n\n    @Watch(\"fillColour\")\n    onFillChange() {\n        if (this.brushHelper) this.brushHelper.fillColour = this.fillColour;\n    }\n\n    @Watch(\"modeSelect\")\n    onModeUpdate(newValue: string, oldValue: string) {\n        this.onModeChange(newValue, oldValue);\n    }\n\n    setupBrush() {\n        if (this.brushHelper === null) return;\n        if (this.modeSelect === \"reveal\" || this.modeSelect === \"hide\") {\n            this.brushHelper.options.set(\"preFogShape\", true);\n            this.brushHelper.options.set(\"skipDraw\", true);\n            this.brushHelper.fillColour = \"rgba(0, 0, 0, 1)\";\n\n            if (this.modeSelect === \"reveal\") this.brushHelper.globalCompositeOperation = \"source-over\";\n            else if (this.modeSelect === \"hide\") this.brushHelper.globalCompositeOperation = \"destination-out\";\n        } else {\n            this.brushHelper.options.delete(\"preFogShape\");\n            this.brushHelper.options.delete(\"skipDraw\");\n            this.brushHelper.globalCompositeOperation = \"source-over\";\n            this.brushHelper.fillColour = this.fillColour;\n        }\n    }\n    onModeChange(newValue: string, oldValue: string) {\n        if (this.brushHelper === null) return;\n\n        const fowLayer = layerManager.getLayer(\"fow\");\n        const normalLayer = layerManager.getLayer();\n        if (fowLayer === undefined || normalLayer === undefined) return;\n\n        this.setupBrush();\n\n        if (newValue !== \"normal\" && oldValue === \"normal\") {\n            normalLayer.removeShape(this.brushHelper, false);\n            fowLayer.addShape(this.brushHelper, false);\n        } else if (newValue === \"normal\" && oldValue !== \"normal\") {\n            normalLayer.addShape(this.brushHelper, false);\n            fowLayer.removeShape(this.brushHelper, false);\n        }\n    }\n    getLayer() {\n        if (this.modeSelect === \"normal\") return layerManager.getLayer();\n        return layerManager.getLayer(\"fow\");\n    }\n    onMouseDown(event: MouseEvent) {\n        const layer = this.getLayer();\n        if (layer === undefined) {\n            console.log(\"No active layer!\");\n            return;\n        }\n        if (!this.active) {\n            this.startPoint = l2g(getMouse(event));\n            this.active = true;\n            switch (this.shapeSelect) {\n                case \"square\": {\n                    this.shape = new Rect(this.startPoint.clone(), 0, 0, this.fillColour, this.borderColour);\n                    break;\n                }\n                case \"circle\": {\n                    this.shape = new Circle(\n                        this.startPoint.clone(),\n                        this.helperSize,\n                        this.fillColour,\n                        this.borderColour,\n                    );\n                    break;\n                }\n                case \"paint-brush\": {\n                    this.shape = new MultiLine(this.startPoint.clone(), [], this.brushSize);\n                    this.shape.fillColour = this.fillColour;\n                    break;\n                }\n                case \"draw-polygon\": {\n                    this.shape = new Polygon(this.startPoint.clone(), [], this.fillColour, this.borderColour);\n                    break;\n                }\n                default:\n                    return;\n            }\n\n            if (this.modeSelect !== \"normal\") {\n                this.shape.options.set(\"preFogShape\", true);\n                this.shape.options.set(\"skipDraw\", true);\n                this.shape.fillColour = \"rgba(0, 0, 0, 1)\";\n            }\n            if (this.modeSelect === \"reveal\") this.shape.globalCompositeOperation = \"source-over\";\n            else if (this.modeSelect === \"hide\") this.shape.globalCompositeOperation = \"destination-out\";\n\n            this.shape.addOwner(gameStore.username);\n            if (layer.name === \"fow\" && this.modeSelect === \"normal\") {\n                this.shape.visionObstruction = true;\n                // this.shape.movementObstruction = true;\n            }\n            layer.addShape(this.shape, true, false, false);\n\n            // Push brushhelper to back\n            this.pushBrushBack();\n        } else if (this.shape !== null && this.shape instanceof Polygon) {\n            // For polygon draw\n            this.shape._vertices.push(l2g(getMouse(event)));\n        }\n        if (this.shape !== null && this.shape instanceof Polygon) {\n            const lastPoint = l2g(getMouse(event));\n            if (this.ruler === null) {\n                this.ruler = new Line(lastPoint, lastPoint, 3, \"black\");\n                layer.addShape(this.ruler, false);\n            } else {\n                this.ruler.refPoint = lastPoint;\n                this.ruler.endPoint = lastPoint;\n            }\n            if (this.shape.visionObstruction) PA_CDT.vision.insertConstraint(this.shape.points[this.shape.points.length - 2], this.shape.points[this.shape.points.length - 1]);\n            layer.invalidate(false);\n            socket.emit(\"Shape.Update\", { shape: this.shape!.asDict(), redraw: true, temporary: true });\n        }\n    }\n    onMouseMove(event: MouseEvent) {\n        const endPoint = l2g(getMouse(event));\n        const layer = this.getLayer();\n        if (layer === undefined) {\n            console.log(\"No active layer!\");\n            return;\n        }\n\n        if (this.brushHelper !== null) {\n            this.brushHelper.r = this.helperSize;\n            this.brushHelper.refPoint = endPoint;\n            if (!this.active) layer.invalidate(false);\n        }\n\n        if (!this.active || this.startPoint === null || this.shape === null) return;\n\n        const oldPoints = this.shape.points;\n\n        switch (this.shapeSelect) {\n            case \"square\": {\n                const rect = (<Rect>this.shape);\n                const newW = Math.abs(endPoint.x - this.startPoint.x);\n                const newH = Math.abs(endPoint.y - this.startPoint.y);\n                if (newW === rect.w && newH === rect.h) return;\n                rect.w = newW;\n                rect.h = newH;\n                if (endPoint.x < this.startPoint.x || endPoint.y < this.startPoint.y) {\n                    this.shape.refPoint = new GlobalPoint(\n                        Math.min(this.startPoint.x, endPoint.x),\n                        Math.min(this.startPoint.y, endPoint.y),\n                    );\n                }\n                break;\n            }\n            case \"circle\": {\n                const circ = (<Circle>this.shape);\n                const newR = endPoint.subtract(this.startPoint).length();\n                if (circ.r === newR) return;\n                circ.r = newR;\n                break;\n            }\n            case \"paint-brush\": {\n                const br = (<MultiLine>this.shape);\n                if (equalPoints(br.points[br.points.length - 1], [endPoint.x, endPoint.y])) return;\n                br._points.push(endPoint);\n                break;\n            }\n            case \"draw-polygon\": {\n                this.ruler!.endPoint = endPoint;\n                break;\n            }\n        }\n\n        if (!(this.shape instanceof Polygon)) {\n            socket.emit(\"Shape.Update\", { shape: this.shape!.asDict(), redraw: true, temporary: true });\n            if (this.shape.visionObstruction) {\n                if (oldPoints.length > 1) gameStore.deleteFromTriag({target: TriangulationTarget.VISION, points: oldPoints, standalone: false });\n                gameStore.addToTriag({ target: TriangulationTarget.VISION, points: this.shape.points });\n            }\n        }\n        layer.invalidate(false);\n    }\n    onMouseUp(event: MouseEvent) {\n        if (!this.active || this.shape === null || this.shape instanceof Polygon) return;\n        if (!event.altKey && this.useGrid) {\n            gameStore.deleteFromTriag({target: TriangulationTarget.VISION, points: this.shape.points, standalone: false });\n            this.shape.resizeToGrid();\n            gameStore.addToTriag({ target: TriangulationTarget.VISION, points: this.shape.points });\n        }\n        this.finaliseShape();\n    }\n    onContextMenu(event: MouseEvent) {\n        if (!this.active || this.shape === null || !(this.shape instanceof Polygon)) return;\n        const layer = this.getLayer();\n        if (layer === undefined) {\n            console.log(\"No active layer!\");\n            return;\n        }\n        layer.removeShape(this.ruler!, false);\n        this.ruler = null;\n        this.finaliseShape();\n    }\n\n    private finaliseShape() {\n        if (this.shape === null) return;\n        if (this.shape.visionObstruction) gameStore.recalculateVision();\n        if (this.shape.movementObstruction) gameStore.recalculateMovement();\n        socket.emit(\"Shape.Update\", { shape: this.shape!.asDict(), redraw: true, temporary: false });\n        this.active = false;\n    }\n\n    onSelect() {\n        const layer = this.getLayer();\n        if (layer === undefined) return;\n        this.brushHelper = new Circle(new GlobalPoint(-1000, -1000), this.brushSize / 2, this.fillColour);\n        this.setupBrush();\n        layer.addShape(this.brushHelper, false); // during mode change the shape is already added\n    }\n    onDeselect() {\n        const layer = this.getLayer();\n        if (this.brushHelper !== null && layer !== undefined) layer.removeShape(this.brushHelper, false);\n        if (this.active && layer !== undefined && this.shape !== null) {\n            layer.removeShape(this.shape, true, false);\n            this.shape = null;\n            this.active = false;\n            layer.invalidate(false);\n        }\n    }\n\n    private pushBrushBack() {\n        const layer = this.getLayer();\n        if (layer === undefined) {\n            console.log(\"No active layer!\");\n            return;\n        }\n        if (this.brushHelper !== null) layer.removeShape(this.brushHelper, false);\n        this.brushHelper = new Circle(new GlobalPoint(-1000, -1000), this.brushSize / 2, this.fillColour);\n        this.setupBrush();\n        layer.addShape(this.brushHelper, false); // during mode change the shape is already added\n    }\n}\n","import { GlobalPoint, LocalPoint } from \"@/game/geom\";\nimport { BoundingRect } from \"@/game/shapes/boundingrect\";\nimport { Shape } from \"@/game/shapes/shape\";\nimport { g2lx, g2ly, l2g } from \"@/game/units\";\n\nexport class Line extends Shape {\n    type = \"line\";\n    endPoint: GlobalPoint;\n    lineWidth: number;\n    constructor(\n        startPoint: GlobalPoint,\n        endPoint: GlobalPoint,\n        lineWidth?: number,\n        strokeColour?: string,\n        uuid?: string,\n    ) {\n        super(startPoint, \"rgba(0, 0, 0, 0)\", strokeColour || \"#000\", uuid);\n        this.endPoint = endPoint;\n        this.lineWidth = lineWidth === undefined ? 1 : lineWidth;\n    }\n    asDict() {\n        return Object.assign(this.getBaseDict(), {\n            x2: this.endPoint.x,\n            y2: this.endPoint.y,\n            line_width: this.lineWidth,\n        });\n    }\n    get points() {\n        return [[this.refPoint.x, this.refPoint.y], [this.endPoint.x, this.endPoint.y]];\n    }\n    getBoundingBox(): BoundingRect {\n        return new BoundingRect(\n            new GlobalPoint(Math.min(this.refPoint.x, this.endPoint.x), Math.min(this.refPoint.y, this.endPoint.y)),\n            Math.abs(this.refPoint.x - this.endPoint.x),\n            Math.abs(this.refPoint.y - this.endPoint.y),\n        );\n    }\n    draw(ctx: CanvasRenderingContext2D) {\n        super.draw(ctx);\n        ctx.strokeStyle = this.strokeColour;\n        ctx.beginPath();\n        ctx.moveTo(g2lx(this.refPoint.x), g2ly(this.refPoint.y));\n        ctx.lineTo(g2lx(this.endPoint.x), g2ly(this.endPoint.y));\n        ctx.lineWidth = this.lineWidth;\n        ctx.stroke();\n    }\n    contains(point: GlobalPoint): boolean {\n        return false; // TODO\n    }\n\n    center(): GlobalPoint;\n    center(centerPoint: GlobalPoint): void;\n    center(centerPoint?: GlobalPoint): GlobalPoint | void {} // TODO\n    visibleInCanvas(canvas: HTMLCanvasElement): boolean {\n        return this.getBoundingBox().visibleInCanvas(canvas);\n    } // TODO\n    snapToGrid(): void {}\n    resizeToGrid(): void {}\n    resize(resizePoint: number, point: LocalPoint): void {\n        if (resizePoint === 0) this.refPoint = l2g(point);\n        else this.endPoint = l2g(point);\n    }\n}\n","// import \"./class-component-hooks\";\n\nimport axios, { AxiosResponse } from \"axios\";\nimport Vue from \"vue\";\nimport Router from \"vue-router\";\n\nVue.use(Router);\n\nimport AssetManager from \"@/assetManager/manager.vue\";\nimport Login from \"@/auth/login.vue\";\nimport Logout from \"@/auth/logout\";\nimport LoadComponent from \"@/core/components/load.vue\";\nimport Dashboard from \"@/dashboard/main.vue\";\nimport Game from \"@/game/game.vue\";\nimport Invitation from \"@/invitation/invitation\";\n\nimport { coreStore } from \"@/core/store\";\n// import { AssetManager } from \"./assetManager/assets\";\n// const AssetManager = () => import(\"./assetManager/assets\").then(m => m.AssetManager);\n\nexport const router = new Router({\n    mode: \"history\",\n    base: process.env.BASE_URL,\n    routes: [\n        {\n            path: \"/\",\n            redirect: \"/dashboard\",\n        },\n        {\n            path: \"/_load\",\n            name: \"load\",\n            component: LoadComponent,\n        },\n        {\n            path: \"/assets\",\n            component: AssetManager,\n            meta: {\n                auth: true,\n            },\n        },\n        {\n            path: \"/auth\",\n            component: { template: \"<router-view></router-view>\" },\n            children: [{ path: \"login\", component: Login }, { path: \"logout\", component: Logout }],\n        },\n        {\n            path: \"/invite/:code\",\n            component: Invitation,\n            meta: {\n                auth: true,\n            },\n        },\n        {\n            path: \"/dashboard\",\n            component: Dashboard,\n            meta: {\n                auth: true,\n            },\n        },\n        {\n            path: \"/game/:creator/:room\",\n            component: Game,\n            meta: {\n                auth: true,\n            },\n        },\n    ],\n});\n\nrouter.beforeEach((to, from, next) => {\n    if (!coreStore.initialized && to.path !== \"/_load\") {\n        next({ path: \"/_load\" });\n        axios\n            .get(\"/api/auth\")\n            .then((response: AxiosResponse) => {\n                if (response.data.auth) {\n                    coreStore.setAuthenticated(true);\n                    coreStore.setUsername(response.data.username);\n                }\n                coreStore.setInitialized(true);\n                router.push(to.path);\n            })\n            .catch(() => {\n                console.error(\"Authentication check could not be fulfilled.\");\n            });\n    } else if (to.matched.some(record => record.meta.auth) && !coreStore.authenticated) {\n        next({ path: \"/auth/login\", query: { redirect: to.path } });\n    } else {\n        next();\n    }\n});\n","\n\n\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\n\n@Component\nexport default class Tool extends Vue {\n    name = \"\";\n    selected = false;\n    active = false;\n    get detailRight(): string {\n        const rect = (<any>this.$parent.$refs[this.name + \"-selector\"])[0].getBoundingClientRect();\n        const mid = rect.left + rect.width / 2;\n\n        return `${window.innerWidth - Math.min(window.innerWidth - 25, mid + 75)}px`;\n    }\n    get detailArrow(): string {\n        const rect = (<any>this.$parent.$refs[this.name + \"-selector\"])[0].getBoundingClientRect();\n        const mid = rect.left + rect.width / 2;\n        const right = Math.min(window.innerWidth - 25, mid + 75);\n        return `${right - mid - 14}px`; // border width\n    }\n    created() {\n        this.$parent.$on(\"mousedown\", (event: MouseEvent, tool: string) => {\n            if (tool === this.name) this.onMouseDown(event);\n        });\n        this.$parent.$on(\"mouseup\", (event: MouseEvent, tool: string) => {\n            if (tool === this.name) this.onMouseUp(event);\n        });\n        this.$parent.$on(\"mousemove\", (event: MouseEvent, tool: string) => {\n            if (tool === this.name) this.onMouseMove(event);\n        });\n        this.$parent.$on(\"contextmenu\", (event: MouseEvent, tool: string) => {\n            if (tool === this.name) this.onContextMenu(event);\n        });\n        this.$parent.$on(\"tools-select-change\", (newValue: string, oldValue: string) => {\n            if (oldValue === this.name) {\n                this.selected = false;\n                this.onDeselect();\n            } else if (newValue === this.name) {\n                this.selected = true;\n                this.onSelect();\n            }\n        });\n    }\n    onSelect() {}\n    onDeselect() {}\n    onMouseDown(event: MouseEvent) {}\n    onMouseUp(event: MouseEvent) {}\n    onMouseMove(event: MouseEvent) {}\n    onContextMenu(event: MouseEvent) {}\n}\n","import { render, staticRenderFns } from \"./tools.vue?vue&type=template&id=b6e1f51c&scoped=true&\"\nimport script from \"./tools.vue?vue&type=script&lang=ts&\"\nexport * from \"./tools.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./tools.vue?vue&type=style&index=0&id=b6e1f51c&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"b6e1f51c\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tool.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tool.vue?vue&type=script&lang=ts&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"main\"},on:{\"mouseleave\":_vm.mouseleave,\"wheel\":_vm.zoom}},[(_vm.showUI)?_c('menu-bar'):_vm._e(),_c('div',{attrs:{\"id\":\"board\"}},[(_vm.ready.manager)?[_c('tool-bar',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showUI),expression:\"showUI\"}],ref:\"tools\"})]:_vm._e(),_c('div',{attrs:{\"id\":\"layers\"},on:{\"mousedown\":_vm.mousedown,\"mouseup\":_vm.mouseup,\"mousemove\":_vm.mousemove,\"contextmenu\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.contextmenu($event)},\"dragover\":function($event){$event.preventDefault();},\"drop\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.drop($event)}}}),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showUI && _vm.layers.length>1),expression:\"showUI && layers.length>1\"}],attrs:{\"id\":\"layerselect\"}},[_c('ul',_vm._l((_vm.layers),function(layer){return _c('li',{key:layer.name,class:{ 'layer-selected': layer === _vm.selectedLayer },on:{\"mousedown\":function($event){return _vm.selectLayer(layer)}}},[_c('a',{attrs:{\"href\":\"#\"}},[_vm._v(_vm._s(layer))])])}),0)])],2),_c('selection-info',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showUI),expression:\"showUI\"}],ref:\"selectionInfo\"}),_c('initiative-dialog',{ref:\"initiative\",attrs:{\"id\":\"initiativedialog\"}}),_c('note-dialog',{ref:\"note\"}),_c('label-dialog',{ref:\"labels\"}),(_vm.IS_DM || _vm.FAKE_PLAYER)?_c('dm-settings',{ref:\"dmsettings\"}):_vm._e(),_c('zoom-slider',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showUI),expression:\"showUI\"}],attrs:{\"id\":\"zoomer\",\"height\":6,\"width\":200,\"min\":0,\"max\":1,\"interval\":0.1,\"dot-width\":8,\"dot-height\":20,\"tooltip-dir\":'bottom',\"tooltip\":'hover',\"formatter\":_vm.zoomDisplay.toFixed(1),\"slider-style\":{'border-radius': '15%'},\"bg-style\":{'background-color': '#fff', 'box-shadow': '0.5px 0.5px 3px 1px rgba(0, 0, 0, .36)'},\"process-style\":{'background-color': '#fff'}},model:{value:(_vm.zoomDisplay),callback:function ($$v) {_vm.zoomDisplay=$$v},expression:\"zoomDisplay\"}}),_c('prompt-dialog',{ref:\"prompt\"}),_c('confirm-dialog',{ref:\"confirm\"})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"17a953f2-vue-loader-template\\\"}!../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./game.vue?vue&type=template&id=3d0578ba&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"input-copy\"},on:{\"mouseleave\":function($event){_vm.showPopup=false}}},[_c('input',{attrs:{\"type\":\"text\",\"disabled\":\"disabled\",\"id\":\"input-element\"},domProps:{\"value\":_vm.value}}),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showPopup),expression:\"showPopup\"}],attrs:{\"id\":\"show-popup\"}},[_vm._v(_vm._s(_vm.popupString))]),_c('div',{attrs:{\"id\":\"copy-button\"},on:{\"click\":_vm.copy}},[_c('i',{staticClass:\"far fa-copy\"})])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"17a953f2-vue-loader-template\\\"}!../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./inputCopy.vue?vue&type=template&id=20bfdb3e&scoped=true&\"","import { InitiativeData } from \"@/game/comm/types/general\";\nimport { ServerAsset } from \"@/game/comm/types/shapes\";\nimport { GlobalPoint } from \"@/game/geom\";\nimport { BaseRect } from \"@/game/shapes/baserect\";\nimport { gameStore } from \"@/game/store\";\nimport { g2lx, g2ly, g2lz } from \"@/game/units\";\n\nexport class Asset extends BaseRect {\n    type = \"assetrect\";\n    img: HTMLImageElement;\n    src: string = \"\";\n    constructor(img: HTMLImageElement, topleft: GlobalPoint, w: number, h: number, uuid?: string) {\n        super(topleft, w, h, undefined, undefined, uuid);\n        this.img = img;\n    }\n    asDict() {\n        return Object.assign(this.getBaseDict(), {\n            src: this.src,\n        });\n    }\n    fromDict(data: ServerAsset) {\n        super.fromDict(data);\n        this.src = data.src;\n    }\n    draw(ctx: CanvasRenderingContext2D) {\n        super.draw(ctx);\n        try {\n            ctx.drawImage(this.img, g2lx(this.refPoint.x), g2ly(this.refPoint.y), g2lz(this.w), g2lz(this.h));\n        } catch (error) {\n            console.warn(`Shape ${this.uuid} could not load the image ${this.src}`);\n        }\n    }\n    getInitiativeRepr(): InitiativeData {\n        return {\n            uuid: this.uuid,\n            visible: !gameStore.IS_DM,\n            group: false,\n            source: this.src,\n            has_img: true,\n            effects: [],\n            index: Infinity,\n        };\n    }\n}\n","import { render, staticRenderFns } from \"./inputCopy.vue?vue&type=template&id=20bfdb3e&scoped=true&\"\nimport script from \"./inputCopy.vue?vue&type=script&lang=ts&\"\nexport * from \"./inputCopy.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./inputCopy.vue?vue&type=style&index=0&id=20bfdb3e&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"20bfdb3e\",\n  null\n  \n)\n\nexport default component.exports","import { BoundingBox, EdgeCirculator, FaceCirculator, LineFaceCirculator, LocateType, Point, Sign, TDS, Triangle, Vertex } from \"./tds\";\nimport { ccw, collinearBetween, cw, edgeInfo, hasInexactNegativeOrientation, intersection, orientation, sideOfOrientedCircle, xyEqual } from \"./triag\";\n\nexport type Edge = [Triangle, number];\n\nexport class CDT {\n    tds: TDS;\n    constructor() {\n        this.tds = new TDS();\n    }\n    insertConstraint(a: Point, b: Point): { va: Vertex; vb: Vertex } {\n        const va = this.insert(a);\n        const vb = this.insert(b);\n        if (va !== vb) this.insertConstraintV(va, vb);\n        return { va, vb };\n    }\n\n    insertConstraintV(va: Vertex, vb: Vertex) {\n        const stack = [[va, vb]];\n        while (stack.length > 0) {\n            const v = stack.pop()!;\n            const info = edgeInfo(v[0], v[1]);\n            if (info.includes) {\n                this.markConstraint(info.fr!, info.i!);\n                if (info.vi! !== v[1]) {\n                    stack.push([info.vi!, v[1]]);\n                }\n                continue;\n            }\n            const intersectionInfo = this.findIntersectedFaces(v[0], v[1]);\n            if (intersectionInfo.found) {\n                if (intersectionInfo.vi !== v[0] && intersectionInfo.vi !== v[1]) {\n                    stack.push([v[0], intersectionInfo.vi]);\n                    stack.push([intersectionInfo.vi, v[1]]);\n                } else {\n                    stack.push(v);\n                }\n                continue;\n            }\n            this.triangulateHole(intersectionInfo.intersectedFaces, intersectionInfo.listAB, intersectionInfo.listBA);\n            if (intersectionInfo.vi !== v[1]) {\n                stack.push([intersectionInfo.vi, v[1]]);\n            }\n        }\n    }\n\n    triangulateHole(intersectedFaces: Triangle[], listAB: Edge[], listBA: Edge[]) {\n        const edges: Edge[] = [];\n        this.triangulateHole2(intersectedFaces, listAB, listBA, edges);\n        this.propagatingFlipE(edges);\n    }\n\n    triangulateHole2(intersectedFaces: Triangle[], listAB: Edge[], listBA: Edge[], edges: Edge[]) {\n        if (listAB.length > 0) {\n            this.triangulateHalfHole(listAB, edges);\n            this.triangulateHalfHole(listBA, edges);\n            const fl = listAB[0][0];\n            const fr = listBA[0][0];\n            fl.neighbours[2] = fr;\n            fr.neighbours[2] = fl;\n            fl.constraints[2] = true;\n            fr.constraints[2] = true;\n\n            while (intersectedFaces.length > 0) {\n                this.tds.deleteTriangle(intersectedFaces.shift()!);\n            }\n        }\n    }\n\n    triangulateHalfHole(conflictBoundaries: Edge[], edges: Edge[]) {\n        let iC = 0;\n        let iN: number;\n        let iT: number;\n        const current = () => conflictBoundaries[iC];\n        const next = () => conflictBoundaries[iN];\n        const tempo = () => conflictBoundaries[iT];\n\n        const va = current()[0].vertices[ccw(current()[1])]!;\n        iN = iC;\n        ++iN;\n\n        let n: Triangle;\n        let n1: Triangle;\n        let n2: Triangle;\n        let ind: number;\n        let ind1: number;\n        let ind2: number;\n        do {\n            n1 = current()[0];\n            ind1 = current()[1];\n            if (n1.neighbours[ind1] !== null) {\n                n = n1.neighbours[ind1]!;\n                ind = cw(n.indexV(n1.vertices[cw(ind1)]!));\n                n1 = n.neighbours[ind]!;\n                ind1 = this.tds.mirrorIndex(n, ind);\n            }\n            n2 = next()[0];\n            ind2 = next()[1];\n            if (n2.neighbours[ind2] !== null) {\n                n = n2.neighbours[ind2]!;\n                ind = cw(n.indexV(n2.vertices[cw(ind2)]!));\n                n2 = n.neighbours[ind]!;\n                ind2 = this.tds.mirrorIndex(n, ind);\n            }\n            const v0 = n1.vertices[ccw(ind1)]!;\n            const v1 = n1.vertices[cw(ind1)]!;\n            const v2 = n2.vertices[cw(ind2)]!;\n            const orient = orientation(v0.point!, v1.point!, v2.point!);\n            switch (orient) {\n                case Sign.RIGHT_TURN: {\n                    const newlf = this.tds.createTriangle(v0, v2, v1, null, null, null);\n                    edges.push([newlf, 2]);\n                    newlf.neighbours[1] = n1;\n                    newlf.neighbours[0] = n2;\n                    n1.neighbours[ind1] = newlf;\n                    n2.neighbours[ind2] = newlf;\n                    if (n1.isConstrained(ind1)) newlf.constraints[1] = true;\n                    if (n2.isConstrained(ind2)) newlf.constraints[0] = true;\n                    v0.triangle = newlf;\n                    v1.triangle = newlf;\n                    v2.triangle = newlf;\n                    iT = iC + 1;\n                    conflictBoundaries.splice(iC, 0, [newlf, 2]);\n                    conflictBoundaries.splice(Math.max(iT, iN), 1);\n                    conflictBoundaries.splice(Math.min(iT, iN), 1);\n                    iN = iC;\n                    if (v0 !== va) --iC;\n                    else ++iN;\n                    break;\n                }\n                case Sign.LEFT_TURN:\n                case Sign.COLLINEAR: {\n                    ++iC;\n                    ++iN;\n                    break;\n                }\n            }\n        } while (iN < conflictBoundaries.length);\n    }\n\n    findIntersectedFaces(vaa: Vertex, vbb: Vertex) {\n        const aa = vaa.point!;\n        const bb = vbb.point!;\n        const listAB: Edge[] = [];\n        const listBA: Edge[] = [];\n        const intersectedFaces: Triangle[] = [];\n        const lfc = new LineFaceCirculator(vaa, this, bb);\n        let ind = lfc.pos!.indexV(vaa);\n        let vi: Vertex;\n        if (lfc.pos!.isConstrained(ind)) {\n            vi = this.intersect(lfc.pos!, ind, vaa, vbb);\n            return { found: true, vi, listAB, listBA, intersectedFaces };\n        }\n        let lf = lfc.pos!.neighbours[ccw(ind)]!;\n        let rf = lfc.pos!.neighbours[cw(ind)]!;\n        listAB.push([lf, lf.indexT(lfc.pos!)]);\n        listBA.unshift([rf, rf.indexT(lfc.pos!)]);\n        intersectedFaces.unshift(lfc.pos!);\n        let previousFace = lfc.pos!;\n        lfc.next();\n        ind = lfc.pos!.indexT(previousFace);\n        let currentVertex = lfc.pos!.vertices[ind]!;\n        let done = false;\n        while (currentVertex !== vbb && !done) {\n            let i1: number;\n            let i2: number;\n            const orient = orientation(aa, bb, currentVertex.point!);\n            switch (orient) {\n                case Sign.COLLINEAR: {\n                    done = true;\n                    break;\n                }\n                case Sign.LEFT_TURN:\n                case Sign.RIGHT_TURN: {\n                    if (orient === Sign.LEFT_TURN) {\n                        i1 = ccw(ind);\n                        i2 = cw(ind);\n                    } else {\n                        i1 = cw(ind);\n                        i2 = ccw(ind);\n                    }\n                    if (lfc.pos!.isConstrained(i1)) {\n                        vi = this.intersect(lfc.pos!, i1, vaa, vbb);\n                        return { found: true, vi, listAB, listBA, intersectedFaces };\n                    } else {\n                        lf = lfc.pos!.neighbours[i2]!;\n                        intersectedFaces.unshift(lfc.pos!);\n                        if (orient === Sign.LEFT_TURN) listAB.push([lf, lf.indexT(lfc.pos!)]);\n                        else listBA.unshift([lf, lf.indexT(lfc.pos!)]);\n                        previousFace = lfc.pos!;\n                        lfc.next();\n                        ind = lfc.pos!.indexT(previousFace);\n                        currentVertex = lfc.pos!.vertices[ind]!;\n                    }\n                    break;\n                }\n            }\n        }\n        vi = currentVertex;\n        intersectedFaces.unshift(lfc.pos!);\n        lf = lfc.pos!.neighbours[cw(ind)]!;\n        listAB.push([lf, lf.indexT(lfc.pos!)]);\n        rf = lfc.pos!.neighbours[ccw(ind)]!;\n        listBA.unshift([rf, rf.indexT(lfc.pos!)]);\n        return { found: false, vi, listAB, listBA, intersectedFaces };\n    }\n\n    intersect(t: Triangle, i: number, vaa: Vertex, vbb: Vertex): Vertex {\n        const vcc = t.vertices[cw(i)]!;\n        const vdd = t.vertices[ccw(i)]!;\n        const pa = vaa.point!;\n        const pb = vbb.point!;\n        const pc = vcc.point!;\n        const pd = vdd.point!;\n        let pi = intersection(pa, pb, pc, pd);\n        if (pi !== pa && pi !== pb && pi !== pc && pi !== pd) {\n            const bbox = new BoundingBox(pi!);\n            bbox.dilate(4);\n            if (bbox.overlaps(new BoundingBox(pa))) pi = pa;\n            if (bbox.overlaps(new BoundingBox(pb))) pi = pb;\n            if (bbox.overlaps(new BoundingBox(pc))) pi = pc;\n            if (bbox.overlaps(new BoundingBox(pd))) pi = pd;\n        }\n        let vi: Vertex;\n        if (pi === null) throw new Error(\"what\");\n        else {\n            this.removeConstrainedEdge(t, i);\n            vi = this.insert(pi, t);\n        }\n\n        if (vi !== vcc && vi !== vdd) {\n            this.insertConstraintV(vcc, vi);\n            this.insertConstraintV(vi, vdd);\n        } else {\n            this.insertConstraintV(vcc, vdd);\n        }\n        return vi;\n    }\n\n    removeVertex(v: Vertex) {\n        if (this.tds.dimension <= 1) this.remove1D(v);\n        else this.remove2D(v);\n    }\n\n    remove1D(v: Vertex) {\n        console.warn(\"NOT IMPLEMENTED\");\n    }\n\n    remove2D(v: Vertex) {\n        // if (testDimDown(v)) -> this.tds.removeTestDimDown(v)\n        // else\n        const hole: Edge[] = [];\n        this.tds.makeHole(v, hole);\n        const shell: Edge[] = [...hole];\n        this.tds.fillHoleDelaunay(hole);\n        this.updateConstraints(shell);\n        this.tds.deleteVertex(v);\n    }\n\n    updateConstraints(edgeList: Edge[]) {\n        let f: Triangle;\n        let i: number;\n        for (const edge of edgeList) {\n            f = edge[0];\n            i = edge[1];\n            f.neighbours[i]!.constraints[this.tds.mirrorIndex(f, i)] = f.isConstrained(i);\n        }\n    }\n\n    removeConstrainedEdge(t: Triangle, i: number) {\n        t.constraints[i] = false;\n        if (this.tds.dimension === 2) t.neighbours[i]!.constraints[this.tds.mirrorIndex(t, i)] = false;\n    }\n\n    removeConstrainedEdgeDelaunay(t: Triangle, i: number) {\n        this.removeConstrainedEdge(t, i);\n        if (this.tds.dimension === 2) {\n            const listEdges: Edge[] = [[t, i]];\n            this.propagatingFlipE(listEdges)\n        }\n    }\n\n    updateConstraintsOpposite(v: Vertex) {\n        let t = v.triangle!;\n        const start = t;\n        let indf: number;\n        do {\n            indf = t.indexV(v);\n            if (t.neighbours[indf]!.constraints[this.tds.mirrorIndex(t, indf)]) t.constraints[indf] = true;\n            else t.constraints[indf] = false;\n            t = t.neighbours[ccw(indf)]!;\n        } while (t !== start);\n    }\n\n    markConstraint(t: Triangle, i: number) {\n        if (this.tds.dimension === 1) t.constraints[2] = true;\n        else {\n            t.constraints[i] = true;\n            t.neighbours[i]!.constraints[this.tds.mirrorIndex(t, i)] = true;\n        }\n    }\n\n    insert(p: Point, start: Triangle | null = null) {\n        const locateInfo = this.locate(p, this.iLocate(p, start));\n        const va = this.insertb(p, locateInfo.loc, locateInfo.lt, locateInfo.li);\n        this.flipAround(va);\n        return va;\n    }\n\n    flipAround(v: Vertex) {\n        if (this.tds.dimension <= 1) return;\n        let t = v.triangle!;\n        let i: number;\n        let next: Triangle;\n        const start = t;\n        do {\n            i = t.indexV(v);\n            next = t.neighbours[ccw(i)]!;\n            this.propagatingFlip(t, i);\n            t = next;\n        } while (next !== start);\n    }\n\n    propagatingFlip(t: Triangle, i: number, depth = 0) {\n        if (!this.isFlipable(t, i)) return;\n        const maxDepth = 100;\n        if (depth === maxDepth) {\n            throw new Error(\"maxde\");\n            return;\n        }\n        const ni = t.neighbours[i]!;\n        this.flip(t, i);\n        this.propagatingFlip(t, i, depth + 1);\n        i = ni.indexV(t.vertices[i]!);\n        this.propagatingFlip(ni, i, depth + 1);\n    }\n\n    lessEdge(e1: Edge, e2: Edge) {\n        const ind1 = e1[1];\n        const ind2 = e2[1];\n        return e1[0].uid < e2[0].uid || (e1[0].uid === e2[0].uid && ind1 < ind2);\n    }\n\n    propagatingFlipE(edges: Edge[]) {\n        let eI = 0;\n        let t: Triangle;\n        let i: number;\n        let eni: Edge;\n        const edgeSet: Edge[] = [];\n        while (eI < edges.length) {\n            t = edges[eI][0];\n            i = edges[eI][1];\n            if (this.isFlipable(t, i)) {\n                eni = [t.neighbours[i]!, this.tds.mirrorIndex(t, i)];\n                if (this.lessEdge(edges[eI], eni)) edgeSet.push(edges[eI]);\n                else edgeSet.push(eni);\n            }\n            ++eI;\n        }\n        let indf: number;\n        let ni: Triangle;\n        let indn: number;\n        let ei: Edge;\n        const e: (Edge | null)[] = [null, null, null, null];\n        while (edgeSet.length > 0) {\n            t = edgeSet[0][0];\n            indf = edgeSet[0][1];\n            ni = t.neighbours[indf]!;\n            indn = this.tds.mirrorIndex(t, indf);\n            ei = [t, indf];\n            edgeSet.splice(edgeSet.findIndex(ed => ed[0] === ei[0] && ed[1] === ei[1]), 1);\n            e[0] = [t, cw(indf)];\n            e[1] = [t, ccw(indf)];\n            e[2] = [ni, cw(indn)];\n            e[3] = [ni, ccw(indn)];\n\n            for (const edge of e) {\n                const tt = edge![0];\n                const ii = edge![1];\n                eni = [tt.neighbours[ii]!, this.tds.mirrorIndex(tt, ii)];\n                if (this.lessEdge(edge!, eni))\n                    edgeSet.splice(edgeSet.findIndex(ed => ed[0] === edge![0] && ed[1] === edge![1]), 1);\n                else edgeSet.splice(edgeSet.findIndex(ed => ed[0] === eni[0] && ed[1] === eni[1]), 1);\n            }\n\n            this.flip(t, indf);\n\n            for (const edge of e) {\n                const tt = edge![0];\n                const ii = edge![1];\n                if (this.isFlipable(tt, ii)) {\n                    eni = [tt.neighbours[ii]!, this.tds.mirrorIndex(tt, ii)];\n                    if (this.lessEdge(edge!, eni)) edgeSet.push(edge!);\n                    else edgeSet.push(eni);\n                }\n            }\n        }\n    }\n\n    flip(t: Triangle, i: number) {\n        const u = t.neighbours[i]!;\n        const j = this.tds.mirrorIndex(t, i);\n        const t1 = t.neighbours[cw(i)]!;\n        const i1 = this.tds.mirrorIndex(t, cw(i));\n        const t2 = t.neighbours[ccw(i)]!;\n        const i2 = this.tds.mirrorIndex(t, ccw(i));\n        const t3 = u.neighbours[cw(j)]!;\n        const i3 = this.tds.mirrorIndex(u, cw(j));\n        const t4 = u.neighbours[ccw(j)]!;\n        const i4 = this.tds.mirrorIndex(u, ccw(j));\n        this.tds.flip(t, i);\n        t.constraints[t.indexT(u)] = false;\n        u.constraints[u.indexT(t)] = false;\n        t1.neighbours[i1]!.constraints[this.tds.mirrorIndex(t1, i1)] = t1.constraints[i1];\n        t2.neighbours[i2]!.constraints[this.tds.mirrorIndex(t2, i2)] = t2.constraints[i2];\n        t3.neighbours[i3]!.constraints[this.tds.mirrorIndex(t3, i3)] = t3.constraints[i3];\n        t4.neighbours[i4]!.constraints[this.tds.mirrorIndex(t4, i4)] = t4.constraints[i4];\n    }\n\n    isFlipable(t: Triangle, i: number, perturb = true) {\n        const ni = t.neighbours[i]!;\n        if (t.isInfinite() || ni.isInfinite()) return false;\n        if (t.constraints[i]) return false;\n        return sideOfOrientedCircle(ni, t.vertices[i]!.point!, perturb) === Sign.ON_POSITIVE_SIDE;\n    }\n\n    insertb(a: Point, loc: Triangle | null, lt: LocateType, li: number): Vertex {\n        let insertInConstrainedEdge = false;\n        let v1: Vertex;\n        let v2: Vertex;\n        if (lt === LocateType.EDGE && loc!.isConstrained(li)) {\n            insertInConstrainedEdge = true;\n            v1 = loc!.vertices[ccw(li)]!;\n            v2 = loc!.vertices[cw(li)]!;\n        }\n        const va = this.insertc(a, loc, lt, li);\n        if (insertInConstrainedEdge) this.updateConstraintsIncident(va, v1!, v2!);\n        else if (lt !== LocateType.VERTEX) this.clearConstraintsIncident(va);\n        if (this.tds.dimension === 2) this.updateConstraintsOpposite(va);\n        return va;\n    }\n\n    updateConstraintsIncident(va: Vertex, c1: Vertex, c2: Vertex) {\n        if (this.tds.dimension === 0) return;\n        if (this.tds.dimension === 1) {\n            const ec = new EdgeCirculator(va, null);\n            do {\n                ec.t!.constraints[2] = true;\n            } while (ec.next());\n        } else {\n            const fc = new FaceCirculator(va, null);\n            do {\n                const indf = fc.t!.indexV(va);\n                const cwi = cw(indf);\n                const ccwi = ccw(indf);\n                if (fc.t!.vertices[cwi] === c1 || fc.t!.vertices[cwi] === c2) {\n                    fc.t!.constraints[ccwi] = true;\n                    fc.t!.constraints[cwi] = false;\n                } else {\n                    fc.t!.constraints[ccwi] = false;\n                    fc.t!.constraints[cwi] = true;\n                }\n            } while (fc.next());\n        }\n    }\n\n    clearConstraintsIncident(v: Vertex) {\n        const ec = new EdgeCirculator(v, null);\n        if (ec.valid) {\n            do {\n                const t = ec.t!;\n                const indf = ec.ri;\n                t.constraints[indf] = false;\n                if (this.tds.dimension === 2) t.neighbours[indf]!.constraints[this.tds.mirrorIndex(t, indf)] = false;\n            } while (ec.next());\n        }\n    }\n\n    insertc(p: Point, loc: Triangle | null, lt: LocateType, li: number): Vertex {\n        if (this.tds.vertices.length === 1) {\n            return this.insertFirst(p);\n        } else if (this.tds.vertices.length === 2) {\n            if (lt === LocateType.VERTEX) return this.tds.finiteVertex;\n            else return this.insertSecond(p);\n        }\n        switch (lt) {\n            case LocateType.VERTEX: {\n                return loc!.vertices[li]!;\n            }\n            case LocateType.OUTSIDE_AFFINE_HULL: {\n                return this.insertOutsideAffineHull(p);\n            }\n            case LocateType.OUTSIDE_CONVEX_HULL: {\n                return this.insertOutsideConvexHull(p, loc!);\n            }\n            case LocateType.EDGE: {\n                return this.insertInEdge(p, loc!, li);\n            }\n            case LocateType.FACE: {\n                return this.insertInFace(p, loc!);\n            }\n        }\n        throw new Error(\"qwe\");\n        return new Vertex();\n    }\n\n    insertInEdge(p: Point, loc: Triangle, li: number): Vertex {\n        const v = this.tds.insertInEdge(loc, li);\n        v.point = p;\n        return v;\n    }\n\n    insertInFace(p: Point, loc: Triangle): Vertex {\n        const v = this.tds.insertInFace(loc);\n        v.point = p;\n        return v;\n    }\n\n    insertFirst(p: Point): Vertex {\n        const v = this.tds.insertDimUp();\n        v.point = p;\n        return v;\n    }\n\n    insertSecond(p: Point): Vertex {\n        const v = this.tds.insertDimUp(this.tds._infinite, true);\n        v.point = p;\n        return v;\n    }\n\n    insertOutsideAffineHull(p: Point): Vertex {\n        let conform = false;\n        if (this.tds.dimension === 1) {\n            const t = this.tds.finiteEdge.first!;\n            const orient = orientation(t.vertices[0]!.point!, t.vertices[1]!.point!, p);\n            conform = orient === Sign.COUNTERCLOCKWISE;\n        }\n        const v = this.tds.insertDimUp(this.tds._infinite, conform);\n        v.point = p;\n        return v;\n    }\n\n    insertOutsideConvexHull(p: Point, t: Triangle): Vertex {\n        let v: Vertex;\n        if (this.tds.dimension === 1) {\n            throw new Error(\"sdfasdasd\");\n        } else {\n            v = this.insertOutsideConvexHull2(p, t);\n        }\n        v.point = p;\n        return v;\n    }\n\n    insertOutsideConvexHull2(p: Point, t: Triangle): Vertex {\n        let li = t.indexV(this.tds._infinite);\n        const ccwlist: Triangle[] = [];\n        const cwlist: Triangle[] = [];\n        let fc = new FaceCirculator(this.tds._infinite, t);\n        let done = false;\n        while (!done) {\n            fc.prev();\n            li = fc.t!.indexV(this.tds._infinite);\n            const q = fc.t!.vertices[ccw(li)]!.point!;\n            const r = fc.t!.vertices[cw(li)]!.point!;\n            if (orientation(p, q, r) === Sign.LEFT_TURN) ccwlist.push(fc.t!);\n            else done = true;\n        }\n        fc = new FaceCirculator(this.tds._infinite, t);\n        done = false;\n        while (!done) {\n            fc.next();\n            li = fc.t!.indexV(this.tds._infinite);\n            const q = fc.t!.vertices[ccw(li)]!.point!;\n            const r = fc.t!.vertices[cw(li)]!.point!;\n            if (orientation(p, q, r) === Sign.LEFT_TURN) cwlist.push(fc.t!);\n            else done = true;\n        }\n        const v = this.tds.insertInFace(t);\n        v.point = p;\n        let th;\n        while (ccwlist.length > 0) {\n            th = ccwlist[0];\n            li = ccw(th.indexV(this.tds._infinite));\n            this.tds.flip(th, li);\n            ccwlist.shift();\n        }\n        while (cwlist.length > 0) {\n            th = cwlist[0];\n            li = cw(th.indexV(this.tds._infinite));\n            this.tds.flip(th, li);\n            cwlist.shift();\n        }\n        fc = new FaceCirculator(v, null);\n        while (!fc.t!.isInfinite()) fc.next();\n        this.tds._infinite.triangle = fc.t!;\n        return v;\n    }\n\n    locate(p: Point, start: Triangle | null) {\n        let lt = 0;\n        let li = 0;\n        if (this.tds.dimension < 0) {\n            lt = LocateType.OUTSIDE_AFFINE_HULL;\n            li = 4;\n            return { loc: null, lt, li };\n        } else if (this.tds.dimension === 0) {\n            if (xyEqual(p, this.tds.finiteVertex.triangle!.vertices[0]!.point!)) {\n                lt = LocateType.VERTEX;\n            } else {\n                lt = LocateType.OUTSIDE_AFFINE_HULL;\n            }\n            li = 4;\n            return { loc: null, lt, li };\n        } else if (this.tds.dimension === 1) {\n            return this.marchLocate1D(p);\n        }\n        if (start === null) {\n            const t = this.tds._infinite.triangle!;\n            start = t.neighbours[t.indexV(this.tds._infinite)]!;\n        } else if (start.isInfinite()) {\n            start = start.neighbours[start.indexV(this.tds._infinite)]!;\n        }\n        return this.marchLocate2D(start, p);\n    }\n\n    marchLocate1D(p: Point) {\n        const ff = this.tds._infinite.triangle!;\n        const iv = ff.indexV(this.tds._infinite);\n        const t = ff.neighbours[iv]!;\n        const pqt = orientation(t.vertices[0]!.point!, t.vertices[1]!.point!, p);\n        if (pqt === Sign.RIGHT_TURN || pqt === Sign.LEFT_TURN) {\n            return { loc: new Triangle(), lt: LocateType.OUTSIDE_AFFINE_HULL, li: 4 };\n        }\n        const i = t.indexT(ff);\n        if (collinearBetween(p, t.vertices[1 - i]!.point!, t.vertices[i]!.point!))\n            return { loc: ff, lt: LocateType.OUTSIDE_CONVEX_HULL, li: iv };\n\n        if (xyEqual(p, t.vertices[1 - i]!.point!)) return { loc: t, lt: LocateType.VERTEX, li: 1 - i };\n        throw new Error(\"sdfsdf\");\n    }\n\n    marchLocate2D(c: Triangle, p: Point) {\n        let prev = null;\n        let first = true;\n        let lt: LocateType | undefined;\n        let li: number | undefined;\n        while (true) {\n            if (c.isInfinite()) {\n                return { loc: c, lt: LocateType.OUTSIDE_CONVEX_HULL, li: c.indexV(this.tds._infinite) };\n            }\n            const leftFirst = 0; // Math.round(Math.random());\n            const p0 = c.vertices[0]!.point!;\n            const p1 = c.vertices[1]!.point!;\n            const p2 = c.vertices[2]!.point!;\n            let o0: Sign;\n            let o1: Sign;\n            let o2: Sign;\n            if (first) {\n                prev = c;\n                first = false;\n                o0 = orientation(p0, p1, p);\n                if (o0 === Sign.NEGATIVE) {\n                    c = c.neighbours[2]!;\n                    continue;\n                }\n                o1 = orientation(p1, p2, p);\n                if (o1 === Sign.NEGATIVE) {\n                    c = c.neighbours[0]!;\n                    continue;\n                }\n                o2 = orientation(p2, p0, p);\n                if (o2 === Sign.NEGATIVE) {\n                    c = c.neighbours[1]!;\n                    continue;\n                }\n            } else if (leftFirst) {\n                if (c.neighbours[0]! === prev) {\n                    prev = c;\n                    o0 = orientation(p0, p1, p);\n                    if (o0 === Sign.NEGATIVE) {\n                        c = c.neighbours[2]!;\n                        continue;\n                    }\n                    o2 = orientation(p2, p0, p);\n                    if (o2 === Sign.NEGATIVE) {\n                        c = c.neighbours[1]!;\n                        continue;\n                    }\n                    o1 = Sign.POSITIVE;\n                } else if (c.neighbours[1]! === prev) {\n                    prev = c;\n                    o1 = orientation(p1, p2, p);\n                    if (o1 === Sign.NEGATIVE) {\n                        c = c.neighbours[0]!;\n                        continue;\n                    }\n                    o0 = orientation(p0, p1, p);\n                    if (o0 === Sign.NEGATIVE) {\n                        c = c.neighbours[2]!;\n                        continue;\n                    }\n                    o2 = Sign.POSITIVE;\n                } else {\n                    prev = c;\n                    o2 = orientation(p2, p0, p);\n                    if (o2 === Sign.NEGATIVE) {\n                        c = c.neighbours[1]!;\n                        continue;\n                    }\n                    o1 = orientation(p1, p2, p);\n                    if (o1 === Sign.NEGATIVE) {\n                        c = c.neighbours[0]!;\n                        continue;\n                    }\n                    o0 = Sign.POSITIVE;\n                }\n            } else {\n                if (c.neighbours[0] === prev) {\n                    prev = c;\n                    o2 = orientation(p2, p0, p);\n                    if (o2 === Sign.NEGATIVE) {\n                        c = c.neighbours[1]!;\n                        continue;\n                    }\n                    o0 = orientation(p0, p1, p);\n                    if (o0 === Sign.NEGATIVE) {\n                        c = c.neighbours[2]!;\n                        continue;\n                    }\n                    o1 = Sign.POSITIVE;\n                } else if (c.neighbours[1] === prev) {\n                    prev = c;\n                    o0 = orientation(p0, p1, p);\n                    if (o0 === Sign.NEGATIVE) {\n                        c = c.neighbours[2]!;\n                        continue;\n                    }\n                    o1 = orientation(p1, p2, p);\n                    if (o1 === Sign.NEGATIVE) {\n                        c = c.neighbours[0]!;\n                        continue;\n                    }\n                    o2 = Sign.POSITIVE;\n                } else {\n                    prev = c;\n                    o1 = orientation(p1, p2, p);\n                    if (o1 === Sign.NEGATIVE) {\n                        c = c.neighbours[0]!;\n                        continue;\n                    }\n                    o2 = orientation(p2, p0, p);\n                    if (o2 === Sign.NEGATIVE) {\n                        c = c.neighbours[1]!;\n                        continue;\n                    }\n                    o0 = Sign.POSITIVE;\n                }\n            }\n            const sum =\n                (o0 === Sign.COLLINEAR ? 1 : 0) + (o1 === Sign.COLLINEAR ? 1 : 0) + (o2 === Sign.COLLINEAR ? 1 : 0);\n            switch (sum) {\n                case 0: {\n                    lt = LocateType.FACE;\n                    li = 4;\n                    break;\n                }\n                case 1: {\n                    lt = LocateType.EDGE;\n                    li = o0 === Sign.COLLINEAR ? 2 : o1 === Sign.COLLINEAR ? 0 : 1;\n                    break;\n                }\n                case 2: {\n                    lt = LocateType.VERTEX;\n                    li = o0 !== Sign.COLLINEAR ? 2 : o1 !== Sign.COLLINEAR ? 0 : 1;\n                    break;\n                }\n            }\n            if (lt === undefined || li === undefined) throw new Error(\"ert\");\n            return { loc: c, lt, li };\n        }\n    }\n\n    iLocate(p: Point, start: Triangle | null) {\n        if (this.tds.dimension < 2) return start;\n        if (start === null) {\n            const t = this.tds._infinite.triangle!;\n            start = t.neighbours[t.indexV(this.tds._infinite)];\n        } else if (start.isInfinite()) {\n            start = start.neighbours[start.indexV(this.tds._infinite)];\n        }\n        let prev = null;\n        let c = start!;\n        let first = true;\n        let nTurns = 2500;\n        while (true) {\n            if (!nTurns--) return c;\n            if (c.isInfinite()) return c;\n            const p0 = c.vertices[0]!.point!;\n            const p1 = c.vertices[1]!.point!;\n            const p2 = c.vertices[2]!.point!;\n            if (first) {\n                prev = c;\n                first = false;\n                if (hasInexactNegativeOrientation(p0, p1, p)) {\n                    c = c.neighbours[2]!;\n                    continue;\n                }\n                if (hasInexactNegativeOrientation(p1, p2, p)) {\n                    c = c.neighbours[0]!;\n                    continue;\n                }\n                if (hasInexactNegativeOrientation(p2, p0, p)) {\n                    c = c.neighbours[1]!;\n                    continue;\n                }\n            } else {\n                if (c.neighbours[0] === prev) {\n                    prev = c;\n                    if (hasInexactNegativeOrientation(p0, p1, p)) {\n                        c = c.neighbours[2]!;\n                        continue;\n                    }\n                    if (hasInexactNegativeOrientation(p2, p0, p)) {\n                        c = c.neighbours[1]!;\n                        continue;\n                    }\n                } else if (c.neighbours[1] === prev) {\n                    prev = c;\n                    if (hasInexactNegativeOrientation(p0, p1, p)) {\n                        c = c.neighbours[2]!;\n                        continue;\n                    }\n                    if (hasInexactNegativeOrientation(p1, p2, p)) {\n                        c = c.neighbours[0]!;\n                        continue;\n                    }\n                } else {\n                    prev = c;\n                    if (hasInexactNegativeOrientation(p2, p0, p)) {\n                        c = c.neighbours[1]!;\n                        continue;\n                    }\n                    if (hasInexactNegativeOrientation(p1, p2, p)) {\n                        c = c.neighbours[0]!;\n                        continue;\n                    }\n                }\n            }\n            break;\n        }\n        return c;\n    }\n}\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./draw.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./draw.vue?vue&type=script&lang=ts&\"","import { GlobalPoint } from \"@/game/geom\";\nimport { GridLayer } from \"@/game/layers/grid\";\nimport { Layer } from \"@/game/layers/layer\";\nimport { Asset } from \"@/game/shapes/asset\";\nimport { Shape } from \"@/game/shapes/shape\";\nimport { gameStore } from \"@/game/store\";\nimport { l2gx, l2gy, l2gz } from \"@/game/units\";\n\nclass LayerManager {\n    layers: Layer[] = [];\n    width = window.innerWidth;\n    height = window.innerHeight;\n\n    UUIDMap: Map<string, Shape> = new Map();\n\n    // Refresh interval and redraw setter.\n    interval = 30;\n\n    constructor() {\n        requestAnimationFrame(this.drawLoop);\n    }\n\n    reset() {\n        this.layers = [];\n        this.UUIDMap = new Map();\n    }\n\n    drawLoop = () => {\n        for (let i = this.layers.length - 1; i >= 0; i--) {\n            this.layers[i].draw();\n        }\n        requestAnimationFrame(this.drawLoop);\n    };\n\n    setWidth(width: number): void {\n        this.width = width;\n        for (const layer of this.layers) {\n            layer.canvas.width = width;\n            layer.width = width;\n        }\n    }\n\n    setHeight(height: number): void {\n        this.height = height;\n        for (const layer of this.layers) {\n            layer.canvas.height = height;\n            layer.height = height;\n        }\n    }\n\n    addLayer(layer: Layer): void {\n        this.layers.push(layer);\n        if (!gameStore.IS_DM && !layer.playerEditable) return;\n        if (layer.selectable) gameStore.addLayer(layer.name);\n    }\n\n    hasLayer(name: string): boolean {\n        return this.layers.some(l => l.name === name);\n    }\n\n    getLayer(name?: string) {\n        name = name === undefined ? gameStore.selectedLayer : name;\n        for (const layer of this.layers) {\n            if (layer.name === name) return layer;\n        }\n    }\n\n    selectLayer(name: string, sync: boolean = true): void {\n        let found = false;\n        for (const layer of this.layers) {\n            if (!layer.selectable) continue;\n            if (found && layer.name !== \"fow\") layer.ctx.globalAlpha = 0.3;\n            else layer.ctx.globalAlpha = 1.0;\n\n            if (name === layer.name) {\n                gameStore.selectLayer({ name, sync });\n                found = true;\n            }\n\n            layer.clearSelection();\n            layer.invalidate(true);\n        }\n    }\n\n    getGridLayer(): GridLayer | undefined {\n        return <GridLayer>this.getLayer(\"grid\");\n    }\n\n    hasSelection() {\n        const selection = this.getSelection();\n        return selection !== undefined && selection.length > 0;\n    }\n\n    // THIS INCLUDES POTENTIALLY THE SelectTool.SelectionHelper !!!\n    getSelection() {\n        const layer = this.getLayer();\n        if (layer === undefined) return undefined;\n        return layer.selection;\n    }\n\n    invalidate(): void {\n        for (let i = this.layers.length - 1; i >= 0; i--) {\n            this.layers[i].invalidate(true);\n        }\n    }\n\n    invalidateLight() {\n        for (let i = this.layers.length - 1; i >= 0; i--)\n            if (this.layers[i].isVisionLayer) this.layers[i].invalidate(true);\n    }\n\n    dropAsset(event: DragEvent) {\n        const layer = this.getLayer();\n        if (layer === undefined || event === null || event.dataTransfer === null) return;\n        const image = document.createElement(\"img\");\n        image.src = event.dataTransfer.getData(\"text/plain\");\n        const asset = new Asset(\n            image,\n            new GlobalPoint(l2gx(event.clientX), l2gy(event.clientY)),\n            l2gz(image.width),\n            l2gz(image.height),\n        );\n        asset.src = new URL(image.src).pathname;\n\n        if (gameStore.useGrid) {\n            const gs = gameStore.gridSize;\n            asset.refPoint = new GlobalPoint(\n                Math.round(asset.refPoint.x / gs) * gs,\n                Math.round(asset.refPoint.y / gs) * gs,\n            );\n            asset.w = Math.max(Math.round(asset.w / gs) * gs, gs);\n            asset.h = Math.max(Math.round(asset.h / gs) * gs, gs);\n        }\n\n        layer.addShape(asset, true);\n    }\n}\n\nexport const layerManager = new LayerManager();\n(<any>window).lm = layerManager;\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./initiative.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./initiative.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./createtoken_modal.vue?vue&type=template&id=73816298&scoped=true&\"\nimport script from \"./createtoken_modal.vue?vue&type=script&lang=ts&\"\nexport * from \"./createtoken_modal.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./createtoken_modal.vue?vue&type=style&index=0&id=73816298&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"73816298\",\n  null\n  \n)\n\nexport default component.exports","import { BoundingRect } from \"@/game/shapes/boundingrect\";\n\nexport class BoundingNode {\n    bbox: BoundingRect;\n    nPrimitives: number;\n    children: BoundingNode[] = [];\n    constructor(nPrimitives: number, bbox: BoundingRect) {\n        this.nPrimitives = nPrimitives;\n        this.bbox = bbox;\n    }\n}\n\nexport class LeafNode extends BoundingNode {\n    firstPrimOffset: number;\n    constructor(first: number, n: number, bbox: BoundingRect) {\n        super(n, bbox);\n        this.firstPrimOffset = first;\n    }\n}\n\nexport class InteriorNode extends BoundingNode {\n    dimension: number;\n    constructor(dimension: number, c1: BoundingNode, c2: BoundingNode) {\n        super(0, c1.bbox.union(c2.bbox));\n        this.dimension = dimension;\n        this.children.push(c1);\n        this.children.push(c2);\n    }\n}\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./createtoken_modal.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./createtoken_modal.vue?vue&type=script&lang=ts&\"","import { getRef, uuidv4 } from \"@/core/utils\";\nimport { socket } from \"@/game/api/socket\";\nimport { sendClientOptions } from \"@/game/api/utils\";\nimport { ServerAura } from '@/game/comm/types/shapes';\nimport { EventBus } from \"@/game/event-bus\";\nimport { Vector } from \"@/game/geom\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { createShapeFromDict } from \"@/game/shapes/utils\";\nimport { gameStore } from \"@/game/store\";\nimport Tools from \"@/game/ui/tools/tools.vue\";\nimport { calculateDelta } from \"@/game/ui/tools/utils\";\nimport { TriangulationTarget } from '../visibility/te/pa';\n\n\nexport function onKeyUp(event: KeyboardEvent) {\n    if (event.target instanceof HTMLInputElement || event.target instanceof HTMLTextAreaElement) {\n    } else {\n        if (event.key === \"Delete\" || event.key === \"Del\" || event.key === \"Backspace\") {\n            if (layerManager.getLayer === undefined) {\n                console.log(\"No active layer selected for delete operation\");\n                return;\n            }\n            const l = layerManager.getLayer()!;\n            for (let i = l.selection.length - 1; i >= 0; i--) {\n                const sel = l.selection[i];\n                if ((<any>getRef<Tools>(\"tools\").$refs.selectTool).selectionHelper.uuid === sel.uuid) {\n                    l.selection.splice(i, 1);\n                    continue;\n                }\n                l.removeShape(sel, true, false);\n                EventBus.$emit(\"SelectionInfo.Shape.Set\", null);\n                EventBus.$emit(\"Initiative.Remove\", sel.uuid);\n            }\n        }\n    }\n}\n\nexport function onKeyDown(event: KeyboardEvent) {\n    if (event.target instanceof HTMLInputElement || event.target instanceof HTMLTextAreaElement) {\n        if (event.keyCode === 65 && event.ctrlKey) event.target!.select();\n    } else {\n        if (event.keyCode >= 37 && event.keyCode <= 40) {\n            // todo: this should already be rounded\n            const gridSize = Math.round(gameStore.gridSize);\n            let offsetX = gridSize * (event.keyCode % 2);\n            let offsetY = gridSize * (event.keyCode % 2 ? 0 : 1);\n            if (layerManager.hasSelection()) {\n                const selection = layerManager.getSelection()!;\n                offsetX *= event.keyCode <= 38 ? -1 : 1;\n                offsetY *= event.keyCode <= 38 ? -1 : 1;\n                let delta = new Vector(offsetX, offsetY);\n                if (!event.shiftKey || !gameStore.IS_DM) {\n                    // First check for collisions.  Using the smooth wall slide collision check used on mouse move is overkill here.\n                    for (const sel of selection) {\n                        if ((<any>getRef<Tools>(\"tools\").$refs.selectTool).selectionHelper.uuid === sel.uuid) continue;\n                        delta = calculateDelta(delta, sel);\n                    }\n                }\n                if (delta.length() === 0) return;\n                for (const sel of selection) {\n                    if ((<any>getRef<Tools>(\"tools\").$refs.selectTool).selectionHelper.uuid === sel.uuid) continue;\n                    if (sel.movementObstruction) gameStore.deleteFromTriag({ target: TriangulationTarget.VISION, points: sel.points, standalone: false });\n                    sel.refPoint = sel.refPoint.add(delta);\n                    if (sel.movementObstruction) gameStore.addToTriag({ target: TriangulationTarget.VISION, points: sel.points });\n                    // todo: Fix again\n                    // if (sel.refPoint.x % gridSize !== 0 || sel.refPoint.y % gridSize !== 0) sel.snapToGrid();\n                    socket.emit(\"Shape.Position.Update\", { shape: sel.asDict(), redraw: true, temporary: false });\n                }\n                layerManager.getLayer()!.invalidate(false);\n            } else {\n                // The pan offsets should be in the opposite direction to give the correct feel.\n                gameStore.increasePanX(offsetX * (event.keyCode <= 38 ? 1 : -1));\n                gameStore.increasePanY(offsetY * (event.keyCode <= 38 ? 1 : -1));\n                layerManager.invalidate();\n                sendClientOptions();\n            }\n        } else if (event.keyCode === 68) {\n            const layer = layerManager.getLayer();\n            if (layer) {\n                layer.clearSelection();\n                layer.invalidate(true);\n            }\n        } else if (event.key === \"u\" && event.ctrlKey) {\n            event.preventDefault();\n            event.stopPropagation();\n            gameStore.toggleUI();\n        } else if (event.key === \"c\" && event.ctrlKey) {\n            const layer = layerManager.getLayer();\n            if (!layer) return;\n            if (!layer.selection) return;\n            const clipboard = [];\n            for (const shape of layer.selection) {\n                if ((<any>getRef<Tools>(\"tools\").$refs.selectTool).selectionHelper.uuid === shape.uuid) continue;\n                clipboard.push(shape.asDict());\n            }\n            gameStore.setClipboard(clipboard);\n        } else if (event.key === \"v\" && event.ctrlKey) {\n            const layer = layerManager.getLayer();\n            if (!layer) return;\n            if (!gameStore.clipboard) return;\n            layer.selection = [];\n            for (const clip of gameStore.clipboard) {\n                clip.x += 10;\n                clip.y += 10;\n                clip.uuid = uuidv4();\n                const oldTrackers = clip.trackers;\n                clip.trackers = [];\n                for (const tracker of oldTrackers) {\n                    const newTracker: Tracker = {\n                        ...tracker,\n                        uuid: uuidv4()\n                    }\n                    clip.trackers.push(newTracker);\n                }\n                const oldAuras = clip.auras;\n                clip.auras = [];\n                for (const aura of oldAuras) {\n                    const newAura: ServerAura = {\n                        ...aura,\n                        uuid: uuidv4()\n                    }\n                    clip.auras.push(newAura);\n                }\n                const shape = createShapeFromDict(clip);\n                if (shape === undefined) continue;\n                layer.addShape(shape, true);\n                layer.selection.push(shape);\n            }\n            if (layer.selection.length === 1) EventBus.$emit(\"SelectionInfo.Shape.Set\", layer.selection[0]);\n            else EventBus.$emit(\"SelectionInfo.Shape.Set\", null);\n            layer.invalidate(false);\n        }\n    }\n}\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./manager.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./manager.vue?vue&type=style&index=0&lang=css&\"","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\n\nimport ShapeContext from \"@/game/ui/selection/shapecontext.vue\";\nimport CreateTokenModal from \"@/game/ui/tools/createtoken_modal.vue\";\nimport DrawTool from \"@/game/ui/tools/draw.vue\";\nimport FilterTool from \"@/game/ui/tools/filter.vue\";\nimport MapTool from \"@/game/ui/tools/map.vue\";\nimport PanTool from \"@/game/ui/tools/pan\";\nimport SelectTool from \"@/game/ui/tools/select.vue\";\nimport VisionTool from \"@/game/ui/tools/vision.vue\";\n\nimport { layerManager } from \"@/game/layers/manager\";\nimport { gameManager } from \"@/game/manager\";\nimport { gameStore } from \"@/game/store\";\nimport { RulerTool } from \"@/game/ui/tools/ruler\";\nimport { l2g } from \"@/game/units\";\nimport { getMouse } from \"@/game/utils\";\nimport Component from \"vue-class-component\";\n\n@Component({\n    components: {\n        \"select-tool\": SelectTool,\n        \"pan-tool\": PanTool,\n        \"draw-tool\": DrawTool,\n        \"ruler-tool\": RulerTool,\n        \"map-tool\": MapTool,\n        \"filter-tool\": FilterTool,\n        \"vision-tool\": VisionTool,\n        \"shape-menu\": ShapeContext,\n        \"createtoken-dialog\": CreateTokenModal,\n    },\n    watch: {\n        currentTool(newValue, oldValue) {\n            this.$emit(\"tools-select-change\", newValue, oldValue);\n        },\n    },\n})\nexport default class Tools extends Vue {\n    $refs!: {\n        selectTool: InstanceType<typeof SelectTool>;\n    };\n\n    currentTool = \"Select\";\n    tools = [\"Select\", \"Pan\", \"Draw\", \"Ruler\", \"Map\", \"Filter\", \"Vision\"];\n    dmTools = [\"Map\"];\n\n    get IS_DM(): boolean {\n        return gameStore.IS_DM;\n    }\n\n    get currentToolComponent(): string {\n        return `${this.currentTool.toLowerCase()}-tool`;\n    }\n\n    get visibleTools(): string[] {\n        return this.tools.filter(t => (!this.dmTools.includes(t) || this.IS_DM));\n    }\n\n    toolVisible(tool: string): boolean {\n        if (tool === 'Filter') {\n            return Object.keys(gameStore.labels).length > 0;\n        } else if (tool === 'Vision') {\n            return gameStore.ownedtokens.length > 1;\n        }\n        return true;\n    }\n\n    mousedown(event: MouseEvent) {\n        if ((<HTMLElement>event.target).tagName !== \"CANVAS\") return;\n\n        let targetTool = this.currentTool;\n        if (event.button === 1) {\n            targetTool = \"Pan\";\n        } else if (event.button !== 0) {\n            return;\n        }\n\n        this.$emit(\"mousedown\", event, targetTool);\n    }\n    mouseup(event: MouseEvent) {\n        if ((<HTMLElement>event.target).tagName !== \"CANVAS\") return;\n\n        let targetTool = this.currentTool;\n        if (event.button === 1) {\n            targetTool = \"Pan\";\n        } else if (event.button !== 0) {\n            return;\n        }\n\n        this.$emit(\"mouseup\", event, targetTool);\n    }\n    mousemove(event: MouseEvent) {\n        if ((<HTMLElement>event.target).tagName !== \"CANVAS\") return;\n\n        let targetTool = this.currentTool;\n        if ((event.buttons & 4) !== 0) {\n            targetTool = \"Pan\";\n        } else if ((event.button & 1) > 1) {\n            return;\n        }\n\n        this.$emit(\"mousemove\", event, targetTool);\n\n        // Annotation hover\n        let found = false;\n        for (const uuid of gameStore.annotations) {\n            if (layerManager.UUIDMap.has(uuid) && layerManager.hasLayer(\"draw\")) {\n                const shape = layerManager.UUIDMap.get(uuid)!;\n                if (shape.contains(l2g(getMouse(event)))) {\n                    found = true;\n                    gameManager.annotationManager.setActiveText(shape.annotation);\n                }\n            }\n        }\n        if (!found && gameManager.annotationManager.shown) {\n            gameManager.annotationManager.setActiveText(\"\");\n        }\n    }\n    mouseleave(event: MouseEvent) {\n        // When leaving the window while a mouse is pressed down, act as if it was released\n        if ((event.buttons & 1) !== 0) {\n            this.$emit(\"mouseup\", event, this.currentTool);\n        }\n    }\n    contextmenu(event: MouseEvent) {\n        if ((<HTMLElement>event.target).tagName !== \"CANVAS\") return;\n        if (event.button !== 2 || (<HTMLElement>event.target).tagName !== \"CANVAS\") return;\n        this.$emit(\"contextmenu\", event, this.currentTool);\n    }\n}\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./selection_info.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./selection_info.vue?vue&type=script&lang=ts&\"","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./modal.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./modal.vue?vue&type=script&lang=ts&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./labels.vue?vue&type=style&index=0&id=e477c214&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./labels.vue?vue&type=style&index=0&id=e477c214&scoped=true&lang=css&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./contextmenu.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./contextmenu.vue?vue&type=style&index=0&lang=css&\"","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\n\nimport Modal from \"@/core/components/modals/modal.vue\";\n\n@Component({\n    components: {\n        Modal,\n    },\n})\nexport default class Prompt extends Vue {\n    $refs!: {\n        answer: HTMLElement;\n    };\n\n    visible = false;\n    question = \"\";\n    answer = \"\";\n    title = \"\";\n\n    resolve = (value: string) => {};\n    reject = () => {};\n\n    submit() {\n        this.resolve(this.answer);\n        this.close();\n    }\n    close() {\n        this.reject();\n        this.visible = false;\n        this.question = \"\";\n        this.answer = \"\";\n        this.title = \"\";\n    }\n    prompt(question: string, title: string): Promise<string> {\n        this.question = question;\n        this.title = title;\n        this.visible = true;\n        this.$nextTick(() => {\n            this.$refs.answer.focus();\n        });\n        return new Promise((resolve, reject) => {\n            this.resolve = resolve;\n            this.reject = reject;\n        });\n    }\n}\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./accordion.vue?vue&type=style&index=0&id=0bf2b7ba&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./accordion.vue?vue&type=style&index=0&id=0bf2b7ba&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_vm._v(_vm._s(_vm.message))])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"17a953f2-vue-loader-template\\\"}!../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./load.vue?vue&type=template&id=ff095222&\"","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./menu.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./menu.vue?vue&type=script&lang=ts&\"","import { GlobalPoint, Point, Ray, Vector } from \"@/game/geom\";\nimport { g2lx, g2ly } from \"../units\";\n\nexport class BoundingRect {\n    readonly w: number;\n    readonly h: number;\n    readonly topLeft: GlobalPoint;\n    readonly topRight: GlobalPoint;\n    readonly botRight: GlobalPoint;\n    readonly botLeft: GlobalPoint;\n\n    constructor(topleft: GlobalPoint, w: number, h: number) {\n        this.w = w;\n        this.h = h;\n        this.topLeft = topleft;\n        this.topRight = new GlobalPoint(topleft.x + w, topleft.y);\n        this.botRight = new GlobalPoint(topleft.x + w, topleft.y + h);\n        this.botLeft = new GlobalPoint(topleft.x, topleft.y + h);\n    }\n\n    contains(point: GlobalPoint): boolean {\n        return (\n            this.topLeft.x <= point.x &&\n            this.topRight.x >= point.x &&\n            this.topLeft.y <= point.y &&\n            this.botLeft.y >= point.y\n        );\n    }\n\n    get points() {\n        if (this.w === 0 || this.h === 0) return [[this.topLeft.x, this.topLeft.y]];\n        return [\n            [this.topLeft.x, this.topLeft.y],\n            [this.botLeft.x, this.botLeft.y],\n            [this.botRight.x, this.botRight.y],\n            [this.topRight.x, this.topRight.y],\n        ];\n    }\n\n    offset(vector: Vector): BoundingRect {\n        return new BoundingRect(this.topLeft.add(vector), this.w, this.h);\n    }\n\n    union(other: BoundingRect): BoundingRect {\n        const xmin = Math.min(this.topLeft.x, other.topLeft.x);\n        const xmax = Math.max(this.topRight.x, other.topRight.x);\n        const ymin = Math.min(this.topLeft.y, other.topLeft.y);\n        const ymax = Math.max(this.botLeft.y, other.botLeft.y);\n        return new BoundingRect(new GlobalPoint(xmin, ymin), xmax - xmin, ymax - ymin);\n    }\n\n    getDiagCorner(botright: boolean) {\n        return botright ? this.botRight : this.topLeft;\n    }\n\n    intersectsWith(other: BoundingRect): boolean {\n        return !(\n            other.topLeft.x > this.topRight.x ||\n            other.topRight.x < this.topLeft.x ||\n            other.topLeft.y > this.botLeft.y ||\n            other.botLeft.y < this.topLeft.y\n        );\n    }\n\n    intersectsWithInner(other: BoundingRect): boolean {\n        return !(\n            other.topLeft.x >= this.topRight.x ||\n            other.topRight.x <= this.topLeft.x ||\n            other.topLeft.y >= this.botLeft.y ||\n            other.botLeft.y <= this.topLeft.y\n        );\n    }\n\n    intersectP(ray: Ray<Point>, invDir: Vector, dirIsNeg: boolean[]) {\n        let txmin = invDir.x * (this.getDiagCorner(dirIsNeg[0]).x - ray.origin!.x);\n        let txmax = invDir.x * (this.getDiagCorner(!dirIsNeg[0]).x - ray.origin!.x);\n        const tymin = invDir.y * (this.getDiagCorner(dirIsNeg[1]).y - ray.origin!.y);\n        const tymax = invDir.y * (this.getDiagCorner(!dirIsNeg[1]).y - ray.origin!.y);\n        if (txmin > tymax || tymin > txmax) return { hit: false, min: txmin, max: txmax };\n        if (tymin > txmin) txmin = tymin;\n        if (tymax < txmax) txmax = tymax;\n        return { hit: txmin < ray.tMax! && txmax > 0, min: txmin, max: txmax };\n    }\n\n    center(): GlobalPoint {\n        return this.topLeft.add(new Vector(this.w / 2, this.h / 2));\n    }\n\n    getMaxExtent() {\n        return this.w > this.h ? 0 : 1;\n    }\n    visibleInCanvas(canvas: HTMLCanvasElement): boolean {\n        const coreVisible = !(\n            g2lx(this.topLeft.x) > canvas.width ||\n            g2ly(this.topLeft.y) > canvas.height ||\n            g2lx(this.topRight.x) < 0 ||\n            g2ly(this.botRight.y) < 0\n        );\n        if (coreVisible) return true;\n        return false;\n    }\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"formcontainer\"}},[(_vm.owned || _vm.joined)?_c('form',[_c('fieldset',[_c('legend',{staticClass:\"legend\"},[_vm._v(\"Your sessions\")]),_c('div',{staticClass:\"input\"},[_vm._l((_vm.owned),function(room,i){return _c('router-link',{key:'o-'+i,attrs:{\"to\":'/game/' + room[1] + '/' + room[0]}},[_vm._v(_vm._s(room[0]))])}),_vm._l((_vm.joined),function(room,i){return _c('router-link',{key:'j-'+i,attrs:{\"to\":'/game/' + room[1] + '/' + room[0]}},[_vm._v(_vm._s(room[1])+\"/\"+_vm._s(room[0]))])})],2),(_vm.owned.length === 0)?_c('div',{staticClass:\"input\"},[_vm._v(\"No active sessions\")]):_vm._e()])]):_vm._e(),_vm._m(0),_c('form',{on:{\"submit\":function($event){$event.preventDefault();return _vm.createRoom($event)}}},[_c('fieldset',[(!_vm.owned && !_vm.joined)?_c('legend',{staticClass:\"legend\"},[_vm._v(\"Create a session\")]):_c('div',{staticClass:\"input\"},[_vm._v(\"Create a new session\")]),_c('div',{staticClass:\"input\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.newSessionName),expression:\"newSessionName\"}],attrs:{\"type\":\"text\",\"name\":\"room_name\",\"placeholder\":\"Session Name\"},domProps:{\"value\":(_vm.newSessionName)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.newSessionName=$event.target.value}}}),_vm._m(1)]),_vm._m(2)])]),_c('div',{attrs:{\"id\":\"account-options\"}},[_c('form',{on:{\"submit\":function($event){$event.preventDefault();}}},[_c('router-link',{staticClass:\"submit\",attrs:{\"tag\":\"button\",\"title\":\"Account Settings\",\"to\":\"/account\"}},[_c('i',{staticClass:\"fas fa-cog\"})])],1),_c('form',{on:{\"submit\":function($event){$event.preventDefault();}}},[_c('router-link',{staticClass:\"submit\",attrs:{\"tag\":\"button\",\"title\":\"Logout\",\"to\":\"/auth/logout\"}},[_c('i',{staticClass:\"fas fa-sign-out-alt\"})])],1)])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('h4',[_c('span',[_vm._v(\"OR\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',[_c('i',{staticClass:\"fab fa-d-and-d\"})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('button',{staticClass:\"submit\",attrs:{\"type\":\"submit\",\"title\":\"Create\"}},[_c('i',{staticClass:\"fas fa-arrow-right\"})])}]\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"17a953f2-vue-loader-template\\\"}!../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./main.vue?vue&type=template&id=61eb1455&scoped=true&\"","/*\nThis module defines some Point classes.\nA strong focus is made to ensure that at no time a global and a local point are mixed up with each other.\nAt first glance this adds weird looking hacks as ts does not support nominal typing.\n*/\n\nexport function getPointDistance(p1: Point, p2: Point) {\n    const a = p1.x - p2.x;\n    const b = p1.y - p2.y;\n    return Math.sqrt(a * a + b * b);\n}\n\nexport class Point {\n    readonly x: number;\n    readonly y: number;\n    constructor(x: number, y: number) {\n        this.x = x;\n        this.y = y;\n    }\n    static fromArray(point: number[]) {\n        return new Point(point[0], point[1]);\n    }\n    add(vec: Vector) {\n        return new Point(this.x + vec.x, this.y + vec.y);\n    }\n    subtract(other: Point) {\n        return new Vector(this.x - other.x, this.y - other.y);\n    }\n    clone(): Point {\n        return new Point(this.x, this.y);\n    }\n    get(dimension: 0 | 1) {\n        if (dimension === 0) return this.x;\n        return this.y;\n    }\n    asArray(): number[] {\n        return [this.x, this.y];\n    }\n}\nexport class GlobalPoint extends Point {\n    // This is to differentiate with LocalPoint, is actually never used\n    // We do ! to prevent errors that it never gets initialized\n    // tslint:disable-next-line:variable-name\n    _GlobalPoint!: string;\n    add(vec: Vector): GlobalPoint {\n        return <GlobalPoint>super.add(vec);\n    }\n    subtract(other: GlobalPoint): Vector {\n        return super.subtract(other);\n    }\n    clone(): GlobalPoint {\n        return <GlobalPoint>super.clone();\n    }\n    static fromArray(point: number[]) {\n        return new GlobalPoint(point[0], point[1]);\n    }\n}\n\nexport class LocalPoint extends Point {\n    // This is to differentiate with GlobalPoint, is actually never used\n    // We do ! to prevent errors that it never gets initialized\n    // tslint:disable-next-line:variable-name\n    _LocalPoint!: string;\n    add(vec: Vector): LocalPoint {\n        return <LocalPoint>super.add(vec);\n    }\n    subtract(other: LocalPoint): Vector {\n        return super.subtract(other);\n    }\n    clone(): LocalPoint {\n        return <LocalPoint>super.clone();\n    }\n}\n\nexport class Vector {\n    readonly x: number;\n    readonly y: number;\n    constructor(x: number, y: number) {\n        this.x = x;\n        this.y = y;\n    }\n    dot(other: Vector): number {\n        return this.x * other.x + this.y * other.y;\n    }\n    inverse(): Vector {\n        return new Vector(this.x === 0 ? 0 : 1 / this.x, this.y === 0 ? 0 : 1 / this.y);\n    }\n    length(): number {\n        return Math.sqrt(Math.pow(this.x, 2) + Math.pow(this.y, 2));\n    }\n    normalize(): Vector {\n        const l = this.length();\n        return new Vector(this.x / l, this.y / l);\n    }\n    reverse(): Vector {\n        return new Vector(-this.x, -this.y);\n    }\n    multiply(scale: number): Vector {\n        return new Vector(this.x * scale, this.y * scale);\n    }\n    angle(): number {\n        return (Math.atan2(this.y, this.x) * 180) / Math.PI;\n    }\n}\n\nexport class Ray<T extends Point> {\n    readonly direction: Vector;\n    readonly origin: T;\n    tMax: number;\n    constructor(origin: T, direction: Vector, tMax?: number) {\n        this.direction = direction;\n        this.origin = origin;\n        if (tMax === undefined) tMax = Infinity;\n        this.tMax = tMax;\n    }\n    static fromPoints<T extends Point>(p1: T, p2: T): Ray<T> {\n        const vec = new Vector(p2.x - p1.x, p2.y - p1.y);\n        let maxT;\n        if (Math.abs(vec.x) > 0.01) maxT = (p2.x - p1.x) / vec.x;\n        else maxT = (p2.y - p1.y) / vec.y;\n        return new Ray(p1, vec, maxT);\n    }\n    get(t: number): T {\n        return <T>new Point(this.origin.x + t * this.direction.x, this.origin.y + t * this.direction.y);\n    }\n    getDistance(t1: number, t2: number) {\n        return Math.sqrt(Math.pow(t2 - t1, 2) * (Math.pow(this.direction.x, 2) + Math.pow(this.direction.y, 2)));\n    }\n    getT(t1: number, distance: number) {\n        return t1 + Math.sqrt(Math.pow(distance, 2) / (Math.pow(this.direction.x, 2) + Math.pow(this.direction.y, 2)));\n    }\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ul',[_vm._l((_vm.folders),function(folder){return _c('li',{key:folder,staticClass:\"folder\",on:{\"click\":function($event){$event.stopPropagation();return _vm.toggle($event)}}},[_vm._v(\"\\n        \"+_vm._s(folder)+\"\\n        \"),_c('asset-node',{attrs:{\"asset\":_vm.asset[folder]}})],1)}),_vm._l((_vm.files),function(file){return _c('li',{key:file.name,staticClass:\"file draggable token\",attrs:{\"draggable\":\"true\"},on:{\"mouseover\":function($event){_vm.showImage = file.hash},\"mouseout\":function($event){_vm.showImage = null},\"dragstart\":function($event){return _vm.dragStart($event, '/static/assets/' + file.hash)}}},[_vm._v(\"\\n        \"+_vm._s(file.name)+\"\\n        \"),(_vm.showImage == file.hash)?_c('div',{staticClass:\"preview\"},[_c('img',{staticClass:\"asset-preview-image\",attrs:{\"src\":'/static/assets/' + file.hash}})]):_vm._e()])})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"17a953f2-vue-loader-template\\\"}!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./asset_node.vue?vue&type=template&id=6d718094&scoped=true&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./initiative.vue?vue&type=style&index=0&id=62228cde&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./initiative.vue?vue&type=style&index=0&id=62228cde&scoped=true&lang=css&\"","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./inputCopy.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./inputCopy.vue?vue&type=script&lang=ts&\"","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\nimport vueSlider from \"vue-slider-component\";\n\nimport \"@/game/api/events\";\n\nimport { throttle } from \"lodash\";\nimport { mapGetters, mapState } from \"vuex\";\n\nimport ConfirmDialog from \"@/core/components/modals/confirm.vue\";\nimport Prompt from \"@/core/components/modals/prompt.vue\";\nimport Initiative from \"@/game/ui/initiative.vue\";\nimport LabelManager from \"@/game/ui/labels.vue\";\nimport MenuBar from \"@/game/ui/menu/menu.vue\";\nimport NoteDialog from \"@/game/ui/note.vue\";\nimport SelectionInfo from \"@/game/ui/selection/selection_info.vue\";\nimport Tools from \"@/game/ui/tools/tools.vue\";\n\nimport { createConnection, socket } from \"@/game/api/socket\";\nimport { onKeyDown, onKeyUp } from \"@/game/events/keyboard\";\nimport { scrollZoom } from \"@/game/events/mouse\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { gameStore } from \"@/game/store\";\nimport { l2g } from \"@/game/units\";\nimport { LocalPoint } from \"./geom\";\nimport DmSettings from \"./ui/dmsettings.vue\";\n\n@Component({\n    components: {\n        \"tool-bar\": Tools,\n        \"selection-info\": SelectionInfo,\n        \"prompt-dialog\": Prompt,\n        \"confirm-dialog\": ConfirmDialog,\n        \"menu-bar\": MenuBar,\n        \"initiative-dialog\": Initiative,\n        \"zoom-slider\": vueSlider,\n        \"note-dialog\": NoteDialog,\n        \"label-dialog\": LabelManager,\n        \"dm-settings\": DmSettings,\n    },\n    beforeRouteEnter(to, from, next) {\n        createConnection(to);\n        next();\n    },\n    beforeRouteLeave(to, from, next) {\n        socket.disconnect();\n        next();\n    },\n})\nexport default class Game extends Vue {\n    $refs!: {\n        confirm: InstanceType<typeof ConfirmDialog>;\n        tools: InstanceType<typeof Tools>;\n    };\n\n    ready = {\n        manager: false,\n        tools: false,\n    };\n\n    get showUI(): boolean {\n        return gameStore.showUI;\n    }\n\n    get IS_DM(): boolean {\n        return gameStore.IS_DM;\n    }\n\n    get FAKE_PLAYER(): boolean {\n        return gameStore.FAKE_PLAYER;\n    }\n\n    get layers(): string[] {\n        return gameStore.layers;\n    }\n\n    get selectedLayer(): string {\n        return gameStore.selectedLayer;\n    }\n\n    get zoomDisplay(): number {\n        return gameStore.zoomDisplay;\n    }\n\n    set zoomDisplay(value: number) {\n        gameStore.updateZoom({\n            newZoomDisplay: value,\n            zoomLocation: l2g(new LocalPoint(window.innerWidth / 2, window.innerHeight / 2)),\n        });\n    }\n\n    mounted() {\n        window.addEventListener(\"resize\", this.resizeWindow);\n        window.addEventListener(\"keyup\", onKeyUp);\n        window.addEventListener(\"keydown\", onKeyDown);\n        this.ready.manager = true;\n    }\n\n    destroyed() {\n        window.removeEventListener(\"resize\", this.resizeWindow);\n        window.removeEventListener(\"keyup\", onKeyUp);\n        window.removeEventListener(\"keydown\", onKeyDown);\n        this.ready.manager = false;\n    }\n\n    // Window events\n\n    zoom(event: WheelEvent) {\n        throttle(scrollZoom)(event);\n    }\n\n    resizeWindow() {\n        layerManager.setWidth(window.innerWidth);\n        layerManager.setHeight(window.innerHeight);\n        layerManager.invalidate();\n    }\n\n    // Mouse events\n\n    mousedown(event: MouseEvent) {\n        this.$refs.tools.mousedown(event);\n    }\n    mouseup(event: MouseEvent) {\n        this.$refs.tools.mouseup(event);\n    }\n    mousemove(event: MouseEvent) {\n        this.$refs.tools.mousemove(event);\n    }\n    mouseleave(event: MouseEvent) {\n        this.$refs.tools.mouseleave(event);\n    }\n    contextmenu(event: MouseEvent) {\n        this.$refs.tools.contextmenu(event);\n    }\n    selectLayer(layer: string) {\n        layerManager.selectLayer(layer);\n    }\n    drop(event: DragEvent) {\n        if (event === null || event.dataTransfer === null) return;\n        if (event.dataTransfer.files.length > 0) {\n            this.$refs.confirm\n                .open(\"Uploading files should be done through the asset manager.\", \"Ok\", \"\")\n                .then(() => {}, () => {});\n        } else if (event.dataTransfer.getData(\"text/plain\") === \"\") {\n            return;\n        } else {\n            layerManager.dropAsset(event);\n        }\n    }\n}\n","import { GlobalPoint, LocalPoint, Ray } from \"@/game/geom\";\nimport { gameStore } from \"@/game/store\";\n\nexport function g2l(obj: GlobalPoint): LocalPoint {\n    const z = gameStore.zoomFactor;\n    const panX = gameStore.panX;\n    const panY = gameStore.panY;\n    return new LocalPoint((obj.x + panX) * z, (obj.y + panY) * z);\n}\n\nexport function g2lx(x: number) {\n    return g2l(new GlobalPoint(x, 0)).x;\n}\n\nexport function g2ly(y: number) {\n    return g2l(new GlobalPoint(0, y)).y;\n}\n\nexport function g2lz(z: number) {\n    return z * gameStore.zoomFactor;\n}\n\nexport function getUnitDistance(r: number) {\n    return (r / gameStore.unitSize) * gameStore.gridSize;\n}\n\nexport function g2lr(r: number) {\n    return g2lz(getUnitDistance(r));\n}\n\nexport function l2g(obj: LocalPoint): GlobalPoint;\nexport function l2g(obj: Ray<LocalPoint>): Ray<GlobalPoint>;\nexport function l2g(obj: LocalPoint | Ray<LocalPoint>): GlobalPoint | Ray<GlobalPoint> {\n    const z = gameStore.zoomFactor;\n    const panX = gameStore.panX;\n    const panY = gameStore.panY;\n    if (obj instanceof LocalPoint) {\n        return new GlobalPoint(obj.x / z - panX, obj.y / z - panY);\n    } else {\n        return new Ray<GlobalPoint>(l2g(obj.origin), obj.direction.multiply(1 / z), obj.tMax);\n    }\n}\n\nexport function l2gx(x: number) {\n    return l2g(new LocalPoint(x, 0)).x;\n}\n\nexport function l2gy(y: number) {\n    return l2g(new LocalPoint(0, y)).y;\n}\n\nexport function l2gz(z: number) {\n    return z / gameStore.zoomFactor;\n}\n\nexport function l2gr(r: number) {\n    return l2gz(getUnitDistance(r));\n}\n\n(<any>window).g2lx = g2lx;\n(<any>window).g2ly = g2ly;\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\n\nimport { mapState } from \"vuex\";\n\nimport ColorPicker from \"@/core/components/colorpicker.vue\";\nimport Prompt from \"@/core/components/modals/prompt.vue\";\nimport AssetNode from \"@/game/ui/menu/asset_node.vue\";\nimport NoteDialog from \"@/game/ui/note.vue\";\n\nimport { getRef, uuidv4 } from \"@/core/utils\";\nimport { socket } from \"@/game/api/socket\";\nimport { Note } from \"@/game/comm/types/general\";\nimport { gameStore } from \"@/game/store\";\nimport { EventBus } from \"../../event-bus\";\n\n@Component({\n    components: {\n        \"color-picker\": ColorPicker,\n        \"asset-node\": AssetNode,\n    },\n    computed: {\n        ...mapState(\"game\", [\"locations\", \"assets\", \"notes\"]),\n    },\n})\nexport default class MenuBar extends Vue {\n    visible = {\n        settings: false,\n        locations: false,\n    };\n\n    get IS_DM(): boolean {\n        return gameStore.IS_DM || gameStore.FAKE_PLAYER;\n    }\n    get gridColour(): string {\n        return gameStore.gridColour;\n    }\n    set gridColour(value: string) {\n        gameStore.setGridColour({ colour: value, sync: true });\n    }\n    get fowColour(): string {\n        return gameStore.fowColour;\n    }\n    set fowColour(value: string) {\n        gameStore.setFOWColour({ colour: value, sync: true });\n    }\n    get rulerColour(): string {\n        return gameStore.rulerColour;\n    }\n    set rulerColour(value: string) {\n        gameStore.setRulerColour({ colour: value, sync: true });\n    }\n    settingsClick(event: { target: HTMLElement }) {\n        if (event.target.classList.contains(\"menu-accordion\")) {\n            event.target.classList.toggle(\"menu-accordion-active\");\n            const next = <HTMLElement>event.target.nextElementSibling;\n            if (next !== null) next.style.display = next.style.display === \"\" ? \"block\" : \"\";\n        }\n    }\n    changeLocation(name: string) {\n        socket.emit(\"Location.Change\", name);\n    }\n    createLocation() {\n        getRef<Prompt>(\"prompt\")\n            .prompt(`New location name:`, `Create new location`)\n            .then(\n                (value: string) => {\n                    socket.emit(\"Location.New\", value);\n                },\n                () => {},\n            );\n    }\n    createNote() {\n        const note = { title: \"New note\", text: \"\", uuid: uuidv4() };\n        gameStore.newNote({ note, sync: true });\n        this.openNote(note);\n    }\n    openNote(note: Note) {\n        getRef<NoteDialog>(\"note\").open(note);\n    }\n\n    openDmSettings() {\n        EventBus.$emit(\"DmSettings.Open\");\n    }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./colorpicker.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./colorpicker.vue?vue&type=script&lang=ts&\"","import { CDT } from \"./cdt\";\nimport { ccw, cw, orientation, sideOfOrientedCircleP, ulp } from \"./triag\";\n\nexport type Point = number[];\n\nexport const INFINITE = -7e310;\n\nlet _INFINITE_VERTEX: Vertex;\n\nexport enum Sign {\n    NEGATIVE = -1,\n    ZERO = 0,\n    POSITIVE = 1,\n\n    RIGHT_TURN = -1,\n    LEFT_TURN = 1,\n\n    SMALLER = -1,\n    EQUAL = 0,\n    LARGER = 1,\n\n    CLOCKWISE = -1,\n    COUNTERCLOCKWISE = 1,\n\n    COLLINEAR = 0,\n    COPLANAR = 0,\n    DEGENERATE = 0,\n\n    ON_NEGATIVE_SIDE = -1,\n    ON_ORIENTED_BOUNDARY = 0,\n    ON_POSITIVE_SIDE = 1,\n}\n\nenum LineFaceState {\n    UNDEFINED = -1,\n    VERTEX_VERTEX = 0,\n    VERTEX_EDGE = 1,\n    EDGE_VERTEX = 2,\n    EDGE_EDGE = 3,\n}\n\nfunction newPoint(): Point {\n    return [INFINITE, INFINITE];\n}\n\nexport class Triangle {\n    vertices: (Vertex | null)[] = [];\n    neighbours: (Triangle | null)[] = [null, null, null];\n    constraints = [false, false, false];\n    static _counter = 0;\n    uid = Triangle._counter++;\n\n    constructor(...vertices: (Vertex | null)[]) {\n        this.vertices = vertices;\n    }\n\n    from(t: Triangle): this {\n        this.vertices = t.vertices.slice(0, t.vertices.length);\n        this.neighbours = t.neighbours.slice(0, t.neighbours.length);\n        this.constraints = t.constraints.slice(0, t.constraints.length);\n        return this;\n    }\n\n    get center(): number[] {\n        return [\n            (this.vertices[0]!.point![0] + this.vertices[1]!.point![0] + this.vertices[2]!.point![0]) / 3,\n            (this.vertices[0]!.point![1] + this.vertices[1]!.point![1] + this.vertices[2]!.point![1]) / 3,\n        ]\n    }\n\n    get dimension() {\n        return this.vertices.length - 1;\n    }\n\n    addVertex(vertex: Vertex) {\n        if (vertex === undefined) {\n            console.log(\"UNDEFINED HIERE\");\n        }\n        this.vertices.push(vertex);\n        vertex.triangle = this;\n    }\n\n    isConstrained(index: number): boolean {\n        return this.constraints[index];\n    }\n\n    reorient() {\n        // If certain indices do not exist yet thay will append faulty undefined's, thus we slice them\n        this.vertices = [this.vertices[1], this.vertices[0], this.vertices[2]].slice(0, this.vertices.length);\n        this.neighbours = [this.neighbours[1], this.neighbours[0], this.neighbours[2]];\n        this.constraints = [this.constraints[1], this.constraints[0], this.constraints[2]];\n    }\n\n    indexV(v: Vertex): number {\n        return this.vertices.indexOf(v);\n    }\n\n    indexT(t: Triangle): number {\n        return this.neighbours.indexOf(t);\n    }\n\n    isInfinite(index?: number): boolean {\n        if (index === undefined) {\n            // return this.vertices.includes(_INFINITE_VERTEX);\n            return this.vertices.some((v) => v!.infinite);\n        } else {\n            return this.vertices[ccw(index)]!.infinite || this.vertices[cw(index)]!.infinite;\n        }\n    }\n\n    contains(point: Point) {\n        const A =\n            -this.vertices[1]!.point![1] * this.vertices[2]!.point![0] +\n            this.vertices[0]!.point![1] * (-this.vertices[1]!.point![0] + this.vertices[2]!.point![0]) +\n            this.vertices[0]!.point![0] * (this.vertices[1]!.point![1] - this.vertices[2]!.point![1]) +\n            this.vertices[1]!.point![0] * this.vertices[2]!.point![1];\n        const sign = A < 0 ? -1 : 1;\n        const s =\n            (this.vertices[0]!.point![1] * this.vertices[2]!.point![0] -\n                this.vertices[0]!.point![0] * this.vertices[2]!.point![1] +\n                (this.vertices[2]!.point![1] - this.vertices[0]!.point![1]) * point[0] +\n                (this.vertices[0]!.point![0] - this.vertices[2]!.point![0]) * point[1]) *\n            sign;\n        if (s < 0) return false;\n        const t =\n            (this.vertices[0]!.point![0] * this.vertices[1]!.point![1] -\n                this.vertices[0]!.point![1] * this.vertices[1]!.point![0] +\n                (this.vertices[0]!.point![1] - this.vertices[1]!.point![1]) * point[0] +\n                (this.vertices[1]!.point![0] - this.vertices[0]!.point![0]) * point[1]) *\n            sign;\n\n        return t > 0 && s + t < A * sign;\n    }\n}\n\nexport class Vertex {\n    infinite = false;\n    private _point: Point | undefined;\n    triangle: Triangle | undefined;\n\n    constructor(point?: Point) {\n        this._point = point;\n    }\n\n    get point(): Point | undefined {\n        return this._point;\n    }\n\n    set point(point: Point | undefined) {\n        this._point = point;\n        this.infinite = false;\n    }\n\n    getIncidentFaces(): Triangle[] {\n        const faces: Triangle[] = [];\n        const fc = new FaceCirculator(this, null);\n        do {\n            faces.push(fc.t!);\n        } while (fc.next());\n        return faces;\n    }\n\n    *getIncidentEdges(): IterableIterator<Edge> {\n        // const edges: Edge[] = [];\n        const ec = new EdgeCirculator(this, null);\n        do {\n            yield new Edge(ec.t, ec.ri);\n        } while (ec.valid && ec.next());\n        // return edges;\n    }\n}\n\nexport class EdgeCirculator {\n    ri: number;\n    v: Vertex | null;\n    t: Triangle | null;\n    _ri: number;\n    _v: Vertex | null;\n    _t: Triangle | null;\n\n    constructor(v: Vertex | null, t: Triangle | null) {\n        this.v = v;\n        this.t = t;\n        if (v === null) {\n            this.t = null;\n        } else if (t === null) {\n            this.t = v.triangle!;\n        }\n        if (this.t == null || this.t.dimension < 1) {\n            this.ri = 0;\n            this.v = null;\n            this.t = null;\n        } else {\n            const i = this.t.indexV(v!);\n            if (this.t.dimension === 2) this.ri = ccw(i);\n            else this.ri = 2;\n        }\n        this._ri = this.ri;\n        this._v = this.v;\n        this._t = this.t;\n    }\n\n    get valid() {\n        return this.t !== null && this.v !== null;\n    }\n\n    next(): boolean {\n        let i = this.t!.indexV(this.v!);\n        if (this.t!.dimension === 1) {\n            this.t = this.t!.neighbours[i === 0 ? 1 : 0];\n        } else {\n            this.t = this.t!.neighbours[ccw(i)];\n            i = this.t!.indexV(this.v!);\n            this.ri = ccw(i);\n        }\n        return this.ri !== this._ri || this.v !== this._v || this.t !== this._t;\n    }\n}\n\nexport class EdgeIterator {\n    private i = 0;\n    pos: Triangle | null;\n    edge: Edge = new Edge();\n    tds: TDS;\n    _es = 0;\n    constructor(tds: TDS) {\n        this.tds = tds;\n        this.edge.second = 0;\n        if (tds.dimension <= 0) {\n            this.pos = null;\n            return;\n        }\n        this.pos = tds.triangles[0];\n        if (tds.dimension === 1) this.edge.second = 2;\n        while (this.pos !== null && !this.associatedEdge()) {\n            throw new Error(\"[poi\");\n        }\n\n        if (tds.dimension === 1) this._es = 2;\n    }\n\n    get valid(): boolean {\n        return (this.pos !== null || this._es !== this.edge.second) && this.pos!.isInfinite(this.edge.second);\n    }\n\n    next() {\n        do {\n            this.increment();\n        } while (this.pos !== null && !this.associatedEdge());\n    }\n\n    collect(): Edge {\n        this.edge.first = this.pos;\n        return this.edge;\n    }\n\n    associatedEdge(): boolean {\n        if (this.tds.dimension === 1) return true;\n        return (\n            this.tds.triangles.indexOf(this.pos!) < this.tds.triangles.indexOf(this.pos!.neighbours[this.edge.second]!)\n        );\n    }\n\n    increment() {\n        if (this.tds.dimension === 1) {\n            this.i++;\n            if (this.tds.triangles.length <= this.i) this.pos = null;\n            else this.pos = this.tds.triangles[this.i];\n        } else if (this.edge.second === 2) {\n            this.edge.second = 0;\n            this.i++;\n            if (this.tds.triangles.length <= this.i) this.pos = null;\n            else this.pos = this.tds.triangles[this.i];\n        } else {\n            this.edge.second++;\n        }\n    }\n}\n\nexport class FaceCirculator {\n    v: Vertex | null;\n    t: Triangle | null;\n    _v: Vertex | null;\n    _t: Triangle | null;\n\n    constructor(v: Vertex | null, t: Triangle | null) {\n        this.v = v;\n        this.t = t;\n        if (v === null) {\n            this.t = null;\n        } else if (t === null) {\n            this.t = v.triangle!;\n        }\n        if (this.t == null || this.t.dimension < 2) {\n            this.v = null;\n            this.t = null;\n        }\n        this._v = this.v;\n        this._t = this.t;\n    }\n\n    get valid() {\n        return this.t !== null && this.v !== null;\n    }\n\n    get done() {\n        return this.v === this._v && this.t === this._t;\n    }\n\n    prev() {\n        const i = this.t!.indexV(this.v!);\n        this.t = this.t!.neighbours[cw(i)];\n    }\n\n    next(): boolean {\n        const i = this.t!.indexV(this.v!);\n        this.t = this.t!.neighbours[ccw(i)];\n        return !this.done;\n    }\n}\n\nexport class LineFaceCirculator {\n    private i = 0;\n    pos: Triangle | null = null;\n    _tr: CDT;\n    s: LineFaceState = LineFaceState.UNDEFINED;\n    p: Point;\n    q: Point;\n\n    constructor(v: Vertex, tr: CDT, dir: Point) {\n        this._tr = tr;\n        this.p = v.point!;\n        this.q = dir;\n\n        const fc = new FaceCirculator(v, null);\n        let ic = fc.t!.indexV(v);\n        let vt = fc.t!.vertices[cw(ic)]!;\n        while (v === _INFINITE_VERTEX || orientation(this.p, this.q, vt.point!) !== Sign.LEFT_TURN) {\n            fc.next();\n            ic = fc.t!.indexV(v);\n            vt = fc.t!.vertices[cw(ic)]!;\n            if (!fc.valid) {\n                return;\n            }\n        }\n\n        let vr = fc.t!.vertices[ccw(ic)]!;\n        let pqr: Sign = Sign.RIGHT_TURN;\n        // tslint:disable:no-conditional-assignment\n        while (vr !== _INFINITE_VERTEX && (pqr = orientation(this.p, this.q, vr.point!)) === Sign.LEFT_TURN) {\n            fc.prev();\n            ic = fc.t!.indexV(v);\n            vr = fc.t!.vertices[ccw(ic)]!;\n        }\n\n        ic = fc.t!.indexV(v);\n        vt = fc.t!.vertices[cw(ic)]!;\n\n        if (vr === _INFINITE_VERTEX) {\n            fc.prev();\n            ic = fc.t!.indexV(v);\n            vr = fc.t!.vertices[ccw(ic)]!;\n            pqr = orientation(this.p, this.q, vr.point!);\n            switch (pqr) {\n                case Sign.RIGHT_TURN:\n                case Sign.COLLINEAR: {\n                    fc.next();\n                    ic = fc.t!.indexV(_INFINITE_VERTEX);\n                    this.pos = fc.t!;\n                    this.s = LineFaceState.VERTEX_VERTEX;\n                    this.i = ic;\n                    break;\n                }\n                case Sign.LEFT_TURN: {\n                    break;\n                }\n            }\n        } else if (pqr === Sign.COLLINEAR) {\n            this.pos = fc.t!;\n            this.s = LineFaceState.VERTEX_VERTEX;\n            this.i = ccw(ic);\n        } else {\n            this.pos = fc.t!;\n            this.s = LineFaceState.VERTEX_EDGE;\n            this.i = ic;\n        }\n    }\n\n    next() {\n        this.increment();\n    }\n\n    increment() {\n        let o: Sign;\n        if (this.s === LineFaceState.VERTEX_VERTEX || this.s === LineFaceState.EDGE_VERTEX) {\n            do {\n                const n = this.pos!.neighbours[cw(this.i)]!;\n                this.i = n.indexT(this.pos!);\n                this.pos = n;\n                if (this.pos!.vertices[this.i] === _INFINITE_VERTEX) {\n                    o = Sign.COLLINEAR;\n                    this.i = cw(this.i);\n                    break;\n                }\n                o = orientation(this.p, this.q, this.pos!.vertices[this.i]!.point!);\n                this.i = cw(this.i);\n            } while (o === Sign.LEFT_TURN);\n            if (o === Sign.COLLINEAR) {\n                this.s = LineFaceState.VERTEX_VERTEX;\n                this.i = ccw(this.i);\n            } else {\n                this.s = LineFaceState.VERTEX_EDGE;\n            }\n        } else {\n            const n = this.pos!.neighbours[this.i]!;\n            const ni = n.indexT(this.pos!);\n            this.pos = n;\n            o =\n                this.pos!.vertices[ni]! === _INFINITE_VERTEX\n                    ? Sign.COLLINEAR\n                    : orientation(this.p, this.q, this.pos!.vertices[ni]!.point!);\n            switch (o) {\n                case Sign.LEFT_TURN: {\n                    this.s = LineFaceState.EDGE_EDGE;\n                    this.i = ccw(ni);\n                    break;\n                }\n                case Sign.RIGHT_TURN: {\n                    this.s = LineFaceState.EDGE_EDGE;\n                    this.i = cw(ni);\n                    break;\n                }\n                default: {\n                    this.s = LineFaceState.EDGE_VERTEX;\n                    this.i = ni;\n                }\n            }\n        }\n    }\n}\n\nexport class Edge {\n    first: Triangle | null = null;\n    second: number = 0;\n\n    constructor(first: Triangle | null = null, second: number = 0) {\n        this.first = first;\n        this.second = second;\n    }\n}\n\nexport enum LocateType {\n    VERTEX,\n    EDGE,\n    FACE,\n    OUTSIDE_CONVEX_HULL,\n    OUTSIDE_AFFINE_HULL,\n}\n\nexport class TDS {\n    dimension = -1;\n    vertices: Vertex[] = [];\n    triangles: Triangle[] = [];\n    _infinite: Vertex;\n\n    constructor() {\n        this._infinite = this.createVertex();\n        _INFINITE_VERTEX = this._infinite;\n        const t = new Triangle();\n        t.addVertex(this._infinite);\n        this.triangles.push(t);\n    }\n\n    createVertex(): Vertex {\n        const v = this.infiniteVertex;\n        this.vertices.push(v);\n        return v;\n    }\n\n    deleteVertex(vertex: Vertex) {\n        this.vertices = this.vertices.filter(v => v !== vertex);\n    }\n\n    createTriangle(\n        v0: Vertex | null,\n        v1: Vertex | null,\n        v2: Vertex | null,\n        n0: Triangle | null,\n        n1: Triangle | null,\n        n2: Triangle | null,\n    ) {\n        const t = new Triangle(v0, v1, v2);\n        t.neighbours[0] = n0;\n        t.neighbours[1] = n1;\n        t.neighbours[2] = n2;\n        this.triangles.push(t);\n        return t;\n    }\n\n    createTriangle2(\n        f1: Triangle,\n        i1: number,\n        f2: Triangle,\n        i2: number,\n        f3: Triangle | null = null,\n        i3: number | null = null,\n    ) {\n        const v3 = f3 === null || i3 === null ? f2.vertices[ccw(i2)] : f3.vertices[cw(i3)];\n        const t = new Triangle(f1.vertices[cw(i1)], f2.vertices[cw(i2)], v3);\n        f1.neighbours[i1] = t;\n        f2.neighbours[i2] = t;\n        if (f3 !== null && i3 !== null) f3.neighbours[i3] = t;\n        t.neighbours[0] = f2;\n        if (f3 !== null) t.neighbours[1] = f3;\n        t.neighbours[2] = f1;\n        this.triangles.push(t);\n        return t;\n    }\n\n    createTriangle3(f1: Triangle, i1: number, v: Vertex) {\n        const t = new Triangle(f1.vertices[cw(i1)], f1.vertices[ccw(i1)], v);\n        t.neighbours[2] = f1;\n        // not sure if I should create new Triangle() in the other neighbor spots or leave them as null\n        f1.neighbours[i1] = t;\n        this.triangles.push(t);\n        return t;\n    }\n\n    deleteTriangle(trig: Triangle) {\n        this.triangles = this.triangles.filter(t => t !== trig);\n    }\n\n    setAdjacency(t0: Triangle, i0: number, t1: Triangle, i1: number) {\n        t0.neighbours[i0] = t1;\n        t1.neighbours[i1] = t0;\n    }\n\n    get finiteVertex(): Vertex {\n        return this.vertices[1];\n    }\n\n    get infiniteVertex(): Vertex {\n        const v = new Vertex(newPoint());\n        v.infinite = true;\n        return v;\n    }\n\n    get finiteEdge(): Edge {\n        if (this.dimension < 1) throw new Error(\"aspo\");\n        const ei = new EdgeIterator(this);\n        while (ei.valid) ei.next();\n        return ei.collect();\n    }\n\n    insertDimUp(w: Vertex = new Vertex(), orient: boolean = true): Vertex {\n        const v = this.createVertex();\n        this.dimension++;\n        let t1: Triangle;\n        let t2: Triangle;\n        switch (this.dimension) {\n            case 0: {\n                t1 = this.triangles[0];\n                t2 = new Triangle(v);\n                this.triangles.push(t2);\n                this.setAdjacency(t1, 0, t2, 0);\n                v.triangle = t2;\n                break;\n            }\n            case 1:\n            case 2: {\n                const deleteList: Triangle[] = [];\n                const triangles = this.triangles.slice(0, this.triangles.length);\n                for (const trig of triangles) {\n                    const copy = new Triangle().from(trig);\n                    this.triangles.push(copy);\n                    trig.vertices[this.dimension] = v;\n                    copy.vertices[this.dimension] = w;\n                    this.setAdjacency(trig, this.dimension, copy, this.dimension);\n                    if (trig.vertices.includes(w)) deleteList.push(copy);\n                }\n                for (const trig of triangles) {\n                    const neighbour = trig.neighbours[this.dimension];\n                    for (let j = 0; j < this.dimension; ++j) {\n                        neighbour!.neighbours[j] = trig.neighbours[j]!.neighbours[this.dimension];\n                    }\n                }\n\n                let lfit = 0;\n                if (this.dimension === 1) {\n                    if (orient) {\n                        triangles[lfit].reorient();\n                        lfit++;\n                        triangles[lfit].neighbours[1]!.reorient();\n                    } else {\n                        triangles[lfit].neighbours[1]!.reorient();\n                        lfit++;\n                        triangles[lfit].reorient();\n                    }\n                } else {\n                    for (const trig of triangles) {\n                        if (orient) trig.neighbours[2]!.reorient();\n                        else trig.reorient();\n                    }\n                }\n\n                for (const trig of deleteList) {\n                    let j = 1;\n                    if (trig.vertices[0] === w) j = 0;\n                    t1 = trig.neighbours[this.dimension]!;\n                    const i1 = this.mirrorIndex(trig, this.dimension);\n                    t2 = trig.neighbours[j]!;\n                    const i2 = this.mirrorIndex(trig, j);\n                    this.setAdjacency(t1, i1, t2, i2);\n                    this.deleteTriangle(trig);\n                }\n                v.triangle = triangles[0];\n                break;\n            }\n            default: {\n                throw new Error(\"Dimension unknown\");\n            }\n        }\n        return v;\n    }\n\n    mirrorIndex(t: Triangle, i: number): number {\n        if (t.dimension === 1) {\n            const j = t.neighbours[i]!.indexV(t.vertices[i === 0 ? 1 : 0]!);\n            return j === 0 ? 1 : 0;\n        }\n        return ccw(t.neighbours[i]!.indexV(t.vertices[ccw(i)]!));\n    }\n\n    insertInFace(t: Triangle) {\n        const v = this.createVertex();\n        const v0 = t.vertices[0]!;\n        const v1 = t.vertices[1]!;\n        const v2 = t.vertices[2]!;\n        const n1 = t.neighbours[1]!;\n        const n2 = t.neighbours[2]!;\n        const t1 = this.createTriangle(v0, v, v2, t, n1, null);\n        const t2 = this.createTriangle(v0, v1, v, t, null, n2);\n        this.setAdjacency(t1, 2, t2, 1);\n        if (n1 !== null) {\n            const i1 = this.mirrorIndex(t, 1);\n            n1.neighbours[i1] = t1;\n        }\n        if (n2 !== null) {\n            const i2 = this.mirrorIndex(t, 2);\n            n2.neighbours[i2] = t2;\n        }\n        t.vertices[0] = v;\n        t.neighbours[1] = t1;\n        t.neighbours[2] = t2;\n        if (v0.triangle === t) v0.triangle = t2;\n        v.triangle = t;\n        return v;\n    }\n\n    flip(t: Triangle, i: number) {\n        const n = t.neighbours[i]!;\n        const ni = this.mirrorIndex(t, i);\n        const vCW = t.vertices[cw(i)]!;\n        const vCCW = t.vertices[ccw(i)]!;\n        const tr = t.neighbours[ccw(i)]!;\n        const tri = this.mirrorIndex(t, ccw(i));\n        const bl = n.neighbours[ccw(ni)]!;\n        const bli = this.mirrorIndex(n, ccw(ni));\n\n        t.vertices[cw(i)] = n.vertices[ni]!;\n        n.vertices[cw(ni)] = t.vertices[i]!;\n\n        this.setAdjacency(t, i, bl, bli);\n        this.setAdjacency(t, ccw(i), n, ccw(ni));\n        this.setAdjacency(n, ni, tr, tri);\n\n        if (vCW.triangle! === t) vCW.triangle = n;\n        if (vCCW.triangle! === n) vCCW.triangle = t;\n    }\n\n    insertInEdge(t: Triangle, i: number) {\n        let v: Vertex;\n        if (this.dimension === 1) {\n            v = this.createVertex();\n            const ff = t.neighbours[0]!;\n            const vv = t.vertices[1]!;\n            const g = this.createTriangle(v, vv, null, ff, t, null);\n            t.vertices[1] = v;\n            t.neighbours[0] = g;\n            ff.neighbours[1] = g;\n            v.triangle = g;\n            vv.triangle = ff;\n        } else {\n            const n = t.neighbours[i]!;\n            const ni = this.mirrorIndex(t, i);\n            v = this.insertInFace(t);\n            this.flip(n, ni);\n        }\n        return v;\n    }\n\n    makeHole(v: Vertex, hole: [Triangle, number][]) {\n        const deleteList: Triangle[] = [];\n        let f: Triangle;\n        let fn: Triangle;\n        let i: number;\n        let inn: number;\n        let vv: Vertex;\n        const fc = new FaceCirculator(v, null);\n        do {\n            f = fc.t!;\n            fc.next();\n            i = f.indexV(v);\n            fn = f.neighbours[i]!;\n            inn = fn.indexT(f);\n            vv = f.vertices[cw(i)]!;\n            vv.triangle = fn;\n            vv = f.vertices[ccw(i)]!;\n            vv.triangle = fn;\n            fn.neighbours[inn] = null;\n            hole.push([fn, inn]);\n            deleteList.push(f);\n        } while (!fc.done);\n        for (const t of deleteList) {\n            this.deleteTriangle(t);\n        }\n    }\n\n    fillHoleDelaunay(firstHole: [Triangle, number][]) {\n        let f: Triangle;\n        let ff: Triangle;\n        let fn: Triangle;\n        let i: number;\n        let ii: number;\n        let inn: number;\n        const holeList: [Triangle, number][][] = [];\n        holeList.push(firstHole);\n        while (holeList.length > 0) {\n            const hole = holeList[0];\n            let hit: number;\n\n            if (hole.length === 3) {\n                hit = 0;\n                f = hole[hit][0];\n                i = hole[hit][1];\n                ff = hole[++hit][0];\n                ii = hole[hit][1];\n                fn = hole[++hit][0];\n                inn = hole[hit][1];\n                this.createTriangle2(f, i, ff, ii, fn, inn);\n                holeList.shift();\n                continue;\n            }\n\n            let finite = false;\n            while (!finite) {\n                ff = hole[0][0];\n                ii = hole[0][1];\n                if (ff.vertices[cw(ii)]!.infinite || ff.vertices[ccw(ii)]!.infinite) {\n                    hole.push(hole.shift()!);\n                } else {\n                    finite = true;\n                }\n            }\n\n            ff = hole[0][0];\n            ii = hole[0][1];\n            hole.shift();\n\n            const v0 = ff.vertices[cw(ii)]!;\n            const v1 = ff.vertices[ccw(ii)]!;\n            let v2 = this.infiniteVertex;\n            let v3: Vertex;\n\n            const p0 = v0.point!;\n            const p1 = v1.point!;\n            hit = 0;\n            let cutAfter = 0;\n\n            while (hit !== hole.length - 1) {\n                fn = hole[hit][0];\n                inn = hole[hit][1];\n                const vv = fn.vertices[ccw(inn)]!;\n                if (vv.infinite && v2.infinite) cutAfter = hit;\n                else {\n                    const p = vv.point!;\n                    if (orientation(p0, p1, p) === Sign.COUNTERCLOCKWISE) {\n                        if (v2.infinite) {\n                            v2 = vv;\n                            v3 = vv;\n                            cutAfter = hit;\n                        } else if (sideOfOrientedCircleP(p0, p1, v3!.point!, p, true) === Sign.ON_POSITIVE_SIDE) {\n                            v2 = vv;\n                            v3 = vv;\n                            cutAfter = hit;\n                        }\n                    }\n                }\n                hit++;\n            }\n            let newf: Triangle;\n\n            fn = hole[0][0];\n            inn = hole[0][1];\n            if (fn.vertices[ccw(inn)] === v2) {\n                newf = this.createTriangle2(ff, ii, fn, inn);\n                hole.shift();\n                hole.unshift([newf, 1]);\n            } else {\n                fn = hole[hole.length - 1][0];\n                inn = hole[hole.length - 1][1];\n                const indx = fn.indexV(v2);\n                if (indx >= 0 && indx === cw(inn)) {\n                    newf = this.createTriangle2(fn, inn, ff, ii);\n                    hole.pop();\n                    hole.push([newf, 1]);\n                } else {\n                    // split the hole in two holes\n                    newf = this.createTriangle3(ff, ii, v2);\n                    const newHole: [Triangle, number][] = [];\n                    ++cutAfter;\n                    // while (hole.begin !== cut_after)\n                    while (hole[0] !== hole[cutAfter--]) {\n                        newHole.push(hole.shift()!);\n                    }\n\n                    hole.unshift([newf, 1]);\n                    newHole.unshift([newf, 0]);\n                    holeList.unshift(newHole);\n                }\n            }\n        }\n    }\n}\n\nexport class BoundingBox {\n    x1: number;\n    x2: number;\n    y1: number;\n    y2: number;\n    constructor(p: Point) {\n        this.x1 = p[0];\n        this.y1 = p[1];\n        this.x2 = p[0];\n        this.y2 = p[1];\n    }\n\n    dilate(dist: number) {\n        this.x1 -= dist * ulp(this.x1);\n        this.y1 -= dist * ulp(this.y1);\n        this.x2 += dist * ulp(this.x2);\n        this.y2 += dist * ulp(this.y2);\n    }\n\n    overlaps(other: BoundingBox): boolean {\n        if (this.x2 < other.x1 || other.x2 < this.x1) return false;\n        if (this.y2 < other.y1 || other.y2 < this.y1) return false;\n        return true;\n    }\n}\n","import { partition } from \"@/core/utils\";\nimport { GlobalPoint, Ray } from \"@/game/geom\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { BoundingRect } from \"@/game/shapes/boundingrect\";\nimport { gameStore } from \"@/game/store\";\nimport { g2lx, g2ly, g2lz } from \"@/game/units\";\nimport { BoundingNode, InteriorNode, LeafNode } from \"@/game/visibility/bvh/node\";\n\ninterface BuildInfo {\n    index: number;\n    bbox: BoundingRect;\n    center: BoundingRect;\n}\ninterface LinearBHVNode {\n    bbox: BoundingRect;\n    nPrimitives: number;\n}\ninterface LinearLeafNode extends LinearBHVNode {\n    primitivesOffset: number;\n}\ninterface LinearInternalNode extends LinearBHVNode {\n    secondChildOffset: number;\n    dimension: number;\n}\n\nexport class BoundingVolume {\n    totalNodes = 0;\n    buildData: BuildInfo[] = [];\n    shapes: string[];\n    orderedPrims: string[] = [];\n    root: BoundingNode | null;\n    nodes: LinearBHVNode[] = [];\n\n    offset = 0;\n\n    constructor(shapes: string[]) {\n        this.shapes = shapes;\n        if (this.shapes.length === 0) {\n            this.root = null;\n            this.nodes = [];\n            return;\n        }\n        for (let i = 0; i < shapes.length; i++) {\n            const shape = layerManager.UUIDMap.get(shapes[i])!;\n            this.buildData.push({\n                index: i,\n                bbox: shape.getBoundingBox(),\n                center: new BoundingRect(shape.center(), 0, 0),\n            });\n        }\n        this.root = this.recursiveBuild(0, shapes.length);\n        this.compact();\n    }\n\n    draw() {\n        const ctx = layerManager.getLayer(\"draw\")!.ctx;\n        for (const node of this.nodes) {\n            const b = node.bbox;\n            ctx.strokeRect(g2lx(b.topLeft.x), g2ly(b.topLeft.y), g2lz(b.w), g2lz(b.h));\n        }\n    }\n\n    recursiveBuild(start: number, end: number): BoundingNode {\n        this.totalNodes++;\n        let bbox = this.buildData[start].bbox;\n        for (let i = start + 1; i < end; i++) bbox = bbox.union(this.buildData[i].bbox);\n        const nPrimitives = end - start;\n        if (nPrimitives === 1) {\n            return this.createLeaf(start, end, nPrimitives, bbox);\n        } else {\n            let centroidBbox = this.buildData[start].center;\n            for (let i = start; i < end; i++) centroidBbox = centroidBbox.union(this.buildData[i].center);\n            const dimension = centroidBbox.getMaxExtent();\n            if (centroidBbox.botRight.get(dimension) === centroidBbox.topLeft.get(dimension)) {\n                return this.createLeaf(start, end, nPrimitives, bbox);\n            }\n            // Use shitty Middle thingy until an introselect js algo is added\n            const pMid = 0.5 * (centroidBbox.topLeft.get(dimension) + centroidBbox.botRight.get(dimension));\n            const partitionedData = partition(\n                this.buildData.slice(start, end),\n                (n: BuildInfo) => n.center.center().get(dimension) < pMid,\n            );\n            const flattened = (<BuildInfo[]>[]).concat.apply([], partitionedData);\n            if (partitionedData[0].length === 0 || partitionedData[1].length === 0) console.log(\"EMPTY\");\n            this.buildData.splice(start, flattened.length, ...flattened);\n            const mid = partitionedData[0].length + start;\n            return new InteriorNode(dimension, this.recursiveBuild(start, mid), this.recursiveBuild(mid, end));\n        }\n    }\n\n    intersect(ray: Ray<GlobalPoint>, stopOnFirstHit?: boolean) {\n        if (this.nodes.length === 0) return { hit: false, intersect: ray.get(0), tMin: 0, tMax: ray.tMax };\n        if (stopOnFirstHit === undefined) stopOnFirstHit = false;\n        // Initialize return values\n        let hit = false;\n        let tMin = 0;\n        let tMax = ray.tMax;\n\n        // Initialize work variables\n        let todoOffset = 0;\n        let nodeNum = 0;\n        const todo: number[] = [];\n\n        // Precalculate intersection vectors\n        const invDir = ray.direction.inverse();\n        const dirIsNegative = [invDir.x < 0, invDir.y < 0];\n\n        while (true) {\n            const node = this.nodes[nodeNum];\n\n            const i = node.bbox.intersectP(ray, invDir, dirIsNegative);\n            if (i.hit) {\n                if (node.nPrimitives > 0) {\n                    // TODO: nPrimitives is currently always 1 , this could be generalised\n                    // for (let i=0; i < node.nPrimitives; i++) {\n                    //     if (this.shapes[(<LinearLeafNode>node).primitivesOffset + i])\n                    // }\n                    hit = true;\n                    tMin = ray.tMax = i.min;\n                    tMax = i.max;\n                    if (todoOffset === 0 || stopOnFirstHit) break;\n                    nodeNum = todo[--todoOffset];\n                } else {\n                    if (dirIsNegative[(<LinearInternalNode>node).dimension]) {\n                        todo[todoOffset++] = nodeNum + 1;\n                        nodeNum = (<LinearInternalNode>node).secondChildOffset;\n                    } else {\n                        todo[todoOffset++] = (<LinearInternalNode>node).secondChildOffset;\n                        nodeNum++;\n                    }\n                }\n            } else {\n                if (todoOffset === 0) break;\n                nodeNum = todo[--todoOffset];\n            }\n        }\n        return { hit, intersect: ray.get(tMin), tMin, tMax };\n    }\n\n    private compact() {\n        this.offset = 0;\n        if (this.root !== null) this.flatten(this.root);\n    }\n\n    private flatten(node: BoundingNode) {\n        const index = this.offset;\n        const myOffset = this.offset++;\n        if (node.nPrimitives === 0) {\n            this.flatten(node.children[0]);\n            const secondOffset = this.flatten(node.children[1]);\n            this.nodes[index] = <LinearInternalNode>{\n                bbox: node.bbox,\n                dimension: (<InteriorNode>node).dimension,\n                nPrimitives: 0,\n                secondChildOffset: secondOffset,\n            };\n        } else {\n            this.nodes[index] = <LinearLeafNode>{\n                bbox: node.bbox,\n                primitivesOffset: (<LeafNode>node).firstPrimOffset,\n                nPrimitives: node.nPrimitives,\n            };\n        }\n        return myOffset;\n    }\n\n    private createLeaf(start: number, end: number, nPrimitives: number, bbox: BoundingRect) {\n        const size = this.orderedPrims.length;\n        for (let i = start; i < end; i++) this.orderedPrims.push(this.shapes[this.buildData[i].index]);\n        return new LeafNode(size, nPrimitives, bbox);\n    }\n}\n","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./filter.vue?vue&type=style&index=1&id=dca395d6&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./filter.vue?vue&type=style&index=1&id=dca395d6&scoped=true&lang=css&\"","import { getRef } from \"@/core/utils\";\nimport { sendClientOptions } from \"@/game/api/utils\";\nimport { ServerShape } from \"@/game/comm/types/shapes\";\nimport { GlobalPoint } from \"@/game/geom\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { createShapeFromDict } from \"@/game/shapes/utils\";\nimport { gameStore } from \"@/game/store\";\nimport { AnnotationManager } from \"@/game/ui/annotation\";\nimport { g2l } from \"@/game/units\";\nimport Initiative from \"./ui/initiative.vue\";\nimport { TriangulationTarget } from './visibility/te/pa';\n\n\nexport class GameManager {\n    selectedTool: number = 0;\n\n    annotationManager = new AnnotationManager();\n\n    addShape(shape: ServerShape): void {\n        if (!layerManager.hasLayer(shape.layer)) {\n            console.log(`Shape with unknown layer ${shape.layer} could not be added`);\n            return;\n        }\n        const layer = layerManager.getLayer(shape.layer)!;\n        const sh = createShapeFromDict(shape);\n        if (sh === undefined) {\n            console.log(`Shape with unknown type ${shape.type_} could not be added`);\n            return;\n        }\n        layer.addShape(sh, false);\n        layer.invalidate(false);\n    }\n\n    updateShape(data: { shape: ServerShape; redraw: boolean; move: boolean; temporary: boolean }): void {\n        if (!layerManager.hasLayer(data.shape.layer)) {\n            console.log(`Shape with unknown layer ${data.shape.layer} could not be added`);\n            return;\n        }\n        const sh = createShapeFromDict(data.shape);\n        if (sh === undefined) {\n            console.log(`Shape with unknown type ${data.shape.type_} could not be added`);\n            return;\n        }\n        const oldShape = layerManager.UUIDMap.get(data.shape.uuid);\n        if (oldShape === undefined) {\n            console.log(`Shape with unknown id could not be updated`);\n            return;\n        }\n        const oldPoints = oldShape.points;\n        const redrawInitiative = sh.owners !== oldShape.owners;\n        const shape = Object.assign(oldShape, sh);\n        const alteredVision = shape.checkVisionSources();\n        const alteredMovement = shape.setMovementBlock(shape.movementObstruction);\n        shape.setIsToken(shape.isToken);\n        if (data.redraw) {\n            if (shape.visionObstruction && !alteredVision) {\n                gameStore.deleteFromTriag({target: TriangulationTarget.VISION, points: oldPoints, standalone: false});\n                gameStore.addToTriag({target: TriangulationTarget.VISION, points: shape.points});\n            }\n            layerManager.getLayer(data.shape.layer)!.invalidate(false);\n            if (shape.movementObstruction && !alteredMovement) {\n                gameStore.deleteFromTriag({target: TriangulationTarget.MOVEMENT, points: oldPoints, standalone: false});\n                gameStore.addToTriag({target: TriangulationTarget.MOVEMENT, points: shape.points});\n            }\n        }\n        if (redrawInitiative) getRef<Initiative>(\"initiative\").$forceUpdate();\n    }\n\n    setCenterPosition(position: GlobalPoint) {\n        const localPos = g2l(position);\n        gameStore.increasePanX((window.innerWidth / 2 - localPos.x) / gameStore.zoomFactor);\n        gameStore.increasePanY((window.innerHeight / 2 - localPos.y) / gameStore.zoomFactor);\n        layerManager.invalidate();\n        sendClientOptions();\n    }\n}\n\nexport const gameManager = new GameManager();\n(<any>window).gameManager = gameManager;\n","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./asset_node.vue?vue&type=style&index=0&id=6d718094&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./asset_node.vue?vue&type=style&index=0&id=6d718094&scoped=true&lang=css&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./modal.vue?vue&type=style&index=0&id=c2851f0e&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./modal.vue?vue&type=style&index=0&id=c2851f0e&scoped=true&lang=css&\"","import { render, staticRenderFns } from \"./vision.vue?vue&type=template&id=46baf892&scoped=true&\"\nimport script from \"./vision.vue?vue&type=script&lang=ts&\"\nexport * from \"./vision.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./vision.vue?vue&type=style&index=0&id=46baf892&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"46baf892\",\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\n\n@Component\nexport default class LoadComponent extends Vue {\n    message = \"Loading...\";\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport axios, { AxiosError, AxiosResponse } from \"axios\";\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\nimport { Route } from \"vue-router\";\n\nimport { coreStore } from \"@/core/store\";\n\nComponent.registerHooks([\"beforeRouteEnter\"]);\n\n@Component\nexport default class Dashboard extends Vue {\n    owned = [];\n    joined = [];\n    error = \"\";\n\n    newSessionName = \"\";\n\n    beforeRouteEnter(to: Route, from: Route, next: ({}) => {}) {\n        axios\n            .get(\"/api/rooms\")\n            .then((response: AxiosResponse) => {\n                next((vm: this) => {\n                    vm.owned = response.data.owned;\n                    vm.joined = response.data.joined;\n                });\n            })\n            .catch((err: AxiosError) => {\n                next((vm: this) => {\n                    vm.error = err.message;\n                });\n            });\n    }\n\n    createRoom(event: Event) {\n        axios\n            .post(\"/api/rooms\", {\n                name: this.newSessionName,\n            })\n            .then((response: AxiosResponse) => {\n                this.$router.push(`/game/${coreStore.username}/${this.newSessionName}`);\n            })\n            .catch((err: AxiosError) => {\n                this.error = err.message;\n            });\n    }\n}\n","import { render, staticRenderFns } from \"./confirm.vue?vue&type=template&id=1883e207&scoped=true&\"\nimport script from \"./confirm.vue?vue&type=script&lang=ts&\"\nexport * from \"./confirm.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./confirm.vue?vue&type=style&index=0&id=1883e207&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1883e207\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./shapecontext.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./shapecontext.vue?vue&type=script&lang=ts&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./shapecontext.vue?vue&type=style&index=0&id=6c66d243&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./shapecontext.vue?vue&type=style&index=0&id=6c66d243&scoped=true&lang=css&\"","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--12-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./manager.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--12-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./manager.vue?vue&type=script&lang=ts&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./draw.vue?vue&type=style&index=0&id=57300176&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./draw.vue?vue&type=style&index=0&id=57300176&scoped=true&lang=css&\"","import Vue from \"vue\";\nexport const EventBus = new Vue();\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.selected)?_c('div',{staticClass:\"tool-detail\",style:({'--detailRight': _vm.detailRight, '--detailArrow': _vm.detailArrow})},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.IS_DM),expression:\"IS_DM\"}]},[_vm._v(\"Mode\")]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.IS_DM),expression:\"IS_DM\"}],staticClass:\"selectgroup\"},_vm._l((_vm.modes),function(mode){return _c('div',{key:mode,staticClass:\"option\",class:{'option-selected': _vm.modeSelect === mode},on:{\"click\":function($event){_vm.modeSelect = mode}}},[_vm._v(_vm._s(mode))])}),0),_c('div',[_vm._v(\"Shape\")]),_c('div',{staticClass:\"selectgroup\"},_vm._l((_vm.shapes),function(shape){return _c('div',{key:shape,staticClass:\"option\",class:{'option-selected': _vm.shapeSelect === shape},on:{\"click\":function($event){_vm.shapeSelect = shape}}},[_c('i',{staticClass:\"fas\",class:'fa-' + shape})])}),0),_c('div',[_vm._v(\"Colours\")]),_c('div',{staticClass:\"selectgroup\"},[_c('color-picker',{staticClass:\"option\",attrs:{\"color\":_vm.fillColour},on:{\"update:color\":function($event){_vm.fillColour=$event}}}),_c('color-picker',{staticClass:\"option\",attrs:{\"color\":_vm.borderColour},on:{\"update:color\":function($event){_vm.borderColour=$event}}})],1),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.shapeSelect === 'paint-brush'),expression:\"shapeSelect === 'paint-brush'\"}]},[_vm._v(\"Brush size\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.brushSize),expression:\"brushSize\"},{name:\"show\",rawName:\"v-show\",value:(_vm.shapeSelect === 'paint-brush'),expression:\"shapeSelect === 'paint-brush'\"}],staticStyle:{\"max-width\":\"100px\"},attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.brushSize)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.brushSize=$event.target.value}}})]):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"17a953f2-vue-loader-template\\\"}!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./draw.vue?vue&type=template&id=57300176&scoped=true&\"","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--12-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./main.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--12-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./main.vue?vue&type=script&lang=ts&\"","import { GlobalPoint } from \"@/game/geom\";\nimport { BaseRect } from \"@/game/shapes/baserect\";\nimport { gameStore } from \"@/game/store\";\nimport { g2l } from \"@/game/units\";\nimport { getFogColour } from \"@/game/utils\";\n\nexport class Rect extends BaseRect {\n    type = \"rect\";\n    constructor(topleft: GlobalPoint, w: number, h: number, fillColour?: string, strokeColour?: string, uuid?: string) {\n        super(topleft, w, h, fillColour, strokeColour, uuid);\n    }\n    asDict() {\n        return super.getBaseDict();\n    }\n    draw(ctx: CanvasRenderingContext2D) {\n        super.draw(ctx);\n        if (this.fillColour === \"fog\") ctx.fillStyle = getFogColour();\n        else ctx.fillStyle = this.fillColour;\n        const z = gameStore.zoomFactor;\n        const loc = g2l(this.refPoint);\n        ctx.fillRect(loc.x, loc.y, this.w * z, this.h * z);\n        if (this.strokeColour !== \"rgba(0, 0, 0, 0)\") {\n            ctx.strokeStyle = this.strokeColour;\n            ctx.lineWidth = 5;\n            ctx.strokeRect(loc.x, loc.y, this.w * z, this.h * z);\n        }\n    }\n}\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./filter.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./filter.vue?vue&type=script&lang=ts&\"","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./selectcontext.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./selectcontext.vue?vue&type=script&lang=ts&\"","import { Ray, Vector } from \"@/game/geom\";\nimport { Layer } from \"@/game/layers/layer\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { Settings } from \"@/game/settings\";\nimport { gameStore } from \"@/game/store\";\nimport { g2l, g2lr, g2lx, g2ly } from \"@/game/units\";\nimport { TriangulationTarget } from '../visibility/te/pa';\nimport { computeVisibility } from \"../visibility/te/te\";\n\nexport class FOWPlayersLayer extends Layer {\n    isVisionLayer: boolean = true;\n\n    draw(): void {\n        if (!this.valid) {\n            // console.time(\"VI\");\n            const ctx = this.ctx;\n\n            if (!gameStore.fowLOS || Settings.skipPlayerFOW) {\n                ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n                this.valid = true;\n                return;\n            }\n\n            ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n\n            const originalOperation = ctx.globalCompositeOperation;\n\n            ctx.fillStyle = \"rgba(0, 0, 0, 1)\";\n\n            // For the DM this is done at the end of this function.  TODO: why the split up ???\n            // This was done in commit be1e65cff1e7369375fe11cfa1643fab1d11beab.\n            if (!gameStore.IS_DM) super.draw(!gameStore.fullFOW);\n\n            // Then cut out all the player vision auras\n            const maxLength = ctx.canvas.width + ctx.canvas.height;\n\n            for (const tokenId of gameStore.activeTokens) {\n                const token = layerManager.UUIDMap.get(tokenId);\n                if (token === undefined) continue;\n                const center = token.center();\n                const lcenter = g2l(center);\n                if (gameStore.visionMode === \"bvh\") {\n                    ctx.beginPath();\n                    let lastArcAngle = -1;\n\n                    for (let angle = 0; angle < 2 * Math.PI; angle += (Settings.angleSteps / 2 / 180) * Math.PI) {\n                        const cos = Math.cos(angle);\n                        const sin = Math.sin(angle);\n                        // Check if there is a hit with one of the nearby light blockers.\n                        const lightRay = new Ray(center, new Vector(cos, sin));\n                        const hitResult = gameStore.BV.intersect(lightRay);\n\n                        // We can move on to the next angle if nothing was hit.\n                        if (!hitResult.hit) {\n                            // If an earlier hit caused the aura to leave the arc, we need to go back to the arc\n                            if (lastArcAngle === -1) {\n                                // Draw a line from the last non arc location back to the arc\n                                ctx.lineTo(lcenter.x + maxLength * cos, lcenter.y + maxLength * sin);\n                                // Set the start of a new arc beginning at the current angle\n                                lastArcAngle = angle;\n                            }\n                            continue;\n                        }\n                        // If hit , first finish any ongoing arc, then move to the intersection point\n                        if (lastArcAngle !== -1) {\n                            ctx.arc(lcenter.x, lcenter.y, maxLength, lastArcAngle, angle);\n                            lastArcAngle = -1;\n                        }\n                        ctx.lineTo(g2lx(hitResult.intersect.x), g2ly(hitResult.intersect.y));\n                    }\n\n                    // Finish the final arc.\n                    if (lastArcAngle !== -1) ctx.arc(lcenter.x, lcenter.y, maxLength, lastArcAngle, 2 * Math.PI);\n                    else ctx.closePath();\n                    ctx.fill();\n                } else {\n                    if (true) {\n                        // Add a gradient vision dropoff\n                        const gradient = ctx.createRadialGradient(\n                            lcenter.x,\n                            lcenter.y,\n                            g2lr(gameStore.visionRangeMin),\n                            lcenter.x,\n                            lcenter.y,\n                            g2lr(gameStore.visionRangeMax),\n                        );\n                        gradient.addColorStop(0, \"rgba(0, 0, 0, 1)\");\n                        gradient.addColorStop(1, \"rgba(0, 0, 0, 0)\");\n                        ctx.fillStyle = gradient;\n                    } else {\n                        ctx.fillStyle = \"rgba(0, 0, 0, 1)\";\n                    }\n                    try {\n                        const polygon = computeVisibility(token.center(), TriangulationTarget.VISION);\n                        ctx.beginPath();\n                        ctx.moveTo(g2lx(polygon[0][0]), g2ly(polygon[0][1]));\n                        for (const point of polygon) ctx.lineTo(g2lx(point[0]), g2ly(point[1]));\n                        ctx.closePath();\n                        ctx.fill();\n                    } catch {}\n                }\n            }\n\n            // For the players this is done at the beginning of this function.  TODO: why the split up ???\n            // This was done in commit be1e65cff1e7369375fe11cfa1643fab1d11beab.\n            if (gameStore.IS_DM) super.draw(!gameStore.fullFOW);\n\n            ctx.globalCompositeOperation = originalOperation;\n            // console.timeEnd(\"VI\");\n        }\n    }\n}\n","import { socket } from \"@/game/api/socket\";\nimport { ServerShape } from \"@/game/comm/types/shapes\";\nimport { EventBus } from \"@/game/event-bus\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { Shape } from \"@/game/shapes/shape\";\nimport { createShapeFromDict } from \"@/game/shapes/utils\";\nimport { gameStore } from \"@/game/store\";\nimport { g2lx, g2ly } from \"@/game/units\";\nimport { TriangulationTarget } from '../visibility/te/pa';\n\nexport class Layer {\n    name: string;\n    width: number;\n    height: number;\n    canvas: HTMLCanvasElement;\n    ctx: CanvasRenderingContext2D;\n\n    selectable: boolean = false;\n    playerEditable: boolean = false;\n    isVisionLayer: boolean = false;\n\n    // When set to false, the layer will be redrawn on the next tick\n    valid: boolean = false;\n    // The collection of shapes that this layer contains.\n    // These are ordered on a depth basis.\n    shapes: Shape[] = [];\n\n    // Collection of shapes that are currently selected\n    selection: Shape[] = [];\n\n    // Extra selection highlighting settings\n    selectionColor = \"#CC0000\";\n    selectionWidth = 2;\n\n    constructor(canvas: HTMLCanvasElement, name: string) {\n        this.canvas = canvas;\n        this.name = name;\n        this.width = canvas.width;\n        this.height = canvas.height;\n        this.ctx = canvas.getContext(\"2d\")!;\n    }\n\n    invalidate(skipLightUpdate: boolean): void {\n        this.valid = false;\n        if (!skipLightUpdate) {\n            layerManager.invalidateLight();\n        }\n    }\n\n    addShape(shape: Shape, sync: boolean, temporary?: boolean, invalidate = true): void {\n        if (temporary === undefined) temporary = false;\n        shape.layer = this.name;\n        this.shapes.push(shape);\n        layerManager.UUIDMap.set(shape.uuid, shape);\n        shape.checkVisionSources(invalidate);\n        shape.setMovementBlock(shape.movementObstruction, invalidate);\n        if (shape.ownedBy(gameStore.username) && shape.isToken) gameStore.ownedtokens.push(shape.uuid);\n        if (shape.annotation.length) gameStore.annotations.push(shape.uuid);\n        if (sync) socket.emit(\"Shape.Add\", { shape: shape.asDict(), temporary });\n        if (invalidate) this.invalidate(!sync);\n    }\n\n    setShapes(shapes: ServerShape[]): void {\n        for (const serverShape of shapes) {\n            const shape = createShapeFromDict(serverShape);\n            if (shape === undefined) {\n                console.log(`Shape with unknown type ${serverShape.type_} could not be added`);\n                return;\n            }\n            this.addShape(shape, false, false, false);\n        }\n        this.clearSelection(); // TODO: Fix keeping selection on those items that are not moved.\n        this.invalidate(false);\n    }\n\n    removeShape(shape: Shape, sync: boolean, temporary?: boolean) {\n        if (temporary === undefined) temporary = false;\n        this.shapes.splice(this.shapes.indexOf(shape), 1);\n\n        if (sync) socket.emit(\"Shape.Remove\", { shape: shape.asDict(), temporary });\n        const lsI = gameStore.visionSources.findIndex(ls => ls.shape === shape.uuid);\n        const lbI = gameStore.visionBlockers.findIndex(ls => ls === shape.uuid);\n\n        const mbI = gameStore.movementblockers.findIndex(ls => ls === shape.uuid);\n        const anI = gameStore.annotations.findIndex(ls => ls === shape.uuid);\n        if (lsI >= 0) gameStore.visionSources.splice(lsI, 1);\n        if (lbI >= 0) gameStore.visionBlockers.splice(lbI, 1);\n        if (mbI >= 0) gameStore.movementblockers.splice(mbI, 1);\n        if (anI >= 0) gameStore.annotations.splice(anI, 1);\n\n        const annotationIndex = gameStore.annotations.indexOf(shape.uuid);\n        if (annotationIndex >= 0) gameStore.annotations.splice(annotationIndex, 1);\n\n        const ownedIndex = gameStore.ownedtokens.indexOf(shape.uuid);\n        if (ownedIndex >= 0) gameStore.ownedtokens.splice(ownedIndex, 1);\n\n        layerManager.UUIDMap.delete(shape.uuid);\n\n        const index = this.selection.indexOf(shape);\n        if (index >= 0) this.selection.splice(index, 1);\n        if (lbI >= 0) gameStore.deleteFromTriag({ target: TriangulationTarget.VISION, points: shape.points, standalone: true });\n        if (mbI >= 0) gameStore.deleteFromTriag({ target: TriangulationTarget.MOVEMENT, points: shape.points, standalone: true });\n        this.invalidate(!sync);\n    }\n\n    clear(): void {\n        this.ctx.clearRect(0, 0, this.width, this.height);\n    }\n\n    clearSelection(): void {\n        this.selection = [];\n        EventBus.$emit(\"SelectionInfo.Shape.Set\", null);\n    }\n\n    draw(doClear?: boolean): void {\n        if (!this.valid) {\n            const ctx = this.ctx;\n            const ogOP = ctx.globalCompositeOperation;\n            doClear = doClear === undefined ? true : doClear;\n\n            if (doClear) this.clear();\n\n            const state = this;\n\n            // We iteratre twice over all shapes\n            // First to draw the auras and a second time to draw the shapes themselves\n            // Otherwise auras from one shape could be overlapping another shape itself.\n\n            this.shapes.forEach(shape => {\n                if (shape.options.has(\"skipDraw\") && shape.options.get(\"skipDraw\")) return;\n                if (layerManager.getLayer() === undefined) return;\n                if (!shape.visibleInCanvas(state.canvas)) return;\n                if (state.name === \"fow\" && shape.visionObstruction && layerManager.getLayer()!.name !== state.name)\n                    return;\n                shape.drawAuras(ctx);\n            });\n            this.shapes.forEach(shape => {\n                if (shape.options.has(\"skipDraw\") && shape.options.get(\"skipDraw\")) return;\n                if (shape.labels.length === 0 && gameStore.filterNoLabel) return;\n                if (\n                    shape.labels.length &&\n                    gameStore.labelFilters.length &&\n                    !shape.labels.some(l => gameStore.labelFilters.includes(l.uuid))\n                )\n                    return;\n                if (layerManager.getLayer() === undefined) return;\n                if (!shape.visibleInCanvas(state.canvas)) return;\n                if (state.name === \"fow\" && shape.visionObstruction && layerManager.getLayer()!.name !== state.name)\n                    return;\n                shape.draw(ctx);\n            });\n\n            if (this.selection != null) {\n                ctx.fillStyle = this.selectionColor;\n                ctx.strokeStyle = this.selectionColor;\n                ctx.lineWidth = this.selectionWidth;\n                const z = gameStore.zoomFactor;\n                this.selection.forEach(sel => {\n                    ctx.globalCompositeOperation = sel.globalCompositeOperation;\n                    const bb = sel.getBoundingBox();\n                    // TODO: REFACTOR THIS TO Shape.drawSelection(ctx);\n                    ctx.strokeRect(g2lx(bb.topLeft.x), g2ly(bb.topLeft.y), bb.w * z, bb.h * z);\n\n                    for (const p of sel.points) {\n                        ctx.beginPath();\n                        ctx.arc(g2lx(p[0]), g2ly(p[1]), 3, 0, 2 * Math.PI);\n                        ctx.fill();\n                    }\n                    ctx.beginPath();\n                    ctx.moveTo(g2lx(sel.points[0][0]), g2ly(sel.points[0][1]));\n                    for (let i = 1; i <= sel.points.length; i++) {\n                        const vertex = sel.points[i % sel.points.length];\n                        ctx.lineTo(g2lx(vertex[0]), g2ly(vertex[1]));\n                    }\n                    ctx.stroke();\n                });\n            }\n            ctx.globalCompositeOperation = ogOP;\n            this.valid = true;\n        }\n    }\n\n    moveShapeOrder(shape: Shape, destinationIndex: number, sync: boolean): void {\n        const oldIdx = this.shapes.indexOf(shape);\n        if (oldIdx === destinationIndex) return;\n        this.shapes.splice(oldIdx, 1);\n        this.shapes.splice(destinationIndex, 0, shape);\n        if (sync) socket.emit(\"Shape.Order.Set\", { shape: shape.asDict(), index: destinationIndex });\n        this.invalidate(true);\n    }\n}\n","import { gameStore } from \"@/game/store\";\nimport { l2g } from \"@/game/units\";\nimport { getMouse } from \"@/game/utils\";\n\nexport function scrollZoom(e: WheelEvent) {\n    if (!e.target || !(<HTMLElement>e.target).tagName || (<HTMLElement>e.target).tagName !== \"CANVAS\") return;\n    let delta: number;\n    delta = Math.sign(e.deltaY) * -1;\n    gameStore.updateZoom({ newZoomDisplay: gameStore.zoomDisplay - 0.1 * delta, zoomLocation: l2g(getMouse(e)) });\n}\n","import { render, staticRenderFns } from \"./filter.vue?vue&type=template&id=dca395d6&scoped=true&\"\nimport script from \"./filter.vue?vue&type=script&lang=ts&\"\nexport * from \"./filter.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./filter.vue?vue&type=style&index=0&lang=css&\"\nimport style1 from \"./filter.vue?vue&type=style&index=1&id=dca395d6&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"dca395d6\",\n  null\n  \n)\n\nexport default component.exports","import { GlobalPoint, LocalPoint, Vector } from \"@/game/geom\";\nimport { BoundingRect } from \"@/game/shapes/boundingrect\";\nimport { Shape } from \"@/game/shapes/shape\";\nimport { gameStore } from \"@/game/store\";\nimport { calculateDelta } from \"@/game/ui/tools/utils\";\nimport { g2lx, g2ly, l2g, l2gx, l2gy } from \"@/game/units\";\n\nexport abstract class BaseRect extends Shape {\n    w: number;\n    h: number;\n    constructor(topleft: GlobalPoint, w: number, h: number, fillColour?: string, strokeColour?: string, uuid?: string) {\n        super(topleft, fillColour, strokeColour, uuid);\n        this.w = w;\n        this.h = h;\n    }\n    getBaseDict() {\n        return Object.assign(super.getBaseDict(), {\n            width: this.w,\n            height: this.h,\n        });\n    }\n    getBoundingBox() {\n        return new BoundingRect(this.refPoint, this.w, this.h);\n    }\n\n    get points() {\n        if (this.w === 0 || this.h === 0) return [[this.refPoint.x, this.refPoint.y]];\n        // note to self: topright and botleft are swapped because I'm retarded.\n        const topright = this.refPoint.add(new Vector(0, this.h));\n        const botright = this.refPoint.add(new Vector(this.w, this.h));\n        const botleft = this.refPoint.add(new Vector(this.w, 0));\n        return [\n            [this.refPoint.x, this.refPoint.y],\n            [topright.x, topright.y],\n            [botright.x, botright.y],\n            [botleft.x, botleft.y],\n        ];\n    }\n\n    contains(point: GlobalPoint): boolean {\n        return (\n            this.refPoint.x <= point.x &&\n            this.refPoint.x + this.w >= point.x &&\n            this.refPoint.y <= point.y &&\n            this.refPoint.y + this.h >= point.y\n        );\n    }\n    center(): GlobalPoint;\n    center(centerPoint: GlobalPoint): void;\n    center(centerPoint?: GlobalPoint): GlobalPoint | void {\n        if (centerPoint === undefined) return this.refPoint.add(new Vector(this.w / 2, this.h / 2));\n        this.refPoint = new GlobalPoint(centerPoint.x - this.w / 2, centerPoint.y - this.h / 2);\n    }\n\n    visibleInCanvas(canvas: HTMLCanvasElement): boolean {\n        if (super.visibleInCanvas(canvas)) return true;\n        const coreVisible = !(\n            g2lx(this.refPoint.x) > canvas.width ||\n            g2ly(this.refPoint.y) > canvas.height ||\n            g2lx(this.refPoint.x + this.w) < 0 ||\n            g2ly(this.refPoint.y + this.h) < 0\n        );\n        if (coreVisible) return true;\n        return false;\n    }\n    snapToGrid() {\n        const gs = gameStore.gridSize;\n        const center = this.center();\n        const mx = center.x;\n        const my = center.y;\n\n        let targetX;\n        let targetY;\n\n        if ((this.w / gs) % 2 === 0) {\n            targetX = Math.round(mx / gs) * gs - this.w / 2;\n        } else {\n            targetX = (Math.round((mx + gs / 2) / gs) - 1 / 2) * gs - this.w / 2;\n        }\n        if ((this.h / gs) % 2 === 0) {\n            targetY = Math.round(my / gs) * gs - this.h / 2;\n        } else {\n            targetY = (Math.round((my + gs / 2) / gs) - 1 / 2) * gs - this.h / 2;\n        }\n\n        const delta = calculateDelta(new Vector(targetX - this.refPoint.x, targetY - this.refPoint.y), this);\n        this.refPoint = this.refPoint.add(delta);\n\n        this.invalidate(false);\n    }\n    resizeToGrid() {\n        const gs = gameStore.gridSize;\n        this.refPoint = new GlobalPoint(Math.round(this.refPoint.x / gs) * gs, Math.round(this.refPoint.y / gs) * gs);\n        this.w = Math.max(Math.round(this.w / gs) * gs, gs);\n        this.h = Math.max(Math.round(this.h / gs) * gs, gs);\n        this.invalidate(false);\n    }\n    resize(resizePoint: number, point: LocalPoint) {\n        const z = gameStore.zoomFactor;\n        switch (resizePoint) {\n            case 0: {\n                this.w = g2lx(this.refPoint.x) + this.w * z - point.x;\n                this.h = g2ly(this.refPoint.y) + this.h * z - point.y;\n                this.refPoint = l2g(point);\n                break;\n            }\n            case 1: {\n                this.w = g2lx(this.refPoint.x) + this.w * z - point.x;\n                this.h = point.y - g2ly(this.refPoint.y);\n                this.refPoint = new GlobalPoint(l2gx(point.x), this.refPoint.y);\n                break;\n            }\n            case 2: {\n                this.w = point.x - g2lx(this.refPoint.x);\n                this.h = point.y - g2ly(this.refPoint.y);\n                break;\n            }\n            case 3: {\n                this.w = point.x - g2lx(this.refPoint.x);\n                this.h = g2ly(this.refPoint.y) + this.h * z - point.y;\n                this.refPoint = new GlobalPoint(this.refPoint.x, l2gy(point.y));\n                break;\n            }\n        }\n\n        this.w /= z;\n        this.h /= z;\n\n        if (this.w < 0) {\n            this.refPoint = this.refPoint.add(new Vector(this.w, 0));\n            this.w = Math.abs(this.w);\n        }\n        if (this.h < 0) {\n            this.refPoint = this.refPoint.add(new Vector(0, this.h));\n            this.h = Math.abs(this.h);\n        }\n    }\n}\n","import { render, staticRenderFns } from \"./select.vue?vue&type=template&id=2196c042&\"\nimport script from \"./select.vue?vue&type=script&lang=ts&\"\nexport * from \"./select.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./selection_info.vue?vue&type=style&index=0&id=43d09857&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./selection_info.vue?vue&type=style&index=0&id=43d09857&scoped=true&lang=css&\"","import { render, staticRenderFns } from \"./main.vue?vue&type=template&id=61eb1455&scoped=true&\"\nimport script from \"./main.vue?vue&type=script&lang=ts&\"\nexport * from \"./main.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./main.vue?vue&type=style&index=0&id=61eb1455&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"61eb1455\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./createtoken_modal.vue?vue&type=style&index=0&id=73816298&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./createtoken_modal.vue?vue&type=style&index=0&id=73816298&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"AssetManager\"}},[_c('div',{attrs:{\"id\":\"titlebar\"}},[_vm._v(\"Asset Manager\")]),_c('div',{attrs:{\"id\":\"main\"}},[_c('div',{attrs:{\"id\":\"assets\"},on:{\"dragover\":function($event){$event.preventDefault();return _vm.moveDrag($event)},\"drop\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.stopDrag($event, _vm.currentFolder)}}},[_c('div',{attrs:{\"id\":\"breadcrumbs\"}},[_c('div',[_vm._v(\"/\")]),_vm._l((_vm.path),function(dir){return _c('div',{key:dir},[_vm._v(_vm._s(_vm.idMap.get(dir).name))])})],2),_c('div',{attrs:{\"id\":\"actionbar\"}},[_c('input',{attrs:{\"id\":\"files\",\"type\":\"file\",\"multiple\":\"\",\"hidden\":\"\"},on:{\"change\":function($event){return _vm.upload()}}}),_c('div',{attrs:{\"title\":\"Create folder\"},on:{\"click\":_vm.createDirectory}},[_c('i',{staticClass:\"fas fa-plus-square\"})]),_c('div',{attrs:{\"title\":\"Upload files\"},on:{\"click\":_vm.prepareUpload}},[_c('i',{staticClass:\"fas fa-upload\"})])]),_c('div',{attrs:{\"id\":\"explorer\"}},[(_vm.path.length)?_c('div',{staticClass:\"inode folder\",on:{\"dblclick\":function($event){return _vm.changeDirectory(-1)},\"dragover\":function($event){$event.preventDefault();return _vm.moveDrag($event)},\"dragleave\":function($event){$event.preventDefault();return _vm.leaveDrag($event)},\"drop\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.stopDrag($event, _vm.parentFolder)}}},[_c('i',{staticClass:\"fas fa-folder\",staticStyle:{\"font-size\":\"50px\"}}),_c('div',{staticClass:\"title\"},[_vm._v(\"..\")])]):_vm._e(),_vm._l((_vm.folders),function(key){return _c('div',{key:key,staticClass:\"inode folder\",class:{'inode-selected': _vm.selected.includes(key)},attrs:{\"draggable\":\"true\"},on:{\"click\":function($event){return _vm.select($event, key)},\"dblclick\":function($event){return _vm.changeDirectory(key)},\"contextmenu\":function($event){$event.preventDefault();return _vm.$refs.cm.open($event, key)},\"dragstart\":function($event){return _vm.startDrag($event, key)},\"dragover\":function($event){$event.preventDefault();return _vm.moveDrag($event)},\"dragleave\":function($event){$event.preventDefault();return _vm.leaveDrag($event)},\"drop\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.stopDrag($event, key)}}},[_c('i',{staticClass:\"fas fa-folder\",staticStyle:{\"font-size\":\"50px\"}}),_c('div',{staticClass:\"title\"},[_vm._v(_vm._s(_vm.idMap.get(key).name))])])}),_vm._l((_vm.files),function(file){return _c('div',{key:file,staticClass:\"inode file\",class:{'inode-selected': _vm.selected.includes(file)},attrs:{\"draggable\":\"true\"},on:{\"click\":function($event){return _vm.select($event, file)},\"contextmenu\":function($event){$event.preventDefault();return _vm.$refs.cm.open($event, file)},\"dragstart\":function($event){return _vm.startDrag($event, file)}}},[_c('img',{attrs:{\"src\":'/static/assets/' + _vm.idMap.get(file).file_hash,\"width\":\"50\"}}),_c('div',{staticClass:\"title\"},[_vm._v(_vm._s(_vm.idMap.get(file).name))])])})],2)]),(_vm.firstSelectedFile)?_c('div',{attrs:{\"id\":\"asset-details\"}},[_c('div',{attrs:{\"id\":\"asset-detail-title\"}},[_vm._v(_vm._s(_vm.firstSelectedFile.name))]),_c('img',{attrs:{\"src\":'/static/assets/' + _vm.firstSelectedFile.file_hash}})]):_vm._e()]),_c('AssetContextMenu',{ref:\"cm\"}),_c('Prompt',{ref:\"prompt\"}),_c('ConfirmDialog',{ref:\"confirm\"})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"17a953f2-vue-loader-template\\\"}!../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./manager.vue?vue&type=template&id=5b0def98&\"","\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\n\nimport ContextMenu from \"@/core/components/contextmenu.vue\";\n\nimport { socket } from \"@/game/api/socket\";\nimport { EventBus } from \"@/game/event-bus\";\nimport { gameStore } from \"@/game/store\";\nimport { l2gx, l2gy } from \"@/game/units\";\n\n@Component({\n    components: {\n        ContextMenu,\n    },\n})\nexport default class SelectContext extends Vue {\n    visible = false;\n    x = 0;\n    y = 0;\n\n    get IS_DM(): boolean {\n        return gameStore.IS_DM;\n    }\n\n    open(event: MouseEvent) {\n        this.visible = true;\n        this.x = event.pageX;\n        this.y = event.pageY;\n        this.$nextTick(() => (<HTMLElement>this.$children[0].$el).focus());\n    }\n    close() {\n        this.visible = false;\n    }\n    bringPlayers() {\n        if (!gameStore.IS_DM) return;\n        socket.emit(\"Players.Bring\", { x: l2gx(this.x), y: l2gy(this.y) });\n        this.close();\n    }\n    createToken() {\n        (<any>this.$parent.$parent.$refs.createtokendialog).open(this.x, this.y);\n        this.close();\n    }\n    showInitiative() {\n        EventBus.$emit(\"Initiative.Show\");\n        this.close();\n    }\n}\n","import Axios from \"axios\";\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\nimport { Route } from \"vue-router\";\n\nimport { coreStore } from \"@/core/store\";\n\nComponent.registerHooks([\"beforeRouteEnter\"]);\n\n@Component({})\nexport default class Logout extends Vue {\n    beforeRouteEnter(to: Route, from: Route, next: ({}) => {}) {\n        Axios.post(\"/api/logout\").then(() => {\n            coreStore.setAuthenticated(false);\n            coreStore.setUsername(\"\");\n            next({ path: \"/auth/login\" });\n        });\n    }\n}\n","import { getModule, Module, Mutation, VuexModule } from \"vuex-module-decorators\";\n\nimport { rootStore } from \"@/store\";\n\nexport interface CoreState {\n    authenticated: boolean;\n    initialized: boolean;\n    username: string;\n}\n\n@Module({ dynamic: true, store: rootStore, name: \"core\" })\nclass CoreStore extends VuexModule implements CoreState {\n    authenticated = false;\n    initialized = false;\n    username = \"\";\n\n    @Mutation\n    setAuthenticated(auth: boolean) {\n        this.authenticated = auth;\n    }\n\n    @Mutation\n    setInitialized(init: boolean) {\n        this.initialized = init;\n    }\n\n    @Mutation\n    setUsername(username: string) {\n        this.username = username;\n    }\n}\n\nexport const coreStore = getModule(CoreStore);\n","import Vue from \"vue\";\n\nimport App from \"@/App.vue\";\nimport { router } from \"@/router\";\nimport { rootStore } from \"@/store\";\n\nVue.config.productionTip = false;\nVue.config.devtools = true;\nVue.config.performance = true;\n\nexport const app = new Vue({\n    router,\n    store: rootStore,\n    render: h => h(App),\n}).$mount(\"#app\");\n\n(<any>window).app = app;\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\n\n@Component({\n    props: [\"visible\", \"left\", \"top\"],\n})\nexport default class ContextMenu extends Vue {}\n","import Axios, { AxiosError, AxiosResponse } from \"axios\";\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\nimport { Route } from \"vue-router\";\n\n@Component({ template: \"\" })\nexport default class Initiative extends Vue {\n    beforeRouteEnter(to: Route, from: Route, next: ({}) => {}) {\n        Axios.post(\"/api/invite\", {\n            code: to.params.code,\n        })\n            .then((response: AxiosResponse) => {\n                next({ path: response.data.sessionUrl });\n            })\n            .catch((error: AxiosError) => {\n                console.error(\"Invitation code could not be redeemed\");\n                next({ path: \"/dashboard\" });\n            });\n    }\n}\n","import { render, staticRenderFns } from \"./prompt.vue?vue&type=template&id=0602c2e6&scoped=true&\"\nimport script from \"./prompt.vue?vue&type=script&lang=ts&\"\nexport * from \"./prompt.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./prompt.vue?vue&type=style&index=0&id=0602c2e6&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0602c2e6\",\n  null\n  \n)\n\nexport default component.exports","import { GlobalPoint } from \"@/game/geom\";\nimport { gameStore } from \"@/game/store\";\n\nimport { Edge } from \"./cdt\";\nimport { drawPolygon } from \"./draw\";\nimport { PA_CDT, TriangulationTarget } from \"./pa\";\nimport { Point, Sign, Triangle } from \"./tds\";\nimport { ccw, cw, orientation } from \"./triag\";\n\nexport function computeVisibility(q: GlobalPoint, target: TriangulationTarget, drawt?: boolean): number[][] {\n    if (drawt === undefined) drawt = gameStore.drawTEContour;\n    // console.time(\"CV\");\n    const Q: Point = [q.x, q.y];\n    const rawOutput: number[][] = [];\n    const triangle = PA_CDT[target].locate(Q, null).loc;\n    if (triangle === null) {\n        console.error(\"Triangle not found\");\n        return [];\n    }\n    // triangle.fill();\n    rawOutput.push(triangle.vertices[1]!.point!);\n    if (!triangle.isConstrained(0))\n        expandEdge(Q, triangle.vertices[2]!.point!, triangle.vertices[1]!.point!, triangle, 0, rawOutput);\n    rawOutput.push(triangle.vertices[2]!.point!);\n    if (!triangle.isConstrained(1))\n        expandEdge(Q, triangle.vertices[0]!.point!, triangle.vertices[2]!.point!, triangle, 1, rawOutput);\n    rawOutput.push(triangle.vertices[0]!.point!);\n    if (!triangle.isConstrained(2))\n        expandEdge(Q, triangle.vertices[1]!.point!, triangle.vertices[0]!.point!, triangle, 2, rawOutput);\n    // console.timeEnd(\"CV\");\n\n    if (drawt) drawPolygon(rawOutput, \"red\");\n\n    return rawOutput;\n}\n\nfunction expandEdge(\n    q: Point,\n    left: number[],\n    right: number[],\n    fh: Triangle,\n    index: number,\n    rawOutput: number[][],\n): void {\n    // fh.edge(index).draw();\n    const nfh = fh.neighbours[index]!;\n    // nfh.fill(\"rgba(255, 0, 0, 0.25)\");\n    const nIndex = nfh.indexT(fh);\n    const rIndex = ccw(nIndex);\n    const lIndex = cw(nIndex);\n    const nvh = nfh.vertices[nIndex]!;\n    const rvh = nfh.vertices[lIndex]!;\n    const lvh = nfh.vertices[rIndex]!;\n\n    const re: Edge = [nfh, rIndex];\n    const le: Edge = [nfh, lIndex];\n\n    const ro = orientation(q, right, nvh.point!);\n    const lo = orientation(q, left, nvh.point!);\n\n    // const ctx = layerManager.getLayer(\"draw\")!.ctx;\n    // ctx.beginPath();\n    // ctx.strokeStyle = \"red\";\n    // ctx.lineJoin = \"round\";\n    // ctx.moveTo(g2lx(q.x), g2ly(q.y));\n    // ctx.lineTo(g2lx(left[0]), g2ly(left[1]));\n    // ctx.moveTo(g2lx(q.x), g2ly(q.y));\n    // ctx.lineTo(g2lx(nvh[0]), g2ly(nvh[1]));\n    // ctx.strokeStyle = \"blue\";\n    // ctx.moveTo(g2lx(q.x), g2ly(q.y));\n    // ctx.lineTo(g2lx(right[0]), g2ly(right[1]));\n    // ctx.moveTo(g2lx(q.x), g2ly(q.y));\n    // ctx.lineTo(g2lx(nvh[0]), g2ly(nvh[1]));\n    // ctx.closePath();\n    // ctx.stroke();\n\n    // Right edge is seen if the new vertex is ccw of the right ray\n    if (ro === Sign.COUNTERCLOCKWISE) {\n        if (re[0].isConstrained(re[1])) {\n            // See if current right ray is rvh\n            if (right !== rvh.point!) rawOutput.push(raySegIntersection(q, right, nvh.point!, rvh.point!));\n            if (lo === Sign.COUNTERCLOCKWISE) rawOutput.push(raySegIntersection(q, left, nvh.point!, rvh.point!));\n        } else {\n            if (lo === Sign.COUNTERCLOCKWISE) return expandEdge(q, left, right, nfh, rIndex, rawOutput);\n            else expandEdge(q, nvh.point!, right, nfh, rIndex, rawOutput);\n        }\n    }\n\n    if (ro !== Sign.CLOCKWISE && lo !== Sign.COUNTERCLOCKWISE) {\n        rawOutput.push(nvh.point!);\n    }\n\n    if (lo === Sign.CLOCKWISE) {\n        if (le[0].isConstrained(le[1])) {\n            if (ro === Sign.CLOCKWISE) {\n                rawOutput.push(raySegIntersection(q, right, nvh.point!, lvh.point!));\n            }\n            if (left !== lvh.point!) {\n                rawOutput.push(raySegIntersection(q, left, nvh.point!, lvh.point!));\n            }\n            return;\n        } else {\n            if (ro === Sign.CLOCKWISE) {\n                return expandEdge(q, left, right, nfh, lIndex, rawOutput);\n            } else {\n                return expandEdge(q, left, nvh.point!, nfh, lIndex, rawOutput);\n            }\n        }\n    }\n}\n\nfunction raySegIntersection(q: Point, b: Point, s: Point, t: Point) {\n    const denominator = (t[1] - s[1]) * (b[0] - q[0]) - (t[0] - s[0]) * (b[1] - q[1]);\n    const ua = ((t[0] - s[0]) * (q[1] - s[1]) - (t[1] - s[1]) * (q[0] - s[0])) / denominator;\n    // const ub = ((b[0] - q.x) * (q.y - s[1]) - (b[1] - q.y) * (q.x - s[0])) / denominator;\n    const x = q[0] + ua * (b[0] - q[0]);\n    const y = q[1] + ua * (b[1] - q[1]);\n\n    return [x, y];\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.selected)?_c('div',{staticClass:\"tool-detail\",style:({'--detailRight': _vm.detailRight, '--detailArrow': _vm.detailArrow})},[_c('div',[_vm._v(\"#X\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.xCount),expression:\"xCount\"}],attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.xCount)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.xCount=$event.target.value}}}),_c('div',[_vm._v(\"#Y\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.yCount),expression:\"yCount\"}],attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.yCount)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.yCount=$event.target.value}}})]):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"17a953f2-vue-loader-template\\\"}!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./map.vue?vue&type=template&id=2104f147&\"","import { render, staticRenderFns } from \"./edit_dialog.vue?vue&type=template&id=23de098e&scoped=true&\"\nimport script from \"./edit_dialog.vue?vue&type=script&lang=ts&\"\nexport * from \"./edit_dialog.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./edit_dialog.vue?vue&type=style&index=0&id=23de098e&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"23de098e\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('transition',{attrs:{\"name\":\"modal\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.visible),expression:\"visible\"}],staticClass:\"mask\",class:{'modal-mask': _vm.mask, 'dialog-mask': !_vm.mask},on:{\"click\":_vm.close,\"dragover\":function($event){$event.preventDefault();return _vm.dragOver($event)}}},[_c('div',{ref:\"container\",staticClass:\"modal-container\",style:({'background-color': _vm.colour}),on:{\"click\":function($event){$event.stopPropagation();}}},[_vm._t(\"header\",null,{\"dragStart\":_vm.dragStart,\"dragEnd\":_vm.dragEnd}),_vm._t(\"default\")],2)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"17a953f2-vue-loader-template\\\"}!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./modal.vue?vue&type=template&id=c2851f0e&scoped=true&\"","export class Settings {\n    static angleSteps = 4;\n    static drawAngleLines = false;\n    static drawFirstLightHit = false;\n    static skipPlayerFOW = false;\n    static skipLightFOW = false;\n\n    static tempFill: string = \"fog\";\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport axios, { AxiosError, AxiosResponse } from \"axios\";\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\n\nimport { coreStore } from \"@/core/store\";\n\n@Component\nexport default class Login extends Vue {\n    username = \"\";\n    password = \"\";\n    error = \"\";\n\n    login() {\n        axios\n            .post(\"/api/login\", {\n                username: this.username,\n                password: this.password,\n            })\n            .then((response: AxiosResponse) => {\n                coreStore.setUsername(this.username);\n                coreStore.setAuthenticated(true);\n                this.$router.push(<string>this.$route.query.redirect || \"/\");\n            })\n            .catch((error: AxiosError) => {\n                if (error.response) this.error = error.response.statusText;\n                else this.error = \"Unknown error occured\";\n            });\n    }\n\n    register() {\n        axios\n            .post(\"/api/register\", {\n                username: this.username,\n                password: this.password,\n            })\n            .then((response: AxiosResponse) => {\n                coreStore.setUsername(this.username);\n                coreStore.setAuthenticated(true);\n                this.$router.push(<string>this.$route.query.redirect || \"/\");\n            })\n            .catch((error: AxiosError) => {\n                if (error.response) this.error = error.response.statusText;\n                else this.error = \"Unknown error occured\";\n            });\n    }\n\n    focusin(event: { target?: { nextElementSibling?: HTMLElement } }) {\n        if (event.target && event.target.nextElementSibling) {\n            const span = event.target.nextElementSibling;\n            span.style.opacity = \"0\";\n        }\n    }\n\n    focusout(event: { target?: { nextElementSibling?: HTMLElement } }) {\n        if (event.target && event.target.nextElementSibling) {\n            const span = event.target.nextElementSibling;\n            span.style.opacity = \"1\";\n        }\n    }\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('modal',{attrs:{\"visible\":_vm.visible},on:{\"close\":function($event){_vm.visible = false}},scopedSlots:_vm._u([{key:\"header\",fn:function(m){return _c('div',{staticClass:\"modal-header\",attrs:{\"draggable\":\"true\"},on:{\"dragstart\":m.dragStart,\"dragend\":m.dragEnd}},[_vm._v(\"Create basic token\")])}}])},[_c('div',{staticClass:\"modal-body\"},[_c('label',{attrs:{\"for\":\"createtokendialog-text\"}},[_vm._v(\"Text\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.text),expression:\"text\"}],attrs:{\"type\":\"text\",\"id\":\"createtokendialog-name\"},domProps:{\"value\":(_vm.text)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.text=$event.target.value}}}),_c('label',[_vm._v(\"Colours\")]),_c('div',{staticClass:\"colours\"},[_c('span',[_vm._v(\"Fill:\")]),_c('color-picker',{attrs:{\"color\":_vm.fillColour},on:{\"update:color\":function($event){_vm.fillColour=$event}}}),_c('span',[_vm._v(\"Border:\")]),_c('color-picker',{attrs:{\"color\":_vm.borderColour},on:{\"update:color\":function($event){_vm.borderColour=$event}}})],1),_c('canvas',{ref:\"canvas\",attrs:{\"width\":\"100px\",\"height\":\"100px\"}})]),_c('div',{staticClass:\"modal-footer\"},[_c('button',{on:{\"click\":_vm.submit}},[_vm._v(\"Submit\")])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"17a953f2-vue-loader-template\\\"}!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./createtoken_modal.vue?vue&type=template&id=73816298&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c(\"div\")}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"17a953f2-vue-loader-template\\\"}!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tool.vue?vue&type=template&id=1e034b42&\"","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--12-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./game.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--12-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./game.vue?vue&type=script&lang=ts&\"","import Component from \"vue-class-component\";\n\nimport Tool from \"@/game/ui/tools/tool.vue\";\n\nimport { socket } from \"@/game/api/socket\";\nimport { GlobalPoint } from \"@/game/geom\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { Line } from \"@/game/shapes/line\";\nimport { Text } from \"@/game/shapes/text\";\nimport { gameStore } from \"@/game/store\";\nimport { l2g } from \"@/game/units\";\nimport { getMouse } from \"@/game/utils\";\n\n@Component\nexport class RulerTool extends Tool {\n    name = \"Ruler\";\n    active = false;\n    startPoint: GlobalPoint | null = null;\n    ruler: Line | null = null;\n    text: Text | null = null;\n    onMouseDown(event: MouseEvent) {\n        const layer = layerManager.getLayer(\"draw\");\n        if (layer === undefined) {\n            console.log(\"No draw layer!\");\n            return;\n        }\n        this.active = true;\n        this.startPoint = l2g(getMouse(event));\n        this.ruler = new Line(this.startPoint, this.startPoint, 3, gameStore.rulerColour);\n        this.text = new Text(this.startPoint.clone(), \"\", \"bold 20px serif\");\n        this.ruler.addOwner(gameStore.username);\n        this.text.addOwner(gameStore.username);\n        layer.addShape(this.ruler, true, true);\n        layer.addShape(this.text, true, true);\n    }\n    onMouseMove(event: MouseEvent) {\n        if (!this.active || this.ruler === null || this.startPoint === null || this.text === null) return;\n\n        const layer = layerManager.getLayer(\"draw\");\n        if (layer === undefined) {\n            console.log(\"No draw layer!\");\n            return;\n        }\n        const endPoint = l2g(getMouse(event));\n\n        this.ruler.endPoint = endPoint;\n        socket.emit(\"Shape.Update\", { shape: this.ruler!.asDict(), redraw: true, temporary: true });\n\n        const diffsign = Math.sign(endPoint.x - this.startPoint.x) * Math.sign(endPoint.y - this.startPoint.y);\n        const xdiff = Math.abs(endPoint.x - this.startPoint.x);\n        const ydiff = Math.abs(endPoint.y - this.startPoint.y);\n        const label =\n            Math.round((Math.sqrt(xdiff ** 2 + ydiff ** 2) * gameStore.unitSize) / gameStore.gridSize) + \" ft\";\n        const angle = Math.atan2(diffsign * ydiff, xdiff);\n        const xmid = Math.min(this.startPoint.x, endPoint.x) + xdiff / 2;\n        const ymid = Math.min(this.startPoint.y, endPoint.y) + ydiff / 2;\n        this.text.refPoint = new GlobalPoint(xmid, ymid);\n        this.text.text = label;\n        this.text.angle = angle;\n        socket.emit(\"Shape.Update\", { shape: this.text.asDict(), redraw: true, temporary: true });\n        layer.invalidate(true);\n    }\n    onMouseUp(event: MouseEvent) {\n        if (!this.active || this.ruler === null || this.startPoint === null || this.text === null) return;\n\n        const layer = layerManager.getLayer(\"draw\");\n        if (layer === undefined) {\n            console.log(\"No active layer!\");\n            return;\n        }\n        this.active = false;\n\n        layer.removeShape(this.ruler, true, true);\n        layer.removeShape(this.text, true, true);\n        layer.invalidate(true);\n        this.ruler = this.startPoint = this.text = null;\n    }\n}\n","import { render, staticRenderFns } from \"./modal.vue?vue&type=template&id=c2851f0e&scoped=true&\"\nimport script from \"./modal.vue?vue&type=script&lang=ts&\"\nexport * from \"./modal.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./modal.vue?vue&type=style&index=0&id=c2851f0e&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"c2851f0e\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./accordion.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./accordion.vue?vue&type=script&lang=ts&\"","import { layerManager } from \"@/game/layers/manager\";\nimport { gameStore } from \"@/game/store\";\nimport { equalPoints } from '@/game/utils';\nimport { CDT } from \"./cdt\";\nimport { Edge, Vertex } from './tds';\nimport { ccw, collinearBetween } from './triag';\n\n\nexport enum TriangulationTarget {\n    VISION = \"vision\",\n    MOVEMENT = \"movement\"\n}\n\n\nexport let PA_CDT = {\n    \"vision\": new CDT(),\n    \"movement\": new CDT(),\n};\n\nexport let POINT_VERTEX_MAP: {[key: string]: Vertex} = {};\n\nexport function triangulate(target: TriangulationTarget) {\n    console.warn(`RETRIANGULATING ${target}`);\n    console.time(\"TRI\");\n    const cdt = new CDT();\n\n    let shapes;\n    if (target === \"vision\") shapes = gameStore.visionBlockers;\n    else shapes = gameStore.movementblockers;\n\n    for (const sh of shapes) {\n        const shape = layerManager.UUIDMap.get(sh)!;\n        for (let i = 0; i < shape.points.length; i++) {\n            const pa = shape.points[i];\n            const pb = shape.points[(i + 1) % shape.points.length];\n            const {va, vb} = cdt.insertConstraint(pa, pb);\n            if (POINT_VERTEX_MAP[`${pa[0]}:${pa[1]}`] === undefined) POINT_VERTEX_MAP[`${pa[0]}:${pa[1]}`] = va;\n            if (POINT_VERTEX_MAP[`${pb[0]}:${pb[1]}`] === undefined) POINT_VERTEX_MAP[`${pb[0]}:${pb[1]}`] = vb;\n        }\n    }\n    // console.log(s);\n    // LEFT WALL\n    cdt.insertConstraint([-1e8, -1e8], [-1e8, 1e8]);\n    cdt.insertConstraint([-1e8, 1e8], [-1e11, 1e8]);\n    cdt.insertConstraint([-1e11, 1e8], [-1e11, -1e8]);\n    cdt.insertConstraint([-1e11, -1e8], [-1e8, -1e8]);\n    // TOP WALL\n    cdt.insertConstraint([-1e8, -1e8], [1e8, -1e8]);\n    cdt.insertConstraint([1e8, -1e8], [1e8, -1e11]);\n    cdt.insertConstraint([1e8, -1e11], [-1e8, -1e11]);\n    cdt.insertConstraint([-1e8, -1e11], [-1e8, -1e8]);\n    // RIGHT WALL\n    cdt.insertConstraint([1e8, -1e8], [1e8, 1e8]);\n    cdt.insertConstraint([1e8, 1e8], [1e11, 1e8]);\n    cdt.insertConstraint([1e11, 1e8], [1e11, -1e8]);\n    cdt.insertConstraint([1e11, -1e8], [1e8, -1e8]);\n    // BOT WALL\n    cdt.insertConstraint([-1e8, 1e8], [1e8, 1e8]);\n    cdt.insertConstraint([1e8, 1e8], [1e8, 1e11]);\n    cdt.insertConstraint([1e8, 1e11], [-1e8, 1e11]);\n    cdt.insertConstraint([-1e8, 1e11], [-1e8, 1e8]);\n    PA_CDT[target] = cdt;\n    (<any>window).CDT = PA_CDT;\n    (<any>window).PVM = POINT_VERTEX_MAP;\n    console.timeEnd(\"TRI\");\n}\n\nfunction deleteIntersectVertex(vertex: Vertex, from: number[], target: number[], queues: {vertices: Set<Vertex>; edges: Edge[], newConstraints: Vertex[][], triBridge: Vertex[]}): number[] {\n    queues.vertices.add(vertex);\n    const edges = [...vertex.getIncidentEdges()].filter(e => e.first!.constraints[e.second]);\n    let fixBridge: Vertex[] = [];\n    let nextIntersect: Vertex | null = null;\n    for (const edge of edges) {\n        const ccwv = edge.first!.vertices[ccw(edge.second)]!;\n        const ccwp = ccwv.point!;\n        if (equalPoints(ccwp, target)) queues.edges.push(edge);\n        else if(equalPoints(ccwp, from)) continue;\n        else if (collinearBetween(vertex.point!, ccwp, target)) {\n            if (nextIntersect !== null) console.warn(\"Multiple collinear vertices found?\");\n            queues.edges.push(edge);\n            nextIntersect = ccwv;\n        } else if (edges.length === 3) {\n            queues.edges.push(edge);\n            if (queues.triBridge.length === 0) queues.triBridge.push(ccwv);\n            else queues.newConstraints.push([queues.triBridge.pop()!, ccwv])\n        } else if (edges.length === 4) {\n            queues.edges.push(edge);\n            if (queues.vertices.has(ccwv)) {\n                for (let i=queues.newConstraints.length - 1; i >= 0; i--) {\n                    const [from_, to] = queues.newConstraints[i];\n                    if (from_ === vertex || to === vertex) {\n                        const brokenBridge = queues.newConstraints.splice(i, 1)[0];\n                        fixBridge = [...fixBridge, ...brokenBridge.filter(v => v !== vertex)];\n                    }\n                }\n            } else fixBridge.push(ccwv);\n        } else if (edges.length !== 2) {\n            console.warn(\":pikachu:\");\n            console.log(edges.length);\n        }\n    }\n    if (edges.length === 4) queues.newConstraints.push(fixBridge);\n    if (nextIntersect === null) return vertex.point!;\n    return deleteIntersectVertex(nextIntersect, vertex.point!, target, queues);\n}\n\nexport function deleteShapeFromTriag(target: TriangulationTarget, points: number[][]) {\n    console.time(\"DS\");\n    const cdt = PA_CDT[target];\n    const queues: {vertices: Set<Vertex>; edges: Edge[], newConstraints: Vertex[][], triBridge: Vertex[]} = {vertices: new Set(), edges: [], newConstraints: [], triBridge: []};\n    const np = points.length;\n    let from = points[np - 1];\n    for (const [i, point] of points.entries()) {\n        const n = points[(i + 1) % np];\n        const vertex = cdt.tds.vertices.find(v => equalPoints(v.point!, point))!;\n        from = deleteIntersectVertex(vertex, from, n, queues);\n    }\n    for (const edge of queues.edges) {\n        cdt.removeConstrainedEdgeDelaunay(edge.first!, edge.second);\n    }\n    for (const vertex of queues.vertices) {\n        cdt.removeVertex(vertex);\n    }\n    for (const [from_, to] of queues.newConstraints) cdt.insertConstraintV(from_, to);\n    console.timeEnd(\"DS\");\n}\n\nexport function addShapeToTriag(target: TriangulationTarget, points: number[][]) {\n    console.time(\"AS\");\n    const cdt = PA_CDT[target];\n    for (const [i, point] of points.entries()) {\n        const n = points[(i + 1) % points.length];\n        cdt.insertConstraint(point, n);\n    }\n    console.timeEnd(\"AS\");\n}\n","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tools.vue?vue&type=style&index=0&id=b6e1f51c&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tools.vue?vue&type=style&index=0&id=b6e1f51c&scoped=true&lang=css&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./main.vue?vue&type=style&index=0&id=61eb1455&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./main.vue?vue&type=style&index=0&id=61eb1455&scoped=true&lang=css&\"","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\n\nimport { Prop } from \"vue-property-decorator\";\n\nimport ColorPicker from \"@/core/components/colorpicker.vue\";\nimport Modal from \"@/core/components/modals/modal.vue\";\n\nimport { uuidv4 } from \"@/core/utils\";\nimport { socket } from \"@/game/api/socket\";\nimport { EventBus } from \"@/game/event-bus\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { Shape } from \"@/game/shapes/shape\";\nimport { gameStore } from \"@/game/store\";\n\n@Component({\n    components: {\n        Modal,\n        \"color-picker\": ColorPicker,\n    },\n})\nexport default class EditDialog extends Vue {\n    @Prop() shape!: Shape;\n\n    visible = false;\n\n    get owned(): boolean {\n        return this.shape.ownedBy();\n    }\n\n    mounted() {\n        EventBus.$on(\"EditDialog.Open\", (shape: Shape) => {\n            this.shape = shape;\n            this.visible = true;\n        });\n        EventBus.$on(\"EditDialog.AddLabel\", (label: string) => {\n            if (this.visible) {\n                this.shape.labels.push(gameStore.labels[label]);\n                this.updateShape(true);\n            }\n        });\n    }\n\n    beforeDestroy() {\n        EventBus.$off(\"EditDialog.Open\");\n        EventBus.$off(\"EditDialog.AddLabel\");\n    }\n\n    updated() {\n        this.addEmpty();\n    }\n\n    addEmpty() {\n        if (this.shape.owners[this.shape.owners.length - 1] !== \"\") this.shape.addOwner(\"\");\n        if (\n            !this.shape.trackers.length ||\n            this.shape.trackers[this.shape.trackers.length - 1].name !== \"\" ||\n            this.shape.trackers[this.shape.trackers.length - 1].value !== 0\n        )\n            this.shape.trackers.push({ uuid: uuidv4(), name: \"\", value: 0, maxvalue: 0, visible: false });\n        if (\n            !this.shape.auras.length ||\n            this.shape.auras[this.shape.auras.length - 1].name !== \"\" ||\n            this.shape.auras[this.shape.auras.length - 1].value !== 0\n        )\n            this.shape.auras.push({\n                uuid: uuidv4(),\n                name: \"\",\n                value: 0,\n                dim: 0,\n                visionSource: false,\n                colour: \"rgba(0,0,0,0)\",\n                visible: false,\n            });\n    }\n    updateShape(redraw: boolean, temporary = false) {\n        if (!this.owned) return;\n        socket.emit(\"Shape.Update\", { shape: this.shape.asDict(), redraw, temporary });\n        if (redraw) layerManager.invalidate();\n        this.addEmpty();\n    }\n    setToken(event: { target: HTMLInputElement }) {\n        if (!this.owned) return;\n        this.shape.setIsToken(event.target.checked);\n        this.updateShape(true);\n    }\n    setVisionBlocker(event: { target: HTMLInputElement }) {\n        if (!this.owned) return;\n        this.shape.checkVisionSources();\n        this.updateShape(true);\n    }\n    setMovementBlocker(event: { target: HTMLInputElement }) {\n        if (!this.owned) return;\n        this.shape.setMovementBlock(event.target.checked);\n        this.updateShape(false);\n    }\n    updateAnnotation(event: { target: HTMLInputElement }) {\n        if (!this.owned) return;\n        const hadAnnotation = this.shape.annotation !== \"\";\n        this.shape.annotation = event.target.value;\n        if (this.shape.annotation !== \"\" && !hadAnnotation) {\n            gameStore.annotations.push(this.shape.uuid);\n            if (layerManager.hasLayer(\"draw\")) layerManager.getLayer(\"draw\")!.invalidate(true);\n        } else if (this.shape.annotation === \"\" && hadAnnotation) {\n            gameStore.annotations.splice(gameStore.annotations.findIndex(an => an === this.shape.uuid));\n            if (layerManager.hasLayer(\"draw\")) layerManager.getLayer(\"draw\")!.invalidate(true);\n        }\n        this.updateShape(false);\n    }\n    updateOwner(event: { target: HTMLInputElement }, oldValue: string) {\n        if (!this.owned) return;\n        this.shape.updateOwner(oldValue, event.target.value);\n        this.updateShape(gameStore.fowLOS);\n    }\n    removeOwner(value: string) {\n        if (!this.owned) return;\n        this.shape.removeOwner(value);\n        this.updateShape(gameStore.fowLOS);\n    }\n    removeTracker(uuid: string) {\n        if (!this.owned) return;\n        this.shape.trackers = this.shape.trackers.filter(tr => tr.uuid !== uuid);\n        this.updateShape(false);\n    }\n    removeAura(uuid: string) {\n        if (!this.owned) return;\n        this.shape.auras = this.shape.auras.filter(au => au.uuid !== uuid);\n        this.shape.checkVisionSources();\n        this.updateShape(true);\n    }\n    updateAuraVisionSource(aura: Aura) {\n        if (!this.owned) return;\n        aura.visionSource = !aura.visionSource;\n        const i = gameStore.visionSources.findIndex(ls => ls.aura === aura.uuid);\n        if (aura.visionSource && i === -1) gameStore.visionSources.push({ shape: this.shape.uuid, aura: aura.uuid });\n        else if (!aura.visionSource && i >= 0) gameStore.visionSources.splice(i, 1);\n        this.updateShape(true);\n    }\n    updateAuraColour(aura: Aura, colour: string) {\n        if (!this.owned) return;\n        const layer = layerManager.getLayer(this.shape.layer);\n        if (layer === undefined) return;\n        layer.invalidate(!aura.visionSource);\n    }\n    openLabelManager() {\n        EventBus.$emit(\"LabelManager.Open\");\n    }\n    removeLabel(uuid: string) {\n        if(!this.owned) return;\n        this.shape.labels = this.shape.labels.filter(l => l.uuid !== uuid);\n        this.updateShape(true);\n    }\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.getActiveLayer() !== undefined)?_c('ContextMenu',{attrs:{\"visible\":_vm.visible,\"left\":_vm.x + 'px',\"top\":_vm.y + 'px'},on:{\"close\":_vm.close}},[(_vm.getLayers().length > 1)?_c('li',[_vm._v(\"Layer\\n        \"),_c('ul',_vm._l((_vm.getLayers()),function(layer){return _c('li',{key:layer.name,style:([_vm.getActiveLayer().name === layer.name ? {'background-color':'#82c8a0'}: {}]),on:{\"click\":function($event){return _vm.setLayer(layer.name)}}},[_vm._v(_vm._s(layer.name))])}),0)]):_vm._e(),_c('li',{on:{\"click\":_vm.moveToBack}},[_vm._v(\"Move to back\")]),_c('li',{on:{\"click\":_vm.moveToFront}},[_vm._v(\"Move to front\")]),_c('li',{on:{\"click\":_vm.addInitiative}},[_vm._v(_vm._s(_vm.getInitiativeWord())+\" initiative\")]),_c('li',{on:{\"click\":_vm.openEditDialog}},[_vm._v(\"Show properties\")])]):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"17a953f2-vue-loader-template\\\"}!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./shapecontext.vue?vue&type=template&id=6c66d243&scoped=true&\"","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\n\nimport Modal from \"@/core/components/modals/modal.vue\";\n\n@Component({\n    components: {\n        Modal,\n    },\n})\nexport default class ConfirmDialog extends Vue {\n    $refs!: {\n        confirm: HTMLButtonElement;\n    };\n\n    visible = false;\n    yes = \"Yes\";\n    no = \"No\";\n    title = \"\";\n\n    resolve = (ok: boolean) => {};\n    reject = () => {};\n\n    confirm() {\n        this.resolve(true);\n        this.close();\n    }\n    deny() {\n        this.resolve(false);\n        this.close();\n    }\n    close() {\n        this.reject();\n        this.visible = false;\n        this.title = \"\";\n    }\n    open(title: string, yes = \"yes\", no = \"no\"): Promise<boolean> {\n        this.yes = yes;\n        this.no = no;\n        this.title = title;\n\n        this.visible = true;\n        this.$nextTick(() => {\n            this.$refs.confirm.focus();\n        });\n\n        return new Promise((resolve, reject) => {\n            this.resolve = resolve;\n            this.reject = reject;\n        });\n    }\n}\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./dmsettings.vue?vue&type=style&index=0&id=b908e87c&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./dmsettings.vue?vue&type=style&index=0&id=b908e87c&scoped=true&lang=css&\"","import { render, staticRenderFns } from \"./map.vue?vue&type=template&id=2104f147&\"\nimport script from \"./map.vue?vue&type=script&lang=ts&\"\nexport * from \"./map.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"accordion\"},[_c('div',{attrs:{\"id\":\"header\"},on:{\"click\":function($event){$event.preventDefault();return _vm.toggleDisplay($event)}}},[_c('input',{ref:\"overall\",attrs:{\"type\":\"checkbox\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.toggleCategory($event)}}}),_c('strong',[_vm._v(_vm._s(_vm.title))]),(_vm.showArrow)?[_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showArrow && !_vm.active),expression:\"showArrow && !active\"}],staticClass:\"down-Arrow\"},[_vm._v(\"\")]),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showArrow && _vm.active),expression:\"showArrow && active\"}],staticClass:\"up-Arrow\"},[_vm._v(\"\")])]:_vm._e()],2),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.active),expression:\"active\"}],attrs:{\"id\":\"body\"}},_vm._l((_vm.items),function(item){return _c('div',{key:item[0],staticClass:\"item\",on:{\"click\":function($event){return _vm.toggleSelection(item[0])}}},[_c('input',{attrs:{\"type\":\"checkbox\"},domProps:{\"checked\":_vm.selected.includes(item[0])},on:{\"click\":function($event){$event.preventDefault();}}}),_vm._v(\" \"+_vm._s(item[1])+\"\\n      \")])}),0)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"17a953f2-vue-loader-template\\\"}!../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./accordion.vue?vue&type=template&id=0bf2b7ba&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('modal',{attrs:{\"visible\":_vm.visible},on:{\"close\":_vm.close},scopedSlots:_vm._u([{key:\"header\",fn:function(m){return _c('div',{staticClass:\"modal-header\",attrs:{\"draggable\":\"true\"},on:{\"dragstart\":m.dragStart,\"dragend\":m.dragEnd}},[_vm._v(_vm._s(_vm.title))])}}])},[_c('div',{staticClass:\"modal-body\"},[_c('button',{ref:\"confirm\",on:{\"click\":_vm.confirm}},[_vm._v(_vm._s(_vm.yes))]),(!!_vm.no)?_c('button',{on:{\"click\":_vm.deny}},[_vm._v(_vm._s(_vm.no))]):_vm._e()])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"17a953f2-vue-loader-template\\\"}!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./confirm.vue?vue&type=template&id=1883e207&scoped=true&\"","import { render, staticRenderFns } from \"./dmsettings.vue?vue&type=template&id=b908e87c&scoped=true&\"\nimport script from \"./dmsettings.vue?vue&type=script&lang=ts&\"\nexport * from \"./dmsettings.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./dmsettings.vue?vue&type=style&index=0&id=b908e87c&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"b908e87c\",\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\nimport Vue from \"vue\";\n\nimport Component from \"vue-class-component\";\n\nimport ContextMenu from \"@/core/components/contextmenu.vue\";\nimport ConfirmDialog from \"@/core/components/modals/confirm.vue\";\nimport Prompt from \"@/core/components/modals/prompt.vue\";\n\nimport { socket } from \"@/assetManager/socket\";\nimport { assetStore } from \"@/assetManager/store\";\nimport { getComponent, getRef } from \"@/core/utils\";\n\n@Component({\n    components: {\n        ContextMenu,\n    },\n})\nexport default class AssetContextMenu extends Vue {\n    visible = false;\n    left = 0;\n    top = 0;\n    open(event: MouseEvent, inode: number) {\n        if (!assetStore.selected.includes(inode)) getComponent<any>().select(event, inode);\n\n        this.visible = true;\n        this.left = event.pageX;\n        this.top = event.pageY;\n        this.$nextTick(() => {\n            (<HTMLElement>this.$children[0].$el).focus();\n        });\n    }\n    close() {\n        this.visible = false;\n    }\n    rename() {\n        if (assetStore.selected.length !== 1) return;\n        const asset = assetStore.idMap.get(assetStore.selected[0])!;\n\n        getRef<Prompt>(\"prompt\")\n            .prompt(\"New name:\", `Renaming ${asset.name}`)\n            .then(\n                (name: string) => {\n                    socket.emit(\"Asset.Rename\", {\n                        asset: asset.id,\n                        name,\n                    });\n                    asset.name = name;\n                    getComponent().$forceUpdate();\n                },\n                () => {},\n            );\n        this.close();\n    }\n    remove() {\n        if (assetStore.selected.length === 0) return;\n        getRef<ConfirmDialog>(\"confirm\")\n            .open(\"Are you sure you wish to remove this?\")\n            .then(\n                (result: boolean) => {\n                    if (result) {\n                        for (const sel of assetStore.selected) {\n                            socket.emit(\"Asset.Remove\", sel);\n                            if (assetStore.files.includes(sel))\n                                assetStore.files.splice(assetStore.files.indexOf(sel), 1);\n                            else assetStore.folders.splice(assetStore.folders.indexOf(sel), 1);\n                        }\n                        assetStore.clearSelected();\n                    }\n                },\n                () => {},\n            );\n        this.close();\n    }\n}\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./select.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./select.vue?vue&type=script&lang=ts&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./filter.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./filter.vue?vue&type=style&index=0&lang=css&\"","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\n\nimport Modal from \"@/core/components/modals/modal.vue\";\n\nimport { uuidv4 } from \"@/core/utils\";\nimport { socket } from \"@/game/api/socket\";\nimport { EventBus } from \"@/game/event-bus\";\nimport { gameStore } from \"@/game/store\";\n\n@Component({\n    components: {\n        Modal,\n    },\n})\nexport default class LabelManager extends Vue {\n    visible = false;\n    newCategory = \"\";\n    newName = \"\";\n    search = \"\";\n\n    mounted() {\n        EventBus.$on(\"LabelManager.Open\", () => {\n            this.visible = true;\n            this.newCategory = \"\";\n            this.newName = \"\";\n            this.$nextTick(() => (<HTMLInputElement>this.$refs.search).focus());\n        });\n    }\n\n    beforeDestroy() {\n        EventBus.$off(\"LabelManager.Open\");\n    }\n\n    get labels() {\n        const cat: {[category: string]: Label[]} = {'': []};\n        for (const uuid of Object.keys(gameStore.labels)) {\n            const label = gameStore.labels[uuid];\n            if (this.search.length && `${label.category.toLowerCase()}${label.name.toLowerCase()}`.search(this.search.toLowerCase()) < 0) continue;\n            if (label.user !== gameStore.username) continue;\n            if (!label.category) cat[''].push(label);\n            else {\n                if (!(label.category in cat)) cat[label.category] = [];\n                cat[label.category].push(label);\n                cat[label.category].sort((a, b) => a.name.localeCompare(b.name));\n            }\n        }\n        return cat;\n    }\n\n    get categories() {\n        return Object.keys(this.labels).sort();\n    }\n\n    selectLabel(label: string) {\n        EventBus.$emit(\"EditDialog.AddLabel\", label);\n        this.visible = false;\n    }\n\n    toggleVisibility(label: Label) {\n        label.visible = !label.visible;\n        socket.emit(\"Label.Visibility.Set\", { uuid: label.uuid, visible: label.visible });\n    }\n\n    addLabel() {\n        if (this.newName === \"\") return;\n        const label = {\n            uuid: uuidv4(),\n            category: this.newCategory,\n            name: this.newName,\n            visible: false,\n            user: gameStore.username,\n        };\n        gameStore.addLabel(label);\n        socket.emit(\"Label.Add\", label);\n        this.newCategory = \"\";\n        this.newName = \"\";\n    }\n\n    deleteLabel(uuid: string) {\n        gameStore.deleteLabel({ uuid, user: gameStore.username });\n        socket.emit(\"Label.Delete\", uuid);\n    }\n}\n","import { ServerPolygon } from \"../comm/types/shapes\";\nimport { GlobalPoint, LocalPoint } from \"../geom\";\nimport { g2lx, g2ly, g2lz, l2g } from \"../units\";\nimport { getFogColour } from \"../utils\";\nimport { BoundingRect } from \"./boundingrect\";\nimport { Shape } from \"./shape\";\n\nexport class Polygon extends Shape {\n    type = \"polygon\";\n    _vertices: GlobalPoint[] = [];\n\n    constructor(\n        startPoint: GlobalPoint,\n        vertices: GlobalPoint[] = [],\n        fillColour?: string,\n        strokeColour?: string,\n        uuid?: string,\n    ) {\n        super(startPoint, fillColour, strokeColour, uuid);\n        this._vertices = vertices;\n    }\n\n    get refPoint() {\n        return this._refPoint;\n    }\n    set refPoint(point: GlobalPoint) {\n        const delta = point.subtract(this._refPoint);\n        this._refPoint = point;\n        for (let i = 0; i < this._vertices.length; i++) this._vertices[i] = this._vertices[i].add(delta);\n    }\n\n    get vertices() {\n        return [this._refPoint, ...this._vertices];\n    }\n\n    asDict() {\n        return Object.assign(this.getBaseDict(), {\n            vertices: this._vertices.map(p => ({ x: p.x, y: p.y })),\n        });\n    }\n\n    fromDict(data: ServerPolygon) {\n        super.fromDict(data);\n        this._vertices = data.vertices.map(v => new GlobalPoint(v.x, v.y));\n    }\n\n    get points() {\n        return this.vertices.map(point => [point.x, point.y]);\n    }\n\n    draw(ctx: CanvasRenderingContext2D) {\n        super.draw(ctx);\n        ctx.lineCap = \"round\";\n        ctx.lineJoin = \"round\";\n\n        if (this.strokeColour === \"fog\") ctx.strokeStyle = getFogColour();\n        else if (this.vertices.length === 2) ctx.strokeStyle = this.fillColour;\n        else ctx.strokeStyle = this.strokeColour;\n        if (this.fillColour === \"fog\") ctx.fillStyle = getFogColour();\n        else ctx.fillStyle = this.fillColour;\n        ctx.lineWidth = g2lz(2);\n\n        ctx.beginPath();\n        ctx.moveTo(g2lx(this.vertices[0].x), g2ly(this.vertices[0].y));\n        for (let i = 1; i <= this.vertices.length; i++) {\n            const vertex = this.vertices[i % this.vertices.length];\n            ctx.lineTo(g2lx(vertex.x), g2ly(vertex.y));\n        }\n        ctx.fill();\n        ctx.stroke();\n    }\n\n    contains(point: GlobalPoint): boolean {\n        return this.getBoundingBox().contains(point);\n    }\n\n    center(): GlobalPoint;\n    center(centerPoint: GlobalPoint): void;\n    center(centerPoint?: GlobalPoint): GlobalPoint | void {\n        return this.getBoundingBox().center();\n    }\n    visibleInCanvas(canvas: HTMLCanvasElement): boolean {\n        return this.getBoundingBox().visibleInCanvas(canvas);\n    } // TODO\n    snapToGrid(): void {}\n    resizeToGrid(): void {}\n    resize(resizePoint: number, point: LocalPoint): void {\n        if (resizePoint === 0) this._refPoint = l2g(point);\n        else this._vertices[resizePoint - 1] = l2g(point);\n    }\n    getBoundingBox(): BoundingRect {\n        let minx: number = this.refPoint.x;\n        let maxx: number = this.refPoint.x;\n        let miny: number = this.refPoint.y;\n        let maxy: number = this.refPoint.y;\n        for (const p of this._vertices) {\n            if (p.x < minx) minx = p.x;\n            if (p.x > maxx) maxx = p.x;\n            if (p.y < miny) miny = p.y;\n            if (p.y > maxy) maxy = p.y;\n        }\n        return new BoundingRect(new GlobalPoint(minx, miny), maxx - minx, maxy - miny);\n    }\n}\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./game.vue?vue&type=style&index=1&id=3d0578ba&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./game.vue?vue&type=style&index=1&id=3d0578ba&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.shapes.length > 0),expression:\"shapes.length > 0\"}]},_vm._l((_vm.shapes),function(shape){return _c('div',{key:shape.uuid},[_c('div',{attrs:{\"id\":\"selection-menu\"}},[_c('div',{attrs:{\"id\":\"selection-edit-button\"},on:{\"click\":_vm.openEditDialog}},[_c('i',{staticClass:\"fas fa-edit\"})]),_c('div',{attrs:{\"id\":\"selection-name\"}},[_vm._v(_vm._s(shape.name))]),_c('div',{attrs:{\"id\":\"selection-trackers\"}},[_vm._l((_vm.visibleTrackers),function(tracker){return [_c('div',{key:'name-' + tracker.uuid},[_vm._v(_vm._s(tracker.name))]),_c('div',{key:'value-' + tracker.uuid,staticClass:\"selection-tracker-value\",on:{\"click\":function($event){return _vm.changeValue(tracker, false)}}},[(tracker.maxvalue === 0)?[_vm._v(_vm._s(tracker.value))]:[_vm._v(_vm._s(tracker.value)+\" / \"+_vm._s(tracker.maxvalue))]],2)]})],2),_c('div',{attrs:{\"id\":\"selection-auras\"}},[_vm._l((_vm.visibleAuras),function(aura){return [_c('div',{key:'name-' + aura.uuid},[_vm._v(_vm._s(aura.name))]),_c('div',{key:'value-' + aura.uuid,staticClass:\"selection-tracker-value\",on:{\"click\":function($event){return _vm.changeValue(aura, true)}}},[(aura.dim === 0)?[_vm._v(_vm._s(aura.value))]:[_vm._v(_vm._s(aura.value)+\" / \"+_vm._s(aura.dim))]],2)]})],2)]),_c('edit-dialog',{ref:\"editDialog\",refInFor:true,attrs:{\"shape\":shape}})],1)}),0)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"17a953f2-vue-loader-template\\\"}!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./selection_info.vue?vue&type=template&id=43d09857&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.selected)?_c('div',{staticClass:\"tool-detail\",style:({'--detailRight': _vm.detailRight, '--detailArrow': _vm.detailArrow})},[_c('div',{attrs:{\"id\":\"accordion-container\"}},_vm._l((_vm.categories),function(category){return _c('accordion',{key:category,attrs:{\"title\":category === '' ? 'no category' : category,\"showArrow\":false,\"items\":_vm.labels[category],\"initialValues\":_vm.initalValues[category]},on:{\"selectionupdate\":_vm.updateSelection}})}),1)]):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"17a953f2-vue-loader-template\\\"}!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./filter.vue?vue&type=template&id=dca395d6&scoped=true&\"","import { render, staticRenderFns } from \"./manager.vue?vue&type=template&id=5b0def98&\"\nimport script from \"./manager.vue?vue&type=script&lang=ts&\"\nexport * from \"./manager.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./manager.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tools.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tools.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./tool.vue?vue&type=template&id=1e034b42&\"\nimport script from \"./tool.vue?vue&type=script&lang=ts&\"\nexport * from \"./tool.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./tool.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('Modal',{attrs:{\"visible\":_vm.visible},on:{\"close\":_vm.close},scopedSlots:_vm._u([{key:\"header\",fn:function(m){return _c('div',{staticClass:\"modal-header\",attrs:{\"draggable\":\"true\"},on:{\"dragstart\":m.dragStart,\"dragend\":m.dragEnd}},[_vm._v(_vm._s(_vm.title))])}}])},[_c('div',{staticClass:\"modal-body\"},[_vm._v(\"\\n    \"+_vm._s(_vm.question)+\"\\n    \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.answer),expression:\"answer\"}],ref:\"answer\",attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.answer)},on:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.submit($event)},\"input\":function($event){if($event.target.composing){ return; }_vm.answer=$event.target.value}}})]),_c('div',{staticClass:\"modal-footer\"},[_c('button',{on:{\"click\":_vm.submit}},[_vm._v(\"Submit\")])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"17a953f2-vue-loader-template\\\"}!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./prompt.vue?vue&type=template&id=0602c2e6&scoped=true&\"","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\nimport draggable from \"vuedraggable\";\nVue.component(\"draggable\", draggable);\n\nimport Modal from \"@/core/components/modals/modal.vue\";\n\nimport { uuidv4 } from \"@/core/utils\";\nimport { socket } from \"@/game/api/socket\";\nimport { InitiativeData, InitiativeEffect } from \"@/game/comm/types/general\";\nimport { EventBus } from \"@/game/event-bus\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { gameStore } from \"@/game/store\";\nimport { gameManager } from '../manager';\n\n@Component({\n    components: {\n        Modal,\n        draggable,\n    },\n})\nexport default class Initiative extends Vue {\n    visible = false;\n    data: InitiativeData[] = [];\n    currentActor: string | null = null;\n    roundCounter = 0;\n    visionLock = false;\n    cameraLock = false;\n    _activeTokens: string[] = [];\n\n    mounted() {\n        EventBus.$on(\"Initiative.Clear\", this.clear);\n        EventBus.$on(\"Initiative.Remove\", (data: string) => this.removeInitiative(data));\n        EventBus.$on(\"Initiative.Show\", () => (this.visible = true));\n\n        socket.on(\"Initiative.Set\", (data: InitiativeData[]) => {\n            this.data = data;\n        });\n        socket.on(\"Initiative.Turn.Set\", (data: string) => this.setTurn(data));\n        socket.on(\"Initiative.Turn.Update\", (data: string) => this.updateTurn(data, false));\n        socket.on(\"Initiative.Round.Update\", (data: number) => this.setRound(data, false));\n        socket.on(\"Initiative.Effect.New\", (data: { actor: string; effect: InitiativeEffect }) => {\n            const actor = this.getActor(data.actor);\n            if (actor === undefined) return;\n            this.createEffect(actor, data.effect, false);\n        });\n        socket.on(\"Initiative.Effect.Update\", (data: { actor: string; effect: InitiativeEffect }) =>\n            this.updateEffect(data.actor, data.effect, false),\n        );\n    }\n\n    beforeDestroy() {\n        EventBus.$off(\"Initiative.Clear\");\n        EventBus.$off(\"Initiative.Remove\");\n        EventBus.$off(\"Initiative.Show\");\n    }\n\n    // Utilities\n    clear() {\n        this.data = [];\n        this.currentActor = null;\n    }\n    getActor(actorId: string) {\n        return this.data.find(a => a.uuid === actorId);\n    }\n    contains(uuid: string) {\n        return this.data.some(d => d.uuid === uuid);\n    }\n    owns(actor: InitiativeData): boolean {\n        if (gameStore.IS_DM) return true;\n        const shape = layerManager.UUIDMap.get(actor.uuid);\n        // Shapes that are unknown to this client are hidden from this client but owned by other clients\n        if (shape === undefined) return false;\n        return shape.owners.includes(gameStore.username);\n    }\n    getDefaultEffect() {\n        return { uuid: uuidv4(), name: \"New Effect\", turns: 10 };\n    }\n    fakeSetData(dataTransfer: DataTransfer) {\n        dataTransfer.setData(\"Hack\", \"\");\n    }\n    syncInitiative(data: InitiativeData | { uuid: string }) {\n        socket.emit(\"Initiative.Update\", data);\n    }\n    // Events\n    addInitiative(data: InitiativeData) {\n        const d = this.data.findIndex(a => a.uuid === data.uuid);\n        if (d >= 0) return;\n        if (data.initiative === undefined) data.initiative = 0;\n        this.syncInitiative(data);\n    }\n    removeInitiative(uuid: string) {\n        const d = this.data.findIndex(a => a.uuid === uuid);\n        if (d < 0 || this.data[d].group) return;\n        this.syncInitiative({ uuid });\n        // Remove highlight\n        const shape = layerManager.UUIDMap.get(uuid);\n        if (shape === undefined) return;\n        if (shape.showHighlight) {\n            shape.showHighlight = false;\n            layerManager.getLayer(shape.layer)!.invalidate(true);\n        }\n    }\n    updateOrder() {\n        if (!gameStore.IS_DM) return;\n        socket.emit(\"Initiative.Set\", this.data.map(d => d.uuid));\n    }\n    updateTurn(actorId: string | null, sync: boolean) {\n        if (!gameStore.IS_DM && sync) return;\n        this.currentActor = actorId;\n        const actor = this.data.find(a => a.uuid === actorId);\n        if (actor === undefined) return;\n        if (actor.effects) {\n            for (let e = actor.effects.length - 1; e >= 0; e--) {\n                if (actor.effects[e].turns <= 0) actor.effects.splice(e, 1);\n                else actor.effects[e].turns--;\n            }\n        }\n        if (this.visionLock) {\n            if (actorId !== null && gameStore.ownedtokens.includes(actorId)) gameStore.setActiveTokens([actorId]);\n            else gameStore.setActiveTokens([]);\n        }\n        if (this.cameraLock) {\n            if (actorId !== null) {\n                const shape = layerManager.UUIDMap.get(actorId);\n                if (shape !== undefined && shape.ownedBy()) {\n                    gameManager.setCenterPosition(shape.center());\n                }\n            }\n        }\n        if (sync) socket.emit(\"Initiative.Turn.Update\", actorId);\n    }\n    setRound(round: number, sync: boolean) {\n        if (!gameStore.IS_DM && sync) return;\n        this.roundCounter = round;\n        if (sync) socket.emit(\"Initiative.Round.Update\", round);\n    }\n    setTurn(actorId: string | null) {\n        this.currentActor = actorId;\n    }\n    nextTurn() {\n        if (!gameStore.IS_DM) return;\n        const order = this.data;\n        const next = order[(order.findIndex(a => a.uuid === this.currentActor) + 1) % order.length];\n        if (this.data[0].uuid === next.uuid) this.setRound(this.roundCounter + 1, true);\n        this.updateTurn(next.uuid, true);\n    }\n    toggleHighlight(actor: InitiativeData, show: boolean) {\n        const shape = layerManager.UUIDMap.get(actor.uuid);\n        if (shape === undefined) return;\n        shape.showHighlight = show;\n        layerManager.getLayer(shape.layer)!.invalidate(true);\n    }\n    toggleOption(actor: InitiativeData, option: \"visible\" | \"group\") {\n        if (!this.owns(actor)) return;\n        actor[option] = !actor[option];\n        this.syncInitiative(actor);\n    }\n    createEffect(actor: InitiativeData, effect: InitiativeEffect, sync: boolean) {\n        if (!this.owns(actor)) return;\n        actor.effects.push(effect);\n        if (sync) socket.emit(\"Initiative.Effect.New\", { actor: actor.uuid, effect });\n    }\n    syncEffect(actor: InitiativeData, effect: InitiativeEffect) {\n        if (!this.owns(actor)) return;\n        socket.emit(\"Initiative.Effect.Update\", { actor: actor.uuid, effect });\n    }\n    updateEffect(actorId: string, effect: InitiativeEffect, sync: boolean) {\n        const actor = this.data.find(a => a.uuid === actorId);\n        if (actor === undefined) return;\n        const effectIndex = actor.effects.findIndex(e => e.uuid === effect.uuid);\n        if (effectIndex === undefined) return;\n        actor.effects[effectIndex] = effect;\n        if (sync) this.syncEffect(actor, effect);\n        else this.$forceUpdate();\n    }\n    toggleVisionLock() {\n        this.visionLock = !this.visionLock;\n        if (this.visionLock) {\n            this._activeTokens = [...gameStore._activeTokens];\n            if (this.currentActor !== null && gameStore.ownedtokens.includes(this.currentActor)) gameStore.setActiveTokens([this.currentActor]);\n        } else {\n            gameStore.setActiveTokens(this._activeTokens);\n        }\n    }\n}\n","import { render, staticRenderFns } from \"./selection_info.vue?vue&type=template&id=43d09857&scoped=true&\"\nimport script from \"./selection_info.vue?vue&type=script&lang=ts&\"\nexport * from \"./selection_info.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./selection_info.vue?vue&type=style&index=0&id=43d09857&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"43d09857\",\n  null\n  \n)\n\nexport default component.exports","import Vue from \"vue\";\nimport { Action, getModule, Module, Mutation, VuexModule } from \"vuex-module-decorators\";\n\nimport { AssetList } from \"@/core/comm/types\";\nimport { socket } from \"@/game/api/socket\";\nimport { sendClientOptions } from \"@/game/api/utils\";\nimport { Note } from \"@/game/comm/types/general\";\nimport { ServerShape } from \"@/game/comm/types/shapes\";\nimport { GlobalPoint } from \"@/game/geom\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { g2l, l2g } from \"@/game/units\";\nimport { zoomValue } from \"@/game/utils\";\nimport { BoundingVolume } from \"@/game/visibility/bvh/bvh\";\nimport { addShapeToTriag, deleteShapeFromTriag, triangulate, TriangulationTarget } from \"@/game/visibility/te/pa\";\nimport { rootStore } from \"@/store\";\n\nexport interface GameState {\n    boardInitialized: boolean;\n}\n\n@Module({ dynamic: true, store: rootStore, name: \"game\", namespaced: true })\nclass GameStore extends VuexModule implements GameState {\n    // This is a limited view of selectable layers that is used to generate the layer selection UI and ability to switch layers\n    // See the layerManager for proper layer management tools\n    layers: string[] = [];\n    selectedLayerIndex = -1;\n    boardInitialized = false;\n\n    locations: string[] = [];\n\n    assets: AssetList = {};\n\n    notes: Note[] = [];\n\n    IS_DM = false;\n    FAKE_PLAYER = false;\n    isLocked = false;\n    gridSize = 50;\n    username = \"\";\n    roomName = \"\";\n    roomCreator = \"\";\n    invitationCode = \"\";\n    players: { id: number; name: string; }[] = [];\n\n    gridColour = \"rgba(0, 0, 0, 1)\";\n    fowColour = \"rgba(0, 0, 0, 1)\";\n    rulerColour = \"rgba(255, 0, 0, 1)\";\n    panX = 0;\n    panY = 0;\n\n    zoomDisplay = 0.5;\n    // zoomFactor = 1;\n\n    unitSize = 5;\n    useGrid = true;\n    fullFOW = false;\n    fowOpacity = 0.3;\n    fowLOS = false;\n    locationName = \"\";\n\n    visionSources: { shape: string; aura: string }[] = [];\n    visionBlockers: string[] = [];\n    annotations: string[] = [];\n    movementblockers: string[] = [];\n    ownedtokens: string[] = [];\n    _activeTokens: string[] = [];\n\n    BV = Object.freeze(new BoundingVolume([]));\n\n    visionMode: \"bvh\" | \"triangle\" = \"bvh\";\n    drawTEContour = false;\n    visionRangeMin = 1640;\n    visionRangeMax = 3281;\n\n    clipboard: ServerShape[] = [];\n\n    // Maps are not yet supported in Vue untill 3.X, so for now we're using a plain old object\n    labels: { [uuid: string]: Label } = {};\n\n    filterNoLabel = false;\n    labelFilters: string[] = [];\n\n    showUI = true;\n\n    get selectedLayer() {\n        return this.layers[this.selectedLayerIndex];\n    }\n\n    get zoomFactor() {\n        return zoomValue(this.zoomDisplay);\n    }\n\n    get activeTokens() {\n        if (this._activeTokens.length === 0) return this.ownedtokens;\n        return this._activeTokens;\n    }\n\n    @Mutation\n    setFakePlayer(value: boolean) {\n        this.FAKE_PLAYER = value;\n        this.IS_DM = !value;\n        layerManager.invalidate();\n    }\n\n    @Mutation\n    setZoomDisplay(zoom: number) {\n        if (zoom === this.zoomDisplay) return;\n        if (zoom < 0) zoom = 0;\n        if (zoom > 1) zoom = 1;\n        this.zoomDisplay = zoom;\n        layerManager.invalidate();\n    }\n\n    @Mutation\n    setVisionMode(data: { mode: \"bvh\" | \"triangle\"; sync: boolean }) {\n        this.visionMode = data.mode;\n        if (data.sync) socket.emit(\"Location.Options.Set\", { vision_mode: data.mode });\n    }\n\n    @Mutation\n    setBoardInitialized(boardInitialized: boolean) {\n        this.boardInitialized = boardInitialized;\n    }\n\n    @Mutation\n    toggleUnlabeledFilter() {\n        this.filterNoLabel = !this.filterNoLabel;\n    }\n\n    @Mutation\n    addLabel(label: Label) {\n        Vue.set(this.labels, label.uuid, label);\n    }\n\n    @Mutation\n    setLabelFilters(filters: string[]) {\n        this.labelFilters = filters;\n    }\n\n    @Mutation\n    setLabelVisibility(data: { user: string; uuid: string; visible: boolean }) {\n        if (!(data.uuid in this.labels)) return;\n        this.labels[data.uuid].visible = data.visible;\n    }\n\n    @Mutation\n    deleteLabel(data: { uuid: string; user: string }) {\n        if (!(data.uuid in this.labels)) return;\n        const label = this.labels[data.uuid];\n        const updatedLayers: Set<string> = new Set();\n        for (const shape of layerManager.UUIDMap.values()) {\n            const i = shape.labels.indexOf(label);\n            if (i >= 0) {\n                shape.labels.splice(i, 1);\n                updatedLayers.add(shape.layer);\n            }\n        }\n        for (const layer of updatedLayers) layerManager.getLayer(layer)!.invalidate(false);\n        Vue.delete(this.labels, data.uuid);\n    }\n\n    @Mutation\n    setDM(isDM: boolean) {\n        this.IS_DM = isDM;\n    }\n\n    @Mutation\n    setUsername(username: string) {\n        this.username = username;\n    }\n\n    @Mutation\n    setRoomName(name: string) {\n        this.roomName = name;\n    }\n\n    @Mutation\n    setRoomCreator(name: string) {\n        this.roomCreator = name;\n    }\n\n    @Mutation\n    setInvitationCode(code: string) {\n        this.invitationCode = code;\n    }\n\n    @Mutation\n    addLayer(name: string) {\n        this.layers.push(name);\n        if (this.selectedLayerIndex === -1) this.selectedLayerIndex = this.layers.indexOf(name);\n    }\n\n    @Mutation\n    selectLayer(data: { name: string; sync: boolean }) {\n        const index = this.layers.indexOf(data.name);\n        if (index >= 0) this.selectedLayerIndex = index;\n        if (data.sync) socket.emit(\"Client.ActiveLayer.Set\", data.name);\n    }\n\n    @Mutation\n    newNote(data: { note: Note; sync: boolean }) {\n        this.notes.push(data.note);\n        if (data.sync) socket.emit(\"Note.New\", data.note);\n    }\n\n    @Mutation\n    setAssets(assets: AssetList) {\n        this.assets = assets;\n    }\n\n    @Mutation\n    setLocations(locations: string[]) {\n        this.locations = locations;\n    }\n\n    @Mutation\n    resetLayerInfo() {\n        this.layers = [];\n        this.selectedLayerIndex = -1;\n    }\n\n    @Mutation\n    recalculateVision() {\n        if (this.boardInitialized) {\n            if (this.visionMode === \"triangle\") triangulate(TriangulationTarget.VISION);\n            else this.BV = Object.freeze(new BoundingVolume(this.visionBlockers));\n        }\n    }\n\n    @Mutation\n    deleteFromTriag(data: {target: TriangulationTarget, points: number[][]; standalone: boolean}) {\n        if (this.visionMode === \"triangle\") {\n            deleteShapeFromTriag(data.target, data.points);\n        } else if (data.standalone) {\n            this.recalculateVision();\n        }\n    }\n\n    @Mutation\n    addToTriag(data: {target: TriangulationTarget, points: number[][]}) {\n        if (this.visionMode === \"triangle\") addShapeToTriag(data.target, data.points);\n        else this.recalculateVision();\n    }\n\n    @Mutation\n    recalculateMovement() {\n        if (this.boardInitialized && this.visionMode === \"triangle\") triangulate(TriangulationTarget.MOVEMENT);\n    }\n\n    @Mutation\n    updateZoom(data: { newZoomDisplay: number; zoomLocation: GlobalPoint }) {\n        if (data.newZoomDisplay === this.zoomDisplay) return;\n        if (data.newZoomDisplay < 0) data.newZoomDisplay = 0;\n        if (data.newZoomDisplay > 1) data.newZoomDisplay = 1;\n        const oldLoc = g2l(data.zoomLocation);\n        this.zoomDisplay = data.newZoomDisplay;\n        const newLoc = l2g(oldLoc);\n        // Change the pan settings to keep the zoomLocation in the same exact location before and after the zoom.\n        const diff = newLoc.subtract(data.zoomLocation);\n        this.panX += diff.x;\n        this.panY += diff.y;\n        layerManager.invalidate();\n        sendClientOptions();\n    }\n\n    @Mutation\n    setGridColour(data: { colour: string; sync: boolean }) {\n        this.gridColour = data.colour;\n        layerManager.getGridLayer()!.drawGrid();\n        if (data.sync) socket.emit(\"Client.Options.Set\", { gridColour: data.colour });\n    }\n\n    @Mutation\n    setFOWColour(data: { colour: string; sync: boolean }) {\n        this.fowColour = data.colour;\n        layerManager.invalidate();\n        if (data.sync) socket.emit(\"Client.Options.Set\", { fowColour: data.colour });\n    }\n\n    @Mutation\n    setRulerColour(data: { colour: string; sync: boolean }) {\n        this.rulerColour = data.colour;\n        if (data.sync) socket.emit(\"Client.Options.Set\", { rulerColour: data.colour });\n    }\n\n    @Mutation\n    setPanX(x: number) {\n        this.panX = x;\n    }\n\n    @Mutation\n    setPanY(y: number) {\n        this.panY = y;\n    }\n\n    @Mutation\n    increasePanX(increase: number) {\n        this.panX += increase;\n    }\n\n    @Mutation\n    increasePanY(increase: number) {\n        this.panY += increase;\n    }\n\n    @Mutation\n    setUnitSize(data: { unitSize: number; sync: boolean }) {\n        if (this.unitSize !== data.unitSize && data.unitSize > 0 && data.unitSize < Infinity) {\n            this.unitSize = data.unitSize;\n            layerManager.invalidate();\n            if (data.sync) socket.emit(\"Location.Options.Set\", { unit_size: data.unitSize });\n        }\n    }\n\n    @Mutation\n    setUseGrid(data: { useGrid: boolean; sync: boolean }) {\n        if (this.useGrid !== data.useGrid) {\n            this.useGrid = data.useGrid;\n            const gridLayer = layerManager.getGridLayer()!;\n            if (data.useGrid) gridLayer.canvas.style.display = \"block\";\n            else gridLayer.canvas.style.display = \"none\";\n            if (data.sync) socket.emit(\"Location.Options.Set\", { use_grid: data.useGrid });\n        }\n    }\n\n    @Mutation\n    setGridSize(data: { gridSize: number; sync: boolean }): void {\n        if (this.gridSize !== data.gridSize && data.gridSize > 0) {\n            this.gridSize = data.gridSize;\n            const gridLayer = layerManager.getGridLayer();\n            if (gridLayer !== undefined) gridLayer.drawGrid();\n            if (data.sync) socket.emit(\"Gridsize.Set\", data.gridSize);\n        }\n    }\n\n    @Mutation\n    setVisionRangeMin(data: { value: number; sync: boolean }): void {\n        this.visionRangeMin = data.value;\n        layerManager.invalidateLight();\n        if (data.sync) socket.emit(\"Location.Options.Set\", { vision_min_range: data.value });\n    }\n\n    @Mutation\n    setVisionRangeMax(data: { value: number; sync: boolean }): void {\n        this.visionRangeMax = Math.max(data.value, this.visionRangeMin);\n        layerManager.invalidateLight();\n        if (data.sync) socket.emit(\"Location.Options.Set\", { vision_max_range: this.visionRangeMax });\n    }\n\n    @Mutation\n    setFullFOW(data: { fullFOW: boolean; sync: boolean }) {\n        if (this.fullFOW !== data.fullFOW) {\n            this.fullFOW = data.fullFOW;\n            layerManager.invalidateLight();\n            if (data.sync) socket.emit(\"Location.Options.Set\", { full_fow: data.fullFOW });\n        }\n    }\n\n    @Mutation\n    setFOWOpacity(data: { fowOpacity: number; sync: boolean }) {\n        this.fowOpacity = data.fowOpacity;\n        layerManager.invalidateLight();\n        if (data.sync) socket.emit(\"Location.Options.Set\", { fow_opacity: data.fowOpacity });\n    }\n\n    @Mutation\n    setLineOfSight(data: { fowLOS: boolean; sync: boolean }) {\n        if (this.fowLOS !== data.fowLOS) {\n            this.fowLOS = data.fowLOS;\n            layerManager.invalidate();\n            if (data.sync) socket.emit(\"Location.Options.Set\", { fow_los: data.fowLOS });\n        }\n    }\n\n    @Mutation\n    setLocationName(name: string) {\n        this.locationName = name;\n    }\n\n    @Mutation\n    updateNote(data: { note: Note; sync: boolean }) {\n        const actualNote = this.notes.find(n => n.uuid === data.note.uuid);\n        if (actualNote === undefined) return;\n        actualNote.title = data.note.title;\n        actualNote.text = data.note.text;\n        if (data.sync) socket.emit(\"Note.Update\", actualNote);\n    }\n\n    @Mutation\n    removeNote(data: { note: Note; sync: boolean }) {\n        this.notes = this.notes.filter(n => n.uuid !== data.note.uuid);\n        if (data.sync) socket.emit(\"Note.Remove\", data.note.uuid);\n    }\n\n    @Mutation\n    toggleUI() {\n        this.showUI = !this.showUI;\n    }\n\n    @Mutation\n    setClipboard(clipboard: ServerShape[]) {\n        this.clipboard = clipboard;\n    }\n\n    @Mutation\n    setActiveTokens(tokens: string[]) {\n        this._activeTokens = tokens;\n        layerManager.invalidateLight();\n    }\n\n    @Mutation\n    addActiveToken(token: string) {\n        this._activeTokens.push(token);\n        layerManager.invalidateLight();\n    }\n\n    @Mutation\n    removeActiveToken(token: string) {\n        if (this._activeTokens.length === 0) {\n            this._activeTokens = [...this.ownedtokens];\n        }\n        this._activeTokens.splice(this._activeTokens.indexOf(token), 1);\n        layerManager.invalidateLight();\n    }\n\n    @Mutation\n    setPlayers(players: { id: number; name: string; }[]) {\n        this.players = players;\n    }\n\n    @Mutation\n    addPlayer(player: { id: number; name: string }) {\n        this.players.push(player);\n    }\n\n    @Mutation\n    kickPlayer(playerId: number) {\n        this.players = this.players.filter(p => p.id !== playerId);\n    }\n\n    @Mutation\n    setIsLocked(data: {isLocked: boolean, sync: boolean}) {\n        this.isLocked = data.isLocked;\n        if (data.sync) {\n            socket.emit(\"Room.Info.Set.Locked\", this.isLocked);\n        }\n    }\n\n    @Action\n    clear() {\n        (<any>this.context.state).visionSources = [];\n        (<any>this.context.state).visionBlockers = [];\n        (<any>this.context.state).ownedtokens = [];\n        (<any>this.context.state).annotations = [];\n        (<any>this.context.state).movementblockers = [];\n        (<any>this.context.state).notes = [];\n        this.context.commit(\"recalculateVision\");\n        this.context.commit(\"recalculateMovement\");\n    }\n}\n\nexport const gameStore = getModule(GameStore);\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./confirm.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./confirm.vue?vue&type=script&lang=ts&\"","import { ServerAura } from \"@/game/comm/types/shapes\";\n\nexport const aurasFromServer = (auras: ServerAura[]): Aura[] => {\n    const result = [];\n    for (const aura of auras) {\n        result.push({\n            uuid: aura.uuid,\n            visionSource: aura.vision_source,\n            visible: aura.visible,\n            name: aura.name,\n            value: aura.value,\n            dim: aura.dim,\n            colour: aura.colour,\n        });\n    }\n    return result;\n};\n\nexport const aurasToServer = (auras: Aura[]): ServerAura[] => {\n    const result = [];\n    for (const aura of auras) {\n        result.push({\n            uuid: aura.uuid,\n            vision_source: aura.visionSource,\n            visible: aura.visible,\n            name: aura.name,\n            value: aura.value,\n            dim: aura.dim,\n            colour: aura.colour,\n        });\n    }\n    return result;\n};\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--12-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./contextMenu.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--12-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./contextMenu.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./note.vue?vue&type=template&id=7a3669fd&scoped=true&\"\nimport script from \"./note.vue?vue&type=script&lang=ts&\"\nexport * from \"./note.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./note.vue?vue&type=style&index=0&id=7a3669fd&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7a3669fd\",\n  null\n  \n)\n\nexport default component.exports","import { render, staticRenderFns } from \"./initiative.vue?vue&type=template&id=62228cde&scoped=true&\"\nimport script from \"./initiative.vue?vue&type=script&lang=ts&\"\nexport * from \"./initiative.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./initiative.vue?vue&type=style&index=0&id=62228cde&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"62228cde\",\n  null\n  \n)\n\nexport default component.exports","import { ServerLayer } from \"@/game/comm/types/general\";\nimport { FOWLayer } from \"@/game/layers/fow\";\nimport { FOWPlayersLayer } from \"@/game/layers/fowplayers\";\nimport { GridLayer } from \"@/game/layers/grid\";\nimport { Layer } from \"@/game/layers/layer\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { gameStore } from \"@/game/store\";\n\nexport function createLayer(layerInfo: ServerLayer) {\n    // Create canvas element\n    const canvas = document.createElement(\"canvas\");\n    canvas.style.zIndex = layerManager.layers.length.toString();\n    canvas.width = window.innerWidth;\n    canvas.height = window.innerHeight;\n\n    // Create the Layer instance\n    let layer: Layer;\n    if (layerInfo.type_ === \"grid\") layer = new GridLayer(canvas, layerInfo.name);\n    else if (layerInfo.type_ === \"fow\") layer = new FOWLayer(canvas, layerInfo.name);\n    else if (layerInfo.type_ === \"fow-players\") layer = new FOWPlayersLayer(canvas, layerInfo.name);\n    else layer = new Layer(canvas, layerInfo.name);\n    layer.selectable = layerInfo.selectable;\n    layer.playerEditable = layerInfo.player_editable;\n    layerManager.addLayer(layer);\n\n    // Add the element to the DOM\n    const layers = document.getElementById(\"layers\");\n    if (layers === null) {\n        console.warn(\"Layers div is missing, this will prevent the main game board from loading!\");\n        return;\n    }\n    if (layerInfo.name !== \"fow-players\") layers.appendChild(canvas);\n\n    if (layerInfo.type_ === \"grid\" && layerInfo.size) gameStore.setGridSize({ gridSize: layerInfo.size, sync: false });\n    // Load layer shapes\n    layer.setShapes(layerInfo.shapes);\n}\n","import { render, staticRenderFns } from \"./labels.vue?vue&type=template&id=e477c214&scoped=true&\"\nimport script from \"./labels.vue?vue&type=script&lang=ts&\"\nexport * from \"./labels.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./labels.vue?vue&type=style&index=0&id=e477c214&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"e477c214\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./edit_dialog.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./edit_dialog.vue?vue&type=script&lang=ts&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{attrs:{\"id\":\"toolselect\"}},[_c('ul',_vm._l((_vm.visibleTools),function(tool){return _c('li',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.toolVisible(tool)),expression:\"toolVisible(tool)\"}],key:tool,ref:tool + '-selector',refInFor:true,class:{'tool-selected': _vm.currentTool === tool},on:{\"mousedown\":function($event){_vm.currentTool = tool}}},[_c('a',{attrs:{\"href\":\"#\"}},[_vm._v(_vm._s(tool))])])}),0)]),_c('div',[[_c('select-tool',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.currentTool === 'Select'),expression:\"currentTool === 'Select'\"}],ref:\"selectTool\"}),_c('pan-tool',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.currentTool === 'Pan'),expression:\"currentTool === 'Pan'\"}]}),_c('keep-alive',[_c('draw-tool',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.currentTool === 'Draw'),expression:\"currentTool === 'Draw'\"}]})],1),_c('ruler-tool',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.currentTool === 'Ruler'),expression:\"currentTool === 'Ruler'\"}]}),_c('map-tool',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.currentTool === 'Map'),expression:\"currentTool === 'Map'\"}]}),_c('filter-tool',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.currentTool === 'Filter'),expression:\"currentTool === 'Filter'\"}]}),_c('vision-tool',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.currentTool === 'Vision'),expression:\"currentTool === 'Vision'\"}]}),_c('shape-menu',{ref:\"shapecontext\"}),_c('createtoken-dialog',{ref:\"createtokendialog\"})]],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"17a953f2-vue-loader-template\\\"}!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tools.vue?vue&type=template&id=b6e1f51c&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('form',{on:{\"focusin\":_vm.focusin,\"focusout\":_vm.focusout,\"submit\":function($event){$event.preventDefault();return _vm.login($event)}}},[_c('fieldset',[_c('legend',{staticClass:\"legend\"},[_vm._v(\"PlanarAlly\")]),_c('div',{staticClass:\"input\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.username),expression:\"username\"}],attrs:{\"type\":\"text\",\"name\":\"username\",\"placeholder\":\"Username\",\"autocomplete\":\"username\",\"required\":\"\"},domProps:{\"value\":(_vm.username)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.username=$event.target.value}}}),_vm._m(0)]),_c('div',{staticClass:\"input\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.password),expression:\"password\"}],attrs:{\"type\":\"password\",\"name\":\"password\",\"placeholder\":\"Password\",\"autocomplete\":\"current-password\",\"required\":\"\"},domProps:{\"value\":(_vm.password)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.password=$event.target.value}}}),_vm._m(1)]),_c('div',{staticStyle:{\"display\":\"flex\"}},[_c('button',{staticStyle:{\"visibility\":\"hidden\",\"display\":\"none\"},attrs:{\"type\":\"submit\",\"name\":\"login\"}}),_c('button',{staticClass:\"submit\",attrs:{\"type\":\"button\",\"name\":\"register\",\"title\":\"Register\"},on:{\"click\":_vm.register}},[_c('i',{staticClass:\"fas fa-plus\"})]),_vm._m(2)])]),(_vm.error)?_c('div',{staticClass:\"feedback\"},[_c('p',{staticClass:\"error\"},[_c('strong',[_vm._v(\"Error:\")]),_vm._v(\"\\n      \"+_vm._s(_vm.error)+\"\\n    \")])]):_vm._e()])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',[_c('i',{staticClass:\"fas fa-user-circle\"})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',[_c('i',{staticClass:\"fas fa-lock\"})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('button',{staticClass:\"submit\",attrs:{\"type\":\"submit\",\"name\":\"login\",\"title\":\"Login\"}},[_c('i',{staticClass:\"fas fa-arrow-right\"})])}]\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"17a953f2-vue-loader-template\\\"}!../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./login.vue?vue&type=template&id=bc30fc14&scoped=true&\"","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\n\nimport Prompt from \"@/core/components/modals/prompt.vue\";\nimport EditDialog from \"@/game/ui/selection/edit_dialog.vue\";\n\nimport { getRef } from \"@/core/utils\";\nimport { socket } from \"@/game/api/socket\";\nimport { EventBus } from \"@/game/event-bus\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { Shape } from \"@/game/shapes/shape\";\n\n@Component({\n    components: {\n        \"edit-dialog\": EditDialog,\n    },\n})\nexport default class SelectionInfo extends Vue {\n    shape: Shape | null = null;\n\n    mounted() {\n        EventBus.$on(\"SelectionInfo.Shape.Set\", (shape: Shape | null) => {\n            this.shape = shape;\n        });\n    }\n\n    get shapes() {\n      if (this.shape === null) return [];\n      return [this.shape];\n    }\n\n    get visibleTrackers() {\n      if (this.shape === null) return [];\n      return this.shape.trackers.filter(tr => tr.name !== '' || tr.value !== 0);\n    }\n\n    get visibleAuras() {\n      if (this.shape === null) return [];\n      return this.shape.auras.filter(au => au.name !== '' || au.value !== 0);\n    }\n\n    beforeDestroy() {\n        EventBus.$off(\"SelectionInfo.Shape.Set\");\n    }\n\n    openEditDialog() {\n        (<any>this.$refs.editDialog).visible = true;\n    }\n    changeValue(object: Tracker | Aura, redraw: boolean) {\n        if (this.shape === null) return;\n        getRef<Prompt>(\"prompt\")\n            .prompt(`New  ${object.name} value:`, `Updating ${object.name}`)\n            .then(\n                (value: string) => {\n                    if (this.shape === null) return;\n                    const ogValue = object.value;\n                    if (value[0] === \"+\" || value[0] === \"-\") object.value += parseInt(value, 10);\n                    else object.value = parseInt(value, 10);\n                    if (isNaN(object.value)) object.value = ogValue;\n                    socket.emit(\"Shape.Update\", { shape: this.shape.asDict(), redraw, temporary: false });\n                    if (redraw) layerManager.invalidate();\n                },\n                () => {},\n            );\n    }\n}\n","import { AssetList } from \"@/core/comm/types\";\nimport { socket } from \"@/game/api/socket\";\nimport { BoardInfo, Note, ServerClient, ServerLocation } from \"@/game/comm/types/general\";\nimport { ServerShape } from \"@/game/comm/types/shapes\";\nimport { EventBus } from \"@/game/event-bus\";\nimport { GlobalPoint } from \"@/game/geom\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { createLayer } from \"@/game/layers/utils\";\nimport { gameManager } from \"@/game/manager\";\nimport { gameStore } from \"@/game/store\";\nimport { router } from \"@/router\";\nimport { zoomDisplay } from \"../utils\";\n\nsocket.on(\"connect\", () => {\n    console.log(\"Connected\");\n});\nsocket.on(\"disconnect\", () => {\n    console.log(\"Disconnected\");\n});\nsocket.on(\"connect_error\", (error: any) => {\n    console.error(\"Could not connect to game session.\");\n    router.push(\"/dashboard\");\n});\nsocket.on(\"error\", (error: any) => {\n    console.error(\"Game session does not exist.\");\n    router.push(\"/dashboard\");\n});\nsocket.on(\"redirect\", (destination: string) => {\n    console.log(\"redirecting\");\n    router.push(destination);\n});\nsocket.on(\"Room.Info.Set\", (data: { name: string; creator: string; invitationCode: string, isLocked: boolean, players: { id: number; name: string }[] }) => {\n    gameStore.setRoomName(data.name);\n    gameStore.setRoomCreator(data.creator);\n    gameStore.setInvitationCode(data.invitationCode);\n    gameStore.setIsLocked({isLocked: data.isLocked, sync: false});\n    gameStore.setPlayers(data.players);\n});\nsocket.on(\"Room.Info.InvitationCode.Set\", (invitationCode: string) => {\n    gameStore.setInvitationCode(invitationCode);\n    EventBus.$emit(\"DmSettings.RefreshedInviteCode\");\n});\nsocket.on(\"Room.Info.Players.Add\", (data: {id: number, name: string}) => {\n    gameStore.addPlayer(data);\n});\nsocket.on(\"Username.Set\", (username: string) => {\n    gameStore.setUsername(username);\n    gameStore.setDM(username === window.location.pathname.split(\"/\")[2]);\n});\nsocket.on(\"Client.Options.Set\", (options: ServerClient) => {\n    gameStore.setGridColour({ colour: options.grid_colour, sync: false });\n    gameStore.setFOWColour({ colour: options.fow_colour, sync: false });\n    gameStore.setRulerColour({ colour: options.ruler_colour, sync: false });\n    gameStore.setPanX(options.pan_x);\n    gameStore.setPanY(options.pan_y);\n    gameStore.setZoomDisplay(zoomDisplay(options.zoom_factor));\n    // gameStore.setZoomDisplay(0.5);\n    if (options.active_layer) layerManager.selectLayer(options.active_layer, false);\n    if (layerManager.getGridLayer() !== undefined) layerManager.getGridLayer()!.invalidate();\n});\nsocket.on(\"Location.Set\", (data: Partial<ServerLocation>) => {\n    if (data.name !== undefined) gameStore.setLocationName(data.name);\n    if (data.unit_size !== undefined) gameStore.setUnitSize({ unitSize: data.unit_size, sync: false });\n    if (data.use_grid !== undefined) gameStore.setUseGrid({ useGrid: data.use_grid, sync: false });\n    if (data.full_fow !== undefined) gameStore.setFullFOW({ fullFOW: data.full_fow, sync: false });\n    if (data.fow_opacity !== undefined) gameStore.setFOWOpacity({ fowOpacity: data.fow_opacity, sync: false });\n    if (data.fow_los !== undefined) gameStore.setLineOfSight({ fowLOS: data.fow_los, sync: false });\n    if (data.vision_min_range !== undefined) gameStore.setVisionRangeMin({ value: data.vision_min_range, sync: false });\n    if (data.vision_max_range !== undefined) gameStore.setVisionRangeMax({ value: data.vision_max_range, sync: false });\n    if (data.vision_mode !== undefined) {\n        gameStore.setVisionMode({ mode: data.vision_mode, sync: false });\n        gameStore.recalculateVision();\n        gameStore.recalculateMovement();\n    }\n});\nsocket.on(\"Position.Set\", (data: { x: number; y: number }) => {\n    gameManager.setCenterPosition(new GlobalPoint(data.x, data.y));\n});\nsocket.on(\"Notes.Set\", (notes: Note[]) => {\n    for (const note of notes) gameStore.newNote({ note, sync: false });\n});\nsocket.on(\"Asset.List.Set\", (assets: AssetList) => {\n    gameStore.setAssets(assets);\n});\nsocket.on(\"Board.Set\", (locationInfo: BoardInfo) => {\n    gameStore.clear();\n    gameStore.setLocations(locationInfo.locations);\n    document.getElementById(\"layers\")!.innerHTML = \"\";\n    gameStore.resetLayerInfo();\n    layerManager.reset();\n    for (const layer of locationInfo.layers) createLayer(layer);\n    // Force the correct opacity render on other layers.\n    layerManager.selectLayer(layerManager.getLayer()!.name, false);\n    EventBus.$emit(\"Initiative.Clear\");\n    gameStore.recalculateVision();\n    gameStore.recalculateMovement();\n    gameStore.setBoardInitialized(true);\n});\nsocket.on(\"Gridsize.Set\", (gridSize: number) => {\n    gameStore.setGridSize({ gridSize, sync: false });\n});\nsocket.on(\"Shape.Add\", (shape: ServerShape) => {\n    gameManager.addShape(shape);\n});\nsocket.on(\"Shape.Remove\", (shape: ServerShape) => {\n    if (!layerManager.UUIDMap.has(shape.uuid)) {\n        console.log(`Attempted to remove an unknown shape`);\n        return;\n    }\n    if (!layerManager.hasLayer(shape.layer)) {\n        console.log(`Attempted to remove shape from an unknown layer ${shape.layer}`);\n        return;\n    }\n    const layer = layerManager.getLayer(shape.layer)!;\n    layer.removeShape(layerManager.UUIDMap.get(shape.uuid)!, false);\n    layer.invalidate(false);\n});\nsocket.on(\"Shape.Order.Set\", (data: { shape: ServerShape; index: number }) => {\n    if (!layerManager.UUIDMap.has(data.shape.uuid)) {\n        console.log(`Attempted to move the shape order of an unknown shape`);\n        return;\n    }\n    if (!layerManager.hasLayer(data.shape.layer)) {\n        console.log(`Attempted to remove shape from an unknown layer ${data.shape.layer}`);\n        return;\n    }\n    const shape = layerManager.UUIDMap.get(data.shape.uuid)!;\n    const layer = layerManager.getLayer(shape.layer)!;\n    layer.moveShapeOrder(shape, data.index, false);\n});\nsocket.on(\"Shape.Layer.Change\", (data: { uuid: string; layer: string }) => {\n    const shape = layerManager.UUIDMap.get(data.uuid);\n    if (shape === undefined) return;\n    shape.moveLayer(data.layer, false);\n});\nsocket.on(\"Shape.Update\", (data: { shape: ServerShape; redraw: boolean; move: boolean, temporary: boolean }) => {\n    gameManager.updateShape(data);\n});\nsocket.on(\"Temp.Clear\", (shapes: ServerShape[]) => {\n    shapes.forEach(shape => {\n        if (!layerManager.UUIDMap.has(shape.uuid)) {\n            console.log(\"Attempted to remove an unknown temporary shape\");\n            return;\n        }\n        if (!layerManager.hasLayer(shape.layer)) {\n            console.log(`Attempted to remove shape from an unknown layer ${shape.layer}`);\n            return;\n        }\n        const realShape = layerManager.UUIDMap.get(shape.uuid)!;\n        layerManager.getLayer(shape.layer)!.removeShape(realShape, false);\n    });\n});\nsocket.on(\"Labels.Set\", (labels: Label[]) => {\n    for (const label of labels) gameStore.addLabel(label);\n});\nsocket.on(\"Label.Visibility.Set\", (data: { user: string; uuid: string; visible: boolean }) => {\n    gameStore.setLabelVisibility(data);\n});\nsocket.on(\"Label.Add\", (data: Label) => {\n    gameStore.addLabel(data);\n});\nsocket.on(\"Label.Delete\", (data: { user: string; uuid: string }) => {\n    gameStore.deleteLabel(data);\n});\nsocket.on(\"Labels.Filter.Add\", (uuid: string) => {\n    gameStore.labelFilters.push(uuid);\n    layerManager.invalidate();\n})\nsocket.on(\"Labels.Filter.Remove\", (uuid: string) => {\n    const idx = gameStore.labelFilters.indexOf(uuid);\n    if (idx >= 0) {\n        gameStore.labelFilters.splice(idx, 1);\n        layerManager.invalidate();\n    }\n})\nsocket.on(\"Labels.Filters.Set\", (filters: string[]) => {\n    gameStore.setLabelFilters(filters);\n})\n"],"sourceRoot":""}