{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/core/components/colorpicker.vue?1c78","webpack:///./src/game/ui/tools/tool.vue?5b17","webpack:///./src/game/ui/initiative.vue?e80a","webpack:///./src/game/ui/tools/tools.vue?7eab","webpack:///./src/game/ui/note.vue?a110","webpack:///./src/game/game.vue?5550","webpack:///./src/game/ui/selection/edit_dialog.vue?022f","webpack:///./src/core/components/modals/prompt.vue?9eac","webpack:///./src/auth/login.vue?0150","webpack:///./src/core/components/contextmenu.vue?a0a2","webpack:///./src/game/ui/menu/asset_node.vue?53fd","webpack:///./src/game/ui/selection/selection_info.vue?284c","webpack:///./src/game/ui/selection/shapecontext.vue?5969","webpack:///./src/game/ui/tools/selectcontext.vue?49ed","webpack:///./src/core/components/modals/modal.vue?09bc","webpack:///./src/game/ui/tools/draw.vue?d35e","webpack:///./src/App.vue?5b27","webpack:///./src/App.vue","webpack:///./src/auth/login.vue?d0c4","webpack:///./src/auth/login.vue?283c","webpack:///./src/auth/login.vue?c159","webpack:///./src/auth/login.vue","webpack:///./src/store.ts","webpack:///./src/auth/logout.ts","webpack:///./src/core/components/load.vue?4136","webpack:///./src/core/components/load.vue?8cd0","webpack:///./src/core/components/load.vue?18c2","webpack:///./src/core/components/load.vue","webpack:///./src/core/store.ts","webpack:///./src/dashboard/main.vue?896b","webpack:///./src/dashboard/main.vue?3f72","webpack:///./src/dashboard/main.vue?d5a9","webpack:///./src/dashboard/main.vue","webpack:///./src/game/game.vue?89e5","webpack:///./src/core/components/modals/confirm.vue?bfeb","webpack:///./src/core/components/modals/modal.vue?a8d1","webpack:///./src/core/components/modals/modal.vue?44ae","webpack:///./src/core/components/modals/modal.vue?09d2","webpack:///./src/core/components/modals/modal.vue","webpack:///src/core/components/modals/confirm.vue","webpack:///./src/core/components/modals/confirm.vue?0f8a","webpack:///./src/core/components/modals/confirm.vue","webpack:///./src/core/components/modals/prompt.vue?2192","webpack:///src/core/components/modals/prompt.vue","webpack:///./src/core/components/modals/prompt.vue?130d","webpack:///./src/core/components/modals/prompt.vue","webpack:///./src/game/geom.ts","webpack:///./src/game/shapes/boundingrect.ts","webpack:///./src/game/api/socket.ts","webpack:///./src/core/utils.ts","webpack:///./src/game/bvh/node.ts","webpack:///./src/game/units.ts","webpack:///./src/game/bvh/bvh.ts","webpack:///./src/game/api/utils.ts","webpack:///./src/game/store.ts","webpack:///./src/game/comm/conversion/aura.ts","webpack:///./src/game/shapes/shape.ts","webpack:///./src/game/ui/tools/utils.ts","webpack:///./src/game/shapes/baserect.ts","webpack:///./src/game/shapes/asset.ts","webpack:///./src/game/layers/manager.ts","webpack:///./src/game/ui/initiative.vue?d80c","webpack:///./src/game/ui/initiative.vue?36c8","webpack:///./src/game/ui/initiative.vue?c7e1","webpack:///./src/game/ui/initiative.vue","webpack:///./src/game/ui/menu/menu.vue?5cb8","webpack:///./src/core/components/colorpicker.vue?8551","webpack:///./src/core/components/colorpicker.vue?4d88","webpack:///./src/core/components/colorpicker.vue?1682","webpack:///./src/core/components/colorpicker.vue","webpack:///./src/game/ui/menu/asset_node.vue?c4e4","webpack:///./src/game/ui/menu/asset_node.vue?f519","webpack:///./src/game/ui/menu/asset_node.vue?1f27","webpack:///./src/game/ui/menu/asset_node.vue","webpack:///./src/game/ui/menu/menu.vue?ae57","webpack:///./src/game/ui/menu/menu.vue?8b23","webpack:///./src/game/ui/menu/menu.vue","webpack:///./src/game/ui/note.vue?c7c1","webpack:///./src/game/ui/note.vue?f9bd","webpack:///./src/game/ui/note.vue?49b7","webpack:///./src/game/ui/note.vue","webpack:///./src/game/ui/selection/selection_info.vue?24ea","webpack:///./src/game/ui/selection/edit_dialog.vue?4cd1","webpack:///./src/game/ui/selection/edit_dialog.vue?9a84","webpack:///./src/game/ui/selection/edit_dialog.vue?3800","webpack:///./src/game/ui/selection/edit_dialog.vue","webpack:///./src/game/ui/selection/selection_info.vue?5d62","webpack:///./src/game/ui/selection/selection_info.vue?2310","webpack:///./src/game/ui/selection/selection_info.vue","webpack:///./src/game/ui/tools/tools.vue?b31d","webpack:///./src/game/utils.ts","webpack:///./src/game/shapes/rect.ts","webpack:///./src/game/shapes/text.ts","webpack:///./src/game/ui/annotation.ts","webpack:///./src/game/shapes/circle.ts","webpack:///./src/game/shapes/circulartoken.ts","webpack:///./src/game/shapes/line.ts","webpack:///./src/game/shapes/multiline.ts","webpack:///./src/game/shapes/utils.ts","webpack:///./src/game/manager.ts","webpack:///./src/game/ui/selection/shapecontext.vue?a834","webpack:///./src/core/components/contextmenu.vue?7f1a","webpack:///src/core/components/contextmenu.vue","webpack:///./src/core/components/contextmenu.vue?93cd","webpack:///./src/core/components/contextmenu.vue","webpack:///./src/game/ui/selection/shapecontext.vue?1cf6","webpack:///./src/game/ui/selection/shapecontext.vue?aac0","webpack:///./src/game/ui/selection/shapecontext.vue","webpack:///./src/game/ui/tools/createtoken_modal.vue?5578","webpack:///./src/game/ui/tools/createtoken_modal.vue?d0df","webpack:///./src/game/ui/tools/createtoken_modal.vue?f918","webpack:///./src/game/ui/tools/createtoken_modal.vue","webpack:///./src/game/ui/tools/draw.vue?12f9","webpack:///./src/game/ui/tools/tool.vue?03eb","webpack:///./src/game/ui/tools/tool.vue?d136","webpack:///./src/game/ui/tools/tool.vue?8ce3","webpack:///./src/game/ui/tools/tool.vue","webpack:///./src/game/ui/tools/draw.vue?b96d","webpack:///./src/game/ui/tools/draw.vue?1261","webpack:///./src/game/ui/tools/draw.vue","webpack:///./src/game/ui/tools/map.vue?ccb9","webpack:///./src/game/ui/tools/map.vue?a3ab","webpack:///./src/game/ui/tools/map.vue?284a","webpack:///./src/game/ui/tools/map.vue","webpack:///./src/game/ui/tools/pan.vue?a0ac","webpack:///./src/game/ui/tools/pan.vue?5197","webpack:///./src/game/ui/tools/pan.vue?a055","webpack:///./src/game/ui/tools/pan.vue","webpack:///./src/game/ui/tools/ruler.vue?7d2a","webpack:///./src/game/ui/tools/ruler.vue?cb99","webpack:///./src/game/ui/tools/ruler.vue?f684","webpack:///./src/game/ui/tools/ruler.vue","webpack:///./src/game/ui/tools/select.vue?56f6","webpack:///./src/game/ui/tools/selectcontext.vue?74cf","webpack:///./src/game/ui/tools/selectcontext.vue?d61f","webpack:///./src/game/ui/tools/selectcontext.vue?6f66","webpack:///./src/game/ui/tools/selectcontext.vue","webpack:///./src/game/ui/tools/select.vue?49f9","webpack:///./src/game/ui/tools/select.vue?b7fd","webpack:///./src/game/ui/tools/select.vue","webpack:///./src/game/ui/tools/tools.vue?25b2","webpack:///./src/game/ui/tools/tools.vue?fa4a","webpack:///./src/game/ui/tools/tools.vue","webpack:///./src/game/settings.ts","webpack:///./src/game/layers/layer.ts","webpack:///./src/game/layers/fow.ts","webpack:///./src/game/layers/fowplayers.ts","webpack:///./src/game/layers/grid.ts","webpack:///./src/game/layers/utils.ts","webpack:///./src/game/api/events.ts","webpack:///./src/game/game.vue?5592","webpack:///./src/game/game.vue?d01c","webpack:///./src/game/game.vue","webpack:///./src/router.ts","webpack:///./src/main.ts","webpack:///./src/auth/login.vue?834a","webpack:///./src/dashboard/main.vue?0298","webpack:///./src/core/components/modals/confirm.vue?41c5","webpack:///./src/game/ui/tools/createtoken_modal.vue?46a4","webpack:///./src/game/ui/menu/menu.vue?fe8b"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","installedChunks","push","Object","prototype","hasOwnProperty","call","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","app","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_colorpicker_vue_vue_type_style_index_0_id_2c377313_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_colorpicker_vue_vue_type_style_index_0_id_2c377313_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_tool_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_tool_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_initiative_vue_vue_type_style_index_0_id_942876ae_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_initiative_vue_vue_type_style_index_0_id_942876ae_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_tools_vue_vue_type_style_index_0_id_69cbb9be_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_tools_vue_vue_type_style_index_0_id_69cbb9be_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_note_vue_vue_type_style_index_0_id_3ac7fb3c_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_note_vue_vue_type_style_index_0_id_3ac7fb3c_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_game_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_game_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_edit_dialog_vue_vue_type_style_index_0_id_16427a8e_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_edit_dialog_vue_vue_type_style_index_0_id_16427a8e_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_prompt_vue_vue_type_style_index_0_id_619acb01_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_prompt_vue_vue_type_style_index_0_id_619acb01_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_login_vue_vue_type_style_index_1_id_af17832e_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_login_vue_vue_type_style_index_1_id_af17832e_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_contextmenu_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_contextmenu_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_asset_node_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_asset_node_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_selection_info_vue_vue_type_style_index_0_id_75b524c1_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_selection_info_vue_vue_type_style_index_0_id_75b524c1_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_shapecontext_vue_vue_type_style_index_0_id_e2ea3ef2_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_shapecontext_vue_vue_type_style_index_0_id_e2ea3ef2_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_selectcontext_vue_vue_type_style_index_0_id_9e129ee8_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_selectcontext_vue_vue_type_style_index_0_id_9e129ee8_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_modal_vue_vue_type_style_index_0_id_0f7d191f_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_modal_vue_vue_type_style_index_0_id_0f7d191f_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_draw_vue_vue_type_style_index_0_id_04c29104_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_draw_vue_vue_type_style_index_0_id_04c29104_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","render","_vm","this","_h","$createElement","_c","_self","attrs","id","ref","staticRenderFns","script","component","componentNormalizer","options","__file","App","loginvue_type_template_id_af17832e_scoped_true_render","on","focusin","focusout","submit","$event","preventDefault","login","staticClass","_v","directives","rawName","expression","type","placeholder","required","domProps","input","target","composing","username","_m","password","staticStyle","display","visibility","title","click","register","_s","error","_e","loginvue_type_template_id_af17832e_scoped_true_staticRenderFns","loginvue_type_script_lang_ts_Login","vue_esm","[object Object]","axios_default","a","post","then","response","$store","commit","$router","$route","query","redirect","catch","statusText","event","nextElementSibling","span","style","opacity","tslib_es6","vue_class_component_common_default","loginvue_type_script_lang_ts_","auth_loginvue_type_script_lang_ts_","login_component","use","vuex_esm","store","Store","logout_Logout","to","from","next","path","logout","loadvue_type_template_id_09531baa_render","message","loadvue_type_template_id_09531baa_staticRenderFns","loadvue_type_script_lang_ts_","components_loadvue_type_script_lang_ts_","load_component","load","store_CoreStore","esm","authenticated","initialized","auth","init","dynamic","core_store","mainvue_type_template_id_79d5db09_render","owned","joined","_l","room","createRoom","tag","mainvue_type_template_id_79d5db09_staticRenderFns","registerHooks","mainvue_type_script_lang_ts_Dashboard","vm","err","mainvue_type_script_lang_ts_","dashboard_mainvue_type_script_lang_ts_","main_component","main","gamevue_type_template_id_b516b37e_render","mouseleave","ready","mousedown","mouseup","mousemove","contextmenu","stopPropagation","dragover","drop","gamevue_type_template_id_b516b37e_staticRenderFns","confirmvue_type_template_id_7c994a10_scoped_true_render","visible","close","scopedSlots","_u","fn","draggable","dragstart","dragStart","dragend","dragEnd","confirm","yes","no","deny","confirmvue_type_template_id_7c994a10_scoped_true_staticRenderFns","modalvue_type_template_id_0f7d191f_scoped_true_render","class","modal-mask","mask","dialog-mask","dragOver","_t","modalvue_type_template_id_0f7d191f_scoped_true_staticRenderFns","modalvue_type_script_lang_ts_","extend","props","Boolean","default","positioned","offsetX","offsetY","screenX","screenY","dragging","updatePosition","methods","$emit","container","$refs","offsetWidth","offsetHeight","left","innerWidth","top","innerHeight","dataTransfer","setData","setDragImage","clientX","clientY","pageX","pageY","parseInt","modals_modalvue_type_script_lang_ts_","modal_component","modal","confirmvue_type_script_lang_js_","components","resolve","reject","undefined","$nextTick","focus","Promise","modals_confirmvue_type_script_lang_js_","confirm_component","modals_confirm","promptvue_type_template_id_619acb01_scoped_true_render","question","keyup","_k","keyCode","answer","promptvue_type_template_id_619acb01_scoped_true_staticRenderFns","promptvue_type_script_lang_js_","modals_promptvue_type_script_lang_js_","prompt_component","modals_prompt","Point","x","y","vec","other","Vector","dimension","GlobalPoint","super","add","subtract","clone","LocalPoint","Math","sqrt","pow","scale","Ray","origin","direction","tMax","Infinity","p1","p2","maxT","abs","t1","t2","distance","boundingrect_BoundingRect","topleft","w","h","topLeft","topRight","botRight","botLeft","point","vector","xmin","min","xmax","max","ymin","ymax","botright","ray","invDir","dirIsNeg","txmin","getDiagCorner","txmax","tymin","tymax","hit","centerPoint","corner","sw","inCorner","socket","lib_default","location","protocol","host","autoConnect","createConnection","route","io","opts","params","creator","connect","api_socket","uuidv4","replace","random","v","toString","alphSort","b","toLowerCase","partition","arr","predicate","ret","forEach","calcFontScale","ctx","text","width","height","points","Number","font","split","fontWidth","measureText","getRef","active","src_main","$children","activeComponent","BoundingNode","nPrimitives","bbox","children","LeafNode","first","firstPrimOffset","InteriorNode","c1","c2","union","g2l","obj","z","game_store","zoomFactor","panX","panY","g2lx","g2ly","g2lz","getUnitDistance","unitSize","gridSize","g2lr","l2g","multiply","l2gx","l2gy","l2gz","bvh_BoundingVolume","shapes","totalNodes","buildData","orderedPrims","nodes","offset","root","shape","manager","UUIDMap","index","getBoundingBox","center","recursiveBuild","compact","getLayer","node","strokeRect","start","end","createLeaf","centroidBbox","getMaxExtent","pMid","partitionedData","flattened","concat","console","log","mid","stopOnFirstHit","intersect","tMin","todoOffset","nodeNum","todo","inverse","dirIsNegative","intersectP","secondChildOffset","flatten","myOffset","secondOffset","primitivesOffset","size","bvh","sendClientOptions","store_GameStore","layers","selectedLayerIndex","boardInitialized","locations","assets","notes","IS_DM","roomName","roomCreator","invitationCode","gridColour","fowColour","rulerColour","useGrid","fullFOW","fowOpacity","fowLOS","locationName","visionSources","visionBlockers","annotations","movementblockers","ownedtokens","BV","selectedLayer","isDM","code","indexOf","sync","emit","note","newZoomValue","zoomLocation","oldLoc","newLoc","diff","invalidate","colour","getGridLayer","drawGrid","increase","unit_size","gridLayer","canvas","use_grid","invalidateLight","full_fow","fow_opacity","fow_los","actualNote","find","uuid","filter","context","getters","namespaced","aurasFromServer","auras","aura","visionSource","vision_source","dim","aurasToServer","shape_Shape","refPoint","fillColour","strokeColour","trackers","owners","visionObstruction","movementObstruction","isToken","showHighlight","annotation","globalCompositeOperation","Map","skipLightUpdate","layer","self","obstructionIndex","changeBV","recalculateBV","au","ls","findIndex","some","blocksMovement","ownedBy","includes","type_","draw_operator","movement_obstruction","vision_obstruction","fill_colour","stroke_colour","is_token","JSON","stringify","parse","strokeStyle","beginPath","loc","innerRange","fillStyle","gradient","createRadialGradient","tc","tinycolor_default","addColorStop","setAlpha","toRgbString","lastPath","fill","e","arc","PI","warn","group","source","has_img","effects","oldLayer","newLayer","calculateDelta","delta","sel","done","ogSelBBox","newSelBBox","refine","movementBlocker","blocker","blockerBBox","found","intersectsWithInner","fromPoints","normalize","bCenter","sCenter","ux","uy","dx","dot","dy","baserect_BaseRect","assign","getBaseDict","visibleInCanvas","coreVisible","gs","mx","my","targetX","targetY","round","resizedir","asset_Asset","img","src","fromDict","draw","drawImage","manager_LayerManager","interval","lm","setInterval","playerEditable","selectable","addLayer","globalAlpha","selectLayer","clearSelection","selection","getSelection","isVisionLayer","image","document","createElement","getData","asset","URL","pathname","addShape","initiativevue_type_template_id_942876ae_scoped_true_render","fakeSetData","disabled","state","game","change","updateOrder","model","callback","$$v","actor","flex-direction","align-items","initiative-selected","currentActor","cursor","mouseenter","toggleHighlight","modifiers","lazy","number","notAllowed","owns","$set","_n","syncInitiative","blur","$forceUpdate","createEffect","getDefaultEffect","toggleOption","removeInitiative","effect","updateEffect","turns","roundCounter","setRound","setTurn","nextTurn","initiativevue_type_template_id_942876ae_scoped_true_staticRenderFns","vuedraggable_default","initiativevue_type_script_lang_ts_","actorId","initiative","map","order","show","option","effectIndex","syncEffect","ui_initiativevue_type_script_lang_ts_","initiative_component","ui_initiative","menuvue_type_template_id_4bb01ba9_scoped_true_render","settings","rm-list-dm","enter","rm","transition","settingsClick","overflow-y","overflow-x","href","createNote","openNote","for","checked","Array","isArray","_i","$$a","$$el","$$c","$$i","step","readonly","color","update:color","text-decoration","position","bottom","changeLocation","createLocation","menuvue_type_template_id_4bb01ba9_scoped_true_staticRenderFns","colorpickervue_type_template_id_2c377313_scoped_true_render","currentTarget","open","transparent","closePicker","z-index","tabindex","updateColor","colorpickervue_type_template_id_2c377313_scoped_true_staticRenderFns","colorpickervue_type_script_lang_ts_","chrome-picker","vue_color_min","chromePicker","val","rgba","setPosition","$el","newColor","rect","getBoundingClientRect","right","components_colorpickervue_type_script_lang_ts_","colorpicker_component","colorpicker","asset_nodevue_type_template_id_1c906569_render","folder","toggle","file","mouseover","showImage","hash","mouseout","asset_nodevue_type_template_id_1c906569_staticRenderFns","asset_nodevue_type_script_lang_ts_","computed","keys","el","sort","__files","imageSource","querySelector","menu_asset_nodevue_type_script_lang_ts_","asset_node_component","asset_node","menuvue_type_script_lang_ts_","color-picker","asset-node","classList","contains","prompt","menu_menuvue_type_script_lang_ts_","menu_component","menu","notevue_type_template_id_3ac7fb3c_scoped_true_render","select","font-size","updateNote","calcHeight","removeNote","notevue_type_template_id_3ac7fb3c_scoped_true_staticRenderFns","notevue_type_script_lang_ts_","textarea","scrollHeight","ui_notevue_type_script_lang_ts_","note_component","ui_note","selection_infovue_type_template_id_75b524c1_scoped_true_render","openEditDialog","tracker","changeValue","maxvalue","selection_infovue_type_template_id_75b524c1_scoped_true_staticRenderFns","edit_dialogvue_type_template_id_16427a8e_scoped_true_render","grid-column","updateShape","grid-column-start","setToken","setVisionBlocker","setMovementBlocker","owner","updateOwner","removeOwner","removeTracker","updateAuraColour","updateAuraVisionSource","removeAura","updateAnnotation","edit_dialogvue_type_template_id_16427a8e_scoped_true_staticRenderFns","edit_dialogvue_type_script_lang_ts_","addEmpty","redraw","asDict","temporary","setIsToken","checkVisionSources","setMovementBlock","hadAnnotation","an","hasLayer","oldValue","ownerIndex","tr","selection_edit_dialogvue_type_script_lang_ts_","edit_dialog_component","edit_dialog","selection_infovue_type_script_lang_ts_","edit-dialog","editDialog","ogValue","isNaN","selection_selection_infovue_type_script_lang_ts_","selection_info_component","selection_info","toolsvue_type_template_id_69cbb9be_scoped_true_render","tool","dmTools","refInFor","tool-selected","currentTool","toolsvue_type_template_id_69cbb9be_scoped_true_staticRenderFns","getMouse","getFogColour","opposite","rect_Rect","fillRect","lineWidth","text_Text","angle","save","dest","translate","rotate","textAlign","getLines","line","fillText","restore","resizeDir","lines","lineHeight","widths","allLines","maxWidth","targetLine","words","word","testLine","metrics","testWidth","annotation_AnnotationManager","shown","annotationText","annotationRect","getMaxWidth","getMaxHeight","circle_Circle","radius","stroke","circulartoken_CircularToken","textBaseline","xs","ys","transform","tinycolor","toHexString","line_Line","startPoint","endPoint","x2","y2","moveTo","lineTo","multiline_MultiLine","minx","maxx","miny","maxy","lineCap","lineJoin","createShapeFromDict","dummy","has","sh","circ","token","multiline","Image","startsWith","onload","manager_GameManager","selectedTool","annotationManager","oldShape","redrawInitiative","move","gameManager","game_manager","shapecontextvue_type_template_id_e2ea3ef2_scoped_true_render","getActiveLayer","getLayers","background-color","setLayer","moveToBack","moveToFront","addInitiative","getInitiativeWord","shapecontextvue_type_template_id_e2ea3ef2_scoped_true_staticRenderFns","contextmenuvue_type_template_id_128fccc8_render","contextmenuvue_type_template_id_128fccc8_staticRenderFns","contextmenuvue_type_script_lang_js_","components_contextmenuvue_type_script_lang_js_","contextmenu_component","shapecontextvue_type_script_lang_ts_","activeLayer","moveLayer","moveShapeOrder","getInitiativeRepr","selection_shapecontextvue_type_script_lang_ts_","shapecontext_component","shapecontext","createtoken_modalvue_type_template_id_2ebb16e9_scoped_true_render","borderColour","createtoken_modalvue_type_template_id_2ebb16e9_scoped_true_staticRenderFns","createtoken_modalvue_type_script_lang_ts_","watch","newValue","updatePreview","getContext","clearRect","tools_createtoken_modalvue_type_script_lang_ts_","createtoken_modal_component","createtoken_modal","drawvue_type_template_id_04c29104_scoped_true_render","--detailRight","detailRight","--detailArrow","detailArrow","option-selected","modeSelect","shapeSelect","max-width","brushSize","drawvue_type_template_id_04c29104_scoped_true_staticRenderFns","toolvue_type_template_id_22bcb02a_render","toolvue_type_template_id_22bcb02a_staticRenderFns","toolvue_type_script_lang_ts_","selected","$parent","$on","onMouseDown","onMouseUp","onMouseMove","onContextMenu","onDeselect","onSelect","tools_toolvue_type_script_lang_ts_","tool_component","drawvue_type_script_lang_ts_","brushHelper","modes","onModeChange","set","delete","fowLayer","normalLayer","setupBrush","removeShape","helperSize","altKey","resizeToGrid","tools_drawvue_type_script_lang_ts_","draw_component","mapvue_type_template_id_46457c2f_render","xCount","yCount","mapvue_type_template_id_46457c2f_staticRenderFns","mapvue_type_script_lang_ts_","tools_mapvue_type_script_lang_ts_","map_component","panvue_type_template_id_f2a859bc_render","panvue_type_template_id_f2a859bc_staticRenderFns","panvue_type_script_lang_ts_","panStart","mouse","increasePanX","increasePanY","tools_panvue_type_script_lang_ts_","pan_component","pan","rulervue_type_template_id_db85240c_render","rulervue_type_template_id_db85240c_staticRenderFns","rulervue_type_script_lang_ts_","ruler","diffsign","sign","xdiff","ydiff","label","atan2","xmid","ymid","tools_rulervue_type_script_lang_ts_","ruler_component","selectvue_type_template_id_e4054410_render","selectvue_type_template_id_e4054410_staticRenderFns","selectcontextvue_type_template_id_9e129ee8_scoped_true_render","bringPlayers","createToken","showInitiative","selectcontextvue_type_template_id_9e129ee8_scoped_true_staticRenderFns","selectcontextvue_type_script_lang_ts_","createtokendialog","$root","tools_selectcontextvue_type_script_lang_ts_","selectcontext_component","SelectOperations","selectcontext","selectvue_type_script_lang_ts_","ContextMenu","showContextMenu","Noop","resizeDirection","deltaChanged","dragRay","selectionStartPoint","selectionHelper","globalMouse","selectionStack","getCorner","selectionInfo","Resize","Drag","localRefPoint","GroupSelect","og","ogDelta","shiftKey","resize","bb","gm","body","snapToGrid","tools_selectvue_type_script_lang_ts_","select_component","tools_select","toolsvue_type_script_lang_ts_","select-tool","pan-tool","draw-tool","ruler-tool","map-tool","shape-menu","createtoken-dialog","tools","tagName","targetTool","button","buttons","setActiveText","tools_toolsvue_type_script_lang_ts_","tools_component","Settings","angleSteps","drawAngleLines","drawFirstLightHit","skipPlayerFOW","skipLightFOW","tempFill","layer_Layer","valid","selectionColor","selectionWidth","serverShape","lsI","lbI","mbI","anI","annotationIndex","ownedIndex","doClear","ogOP","clear","drawAuras","destinationIndex","oldIdx","fow_FOWLayer","preFogShapes","idx","originalOperation","dctx","lcenter","alm","light","auraLength","auraCircle","lastArcAngle","Path2D","firstPoint","anglePoint","cos","sin","lightRay","hitResult","preShape","ogComposite","fowplayers_FOWPlayersLayer","maxLength","tokenId","closePath","grid_GridLayer","createLayer","layerInfo","zIndex","player_editable","getElementById","appendChild","setShapes","destination","setRoomName","setRoomCreator","setInvitationCode","setUsername","setDM","setGridColour","grid_colour","setFOWColour","fow_colour","setRulerColour","ruler_colour","setPanX","pan_x","setPanY","pan_y","setZoomFactor","zoom_factor","active_layer","setLocationName","setUnitSize","setUseGrid","setFullFOW","setFOWOpacity","setLineOfSight","setCenterPosition","newNote","setAssets","locationInfo","setLocations","innerHTML","resetLayerInfo","setBoardInitialized","setGridSize","getActor","realShape","gamevue_type_script_lang_ts_","tool-bar","selection-info","prompt-dialog","confirm-dialog","menu-bar","initiative-dialog","zoom-slider","dist_default","note-dialog","updateZoom","files","dropAsset","game_gamevue_type_script_lang_ts_","game_component","vue_router_esm","router","base","routes","template","meta","beforeEach","matched","record","setAuthenticated","setInitialized","src_router","config","productionTip","$mount","__webpack_exports__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_login_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_login_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_main_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_main_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_confirm_vue_vue_type_style_index_0_id_7c994a10_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_confirm_vue_vue_type_style_index_0_id_7c994a10_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_createtoken_modal_vue_vue_type_style_index_0_id_2ebb16e9_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_createtoken_modal_vue_vue_type_style_index_0_id_2ebb16e9_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_menu_vue_vue_type_style_index_0_id_4bb01ba9_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_menu_vue_vue_type_style_index_0_id_4bb01ba9_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default"],"mappings":"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","file":"js/app.04bd4cd3.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./colorpicker.vue?vue&type=style&index=0&id=2c377313&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./colorpicker.vue?vue&type=style&index=0&id=2c377313&scoped=true&lang=css&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tool.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tool.vue?vue&type=style&index=0&lang=css&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./initiative.vue?vue&type=style&index=0&id=942876ae&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./initiative.vue?vue&type=style&index=0&id=942876ae&scoped=true&lang=css&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tools.vue?vue&type=style&index=0&id=69cbb9be&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tools.vue?vue&type=style&index=0&id=69cbb9be&scoped=true&lang=css&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./note.vue?vue&type=style&index=0&id=3ac7fb3c&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./note.vue?vue&type=style&index=0&id=3ac7fb3c&scoped=true&lang=css&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./game.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./game.vue?vue&type=style&index=0&lang=css&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./edit_dialog.vue?vue&type=style&index=0&id=16427a8e&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./edit_dialog.vue?vue&type=style&index=0&id=16427a8e&scoped=true&lang=css&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./prompt.vue?vue&type=style&index=0&id=619acb01&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./prompt.vue?vue&type=style&index=0&id=619acb01&scoped=true&lang=css&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./login.vue?vue&type=style&index=1&id=af17832e&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./login.vue?vue&type=style&index=1&id=af17832e&scoped=true&lang=css&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./contextmenu.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./contextmenu.vue?vue&type=style&index=0&lang=css&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./asset_node.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./asset_node.vue?vue&type=style&index=0&lang=css&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./selection_info.vue?vue&type=style&index=0&id=75b524c1&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./selection_info.vue?vue&type=style&index=0&id=75b524c1&scoped=true&lang=css&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./shapecontext.vue?vue&type=style&index=0&id=e2ea3ef2&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./shapecontext.vue?vue&type=style&index=0&id=e2ea3ef2&scoped=true&lang=css&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./selectcontext.vue?vue&type=style&index=0&id=9e129ee8&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./selectcontext.vue?vue&type=style&index=0&id=9e129ee8&scoped=true&lang=css&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./modal.vue?vue&type=style&index=0&id=0f7d191f&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./modal.vue?vue&type=style&index=0&id=0f7d191f&scoped=true&lang=css&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./draw.vue?vue&type=style&index=0&id=04c29104&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./draw.vue?vue&type=style&index=0&id=04c29104&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('router-view',{ref:\"activeComponent\"})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=3f062bf2&\"\nvar script = {}\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"App.vue\"\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('form',{on:{\"focusin\":_vm.focusin,\"focusout\":_vm.focusout,\"submit\":function($event){$event.preventDefault();return _vm.login($event)}}},[_c('fieldset',[_c('legend',{staticClass:\"legend\"},[_vm._v(\"PlanarAlly\")]),_c('div',{staticClass:\"input\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.username),expression:\"username\"}],attrs:{\"type\":\"text\",\"name\":\"username\",\"placeholder\":\"Username\",\"required\":\"\"},domProps:{\"value\":(_vm.username)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.username=$event.target.value}}}),_vm._m(0)]),_c('div',{staticClass:\"input\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.password),expression:\"password\"}],attrs:{\"type\":\"password\",\"name\":\"password\",\"placeholder\":\"Password\",\"required\":\"\"},domProps:{\"value\":(_vm.password)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.password=$event.target.value}}}),_vm._m(1)]),_c('div',{staticStyle:{\"display\":\"flex\"}},[_c('button',{staticStyle:{\"visibility\":\"hidden\",\"display\":\"none\"},attrs:{\"type\":\"submit\",\"name\":\"login\"}}),_c('button',{staticClass:\"submit\",attrs:{\"type\":\"button\",\"name\":\"register\",\"title\":\"Register\"},on:{\"click\":_vm.register}},[_c('i',{staticClass:\"fas fa-plus\"})]),_vm._m(2)])]),(_vm.error)?_c('div',{staticClass:\"feedback\"},[_c('p',{staticClass:\"error\"},[_c('strong',[_vm._v(\"Error:\")]),_vm._v(_vm._s(_vm.error))])]):_vm._e()])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',[_c('i',{staticClass:\"fas fa-user-circle\"})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',[_c('i',{staticClass:\"fas fa-lock\"})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('button',{staticClass:\"submit\",attrs:{\"type\":\"submit\",\"name\":\"login\",\"title\":\"Login\"}},[_c('i',{staticClass:\"fas fa-arrow-right\"})])}]\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport axios, { AxiosError, AxiosResponse } from \"axios\";\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\n\n@Component\nexport default class Login extends Vue {\n    username = \"\";\n    password = \"\";\n    error = \"\";\n\n    login() {\n        axios\n            .post(\"/api/login\", {\n                username: this.username,\n                password: this.password,\n            })\n            .then((response: AxiosResponse) => {\n                this.$store.commit(\"setAuthenticated\", true);\n                this.$router.push(<string>this.$route.query.redirect || \"/\");\n            })\n            .catch((error: AxiosError) => {\n                if (error.response) this.error = error.response.statusText;\n                else this.error = \"Unknown error occured\";\n            });\n    }\n\n    register() {\n        axios\n            .post(\"/api/register\", {\n                username: this.username,\n                password: this.password,\n            })\n            .then((response: AxiosResponse) => {\n                this.$store.commit(\"setAuthenticated\", true);\n            })\n            .catch((error: AxiosError) => {\n                if (error.response) this.error = error.response.statusText;\n                else this.error = \"Unknown error occured\";\n            });\n    }\n\n    focusin(event: { target?: { nextElementSibling?: HTMLElement } }) {\n        if (event.target && event.target.nextElementSibling) {\n            const span = event.target.nextElementSibling;\n            span.style.opacity = \"0\";\n        }\n    }\n\n    focusout(event: { target?: { nextElementSibling?: HTMLElement } }) {\n        if (event.target && event.target.nextElementSibling) {\n            const span = event.target.nextElementSibling;\n            span.style.opacity = \"1\";\n        }\n    }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--12-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./login.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--12-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./login.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./login.vue?vue&type=template&id=af17832e&scoped=true&\"\nimport script from \"./login.vue?vue&type=script&lang=ts&\"\nexport * from \"./login.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./login.vue?vue&type=style&index=0&lang=css&\"\nimport style1 from \"./login.vue?vue&type=style&index=1&id=af17832e&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"af17832e\",\n  null\n  \n)\n\ncomponent.options.__file = \"login.vue\"\nexport default component.exports","import Vue from \"vue\";\nimport Vuex from \"vuex\";\n\nimport { CoreState } from \"@/core/store\";\nimport { GameState } from \"@/game/store\";\n\nVue.use(Vuex);\n\nexport interface RootState {\n    core: CoreState;\n    game: GameState;\n}\n\nexport default new Vuex.Store<RootState>({});\n","import Axios from \"axios\";\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\n\nimport store from \"@/store\";\nimport { Route } from \"vue-router\";\n\n@Component\nexport default class Logout extends Vue {\n    beforeRouteEnter(to: Route, from: Route, next: ({}) => {}) {\n        Axios.post(\"/api/logout\").then(() => {\n            store.commit(\"setAuthenticated\", false);\n            next({ path: \"/auth/login\" });\n        });\n    }\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_vm._v(\" \"+_vm._s(_vm.message)+\" \")])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\nimport Vue from \"vue\";\n\nexport default Vue.component(\"Load\", {\n    data: () => ({\n        message: \"Loading...\",\n    }),\n});\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./load.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./load.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./load.vue?vue&type=template&id=09531baa&\"\nimport script from \"./load.vue?vue&type=script&lang=ts&\"\nexport * from \"./load.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"load.vue\"\nexport default component.exports","import store from \"@/store\";\n\nimport { getModule, Module, Mutation, VuexModule } from \"vuex-module-decorators\";\n\nexport interface CoreState {\n    authenticated: boolean;\n    initialized: boolean;\n}\n\n@Module({ dynamic: true, store, name: \"core\" })\nclass CoreStore extends VuexModule {\n    authenticated = false;\n    initialized = false;\n\n    @Mutation\n    setAuthenticated(auth: boolean) {\n        this.authenticated = auth;\n    }\n\n    @Mutation\n    setInitialized(init: boolean) {\n        this.initialized = init;\n    }\n}\n\nexport default getModule(CoreStore);\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"formcontainer\"}},[(_vm.owned || _vm.joined)?_c('form',[_c('fieldset',[_c('legend',{staticClass:\"legend\"},[_vm._v(\"Your sessions\")]),_c('div',{staticClass:\"input\"},[_vm._l((_vm.owned),function(room,i){return _c('router-link',{key:'o-'+i,attrs:{\"to\":'/game/' + room[1] + '/' + room[0]}},[_vm._v(_vm._s(room[0]))])}),_vm._l((_vm.joined),function(room,i){return _c('router-link',{key:'j-'+i,attrs:{\"to\":'/game/' + room[1] + '/' + room[0]}},[_vm._v(_vm._s(room[1])+\"/\"+_vm._s(room[0]))])})],2)])]):_vm._e(),_vm._m(0),_c('form',{on:{\"submit\":function($event){$event.preventDefault();return _vm.createRoom($event)}}},[_c('fieldset',[(!_vm.owned && !_vm.joined)?_c('legend',{staticClass:\"legend\"},[_vm._v(\"Create a session\")]):_c('div',{staticClass:\"input\"},[_vm._v(\"Create a new session\")]),_vm._m(1),_vm._m(2)])]),_c('div',{attrs:{\"id\":\"account-options\"}},[_c('form',{on:{\"submit\":function($event){$event.preventDefault();}}},[_c('router-link',{staticClass:\"submit\",attrs:{\"tag\":\"button\",\"title\":\"Account Settings\",\"to\":\"/account\"}},[_c('i',{staticClass:\"fas fa-cog\"})])],1),_c('form',{on:{\"submit\":function($event){$event.preventDefault();}}},[_c('router-link',{staticClass:\"submit\",attrs:{\"tag\":\"button\",\"title\":\"Logout\",\"to\":\"/auth/logout\"}},[_c('i',{staticClass:\"fas fa-sign-out-alt\"})])],1)])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('h4',[_c('span',[_vm._v(\"OR\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"input\"},[_c('input',{attrs:{\"type\":\"text\",\"name\":\"room_name\",\"placeholder\":\"Session Name\"}}),_c('span',[_c('i',{staticClass:\"fab fa-d-and-d\"})])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('button',{staticClass:\"submit\",attrs:{\"type\":\"submit\",\"title\":\"Create\"}},[_c('i',{staticClass:\"fas fa-arrow-right\"})])}]\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport axios, { AxiosError, AxiosResponse } from \"axios\";\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\nimport { Route } from \"vue-router\";\n\nComponent.registerHooks([\"beforeRouteEnter\"]);\n\n@Component\nexport default class Dashboard extends Vue {\n    owned = [];\n    joined = [];\n    error = \"\";\n\n    beforeRouteEnter(to: Route, from: Route, next: ({}) => {}) {\n        axios\n            .get(\"/api/rooms\")\n            .then((response: AxiosResponse) => {\n                next((vm: this) => {\n                    vm.owned = response.data.owned;\n                    vm.joined = response.data.joined;\n                });\n            })\n            .catch((err: AxiosError) => {\n                next((vm: this) => {\n                    vm.error = err.message;\n                });\n            });\n    }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--12-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./main.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--12-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./main.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./main.vue?vue&type=template&id=79d5db09&\"\nimport script from \"./main.vue?vue&type=script&lang=ts&\"\nexport * from \"./main.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./main.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"main.vue\"\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"main\"},on:{\"mouseleave\":_vm.mouseleave}},[_c('div',{attrs:{\"id\":\"board\"}},[(_vm.ready.manager)?[_c('tool-bar',{ref:\"tools\"})]:_vm._e(),_c('div',{attrs:{\"id\":\"layers\"},on:{\"mousedown\":_vm.mousedown,\"mouseup\":_vm.mouseup,\"mousemove\":_vm.mousemove,\"contextmenu\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.contextmenu($event)},\"dragover\":function($event){$event.preventDefault();},\"drop\":_vm.drop}})],2),_c('selection-info',{ref:\"selectionInfo\"}),_c('initiative-dialog',{ref:\"initiative\",attrs:{\"id\":\"initiativedialog\"}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('modal',{attrs:{\"visible\":_vm.visible},on:{\"close\":_vm.close},scopedSlots:_vm._u([{key:\"header\",fn:function(m){return _c('div',{staticClass:\"modal-header\",attrs:{\"draggable\":\"true\"},on:{\"dragstart\":m.dragStart,\"dragend\":m.dragEnd}},[_vm._v(\"\\n        \"+_vm._s(_vm.title)+\"\\n    \")])}}])},[_c('div',{staticClass:\"modal-body\"},[_c('button',{ref:\"confirm\",on:{\"click\":_vm.confirm}},[_vm._v(_vm._s(_vm.yes))]),(!!_vm.no)?_c('button',{on:{\"click\":_vm.deny}},[_vm._v(_vm._s(_vm.no))]):_vm._e()])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('transition',{attrs:{\"name\":\"modal\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.visible),expression:\"visible\"}],staticClass:\"mask\",class:{'modal-mask': _vm.mask, 'dialog-mask': !_vm.mask},on:{\"click\":_vm.close,\"dragover\":function($event){$event.preventDefault();return _vm.dragOver($event)}}},[_c('div',{ref:\"container\",staticClass:\"modal-container\",on:{\"click\":function($event){$event.stopPropagation();}}},[_vm._t(\"header\",null,{dragStart:_vm.dragStart,dragEnd:_vm.dragEnd}),_vm._t(\"default\")],2)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\n\nexport default Vue.extend({\n    props: {\n        visible: Boolean,\n        mask: {\n            type: Boolean,\n            default: true,\n        },\n    },\n    data: () => ({\n        positioned: false,\n        offsetX: 0,\n        offsetY: 0,\n        screenX: 0,\n        screenY: 0,\n        dragging: false,\n    }),\n    // Example of mounted required: opening note\n    mounted() {\n        this.updatePosition();\n    },\n    // Example of updated required: opening initiative\n    updated() {\n        this.updatePosition();\n    },\n    methods: {\n        close(event: MouseEvent) {\n            this.$emit(\"close\");\n        },\n        updatePosition() {\n            if (!this.positioned) {\n                const container = <any>this.$refs.container;\n                if (container.offsetWidth === 0 && container.offsetHeight === 0) return;\n                (<any>this.$refs.container).style.left = (window.innerWidth - container.offsetWidth) / 2 + \"px\";\n                (<any>this.$refs.container).style.top = (window.innerHeight - container.offsetHeight) / 2 + \"px\";\n                this.positioned = true;\n            }\n        },\n        dragStart(event: DragEvent) {\n            if (event === null || event.dataTransfer === null) return;\n            event.dataTransfer.setData(\"Hack\", \"\");\n            // Because the drag event is happening on the header, we have to change the drag image\n            // in order to give the impression that the entire modal is dragged.\n            event.dataTransfer.setDragImage(<Element>this.$refs.container, event.offsetX, event.offsetY);\n            this.offsetX = event.offsetX;\n            this.offsetY = event.offsetY;\n            this.screenX = event.screenX;\n            this.screenY = event.screenY;\n            this.dragging = true;\n        },\n        dragEnd(event: DragEvent) {\n            this.dragging = false;\n            let left = event.clientX - this.offsetX;\n            let top = event.clientY - this.offsetY;\n            if (event.clientX === 0 && event.clientY === 0 && event.pageX === 0 && event.pageY === 0) {\n                left = parseInt((<any>this.$refs.container).style.left, 10) - (this.screenX - event.screenX);\n                top = parseInt((<any>this.$refs.container).style.top, 10) - (this.screenY - event.screenY);\n            }\n            if (left < 0) left = 0;\n            if (left > window.innerWidth - 100) left = window.innerWidth - 100;\n            if (top < 0) top = 0;\n            if (top > window.innerHeight - 100) top = window.innerHeight - 100;\n            (<any>this.$refs.container).style.left = left + \"px\";\n            (<any>this.$refs.container).style.top = top + \"px\";\n            (<any>this.$refs.container).style.display = \"block\";\n        },\n        dragOver(event: DragEvent) {\n            if (this.dragging) (<any>this.$refs.container).style.display = \"none\";\n        },\n    },\n});\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./modal.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./modal.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./modal.vue?vue&type=template&id=0f7d191f&scoped=true&\"\nimport script from \"./modal.vue?vue&type=script&lang=ts&\"\nexport * from \"./modal.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./modal.vue?vue&type=style&index=0&id=0f7d191f&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0f7d191f\",\n  null\n  \n)\n\ncomponent.options.__file = \"modal.vue\"\nexport default component.exports","<template>\n    <modal :visible=\"visible\" @close=\"close\">\n        <div\n            class='modal-header'\n            slot='header'\n            slot-scope='m'\n            draggable=\"true\"\n            @dragstart=\"m.dragStart\"\n            @dragend=\"m.dragEnd\"\n        >\n            {{ title }}\n        </div>\n        <div class='modal-body'>\n            <button @click=\"confirm\" ref=\"confirm\">{{ yes }}</button>\n            <button @click=\"deny\" v-if=\"!!no\">{{ no }}</button>\n        </div>\n    </modal>\n</template>\n\n<script>\nimport modal from \"@/core/components/modals/modal.vue\";\nexport default {\n    components: {\n        modal,\n    },\n    data: () => ({\n        visible: false,\n        yes: \"Yes\",\n        no: \"No\",\n        title: \"\",\n    }),\n    methods: {\n        confirm() {\n            this.resolve(true);\n            this.close();\n        },\n        deny() {\n            this.resolve(false);\n            this.close();\n        },\n        close() {\n            this.reject();\n            this.visible = false;\n            this.title = \"\";\n        },\n        open(title, yes, no) {\n            this.yes = yes === undefined ? \"Yes\" : yes;\n            this.no = no === undefined ? \"No\" : no;\n            this.title = title;\n\n            this.visible = true;\n            this.$nextTick(\n                function() {\n                    this.$refs.confirm.focus();\n                }.bind(this),\n            );\n\n            return new Promise((resolve, reject) => {\n                this.resolve = resolve;\n                this.reject = reject;\n            });\n        },\n    },\n};\n</script>\n\n<style scoped>\n.modal-header {\n    background-color: #ff7052;\n    padding: 10px;\n    font-size: 20px;\n    font-weight: bold;\n    cursor: move;\n}\n\n.modal-body {\n    padding: 10px;\n    display: flex;\n    justify-content: flex-end;\n}\n\nbutton:first-of-type {\n    margin-right: 10px;\n}\n</style>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./confirm.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./confirm.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./confirm.vue?vue&type=template&id=7c994a10&scoped=true&\"\nimport script from \"./confirm.vue?vue&type=script&lang=js&\"\nexport * from \"./confirm.vue?vue&type=script&lang=js&\"\nimport style0 from \"./confirm.vue?vue&type=style&index=0&id=7c994a10&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7c994a10\",\n  null\n  \n)\n\ncomponent.options.__file = \"confirm.vue\"\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('modal',{attrs:{\"visible\":_vm.visible},on:{\"close\":_vm.close},scopedSlots:_vm._u([{key:\"header\",fn:function(m){return _c('div',{staticClass:\"modal-header\",attrs:{\"draggable\":\"true\"},on:{\"dragstart\":m.dragStart,\"dragend\":m.dragEnd}},[_vm._v(\"\\n        \"+_vm._s(_vm.title)+\"\\n    \")])}}])},[_c('div',{staticClass:\"modal-body\"},[_vm._v(\"\\n        \"+_vm._s(_vm.question)+\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.answer),expression:\"answer\"}],ref:\"answer\",attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.answer)},on:{\"keyup\":function($event){if(!('button' in $event)&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.submit($event)},\"input\":function($event){if($event.target.composing){ return; }_vm.answer=$event.target.value}}})]),_c('div',{staticClass:\"modal-footer\"},[_c('button',{on:{\"click\":_vm.submit}},[_vm._v(\"Submit\")])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <modal :visible=\"visible\" @close=\"close\">\n        <div\n            class='modal-header'\n            slot='header'\n            slot-scope='m'\n            draggable=\"true\"\n            @dragstart=\"m.dragStart\"\n            @dragend=\"m.dragEnd\"\n        >\n            {{ title }}\n        </div>\n        <div class='modal-body'>\n            {{ question }} <input type='text' ref='answer' v-model=\"answer\" @keyup.enter=\"submit\">\n        </div>\n        <div class='modal-footer'>\n            <button @click=\"submit\">Submit</button>\n        </div>\n    </modal>\n</template>\n\n<script>\nimport modal from \"@/core/components/modals/modal.vue\";\nexport default {\n    components: {\n        modal,\n    },\n    data: () => ({\n        visible: false,\n        question: \"\",\n        answer: \"\",\n        title: \"\",\n    }),\n    methods: {\n        submit() {\n            this.resolve(this.answer);\n            this.close();\n        },\n        close() {\n            this.reject();\n            this.visible = false;\n            this.question = \"\";\n            this.answer = \"\";\n            this.title = \"\";\n        },\n        prompt(question, title) {\n            this.question = question;\n            this.title = title;\n            this.visible = true;\n            this.$nextTick(\n                function() {\n                    this.$refs.answer.focus();\n                }.bind(this),\n            );\n            return new Promise((resolve, reject) => {\n                this.resolve = resolve;\n                this.reject = reject;\n            });\n        },\n    },\n};\n</script>\n\n<style scoped>\n.modal-header {\n    background-color: #ff7052;\n    padding: 10px;\n    font-size: 20px;\n    font-weight: bold;\n    cursor: move;\n}\n\n.modal-body {\n    padding: 10px;\n    padding-bottom: 0;\n    display: flex;\n    justify-content: space-between;\n}\n\n.modal-footer {\n    padding-top: 0;\n    padding: 10px;\n    text-align: right;\n}\n</style>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./prompt.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./prompt.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./prompt.vue?vue&type=template&id=619acb01&scoped=true&\"\nimport script from \"./prompt.vue?vue&type=script&lang=js&\"\nexport * from \"./prompt.vue?vue&type=script&lang=js&\"\nimport style0 from \"./prompt.vue?vue&type=style&index=0&id=619acb01&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"619acb01\",\n  null\n  \n)\n\ncomponent.options.__file = \"prompt.vue\"\nexport default component.exports","/*\nThis module defines some Point classes.\nA strong focus is made to ensure that at no time a global and a local point are mixed up with each other.\nAt first glance this adds weird looking hacks as ts does not support nominal typing.\n*/\n\nexport function getPointDistance(p1: Point, p2: Point) {\n    const a = p1.x - p2.x;\n    const b = p1.y - p2.y;\n    return Math.sqrt(a * a + b * b);\n}\n\nexport class Point {\n    x: number;\n    y: number;\n    constructor(x: number, y: number) {\n        this.x = x;\n        this.y = y;\n    }\n    add(vec: Vector) {\n        return new Point(this.x + vec.x, this.y + vec.y);\n    }\n    subtract(other: Point) {\n        return new Vector(this.x - other.x, this.y - other.y);\n    }\n    clone(): Point {\n        return new Point(this.x, this.y);\n    }\n    get(dimension: 0 | 1) {\n        if (dimension === 0) return this.x;\n        return this.y;\n    }\n}\nexport class GlobalPoint extends Point {\n    // This is to differentiate with LocalPoint, is actually never used\n    // We do ! to prevent errors that it never gets initialized\n    // tslint:disable-next-line:variable-name\n    _GlobalPoint!: string;\n    add(vec: Vector): GlobalPoint {\n        return <GlobalPoint>super.add(vec);\n    }\n    subtract(other: GlobalPoint): Vector {\n        return super.subtract(other);\n    }\n    clone(): GlobalPoint {\n        return <GlobalPoint>super.clone();\n    }\n}\n\nexport class LocalPoint extends Point {\n    // This is to differentiate with GlobalPoint, is actually never used\n    // We do ! to prevent errors that it never gets initialized\n    // tslint:disable-next-line:variable-name\n    _LocalPoint!: string;\n    add(vec: Vector): LocalPoint {\n        return <LocalPoint>super.add(vec);\n    }\n    subtract(other: LocalPoint): Vector {\n        return super.subtract(other);\n    }\n    clone(): LocalPoint {\n        return <LocalPoint>super.clone();\n    }\n}\n\nexport class Vector {\n    readonly x: number;\n    readonly y: number;\n    constructor(x: number, y: number) {\n        this.x = x;\n        this.y = y;\n    }\n    dot(other: Vector) {\n        return this.x * other.x + this.y * other.y;\n    }\n    inverse() {\n        return new Vector(1 / this.x, 1 / this.y);\n    }\n    length() {\n        return Math.sqrt(Math.pow(this.x, 2) + Math.pow(this.y, 2));\n    }\n    normalize() {\n        const l = this.length();\n        return new Vector(this.x / l, this.y / l);\n    }\n    reverse() {\n        return new Vector(-this.x, -this.y);\n    }\n    multiply(scale: number) {\n        return new Vector(this.x * scale, this.y * scale);\n    }\n}\n\nexport class Ray<T extends Point> {\n    readonly direction: Vector;\n    readonly origin: T;\n    tMax: number;\n    constructor(origin: T, direction: Vector, tMax?: number) {\n        this.direction = direction;\n        this.origin = origin;\n        if (tMax === undefined) tMax = Infinity;\n        this.tMax = tMax;\n    }\n    static fromPoints<T extends Point>(p1: T, p2: T): Ray<T> {\n        const vec = new Vector(p2.x - p1.x, p2.y - p1.y);\n        let maxT;\n        if (Math.abs(vec.x) > 0.01) maxT = (p2.x - p1.x) / vec.x;\n        else maxT = (p2.y - p1.y) / vec.y;\n        return new Ray(p1, vec, maxT);\n    }\n    get(t: number): T {\n        return <T>new Point(this.origin.x + t * this.direction.x, this.origin.y + t * this.direction.y);\n    }\n    getDistance(t1: number, t2: number) {\n        return Math.sqrt(Math.pow(t2 - t1, 2) * (Math.pow(this.direction.x, 2) + Math.pow(this.direction.y, 2)));\n    }\n    getT(t1: number, distance: number) {\n        return t1 + Math.sqrt(Math.pow(distance, 2) / (Math.pow(this.direction.x, 2) + Math.pow(this.direction.y, 2)));\n    }\n}\n","import { GlobalPoint, Point, Ray, Vector } from \"@/game/geom\";\n\nexport default class BoundingRect {\n    readonly w: number;\n    readonly h: number;\n    readonly topLeft: GlobalPoint;\n    readonly topRight: GlobalPoint;\n    readonly botRight: GlobalPoint;\n    readonly botLeft: GlobalPoint;\n\n    constructor(topleft: GlobalPoint, w: number, h: number) {\n        this.w = w;\n        this.h = h;\n        this.topLeft = topleft;\n        this.topRight = new GlobalPoint(topleft.x + w, topleft.y);\n        this.botRight = new GlobalPoint(topleft.x + w, topleft.y + h);\n        this.botLeft = new GlobalPoint(topleft.x, topleft.y + h);\n    }\n\n    contains(point: GlobalPoint): boolean {\n        return (\n            this.topLeft.x <= point.x &&\n            this.topRight.x >= point.x &&\n            this.topLeft.y <= point.y &&\n            this.botLeft.y >= point.y\n        );\n    }\n\n    offset(vector: Vector): BoundingRect {\n        return new BoundingRect(this.topLeft.add(vector), this.w, this.h);\n    }\n\n    union(other: BoundingRect): BoundingRect {\n        const xmin = Math.min(this.topLeft.x, other.topLeft.x);\n        const xmax = Math.max(this.topRight.x, other.topRight.x);\n        const ymin = Math.min(this.topLeft.y, other.topLeft.y);\n        const ymax = Math.max(this.botLeft.y, other.botLeft.y);\n        return new BoundingRect(new GlobalPoint(xmin, ymin), xmax - xmin, ymax - ymin);\n    }\n\n    getDiagCorner(botright: boolean) {\n        return botright ? this.botRight : this.topLeft;\n    }\n\n    intersectsWith(other: BoundingRect): boolean {\n        return !(\n            other.topLeft.x > this.topRight.x ||\n            other.topRight.x < this.topLeft.x ||\n            other.topLeft.y > this.botLeft.y ||\n            other.botLeft.y < this.topLeft.y\n        );\n    }\n\n    intersectsWithInner(other: BoundingRect): boolean {\n        return !(\n            other.topLeft.x >= this.topRight.x ||\n            other.topRight.x <= this.topLeft.x ||\n            other.topLeft.y >= this.botLeft.y ||\n            other.botLeft.y <= this.topLeft.y\n        );\n    }\n\n    intersectP(ray: Ray<Point>, invDir: Vector, dirIsNeg: boolean[]) {\n        let txmin = invDir.x * (this.getDiagCorner(dirIsNeg[0]).x - ray.origin!.x);\n        let txmax = invDir.x * (this.getDiagCorner(!dirIsNeg[0]).x - ray.origin!.x);\n        const tymin = invDir.y * (this.getDiagCorner(dirIsNeg[1]).y - ray.origin!.y);\n        const tymax = invDir.y * (this.getDiagCorner(!dirIsNeg[1]).y - ray.origin!.y);\n        if (txmin > tymax || tymin > txmax) return { hit: false, min: txmin, max: txmax };\n        if (tymin > txmin) txmin = tymin;\n        if (tymax < txmax) txmax = tymax;\n        return { hit: txmin < ray.tMax! && txmax > 0, min: txmin, max: txmax };\n    }\n\n    center(): GlobalPoint;\n    center(centerPoint: GlobalPoint): void;\n    center(centerPoint?: GlobalPoint): GlobalPoint | void {\n        if (centerPoint === undefined) return this.topLeft.add(new Vector(this.w / 2, this.h / 2));\n        this.topLeft.x = centerPoint.x - this.w / 2;\n        this.topLeft.y = centerPoint.y - this.h / 2;\n    }\n    inCorner(point: GlobalPoint, corner: string) {\n        const sw = Math.min(6, this.w / 2) / 2;\n        switch (corner) {\n            case \"ne\":\n                return (\n                    this.topRight.x - sw <= point.x &&\n                    point.x <= this.topRight.x + sw &&\n                    this.topLeft.y - sw <= point.y &&\n                    point.y <= this.topLeft.y + sw\n                );\n            case \"nw\":\n                return (\n                    this.topLeft.x - sw <= point.x &&\n                    point.x <= this.topLeft.x + sw &&\n                    this.topLeft.y - sw <= point.y &&\n                    point.y <= this.topLeft.y + sw\n                );\n            case \"sw\":\n                return (\n                    this.topLeft.x - sw <= point.x &&\n                    point.x <= this.topLeft.x + sw &&\n                    this.botLeft.y - sw <= point.y &&\n                    point.y <= this.botLeft.y + sw\n                );\n            case \"se\":\n                return (\n                    this.topRight.x - sw <= point.x &&\n                    point.x <= this.topRight.x + sw &&\n                    this.botLeft.y - sw <= point.y &&\n                    point.y <= this.botLeft.y + sw\n                );\n            default:\n                return false;\n        }\n    }\n    getCorner(point: GlobalPoint): string | undefined {\n        if (this.inCorner(point, \"ne\")) return \"ne\";\n        else if (this.inCorner(point, \"nw\")) return \"nw\";\n        else if (this.inCorner(point, \"se\")) return \"se\";\n        else if (this.inCorner(point, \"sw\")) return \"sw\";\n    }\n\n    getMaxExtent() {\n        return this.w > this.h ? 0 : 1;\n    }\n}\n","import io from \"socket.io-client\";\nimport { Route } from \"vue-router\";\n\nconst socket = io(location.protocol + \"//\" + location.host + \"/planarally\", { autoConnect: false });\n\nexport function createConnection(route: Route) {\n    socket.io.opts.query = `user=${route.params.creator}&room=${route.params.room}`;\n    socket.connect();\n}\n\nexport default socket;\n","import Vue from \"vue\";\n\nimport vm from \"@/main\";\n\n// Reference: https://stackoverflow.com/questions/105034/create-guid-uuid-in-javascript\nexport function uuidv4() {\n    return \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g, c => {\n        const r = (Math.random() * 16) | 0;\n        const v = c === \"x\" ? r : (r & 0x3) | 0x8;\n        return v.toString(16);\n    });\n}\n\nexport function capitalize(text: string) {\n    return text.charAt(0).toUpperCase() + text.slice(1);\n}\n\nexport function alphSort(a: string, b: string) {\n    if (a.toLowerCase() < b.toLowerCase()) return -1;\n    else return 1;\n}\n\nexport function getHTMLFont(element: HTMLElement) {\n    let font = element.style.font;\n    while (font === null && element.parentElement !== null) {\n        element = element.parentElement;\n        font = element.style.font;\n    }\n    if (font === null) font = window.getComputedStyle(document.body).getPropertyValue(\"font\");\n    return font;\n}\n\nexport function getHTMLTextWidth(text: string, font: string): number {\n    let fakeElement = <HTMLCanvasElement>document.getElementById(\"emptycanvas\");\n    if (fakeElement === null) {\n        fakeElement = document.createElement(\"canvas\");\n        fakeElement.id = \"emptycanvas\";\n        fakeElement.style.display = \"\";\n        document.body.appendChild(fakeElement);\n    }\n    const ctx = fakeElement.getContext(\"2d\")!;\n    ctx.font = font;\n    return Math.ceil(ctx.measureText(text).width);\n}\n\nexport function partition<T>(arr: T[], predicate: (n: T) => boolean) {\n    const ret: T[][] = [[], []];\n    arr.forEach(n => (predicate(n) ? ret[1].push(n) : ret[0].push(n)));\n    return ret;\n}\n\nexport function calcFontScale(ctx: CanvasRenderingContext2D, text: string, width: number, height: number) {\n    const points = Number(ctx.font.split(\"px\")[0]) * 0.2;\n    const fontWidth = ctx.measureText(text).width;\n    return Math.min(width / fontWidth, height / points);\n}\n\nexport function fixedEncodeURIComponent(str: string) {\n    return encodeURIComponent(str).replace(/[!'()*]/g, c => {\n        return \"%\" + c.charCodeAt(0).toString(16);\n    });\n}\n\nexport class OrderedMap<K, V> {\n    keys: K[] = [];\n    values: V[] = [];\n    get(key: K) {\n        return this.values[this.keys.indexOf(key)];\n    }\n    getIndexValue(idx: number) {\n        return this.values[idx];\n    }\n    getIndexKey(idx: number) {\n        return this.keys[idx];\n    }\n    set(key: K, value: V) {\n        this.keys.push(key);\n        this.values.push(value);\n    }\n    indexOf(element: K) {\n        return this.keys.indexOf(element);\n    }\n    remove(element: K) {\n        const idx = this.indexOf(element);\n        this.keys.splice(idx, 1);\n        this.values.splice(idx, 1);\n    }\n}\n\nexport function getRef(ref: string): any {\n    const active = <Vue>vm.$children[0].$refs.activeComponent;\n    return active.$refs[ref];\n}\n","import BoundingRect from \"@/game/shapes/boundingrect\";\n\nexport class BoundingNode {\n    bbox: BoundingRect;\n    nPrimitives: number;\n    children: BoundingNode[] = [];\n    constructor(nPrimitives: number, bbox: BoundingRect) {\n        this.nPrimitives = nPrimitives;\n        this.bbox = bbox;\n    }\n}\n\nexport class LeafNode extends BoundingNode {\n    firstPrimOffset: number;\n    constructor(first: number, n: number, bbox: BoundingRect) {\n        super(n, bbox);\n        this.firstPrimOffset = first;\n    }\n}\n\nexport class InteriorNode extends BoundingNode {\n    dimension: number;\n    constructor(dimension: number, c1: BoundingNode, c2: BoundingNode) {\n        super(0, c1.bbox.union(c2.bbox));\n        this.dimension = dimension;\n        this.children.push(c1);\n        this.children.push(c2);\n    }\n}\n","import store from \"@/game/store\";\n\nimport { GlobalPoint, LocalPoint, Ray } from \"@/game/geom\";\n\nexport function g2l(obj: GlobalPoint): LocalPoint {\n    const z = store.zoomFactor;\n    const panX = store.panX;\n    const panY = store.panY;\n    return new LocalPoint((obj.x + panX) * z, (obj.y + panY) * z);\n}\n\nexport function g2lx(x: number) {\n    return g2l(new GlobalPoint(x, 0)).x;\n}\n\nexport function g2ly(y: number) {\n    return g2l(new GlobalPoint(0, y)).y;\n}\n\nexport function g2lz(z: number) {\n    return z * store.zoomFactor;\n}\n\nexport function getUnitDistance(r: number) {\n    return (r / store.unitSize) * store.gridSize;\n}\n\nexport function g2lr(r: number) {\n    return g2lz(getUnitDistance(r));\n}\n\nexport function l2g(obj: LocalPoint): GlobalPoint;\nexport function l2g(obj: Ray<LocalPoint>): Ray<GlobalPoint>;\nexport function l2g(obj: LocalPoint | Ray<LocalPoint>): GlobalPoint | Ray<GlobalPoint> {\n    const z = store.zoomFactor;\n    const panX = store.panX;\n    const panY = store.panY;\n    if (obj instanceof LocalPoint) {\n        return new GlobalPoint(obj.x / z - panX, obj.y / z - panY);\n    } else {\n        return new Ray<GlobalPoint>(l2g(obj.origin), obj.direction.multiply(1 / z), obj.tMax);\n    }\n}\n\nexport function l2gx(x: number) {\n    return l2g(new LocalPoint(x, 0)).x;\n}\n\nexport function l2gy(y: number) {\n    return l2g(new LocalPoint(0, y)).y;\n}\n\nexport function l2gz(z: number) {\n    return z / store.zoomFactor;\n}\n\nexport function l2gr(r: number) {\n    return l2gz(getUnitDistance(r));\n}\n","import layerManager from \"@/game/layers/manager\";\nimport BoundingRect from \"@/game/shapes/boundingrect\";\n\nimport { partition } from \"@/core/utils\";\nimport { BoundingNode, InteriorNode, LeafNode } from \"@/game/bvh/node\";\nimport { GlobalPoint, Ray } from \"@/game/geom\";\nimport { g2lx, g2ly, g2lz } from \"@/game/units\";\n\ninterface BuildInfo {\n    index: number;\n    bbox: BoundingRect;\n    center: BoundingRect;\n}\ninterface LinearBHVNode {\n    bbox: BoundingRect;\n    nPrimitives: number;\n}\ninterface LinearLeafNode extends LinearBHVNode {\n    primitivesOffset: number;\n}\ninterface LinearInternalNode extends LinearBHVNode {\n    secondChildOffset: number;\n    dimension: number;\n}\n\nclass BoundingVolume {\n    totalNodes = 0;\n    buildData: BuildInfo[] = [];\n    shapes: string[];\n    orderedPrims: string[] = [];\n    root: BoundingNode | null;\n    nodes: LinearBHVNode[] = [];\n\n    offset = 0;\n\n    constructor(shapes: string[]) {\n        this.shapes = shapes;\n        if (this.shapes.length === 0) {\n            this.root = null;\n            this.nodes = [];\n            return;\n        }\n        for (let i = 0; i < shapes.length; i++) {\n            const shape = layerManager.UUIDMap.get(shapes[i])!;\n            this.buildData.push({\n                index: i,\n                bbox: shape.getBoundingBox(),\n                center: new BoundingRect(shape.center(), 0, 0),\n            });\n        }\n        this.root = this.recursiveBuild(0, shapes.length);\n        this.compact();\n    }\n\n    draw() {\n        const ctx = layerManager.getLayer(\"draw\")!.ctx;\n        for (const node of this.nodes) {\n            const b = node.bbox;\n            ctx.strokeRect(g2lx(b.topLeft.x), g2ly(b.topLeft.y), g2lz(b.w), g2lz(b.h));\n        }\n    }\n\n    recursiveBuild(start: number, end: number): BoundingNode {\n        this.totalNodes++;\n        let bbox = this.buildData[start].bbox;\n        for (let i = start + 1; i < end; i++) bbox = bbox.union(this.buildData[i].bbox);\n        const nPrimitives = end - start;\n        if (nPrimitives === 1) {\n            return this.createLeaf(start, end, nPrimitives, bbox);\n        } else {\n            let centroidBbox = this.buildData[start].center;\n            for (let i = start; i < end; i++) centroidBbox = centroidBbox.union(this.buildData[i].center);\n            const dimension = centroidBbox.getMaxExtent();\n            if (centroidBbox.botRight.get(dimension) === centroidBbox.topLeft.get(dimension)) {\n                return this.createLeaf(start, end, nPrimitives, bbox);\n            }\n            // Use shitty Middle thingy until an introselect js algo is added\n            const pMid = 0.5 * (centroidBbox.topLeft.get(dimension) + centroidBbox.botRight.get(dimension));\n            const partitionedData = partition(\n                this.buildData.slice(start, end),\n                (n: BuildInfo) => n.center.center().get(dimension) < pMid,\n            );\n            const flattened = [].concat.apply([], partitionedData);\n            if (partitionedData[0].length === 0 || partitionedData[1].length === 0) console.log(\"EMPTY\");\n            this.buildData.splice(start, flattened.length, ...flattened);\n            const mid = partitionedData[0].length + start;\n            return new InteriorNode(dimension, this.recursiveBuild(start, mid), this.recursiveBuild(mid, end));\n        }\n    }\n\n    intersect(ray: Ray<GlobalPoint>, stopOnFirstHit?: boolean) {\n        if (this.nodes.length === 0) return { hit: false, intersect: ray.get(0), tMin: 0, tMax: ray.tMax };\n        if (stopOnFirstHit === undefined) stopOnFirstHit = false;\n        // Initialize return values\n        let hit = false;\n        let tMin = 0;\n        let tMax = ray.tMax;\n\n        // Initialize work variables\n        let todoOffset = 0;\n        let nodeNum = 0;\n        const todo: number[] = [];\n\n        // Precalculate intersection vectors\n        const invDir = ray.direction.inverse();\n        const dirIsNegative = [invDir.x < 0, invDir.y < 0];\n\n        while (true) {\n            const node = this.nodes[nodeNum];\n\n            const i = node.bbox.intersectP(ray, invDir, dirIsNegative);\n            if (i.hit) {\n                if (node.nPrimitives > 0) {\n                    // TODO: nPrimitives is currently always 1 , this could be generalised\n                    // for (let i=0; i < node.nPrimitives; i++) {\n                    //     if (this.shapes[(<LinearLeafNode>node).primitivesOffset + i])\n                    // }\n                    hit = true;\n                    tMin = ray.tMax = i.min;\n                    tMax = i.max;\n                    if (todoOffset === 0 || stopOnFirstHit) break;\n                    nodeNum = todo[--todoOffset];\n                } else {\n                    if (dirIsNegative[(<LinearInternalNode>node).dimension]) {\n                        todo[todoOffset++] = nodeNum + 1;\n                        nodeNum = (<LinearInternalNode>node).secondChildOffset;\n                    } else {\n                        todo[todoOffset++] = (<LinearInternalNode>node).secondChildOffset;\n                        nodeNum++;\n                    }\n                }\n            } else {\n                if (todoOffset === 0) break;\n                nodeNum = todo[--todoOffset];\n            }\n        }\n        return { hit, intersect: ray.get(tMin), tMin, tMax };\n    }\n\n    private compact() {\n        this.offset = 0;\n        if (this.root !== null) this.flatten(this.root);\n    }\n\n    private flatten(node: BoundingNode) {\n        const index = this.offset;\n        const myOffset = this.offset++;\n        if (node.nPrimitives === 0) {\n            this.flatten(node.children[0]);\n            const secondOffset = this.flatten(node.children[1]);\n            this.nodes[index] = <LinearInternalNode>{\n                bbox: node.bbox,\n                dimension: (<InteriorNode>node).dimension,\n                nPrimitives: 0,\n                secondChildOffset: secondOffset,\n            };\n        } else {\n            this.nodes[index] = <LinearLeafNode>{\n                bbox: node.bbox,\n                primitivesOffset: (<LeafNode>node).firstPrimOffset,\n                nPrimitives: node.nPrimitives,\n            };\n        }\n        return myOffset;\n    }\n\n    private createLeaf(start: number, end: number, nPrimitives: number, bbox: BoundingRect) {\n        const size = this.orderedPrims.length;\n        for (let i = start; i < end; i++) this.orderedPrims.push(this.shapes[this.buildData[i].index]);\n        return new LeafNode(size, nPrimitives, bbox);\n    }\n}\n\nexport default BoundingVolume;\n","import socket from \"@/game/api/socket\";\n\nexport function sendClientOptions() {\n    // socket.emit(\"Client.Options.Set\", {\n    //     locationOptions: {\n    //         panX: store.state.game.panX,\n    //         panY: store.state.game.panY,\n    //         zoomFactor: store.state.game.zoomFactor,\n    //     },\n    // });\n}\n","// import Vuex from \"vuex\";\nimport { Action, getModule, Module, Mutation, VuexModule } from \"vuex-module-decorators\";\n\nimport socket from \"@/game/api/socket\";\nimport BoundingVolume from \"@/game/bvh/bvh\";\nimport layerManager from \"@/game/layers/manager\";\nimport store from \"@/store\";\n\nimport { AssetList } from \"@/core/comm/types\";\nimport { sendClientOptions } from \"@/game/api/utils\";\nimport { Note } from \"@/game/comm/types/general\";\nimport { GlobalPoint } from \"@/game/geom\";\nimport { g2l, l2g } from \"@/game/units\";\n\nexport interface GameState {\n    boardInitialized: boolean;\n}\n\n@Module({ dynamic: true, store, name: \"game\", namespaced: true })\nclass GameStore extends VuexModule {\n    // This is a limited view of selectable layers that is used to generate the layer selection UI and ability to switch layers\n    // See the layerManager for proper layer management tools\n    layers: string[] = [];\n    selectedLayerIndex = -1;\n    boardInitialized = false;\n\n    locations: string[] = [];\n\n    assets: AssetList = {};\n\n    notes: Note[] = [];\n\n    IS_DM = false;\n    gridSize = 50;\n    username = \"\";\n    roomName = \"\";\n    roomCreator = \"\";\n    invitationCode = \"\";\n\n    gridColour = \"rgba(0, 0, 0, 1)\";\n    fowColour = \"rgba(0, 0, 0, 1)\";\n    rulerColour = \"rgba(255, 0, 0, 1)\";\n    panX = 0;\n    panY = 0;\n    zoomFactor = 1;\n\n    unitSize = 5;\n    useGrid = true;\n    fullFOW = false;\n    fowOpacity = 0.3;\n    fowLOS = false;\n    locationName = \"\";\n\n    visionSources: { shape: string; aura: string }[] = [];\n    visionBlockers: string[] = [];\n    annotations: string[] = [];\n    movementblockers: string[] = [];\n    ownedtokens: string[] = [];\n\n    BV = new BoundingVolume([]);\n\n    get selectedLayer() {\n        return this.layers[this.selectedLayerIndex];\n    }\n\n    @Mutation\n    setBoardInitialized(boardInitialized: boolean) {\n        this.boardInitialized = boardInitialized;\n    }\n\n    @Mutation\n    setDM(isDM: boolean) {\n        this.IS_DM = isDM;\n    }\n\n    @Mutation\n    setUsername(username: string) {\n        this.username = username;\n    }\n\n    @Mutation\n    setRoomName(name: string) {\n        this.roomName = name;\n    }\n\n    @Mutation\n    setRoomCreator(name: string) {\n        this.roomCreator = name;\n    }\n\n    @Mutation\n    setInvitationCode(code: string) {\n        this.invitationCode = code;\n    }\n\n    @Mutation\n    addLayer(name: string) {\n        this.layers.push(name);\n        if (this.selectedLayerIndex === -1) this.selectedLayerIndex = this.layers.indexOf(name);\n    }\n\n    @Mutation\n    selectLayer(name: string, sync: boolean) {\n        const index = this.layers.indexOf(name);\n        if (index >= 0) this.selectedLayerIndex = index;\n        if (sync) socket.emit(\"Client.ActiveLayer.Set\", name);\n    }\n\n    @Mutation\n    newNote(note: Note, sync: boolean) {\n        this.notes.push(note);\n        if (sync) socket.emit(\"Note.New\", note);\n    }\n\n    @Mutation\n    setAssets(assets: AssetList) {\n        this.assets = assets;\n    }\n\n    @Mutation\n    setLocations(locations: string[]) {\n        this.locations = locations;\n    }\n\n    @Mutation\n    resetLayerInfo() {\n        this.layers = [];\n        this.selectedLayerIndex = -1;\n    }\n\n    @Mutation\n    recalculateBV() {\n        if (this.boardInitialized) this.BV = new BoundingVolume(this.visionBlockers);\n    }\n\n    @Mutation\n    updateZoom(newZoomValue: number, zoomLocation: GlobalPoint) {\n        if (newZoomValue === this.zoomFactor) return;\n        if (newZoomValue < 0.1) newZoomValue = 0.1;\n        if (newZoomValue > 5) newZoomValue = 5;\n\n        const oldLoc = g2l(zoomLocation);\n\n        this.zoomFactor = newZoomValue;\n\n        const newLoc = l2g(oldLoc);\n\n        // Change the pan settings to keep the zoomLocation in the same exact location before and after the zoom.\n        const diff = newLoc.subtract(zoomLocation);\n        this.panX += diff.x;\n        this.panY += diff.y;\n\n        layerManager.invalidate();\n        sendClientOptions();\n    }\n\n    @Mutation\n    setGridColour(colour: string, sync: boolean) {\n        this.gridColour = colour;\n        layerManager.getGridLayer()!.drawGrid();\n        if (sync) socket.emit(\"Client.Options.Set\", { gridColour: colour });\n    }\n\n    @Mutation\n    setFOWColour(colour: string, sync: boolean) {\n        this.fowColour = colour;\n        layerManager.invalidate();\n        if (sync) socket.emit(\"Client.Options.Set\", { fowColour: colour });\n    }\n\n    @Mutation\n    setRulerColour(colour: string, sync: boolean) {\n        this.rulerColour = colour;\n        if (sync) socket.emit(\"Client.Options.Set\", { rulerColour: colour });\n    }\n\n    @Mutation\n    setPanX(x: number) {\n        this.panX = x;\n    }\n\n    @Mutation\n    setPanY(y: number) {\n        this.panY = y;\n    }\n\n    @Mutation\n    setZoomFactor(zoomFactor: number) {\n        this.zoomFactor = zoomFactor;\n    }\n\n    @Mutation\n    increasePanX(increase: number) {\n        this.panX += increase;\n    }\n\n    @Mutation\n    increasePanY(increase: number) {\n        this.panY += increase;\n    }\n\n    @Mutation\n    setUnitSize(unitSize: number, sync: boolean) {\n        if (this.unitSize !== unitSize) {\n            this.unitSize = unitSize;\n            if (layerManager.getGridLayer() !== undefined) layerManager.getGridLayer()!.drawGrid();\n            if (sync) socket.emit(\"Location.Options.Set\", { unit_size: unitSize });\n        }\n    }\n\n    @Mutation\n    setUseGrid(useGrid: boolean, sync: boolean) {\n        if (this.useGrid !== useGrid) {\n            this.useGrid = useGrid;\n            const gridLayer = layerManager.getGridLayer()!;\n            if (useGrid) gridLayer.canvas.style.display = \"block\";\n            else gridLayer.canvas.style.display = \"none\";\n            if (sync) socket.emit(\"Location.Options.Set\", { use_grid: useGrid });\n        }\n    }\n\n    @Mutation\n    setGridSize(gridSize: number, sync: boolean): void {\n        if (this.gridSize !== gridSize && gridSize > 0) {\n            this.gridSize = gridSize;\n            const gridLayer = layerManager.getGridLayer();\n            if (gridLayer !== undefined) gridLayer.drawGrid();\n            if (sync) socket.emit(\"Gridsize.Set\", gridSize);\n        }\n    }\n\n    @Mutation\n    setFullFOW(fullFOW: boolean, sync: boolean) {\n        if (this.fullFOW !== fullFOW) {\n            this.fullFOW = fullFOW;\n            layerManager.invalidateLight();\n            if (sync) socket.emit(\"Location.Options.Set\", { full_fow: fullFOW });\n        }\n    }\n\n    @Mutation\n    setFOWOpacity(fowOpacity: number, sync: boolean) {\n        this.fowOpacity = fowOpacity;\n        layerManager.invalidateLight();\n        if (sync) socket.emit(\"Location.Options.Set\", { fow_opacity: fowOpacity });\n    }\n\n    @Mutation\n    setLineOfSight(fowLOS: boolean, sync: boolean) {\n        if (this.fowLOS !== fowLOS) {\n            this.fowLOS = fowLOS;\n            layerManager.invalidate();\n            if (sync) socket.emit(\"Location.Options.Set\", { fow_los: fowLOS });\n        }\n    }\n\n    @Mutation\n    setLocationName(name: string) {\n        this.locationName = name;\n    }\n\n    @Mutation\n    updateNote(note: Note, sync: boolean) {\n        const actualNote = this.notes.find(n => n.uuid === note.uuid);\n        if (actualNote === undefined) return;\n        actualNote.title = note.title;\n        actualNote.text = note.text;\n        if (sync) socket.emit(\"Note.Update\", actualNote);\n    }\n\n    @Mutation\n    removeNote(note: Note, sync: boolean) {\n        this.notes = this.notes.filter(n => n.uuid !== note.uuid);\n        if (sync) socket.emit(\"Note.Remove\", note.uuid);\n    }\n\n    @Action\n    clear() {\n        this.context.getters.visionSources = [];\n        this.context.getters.visionBlockers = [];\n        this.context.getters.ownedtokens = [];\n        this.context.getters.annotations = [];\n        this.context.getters.movementblockers = [];\n        this.context.commit(\"recalculateBV\");\n    }\n}\n\nexport default getModule(GameStore);\n","import { ServerAura } from \"@/game/comm/types/shapes\";\n\nexport const aurasFromServer = (auras: ServerAura[]): Aura[] => {\n    const result = [];\n    for (const aura of auras) {\n        result.push({\n            uuid: aura.uuid,\n            visionSource: aura.vision_source,\n            visible: aura.visible,\n            name: aura.name,\n            value: aura.value,\n            dim: aura.dim,\n            colour: aura.colour,\n        });\n    }\n    return result;\n};\n\nexport const aurasToServer = (auras: Aura[]): ServerAura[] => {\n    const result = [];\n    for (const aura of auras) {\n        result.push({\n            uuid: aura.uuid,\n            vision_source: aura.visionSource,\n            visible: aura.visible,\n            name: aura.name,\n            value: aura.value,\n            dim: aura.dim,\n            colour: aura.colour,\n        });\n    }\n    return result;\n};\n","import tinycolor from \"tinycolor2\";\n\nimport socket from \"@/game/api/socket\";\nimport layerManager from \"@/game/layers/manager\";\nimport BoundingRect from \"@/game/shapes/boundingrect\";\nimport store from \"@/game/store\";\n\nimport { uuidv4 } from \"@/core/utils\";\nimport { aurasFromServer, aurasToServer } from \"@/game/comm/conversion/aura\";\nimport { InitiativeData } from \"@/game/comm/types/general\";\nimport { ServerShape } from \"@/game/comm/types/shapes\";\nimport { GlobalPoint, LocalPoint } from \"@/game/geom\";\nimport { g2l, g2lr, g2lx, g2ly, g2lz } from \"@/game/units\";\n\nexport default abstract class Shape {\n    // Used to create class instance from server shape data\n    protected abstract type: string;\n    // The unique ID of this shape\n    uuid: string;\n    // The layer the shape is currently on\n    layer!: string;\n\n    // A reference point regarding that specific shape's structure\n    refPoint: GlobalPoint;\n\n    // Fill colour of the shape\n    fillColour: string = \"#000\";\n    strokeColour: string = \"rgba(0,0,0,0)\";\n    // The optional name associated with the shape\n    name = \"Unknown shape\";\n\n    // Associated trackers/auras/owners\n    trackers: Tracker[] = [];\n    auras: Aura[] = [];\n    owners: string[] = [];\n\n    // Block light sources\n    visionObstruction = false;\n    // Prevent shapes from overlapping with this shape\n    movementObstruction = false;\n    // Does this shape represent a playable token\n    isToken = false;\n    // Show a highlight box\n    showHighlight = false;\n\n    // Mouseover annotation\n    annotation: string = \"\";\n\n    // Draw modus to use\n    globalCompositeOperation: string = \"source-over\";\n\n    // Additional options for specialized uses\n    options: Map<string, any> = new Map();\n\n    constructor(refPoint: GlobalPoint, fillColour?: string, strokeColour?: string, uuid?: string) {\n        this.refPoint = refPoint;\n        this.uuid = uuid || uuidv4();\n        if (fillColour !== undefined) this.fillColour = fillColour;\n        if (strokeColour !== undefined) this.strokeColour = strokeColour;\n    }\n\n    abstract getBoundingBox(): BoundingRect;\n\n    // If inWorldCoord is\n    abstract contains(point: GlobalPoint): boolean;\n\n    abstract center(): GlobalPoint;\n    abstract center(centerPoint: GlobalPoint): void;\n    abstract getCorner(point: GlobalPoint): string | undefined;\n    visibleInCanvas(canvas: HTMLCanvasElement): boolean {\n        // for (const aura of this.auras) {\n        //     if (aura.value > 0) {\n        //         const auraCircle = new Circle(this.center(), aura.value);\n        //         if (auraCircle.visibleInCanvas(canvas)) return true;\n        //     }\n        // }\n        return false;\n    }\n\n    // Code to snap a shape to the grid\n    // This is shape dependent as the shape refPoints are shape specific in\n    abstract snapToGrid(): void;\n    abstract resizeToGrid(): void;\n    abstract resize(resizeDir: string, point: LocalPoint): void;\n\n    invalidate(skipLightUpdate: boolean) {\n        const l = layerManager.getLayer(this.layer);\n        if (l) l.invalidate(skipLightUpdate);\n    }\n\n    checkVisionSources() {\n        const self = this;\n        const obstructionIndex = store.visionBlockers.indexOf(this.uuid);\n        let changeBV = false;\n        if (this.visionObstruction && obstructionIndex === -1) {\n            store.visionBlockers.push(this.uuid);\n            changeBV = true;\n        } else if (!this.visionObstruction && obstructionIndex >= 0) {\n            store.visionBlockers.splice(obstructionIndex, 1);\n            changeBV = true;\n        }\n        if (changeBV) store.recalculateBV();\n\n        // Check if the visionsource auras are in the gameManager\n        this.auras.forEach(au => {\n            const ls = store.visionSources;\n            const i = ls.findIndex(o => o.aura === au.uuid);\n            if (au.visionSource && i === -1) {\n                ls.push({ shape: self.uuid, aura: au.uuid });\n            } else if (!au.visionSource && i >= 0) {\n                ls.splice(i, 1);\n            }\n        });\n        // Check if anything in the gameManager referencing this shape is in fact still a visionsource\n        for (let i = store.visionSources.length - 1; i >= 0; i--) {\n            const ls = store.visionSources[i];\n            if (ls.shape === self.uuid) {\n                if (!self.auras.some(a => a.uuid === ls.aura && a.visionSource)) store.visionSources.splice(i, 1);\n            }\n        }\n    }\n\n    setMovementBlock(blocksMovement: boolean) {\n        this.movementObstruction = blocksMovement || false;\n        const obstructionIndex = store.movementblockers.indexOf(this.uuid);\n        if (this.movementObstruction && obstructionIndex === -1) store.movementblockers.push(this.uuid);\n        else if (!this.movementObstruction && obstructionIndex >= 0) store.movementblockers.splice(obstructionIndex, 1);\n    }\n\n    setIsToken(isToken: boolean) {\n        this.isToken = isToken;\n        if (this.ownedBy()) {\n            const i = store.ownedtokens.indexOf(this.uuid);\n            if (this.isToken && i === -1) store.ownedtokens.push(this.uuid);\n            else if (!this.isToken && i >= 0) store.ownedtokens.splice(i, 1);\n        }\n    }\n\n    ownedBy(username?: string) {\n        if (username === undefined) username = store.username;\n        return store.IS_DM || this.owners.includes(username);\n    }\n\n    abstract asDict(): ServerShape;\n    getBaseDict(): ServerShape {\n        return {\n            type_: this.type,\n            uuid: this.uuid,\n            x: this.refPoint.x,\n            y: this.refPoint.y,\n            layer: this.layer,\n            draw_operator: this.globalCompositeOperation,\n            movement_obstruction: this.movementObstruction,\n            vision_obstruction: this.visionObstruction,\n            auras: aurasToServer(this.auras),\n            trackers: this.trackers,\n            owners: this.owners,\n            fill_colour: this.fillColour,\n            stroke_colour: this.strokeColour,\n            name: this.name,\n            annotation: this.annotation,\n            is_token: this.isToken,\n            options: JSON.stringify([...this.options]),\n        };\n    }\n    fromDict(data: ServerShape) {\n        this.layer = data.layer;\n        this.globalCompositeOperation = data.draw_operator;\n        this.movementObstruction = data.movement_obstruction;\n        this.visionObstruction = data.vision_obstruction;\n        this.auras = aurasFromServer(data.auras);\n        this.trackers = data.trackers;\n        this.owners = data.owners;\n        this.isToken = data.is_token;\n        if (data.annotation) this.annotation = data.annotation;\n        if (data.name) this.name = data.name;\n        if (data.options) this.options = new Map(JSON.parse(data.options));\n    }\n\n    draw(ctx: CanvasRenderingContext2D) {\n        if (this.globalCompositeOperation !== undefined) ctx.globalCompositeOperation = this.globalCompositeOperation;\n        else ctx.globalCompositeOperation = \"source-over\";\n        if (this.showHighlight) {\n            const bbox = this.getBoundingBox();\n            ctx.strokeStyle = \"red\";\n            ctx.strokeRect(g2lx(bbox.topLeft.x) - 5, g2ly(bbox.topLeft.y) - 5, g2lz(bbox.w) + 10, g2lz(bbox.h) + 10);\n        }\n    }\n\n    drawAuras(ctx: CanvasRenderingContext2D) {\n        for (const aura of this.auras) {\n            if (aura.value === 0 && aura.dim === 0) return;\n            ctx.beginPath();\n\n            const loc = g2l(this.center());\n            const innerRange = g2lr(aura.value + aura.dim);\n\n            if (aura.dim === 0) ctx.fillStyle = aura.colour;\n            else {\n                const gradient = ctx.createRadialGradient(\n                    loc.x,\n                    loc.y,\n                    g2lr(aura.value),\n                    loc.x,\n                    loc.y,\n                    g2lr(aura.value + aura.dim),\n                );\n                const tc = tinycolor(aura.colour);\n                ctx.fillStyle = gradient;\n                gradient.addColorStop(0, aura.colour);\n                gradient.addColorStop(1, tc.setAlpha(0).toRgbString());\n            }\n            if (!aura.visionSource || aura.lastPath === undefined) {\n                ctx.arc(loc.x, loc.y, innerRange, 0, 2 * Math.PI);\n                ctx.fill();\n            } else {\n                try {\n                    ctx.fill(aura.lastPath);\n                } catch (e) {\n                    ctx.arc(loc.x, loc.y, innerRange, 0, 2 * Math.PI);\n                    ctx.fill();\n                    console.warn(e);\n                }\n            }\n        }\n    }\n\n    getInitiativeRepr(): InitiativeData {\n        return {\n            uuid: this.uuid,\n            visible: !store.IS_DM,\n            group: false,\n            source: this.name,\n            has_img: false,\n            effects: [],\n            index: Infinity,\n        };\n    }\n\n    moveLayer(layer: string, sync: boolean) {\n        const oldLayer = layerManager.getLayer(this.layer);\n        const newLayer = layerManager.getLayer(layer);\n        if (oldLayer === undefined || newLayer === undefined) return;\n        this.layer = layer;\n        // Update layer shapes\n        oldLayer.shapes.splice(oldLayer.shapes.indexOf(this), 1);\n        newLayer.shapes.push(this);\n        // Revalidate layers  (light should at most be redone once)\n        oldLayer.invalidate(true);\n        newLayer.invalidate(false);\n        // Sync!\n        if (sync) socket.emit(\"Shape.Layer.Change\", { uuid: this.uuid, layer });\n    }\n}\n","import layerManager from \"@/game/layers/manager\";\nimport Shape from \"@/game/shapes/shape\";\nimport store from \"@/game/store\";\n\nimport { Ray, Vector } from \"@/game/geom\";\n\n// First go through each shape in the selection and see if the delta has to be truncated due to movement blockers\n\n// This is definitely super convoluted and inefficient but I was tired and really wanted the smooth wall sliding collision stuff to work\n// And it does now, so hey \\_()_/\nexport function calculateDelta(delta: Vector, sel: Shape, done?: string[]) {\n    if (done === undefined) done = [];\n    const ogSelBBox = sel.getBoundingBox();\n    const newSelBBox = ogSelBBox.offset(delta);\n    let refine = false;\n    for (const movementBlocker of store.movementblockers) {\n        if (done.includes(movementBlocker)) continue;\n        const blocker = layerManager.UUIDMap.get(movementBlocker)!;\n        const blockerBBox = blocker.getBoundingBox();\n        let found = blockerBBox.intersectsWithInner(newSelBBox);\n        if (!found) {\n            // This is an edge case, precalculating the rays is not worth in this case.\n            const ray = Ray.fromPoints(ogSelBBox.topLeft.add(delta.normalize()), newSelBBox.topLeft);\n            const invDir = ray.direction.inverse();\n            const dirIsNegative = [invDir.x < 0, invDir.y < 0];\n            found = blockerBBox.intersectP(ray, invDir, dirIsNegative).hit;\n        }\n        // Check if the bounding box of our destination would intersect with the bounding box of the movementblocker\n        if (found) {\n            const bCenter = blockerBBox.center();\n            const sCenter = ogSelBBox.center();\n\n            const d = sCenter.subtract(bCenter);\n            const ux = new Vector(1, 0);\n            const uy = new Vector(0, 1);\n            let dx = d.dot(ux);\n            let dy = d.dot(uy);\n            if (dx > blockerBBox.w / 2) dx = blockerBBox.w / 2;\n            if (dx < -blockerBBox.w / 2) dx = -blockerBBox.w / 2;\n            if (dy > blockerBBox.h / 2) dy = blockerBBox.h / 2;\n            if (dy < -blockerBBox.h / 2) dy = -blockerBBox.h / 2;\n\n            // Closest point / intersection point between the two bboxes.  Not the delta intersect!\n            const p = bCenter.add(ux.multiply(dx)).add(uy.multiply(dy));\n\n            if (p.x === ogSelBBox.topLeft.x || p.x === ogSelBBox.topRight.x) delta = new Vector(0, delta.y);\n            else if (p.y === ogSelBBox.topLeft.y || p.y === ogSelBBox.botLeft.y) delta = new Vector(delta.x, 0);\n            else {\n                if (p.x < ogSelBBox.topLeft.x) delta = new Vector(p.x - ogSelBBox.topLeft.x, delta.y);\n                else if (p.x > ogSelBBox.topRight.x) delta = new Vector(p.x - ogSelBBox.topRight.x, delta.y);\n                else if (p.y < ogSelBBox.topLeft.y) delta = new Vector(delta.x, p.y - ogSelBBox.topLeft.y);\n                else if (p.y > ogSelBBox.botLeft.y) delta = new Vector(delta.x, p.y - ogSelBBox.botLeft.y);\n            }\n            refine = true;\n            done.push(movementBlocker);\n            break;\n        }\n    }\n    if (refine) delta = calculateDelta(delta, sel, done);\n    return delta;\n}\n","import BoundingRect from \"@/game/shapes/boundingrect\";\nimport Shape from \"@/game/shapes/shape\";\nimport store from \"@/game/store\";\n\nimport { GlobalPoint, LocalPoint, Vector } from \"@/game/geom\";\nimport { calculateDelta } from \"@/game/ui/tools/utils\";\nimport { g2lx, g2ly, l2g, l2gx, l2gy } from \"@/game/units\";\nexport default abstract class BaseRect extends Shape {\n    w: number;\n    h: number;\n    constructor(topleft: GlobalPoint, w: number, h: number, fillColour?: string, strokeColour?: string, uuid?: string) {\n        super(topleft, fillColour, strokeColour, uuid);\n        this.w = w;\n        this.h = h;\n    }\n    getBaseDict() {\n        return Object.assign(super.getBaseDict(), {\n            width: this.w,\n            height: this.h,\n        });\n    }\n    getBoundingBox() {\n        return new BoundingRect(this.refPoint, this.w, this.h);\n    }\n    contains(point: GlobalPoint): boolean {\n        return (\n            this.refPoint.x <= point.x &&\n            this.refPoint.x + this.w >= point.x &&\n            this.refPoint.y <= point.y &&\n            this.refPoint.y + this.h >= point.y\n        );\n    }\n    inCorner(point: GlobalPoint, corner: string) {\n        switch (corner) {\n            case \"ne\":\n                return (\n                    this.refPoint.x + this.w - 3 <= point.x &&\n                    point.x <= this.refPoint.x + this.w + 3 &&\n                    this.refPoint.y - 3 <= point.y &&\n                    point.y <= this.refPoint.y + 3\n                );\n            case \"nw\":\n                return (\n                    this.refPoint.x - 3 <= point.x &&\n                    point.x <= this.refPoint.x + 3 &&\n                    this.refPoint.y - 3 <= point.y &&\n                    point.y <= this.refPoint.y + 3\n                );\n            case \"sw\":\n                return (\n                    this.refPoint.x - 3 <= point.x &&\n                    point.x <= this.refPoint.x + 3 &&\n                    this.refPoint.y + this.h - 3 <= point.y &&\n                    point.y <= this.refPoint.y + this.h + 3\n                );\n            case \"se\":\n                return (\n                    this.refPoint.x + this.w - 3 <= point.x &&\n                    point.x <= this.refPoint.x + this.w + 3 &&\n                    this.refPoint.y + this.h - 3 <= point.y &&\n                    point.y <= this.refPoint.y + this.h + 3\n                );\n            default:\n                return false;\n        }\n    }\n    getCorner(point: GlobalPoint): string | undefined {\n        if (this.inCorner(point, \"ne\")) return \"ne\";\n        else if (this.inCorner(point, \"nw\")) return \"nw\";\n        else if (this.inCorner(point, \"se\")) return \"se\";\n        else if (this.inCorner(point, \"sw\")) return \"sw\";\n    }\n    center(): GlobalPoint;\n    center(centerPoint: GlobalPoint): void;\n    center(centerPoint?: GlobalPoint): GlobalPoint | void {\n        if (centerPoint === undefined) return this.refPoint.add(new Vector(this.w / 2, this.h / 2));\n        this.refPoint.x = centerPoint.x - this.w / 2;\n        this.refPoint.y = centerPoint.y - this.h / 2;\n    }\n\n    visibleInCanvas(canvas: HTMLCanvasElement): boolean {\n        if (super.visibleInCanvas(canvas)) return true;\n        const coreVisible = !(\n            g2lx(this.refPoint.x) > canvas.width ||\n            g2ly(this.refPoint.y) > canvas.height ||\n            g2lx(this.refPoint.x + this.w) < 0 ||\n            g2ly(this.refPoint.y + this.h) < 0\n        );\n        if (coreVisible) return true;\n        return false;\n    }\n    snapToGrid() {\n        const gs = store.gridSize;\n        const center = this.center();\n        const mx = center.x;\n        const my = center.y;\n\n        let targetX;\n        let targetY;\n\n        if ((this.w / gs) % 2 === 0) {\n            targetX = Math.round(mx / gs) * gs - this.w / 2;\n        } else {\n            targetX = (Math.round((mx + gs / 2) / gs) - 1 / 2) * gs - this.w / 2;\n        }\n        if ((this.h / gs) % 2 === 0) {\n            targetY = Math.round(my / gs) * gs - this.h / 2;\n        } else {\n            targetY = (Math.round((my + gs / 2) / gs) - 1 / 2) * gs - this.h / 2;\n        }\n\n        const delta = calculateDelta(new Vector(targetX - this.refPoint.x, targetY - this.refPoint.y), this);\n        this.refPoint = this.refPoint.add(delta);\n\n        this.invalidate(false);\n    }\n    resizeToGrid() {\n        const gs = store.gridSize;\n        this.refPoint.x = Math.round(this.refPoint.x / gs) * gs;\n        this.refPoint.y = Math.round(this.refPoint.y / gs) * gs;\n        this.w = Math.max(Math.round(this.w / gs) * gs, gs);\n        this.h = Math.max(Math.round(this.h / gs) * gs, gs);\n        this.invalidate(false);\n    }\n    resize(resizedir: string, point: LocalPoint) {\n        const z = store.zoomFactor;\n        if (resizedir === \"nw\") {\n            this.w = g2lx(this.refPoint.x) + this.w * z - point.x;\n            this.h = g2ly(this.refPoint.y) + this.h * z - point.y;\n            this.refPoint = l2g(point);\n        } else if (resizedir === \"ne\") {\n            this.w = point.x - g2lx(this.refPoint.x);\n            this.h = g2ly(this.refPoint.y) + this.h * z - point.y;\n            this.refPoint.y = l2gy(point.y);\n        } else if (resizedir === \"se\") {\n            this.w = point.x - g2lx(this.refPoint.x);\n            this.h = point.y - g2ly(this.refPoint.y);\n        } else if (resizedir === \"sw\") {\n            this.w = g2lx(this.refPoint.x) + this.w * z - point.x;\n            this.h = point.y - g2ly(this.refPoint.y);\n            this.refPoint.x = l2gx(point.x);\n        }\n        this.w /= z;\n        this.h /= z;\n\n        if (this.w < 0) {\n            this.refPoint.x += this.w;\n            this.w = Math.abs(this.w);\n        }\n        if (this.h < 0) {\n            this.refPoint.y += this.h;\n            this.h = Math.abs(this.h);\n        }\n    }\n}\n","import BaseRect from \"@/game/shapes/baserect\";\nimport store from \"@/game/store\";\n\nimport { InitiativeData } from \"@/game/comm/types/general\";\nimport { ServerAsset } from \"@/game/comm/types/shapes\";\nimport { GlobalPoint } from \"@/game/geom\";\nimport { g2lx, g2ly, g2lz } from \"@/game/units\";\n\nexport default class Asset extends BaseRect {\n    type = \"assetrect\";\n    img: HTMLImageElement;\n    src: string = \"\";\n    constructor(img: HTMLImageElement, topleft: GlobalPoint, w: number, h: number, uuid?: string) {\n        super(topleft, w, h);\n        if (uuid !== undefined) this.uuid = uuid;\n        this.img = img;\n    }\n    asDict() {\n        return Object.assign(this.getBaseDict(), {\n            src: this.src,\n        });\n    }\n    fromDict(data: ServerAsset) {\n        super.fromDict(data);\n        this.src = data.src;\n    }\n    draw(ctx: CanvasRenderingContext2D) {\n        super.draw(ctx);\n        try {\n            ctx.drawImage(this.img, g2lx(this.refPoint.x), g2ly(this.refPoint.y), g2lz(this.w), g2lz(this.h));\n        } catch (error) {\n            console.warn(`Shape ${this.uuid} could not load the image ${this.src}`);\n        }\n    }\n    getInitiativeRepr(): InitiativeData {\n        return {\n            uuid: this.uuid,\n            visible: !store.IS_DM,\n            group: false,\n            source: this.src,\n            has_img: true,\n            effects: [],\n            index: Infinity,\n        };\n    }\n}\n","import Asset from \"@/game/shapes/asset\";\nimport Shape from \"@/game/shapes/shape\";\nimport store from \"@/game/store\";\n\nimport { GlobalPoint } from \"@/game/geom\";\nimport { GridLayer } from \"@/game/layers/grid\";\nimport { Layer } from \"@/game/layers/layer\";\nimport { l2gx, l2gy, l2gz } from \"@/game/units\";\n\nclass LayerManager {\n    layers: Layer[] = [];\n    width = window.innerWidth;\n    height = window.innerHeight;\n\n    UUIDMap: Map<string, Shape> = new Map();\n\n    // Refresh interval and redraw setter.\n    interval = 30;\n\n    constructor() {\n        const lm = this;\n        setInterval(() => {\n            for (let i = lm.layers.length - 1; i >= 0; i--) {\n                lm.layers[i].draw();\n            }\n        }, this.interval);\n    }\n\n    setWidth(width: number): void {\n        this.width = width;\n        for (const layer of this.layers) {\n            layer.canvas.width = width;\n            layer.width = width;\n        }\n    }\n\n    setHeight(height: number): void {\n        this.height = height;\n        for (const layer of this.layers) {\n            layer.canvas.height = height;\n            layer.height = height;\n        }\n    }\n\n    addLayer(layer: Layer): void {\n        this.layers.push(layer);\n        if (!store.IS_DM && !layer.playerEditable) return;\n        if (layer.selectable) store.addLayer(layer.name);\n    }\n\n    hasLayer(name: string): boolean {\n        return this.layers.some(l => l.name === name);\n    }\n\n    getLayer(name?: string) {\n        name = name === undefined ? store.selectedLayer : name;\n        for (const layer of this.layers) {\n            if (layer.name === name) return layer;\n        }\n    }\n\n    selectLayer(name: string, sync: boolean = true): void {\n        let found = false;\n        for (const layer of this.layers) {\n            if (!layer.selectable) continue;\n            if (found && layer.name !== \"fow\") layer.ctx.globalAlpha = 0.3;\n            else layer.ctx.globalAlpha = 1.0;\n\n            if (name === layer.name) {\n                store.selectLayer(name, sync);\n                found = true;\n            }\n\n            layer.clearSelection();\n            layer.invalidate(true);\n        }\n    }\n\n    getGridLayer(): GridLayer | undefined {\n        return <GridLayer>this.getLayer(\"grid\");\n    }\n\n    hasSelection() {\n        const selection = this.getSelection();\n        return selection !== undefined && selection.length > 0;\n    }\n\n    // THIS INCLUDES POTENTIALLY THE SelectTool.SelectionHelper !!!\n    getSelection() {\n        const layer = this.getLayer();\n        if (layer === undefined) return undefined;\n        return layer.selection;\n    }\n\n    invalidate(): void {\n        for (let i = this.layers.length - 1; i >= 0; i--) {\n            this.layers[i].invalidate(true);\n        }\n    }\n\n    invalidateLight() {\n        for (let i = this.layers.length - 1; i >= 0; i--)\n            if (this.layers[i].isVisionLayer) this.layers[i].invalidate(true);\n    }\n\n    dropAsset(event: DragEvent) {\n        const layer = this.getLayer();\n        if (layer === undefined || event === null || event.dataTransfer === null) return;\n        const image = document.createElement(\"img\");\n        image.src = event.dataTransfer.getData(\"text/plain\");\n        const asset = new Asset(\n            image,\n            new GlobalPoint(l2gx(event.clientX), l2gy(event.clientY)),\n            l2gz(image.width),\n            l2gz(image.height),\n        );\n        asset.src = new URL(image.src).pathname;\n\n        if (store.useGrid) {\n            const gs = store.gridSize;\n            asset.refPoint.x = Math.round(asset.refPoint.x / gs) * gs;\n            asset.refPoint.y = Math.round(asset.refPoint.y / gs) * gs;\n            asset.w = Math.max(Math.round(asset.w / gs) * gs, gs);\n            asset.h = Math.max(Math.round(asset.h / gs) * gs, gs);\n        }\n\n        layer.addShape(asset, true);\n    }\n}\n\nexport default new LayerManager();\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('modal',{attrs:{\"visible\":_vm.visible,\"mask\":false},on:{\"close\":function($event){_vm.visible = false}},scopedSlots:_vm._u([{key:\"header\",fn:function(m){return _c('div',{staticClass:\"modal-header\",attrs:{\"draggable\":\"true\"},on:{\"dragstart\":m.dragStart,\"dragend\":m.dragEnd}},[_c('div',[_vm._v(\"Initiative\")]),_c('div',{staticClass:\"header-close\",on:{\"click\":function($event){_vm.visible = false}}},[_c('i',{staticClass:\"far fa-window-close\"})])])}}])},[_c('div',{staticClass:\"modal-body\"},[_c('draggable',{attrs:{\"id\":\"initiative-list\",\"options\":{setData: _vm.fakeSetData, disabled: !_vm.$store.state.game.IS_DM}},on:{\"change\":_vm.updateOrder},model:{value:(_vm.data),callback:function ($$v) {_vm.data=$$v},expression:\"data\"}},[_vm._l((_vm.data),function(actor){return [_c('div',{key:actor.uuid,staticStyle:{\"display\":\"flex\",\"flex-direction\":\"column\",\"align-items\":\"flex-end\"}},[_c('div',{staticClass:\"initiative-actor\",class:{'initiative-selected': _vm.currentActor === actor.uuid},style:({'cursor': _vm.$store.state.game.IS_DM && 'move'}),on:{\"mouseenter\":function($event){_vm.toggleHighlight(actor, true)},\"mouseleave\":function($event){_vm.toggleHighlight(actor, false)}}},[(actor.has_img)?[_c('img',{attrs:{\"src\":actor.source,\"width\":\"30px\",\"height\":\"30px\"}})]:[_c('span',{staticStyle:{\"width\":\"auto\"}},[_vm._v(_vm._s(actor.source))])],_c('input',{directives:[{name:\"model\",rawName:\"v-model.lazy.number\",value:(actor.initiative),expression:\"actor.initiative\",modifiers:{\"lazy\":true,\"number\":true}}],class:{'notAllowed': !_vm.owns(actor)},attrs:{\"type\":\"text\",\"placeholder\":\"value\",\"disabled\":!_vm.owns(actor)},domProps:{\"value\":(actor.initiative)},on:{\"change\":[function($event){_vm.$set(actor, \"initiative\", _vm._n($event.target.value))},function($event){_vm.syncInitiative(actor)}],\"blur\":function($event){_vm.$forceUpdate()}}}),_c('div',{staticClass:\"initiative-effects-icon\",class:{'notAllowed': !_vm.owns(actor)},staticStyle:{\"opacity\":\"0.6\"},on:{\"click\":function($event){_vm.createEffect(actor, _vm.getDefaultEffect(), true)}}},[_c('i',{staticClass:\"fas fa-stopwatch\"}),(actor.effects)?[_vm._v(_vm._s(actor.effects.length))]:[_vm._v(\"0\")]],2),_c('div',{class:{'notAllowed': !_vm.owns(actor)},style:({'opacity': actor.visible ? '1.0' : '0.3'}),on:{\"click\":function($event){_vm.toggleOption(actor, 'visible')}}},[_c('i',{staticClass:\"fas fa-eye\"})]),_c('div',{class:{'notAllowed': !_vm.owns(actor)},style:({'opacity': actor.group ? '1.0' : '0.3'}),on:{\"click\":function($event){_vm.toggleOption(actor, 'group')}}},[_c('i',{staticClass:\"fas fa-users\"})]),_c('div',{class:{'notAllowed': !_vm.owns(actor)},style:({'opacity': _vm.owns(actor) ? '1.0' : '0.3'}),on:{\"click\":function($event){_vm.removeInitiative(actor.uuid, true, true)}}},[_c('i',{staticClass:\"fas fa-trash-alt\"})])],2),(actor.effects)?_c('div',{staticClass:\"initiative-effect\"},_vm._l((actor.effects),function(effect){return _c('div',{key:effect.uuid},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(effect.name),expression:\"effect.name\"}],attrs:{\"type\":\"text\",\"size\":effect.name.length || 1},domProps:{\"value\":(effect.name)},on:{\"change\":function($event){_vm.updateEffect(actor.uuid, effect, true)},\"input\":function($event){if($event.target.composing){ return; }_vm.$set(effect, \"name\", $event.target.value)}}}),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(effect.turns),expression:\"effect.turns\"}],attrs:{\"type\":\"text\",\"size\":effect.turns.toString().length || 1},domProps:{\"value\":(effect.turns)},on:{\"change\":function($event){_vm.updateEffect(actor.uuid, effect, true)},\"input\":function($event){if($event.target.composing){ return; }_vm.$set(effect, \"turns\", $event.target.value)}}})])})):_vm._e()])]})],2),_c('div',{attrs:{\"id\":\"initiative-bar\"}},[_c('div',{attrs:{\"id\":\"initiative-round\"}},[_vm._v(\"Round \"+_vm._s(_vm.roundCounter))]),_c('div',{staticStyle:{\"display\":\"flex\"}}),_c('div',{staticClass:\"initiative-bar-button\",class:{'notAllowed': !_vm.$store.state.game.IS_DM},on:{\"click\":function($event){_vm.setRound(0, true); _vm.setTurn(_vm.data[0].uuid, true)}}},[_c('i',{staticClass:\"fas fa-sync-alt\"})]),_c('div',{staticClass:\"initiative-bar-button\",class:{'notAllowed': !_vm.$store.state.game.IS_DM},on:{\"click\":_vm.nextTurn}},[_c('i',{staticClass:\"fas fa-chevron-right\"})])])],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\nimport draggable from \"vuedraggable\";\nVue.component(\"draggable\", draggable);\n\nimport modal from \"@/core/components/modals/modal.vue\";\nimport socket from \"@/game/api/socket\";\nimport layerManager from \"@/game/layers/manager\";\n\nimport { uuidv4 } from \"@/core/utils\";\nimport { InitiativeData, InitiativeEffect } from \"@/game/comm/types/general\";\n\nexport default Vue.component(\"initiative-dialog\", {\n    data: () => ({\n        visible: false,\n        data: <InitiativeData[]>[],\n        currentActor: <string | null>null,\n        roundCounter: 0,\n    }),\n    components: {\n        modal,\n        draggable,\n    },\n    methods: {\n        // Utilities\n        clear() {\n            this.data = [];\n            this.currentActor = null;\n        },\n        getActor(actorId: string) {\n            return this.data.find(a => a.uuid === actorId);\n        },\n        contains(uuid: string) {\n            return this.data.some(d => d.uuid === uuid);\n        },\n        owns(actor: InitiativeData): boolean {\n            if (this.$store.state.game.IS_DM) return true;\n            const shape = layerManager.UUIDMap.get(actor.uuid);\n            // Shapes that are unknown to this client are hidden from this client but owned by other clients\n            if (shape === undefined) return false;\n            return shape.owners.includes(this.$store.state.game.username);\n        },\n        getDefaultEffect() {\n            return { uuid: uuidv4(), name: \"New Effect\", turns: 10 };\n        },\n        fakeSetData(dataTransfer: DataTransfer) {\n            dataTransfer.setData(\"Hack\", \"\");\n        },\n        syncInitiative(data: InitiativeData | { uuid: string }) {\n            socket.emit(\"Initiative.Update\", data);\n        },\n        // Events\n        addInitiative(data: InitiativeData) {\n            const d = this.data.findIndex(a => a.uuid === data.uuid);\n            if (d >= 0) return;\n            if (data.initiative === undefined) data.initiative = 0;\n            this.syncInitiative(data);\n        },\n        removeInitiative(uuid: string) {\n            const d = this.data.findIndex(a => a.uuid === uuid);\n            if (d < 0 || this.data[d].group) return;\n            this.syncInitiative({ uuid });\n            // Remove highlight\n            const shape = layerManager.UUIDMap.get(uuid);\n            if (shape === undefined) return;\n            if (shape.showHighlight) {\n                shape.showHighlight = false;\n                layerManager.getLayer(shape.layer)!.invalidate(true);\n            }\n        },\n        updateOrder() {\n            if (!this.$store.state.game.IS_DM) return;\n            socket.emit(\"Initiative.Set\", this.data.map(d => d.uuid));\n        },\n        setTurn(actorId: string | null, sync: boolean) {\n            if (!this.$store.state.game.IS_DM && sync) return;\n            this.currentActor = actorId;\n            const actor = this.data.find(a => a.uuid === actorId);\n            if (actor === undefined) return;\n            if (actor.effects) {\n                for (let e = actor.effects.length - 1; e >= 0; e--) {\n                    if (actor.effects[e].turns <= 0) actor.effects.splice(e, 1);\n                    else actor.effects[e].turns--;\n                }\n            }\n            if (sync) socket.emit(\"Initiative.Turn.Update\", actorId);\n        },\n        setRound(round: number, sync: boolean) {\n            if (!this.$store.state.game.IS_DM && sync) return;\n            this.roundCounter = round;\n            if (sync) socket.emit(\"Initiative.Round.Update\", round);\n        },\n        nextTurn() {\n            if (!this.$store.state.game.IS_DM) return;\n            const order = this.data;\n            const next = order[(order.findIndex(a => a.uuid === this.currentActor) + 1) % order.length];\n            if (this.data[0].uuid === next.uuid) this.setRound(this.roundCounter + 1, true);\n            this.setTurn(next.uuid, true);\n        },\n        toggleHighlight(actor: InitiativeData, show: boolean) {\n            const shape = layerManager.UUIDMap.get(actor.uuid);\n            if (shape === undefined) return;\n            shape.showHighlight = show;\n            layerManager.getLayer(shape.layer)!.invalidate(true);\n        },\n        toggleOption(actor: InitiativeData, option: \"visible\" | \"group\") {\n            if (!this.owns(actor)) return;\n            actor[option] = !actor[option];\n            this.syncInitiative(actor);\n        },\n        createEffect(actor: InitiativeData, effect: InitiativeEffect, sync: boolean) {\n            if (!this.owns(actor)) return;\n            actor.effects.push(effect);\n            if (sync) socket.emit(\"Initiative.Effect.New\", { actor: actor.uuid, effect });\n        },\n        syncEffect(actor: InitiativeData, effect: InitiativeEffect) {\n            if (!this.owns(actor)) return;\n            socket.emit(\"Initiative.Effect.Update\", { actor: actor.uuid, effect });\n        },\n        updateEffect(actorId: string, effect: InitiativeEffect, sync: boolean) {\n            const actor = this.data.find(a => a.uuid === actorId);\n            if (actor === undefined) return;\n            const effectIndex = actor.effects.findIndex(e => e.uuid === effect.uuid);\n            if (effectIndex === undefined) return;\n            actor.effects[effectIndex] = effect;\n            if (sync) this.syncEffect(actor, effect);\n            else this.$forceUpdate();\n        },\n    },\n});\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./initiative.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./initiative.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./initiative.vue?vue&type=template&id=942876ae&scoped=true&\"\nimport script from \"./initiative.vue?vue&type=script&lang=ts&\"\nexport * from \"./initiative.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./initiative.vue?vue&type=style&index=0&id=942876ae&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"942876ae\",\n  null\n  \n)\n\ncomponent.options.__file = \"initiative.vue\"\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"menuContainer\"}},[_c('div',{ref:\"rm\",style:({\n              left: _vm.visible.settings ? '200px' : '0',\n              top: _vm.visible.locations ? '100px' : '0'\n          }),attrs:{\"id\":\"radialmenu\"}},[_c('div',{staticClass:\"rm-wrapper\"},[_c('div',{staticClass:\"rm-toggler\"},[_c('ul',{staticClass:\"rm-list\",class:{ 'rm-list-dm': _vm.IS_DM }},[(_vm.IS_DM)?_c('li',{staticClass:\"rm-item\",attrs:{\"id\":\"rm-locations\"},on:{\"click\":function($event){_vm.visible.locations = !_vm.visible.locations}}},[_vm._m(0)]):_vm._e(),_c('li',{staticClass:\"rm-item\",attrs:{\"id\":\"rm-settings\"},on:{\"click\":function($event){_vm.visible.settings = !_vm.visible.settings}}},[_vm._m(1)])])]),_vm._m(2)])]),_c('transition',{attrs:{\"name\":\"settings\"},on:{\"enter\":function($event){_vm.$refs.rm.style.transition = 'left 500ms'}}},[(_vm.visible.settings)?_c('div',{ref:\"settings\",attrs:{\"id\":\"menu\"},on:{\"click\":_vm.settingsClick}},[_c('div',{staticStyle:{\"width\":\"200px\",\"height\":\"90%\",\"overflow-y\":\"auto\",\"overflow-x\":\"hidden\"}},[(_vm.IS_DM)?[_c('button',{staticClass:\"accordion\"},[_vm._v(\"Assets\")]),_c('div',{staticClass:\"accordion-panel\"},[_c('a',{staticClass:\"actionButton\",attrs:{\"href\":\"/assets/\",\"target\":\"blank\"}},[_c('i',{staticClass:\"fas fa-external-link-alt\"})]),_c('div',{staticClass:\"directory\",attrs:{\"id\":\"menu-tokens\"}},[_c('asset-node',{attrs:{\"asset\":_vm.assets}})],1)]),_c('button',{staticClass:\"accordion\"},[_vm._v(\"Notes\")]),_c('div',{staticClass:\"accordion-panel\"},[_c('div',{staticClass:\"accordion-subpanel\",attrs:{\"id\":\"menu-notes\"}},[_c('a',{staticClass:\"actionButton\",on:{\"click\":_vm.createNote}},[_c('i',{staticClass:\"far fa-plus-square\"})]),_vm._l((_vm.notes),function(note){return _c('div',{key:note.uuid,staticStyle:{\"cursor\":\"pointer\"},on:{\"click\":function($event){_vm.openNote(note)}}},[_vm._v(_vm._s(note.title || \"[?]\"))])}),(!_vm.notes.length)?_c('div',[_vm._v(\"No notes\")]):_vm._e()],2)]),_c('button',{staticClass:\"accordion\"},[_vm._v(\"DM Options\")]),_c('div',{staticClass:\"accordion-panel\"},[_c('div',{staticClass:\"accordion-subpanel\"},[_c('label',{attrs:{\"for\":\"useGridInput\"}},[_vm._v(\"Use grid:\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.useGrid),expression:\"useGrid\"}],attrs:{\"id\":\"useGridInput\",\"type\":\"checkbox\",\"checked\":\"checked\"},domProps:{\"checked\":Array.isArray(_vm.useGrid)?_vm._i(_vm.useGrid,null)>-1:(_vm.useGrid)},on:{\"change\":function($event){var $$a=_vm.useGrid,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.useGrid=$$a.concat([$$v]))}else{$$i>-1&&(_vm.useGrid=$$a.slice(0,$$i).concat($$a.slice($$i+1)))}}else{_vm.useGrid=$$c}}}}),_c('label',{attrs:{\"for\":\"useFOWInput\"}},[_vm._v(\"Fill entire canvas with FOW:\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.fullFOW),expression:\"fullFOW\"}],attrs:{\"id\":\"useFOWInput\",\"type\":\"checkbox\"},domProps:{\"checked\":Array.isArray(_vm.fullFOW)?_vm._i(_vm.fullFOW,null)>-1:(_vm.fullFOW)},on:{\"change\":function($event){var $$a=_vm.fullFOW,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.fullFOW=$$a.concat([$$v]))}else{$$i>-1&&(_vm.fullFOW=$$a.slice(0,$$i).concat($$a.slice($$i+1)))}}else{_vm.fullFOW=$$c}}}}),_c('label',{attrs:{\"for\":\"fowOpacity\"}},[_vm._v(\"FOW opacity:\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.fowOpacity),expression:\"fowOpacity\",modifiers:{\"number\":true}}],attrs:{\"id\":\"fowOpacity\",\"type\":\"number\",\"min\":\"0\",\"max\":\"1\",\"step\":\"0.1\"},domProps:{\"value\":(_vm.fowOpacity)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.fowOpacity=_vm._n($event.target.value)},\"blur\":function($event){_vm.$forceUpdate()}}}),_c('label',{attrs:{\"for\":\"fowLOS\"}},[_vm._v(\"Only show lights in LoS:\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.fowLOS),expression:\"fowLOS\"}],attrs:{\"id\":\"fowLOS\",\"type\":\"checkbox\"},domProps:{\"checked\":Array.isArray(_vm.fowLOS)?_vm._i(_vm.fowLOS,null)>-1:(_vm.fowLOS)},on:{\"change\":function($event){var $$a=_vm.fowLOS,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.fowLOS=$$a.concat([$$v]))}else{$$i>-1&&(_vm.fowLOS=$$a.slice(0,$$i).concat($$a.slice($$i+1)))}}else{_vm.fowLOS=$$c}}}}),_c('label',{attrs:{\"for\":\"unitSizeInput\"}},[_vm._v(\"Unit Size (in ft.):\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.unitSize),expression:\"unitSize\",modifiers:{\"number\":true}}],attrs:{\"id\":\"unitSizeInput\",\"type\":\"number\"},domProps:{\"value\":(_vm.unitSize)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.unitSize=_vm._n($event.target.value)},\"blur\":function($event){_vm.$forceUpdate()}}}),_c('label',{attrs:{\"for\":\"gridSizeInput\"}},[_vm._v(\"Grid Size (in pixels):\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.gridSize),expression:\"gridSize\",modifiers:{\"number\":true}}],attrs:{\"id\":\"gridSizeInput\",\"type\":\"number\",\"min\":\"0\"},domProps:{\"value\":(_vm.gridSize)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.gridSize=_vm._n($event.target.value)},\"blur\":function($event){_vm.$forceUpdate()}}}),_c('label',{attrs:{\"for\":\"invitation\"}},[_vm._v(\"Invitation Code:\")]),_c('input',{attrs:{\"id\":\"invitation\",\"type\":\"text\",\"readonly\":\"readonly\"},domProps:{\"value\":_vm.invitationCode}})])])]:_vm._e(),_c('button',{staticClass:\"accordion\"},[_vm._v(\"Client Options\")]),_c('div',{staticClass:\"accordion-panel\"},[_c('div',{staticClass:\"accordion-subpanel\"},[_c('label',{attrs:{\"for\":\"gridColour\"}},[_vm._v(\"Grid Colour:\")]),_c('color-picker',{attrs:{\"id\":\"gridColour\",\"color\":_vm.gridColour},on:{\"update:color\":function($event){_vm.gridColour=$event}}}),_c('label',{attrs:{\"for\":\"fowColour\"}},[_vm._v(\"FOW Colour:\")]),_c('color-picker',{attrs:{\"id\":\"fowColour\",\"color\":_vm.fowColour},on:{\"update:color\":function($event){_vm.fowColour=$event}}}),_c('label',{attrs:{\"for\":\"rulerColour\"}},[_vm._v(\"Ruler Colour:\")]),_c('color-picker',{attrs:{\"id\":\"rulerColour\",\"color\":_vm.rulerColour},on:{\"update:color\":function($event){_vm.rulerColour=$event}}})],1)])],2),_c('a',{staticClass:\"accordion\",staticStyle:{\"text-decoration\":\"none\",\"display\":\"inline-block\",\"position\":\"absolute\",\"bottom\":\"0\"},attrs:{\"href\":\"/rooms\"}},[_vm._v(\"Exit\")])]):_vm._e()]),_c('transition',{attrs:{\"name\":\"locations\"},on:{\"enter\":function($event){_vm.$refs.rm.style.transition = 'top 500ms'}}},[(_vm.IS_DM && _vm.visible.locations)?_c('div',{attrs:{\"id\":\"locations-menu\"}},[_c('div',[_vm._l((_vm.locations),function(location){return _c('div',{key:location,on:{\"click\":function($event){_vm.changeLocation(location)}}},[_vm._v(_vm._s(location))])}),_c('div',{on:{\"click\":_vm.createLocation}},[_c('i',{staticClass:\"fas fa-plus\"})])],2)]):_vm._e()]),_c('img',{attrs:{\"id\":\"dragImage\"}})],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('a',{attrs:{\"href\":\"#\"}},[_c('i',{staticClass:\"far fa-compass\"})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('a',{attrs:{\"href\":\"#\"}},[_c('i',{staticClass:\"fas fa-cog\"})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',{staticClass:\"rm-topper\"},[_c('i',{staticClass:\"icon-share-alt\"})])}]\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"outer\",on:{\"click\":function($event){if($event.target !== $event.currentTarget){ return null; }return _vm.open($event)}}},[_c('div',{staticClass:\"current-color\",style:(_vm.transparent ? 'background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAIAAADZF8uwAAAAGUlEQVQYV2M4gwH+YwCGIasIUwhT25BVBADtzYNYrHvv4gAAAABJRU5ErkJggg==)' : 'background-color:' + _vm.color),on:{\"click\":function($event){if($event.target !== $event.currentTarget){ return null; }return _vm.open($event)}}}),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.display),expression:\"display\"}],staticClass:\"mask\",on:{\"click\":function($event){if($event.target !== $event.currentTarget){ return null; }return _vm.closePicker($event)}}}),_c('chrome-picker',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.display),expression:\"display\"}],ref:\"chromePicker\",style:({position: 'fixed', left:_vm.left + 'px', top:_vm.top + 'px', 'z-index': 9999}),attrs:{\"value\":_vm.color,\"tabindex\":\"-1\"},on:{\"input\":_vm.updateColor}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport tinycolor from \"tinycolor2\";\nimport Vue from \"vue\";\nimport { Chrome } from \"vue-color\";\n\nexport default Vue.component(\"colorpicker\", {\n    components: {\n        \"chrome-picker\": Chrome,\n    },\n    props: [\"color\"],\n    data: () => ({\n        display: false,\n        left: 0,\n        top: 0,\n        transparent: false,\n    }),\n    mounted() {\n        this.transparent = (<any>this.$refs.chromePicker).val.rgba.a === 0;\n        this.setPosition();\n    },\n    methods: {\n        open() {\n            if (this.display) return; // click on the picker itself\n            this.setPosition();\n            this.display = true;\n            this.$nextTick(() => this.$children[0].$el.focus());\n        },\n        updateColor(value: { rgba: { r: number; g: number; b: number; a: number } }) {\n            this.transparent = value.rgba.a === 0;\n            const newColor = tinycolor(value.rgba).toRgbString();\n            this.$emit(\"update:color\", newColor);\n            this.$emit(\"input\", newColor);\n        },\n        closePicker() {\n            this.display = false;\n            this.$emit(\"change\", this.color);\n        },\n        setPosition() {\n            const rect = this.$el.getBoundingClientRect();\n            // 224 is the width of the picker, 242 the height\n            if (rect.right + 224 > window.innerWidth) this.left = rect.left - 224;\n            else this.left = rect.right;\n            if (rect.bottom + 242 > window.innerHeight) this.top = rect.top - 242;\n            else this.top = rect.bottom;\n        },\n    },\n});\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./colorpicker.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./colorpicker.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./colorpicker.vue?vue&type=template&id=2c377313&scoped=true&\"\nimport script from \"./colorpicker.vue?vue&type=script&lang=ts&\"\nexport * from \"./colorpicker.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./colorpicker.vue?vue&type=style&index=0&id=2c377313&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2c377313\",\n  null\n  \n)\n\ncomponent.options.__file = \"colorpicker.vue\"\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ul',[_vm._l((_vm.folders),function(folder){return _c('li',{key:folder,staticClass:\"folder\",on:{\"click\":function($event){$event.stopPropagation();return _vm.toggle($event)}}},[_vm._v(\"\\n        \"+_vm._s(folder)+\"\\n        \"),_c('asset-node',{attrs:{\"asset\":_vm.asset[folder]}})],1)}),_vm._l((_vm.files),function(file){return _c('li',{key:file.name,staticClass:\"file draggable token\",attrs:{\"draggable\":\"true\"},on:{\"mouseover\":function($event){_vm.showImage = file.hash},\"mouseout\":function($event){_vm.showImage = null},\"dragstart\":function($event){_vm.dragStart($event, '/static/assets/' + file.hash)}}},[_vm._v(\"\\n        \"+_vm._s(file.name)+\"\\n        \"),(_vm.showImage == file.hash)?_c('div',{staticClass:\"preview\"},[_c('img',{staticClass:\"asset-preview-image\",attrs:{\"src\":\"/static/assets/\" + file.hash}})]):_vm._e()])})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\n\nimport { AssetFile } from \"@/core/comm/types\";\nimport { alphSort } from \"@/core/utils\";\n\nexport default Vue.component(\"asset-node\", {\n    props: [\"asset\", \"open\"],\n    data: () => ({\n        showImage: null,\n    }),\n    computed: {\n        folders(): string[] {\n            return Object.keys(this.asset)\n                .filter(el => ![\"__files\"].includes(el))\n                .sort(alphSort);\n        },\n        files(): AssetFile[] {\n            if (this.asset.__files)\n                return (<AssetFile[]>this.asset.__files)\n                    .concat()\n                    .sort((a, b) => (a.name.toLowerCase() > b.name.toLowerCase() ? 1 : -1));\n            return [];\n        },\n    },\n    methods: {\n        toggle(event: { target: HTMLElement }) {\n            // tslint:disable-next-line:prefer-for-of\n            for (let i = 0; i < event.target.children.length; i++) {\n                const el = <HTMLElement>event.target.children[i];\n                el.style.display = el.style.display === \"\" ? \"block\" : \"\";\n            }\n        },\n        dragStart(event: DragEvent, imageSource: string) {\n            if (event === null || event.dataTransfer === null) return;\n            const img = (<HTMLElement>event.target).querySelector(\".preview\")!;\n            event.dataTransfer.setDragImage(img, 0, 0);\n            event.dataTransfer.setData(\"text/plain\", imageSource);\n        },\n    },\n});\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./asset_node.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./asset_node.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./asset_node.vue?vue&type=template&id=1c906569&\"\nimport script from \"./asset_node.vue?vue&type=script&lang=ts&\"\nexport * from \"./asset_node.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./asset_node.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"asset_node.vue\"\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\n\nimport { mapState } from \"vuex\";\n\nimport colorpicker from \"@/core/components/colorpicker.vue\";\nimport socket from \"@/game/api/socket\";\nimport game from \"@/game/game.vue\";\nimport Settings from \"@/game/settings\";\nimport assetNode from \"./asset_node.vue\";\n\nimport { uuidv4 } from \"@/core/utils\";\nimport { Note } from \"@/game/comm/types/general\";\n\nexport default Vue.component(\"menu-bar\", {\n    components: {\n        \"color-picker\": colorpicker,\n        \"asset-node\": assetNode,\n    },\n    data: () => ({\n        visible: {\n            settings: false,\n            locations: false,\n        },\n    }),\n    computed: {\n        ...mapState(\"game\", [\"invitationCode\", \"IS_DM\", \"locations\", \"assets\", \"notes\"]),\n        useGrid: {\n            get(): boolean {\n                return this.$store.state.game.useGrid;\n            },\n            set(value: boolean) {\n                this.$store.commit(\"setUseGrid\", { useGrid: value, sync: true });\n            },\n        },\n        fullFOW: {\n            get(): boolean {\n                return this.$store.state.game.fullFOW;\n            },\n            set(value: boolean) {\n                this.$store.commit(\"setFullFOW\", { fullFOW: value, sync: true });\n            },\n        },\n        fowOpacity: {\n            get(): number {\n                return this.$store.state.game.fowOpacity;\n            },\n            set(value: number) {\n                if (typeof value !== \"number\") return;\n                this.$store.commit(\"setFOWOpacity\", { fowOpacity: value, sync: true });\n            },\n        },\n        fowLOS: {\n            get(): boolean {\n                return this.$store.state.game.fowLOS;\n            },\n            set(value: boolean) {\n                this.$store.commit(\"setLineOfSight\", { fowLOS: value, sync: true });\n            },\n        },\n        unitSize: {\n            get(): number {\n                return this.$store.state.game.unitSize;\n            },\n            set(value: number) {\n                if (typeof value !== \"number\") return;\n                this.$store.commit(\"setUnitSize\", { unitSize: value, sync: true });\n            },\n        },\n        gridSize: {\n            get(): number {\n                return this.$store.state.game.gridSize;\n            },\n            set(value: number) {\n                if (typeof value !== \"number\") return;\n                this.$store.commit(\"setGridSize\", { gridSize: value, sync: true });\n            },\n        },\n        gridColour: {\n            get(): string {\n                return this.$store.state.game.gridColour;\n            },\n            set(value: string) {\n                this.$store.commit(\"setGridColour\", { colour: value, sync: true });\n            },\n        },\n        fowColour: {\n            get(): string {\n                return this.$store.state.game.fowColour;\n            },\n            set(value: string) {\n                this.$store.commit(\"setFOWColour\", { colour: value, sync: true });\n            },\n        },\n        rulerColour: {\n            get(): string {\n                return this.$store.state.game.rulerColour;\n            },\n            set(value: string) {\n                this.$store.commit(\"setRulerColour\", { colour: value, sync: true });\n            },\n        },\n    },\n    methods: {\n        settingsClick(event: { target: HTMLElement }) {\n            if (event.target.classList.contains(\"accordion\")) {\n                event.target.classList.toggle(\"accordion-active\");\n                const next = <HTMLElement>event.target.nextElementSibling!;\n                next.style.display = next.style.display === \"\" ? \"block\" : \"\";\n            }\n        },\n        changeLocation(name: string) {\n            socket.emit(\"Location.Change\", name);\n        },\n        createLocation() {\n            (<any>game).$refs.prompt.prompt(`New location name:`, `Create new location`).then(\n                (value: string) => {\n                    socket.emit(\"Location.New\", value);\n                },\n                () => {},\n            );\n        },\n        createNote() {\n            const note = { title: \"New note\", text: \"\", uuid: uuidv4() };\n            this.$store.commit(\"newNote\", { note, sync: true });\n            this.openNote(note);\n        },\n        openNote(note: Note) {\n            (<any>game).$refs.note.open(note);\n        },\n    },\n});\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./menu.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./menu.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./menu.vue?vue&type=template&id=4bb01ba9&scoped=true&\"\nimport script from \"./menu.vue?vue&type=script&lang=ts&\"\nexport * from \"./menu.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./menu.vue?vue&type=style&index=0&id=4bb01ba9&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4bb01ba9\",\n  null\n  \n)\n\ncomponent.options.__file = \"menu.vue\"\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.note !== null)?_c('modal',{attrs:{\"visible\":_vm.visible,\"mask\":false},on:{\"close\":function($event){_vm.visible = false}},scopedSlots:_vm._u([{key:\"header\",fn:function(m){return _c('div',{staticClass:\"modal-header\",attrs:{\"draggable\":\"true\"},on:{\"dragstart\":m.dragStart,\"dragend\":m.dragEnd}},[_c('span',{on:{\"click\":function($event){_vm.$refs.title.select()}}},[_c('i',{staticClass:\"fas fa-pencil-alt\",staticStyle:{\"font-size\":\"15px\"}})]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.note.title),expression:\"note.title\"}],ref:\"title\",domProps:{\"value\":(_vm.note.title)},on:{\"change\":_vm.updateNote,\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.note, \"title\", $event.target.value)}}}),_c('div',{staticClass:\"header-close\",on:{\"click\":function($event){_vm.visible = false}}},[_c('i',{staticClass:\"far fa-window-close\"})])])}}])},[_c('div',{staticClass:\"modal-body\"},[_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.note.text),expression:\"note.text\"}],ref:\"textarea\",style:({'height': _vm.calcHeight()}),domProps:{\"value\":(_vm.note.text)},on:{\"change\":_vm.updateNote,\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.note, \"text\", $event.target.value)}}})]),_c('div',{staticClass:\"modal-footer\"},[_c('button',{on:{\"click\":_vm.removeNote}},[_c('i',{staticClass:\"far fa-trash-alt\"}),_vm._v(\" Remove\\n    \")])])]):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\n\nimport modal from \"@/core/components/modals/modal.vue\";\nimport game from \"@/game/game.vue\";\n\nimport { Note } from \"@/game/comm/types/general\";\n\nexport default Vue.component(\"initiative-dialog\", {\n    data: () => ({\n        visible: false,\n        note: <Note | null>null,\n    }),\n    components: {\n        modal,\n    },\n    methods: {\n        open(note: Note) {\n            this.visible = true;\n            this.note = note;\n        },\n        calcHeight() {\n            if (this.$refs.textarea) {\n                const el = <HTMLElement>this.$refs.textarea;\n                el.style.height = \"auto\";\n                el.style.height = el.scrollHeight + \"px\";\n                // Using the return value without the above did not achieve what I want, so hey /shrug\n                return el.scrollHeight + \"px\";\n            }\n            return \"100px\";\n        },\n        updateNote() {\n            this.$store.commit(\"updateNote\", { note: this.note, sync: true });\n        },\n        removeNote() {\n            (<any>game).$refs.confirm.open(\"Are you sure you wish to remove this?\").then(\n                (result: boolean) => {\n                    if (result) {\n                        this.$store.commit(\"removeNote\", { note: this.note, sync: true });\n                        this.visible = false;\n                    }\n                },\n                () => {},\n            );\n        },\n    },\n});\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./note.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./note.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./note.vue?vue&type=template&id=3ac7fb3c&scoped=true&\"\nimport script from \"./note.vue?vue&type=script&lang=ts&\"\nexport * from \"./note.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./note.vue?vue&type=style&index=0&id=3ac7fb3c&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3ac7fb3c\",\n  null\n  \n)\n\ncomponent.options.__file = \"note.vue\"\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.shape !== null)?_c('div',[_c('div',{attrs:{\"id\":\"selection-menu\"}},[_c('div',{attrs:{\"id\":\"selection-edit-button\"},on:{\"click\":_vm.openEditDialog}},[_c('i',{staticClass:\"fas fa-edit\"})]),_c('div',{attrs:{\"id\":\"selection-name\"}},[_vm._v(_vm._s(_vm.shape.name))]),_c('div',{attrs:{\"id\":\"selection-trackers\"}},[_vm._l((_vm.shape.trackers),function(tracker){return (tracker.name !== '' || tracker.value !== 0)?[_c('div',{key:'name-' + tracker.uuid},[_vm._v(_vm._s(tracker.name))]),_c('div',{key:'value-' + tracker.uuid,staticClass:\"selection-tracker-value\",on:{\"click\":function($event){_vm.changeValue(tracker, false)}}},[(tracker.maxvalue === 0)?[_vm._v(_vm._s(tracker.value))]:[_vm._v(_vm._s(tracker.value)+\" / \"+_vm._s(tracker.maxvalue))]],2)]:_vm._e()})],2),_c('div',{attrs:{\"id\":\"selection-auras\"}},[_vm._l((_vm.shape.auras),function(aura){return (aura.name !== '' || aura.value !== 0)?[_c('div',{key:'name-' + aura.uuid},[_vm._v(_vm._s(aura.name))]),_c('div',{key:'value-' + aura.uuid,staticClass:\"selection-tracker-value\",on:{\"click\":function($event){_vm.changeValue(aura, true)}}},[(aura.dim === 0)?[_vm._v(_vm._s(aura.value))]:[_vm._v(_vm._s(aura.value)+\" / \"+_vm._s(aura.dim))]],2)]:_vm._e()})],2)]),_c('edit-dialog',{ref:\"editDialog\",attrs:{\"shape\":_vm.shape}})],1):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('modal',{attrs:{\"visible\":_vm.visible,\"mask\":false},on:{\"close\":function($event){_vm.visible = false}},scopedSlots:_vm._u([{key:\"header\",fn:function(m){return _c('div',{staticClass:\"modal-header\",attrs:{\"draggable\":\"true\"},on:{\"dragstart\":m.dragStart,\"dragend\":m.dragEnd}},[_c('div',[_vm._v(\"Edit asset\")]),_c('div',{staticClass:\"header-close\",on:{\"click\":function($event){_vm.visible = false}}},[_c('i',{staticClass:\"far fa-window-close\"})])])}}])},[_c('div',{staticClass:\"modal-body\"},[_c('label',{attrs:{\"for\":\"shapeselectiondialog-name\"}},[_vm._v(\"Name\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.shape.name),expression:\"shape.name\"}],staticStyle:{\"grid-column\":\"numerator / end\"},attrs:{\"type\":\"text\",\"id\":\"shapeselectiondialog-name\"},domProps:{\"value\":(_vm.shape.name)},on:{\"change\":function($event){_vm.updateShape(false)},\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.shape, \"name\", $event.target.value)}}}),_c('label',{attrs:{\"for\":\"shapeselectiondialog-istoken\"}},[_vm._v(\"Is a token\")]),_c('input',{staticStyle:{\"grid-column-start\":\"remove\",\"width\":\"15px\",\"height\":\"15px\"},attrs:{\"type\":\"checkbox\",\"id\":\"shapeselectiondialog-istoken\"},domProps:{\"checked\":_vm.shape.isToken},on:{\"click\":_vm.setToken}}),_c('label',{attrs:{\"for\":\"shapeselectiondialog-visionblocker\"}},[_vm._v(\"Blocks vision/light\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.shape.visionObstruction),expression:\"shape.visionObstruction\"}],staticStyle:{\"grid-column-start\":\"remove\",\"width\":\"15px\",\"height\":\"15px\"},attrs:{\"type\":\"checkbox\",\"id\":\"shapeselectiondialog-visionblocker\"},domProps:{\"checked\":Array.isArray(_vm.shape.visionObstruction)?_vm._i(_vm.shape.visionObstruction,null)>-1:(_vm.shape.visionObstruction)},on:{\"change\":[function($event){var $$a=_vm.shape.visionObstruction,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.$set(_vm.shape, \"visionObstruction\", $$a.concat([$$v])))}else{$$i>-1&&(_vm.$set(_vm.shape, \"visionObstruction\", $$a.slice(0,$$i).concat($$a.slice($$i+1))))}}else{_vm.$set(_vm.shape, \"visionObstruction\", $$c)}},_vm.setVisionBlocker]}}),_c('label',{attrs:{\"for\":\"shapeselectiondialog-moveblocker\"}},[_vm._v(\"Blocks movement\")]),_c('input',{staticStyle:{\"grid-column-start\":\"remove\",\"width\":\"15px\",\"height\":\"15px\"},attrs:{\"type\":\"checkbox\",\"id\":\"shapeselectiondialog-moveblocker\"},domProps:{\"checked\":_vm.shape.movementObstruction},on:{\"click\":_vm.setMovementBlocker}}),_c('div',{staticClass:\"spanrow header\"},[_vm._v(\"Access\")]),_vm._l((_vm.shape.owners),function(owner){return [_c('input',{key:owner,staticStyle:{\"grid-column-start\":\"name\"},attrs:{\"type\":\"text\",\"placeholder\":\"name\"},domProps:{\"value\":owner},on:{\"change\":function($event){_vm.updateOwner($event, owner)}}}),(owner !== '')?_c('div',{key:'remove-' + owner,staticStyle:{\"grid-column-start\":\"remove\"},on:{\"click\":function($event){_vm.removeOwner(owner)}}},[_c('i',{staticClass:\"fas fa-trash-alt\"})]):_vm._e()]}),_c('div',{staticClass:\"spanrow header\"},[_vm._v(\"Trackers\")]),_vm._l((_vm.shape.trackers),function(tracker){return [_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(tracker.name),expression:\"tracker.name\"}],key:'name-'+tracker.uuid,staticStyle:{\"grid-column-start\":\"name\"},attrs:{\"type\":\"text\",\"placeholder\":\"name\"},domProps:{\"value\":(tracker.name)},on:{\"change\":function($event){_vm.updateShape(false);},\"input\":function($event){if($event.target.composing){ return; }_vm.$set(tracker, \"name\", $event.target.value)}}}),_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(tracker.value),expression:\"tracker.value\",modifiers:{\"number\":true}}],key:'value-'+tracker.uuid,attrs:{\"type\":\"text\",\"title\":\"Current value\"},domProps:{\"value\":(tracker.value)},on:{\"change\":function($event){_vm.updateShape(false)},\"input\":function($event){if($event.target.composing){ return; }_vm.$set(tracker, \"value\", _vm._n($event.target.value))},\"blur\":function($event){_vm.$forceUpdate()}}}),_c('span',{key:'fspan-'+tracker.uuid},[_vm._v(\"/\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(tracker.maxvalue),expression:\"tracker.maxvalue\",modifiers:{\"number\":true}}],key:'maxvalue-'+tracker.uuid,attrs:{\"type\":\"text\",\"title\":\"Current value\"},domProps:{\"value\":(tracker.maxvalue)},on:{\"change\":function($event){_vm.updateShape(false)},\"input\":function($event){if($event.target.composing){ return; }_vm.$set(tracker, \"maxvalue\", _vm._n($event.target.value))},\"blur\":function($event){_vm.$forceUpdate()}}}),_c('span',{key:'sspan-'+tracker.uuid}),_c('div',{key:'visibility-'+tracker.uuid,style:({opacity: tracker.visible ? 1.0 : 0.3}),on:{\"click\":function($event){tracker.visible = !tracker.visible;_vm.updateShape(false)}}},[_c('i',{staticClass:\"fas fa-eye\"})]),_c('span',{key:'tspan-'+tracker.uuid}),(tracker.name !== '' || tracker.value !== 0)?_c('div',{key:'remove-'+tracker.uuid,on:{\"click\":function($event){_vm.removeTracker(tracker.uuid)}}},[_c('i',{staticClass:\"fas fa-trash-alt\"})]):_vm._e()]}),_c('div',{staticClass:\"spanrow header\"},[_vm._v(\"Auras\")]),_vm._l((_vm.shape.auras),function(aura){return [_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(aura.name),expression:\"aura.name\"}],key:'name-'+aura.uuid,staticStyle:{\"grid-column-start\":\"name\"},attrs:{\"type\":\"text\",\"placeholder\":\"name\"},domProps:{\"value\":(aura.name)},on:{\"change\":function($event){_vm.updateShape(false)},\"input\":function($event){if($event.target.composing){ return; }_vm.$set(aura, \"name\", $event.target.value)}}}),_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(aura.value),expression:\"aura.value\",modifiers:{\"number\":true}}],key:'value-'+aura.uuid,attrs:{\"type\":\"text\",\"title\":\"Current value\"},domProps:{\"value\":(aura.value)},on:{\"change\":function($event){_vm.updateShape(true)},\"input\":function($event){if($event.target.composing){ return; }_vm.$set(aura, \"value\", _vm._n($event.target.value))},\"blur\":function($event){_vm.$forceUpdate()}}}),_c('span',{key:'fspan-'+aura.uuid},[_vm._v(\"/\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(aura.dim),expression:\"aura.dim\",modifiers:{\"number\":true}}],key:'dimvalue-'+aura.uuid,attrs:{\"type\":\"text\",\"title\":\"Dim value\"},domProps:{\"value\":(aura.dim)},on:{\"change\":function($event){_vm.updateShape(true)},\"input\":function($event){if($event.target.composing){ return; }_vm.$set(aura, \"dim\", _vm._n($event.target.value))},\"blur\":function($event){_vm.$forceUpdate()}}}),_c('color-picker',{key:'colour-'+aura.uuid,attrs:{\"color\":aura.colour},on:{\"update:color\":function($event){_vm.$set(aura, \"colour\", $event)},\"input\":function($event){_vm.updateAuraColour(aura, $event)},\"change\":function($event){_vm.updateShape(true)}}}),_c('div',{key:'visibility-'+aura.uuid,style:({opacity: aura.visible ? 1.0 : 0.3}),on:{\"click\":function($event){aura.visible = !aura.visible;_vm.updateShape(true)}}},[_c('i',{staticClass:\"fas fa-eye\"})]),_c('div',{key:'visionsource-'+aura.uuid,style:({opacity: aura.visionSource ? 1.0 : 0.3}),on:{\"click\":function($event){_vm.updateAuraVisionSource(aura)}}},[_c('i',{staticClass:\"fas fa-lightbulb\"})]),(aura.name !== '' || aura.value !== 0)?_c('div',{key:'remove-'+aura.uuid,on:{\"click\":function($event){_vm.removeAura(aura.uuid)}}},[_c('i',{staticClass:\"fas fa-trash-alt\"})]):_vm._e()]}),_c('div',{staticClass:\"spanrow header\"},[_vm._v(\"Annotation\")]),_c('textarea',{staticClass:\"spanrow\",domProps:{\"value\":_vm.shape.annotation},on:{\"change\":_vm.updateAnnotation}})],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\n\nimport colorpicker from \"@/core/components/colorpicker.vue\";\nimport modal from \"@/core/components/modals/modal.vue\";\nimport socket from \"@/game/api/socket\";\nimport layerManager from \"@/game/layers/manager\";\nimport Shape from \"@/game/shapes/shape\";\nimport store from \"@/game/store\";\n\nimport { uuidv4 } from \"@/core/utils\";\n\nexport default Vue.component(\"edit-dialog\", {\n    components: {\n        modal,\n        \"color-picker\": colorpicker,\n    },\n    props: {\n        shape: Object as () => Shape, // to make it work with typescript\n    },\n    data: () => ({\n        visible: false,\n    }),\n    updated() {\n        this.addEmpty();\n    },\n    methods: {\n        addEmpty() {\n            if (this.shape.owners[this.shape.owners.length - 1] !== \"\") this.shape.owners.push(\"\");\n            if (\n                !this.shape.trackers.length ||\n                this.shape.trackers[this.shape.trackers.length - 1].name !== \"\" ||\n                this.shape.trackers[this.shape.trackers.length - 1].value !== 0\n            )\n                this.shape.trackers.push({ uuid: uuidv4(), name: \"\", value: 0, maxvalue: 0, visible: false });\n            if (\n                !this.shape.auras.length ||\n                this.shape.auras[this.shape.auras.length - 1].name !== \"\" ||\n                this.shape.auras[this.shape.auras.length - 1].value !== 0\n            )\n                this.shape.auras.push({\n                    uuid: uuidv4(),\n                    name: \"\",\n                    value: 0,\n                    dim: 0,\n                    visionSource: false,\n                    colour: \"rgba(0,0,0,0)\",\n                    visible: false,\n                });\n        },\n        updateShape(redraw: boolean) {\n            socket.emit(\"Shape.Update\", { shape: this.shape.asDict(), redraw, temporary: false });\n            if (redraw) layerManager.invalidate();\n            this.addEmpty();\n        },\n        setToken(event: { target: HTMLInputElement }) {\n            this.shape.setIsToken(event.target.checked);\n            this.updateShape(true);\n        },\n        setVisionBlocker(event: { target: HTMLInputElement }) {\n            this.shape.checkVisionSources();\n            this.updateShape(true);\n        },\n        setMovementBlocker(event: { target: HTMLInputElement }) {\n            this.shape.setMovementBlock(event.target.checked);\n            this.updateShape(false);\n        },\n        updateAnnotation(event: { target: HTMLInputElement }) {\n            const hadAnnotation = this.shape.annotation !== \"\";\n            this.shape.annotation = event.target.value;\n            if (this.shape.annotation !== \"\" && !hadAnnotation) {\n                store.annotations.push(this.shape.uuid);\n                if (layerManager.hasLayer(\"draw\")) layerManager.getLayer(\"draw\")!.invalidate(true);\n            } else if (this.shape.annotation === \"\" && hadAnnotation) {\n                store.annotations.splice(store.annotations.findIndex(an => an === this.shape.uuid));\n                if (layerManager.hasLayer(\"draw\")) layerManager.getLayer(\"draw\")!.invalidate(true);\n            }\n            this.updateShape(false);\n        },\n        updateOwner(event: { target: HTMLInputElement }, oldValue: string) {\n            const ownerIndex = this.shape.owners.findIndex(o => o === oldValue);\n            if (ownerIndex >= 0) this.shape.owners.splice(ownerIndex, 1, event.target.value);\n            else this.shape.owners.push(event.target.value);\n            this.updateShape(this.$store.state.game.fowLOS);\n        },\n        removeOwner(value: string) {\n            const ownerIndex = this.shape.owners.findIndex(o => o === value);\n            this.shape.owners.splice(ownerIndex, 1);\n            this.updateShape(this.$store.state.game.fowLOS);\n        },\n        removeTracker(uuid: string) {\n            this.shape.trackers = this.shape.trackers.filter(tr => tr.uuid !== uuid);\n            this.updateShape(false);\n        },\n        removeAura(uuid: string) {\n            this.shape.auras = this.shape.auras.filter(au => au.uuid !== uuid);\n            this.shape.checkVisionSources();\n            this.updateShape(true);\n        },\n        updateAuraVisionSource(aura: Aura) {\n            aura.visionSource = !aura.visionSource;\n            const i = store.visionSources.findIndex(ls => ls.aura === aura.uuid);\n            if (aura.visionSource && i === -1) store.visionSources.push({ shape: this.shape.uuid, aura: aura.uuid });\n            else if (!aura.visionSource && i >= 0) store.visionSources.splice(i, 1);\n            // aura.lastPath = undefined;\n            layerManager.invalidateLight();\n            this.updateShape(true);\n        },\n        updateAuraColour(aura: Aura, colour: string) {\n            const layer = layerManager.getLayer(this.shape.layer);\n            if (layer === undefined) return;\n            layer.invalidate(!aura.visionSource);\n        },\n    },\n});\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./edit_dialog.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./edit_dialog.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./edit_dialog.vue?vue&type=template&id=16427a8e&scoped=true&\"\nimport script from \"./edit_dialog.vue?vue&type=script&lang=ts&\"\nexport * from \"./edit_dialog.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./edit_dialog.vue?vue&type=style&index=0&id=16427a8e&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"16427a8e\",\n  null\n  \n)\n\ncomponent.options.__file = \"edit_dialog.vue\"\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\n\nimport socket from \"@/game/api/socket\";\nimport game from \"@/game/game.vue\";\nimport layerManager from \"@/game/layers/manager\";\nimport Shape from \"@/game/shapes/shape\";\nimport EditDialog from \"@/game/ui/selection/edit_dialog.vue\";\n\nexport default Vue.extend({\n    components: {\n        \"edit-dialog\": EditDialog,\n    },\n    data: () => ({\n        shape: <Shape | null>null,\n    }),\n    methods: {\n        openEditDialog() {\n            (<any>this.$refs.editDialog).visible = true;\n        },\n        changeValue(object: Tracker | Aura, redraw: boolean) {\n            if (this.shape === null) return;\n            (<any>game).$refs.prompt.prompt(`New  ${object.name} value:`, `Updating ${object.name}`).then(\n                (value: string) => {\n                    if (this.shape === null) return;\n                    const ogValue = object.value;\n                    if (value[0] === \"+\" || value[0] === \"-\") object.value += parseInt(value, 10);\n                    else object.value = parseInt(value, 10);\n                    if (isNaN(object.value)) object.value = ogValue;\n                    socket.emit(\"Shape.Update\", { shape: this.shape.asDict(), redraw, temporary: false });\n                    if (redraw) layerManager.invalidate();\n                },\n                () => {},\n            );\n        },\n    },\n});\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./selection_info.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./selection_info.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./selection_info.vue?vue&type=template&id=75b524c1&scoped=true&\"\nimport script from \"./selection_info.vue?vue&type=script&lang=ts&\"\nexport * from \"./selection_info.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./selection_info.vue?vue&type=style&index=0&id=75b524c1&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"75b524c1\",\n  null\n  \n)\n\ncomponent.options.__file = \"selection_info.vue\"\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{attrs:{\"id\":\"toolselect\"}},[_c('ul',_vm._l((_vm.tools),function(tool){return (!_vm.dmTools.includes(tool) || _vm.IS_DM)?_c('li',{key:tool,ref:tool + '-selector',refInFor:true,class:{'tool-selected': _vm.currentTool === tool},on:{\"click\":function($event){_vm.currentTool = tool}}},[_c('a',{attrs:{\"href\":\"#\"}},[_vm._v(_vm._s(tool))])]):_vm._e()}))]),_c('div',[[_c('select-tool',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.currentTool === 'Select'),expression:\"currentTool === 'Select'\"}],ref:\"selectTool\"}),_c('pan-tool',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.currentTool === 'Pan'),expression:\"currentTool === 'Pan'\"}]}),_c('keep-alive',[_c('draw-tool',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.currentTool === 'Draw'),expression:\"currentTool === 'Draw'\"}]})],1),_c('ruler-tool',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.currentTool === 'Ruler'),expression:\"currentTool === 'Ruler'\"}]}),_c('map-tool',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.currentTool === 'Map'),expression:\"currentTool === 'Map'\"}]}),_c('shape-menu',{ref:\"shapecontext\"}),_c('createtoken-dialog',{ref:\"createtokendialog\"})]],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import tinycolor from \"tinycolor2\";\n\nimport store from \"@/game/store\";\n\nimport { LocalPoint } from \"@/game/geom\";\n\nexport function getMouse(e: MouseEvent): LocalPoint {\n    return new LocalPoint(e.pageX, e.pageY);\n}\n\nexport function getFogColour(opposite: boolean = false): string {\n    const tc = tinycolor(store.fowColour);\n    if (store.IS_DM) tc.setAlpha(opposite ? 1 : store.fowOpacity);\n    else tc.setAlpha(1);\n    return tc.toRgbString();\n}\n","import BaseRect from \"@/game/shapes/baserect\";\nimport store from \"@/game/store\";\n\nimport { GlobalPoint } from \"@/game/geom\";\nimport { g2l } from \"@/game/units\";\nimport { getFogColour } from \"@/game/utils\";\n\nexport default class Rect extends BaseRect {\n    type = \"rect\";\n    constructor(topleft: GlobalPoint, w: number, h: number, fillColour?: string, strokeColour?: string, uuid?: string) {\n        super(topleft, w, h, fillColour, strokeColour, uuid);\n    }\n    asDict() {\n        return super.getBaseDict();\n    }\n    draw(ctx: CanvasRenderingContext2D) {\n        super.draw(ctx);\n        if (this.fillColour === \"fog\") ctx.fillStyle = getFogColour();\n        else ctx.fillStyle = this.fillColour;\n        const z = store.zoomFactor;\n        const loc = g2l(this.refPoint);\n        ctx.fillRect(loc.x, loc.y, this.w * z, this.h * z);\n        if (this.strokeColour !== \"rgba(0, 0, 0, 0)\") {\n            ctx.strokeStyle = this.strokeColour;\n            ctx.lineWidth = 5;\n            ctx.strokeRect(loc.x, loc.y, this.w * z, this.h * z);\n        }\n    }\n}\n","import BoundingRect from \"@/game/shapes/boundingrect\";\nimport Shape from \"@/game/shapes/shape\";\n\nimport { GlobalPoint, LocalPoint } from \"@/game/geom\";\nimport { g2l } from \"@/game/units\";\n\nexport default class Text extends Shape {\n    type = \"text\";\n    text: string;\n    font: string;\n    angle: number;\n    constructor(\n        position: GlobalPoint,\n        text: string,\n        font: string,\n        angle?: number,\n        fillColour?: string,\n        strokeColour?: string,\n        uuid?: string,\n    ) {\n        super(position, fillColour, strokeColour, uuid);\n        this.text = text;\n        this.font = font;\n        this.angle = angle || 0;\n    }\n    asDict() {\n        return Object.assign(this.getBaseDict(), {\n            text: this.text,\n            font: this.font,\n            angle: this.angle,\n        });\n    }\n    getBoundingBox(): BoundingRect {\n        return new BoundingRect(this.refPoint, 5, 5); // TODO: fix this bounding box\n    }\n    draw(ctx: CanvasRenderingContext2D) {\n        super.draw(ctx);\n        ctx.font = this.font;\n        ctx.fillStyle = this.fillColour;\n        ctx.save();\n        const dest = g2l(this.refPoint);\n        ctx.translate(dest.x, dest.y);\n        ctx.rotate(this.angle);\n        ctx.textAlign = \"center\";\n        this.getLines(ctx).map(line => ctx.fillText(line.text, line.x, line.y));\n        ctx.restore();\n    }\n    contains(point: GlobalPoint): boolean {\n        return false; // TODO\n    }\n\n    center(): GlobalPoint;\n    center(centerPoint: GlobalPoint): void;\n    center(centerPoint?: GlobalPoint): GlobalPoint | void {} // TODO\n    getCorner(point: GlobalPoint): string | undefined {\n        return \"\";\n    } // TODO\n    visibleInCanvas(canvas: HTMLCanvasElement): boolean {\n        return true;\n    } // TODO\n    snapToGrid(): void {}\n    resizeToGrid(): void {}\n    resize(resizeDir: string, point: LocalPoint): void {}\n\n    getMaxHeight(ctx: CanvasRenderingContext2D) {\n        const lines = this.getLines(ctx);\n        const lineHeight = 30;\n        return lineHeight * lines.length;\n    }\n\n    getMaxWidth(ctx: CanvasRenderingContext2D) {\n        const lines = this.getLines(ctx);\n        const widths = lines.map(line => ctx.measureText(line.text).width);\n        return Math.max(...widths);\n    }\n\n    private getLines(ctx: CanvasRenderingContext2D) {\n        const lines = this.text.split(\"\\n\");\n        const allLines: { text: string; x: number; y: number }[] = [];\n        const maxWidth = ctx.canvas.width;\n        const lineHeight = 30;\n        const x = 0; // this.refPoint.x;\n        let y = 0; // this.refPoint.y;\n\n        for (const line of lines) {\n            let targetLine = \"\";\n            const words = line.split(\" \");\n            for (const word of words) {\n                const testLine = targetLine + word + \" \";\n                const metrics = ctx.measureText(testLine);\n                const testWidth = metrics.width;\n                if (testWidth > maxWidth) {\n                    ctx.fillText(targetLine, x, y);\n                    allLines.push({ text: targetLine, x, y });\n                    targetLine = word + \" \";\n                    y += lineHeight;\n                } else {\n                    targetLine = testLine;\n                }\n            }\n            allLines.push({ text: targetLine, x, y });\n            y += lineHeight;\n        }\n        return allLines;\n    }\n}\n","import layerManager from \"@/game/layers/manager\";\nimport Rect from \"@/game/shapes/rect\";\nimport Text from \"@/game/shapes/text\";\nimport store from \"@/game/store\";\n\nimport { GlobalPoint, LocalPoint } from \"@/game/geom\";\nimport { Layer } from \"@/game/layers/layer\";\nimport { l2g } from \"@/game/units\";\n\nclass AnnotationManager {\n    annotationText: Text;\n    annotationRect: Rect;\n    layer: Layer | undefined;\n    shown: boolean = false;\n\n    constructor() {\n        const origin = new GlobalPoint(0, 0);\n        this.annotationText = new Text(origin, \"\", \"bold 20px serif\", 0, \"rgba(230, 230, 230, 1)\");\n        this.annotationRect = new Rect(origin, 0, 0, \"rgba(0, 0, 0, 0.6)\");\n    }\n\n    setActiveText(text: string) {\n        if (this.layer === undefined) {\n            if (layerManager.hasLayer(\"draw\")) {\n                this.layer = layerManager.getLayer(\"draw\")!;\n                this.layer.addShape(this.annotationRect, false);\n                this.layer.addShape(this.annotationText, false);\n            } else {\n                console.warn(\"There is no draw layer to draw annotations on!\");\n                return;\n            }\n        }\n        this.shown = text !== \"\";\n        this.annotationText.refPoint = l2g(new LocalPoint(this.layer.canvas.width / 2, 50));\n        this.annotationText.text = text;\n        const width = this.shown ? this.annotationText.getMaxWidth(this.layer.ctx) + 10 : 0;\n        const height = this.shown ? this.annotationText.getMaxHeight(this.layer.ctx) + 10 : 0;\n        this.annotationRect.refPoint = l2g(new LocalPoint(this.layer.canvas.width / 2 - width / 2, 30));\n        this.annotationRect.w = width / store.zoomFactor;\n        this.annotationRect.h = height / store.zoomFactor;\n        this.layer.invalidate(true);\n    }\n}\n\nexport default AnnotationManager;\n","import BoundingRect from \"@/game/shapes/boundingrect\";\nimport Shape from \"@/game/shapes/shape\";\nimport store from \"@/game/store\";\n\nimport { ServerCircle } from \"@/game/comm/types/shapes\";\nimport { GlobalPoint, LocalPoint, Vector } from \"@/game/geom\";\nimport { calculateDelta } from \"@/game/ui/tools/utils\";\nimport { g2l, g2lz, l2g } from \"@/game/units\";\nimport { getFogColour } from \"@/game/utils\";\n\nexport default class Circle extends Shape {\n    type = \"circle\";\n    r: number;\n    constructor(center: GlobalPoint, r: number, fillColour?: string, strokeColour?: string, uuid?: string) {\n        super(center, fillColour, strokeColour, uuid);\n        this.r = r || 1;\n    }\n    asDict(): ServerCircle {\n        // const base = <ServerCircle>this.getBaseDict();\n        // base.r = this.r;\n        // base.border = this.border;\n        // return base;\n        return Object.assign(this.getBaseDict(), {\n            radius: this.r,\n        });\n    }\n    fromDict(data: ServerCircle) {\n        super.fromDict(data);\n        this.r = data.radius;\n    }\n    getBoundingBox(): BoundingRect {\n        return new BoundingRect(\n            new GlobalPoint(this.refPoint.x - this.r, this.refPoint.y - this.r),\n            this.r * 2,\n            this.r * 2,\n        );\n    }\n    draw(ctx: CanvasRenderingContext2D) {\n        super.draw(ctx);\n        ctx.beginPath();\n        if (this.fillColour === \"fog\") ctx.fillStyle = getFogColour();\n        else ctx.fillStyle = this.fillColour;\n        const loc = g2l(this.refPoint);\n        ctx.arc(loc.x, loc.y, g2lz(this.r), 0, 2 * Math.PI);\n        ctx.fill();\n        if (this.strokeColour !== \"rgba(0, 0, 0, 0)\") {\n            ctx.beginPath();\n            ctx.lineWidth = g2lz(5);\n            ctx.strokeStyle = this.strokeColour;\n            ctx.arc(loc.x, loc.y, g2lz(this.r), 0, 2 * Math.PI);\n            ctx.stroke();\n        }\n    }\n    contains(point: GlobalPoint): boolean {\n        return (point.x - this.refPoint.x) ** 2 + (point.y - this.refPoint.y) ** 2 < this.r ** 2;\n    }\n    inCorner(point: GlobalPoint, corner: string) {\n        return false; // TODO\n    }\n    getCorner(point: GlobalPoint) {\n        if (this.inCorner(point, \"ne\")) return \"ne\";\n        else if (this.inCorner(point, \"nw\")) return \"nw\";\n        else if (this.inCorner(point, \"se\")) return \"se\";\n        else if (this.inCorner(point, \"sw\")) return \"sw\";\n    }\n    center(): GlobalPoint;\n    center(centerPoint: GlobalPoint): void;\n    center(centerPoint?: GlobalPoint): GlobalPoint | void {\n        if (centerPoint === undefined) return this.refPoint;\n        this.refPoint = centerPoint;\n    }\n    visibleInCanvas(canvas: HTMLCanvasElement): boolean {\n        return true;\n    } // TODO\n    snapToGrid() {\n        const gs = store.gridSize;\n        let targetX;\n        let targetY;\n        if (((2 * this.r) / gs) % 2 === 0) {\n            targetX = Math.round(this.refPoint.x / gs) * gs;\n        } else {\n            targetX = Math.round((this.refPoint.x - gs / 2) / gs) * gs + this.r;\n        }\n        if (((2 * this.r) / gs) % 2 === 0) {\n            targetY = Math.round(this.refPoint.y / gs) * gs;\n        } else {\n            targetY = Math.round((this.refPoint.y - gs / 2) / gs) * gs + this.r;\n        }\n        const delta = calculateDelta(new Vector(targetX - this.refPoint.x, targetY - this.refPoint.y), this);\n        this.refPoint = this.refPoint.add(delta);\n        this.invalidate(false);\n    }\n    resizeToGrid() {\n        const gs = store.gridSize;\n        this.r = Math.max(Math.round(this.r / gs) * gs, gs / 2);\n        this.invalidate(false);\n    }\n    resize(resizedir: string, point: LocalPoint) {\n        const z = store.zoomFactor;\n        const diff = l2g(point).subtract(this.refPoint);\n        this.r = Math.sqrt(Math.pow(diff.length(), 2) / 2);\n    }\n}\n","import * as tinycolor from \"tinycolor2\";\n\nimport Circle from \"@/game/shapes/circle\";\nimport store from \"@/game/store\";\n\nimport { calcFontScale } from \"@/core/utils\";\nimport { InitiativeData } from \"@/game/comm/types/general\";\nimport { ServerCircularToken } from \"@/game/comm/types/shapes\";\nimport { GlobalPoint } from \"@/game/geom\";\nimport { g2l, g2lz } from \"@/game/units\";\n\nexport default class CircularToken extends Circle {\n    type = \"circulartoken\";\n    text: string;\n    font: string;\n    constructor(\n        center: GlobalPoint,\n        r: number,\n        text: string,\n        font: string,\n        fillColour?: string,\n        strokeColour?: string,\n        uuid?: string,\n    ) {\n        super(center, r, fillColour, strokeColour, uuid);\n        this.text = text;\n        this.font = font;\n    }\n    asDict(): ServerCircularToken {\n        return Object.assign(this.getBaseDict(), {\n            radius: this.r,\n            text: this.text,\n            font: this.font,\n        });\n    }\n    fromDict(data: ServerCircularToken) {\n        super.fromDict(data);\n        this.r = data.radius;\n        this.text = data.text;\n        this.font = data.font;\n    }\n    draw(ctx: CanvasRenderingContext2D) {\n        super.draw(ctx);\n        ctx.font = this.font;\n        ctx.save();\n        const dest = g2l(this.center());\n        ctx.textAlign = \"center\";\n        ctx.textBaseline = \"middle\";\n        const xs = calcFontScale(ctx, this.text, g2lz(this.r), g2lz(this.r));\n        const ys = 0;\n        ctx.transform(xs, ys, -ys, xs, dest.x, dest.y);\n        ctx.fillStyle = tinycolor.mostReadable(this.fillColour, [\"#000\", \"#fff\"]).toHexString();\n        ctx.fillText(this.text, 0, 0);\n        ctx.restore();\n    }\n    getInitiativeRepr(): InitiativeData {\n        return {\n            uuid: this.uuid,\n            visible: !store.IS_DM,\n            group: false,\n            source: this.name === \"\" || this.name === \"Unknown shape\" ? this.text : this.name,\n            has_img: false,\n            effects: [],\n            index: Infinity,\n        };\n    }\n}\n","import BoundingRect from \"@/game/shapes/boundingrect\";\nimport Shape from \"@/game/shapes/shape\";\n\nimport { GlobalPoint, LocalPoint } from \"@/game/geom\";\nimport { g2lx, g2ly } from \"@/game/units\";\n\nexport default class Line extends Shape {\n    type = \"line\";\n    endPoint: GlobalPoint;\n    lineWidth: number;\n    constructor(\n        startPoint: GlobalPoint,\n        endPoint: GlobalPoint,\n        lineWidth?: number,\n        strokeColour?: string,\n        uuid?: string,\n    ) {\n        super(startPoint, \"rgba(0, 0, 0, 0)\", strokeColour || \"#000\", uuid);\n        this.endPoint = endPoint;\n        this.lineWidth = lineWidth === undefined ? 1 : lineWidth;\n    }\n    asDict() {\n        return Object.assign(this.getBaseDict(), {\n            x2: this.endPoint.x,\n            y2: this.endPoint.y,\n            lineWidth: this.lineWidth,\n        });\n    }\n    getBoundingBox(): BoundingRect {\n        return new BoundingRect(\n            new GlobalPoint(Math.min(this.refPoint.x, this.endPoint.x), Math.min(this.refPoint.x, this.endPoint.y)),\n            Math.abs(this.refPoint.x - this.endPoint.x),\n            Math.abs(this.refPoint.y - this.endPoint.y),\n        );\n    }\n    draw(ctx: CanvasRenderingContext2D) {\n        super.draw(ctx);\n        ctx.strokeStyle = this.strokeColour;\n        ctx.beginPath();\n        ctx.moveTo(g2lx(this.refPoint.x), g2ly(this.refPoint.y));\n        ctx.lineTo(g2lx(this.endPoint.x), g2ly(this.endPoint.y));\n        ctx.lineWidth = this.lineWidth;\n        ctx.stroke();\n    }\n    contains(point: GlobalPoint): boolean {\n        return false; // TODO\n    }\n\n    center(): GlobalPoint;\n    center(centerPoint: GlobalPoint): void;\n    center(centerPoint?: GlobalPoint): GlobalPoint | void {} // TODO\n    getCorner(point: GlobalPoint): string | undefined {\n        return \"\";\n    } // TODO\n    visibleInCanvas(canvas: HTMLCanvasElement): boolean {\n        return true;\n    } // TODO\n    snapToGrid(): void {}\n    resizeToGrid(): void {}\n    resize(resizeDir: string, point: LocalPoint): void {}\n}\n","import BoundingRect from \"@/game/shapes/boundingrect\";\nimport Shape from \"@/game/shapes/shape\";\n\nimport { GlobalPoint, LocalPoint } from \"@/game/geom\";\nimport { g2lx, g2ly, g2lz } from \"@/game/units\";\nimport { getFogColour } from \"@/game/utils\";\n\nexport default class MultiLine extends Shape {\n    type = \"multiline\";\n    points: GlobalPoint[] = [];\n    size: number;\n    constructor(startPoint: GlobalPoint, points?: GlobalPoint[], size?: number, strokeColour?: string, uuid?: string) {\n        super(startPoint, \"rgba(0, 0, 0, 0)\", strokeColour || \"#000\", uuid);\n        this.points = points || [];\n        this.size = size || 3;\n    }\n    asDict() {\n        return Object.assign(this.getBaseDict(), {\n            size: this.size,\n            points: this.points.map(p => ({ x: p.x, y: p.y })),\n        });\n    }\n    getBoundingBox(): BoundingRect {\n        let minx: number = this.refPoint.x;\n        let maxx: number = this.refPoint.y;\n        let miny: number = this.refPoint.x;\n        let maxy: number = this.refPoint.y;\n        for (const p of this.points) {\n            if (p.x < minx) minx = p.x;\n            if (p.x > maxx) maxx = p.x;\n            if (p.y < miny) miny = p.y;\n            if (p.y > maxy) maxy = p.y;\n        }\n        return new BoundingRect(new GlobalPoint(minx, miny), maxx - minx, maxy - miny);\n    }\n    draw(ctx: CanvasRenderingContext2D) {\n        super.draw(ctx);\n        ctx.beginPath();\n        ctx.lineCap = \"round\";\n        ctx.lineJoin = \"round\";\n        ctx.moveTo(g2lx(this.refPoint.x), g2ly(this.refPoint.y));\n        for (const p of this.points) ctx.lineTo(g2lx(p.x), g2ly(p.y));\n        if (this.strokeColour === \"fog\") ctx.strokeStyle = getFogColour();\n        else ctx.strokeStyle = this.strokeColour;\n        ctx.lineWidth = g2lz(this.size);\n        ctx.stroke();\n    }\n    contains(point: GlobalPoint): boolean {\n        return this.points.includes(point);\n    }\n\n    center(): GlobalPoint;\n    center(centerPoint: GlobalPoint): void;\n    center(centerPoint?: GlobalPoint): GlobalPoint | void {} // TODO\n    getCorner(point: GlobalPoint): string | undefined {\n        return \"\";\n    } // TODO\n    visibleInCanvas(canvas: HTMLCanvasElement): boolean {\n        return true;\n    } // TODO\n    snapToGrid(): void {}\n    resizeToGrid(): void {}\n    resize(resizeDir: string, point: LocalPoint): void {}\n}\n","import layerManager from \"@/game/layers/manager\";\nimport Asset from \"@/game/shapes/asset\";\nimport Circle from \"@/game/shapes/circle\";\nimport CircularToken from \"@/game/shapes/circulartoken\";\nimport Line from \"@/game/shapes/line\";\nimport MultiLine from \"@/game/shapes/multiline\";\nimport Rect from \"@/game/shapes/rect\";\nimport Shape from \"@/game/shapes/shape\";\nimport Text from \"@/game/shapes/text\";\n\nimport {\n    ServerAsset,\n    ServerCircle,\n    ServerCircularToken,\n    ServerLine,\n    ServerMultiLine,\n    ServerRect,\n    ServerShape,\n    ServerText,\n} from \"@/game/comm/types/shapes\";\nimport { GlobalPoint } from \"@/game/geom\";\n\nexport function createShapeFromDict(shape: ServerShape, dummy?: boolean) {\n    // TODO: is this dummy stuff actually needed, do we ever want to return the local shape?\n    if (dummy === undefined) dummy = false;\n    if (!dummy && layerManager.UUIDMap.has(shape.uuid)) return layerManager.UUIDMap.get(shape.uuid);\n\n    let sh: Shape;\n\n    // A fromJSON and toJSON on Shape would be cleaner but ts does not allow for static abstracts so yeah.\n\n    // Shape Type specifics\n\n    const refPoint = new GlobalPoint(shape.x, shape.y);\n    if (shape.type_ === \"rect\") {\n        const rect = <ServerRect>shape;\n        sh = new Rect(refPoint, rect.width, rect.height, rect.fill_colour, rect.stroke_colour, rect.uuid);\n    } else if (shape.type_ === \"circle\") {\n        const circ = <ServerCircle>shape;\n        sh = new Circle(refPoint, circ.radius, circ.fill_colour, circ.stroke_colour, circ.uuid);\n    } else if (shape.type_ === \"circulartoken\") {\n        const token = <ServerCircularToken>shape;\n        sh = new CircularToken(\n            refPoint,\n            token.radius,\n            token.text,\n            token.font,\n            token.fill_colour,\n            token.stroke_colour,\n            token.uuid,\n        );\n    } else if (shape.type_ === \"line\") {\n        const line = <ServerLine>shape;\n        sh = new Line(refPoint, new GlobalPoint(line.x2, line.y2), line.lineWidth, line.stroke_colour, line.uuid);\n    } else if (shape.type_ === \"multiline\") {\n        const multiline = <ServerMultiLine>shape;\n        sh = new MultiLine(\n            refPoint,\n            multiline.points.map(p => new GlobalPoint(p.x, p.y)),\n            multiline.size,\n            multiline.stroke_colour,\n            multiline.uuid,\n        );\n    } else if (shape.type_ === \"text\") {\n        const text = <ServerText>shape;\n        sh = new Text(refPoint, text.text, text.font, text.angle, text.fill_colour, text.stroke_colour, text.uuid);\n    } else if (shape.type_ === \"assetrect\") {\n        const asset = <ServerAsset>shape;\n        const img = new Image(asset.width, asset.height);\n        if (asset.src.startsWith(\"http\")) img.src = new URL(asset.src).pathname;\n        else img.src = asset.src;\n        sh = new Asset(img, refPoint, asset.width, asset.height, asset.uuid);\n        img.onload = () => {\n            layerManager.getLayer(shape.layer)!.invalidate(false);\n        };\n    } else {\n        return undefined;\n    }\n    sh.fromDict(shape);\n    return sh;\n}\n","import game from \"@/game/game.vue\";\nimport layerManager from \"@/game/layers/manager\";\nimport store from \"@/game/store\";\nimport AnnotationManager from \"@/game/ui/annotation\";\n\nimport { sendClientOptions } from \"@/game/api/utils\";\nimport { ServerShape } from \"@/game/comm/types/shapes\";\nimport { GlobalPoint } from \"@/game/geom\";\nimport { createShapeFromDict } from \"@/game/shapes/utils\";\nimport { g2l } from \"@/game/units\";\n\nexport class GameManager {\n    selectedTool: number = 0;\n\n    annotationManager = new AnnotationManager();\n\n    addShape(shape: ServerShape): void {\n        if (!layerManager.hasLayer(shape.layer)) {\n            console.log(`Shape with unknown layer ${shape.layer} could not be added`);\n            return;\n        }\n        const layer = layerManager.getLayer(shape.layer)!;\n        const sh = createShapeFromDict(shape);\n        if (sh === undefined) {\n            console.log(`Shape with unknown type ${shape.type_} could not be added`);\n            return;\n        }\n        layer.addShape(sh, false);\n        layer.invalidate(false);\n    }\n\n    updateShape(data: { shape: ServerShape; redraw: boolean; move: boolean }): void {\n        if (!layerManager.hasLayer(data.shape.layer)) {\n            console.log(`Shape with unknown layer ${data.shape.layer} could not be added`);\n            return;\n        }\n        const sh = createShapeFromDict(data.shape, true);\n        if (sh === undefined) {\n            console.log(`Shape with unknown type ${data.shape.type_} could not be added`);\n            return;\n        }\n        const oldShape = layerManager.UUIDMap.get(data.shape.uuid);\n        if (oldShape === undefined) {\n            console.log(`Shape with unknown id could not be updated`);\n            return;\n        }\n        const redrawInitiative = sh.owners !== oldShape.owners;\n        const shape = Object.assign(oldShape, sh);\n        shape.checkVisionSources();\n        shape.setMovementBlock(shape.movementObstruction);\n        shape.setIsToken(shape.isToken);\n        if (data.move && shape.visionObstruction) store.recalculateBV();\n        if (data.redraw) layerManager.getLayer(data.shape.layer)!.invalidate(false);\n        if (redrawInitiative) (<any>game).$refs.initiative.$forceUpdate();\n    }\n\n    setCenterPosition(position: GlobalPoint) {\n        const localPos = g2l(position);\n        // store.commit(\"increasePanX\", (window.innerWidth / 2 - localPos.x) / store.state.game.zoomFactor);\n        // store.commit(\"increasePanY\", (window.innerHeight / 2 - localPos.y) / store.state.game.zoomFactor);\n        layerManager.invalidate();\n        sendClientOptions();\n    }\n}\n\nconst gameManager = new GameManager();\n(<any>window).gameManager = gameManager;\nexport default gameManager;\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.getActiveLayer() !== undefined)?_c('contextmenu',{attrs:{\"visible\":_vm.visible,\"left\":_vm.x + 'px',\"top\":_vm.y + 'px'},on:{\"close\":_vm.close}},[(_vm.getLayers().length > 1)?_c('li',[_vm._v(\"Layer\\n        \"),_c('ul',_vm._l((_vm.getLayers()),function(layer){return _c('li',{key:layer.name,style:([_vm.getActiveLayer().name === layer.name ? {'background-color':'#82c8a0'}: {}]),on:{\"click\":function($event){_vm.setLayer(layer.name)}}},[_vm._v(\"\\n                \"+_vm._s(layer.name)+\"\\n            \")])}))]):_vm._e(),_c('li',{on:{\"click\":_vm.moveToBack}},[_vm._v(\"Move to back\")]),_c('li',{on:{\"click\":_vm.moveToFront}},[_vm._v(\"Move to front\")]),_c('li',{on:{\"click\":_vm.addInitiative}},[_vm._v(_vm._s(_vm.getInitiativeWord())+\" initiative\")])]):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.visible)?_c('div',{staticClass:\"ContextMenu\",style:({left:_vm.left, top:_vm.top}),attrs:{\"tabindex\":\"-1\"},on:{\"blur\":function($event){_vm.$emit('close')}}},[_c('ul',[_vm._t(\"default\")],2)]):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class='ContextMenu' tabindex=\"-1\" v-if=\"visible\" :style=\"{left:left, top:top}\" @blur=\"$emit('close')\">\n        <ul>\n            <slot></slot>\n        </ul>\n    </div>\n</template>\n\n<script>\nexport default {\n    props: [\"visible\", \"left\", \"top\"],\n};\n</script>\n\n<style>\n.ContextMenu {\n    position: fixed;\n    z-index: 11;\n}\n\n.ContextMenu ul {\n    border: 1px solid #ff7052;\n    border-radius: 5px;\n    background: white;\n    padding: 0;\n    list-style: none;\n    margin: 0;\n}\n\n.ContextMenu ul li {\n    border-bottom: 1px solid #ff7052;\n    padding: 5px;\n    cursor: pointer;\n}\n\n.ContextMenu ul li:hover {\n    background-color: #ff7052;\n}\n\n.ContextMenu ul li:last-child {\n    border-bottom: none;\n}\n\n.ContextMenu > ul > li {\n    clear: left;\n    position: relative;\n}\n\n.ContextMenu > ul > li ul {\n    display: none;\n    position: absolute;\n    left: 100%;\n    top: -1px;\n}\n\n.ContextMenu > ul > li:hover ul {\n    display: flex;\n    flex-direction: column;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./contextmenu.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./contextmenu.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./contextmenu.vue?vue&type=template&id=128fccc8&\"\nimport script from \"./contextmenu.vue?vue&type=script&lang=js&\"\nexport * from \"./contextmenu.vue?vue&type=script&lang=js&\"\nimport style0 from \"./contextmenu.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"contextmenu.vue\"\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\n\nimport contextmenu from \"@/core/components/contextmenu.vue\";\nimport game from \"@/game/game.vue\";\nimport layerManager from \"@/game/layers/manager\";\nimport Settings from \"@/game/settings\";\nimport Shape from \"@/game/shapes/shape\";\n\nimport { l2gx, l2gy } from \"@/game/units\";\n\nexport default Vue.component(\"shape-menu\", {\n    components: {\n        contextmenu,\n    },\n    data: () => ({\n        visible: false,\n        x: 0,\n        y: 0,\n        shape: <Shape | null>null,\n    }),\n    computed: {\n        activeLayer: (): string => {\n            const layer = layerManager.getLayer();\n            return layer === undefined ? \"\" : layer.name;\n        },\n    },\n    methods: {\n        open(event: MouseEvent, shape: Shape) {\n            this.visible = true;\n            this.x = event.pageX;\n            this.y = event.pageY;\n            this.shape = shape;\n            this.$nextTick(() => this.$children[0].$el.focus());\n        },\n        close() {\n            this.visible = false;\n            this.shape = null;\n        },\n        getLayers() {\n            return layerManager.layers.filter(l => l.selectable && (this.$store.state.game.IS_DM || l.playerEditable));\n        },\n        getActiveLayer() {\n            return layerManager.getLayer();\n        },\n        getInitiativeWord() {\n            if (this.shape === null) return \"\";\n            const initiative = (<any>game).$refs.initiative;\n            return initiative.contains(this.shape.uuid) ? \"Show\" : \"Add\";\n        },\n        setLayer(newLayer: string) {\n            if (this.shape === null) return;\n            this.shape.moveLayer(newLayer, true);\n            this.close();\n        },\n        moveToBack() {\n            if (this.shape === null) return;\n            const layer = this.getActiveLayer()!;\n            layer.moveShapeOrder(this.shape, 0, true);\n            this.close();\n        },\n        moveToFront() {\n            if (this.shape === null) return;\n            const layer = this.getActiveLayer()!;\n            layer.moveShapeOrder(this.shape, layer.shapes.length - 1, true);\n            this.close();\n        },\n        addInitiative() {\n            if (this.shape === null) return;\n            const initiative = (<any>game).$refs.initiative;\n            if (!initiative.contains(this.shape.uuid)) initiative.addInitiative(this.shape.getInitiativeRepr());\n            initiative.visible = true;\n            this.close();\n        },\n    },\n});\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./shapecontext.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./shapecontext.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./shapecontext.vue?vue&type=template&id=e2ea3ef2&scoped=true&\"\nimport script from \"./shapecontext.vue?vue&type=script&lang=ts&\"\nexport * from \"./shapecontext.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./shapecontext.vue?vue&type=style&index=0&id=e2ea3ef2&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"e2ea3ef2\",\n  null\n  \n)\n\ncomponent.options.__file = \"shapecontext.vue\"\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('modal',{attrs:{\"visible\":_vm.visible},on:{\"close\":function($event){_vm.visible = false}},scopedSlots:_vm._u([{key:\"header\",fn:function(m){return _c('div',{staticClass:\"modal-header\",attrs:{\"draggable\":\"true\"},on:{\"dragstart\":m.dragStart,\"dragend\":m.dragEnd}},[_vm._v(\"Create basic token\")])}}])},[_c('div',{staticClass:\"modal-body\"},[_c('label',{attrs:{\"for\":\"createtokendialog-text\"}},[_vm._v(\"Text\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.text),expression:\"text\"}],attrs:{\"type\":\"text\",\"id\":\"createtokendialog-name\"},domProps:{\"value\":(_vm.text)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.text=$event.target.value}}}),_c('label',[_vm._v(\"Colours\")]),_c('div',{staticClass:\"colours\"},[_c('span',[_vm._v(\"Fill:\")]),_c('color-picker',{attrs:{\"color\":_vm.fillColour},on:{\"update:color\":function($event){_vm.fillColour=$event}}}),_c('span',[_vm._v(\"Border:\")]),_c('color-picker',{attrs:{\"color\":_vm.borderColour},on:{\"update:color\":function($event){_vm.borderColour=$event}}})],1),_c('canvas',{ref:\"canvas\",attrs:{\"width\":\"100px\",\"height\":\"100px\"}})]),_c('div',{staticClass:\"modal-footer\"},[_c('button',{on:{\"click\":_vm.submit}},[_vm._v(\"Submit\")])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport * as tinycolor from \"tinycolor2\";\nimport Vue from \"vue\";\n\nimport { mapState } from \"vuex\";\n\nimport colorpicker from \"@/core/components/colorpicker.vue\";\nimport modal from \"@/core/components/modals/modal.vue\";\nimport layerManager from \"@/game/layers/manager\";\nimport Settings from \"@/game/settings\";\nimport CircularToken from \"@/game/shapes/circulartoken\";\n\nimport { calcFontScale } from \"@/core/utils\";\nimport { LocalPoint } from \"@/game/geom\";\nimport { getUnitDistance, l2g } from \"@/game/units\";\n\nexport default Vue.component(\"createtoken-modal\", {\n    components: {\n        modal,\n        \"color-picker\": colorpicker,\n    },\n    data: () => ({\n        x: 0,\n        y: 0,\n        visible: false,\n        text: \"X\",\n        fillColour: \"rgba(255, 255, 255, 1)\",\n        borderColour: \"rgba(0, 0, 0, 1)\",\n    }),\n    computed: {\n        ...mapState(\"game\", [\"unitSize\"]),\n    },\n    watch: {\n        text(newValue, oldValue) {\n            this.updatePreview();\n        },\n        fillColour(newValue, oldValue) {\n            this.updatePreview();\n        },\n        borderColour(newValue, oldValue) {\n            this.updatePreview();\n        },\n    },\n    mounted() {\n        this.updatePreview();\n    },\n    methods: {\n        open(x: number, y: number) {\n            this.visible = true;\n            this.x = x;\n            this.y = y;\n        },\n        submit() {\n            const layer = layerManager.getLayer();\n            if (layer === undefined) return;\n            const token = new CircularToken(\n                l2g(new LocalPoint(this.x, this.y)),\n                getUnitDistance(this.unitSize / 2),\n                this.text,\n                \"10px serif\",\n                this.fillColour,\n                this.borderColour,\n            );\n            token.owners.push(this.$store.state.username);\n            layer.addShape(token, true);\n            layer.invalidate(false);\n            this.visible = false;\n        },\n        updatePreview() {\n            const ctx = (<HTMLCanvasElement>this.$refs.canvas).getContext(\"2d\")!;\n            ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n            ctx.beginPath();\n            const dest = { x: ctx.canvas.width / 2, y: ctx.canvas.height / 2 };\n            const r = Math.min(dest.x, dest.y) * 0.9;\n\n            ctx.fillStyle = this.fillColour;\n\n            ctx.arc(dest.x, dest.y, r, 0, 2 * Math.PI);\n            ctx.fill();\n            if (this.borderColour !== \"rgba(0, 0, 0, 0)\") {\n                ctx.beginPath();\n                ctx.lineWidth = 5;\n                ctx.strokeStyle = this.borderColour;\n                ctx.arc(dest.x, dest.y, r, 0, 2 * Math.PI);\n                ctx.stroke();\n            }\n            ctx.save();\n            ctx.textAlign = \"center\";\n            ctx.textBaseline = \"middle\";\n            const xs = calcFontScale(ctx, this.text, r, r);\n            const ys = 0;\n            ctx.transform(xs, ys, -ys, xs, dest.x, dest.y);\n            ctx.fillStyle = tinycolor.mostReadable(this.fillColour, [\"#000\", \"#fff\"]).toHexString();\n            ctx.fillText(this.text, 0, 0);\n            ctx.restore();\n        },\n    },\n});\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./createtoken_modal.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./createtoken_modal.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./createtoken_modal.vue?vue&type=template&id=2ebb16e9&scoped=true&\"\nimport script from \"./createtoken_modal.vue?vue&type=script&lang=ts&\"\nexport * from \"./createtoken_modal.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./createtoken_modal.vue?vue&type=style&index=0&id=2ebb16e9&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2ebb16e9\",\n  null\n  \n)\n\ncomponent.options.__file = \"createtoken_modal.vue\"\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.selected)?_c('div',{staticClass:\"tool-detail\",style:({'--detailRight': _vm.detailRight, '--detailArrow': _vm.detailArrow})},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.IS_DM),expression:\"IS_DM\"}]},[_vm._v(\"Mode\")]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.IS_DM),expression:\"IS_DM\"}],staticClass:\"selectgroup\"},_vm._l((_vm.modes),function(mode){return _c('div',{key:mode,staticClass:\"option\",class:{'option-selected': _vm.modeSelect === mode},on:{\"click\":function($event){_vm.modeSelect = mode}}},[_vm._v(_vm._s(mode))])})),_c('div',[_vm._v(\"Shape\")]),_c('div',{staticClass:\"selectgroup\"},_vm._l((_vm.shapes),function(shape){return _c('div',{key:shape,staticClass:\"option\",class:{'option-selected': _vm.shapeSelect === shape},on:{\"click\":function($event){_vm.shapeSelect = shape}}},[_c('i',{staticClass:\"fas\",class:'fa-' + shape})])})),_c('div',[_vm._v(\"Colours\")]),_c('div',{staticClass:\"selectgroup\"},[_c('color-picker',{staticClass:\"option\",attrs:{\"color\":_vm.fillColour},on:{\"update:color\":function($event){_vm.fillColour=$event}}}),_c('color-picker',{staticClass:\"option\",attrs:{\"color\":_vm.borderColour},on:{\"update:color\":function($event){_vm.borderColour=$event}}})],1),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.shapeSelect === 'paint-brush'),expression:\"shapeSelect === 'paint-brush'\"}]},[_vm._v(\"Brush size\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.brushSize),expression:\"brushSize\"},{name:\"show\",rawName:\"v-show\",value:(_vm.shapeSelect === 'paint-brush'),expression:\"shapeSelect === 'paint-brush'\"}],staticStyle:{\"max-width\":\"100px\"},attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.brushSize)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.brushSize=$event.target.value}}})]):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c(\"div\")}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\nimport Vue from \"vue\";\nexport default Vue.component(\"tool\", {\n    data: () => ({\n        name: \"\",\n        selected: false,\n        active: false,\n    }),\n    computed: {\n        detailRight(): string {\n            const rect = (<any>this.$parent.$refs[this.name + \"-selector\"])[0].getBoundingClientRect();\n            const mid = rect.left + rect.width / 2;\n\n            return `${window.innerWidth - Math.min(window.innerWidth - 25, mid + 75)}px`;\n        },\n        detailArrow(): string {\n            const rect = (<any>this.$parent.$refs[this.name + \"-selector\"])[0].getBoundingClientRect();\n            const mid = rect.left + rect.width / 2;\n            const right = Math.min(window.innerWidth - 25, mid + 75);\n            return `${right - mid - 14}px`; // border width\n        },\n    },\n    created() {\n        this.$parent.$on(\"mousedown\", (event: MouseEvent, tool: string) => {\n            if (tool === this.name) this.onMouseDown(event);\n        });\n        this.$parent.$on(\"mouseup\", (event: MouseEvent, tool: string) => {\n            if (tool === this.name) this.onMouseUp(event);\n        });\n        this.$parent.$on(\"mousemove\", (event: MouseEvent, tool: string) => {\n            if (tool === this.name) this.onMouseMove(event);\n        });\n        this.$parent.$on(\"contextmenu\", (event: MouseEvent, tool: string) => {\n            if (tool === this.name) this.onContextMenu(event);\n        });\n        this.$parent.$on(\"tools-select-change\", (newValue: string, oldValue: string) => {\n            if (oldValue === this.name) {\n                this.selected = false;\n                this.onDeselect();\n            } else if (newValue === this.name) {\n                this.selected = true;\n                this.onSelect();\n            }\n        });\n    },\n    methods: {\n        onSelect() {},\n        onDeselect() {},\n        onMouseDown(event: MouseEvent) {},\n        onMouseUp(event: MouseEvent) {},\n        onMouseMove(event: MouseEvent) {},\n        onContextMenu(event: MouseEvent) {},\n    },\n});\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tool.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tool.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./tool.vue?vue&type=template&id=22bcb02a&\"\nimport script from \"./tool.vue?vue&type=script&lang=ts&\"\nexport * from \"./tool.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./tool.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"tool.vue\"\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport colorpicker from \"@/core/components/colorpicker.vue\";\nimport socket from \"@/game/api/socket\";\nimport layerManager from \"@/game/layers/manager\";\nimport Circle from \"@/game/shapes/circle\";\nimport MultiLine from \"@/game/shapes/multiline\";\nimport Rect from \"@/game/shapes/rect\";\nimport Shape from \"@/game/shapes/shape\";\nimport store from \"@/game/store\";\nimport Tool from \"@/game/ui/tools/tool.vue\";\n\nimport { GlobalPoint } from \"@/game/geom\";\nimport { FOWLayer } from \"@/game/layers/fow\";\nimport { getUnitDistance, l2g } from \"@/game/units\";\nimport { getMouse } from \"@/game/utils\";\n\nexport default Tool.extend({\n    components: {\n        \"color-picker\": colorpicker,\n    },\n    data: () => ({\n        name: \"Draw\",\n        active: false,\n\n        startPoint: <GlobalPoint | null>null,\n        shape: <Shape | null>null,\n        brushHelper: <Circle | null>null,\n\n        fillColour: \"rgba(0, 0, 0, 1)\",\n        borderColour: \"rgba(255, 255, 255, 0)\",\n\n        shapeSelect: \"square\",\n        shapes: [\"square\", \"circle\", \"paint-brush\"],\n        modeSelect: \"normal\",\n        modes: [\"normal\", \"reveal\", \"hide\"],\n\n        brushSize: getUnitDistance(store.unitSize),\n    }),\n    computed: {\n        helperSize(): number {\n            if (this.shapeSelect === \"paint-brush\") return this.brushSize / 2;\n            return getUnitDistance(this.unitSize) / 8;\n        },\n        IS_DM(): boolean {\n            return this.$store.state.game.IS_DM;\n        },\n        unitSize(): number {\n            return this.$store.state.game.unitSize;\n        },\n        useGrid(): boolean {\n            return this.$store.state.game.useGrid;\n        },\n    },\n    watch: {\n        fillColour() {\n            if (this.brushHelper) this.brushHelper.fillColour = this.fillColour;\n        },\n        modeSelect(newValue, oldValue) {\n            this.onModeChange(newValue, oldValue);\n        },\n    },\n    methods: {\n        setupBrush() {\n            if (this.brushHelper === null) return;\n            if (this.modeSelect === \"reveal\" || this.modeSelect === \"hide\") {\n                this.brushHelper.options.set(\"preFogShape\", true);\n                this.brushHelper.options.set(\"skipDraw\", true);\n                this.brushHelper.fillColour = \"rgba(0, 0, 0, 1)\";\n\n                if (this.modeSelect === \"reveal\") this.brushHelper.globalCompositeOperation = \"source-over\";\n                else if (this.modeSelect === \"hide\") this.brushHelper.globalCompositeOperation = \"destination-out\";\n            } else {\n                this.brushHelper.options.delete(\"preFogShape\");\n                this.brushHelper.options.delete(\"skipDraw\");\n                this.brushHelper.globalCompositeOperation = \"source-over\";\n                this.brushHelper.fillColour = this.fillColour;\n            }\n        },\n        onModeChange(newValue: string, oldValue: string) {\n            if (this.brushHelper === null) return;\n\n            const fowLayer = layerManager.getLayer(\"fow\");\n            const normalLayer = layerManager.getLayer();\n            if (fowLayer === undefined || normalLayer === undefined) return;\n\n            this.setupBrush();\n\n            if (newValue !== \"normal\" && oldValue === \"normal\") {\n                normalLayer.removeShape(this.brushHelper, false);\n                fowLayer.addShape(this.brushHelper, false);\n            } else if (newValue === \"normal\" && oldValue !== \"normal\") {\n                normalLayer.addShape(this.brushHelper, false);\n                fowLayer.removeShape(this.brushHelper, false);\n            }\n        },\n        getLayer() {\n            if (this.modeSelect === \"normal\") return layerManager.getLayer();\n            return layerManager.getLayer(\"fow\");\n        },\n        onMouseDown(event: MouseEvent) {\n            const layer = this.getLayer();\n            if (layer === undefined) {\n                console.log(\"No active layer!\");\n                return;\n            }\n            this.active = true;\n            this.startPoint = l2g(getMouse(event));\n            if (this.shapeSelect === \"square\")\n                this.shape = new Rect(this.startPoint.clone(), 0, 0, this.fillColour, this.borderColour);\n            else if (this.shapeSelect === \"circle\")\n                this.shape = new Circle(this.startPoint.clone(), this.helperSize, this.fillColour, this.borderColour);\n            else if (this.shapeSelect === \"paint-brush\") {\n                this.shape = new MultiLine(this.startPoint.clone(), [], this.brushSize);\n                this.shape.fillColour = this.fillColour;\n            } else return;\n\n            if (this.modeSelect !== \"normal\") {\n                this.shape.options.set(\"preFogShape\", true);\n                this.shape.options.set(\"skipDraw\", true);\n                this.shape.fillColour = \"rgba(0, 0, 0, 1)\";\n            }\n            if (this.modeSelect === \"reveal\") this.shape.globalCompositeOperation = \"source-over\";\n            else if (this.modeSelect === \"hide\") this.shape.globalCompositeOperation = \"destination-out\";\n\n            this.shape.owners.push(this.$store.state.game.username);\n            if (layer.name === \"fow\" && this.modeSelect === \"normal\") {\n                this.shape.visionObstruction = true;\n                this.shape.movementObstruction = true;\n            }\n            store.visionBlockers.push(this.shape.uuid);\n            layer.addShape(this.shape, true, false);\n\n            // Push brushhelper to back\n            this.onDeselect();\n            this.onSelect();\n        },\n        onMouseMove(event: MouseEvent) {\n            const endPoint = l2g(getMouse(event));\n            const layer = this.getLayer();\n            if (layer === undefined) {\n                console.log(\"No active layer!\");\n                return;\n            }\n\n            if (this.brushHelper !== null) {\n                this.brushHelper.r = this.helperSize;\n                this.brushHelper.refPoint = endPoint;\n                if (!this.active) layer.invalidate(false);\n            }\n\n            if (!this.active || this.startPoint === null || this.shape === null) return;\n\n            if (this.shapeSelect === \"square\") {\n                (<Rect>this.shape).w = Math.abs(endPoint.x - this.startPoint.x);\n                (<Rect>this.shape).h = Math.abs(endPoint.y - this.startPoint.y);\n                this.shape.refPoint.x = Math.min(this.startPoint.x, endPoint.x);\n                this.shape.refPoint.y = Math.min(this.startPoint.y, endPoint.y);\n            } else if (this.shapeSelect === \"circle\") {\n                (<Circle>this.shape).r = endPoint.subtract(this.startPoint).length();\n            } else if (this.shapeSelect === \"paint-brush\") {\n                (<MultiLine>this.shape).points.push(endPoint);\n            }\n            socket.emit(\"Shape.Update\", { shape: this.shape!.asDict(), redraw: true, temporary: false });\n            if (this.shape.visionObstruction) store.recalculateBV();\n            layer.invalidate(false);\n        },\n        onMouseUp(event: MouseEvent) {\n            if (this.active && this.shape !== null && !event.altKey && this.useGrid) {\n                this.shape.resizeToGrid();\n                socket.emit(\"Shape.Update\", { shape: this.shape!.asDict(), redraw: true, temporary: false });\n            }\n            this.active = false;\n        },\n        onSelect() {\n            const layer = this.getLayer();\n            if (layer === undefined) return;\n            this.brushHelper = new Circle(new GlobalPoint(-1000, -1000), this.brushSize / 2, this.fillColour);\n            this.setupBrush();\n            layer.addShape(this.brushHelper, false); // during mode change the shape is already added\n        },\n        onDeselect() {\n            const layer = this.getLayer();\n            if (this.brushHelper !== null && layer !== undefined) layer.removeShape(this.brushHelper, false);\n        },\n    },\n});\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./draw.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./draw.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./draw.vue?vue&type=template&id=04c29104&scoped=true&\"\nimport script from \"./draw.vue?vue&type=script&lang=ts&\"\nexport * from \"./draw.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./draw.vue?vue&type=style&index=0&id=04c29104&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"04c29104\",\n  null\n  \n)\n\ncomponent.options.__file = \"draw.vue\"\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.selected)?_c('div',{staticClass:\"tool-detail\",style:({'--detailRight': _vm.detailRight, '--detailArrow': _vm.detailArrow})},[_c('div',[_vm._v(\"#X\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.xCount),expression:\"xCount\"}],attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.xCount)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.xCount=$event.target.value}}}),_c('div',[_vm._v(\"#Y\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.yCount),expression:\"yCount\"}],attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.yCount)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.yCount=$event.target.value}}})]):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { mapState } from \"vuex\";\n\nimport layerManager from \"@/game/layers/manager\";\nimport BaseRect from \"@/game/shapes/baserect\";\nimport Rect from \"@/game/shapes/rect\";\nimport Tool from \"@/game/ui/tools/tool.vue\";\n\nimport { GlobalPoint } from \"@/game/geom\";\nimport { l2g } from \"@/game/units\";\nimport { getMouse } from \"@/game/utils\";\n\nexport default Tool.extend({\n    data: () => ({\n        name: \"Map\",\n        active: false,\n        xCount: 3,\n        yCount: 3,\n        startPoint: <GlobalPoint | null>null,\n        rect: <Rect | null>null,\n    }),\n    computed: {\n        ...mapState(\"game\", [\"gridSize\"]),\n    },\n    methods: {\n        onMouseDown(event: MouseEvent) {\n            const layer = layerManager.getLayer();\n            if (layer === undefined) {\n                console.log(\"No active layer!\");\n                return;\n            }\n            this.active = true;\n\n            this.startPoint = l2g(getMouse(event));\n            this.rect = new Rect(this.startPoint.clone(), 0, 0, \"rgba(0,0,0,0)\", \"black\");\n            layer.addShape(this.rect, false, false);\n        },\n        onMouseMove(event: MouseEvent) {\n            if (!this.active || this.rect === null || this.startPoint === null) return;\n            const layer = layerManager.getLayer();\n            if (layer === undefined) {\n                console.log(\"No active layer!\");\n                return;\n            }\n\n            const endPoint = l2g(getMouse(event));\n\n            this.rect.w = Math.abs(endPoint.x - this.startPoint.x);\n            this.rect.h = Math.abs(endPoint.y - this.startPoint.y);\n            this.rect.refPoint.x = Math.min(this.startPoint.x, endPoint.x);\n            this.rect.refPoint.y = Math.min(this.startPoint.y, endPoint.y);\n            layer.invalidate(false);\n        },\n        onMouseUp(event: MouseEvent) {\n            if (!this.active || this.rect === null) return;\n            const layer = layerManager.getLayer();\n            if (layer === undefined) {\n                console.log(\"No active layer!\");\n                return;\n            }\n            this.active = false;\n\n            if (layer.selection.length !== 1) {\n                layer.removeShape(this.rect, false, false);\n                return;\n            }\n\n            const w = this.rect.w;\n            const h = this.rect.h;\n            const sel = layer.selection[0];\n\n            if (sel instanceof BaseRect) {\n                sel.w *= (this.xCount * this.gridSize) / w;\n                sel.h *= (this.yCount * this.gridSize) / h;\n            }\n\n            layer.removeShape(this.rect, false, false);\n        },\n    },\n});\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./map.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./map.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./map.vue?vue&type=template&id=46457c2f&\"\nimport script from \"./map.vue?vue&type=script&lang=ts&\"\nexport * from \"./map.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"map.vue\"\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c(\"div\")}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\nimport { mapState } from \"vuex\";\n\nimport layerManager from \"@/game/layers/manager\";\nimport store from \"@/game/store\";\nimport Tool from \"@/game/ui/tools/tool.vue\";\n\nimport { sendClientOptions } from \"@/game/api/utils\";\nimport { LocalPoint } from \"@/game/geom\";\nimport { getMouse } from \"@/game/utils\";\n\nexport default Tool.extend({\n    data: () => ({\n        name: \"Pan\",\n        panStart: new LocalPoint(0, 0),\n        active: false,\n    }),\n    computed: {\n        ...mapState(\"game\", [\"zoomFactor\", \"panX\", \"panY\"]),\n    },\n    methods: {\n        onMouseDown(event: MouseEvent) {\n            this.panStart = getMouse(event);\n            this.active = true;\n        },\n        onMouseMove(event: MouseEvent) {\n            if (!this.active) return;\n            const mouse = getMouse(event);\n            const distance = mouse.subtract(this.panStart).multiply(1 / this.zoomFactor);\n            store.increasePanX(Math.round(distance.x));\n            store.increasePanY(Math.round(distance.y));\n            this.panStart = mouse;\n            layerManager.invalidate();\n        },\n        onMouseUp(event: MouseEvent) {\n            this.active = false;\n            sendClientOptions();\n        },\n    },\n});\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./pan.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./pan.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./pan.vue?vue&type=template&id=f2a859bc&\"\nimport script from \"./pan.vue?vue&type=script&lang=ts&\"\nexport * from \"./pan.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"pan.vue\"\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c(\"div\")}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\nimport { mapState } from \"vuex\";\n\nimport socket from \"@/game/api/socket\";\nimport layerManager from \"@/game/layers/manager\";\nimport Line from \"@/game/shapes/line\";\nimport Text from \"@/game/shapes/text\";\nimport Tool from \"@/game/ui/tools/tool.vue\";\n\nimport { GlobalPoint } from \"@/game/geom\";\nimport { l2g } from \"@/game/units\";\nimport { getMouse } from \"@/game/utils\";\n\nexport default Tool.extend({\n    data: () => ({\n        name: \"Ruler\",\n        active: false,\n        startPoint: <GlobalPoint | null>null,\n        ruler: <Line | null>null,\n        text: <Text | null>null,\n    }),\n    computed: {\n        ...mapState(\"game\", [\"username\", \"gridSize\", \"unitSize\"]),\n    },\n    methods: {\n        onMouseDown(event: MouseEvent) {\n            const layer = layerManager.getLayer(\"draw\");\n            if (layer === undefined) {\n                console.log(\"No draw layer!\");\n                return;\n            }\n            this.active = true;\n            this.startPoint = l2g(getMouse(event));\n            this.ruler = new Line(this.startPoint, this.startPoint, 3, this.$store.state.game.rulerColour);\n            this.text = new Text(this.startPoint.clone(), \"\", \"bold 20px serif\");\n            this.ruler.owners.push(this.username);\n            this.text.owners.push(this.username);\n            layer.addShape(this.ruler, true, true);\n            layer.addShape(this.text, true, true);\n        },\n        onMouseMove(event: MouseEvent) {\n            if (!this.active || this.ruler === null || this.startPoint === null || this.text === null) return;\n\n            const layer = layerManager.getLayer(\"draw\");\n            if (layer === undefined) {\n                console.log(\"No draw layer!\");\n                return;\n            }\n            const endPoint = l2g(getMouse(event));\n\n            this.ruler.endPoint = endPoint;\n            socket.emit(\"Shape.Update\", { shape: this.ruler!.asDict(), redraw: true, temporary: true });\n\n            const diffsign = Math.sign(endPoint.x - this.startPoint.x) * Math.sign(endPoint.y - this.startPoint.y);\n            const xdiff = Math.abs(endPoint.x - this.startPoint.x);\n            const ydiff = Math.abs(endPoint.y - this.startPoint.y);\n            const label = Math.round((Math.sqrt(xdiff ** 2 + ydiff ** 2) * this.unitSize) / this.gridSize) + \" ft\";\n            const angle = Math.atan2(diffsign * ydiff, xdiff);\n            const xmid = Math.min(this.startPoint.x, endPoint.x) + xdiff / 2;\n            const ymid = Math.min(this.startPoint.y, endPoint.y) + ydiff / 2;\n            this.text.refPoint.x = xmid;\n            this.text.refPoint.y = ymid;\n            this.text.text = label;\n            this.text.angle = angle;\n            socket.emit(\"Shape.Update\", { shape: this.text.asDict(), redraw: true, temporary: true });\n            layer.invalidate(true);\n        },\n        onMouseUp(event: MouseEvent) {\n            if (!this.active || this.ruler === null || this.startPoint === null || this.text === null) return;\n\n            const layer = layerManager.getLayer(\"draw\");\n            if (layer === undefined) {\n                console.log(\"No active layer!\");\n                return;\n            }\n            this.active = false;\n\n            layer.removeShape(this.ruler, true, true);\n            layer.removeShape(this.text, true, true);\n            layer.invalidate(true);\n            this.ruler = this.startPoint = this.text = null;\n        },\n    },\n});\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ruler.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ruler.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./ruler.vue?vue&type=template&id=db85240c&\"\nimport script from \"./ruler.vue?vue&type=script&lang=ts&\"\nexport * from \"./ruler.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"ruler.vue\"\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ContextMenu',{ref:\"selectcontext\"})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('contextmenu',{attrs:{\"visible\":_vm.visible,\"left\":_vm.x + 'px',\"top\":_vm.y + 'px'},on:{\"close\":_vm.close}},[(_vm.IS_DM)?_c('li',{on:{\"click\":_vm.bringPlayers}},[_vm._v(\"Bring players\")]):_vm._e(),_c('li',{on:{\"click\":_vm.createToken}},[_vm._v(\"Create basic token\")]),_c('li',{on:{\"click\":_vm.showInitiative}},[_vm._v(\"Show initiative\")])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\n\nimport { mapState } from \"vuex\";\n\nimport contextmenu from \"@/core/components/contextmenu.vue\";\nimport socket from \"@/game/api/socket\";\n\nimport { l2gx, l2gy } from \"@/game/units\";\n\nexport default Vue.component(\"select-context\", {\n    components: {\n        contextmenu,\n    },\n    data: () => ({\n        visible: false,\n        x: 0,\n        y: 0,\n    }),\n    computed: {\n        ...mapState(\"game\", [\"IS_DM\"]),\n    },\n    methods: {\n        open(event: MouseEvent) {\n            this.visible = true;\n            this.x = event.pageX;\n            this.y = event.pageY;\n            this.$nextTick(() => this.$children[0].$el.focus());\n        },\n        close() {\n            this.visible = false;\n        },\n        bringPlayers() {\n            if (!this.IS_DM) return;\n            socket.emit(\"Players.Bring\", { x: l2gx(this.x), y: l2gy(this.y) });\n            this.close();\n        },\n        createToken() {\n            (<any>this.$parent.$parent.$refs.createtokendialog).open(this.x, this.y);\n            this.close();\n        },\n        showInitiative() {\n            (<any>this.$root.$refs.initiative).visible = true;\n            this.close();\n        },\n    },\n});\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./selectcontext.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./selectcontext.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./selectcontext.vue?vue&type=template&id=9e129ee8&scoped=true&\"\nimport script from \"./selectcontext.vue?vue&type=script&lang=ts&\"\nexport * from \"./selectcontext.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./selectcontext.vue?vue&type=style&index=0&id=9e129ee8&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"9e129ee8\",\n  null\n  \n)\n\ncomponent.options.__file = \"selectcontext.vue\"\nexport default component.exports","\n\n\n\n\nimport Vue from \"vue\";\n\nimport socket from \"@/game/api/socket\";\nimport game from \"@/game/game.vue\";\nimport layerManager from \"@/game/layers/manager\";\nimport Rect from \"@/game/shapes/rect\";\nimport store from \"@/game/store\";\nimport ContextMenu from \"@/game/ui/tools/selectcontext.vue\";\nimport Tool from \"@/game/ui/tools/tool.vue\";\n\nimport { GlobalPoint, LocalPoint, Ray, Vector } from \"@/game/geom\";\nimport { calculateDelta } from \"@/game/ui/tools/utils\";\nimport { g2l, g2lx, g2ly, l2g } from \"@/game/units\";\nimport { getMouse } from \"@/game/utils\";\n\nexport enum SelectOperations {\n    Noop,\n    Resize,\n    Drag,\n    GroupSelect,\n}\n\nexport default Tool.extend({\n    components: {\n        ContextMenu,\n    },\n    // data() {\n    data() {\n        const start = new GlobalPoint(-1000, -1000);\n        return {\n            name: \"Select\",\n            showContextMenu: false,\n\n            mode: SelectOperations.Noop,\n            resizeDirection: \"\",\n            deltaChanged: false,\n            // Because we never drag from the asset's (0, 0) coord and want a smoother drag experience\n            // we keep track of the actual offset within the asset.\n            dragRay: new Ray<LocalPoint>(new LocalPoint(0, 0), new Vector(0, 0)),\n            selectionStartPoint: start,\n            selectionHelper: new Rect(start, 0, 0),\n        };\n    },\n    computed: {\n        username(): string {\n            return this.$store.state.game.username;\n        },\n        zoomFactor(): number {\n            return this.$store.state.game.zoomFactor;\n        },\n        IS_DM(): boolean {\n            return this.$store.state.game.IS_DM;\n        },\n        useGrid(): boolean {\n            return this.$store.state.game.useGrid;\n        },\n    },\n    created() {\n        this.selectionHelper.globalCompositeOperation = \"source-over\";\n    },\n    methods: {\n        onMouseDown(event: MouseEvent) {\n            const layer = layerManager.getLayer();\n            if (layer === undefined) {\n                console.log(\"No active layer!\");\n                return;\n            }\n\n            if (!this.selectionHelper.owners.includes(this.username)) {\n                this.selectionHelper.owners.push(this.username);\n            }\n\n            const mouse = getMouse(event);\n            const globalMouse = l2g(mouse);\n\n            let hit = false;\n            // The selectionStack allows for lower positioned objects that are selected to have precedence during overlap.\n            let selectionStack;\n            if (!layer.selection.length) selectionStack = layer.shapes;\n            else selectionStack = layer.shapes.concat(layer.selection);\n            for (let i = selectionStack.length - 1; i >= 0; i--) {\n                const shape = selectionStack[i];\n\n                if (!shape.ownedBy()) continue;\n\n                const corner = shape.getBoundingBox().getCorner(globalMouse);\n\n                // Resize case, a corner is selected\n                if (corner !== undefined) {\n                    layer.selection = [shape];\n                    (<any>game).$refs.selectionInfo.shape = shape;\n                    this.mode = SelectOperations.Resize;\n                    this.resizeDirection = corner;\n                    layer.invalidate(true);\n                    hit = true;\n                    break;\n\n                    // Drag case, a shape is selected\n                } else if (shape.contains(globalMouse)) {\n                    const selection = shape;\n                    if (layer.selection.indexOf(selection) === -1) {\n                        layer.selection = [selection];\n                        (<any>game).$refs.selectionInfo.shape = selection;\n                    }\n                    this.mode = SelectOperations.Drag;\n                    const localRefPoint = g2l(selection.refPoint);\n                    this.dragRay = new Ray<LocalPoint>(localRefPoint, mouse.subtract(localRefPoint));\n                    layer.invalidate(true);\n                    hit = true;\n                    break;\n                }\n            }\n\n            // GroupSelect case, draw a selection box to select multiple shapes\n            if (!hit) {\n                this.mode = SelectOperations.GroupSelect;\n                for (const selection of layer.selection) (<any>game).$refs.selectionInfo.shape = selection;\n\n                this.selectionStartPoint = globalMouse;\n\n                this.selectionHelper.refPoint = this.selectionStartPoint;\n                this.selectionHelper.w = 0;\n                this.selectionHelper.h = 0;\n\n                layer.selection = [this.selectionHelper];\n                layer.invalidate(true);\n            }\n        },\n        onMouseMove(event: MouseEvent) {\n            const layer = layerManager.getLayer();\n            if (layer === undefined) {\n                console.log(\"No active layer!\");\n                return;\n            }\n            const mouse = getMouse(event);\n            const globalMouse = l2g(mouse);\n            this.deltaChanged = false;\n\n            if (this.mode === SelectOperations.GroupSelect) {\n                // Currently draw on active layer\n                const endPoint = globalMouse;\n\n                this.selectionHelper.w = Math.abs(endPoint.x - this.selectionStartPoint.x);\n                this.selectionHelper.h = Math.abs(endPoint.y - this.selectionStartPoint.y);\n                this.selectionHelper.refPoint = new GlobalPoint(\n                    Math.min(this.selectionStartPoint.x, endPoint.x),\n                    Math.min(this.selectionStartPoint.y, endPoint.y),\n                );\n                layer.invalidate(true);\n            } else if (layer.selection.length) {\n                const og = g2l(layer.selection[layer.selection.length - 1].refPoint);\n                const origin = og.add(this.dragRay.direction);\n                let delta = mouse.subtract(origin).multiply(1 / this.zoomFactor);\n                const ogDelta = delta;\n                if (this.mode === SelectOperations.Drag) {\n                    // If we are on the tokens layer do a movement block check.\n                    if (layer.name === \"tokens\" && !(event.shiftKey && this.IS_DM)) {\n                        for (const sel of layer.selection) {\n                            if (sel.uuid === this.selectionHelper.uuid) continue; // the selection helper should not be treated as a real shape.\n                            delta = calculateDelta(delta, sel);\n                            if (delta !== ogDelta) this.deltaChanged = true;\n                        }\n                    }\n                    // Actually apply the delta on all shapes\n                    for (const sel of layer.selection) {\n                        sel.refPoint = sel.refPoint.add(delta);\n                        if (sel !== this.selectionHelper) {\n                            if (sel.visionObstruction) store.recalculateBV();\n                            socket.emit(\"Shape.Update\", { shape: sel.asDict(), redraw: true, temporary: true });\n                        }\n                    }\n                    layer.invalidate(false);\n                } else if (this.mode === SelectOperations.Resize) {\n                    for (const sel of layer.selection) {\n                        sel.resize(this.resizeDirection, mouse);\n                        if (sel !== this.selectionHelper) {\n                            if (sel.visionObstruction) store.recalculateBV();\n                            socket.emit(\"Shape.Update\", { shape: sel.asDict(), redraw: true, temporary: true });\n                        }\n                        layer.invalidate(false);\n                    }\n                } else {\n                    for (const sel of layer.selection) {\n                        const bb = sel.getBoundingBox();\n                        const gm = globalMouse;\n                        if (bb.inCorner(gm, \"nw\")) {\n                            document.body.style.cursor = \"nw-resize\";\n                        } else if (bb.inCorner(gm, \"ne\")) {\n                            document.body.style.cursor = \"ne-resize\";\n                        } else if (bb.inCorner(gm, \"se\")) {\n                            document.body.style.cursor = \"se-resize\";\n                        } else if (bb.inCorner(gm, \"sw\")) {\n                            document.body.style.cursor = \"sw-resize\";\n                        } else {\n                            document.body.style.cursor = \"default\";\n                        }\n                    }\n                }\n            } else {\n                document.body.style.cursor = \"default\";\n            }\n        },\n        onMouseUp(e: MouseEvent): void {\n            if (layerManager.getLayer() === undefined) {\n                console.log(\"No active layer!\");\n                return;\n            }\n            const layer = layerManager.getLayer()!;\n\n            if (this.mode === SelectOperations.GroupSelect) {\n                layer.clearSelection();\n                layer.shapes.forEach(shape => {\n                    if (shape === this.selectionHelper) return;\n                    const bbox = shape.getBoundingBox();\n                    if (!shape.ownedBy()) return;\n                    if (\n                        this.selectionHelper!.refPoint.x <= bbox.topRight.x &&\n                        this.selectionHelper!.refPoint.x + this.selectionHelper!.w >= bbox.topLeft.x &&\n                        this.selectionHelper!.refPoint.y <= bbox.botLeft.y &&\n                        this.selectionHelper!.refPoint.y + this.selectionHelper!.h >= bbox.topLeft.y\n                    ) {\n                        layer.selection.push(shape);\n                    }\n                });\n\n                // Push the selection helper as the last element of the selection\n                // This makes sure that it will be the first one to be hit in the hit detection onMouseDown\n                if (layer.selection.length > 0) layer.selection.push(this.selectionHelper);\n\n                layer.invalidate(true);\n            } else if (layer.selection.length) {\n                layer.selection.forEach(sel => {\n                    if (this.mode === SelectOperations.Drag) {\n                        if (\n                            this.dragRay.origin!.x === g2lx(sel.refPoint.x) &&\n                            this.dragRay.origin!.y === g2ly(sel.refPoint.y)\n                        )\n                            return;\n\n                        if (this.useGrid && !e.altKey && !this.deltaChanged) {\n                            sel.snapToGrid();\n                        }\n\n                        if (sel !== this.selectionHelper) {\n                            if (sel.visionObstruction) store.recalculateBV();\n                            socket.emit(\"Shape.Update\", { shape: sel.asDict(), redraw: true, temporary: false });\n                        }\n                        layer.invalidate(false);\n                    }\n                    if (this.mode === SelectOperations.Resize) {\n                        if (this.useGrid && !e.altKey) {\n                            sel.resizeToGrid();\n                        }\n                        if (sel !== this.selectionHelper) {\n                            if (sel.visionObstruction) store.recalculateBV();\n                            socket.emit(\"Shape.Update\", { shape: sel.asDict(), redraw: true, temporary: false });\n                        }\n                        layer.invalidate(false);\n                    }\n                });\n            }\n            this.mode = SelectOperations.Noop;\n        },\n        onContextMenu(event: MouseEvent) {\n            if (layerManager.getLayer() === undefined) {\n                console.log(\"No active layer!\");\n                return;\n            }\n            const layer = layerManager.getLayer()!;\n            const mouse = getMouse(event);\n            const globalMouse = l2g(mouse);\n\n            for (const shape of layer.selection) {\n                if (shape.contains(globalMouse)) {\n                    layer.selection = [shape];\n                    (<any>game).$refs.selectionInfo.shape = shape;\n                    layer.invalidate(true);\n                    (<any>this.$parent.$refs.shapecontext).open(event, shape);\n                    return;\n                }\n            }\n            (<any>this.$refs.selectcontext).open(event);\n        },\n    },\n});\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./select.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./select.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./select.vue?vue&type=template&id=e4054410&\"\nimport script from \"./select.vue?vue&type=script&lang=ts&\"\nexport * from \"./select.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"select.vue\"\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\n\nimport layerManager from \"@/game/layers/manager\";\nimport gameManager from \"@/game/manager\";\nimport store from \"@/game/store\";\nimport shape_menu from \"@/game/ui/selection/shapecontext.vue\";\nimport createtoken_modal from \"@/game/ui/tools/createtoken_modal.vue\";\nimport DrawTool from \"@/game/ui/tools/draw.vue\";\nimport MapTool from \"@/game/ui/tools/map.vue\";\nimport PanTool from \"@/game/ui/tools/pan.vue\";\nimport RulerTool from \"@/game/ui/tools/ruler.vue\";\nimport SelectTool from \"@/game/ui/tools/select.vue\";\n\nimport { l2g } from \"@/game/units\";\nimport { getMouse } from \"@/game/utils\";\n\nexport default Vue.component(\"tools\", {\n    components: {\n        \"select-tool\": SelectTool,\n        \"pan-tool\": PanTool,\n        \"draw-tool\": DrawTool,\n        \"ruler-tool\": RulerTool,\n        \"map-tool\": MapTool,\n        \"shape-menu\": shape_menu,\n        \"createtoken-dialog\": createtoken_modal,\n    },\n    data: () => ({\n        currentTool: \"Select\",\n        tools: [\"Select\", \"Pan\", \"Draw\", \"Ruler\", \"Map\"],\n        dmTools: [\"Map\"],\n    }),\n    watch: {\n        currentTool(newValue, oldValue) {\n            this.$emit(\"tools-select-change\", newValue, oldValue);\n        },\n    },\n    computed: {\n        IS_DM(): boolean {\n            return this.$store.state.game.IS_DM;\n        },\n        currentToolComponent(): string {\n            return `${this.currentTool.toLowerCase()}-tool`;\n        },\n    },\n    methods: {\n        mousedown(event: MouseEvent) {\n            if ((<HTMLElement>event.target).tagName !== \"CANVAS\") return;\n\n            let targetTool = this.currentTool;\n            if (event.button === 1) {\n                targetTool = \"Pan\";\n            } else if (event.button !== 0) {\n                return;\n            }\n\n            this.$emit(\"mousedown\", event, targetTool);\n        },\n        mouseup(event: MouseEvent) {\n            if ((<HTMLElement>event.target).tagName !== \"CANVAS\") return;\n\n            let targetTool = this.currentTool;\n            if (event.button === 1) {\n                targetTool = \"Pan\";\n            } else if (event.button !== 0) {\n                return;\n            }\n\n            this.$emit(\"mouseup\", event, targetTool);\n        },\n        mousemove(event: MouseEvent) {\n            if ((<HTMLElement>event.target).tagName !== \"CANVAS\") return;\n\n            let targetTool = this.currentTool;\n            if ((event.buttons & 4) !== 0) {\n                targetTool = \"Pan\";\n            } else if ((event.button & 1) > 1) {\n                return;\n            }\n\n            this.$emit(\"mousemove\", event, targetTool);\n\n            // Annotation hover\n            let found = false;\n            for (const uuid of store.annotations) {\n                if (layerManager.UUIDMap.has(uuid) && layerManager.hasLayer(\"draw\")) {\n                    const shape = layerManager.UUIDMap.get(uuid)!;\n                    if (shape.contains(l2g(getMouse(event)))) {\n                        found = true;\n                        gameManager.annotationManager.setActiveText(shape.annotation);\n                    }\n                }\n            }\n            if (!found && gameManager.annotationManager.shown) {\n                gameManager.annotationManager.setActiveText(\"\");\n            }\n        },\n        mouseleave(event: MouseEvent) {\n            // When leaving the window while a mouse is pressed down, act as if it was released\n            if ((event.buttons & 1) !== 0) {\n                this.$emit(\"mouseup\", event, this.currentTool);\n            }\n        },\n        contextmenu(event: MouseEvent) {\n            if ((<HTMLElement>event.target).tagName !== \"CANVAS\") return;\n            if (event.button !== 2 || (<HTMLElement>event.target).tagName !== \"CANVAS\") return;\n            this.$emit(\"contextmenu\", event, this.currentTool);\n        },\n    },\n});\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tools.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tools.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./tools.vue?vue&type=template&id=69cbb9be&scoped=true&\"\nimport script from \"./tools.vue?vue&type=script&lang=ts&\"\nexport * from \"./tools.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./tools.vue?vue&type=style&index=0&id=69cbb9be&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"69cbb9be\",\n  null\n  \n)\n\ncomponent.options.__file = \"tools.vue\"\nexport default component.exports","class Settings {\n    static angleSteps = 4;\n    static drawAngleLines = false;\n    static drawFirstLightHit = false;\n    static skipPlayerFOW = false;\n    static skipLightFOW = false;\n\n    static tempFill: string = \"fog\";\n}\n\nexport default Settings;\n","import socket from \"@/game/api/socket\";\nimport layerManager from \"@/game/layers/manager\";\nimport Shape from \"@/game/shapes/shape\";\nimport store from \"@/game/store\";\n\nimport { getRef } from \"@/core/utils\";\nimport { ServerShape } from \"@/game/comm/types/shapes\";\nimport { createShapeFromDict } from \"@/game/shapes/utils\";\nimport { g2lx, g2ly } from \"@/game/units\";\n\nexport class Layer {\n    name: string;\n    width: number;\n    height: number;\n    canvas: HTMLCanvasElement;\n    ctx: CanvasRenderingContext2D;\n\n    selectable: boolean = false;\n    playerEditable: boolean = false;\n    isVisionLayer: boolean = false;\n\n    // When set to false, the layer will be redrawn on the next tick\n    valid: boolean = false;\n    // The collection of shapes that this layer contains.\n    // These are ordered on a depth basis.\n    shapes: Shape[] = [];\n\n    // Collection of shapes that are currently selected\n    selection: Shape[] = [];\n\n    // Extra selection highlighting settings\n    selectionColor = \"#CC0000\";\n    selectionWidth = 2;\n\n    constructor(canvas: HTMLCanvasElement, name: string) {\n        this.canvas = canvas;\n        this.name = name;\n        this.width = canvas.width;\n        this.height = canvas.height;\n        this.ctx = canvas.getContext(\"2d\")!;\n    }\n\n    invalidate(skipLightUpdate: boolean): void {\n        this.valid = false;\n        if (!skipLightUpdate) {\n            layerManager.invalidateLight();\n        }\n    }\n\n    addShape(shape: Shape, sync: boolean, temporary?: boolean): void {\n        if (temporary === undefined) temporary = false;\n        shape.layer = this.name;\n        this.shapes.push(shape);\n        layerManager.UUIDMap.set(shape.uuid, shape);\n        shape.checkVisionSources();\n        shape.setMovementBlock(shape.movementObstruction);\n        if (shape.ownedBy(store.username) && shape.isToken) store.ownedtokens.push(shape.uuid);\n        if (shape.annotation.length) store.annotations.push(shape.uuid);\n        if (sync) socket.emit(\"Shape.Add\", { shape: shape.asDict(), temporary });\n        this.invalidate(!sync);\n    }\n\n    setShapes(shapes: ServerShape[]): void {\n        for (const serverShape of shapes) {\n            const shape = createShapeFromDict(serverShape);\n            if (shape === undefined) {\n                console.log(`Shape with unknown type ${serverShape.type_} could not be added`);\n                return;\n            }\n            this.addShape(shape, false, false);\n        }\n        this.clearSelection(); // TODO: Fix keeping selection on those items that are not moved.\n        this.invalidate(false);\n    }\n\n    removeShape(shape: Shape, sync: boolean, temporary?: boolean) {\n        if (temporary === undefined) temporary = false;\n        this.shapes.splice(this.shapes.indexOf(shape), 1);\n\n        if (sync) socket.emit(\"Shape.Remove\", { shape, temporary });\n        const lsI = store.visionSources.findIndex(ls => ls.shape === shape.uuid);\n        const lbI = store.visionBlockers.findIndex(ls => ls === shape.uuid);\n\n        const mbI = store.movementblockers.findIndex(ls => ls === shape.uuid);\n        const anI = store.annotations.findIndex(ls => ls === shape.uuid);\n        if (lsI >= 0) store.visionSources.splice(lsI, 1);\n        if (lbI >= 0) store.visionBlockers.splice(lbI, 1);\n        if (mbI >= 0) store.movementblockers.splice(mbI, 1);\n        if (anI >= 0) store.annotations.splice(anI, 1);\n\n        const annotationIndex = store.annotations.indexOf(shape.uuid);\n        if (annotationIndex >= 0) store.annotations.splice(annotationIndex, 1);\n\n        const ownedIndex = store.ownedtokens.indexOf(shape.uuid);\n        if (ownedIndex >= 0) store.ownedtokens.splice(ownedIndex, 1);\n\n        layerManager.UUIDMap.delete(shape.uuid);\n\n        const index = this.selection.indexOf(shape);\n        if (index >= 0) this.selection.splice(index, 1);\n        if (lbI >= 0) store.recalculateBV();\n        this.invalidate(!sync);\n    }\n\n    clear(): void {\n        this.ctx.clearRect(0, 0, this.width, this.height);\n    }\n\n    clearSelection(): void {\n        this.selection = [];\n        getRef(\"selectionInfo\").shape = null;\n    }\n\n    draw(doClear?: boolean): void {\n        if (!this.valid) {\n            const ctx = this.ctx;\n            const ogOP = ctx.globalCompositeOperation;\n            doClear = doClear === undefined ? true : doClear;\n\n            if (doClear) this.clear();\n\n            const state = this;\n\n            // We iteratre twice over all shapes\n            // First to draw the auras and a second time to draw the shapes themselves\n            // Otherwise auras from one shape could be overlapping another shape itself.\n\n            this.shapes.forEach(shape => {\n                if (shape.options.has(\"skipDraw\") && shape.options.get(\"skipDraw\")) return;\n                if (layerManager.getLayer() === undefined) return;\n                if (!shape.visibleInCanvas(state.canvas)) return;\n                if (state.name === \"fow\" && shape.visionObstruction && layerManager.getLayer()!.name !== state.name)\n                    return;\n                shape.drawAuras(ctx);\n            });\n            this.shapes.forEach(shape => {\n                if (shape.options.has(\"skipDraw\") && shape.options.get(\"skipDraw\")) return;\n                if (layerManager.getLayer() === undefined) return;\n                if (!shape.visibleInCanvas(state.canvas)) return;\n                if (state.name === \"fow\" && shape.visionObstruction && layerManager.getLayer()!.name !== state.name)\n                    return;\n                shape.draw(ctx);\n            });\n\n            if (this.selection != null) {\n                ctx.fillStyle = this.selectionColor;\n                ctx.strokeStyle = this.selectionColor;\n                ctx.lineWidth = this.selectionWidth;\n                const z = store.zoomFactor;\n                this.selection.forEach(sel => {\n                    ctx.globalCompositeOperation = sel.globalCompositeOperation;\n                    const bb = sel.getBoundingBox();\n                    // TODO: REFACTOR THIS TO Shape.drawSelection(ctx);\n                    ctx.strokeRect(g2lx(bb.topLeft.x), g2ly(bb.topLeft.y), bb.w * z, bb.h * z);\n\n                    const sw = Math.min(6, bb.w / 2);\n\n                    // topright\n                    ctx.fillRect(g2lx(bb.topRight.x - sw / 2), g2ly(bb.topLeft.y - sw / 2), sw * z, sw * z);\n                    // topleft\n                    ctx.fillRect(g2lx(bb.topLeft.x - sw / 2), g2ly(bb.topLeft.y - sw / 2), sw * z, sw * z);\n                    // botright\n                    ctx.fillRect(g2lx(bb.topRight.x - sw / 2), g2ly(bb.botLeft.y - sw / 2), sw * z, sw * z);\n                    // botleft\n                    ctx.fillRect(g2lx(bb.topLeft.x - sw / 2), g2ly(bb.botLeft.y - sw / 2), sw * z, sw * z);\n                });\n            }\n            ctx.globalCompositeOperation = ogOP;\n            this.valid = true;\n        }\n    }\n\n    moveShapeOrder(shape: Shape, destinationIndex: number, sync: boolean): void {\n        const oldIdx = this.shapes.indexOf(shape);\n        if (oldIdx === destinationIndex) return;\n        this.shapes.splice(oldIdx, 1);\n        this.shapes.splice(destinationIndex, 0, shape);\n        if (sync) socket.emit(\"Shape.Order.Set\", { shape: shape.asDict(), index: destinationIndex });\n        this.invalidate(true);\n    }\n\n    onShapeMove(shape: Shape): void {\n        shape.checkVisionSources();\n        if (shape.visionObstruction) store.recalculateBV();\n        this.invalidate(false);\n    }\n}\n","import layerManager from \"@/game/layers/manager\";\nimport Settings from \"@/game/settings\";\nimport Circle from \"@/game/shapes/circle\";\nimport Shape from \"@/game/shapes/shape\";\nimport store from \"@/game/store\";\n\nimport { GlobalPoint, Ray } from \"@/game/geom\";\nimport { Layer } from \"@/game/layers/layer\";\nimport { g2l, g2lr, g2lx, g2ly, g2lz, getUnitDistance } from \"@/game/units\";\nimport { getFogColour } from \"@/game/utils\";\n\nexport class FOWLayer extends Layer {\n    isVisionLayer: boolean = true;\n    preFogShapes: Shape[] = [];\n\n    addShape(shape: Shape, sync: boolean, temporary?: boolean): void {\n        super.addShape(shape, sync, temporary);\n        if (shape.options.has(\"preFogShape\") && shape.options.get(\"preFogShape\")) {\n            this.preFogShapes.push(shape);\n        }\n    }\n\n    removeShape(shape: Shape, sync: boolean, temporary?: boolean) {\n        if (shape.options.has(\"preFogShape\") && shape.options.get(\"preFogShape\")) {\n            const idx = this.preFogShapes.findIndex(s => s.uuid === shape.uuid);\n            this.preFogShapes.splice(idx, 1);\n        }\n        super.removeShape(shape, sync, temporary);\n    }\n\n    draw(): void {\n        if (!this.valid) {\n            const ctx = this.ctx;\n\n            if (Settings.skipLightFOW) {\n                ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n                this.valid = true;\n                return;\n            }\n\n            const originalOperation = ctx.globalCompositeOperation;\n            ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n\n            ctx.fillStyle = \"rgba(0, 0, 0, 1)\";\n\n            const dctx = layerManager.getLayer(\"draw\")!.ctx;\n            if (Settings.drawAngleLines || Settings.drawFirstLightHit) {\n                dctx.clearRect(0, 0, dctx.canvas.width, dctx.canvas.height);\n            }\n\n            // At all times provide a minimal vision range to prevent losing your tokens in fog.\n            if (store.fullFOW && layerManager.hasLayer(\"tokens\")) {\n                layerManager.getLayer(\"tokens\")!.shapes.forEach(sh => {\n                    if (!sh.ownedBy() || !sh.isToken) return;\n                    const bb = sh.getBoundingBox();\n                    const lcenter = g2l(sh.center());\n                    const alm = 0.8 * g2lz(bb.w);\n                    ctx.beginPath();\n                    ctx.arc(lcenter.x, lcenter.y, alm, 0, 2 * Math.PI);\n                    const gradient = ctx.createRadialGradient(lcenter.x, lcenter.y, alm / 2, lcenter.x, lcenter.y, alm);\n                    gradient.addColorStop(0, \"rgba(0, 0, 0, 1)\");\n                    gradient.addColorStop(1, \"rgba(0, 0, 0, 0)\");\n                    ctx.fillStyle = gradient;\n                    ctx.fill();\n                });\n            }\n\n            // First cut out all the light sources\n            for (const light of store.visionSources) {\n                const shape = layerManager.UUIDMap.get(light.shape);\n                if (shape === undefined) continue;\n                const aura = shape.auras.find(a => a.uuid === light.aura);\n                if (aura === undefined) continue;\n\n                const auraLength = getUnitDistance(aura.value + aura.dim);\n                const center = shape.center();\n                const lcenter = g2l(center);\n\n                const auraCircle = new Circle(center, auraLength);\n                if (!auraCircle.visibleInCanvas(ctx.canvas)) continue;\n\n                let lastArcAngle = -1;\n\n                const path = new Path2D();\n                path.moveTo(lcenter.x, lcenter.y);\n                let firstPoint: GlobalPoint;\n\n                for (let angle = 0; angle < 2 * Math.PI; angle += (Settings.angleSteps / 180) * Math.PI) {\n                    const anglePoint = new GlobalPoint(\n                        center.x + auraLength * Math.cos(angle),\n                        center.y + auraLength * Math.sin(angle),\n                    );\n                    if (Settings.drawAngleLines) {\n                        dctx!.beginPath();\n                        dctx!.moveTo(g2lx(center.x), g2ly(center.y));\n                        dctx!.lineTo(g2lx(anglePoint.x), g2ly(anglePoint.y));\n                        dctx!.stroke();\n                    }\n\n                    // Check if there is a hit with one of the nearby light blockers.\n                    const lightRay = Ray.fromPoints(center, anglePoint);\n                    const hitResult = store.BV.intersect(lightRay);\n\n                    if (angle === 0) firstPoint = hitResult.hit ? hitResult.intersect : anglePoint;\n\n                    // We can move on to the next angle if nothing was hit.\n                    if (!hitResult.hit) {\n                        // If an earlier hit caused the aura to leave the arc, we need to go back to the arc\n                        if (lastArcAngle === -1) {\n                            // Set the start of a new arc beginning at the current angle\n                            lastArcAngle = angle;\n                            // Draw a line from the last non arc location back to the arc\n                            const dest = g2l(anglePoint);\n                            ctx.lineTo(dest.x, dest.y);\n                        }\n                        continue;\n                    }\n                    // If hit , first finish any ongoing arc, then move to the intersection point\n                    if (lastArcAngle !== -1) {\n                        path.arc(lcenter.x, lcenter.y, g2lr(aura.value + aura.dim), lastArcAngle, angle);\n                        lastArcAngle = -1;\n                    }\n                    path.lineTo(g2lx(hitResult.intersect.x), g2ly(hitResult.intersect.y));\n                }\n\n                // Finish the final arc.\n                if (lastArcAngle === -1) path.lineTo(g2lx(firstPoint!.x), g2ly(firstPoint!.y));\n                else path.arc(lcenter.x, lcenter.y, g2lr(aura.value + aura.dim), lastArcAngle, 2 * Math.PI);\n\n                if (store.fullFOW) {\n                    if (aura.dim > 0) {\n                        // Fill the light aura with a radial dropoff towards the outside.\n                        const gradient = ctx.createRadialGradient(\n                            lcenter.x,\n                            lcenter.y,\n                            g2lr(aura.value),\n                            lcenter.x,\n                            lcenter.y,\n                            g2lr(aura.value + aura.dim),\n                        );\n                        gradient.addColorStop(0, \"rgba(0, 0, 0, 1)\");\n                        gradient.addColorStop(1, \"rgba(0, 0, 0, 0)\");\n                        ctx.fillStyle = gradient;\n                    } else {\n                        ctx.fillStyle = \"rgba(0, 0, 0, 1)\";\n                    }\n                    ctx.fill(path);\n                }\n\n                aura.lastPath = path;\n            }\n\n            // At the DM Side due to opacity of the two fow layers, it looks strange if we just render them on top of eachother like players.\n            if (store.fowLOS) {\n                ctx.globalCompositeOperation = \"source-in\";\n                ctx.drawImage(layerManager.getLayer(\"fow-players\")!.canvas, 0, 0);\n            }\n\n            for (const preShape of this.preFogShapes) {\n                if (!preShape.visibleInCanvas(this.canvas)) continue;\n                const ogComposite = preShape.globalCompositeOperation;\n                if (!store.fullFOW) {\n                    if (preShape.globalCompositeOperation === \"source-over\")\n                        preShape.globalCompositeOperation = \"destination-out\";\n                    else if (preShape.globalCompositeOperation === \"destination-out\")\n                        preShape.globalCompositeOperation = \"source-over\";\n                }\n                preShape.draw(ctx);\n                preShape.globalCompositeOperation = ogComposite;\n            }\n\n            if (store.fullFOW) {\n                ctx.globalCompositeOperation = \"source-out\";\n                ctx.fillStyle = getFogColour();\n                ctx.fillRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n            }\n\n            super.draw(false);\n\n            ctx.globalCompositeOperation = originalOperation;\n        }\n    }\n}\n","import layerManager from \"@/game/layers/manager\";\nimport Settings from \"@/game/settings\";\nimport store from \"@/game/store\";\n\nimport { Ray, Vector } from \"@/game/geom\";\nimport { Layer } from \"@/game/layers/layer\";\nimport { g2l, g2lx, g2ly } from \"@/game/units\";\n\nexport class FOWPlayersLayer extends Layer {\n    isVisionLayer: boolean = true;\n\n    draw(): void {\n        if (!this.valid) {\n            const ctx = this.ctx;\n\n            if (!store.fowLOS || Settings.skipPlayerFOW) {\n                ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n                this.valid = true;\n                return;\n            }\n\n            ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n\n            const originalOperation = ctx.globalCompositeOperation;\n\n            ctx.fillStyle = \"rgba(0, 0, 0, 1)\";\n\n            // For the DM this is done at the end of this function.  TODO: why the split up ???\n            // This was done in commit be1e65cff1e7369375fe11cfa1643fab1d11beab.\n            if (!store.IS_DM) super.draw(!store.fullFOW);\n\n            // Then cut out all the player vision auras\n            const maxLength = ctx.canvas.width + ctx.canvas.height;\n            for (const tokenId of store.ownedtokens) {\n                ctx.beginPath();\n                let lastArcAngle = -1;\n                const token = layerManager.UUIDMap.get(tokenId);\n                if (token === undefined) continue;\n                const center = token.center();\n                const lcenter = g2l(center);\n\n                for (let angle = 0; angle < 2 * Math.PI; angle += (Settings.angleSteps / 2 / 180) * Math.PI) {\n                    const cos = Math.cos(angle);\n                    const sin = Math.sin(angle);\n                    // Check if there is a hit with one of the nearby light blockers.\n                    const lightRay = new Ray(center, new Vector(cos, sin));\n                    const hitResult = store.BV.intersect(lightRay);\n\n                    // We can move on to the next angle if nothing was hit.\n                    if (!hitResult.hit) {\n                        // If an earlier hit caused the aura to leave the arc, we need to go back to the arc\n                        if (lastArcAngle === -1) {\n                            // Draw a line from the last non arc location back to the arc\n                            ctx.lineTo(lcenter.x + maxLength * cos, lcenter.y + maxLength * sin);\n                            // Set the start of a new arc beginning at the current angle\n                            lastArcAngle = angle;\n                        }\n                        continue;\n                    }\n                    // If hit , first finish any ongoing arc, then move to the intersection point\n                    if (lastArcAngle !== -1) {\n                        ctx.arc(lcenter.x, lcenter.y, maxLength, lastArcAngle, angle);\n                        lastArcAngle = -1;\n                    }\n                    ctx.lineTo(g2lx(hitResult.intersect.x), g2ly(hitResult.intersect.y));\n                }\n\n                // Finish the final arc.\n                if (lastArcAngle !== -1) ctx.arc(lcenter.x, lcenter.y, maxLength, lastArcAngle, 2 * Math.PI);\n                else ctx.closePath();\n                ctx.fill();\n            }\n\n            // For the players this is done at the beginning of this function.  TODO: why the split up ???\n            // This was done in commit be1e65cff1e7369375fe11cfa1643fab1d11beab.\n            if (store.IS_DM) super.draw(!store.fullFOW);\n\n            ctx.globalCompositeOperation = originalOperation;\n        }\n    }\n}\n","import store from \"@/game/store\";\n\nimport { Layer } from \"@/game/layers/layer\";\n\nexport class GridLayer extends Layer {\n    invalidate(): void {\n        this.valid = false;\n    }\n    draw(doClear?: boolean): void {\n        if (!this.valid) {\n            this.drawGrid();\n        }\n    }\n    drawGrid(): void {\n        const ctx = this.ctx;\n        this.clear();\n        ctx.beginPath();\n\n        const gs = store.gridSize;\n\n        for (let i = 0; i < this.width; i += gs * store.zoomFactor) {\n            ctx.moveTo(i + (store.panX % gs) * store.zoomFactor, 0);\n            ctx.lineTo(i + (store.panX % gs) * store.zoomFactor, this.height);\n            ctx.moveTo(0, i + (store.panY % gs) * store.zoomFactor);\n            ctx.lineTo(this.width, i + (store.panY % gs) * store.zoomFactor);\n        }\n\n        ctx.strokeStyle = store.gridColour;\n        ctx.lineWidth = 1;\n        ctx.stroke();\n        this.valid = true;\n    }\n}\n","import layerManager from \"@/game/layers/manager\";\n\nimport { ServerLayer } from \"@/game/comm/types/general\";\nimport { FOWLayer } from \"@/game/layers/fow\";\nimport { FOWPlayersLayer } from \"@/game/layers/fowplayers\";\nimport { GridLayer } from \"@/game/layers/grid\";\nimport { Layer } from \"@/game/layers/layer\";\n\nexport function createLayer(layerInfo: ServerLayer) {\n    // Create canvas element\n    const canvas = document.createElement(\"canvas\");\n    canvas.style.zIndex = layerManager.layers.length.toString();\n    canvas.width = window.innerWidth;\n    canvas.height = window.innerHeight;\n\n    // Create the Layer instance\n    let layer: Layer;\n    if (layerInfo.type_ === \"grid\") layer = new GridLayer(canvas, layerInfo.name);\n    else if (layerInfo.type_ === \"fow\") layer = new FOWLayer(canvas, layerInfo.name);\n    else if (layerInfo.type_ === \"fow-players\") layer = new FOWPlayersLayer(canvas, layerInfo.name);\n    else layer = new Layer(canvas, layerInfo.name);\n    layer.selectable = layerInfo.selectable;\n    layer.playerEditable = layerInfo.player_editable;\n    layerManager.addLayer(layer);\n\n    // Add the element to the DOM\n    const layers = document.getElementById(\"layers\");\n    if (layers === null) {\n        console.warn(\"Layers div is missing, this will prevent the main game board from loading!\");\n        return;\n    }\n    if (layerInfo.name !== \"fow-players\") layers.appendChild(canvas);\n\n    // if (layerInfo.type_ === 'grid' && layerInfo.size) store.commit(\"setGridSize\", { gridSize: layerInfo.size, sync: false });\n    // Load layer shapes\n    layer.setShapes(layerInfo.shapes);\n}\n","import socket from \"@/game/api/socket\";\nimport layerManager from \"@/game/layers/manager\";\nimport gameManager from \"@/game/manager\";\nimport store from \"@/game/store\";\n\nimport { AssetList } from \"@/core/comm/types\";\nimport { getRef } from \"@/core/utils\";\nimport {\n    BoardInfo,\n    InitiativeData,\n    InitiativeEffect,\n    Note,\n    ServerClient,\n    ServerLocation,\n} from \"@/game/comm/types/general\";\nimport { ServerShape } from \"@/game/comm/types/shapes\";\nimport { GlobalPoint } from \"@/game/geom\";\nimport { createLayer } from \"@/game/layers/utils\";\n\nsocket.on(\"connect\", () => {\n    console.log(\"Connected\");\n});\nsocket.on(\"disconnect\", () => {\n    console.log(\"Disconnected\");\n});\nsocket.on(\"redirect\", (destination: string) => {\n    console.log(\"redirecting\");\n    window.location.href = destination;\n});\nsocket.on(\"Room.Info.Set\", (data: { name: string; creator: string; invitationCode: string }) => {\n    store.setRoomName(data.name);\n    store.setRoomCreator(data.creator);\n    store.setInvitationCode(data.invitationCode);\n});\nsocket.on(\"Username.Set\", (username: string) => {\n    store.setUsername(username);\n    store.setDM(true);\n    // store.setDM\", username === window.location.pathname.split(\"/\")[2]);\n});\nsocket.on(\"Client.Options.Set\", (options: ServerClient) => {\n    store.setGridColour(options.grid_colour, false);\n    store.setFOWColour(options.fow_colour, false);\n    store.setRulerColour(options.ruler_colour, false);\n    store.setPanX(options.pan_x);\n    store.setPanY(options.pan_y);\n    store.setZoomFactor(options.zoom_factor);\n    if (options.active_layer) layerManager.selectLayer(options.active_layer, false);\n    if (layerManager.getGridLayer() !== undefined) layerManager.getGridLayer()!.invalidate();\n});\nsocket.on(\"Location.Set\", (data: Partial<ServerLocation>) => {\n    if (data.name !== undefined) store.setLocationName(data.name);\n    if (data.unit_size !== undefined) store.setUnitSize(data.unit_size, false);\n    if (data.use_grid !== undefined) store.setUseGrid(data.use_grid, false);\n    if (data.full_fow !== undefined) store.setFullFOW(data.full_fow, false);\n    if (data.fow_opacity !== undefined) store.setFOWOpacity(data.fow_opacity, false);\n    if (data.fow_los !== undefined) store.setLineOfSight(data.fow_los, false);\n});\nsocket.on(\"Position.Set\", (data: { x: number; y: number }) => {\n    gameManager.setCenterPosition(new GlobalPoint(data.x, data.y));\n});\nsocket.on(\"Notes.Set\", (notes: Note[]) => {\n    for (const note of notes) store.newNote(note, false);\n});\nsocket.on(\"Asset.List.Set\", (assets: AssetList) => {\n    store.setAssets(assets);\n});\nsocket.on(\"Board.Set\", (locationInfo: BoardInfo) => {\n    store.clear();\n    store.setLocations(locationInfo.locations);\n    document.getElementById(\"layers\")!.innerHTML = \"\";\n    store.resetLayerInfo();\n    for (const layer of locationInfo.layers) createLayer(layer);\n    // Force the correct opacity render on other layers.\n    layerManager.selectLayer(layerManager.getLayer()!.name, false);\n    getRef(\"initiative\").clear();\n    store.setBoardInitialized(true);\n    store.recalculateBV();\n});\nsocket.on(\"Gridsize.Set\", (gridSize: number) => {\n    store.setGridSize(gridSize, false);\n});\nsocket.on(\"Shape.Add\", (shape: ServerShape) => {\n    gameManager.addShape(shape);\n});\nsocket.on(\"Shape.Remove\", (shape: ServerShape) => {\n    if (!layerManager.UUIDMap.has(shape.uuid)) {\n        console.log(`Attempted to remove an unknown shape`);\n        return;\n    }\n    if (!layerManager.hasLayer(shape.layer)) {\n        console.log(`Attempted to remove shape from an unknown layer ${shape.layer}`);\n        return;\n    }\n    const layer = layerManager.getLayer(shape.layer)!;\n    layer.removeShape(layerManager.UUIDMap.get(shape.uuid)!, false);\n    layer.invalidate(false);\n});\nsocket.on(\"Shape.Order.Set\", (data: { shape: ServerShape; index: number }) => {\n    if (!layerManager.UUIDMap.has(data.shape.uuid)) {\n        console.log(`Attempted to move the shape order of an unknown shape`);\n        return;\n    }\n    if (!layerManager.hasLayer(data.shape.layer)) {\n        console.log(`Attempted to remove shape from an unknown layer ${data.shape.layer}`);\n        return;\n    }\n    const shape = layerManager.UUIDMap.get(data.shape.uuid)!;\n    const layer = layerManager.getLayer(shape.layer)!;\n    layer.moveShapeOrder(shape, data.index, false);\n});\nsocket.on(\"Shape.Layer.Change\", (data: { uuid: string; layer: string }) => {\n    const shape = layerManager.UUIDMap.get(data.uuid);\n    if (shape === undefined) return;\n    shape.moveLayer(data.layer, false);\n});\nsocket.on(\"Shape.Update\", (data: { shape: ServerShape; redraw: boolean; move: boolean }) => {\n    gameManager.updateShape(data);\n});\nsocket.on(\"Initiative.Set\", (data: InitiativeData[]) => {\n    getRef(\"initiative\").data = data.filter(d => !!d);\n});\nsocket.on(\"Initiative.Turn.Update\", (data: string) => {\n    getRef(\"initiative\").setTurn(data, false);\n});\nsocket.on(\"Initiative.Round.Update\", (data: number) => {\n    getRef(\"initiative\").setRound(data, false);\n});\nsocket.on(\"Initiative.Effect.New\", (data: { actor: string; effect: InitiativeEffect }) => {\n    const initiative = getRef(\"initiative\");\n    const actor = initiative.getActor(data.actor);\n    if (actor === undefined) return;\n    initiative.createEffect(actor, data.effect, false);\n});\nsocket.on(\"Initiative.Effect.Update\", (data: { actor: string; effect: InitiativeEffect }) => {\n    getRef(\"initiative\").updateEffect(data.actor, data.effect, false);\n});\nsocket.on(\"Temp.Clear\", (shapes: ServerShape[]) => {\n    shapes.forEach(shape => {\n        if (!layerManager.UUIDMap.has(shape.uuid)) {\n            console.log(\"Attempted to remove an unknown temporary shape\");\n            return;\n        }\n        if (!layerManager.hasLayer(shape.layer)) {\n            console.log(`Attempted to remove shape from an unknown layer ${shape.layer}`);\n            return;\n        }\n        const realShape = layerManager.UUIDMap.get(shape.uuid)!;\n        layerManager.getLayer(shape.layer)!.removeShape(realShape, false);\n    });\n});\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\nimport vueSlider from \"vue-slider-component\";\n\nimport { throttle } from \"lodash\";\nimport { mapGetters, mapState } from \"vuex\";\n\nimport ConfirmDialog from \"@/core/components/modals/confirm.vue\";\nimport PromptDialog from \"@/core/components/modals/prompt.vue\";\nimport layerManager from \"@/game/layers/manager\";\nimport store from \"@/game/store\";\nimport InitiativeDialog from \"@/game/ui/initiative.vue\";\nimport MenuBar from \"@/game/ui/menu/menu.vue\";\nimport NoteDialog from \"@/game/ui/note.vue\";\nimport SelectionInfo from \"@/game/ui/selection/selection_info.vue\";\nimport Tools from \"@/game/ui/tools/tools.vue\";\n\nimport { createConnection } from \"@/game/api/socket\";\nimport { onKeyDown, onKeyUp } from \"@/game/events/keyboard\";\nimport { scrollZoom } from \"@/game/events/mouse\";\nimport { LocalPoint } from \"@/game/geom\";\nimport { l2g } from \"@/game/units\";\n\nimport \"@/game/api/events\";\n\nexport default Vue.component(\"game\", {\n    components: {\n        \"tool-bar\": Tools,\n        \"selection-info\": SelectionInfo,\n        \"prompt-dialog\": PromptDialog,\n        \"confirm-dialog\": ConfirmDialog,\n        \"menu-bar\": MenuBar,\n        \"initiative-dialog\": InitiativeDialog,\n        \"zoom-slider\": vueSlider,\n        \"note-dialog\": NoteDialog,\n    },\n    data: () => ({\n        ready: {\n            manager: false,\n            tools: false,\n        },\n    }),\n    computed: {\n        ...mapState(\"game\", [\"IS_DM\", \"layers\"]),\n        ...mapGetters(\"game\", [\"selectedLayer\"]),\n        gridSize() {\n            return this.$store.state.game.gridSize;\n        },\n        zoomFactor: {\n            get(): number {\n                return store.zoomFactor;\n            },\n            set(value: number) {\n                store.updateZoom(value, l2g(new LocalPoint(window.innerWidth / 2, window.innerHeight / 2)));\n            },\n        },\n    },\n    beforeRouteEnter(to, from, next) {\n        createConnection(to);\n        next();\n    },\n    mounted() {\n        // window.addEventListener(\"resize\", () => {\n        //     gameManager.layerManager.setWidth(window.innerWidth);\n        //     gameManager.layerManager.setHeight(window.innerHeight);\n        //     gameManager.layerManager.invalidate();\n        // }),\n        //     window.addEventListener(\"wheel\", throttle(scrollZoom));\n        // window.addEventListener(\"keyup\", onKeyUp);\n        // window.addEventListener(\"keydown\", onKeyDown);\n        // // prevent double clicking text selection\n        // window.addEventListener(\"selectstart\", e => {\n        //     e.preventDefault();\n        //     return false;\n        // });\n        this.ready.manager = true;\n    },\n    methods: {\n        mousedown(event: MouseEvent) {\n            (<any>this.$refs.tools).mousedown(event);\n        },\n        mouseup(event: MouseEvent) {\n            (<any>this.$refs.tools).mouseup(event);\n        },\n        mousemove(event: MouseEvent) {\n            (<any>this.$refs.tools).mousemove(event);\n        },\n        mouseleave(event: MouseEvent) {\n            (<any>this.$refs.tools).mouseleave(event);\n        },\n        contextmenu(event: MouseEvent) {\n            (<any>this.$refs.tools).contextmenu(event);\n        },\n        selectLayer(layer: string) {\n            layerManager.selectLayer(layer);\n        },\n        drop(event: DragEvent) {\n            if (event === null || event.dataTransfer === null) return;\n            if (event.dataTransfer.files.length > 0) {\n                (<any>this.$refs.confirm)\n                    .open(\"Uploading files should be done through the asset manager.\", \"Ok\", \"\")\n                    .then(() => {}, () => {});\n            } else if (event.dataTransfer.getData(\"text/plain\") === \"\") {\n                return;\n            } else {\n                layerManager.dropAsset(event);\n            }\n        },\n    },\n});\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--12-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./game.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--12-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./game.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./game.vue?vue&type=template&id=b516b37e&\"\nimport script from \"./game.vue?vue&type=script&lang=ts&\"\nexport * from \"./game.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./game.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"game.vue\"\nexport default component.exports","// import \"./class-component-hooks\";\n\nimport axios, { AxiosResponse } from \"axios\";\nimport Vue from \"vue\";\nimport Router from \"vue-router\";\n\nVue.use(Router);\n\nimport Login from \"@/auth/login.vue\";\nimport Logout from \"@/auth/logout\";\nimport Load from \"@/core/components/load.vue\";\nimport coreStore from \"@/core/store\";\nimport DashBoard from \"@/dashboard/main.vue\";\nimport Game from \"@/game/game.vue\";\n\nconst router = new Router({\n    mode: \"history\",\n    base: process.env.BASE_URL,\n    routes: [\n        {\n            path: \"/\",\n            redirect: \"/dashboard\",\n        },\n        {\n            path: \"/_load\",\n            name: \"load\",\n            component: Load,\n        },\n        {\n            path: \"/auth\",\n            component: { template: \"<router-view></router-view>\" },\n            children: [{ path: \"login\", component: Login }, { path: \"logout\", component: Logout }],\n        },\n        {\n            path: \"/dashboard\",\n            component: DashBoard,\n            meta: {\n                auth: true,\n            },\n        },\n        {\n            path: \"/game/:creator/:room\",\n            component: Game,\n            meta: {\n                auth: true,\n            },\n        },\n    ],\n});\n\nrouter.beforeEach((to, from, next) => {\n    if (!coreStore.initialized && to.path !== \"/_load\") {\n        next({ path: \"/_load\" });\n        axios\n            .get(\"/api/auth\")\n            .then((response: AxiosResponse) => {\n                if (response.data.auth) coreStore.setAuthenticated(true);\n                coreStore.setInitialized(true);\n                router.push(\"/dashboard\");\n            })\n            .catch(() => {\n                console.log(0);\n            });\n    } else if (to.matched.some(record => record.meta.auth) && !coreStore.authenticated) {\n        next({ path: \"/auth/login\", query: { redirect: to.path } });\n    } else {\n        next();\n    }\n});\n\nexport default router;\n","import Vue from \"vue\";\n\nimport App from \"@/App.vue\";\nimport router from \"@/router\";\nimport store from \"@/store\";\n\nVue.config.productionTip = false;\n\nconst app = new Vue({\n    router,\n    store,\n    render: h => h(App),\n}).$mount(\"#app\");\n\n(<any>window).app = app;\n\nexport default app;\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./login.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./login.vue?vue&type=style&index=0&lang=css&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./main.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./main.vue?vue&type=style&index=0&lang=css&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./confirm.vue?vue&type=style&index=0&id=7c994a10&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./confirm.vue?vue&type=style&index=0&id=7c994a10&scoped=true&lang=css&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./createtoken_modal.vue?vue&type=style&index=0&id=2ebb16e9&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./createtoken_modal.vue?vue&type=style&index=0&id=2ebb16e9&scoped=true&lang=css&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./menu.vue?vue&type=style&index=0&id=4bb01ba9&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./menu.vue?vue&type=style&index=0&id=4bb01ba9&scoped=true&lang=css&\""],"sourceRoot":""}