{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/game/ui/tools/createtoken_modal.vue?5a78","webpack:///./src/game/ui/tools/createtoken_modal.vue?17b5","webpack:///./src/game/shapes/text.ts","webpack:///./src/game/ui/selection/shapecontext.vue","webpack:///./src/App.vue?5b85","webpack:///./src/core/components/colorpicker.vue?4d88","webpack:///./src/game/game.vue","webpack:///./src/game/api/socket.ts","webpack:///./src/game/ui/tools/tools.vue?5e4a","webpack:///./src/game/ui/tools/tools.vue?34e5","webpack:///./src/assetManager/manager.vue?5633","webpack:///./src/core/components/contextmenu.vue?d155","webpack:///./src/core/components/contextmenu.vue?3f68","webpack:///./src/game/ui/menu/asset_node.vue","webpack:///./src/auth/login.vue","webpack:///./src/game/ui/tools/tools.vue?1769","webpack:///./src/core/components/colorpicker.vue?58e4","webpack:///./src/game/ui/tools/tool.vue?5b17","webpack:///./src/game/shapes/circulartoken.ts","webpack:///./src/game/ui/annotation.ts","webpack:///./src/game/ui/menu/menu.vue","webpack:///./src/game/ui/menu/menu.vue?d8cc","webpack:///./src/game/ui/menu/menu.vue?34d6","webpack:///./src/game/ui/tools/selectcontext.vue?2d9f","webpack:///./src/game/ui/tools/selectcontext.vue?d448","webpack:///./src/core/components/modals/confirm.vue?9e98","webpack:///./src/core/components/modals/confirm.vue?c32f","webpack:///./src/core/components/contextmenu.vue","webpack:///./src/auth/login.vue?3969","webpack:///./src/game/ui/note.vue?49b7","webpack:///./src/auth/login.vue?c159","webpack:///./src/game/shapes/utils.ts","webpack:///./src/game/game.vue?bfa0","webpack:///./src/game/game.vue?0c03","webpack:///./src/game/shapes/shape.ts","webpack:///./src/core/components/modals/prompt.vue?d457","webpack:///./src/game/ui/tools/select.vue?49f9","webpack:///./src/game/ui/tools/utils.ts","webpack:///./src/game/api/utils.ts","webpack:///./src/game/ui/menu/asset_node.vue?f519","webpack:///./src/assetManager/store.ts","webpack:///./src/core/components/contextmenu.vue?50e1","webpack:///./src/game/ui/selection/shapecontext.vue?1cf6","webpack:///./src/dashboard/main.vue?7545","webpack:///./src/game/ui/tools/draw.vue?fc3d","webpack:///./src/game/ui/tools/map.vue?284a","webpack:///./src/game/ui/tools/draw.vue?fde0","webpack:///./src/game/ui/tools/draw.vue?fe7c","webpack:///./src/game/layers/grid.ts","webpack:///./src/game/ui/menu/asset_node.vue?0d67","webpack:///./src/game/ui/menu/asset_node.vue?08a0","webpack:///./src/store.ts","webpack:///./src/core/components/colorpicker.vue","webpack:///./src/App.vue?3ba4","webpack:///./src/App.vue","webpack:///./src/game/ui/initiative.vue?4469","webpack:///./src/game/ui/tools/map.vue?55ee","webpack:///./src/game/ui/tools/map.vue?e055","webpack:///./src/game/ui/selection/shapecontext.vue?4ca3","webpack:///./src/game/ui/selection/shapecontext.vue?88c8","webpack:///./src/game/ui/tools/select.vue?33c7","webpack:///./src/game/ui/tools/select.vue?0aa0","webpack:///./src/game/layers/fow.ts","webpack:///./src/dashboard/main.vue?60a4","webpack:///./src/dashboard/main.vue?323b","webpack:///./src/core/components/load.vue?18c2","webpack:///./src/game/shapes/circle.ts","webpack:///./src/game/ui/tools/map.vue?a3ab","webpack:///./src/core/components/load.vue","webpack:///./src/game/ui/tools/pan.ts","webpack:///./src/game/ui/tools/selectcontext.vue","webpack:///./src/core/utils.ts","webpack:///./src/assetManager/contextMenu.vue","webpack:///./src/game/ui/menu/asset_node.vue?1f27","webpack:///./src/core/components/load.vue?8cdd","webpack:///./src/core/components/load.vue?878d","webpack:///./src/core/components/modals/modal.vue?44ae","webpack:///./src/game/ui/tools/createtoken_modal.vue?1519","webpack:///./src/assetManager/socket.ts","webpack:///./src/game/game.vue?5550","webpack:///./src/game/shapes/multiline.ts","webpack:///./src/game/ui/tools/draw.vue","webpack:///./src/game/utils.ts","webpack:///./src/game/ui/tools/createtoken_modal.vue?d0df","webpack:///./src/game/ui/note.vue?f9bd","webpack:///./src/assetManager/contextMenu.vue?4030","webpack:///./src/assetManager/contextMenu.vue?c4df","webpack:///./src/game/ui/initiative.vue?7096","webpack:///./src/game/ui/initiative.vue?d4fd","webpack:///./src/game/ui/tools/draw.vue?b96d","webpack:///./src/game/ui/menu/asset_node.vue?3e82","webpack:///./src/game/bvh/node.ts","webpack:///./src/game/shapes/line.ts","webpack:///./src/router.ts","webpack:///./src/game/ui/tools/tool.vue?d136","webpack:///./src/game/ui/tools/tools.vue","webpack:///./src/game/ui/tools/tool.vue?8ce3","webpack:///./src/game/shapes/asset.ts","webpack:///./src/core/components/modals/prompt.vue?82cc","webpack:///./src/game/ui/note.vue?e2a1","webpack:///./src/game/ui/tools/draw.vue?1261","webpack:///./src/game/layers/manager.ts","webpack:///./src/game/ui/initiative.vue?c7e1","webpack:///./src/game/ui/tools/selectcontext.vue?45bf","webpack:///./src/game/ui/tools/createtoken_modal.vue","webpack:///./src/game/ui/tools/createtoken_modal.vue?f918","webpack:///./src/game/events/keyboard.ts","webpack:///./src/assetManager/manager.vue?433f","webpack:///./src/game/ui/tools/tools.vue?25b2","webpack:///./src/game/ui/selection/selection_info.vue?2310","webpack:///./src/core/components/modals/modal.vue?09d2","webpack:///./src/core/components/contextmenu.vue?a0a2","webpack:///./src/core/components/modals/prompt.vue?4e1b","webpack:///./src/game/ui/menu/menu.vue?f8a3","webpack:///./src/game/ui/note.vue?d446","webpack:///./src/game/ui/note.vue?db2f","webpack:///./src/game/ui/menu/menu.vue?8b23","webpack:///./src/game/shapes/boundingrect.ts","webpack:///./src/game/geom.ts","webpack:///./src/game/game.vue?5592","webpack:///./src/game/units.ts","webpack:///./src/core/components/modals/modal.vue?feb2","webpack:///./src/core/components/modals/modal.vue?7f02","webpack:///./src/assetManager/manager.vue?5bfd","webpack:///./src/assetManager/manager.vue?7ddd","webpack:///./src/game/ui/menu/menu.vue?ae57","webpack:///./src/core/components/colorpicker.vue?1682","webpack:///./src/game/ui/selection/selection_info.vue?66b6","webpack:///./src/game/ui/tools/tool.vue?08e2","webpack:///./src/game/ui/tools/tool.vue?5c45","webpack:///./src/game/manager.ts","webpack:///./src/core/components/load.vue?8cd0","webpack:///./src/dashboard/main.vue?3f72","webpack:///./src/core/components/modals/confirm.vue","webpack:///./src/core/components/modals/prompt.vue?3083","webpack:///./src/core/components/modals/prompt.vue?5337","webpack:///./src/game/ui/selection/shapecontext.vue?aac0","webpack:///./src/assetManager/manager.vue?a11e","webpack:///./src/game/event-bus.ts","webpack:///./src/dashboard/main.vue?d5a9","webpack:///./src/game/shapes/rect.ts","webpack:///./src/game/ui/tools/selectcontext.vue?6f66","webpack:///./src/game/layers/fowplayers.ts","webpack:///./src/game/ui/selection/edit_dialog.vue?fed3","webpack:///./src/game/ui/selection/edit_dialog.vue?2dac","webpack:///./src/game/layers/layer.ts","webpack:///./src/game/events/mouse.ts","webpack:///./src/game/shapes/baserect.ts","webpack:///./src/game/ui/tools/select.vue","webpack:///./src/dashboard/main.vue","webpack:///./src/game/bvh/bvh.ts","webpack:///./src/game/ui/selection/shapecontext.vue?873c","webpack:///./src/core/components/colorpicker.vue?75e4","webpack:///./src/core/components/colorpicker.vue?2f2a","webpack:///./src/game/ui/tools/selectcontext.vue?d61f","webpack:///./src/auth/logout.ts","webpack:///./src/core/store.ts","webpack:///./src/main.ts","webpack:///./src/core/components/contextmenu.vue?f402","webpack:///./src/invitation/invitation.ts","webpack:///./src/core/components/modals/prompt.vue","webpack:///./src/game/ui/selection/edit_dialog.vue","webpack:///./src/core/components/modals/confirm.vue?3e59","webpack:///./src/game/settings.ts","webpack:///./src/auth/login.vue?283c","webpack:///./src/game/ui/selection/selection_info.vue?7631","webpack:///./src/game/ui/selection/selection_info.vue?27f7","webpack:///./src/game/game.vue?d01c","webpack:///./src/game/ui/tools/ruler.ts","webpack:///./src/core/components/modals/modal.vue","webpack:///./src/game/game.vue?7a5e","webpack:///./src/game/ui/selection/edit_dialog.vue?9a84","webpack:///./src/core/components/modals/confirm.vue?f9ee","webpack:///./src/game/ui/selection/edit_dialog.vue?b8d5","webpack:///./src/game/ui/tools/map.vue","webpack:///./src/assetManager/contextMenu.vue?1b1b","webpack:///./src/game/ui/tools/select.vue?b7fd","webpack:///./src/assetManager/manager.vue","webpack:///./src/game/ui/tools/tools.vue?fa4a","webpack:///./src/core/components/modals/modal.vue?56e5","webpack:///./src/game/ui/tools/tool.vue","webpack:///./src/game/ui/initiative.vue?36c8","webpack:///./src/game/ui/selection/selection_info.vue","webpack:///./src/game/store.ts","webpack:///./src/core/components/modals/confirm.vue?a22f","webpack:///./src/game/comm/conversion/aura.ts","webpack:///./src/assetManager/contextMenu.vue?1e9a","webpack:///./src/game/ui/note.vue","webpack:///./src/game/ui/initiative.vue","webpack:///./src/game/layers/utils.ts","webpack:///./src/auth/login.vue?1ac1","webpack:///./src/auth/login.vue?f836","webpack:///./src/game/ui/selection/edit_dialog.vue?3800","webpack:///./src/game/ui/selection/selection_info.vue?5d62","webpack:///./src/game/api/events.ts"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","installedChunks","push","Object","prototype","hasOwnProperty","call","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","app","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","render","_vm","this","_h","$createElement","_c","_self","attrs","visible","on","close","$event","scopedSlots","_u","fn","staticClass","draggable","dragstart","dragStart","dragend","dragEnd","_v","for","directives","rawName","expression","type","id","domProps","input","target","composing","text","color","fillColour","update:color","borderColour","ref","width","height","click","submit","staticRenderFns","__webpack_exports__","boundingrect_1","shape_1","units_1","Text","Shape","[object Object]","position","font","angle","strokeColour","uuid","super","assign","getBaseDict","BoundingRect","refPoint","ctx","draw","fillStyle","save","dest","g2l","translate","x","y","rotate","textAlign","getLines","map","line","fillText","restore","point","centerPoint","canvas","resizeDir","lines","lineHeight","widths","measureText","Math","max","split","allLines","maxWidth","targetLine","words","word","testLine","metrics","testWidth","_shapecontext_vue_vue_type_template_id_0dac178b_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_shapecontext_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","__WEBPACK_IMPORT_KEY__","_node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_3__","component","options","__file","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_App_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_App_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default","tinycolor2_1","tslib_1","__importDefault","vue_1","vue_class_component_1","vue_color_1","vue_property_decorator_1","ColorPicker","default","display","left","top","transparent","$refs","chromePicker","val","rgba","a","setPosition","$nextTick","$children","$el","focus","newColor","toRgbString","$emit","rect","getBoundingClientRect","right","innerWidth","bottom","innerHeight","__decorate","Prop","String","components","chrome-picker","Chrome","_game_vue_vue_type_template_id_07e4e47f_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_game_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","_node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_4__","socket_io_client_1","createConnection","route","socket","io","opts","query","params","creator","room","connect","location","protocol","host","autoConnect","_l","tool","dmTools","includes","IS_DM","refInFor","class","tool-selected","currentTool","href","_s","_e","contextMenu_vue_1","confirm_vue_1","prompt_vue_1","socket_1","store_1","utils_1","AssetManager","path","draggingSelection","folders","assetStore","files","selected","idMap","currentFolder","root","parentFolder","parent","undefined","firstSelectedFile","sel","file_hash","nextFolder","pop","clearSelected","emit","prompt","inode","isFile","indexOf","delete","event","shiftKey","inodes","start","end","ctrlKey","file","dataTransfer","setData","dropEffect","classList","contains","add","remove","moveInode","upload","document","getElementById","fls","CHUNK_SIZE","uuidv4","slices","ceil","size","fr","FileReader","readAsArrayBuffer","min","onload","e","directory","totalSlices","Prompt","ConfirmDialog","AssetContextMenu","to","from","next","disconnect","style","tabindex","blur","_t","_asset_node_vue_vue_type_template_id_03d8fe61_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_asset_node_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","_login_vue_vue_type_template_id_51240a1f_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_login_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_tools_vue_vue_type_style_index_0_id_18f17c2d_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_tools_vue_vue_type_style_index_0_id_18f17c2d_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_colorpicker_vue_vue_type_style_index_0_id_a45a1816_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_colorpicker_vue_vue_type_style_index_0_id_a45a1816_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_tool_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_tool_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default","tinycolor","__importStar","circle_1","CircularToken","Circle","center","radius","fromDict","textBaseline","xs","calcFontScale","g2lz","ys","transform","mostReadable","toHexString","gameStore","group","source","has_img","effects","index","Infinity","geom_1","manager_1","rect_1","text_1","AnnotationManager","shown","origin","GlobalPoint","annotationText","annotationRect","Rect","layer","layerManager","hasLayer","console","warn","getLayer","addShape","l2g","LocalPoint","getMaxWidth","getMaxHeight","w","zoomFactor","h","invalidate","_menu_vue_vue_type_template_id_56348a0e_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_menu_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","settings","locations","rm-list-dm","_m","enter","rm","transition","settingsClick","staticStyle","overflow-y","overflow-x","asset","assets","createNote","note","cursor","openNote","title","notes","checked","Array","isArray","useGrid","_i","change","$$a","$$el","$$c","$$v","$$i","concat","fullFOW","modifiers","number","step","fowOpacity","_n","$forceUpdate","fowLOS","unitSize","gridSize","readonly","invitationCode","gridColour","fowColour","rulerColour","text-decoration","changeLocation","createLocation","bringPlayers","createToken","showInitiative","confirm","yes","no","deny","_contextmenu_vue_vue_type_template_id_3cf88d4e___WEBPACK_IMPORTED_MODULE_0__","_contextmenu_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_login_vue_vue_type_style_index_0_id_51240a1f_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_login_vue_vue_type_style_index_0_id_51240a1f_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_note_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_note_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_login_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_login_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","asset_1","circulartoken_1","line_1","multiline_1","createShapeFromDict","shape","dummy","UUIDMap","has","sh","type_","fill_colour","stroke_colour","circ","token","Line","x2","y2","line_width","multiline","MultiLine","points","img","Image","src","startsWith","URL","pathname","Asset","mouseleave","ready","mousedown","mouseup","mousemove","contextmenu","preventDefault","stopPropagation","dragover","drop","layers","layer-selected","selectedLayer","selectLayer","interval","dot-width","dot-height","tooltip-dir","tooltip","formatter","toFixed","slider-style","border-radius","bg-style","background-color","box-shadow","process-style","model","callback","aura_1","trackers","auras","owners","visionObstruction","movementObstruction","isToken","showHighlight","annotation","globalCompositeOperation","Map","skipLightUpdate","self","obstructionIndex","visionBlockers","changeBV","recalculateBV","forEach","au","ls","visionSources","findIndex","aura","visionSource","some","blocksMovement","movementblockers","ownedBy","ownedtokens","username","draw_operator","movement_obstruction","vision_obstruction","aurasToServer","is_token","JSON","stringify","aurasFromServer","parse","bbox","getBoundingBox","strokeStyle","strokeRect","g2lx","topLeft","g2ly","dim","beginPath","loc","innerRange","g2lr","colour","gradient","createRadialGradient","tc","addColorStop","setAlpha","lastPath","fill","arc","PI","sync","oldLayer","newLayer","shapes","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_prompt_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_prompt_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","selectcontext_vue_1","tool_vue_1","utils_2","utils_3","SelectOperations","SelectTool","showContextMenu","active","Noop","resizeDirection","deltaChanged","dragRay","Ray","Vector","selectionStartPoint","selectionHelper","log","mouse","getMouse","globalMouse","selectionStack","hit","selection","corner","getCorner","getRef","Resize","Drag","localRefPoint","subtract","GroupSelect","endPoint","abs","og","direction","delta","multiply","ogDelta","calculateDelta","asDict","redraw","temporary","resize","bb","gm","inCorner","body","clearSelection","topRight","botLeft","altKey","snapToGrid","resizeToGrid","$parent","shapecontext","open","selectcontext","SelectContext","done","ogSelBBox","newSelBBox","offset","refine","movementBlocker","blocker","blockerBBox","found","intersectsWithInner","ray","fromPoints","normalize","invDir","inverse","dirIsNegative","intersectP","bCenter","sCenter","ux","uy","dx","dot","dy","sendClientOptions","locationOptions","panX","panY","AssetNode","showImage","keys","filter","el","sort","alphSort","__files","b","toLowerCase","children","imageSource","querySelector","setDragImage","vuex_module_decorators_1","AssetStore","VuexModule","Mutation","Module","dynamic","store","rootStore","namespaced","getModule","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_contextmenu_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_contextmenu_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","contextmenu_vue_1","ShapeContext","activeLayer","pageX","pageY","selectable","playerEditable","moveLayer","getActiveLayer","moveShapeOrder","initiative","addInitiative","getInitiativeRepr","ContextMenu","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_main_vue_vue_type_style_index_0_id_3430ab3a_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_main_vue_vue_type_style_index_0_id_3430ab3a_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_draw_vue_vue_type_style_index_0_id_67a6ef9a_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_draw_vue_vue_type_style_index_0_id_67a6ef9a_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_map_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_map_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","--detailRight","detailRight","--detailArrow","detailArrow","option-selected","modeSelect","shapeSelect","max-width","brushSize","layer_1","GridLayer","Layer","valid","doClear","drawGrid","clear","gs","moveTo","lineTo","lineWidth","stroke","folder","toggle","mouseover","hash","mouseout","vuex_1","use","Store","_colorpicker_vue_vue_type_template_id_a45a1816_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_colorpicker_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","script","componentNormalizer","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_initiative_vue_vue_type_style_index_0_id_38ee733a_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_initiative_vue_vue_type_style_index_0_id_38ee733a_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","xCount","yCount","getLayers","setLayer","moveToBack","moveToFront","getInitiativeWord","settings_1","FOWLayer","isVisionLayer","preFogShapes","idx","removeShape","Settings","skipLightFOW","clearRect","originalOperation","dctx","drawAngleLines","drawFirstLightHit","lcenter","alm","light","find","auraLength","getUnitDistance","auraCircle","visibleInCanvas","lastArcAngle","Path2D","firstPoint","angleSteps","anglePoint","cos","sin","lightRay","hitResult","BV","intersect","drawImage","preShape","ogComposite","getFogColour","fillRect","owned","joined","createRoom","placeholder","newSessionName","tag","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_load_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_load_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","pow","targetX","targetY","round","resizedir","diff","sqrt","baserect_1","MapTool","startPoint","clone","BaseRect","_load_vue_vue_type_template_id_fbaff2fc___WEBPACK_IMPORTED_MODULE_0__","_load_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","_node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_2__","PanTool","panStart","distance","increasePanX","increasePanY","_selectcontext_vue_vue_type_template_id_6d5bd46a_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_selectcontext_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","main_1","replace","random","v","toString","capitalize","charAt","toUpperCase","getHTMLFont","element","parentElement","getComputedStyle","getPropertyValue","getHTMLTextWidth","fakeElement","createElement","appendChild","getContext","partition","arr","predicate","ret","Number","fontWidth","fixedEncodeURIComponent","str","encodeURIComponent","charCodeAt","OrderedMap","values","getComponent","activeComponent","_contextMenu_vue_vue_type_template_id_547e08d0___WEBPACK_IMPORTED_MODULE_0__","_contextMenu_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_asset_node_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_asset_node_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","message","Modal","positioned","offsetX","offsetY","screenX","screenY","dragging","updatePosition","container","offsetWidth","offsetHeight","clientX","clientY","parseInt","Boolean","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_createtoken_modal_vue_vue_type_style_index_0_id_254e8bcf_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_createtoken_modal_vue_vue_type_style_index_0_id_254e8bcf_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","destination","setRoot","child","set","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_game_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_game_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default","minx","maxx","miny","maxy","lineCap","lineJoin","_draw_vue_vue_type_template_id_67a6ef9a_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_draw_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","opposite","colorpicker_vue_1","modal_vue_1","CreateTokenModal","updatePreview","newValue","oldValue","Watch","color-picker","computed","mapState","NoteDialog","textarea","scrollHeight","updateNote","then","removeNote","rename","mask","fakeSetData","disabled","$store","state","game","updateOrder","actor","flex-direction","align-items","initiative-selected","currentActor","mouseenter","toggleHighlight","lazy","notAllowed","owns","$set","syncInitiative","opacity","createEffect","getDefaultEffect","toggleOption","removeInitiative","effect","updateEffect","turns","roundCounter","setRound","setTurn","nextTurn","DrawTool","brushHelper","modes","helperSize","onModeChange","fowLayer","normalLayer","setupBrush","onDeselect","onSelect","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_asset_node_vue_vue_type_style_index_0_id_03d8fe61_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_asset_node_vue_vue_type_style_index_0_id_03d8fe61_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","BoundingNode","nPrimitives","LeafNode","first","firstPrimOffset","InteriorNode","dimension","c1","c2","union","axios_1","vue_router_1","manager_vue_1","login_vue_1","logout_1","load_vue_1","main_vue_1","game_vue_1","invitation_1","router","base","routes","redirect","meta","auth","template","beforeEach","coreStore","initialized","matched","record","authenticated","response","setAuthenticated","setUsername","setInitialized","catch","error","Tool","mid","$on","onMouseDown","onMouseUp","onMouseMove","onContextMenu","_tools_vue_vue_type_template_id_18f17c2d_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_tools_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_tool_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_tool_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","topleft","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_prompt_vue_vue_type_style_index_0_id_3c674586_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_prompt_vue_vue_type_style_index_0_id_3c674586_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_note_vue_vue_type_style_index_0_id_6c3d2628_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_note_vue_vue_type_style_index_0_id_6c3d2628_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_draw_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_draw_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","LayerManager","drawLoop","requestAnimationFrame","addLayer","globalAlpha","getSelection","image","getData","l2gx","l2gy","l2gz","lm","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_initiative_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_initiative_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_selectcontext_vue_vue_type_style_index_0_id_6d5bd46a_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_selectcontext_vue_vue_type_style_index_0_id_6d5bd46a_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","_createtoken_modal_vue_vue_type_template_id_254e8bcf_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_createtoken_modal_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_createtoken_modal_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_createtoken_modal_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","event_bus_1","onKeyUp","HTMLInputElement","HTMLTextAreaElement","selectTool","EventBus","onKeyDown","keyCode","select","hasSelection","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_manager_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_manager_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default","shapecontext_vue_1","createtoken_modal_vue_1","draw_vue_1","map_vue_1","pan_1","select_vue_1","manager_2","ruler_1","Tools","tools","currentToolComponent","tagName","targetTool","button","buttons","annotations","gameManager","annotationManager","setActiveText","select-tool","pan-tool","draw-tool","ruler-tool","RulerTool","map-tool","shape-menu","createtoken-dialog","watch","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_selection_info_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_selection_info_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_modal_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_modal_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_contextmenu_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_contextmenu_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default","question","answer","resolve","reject","Promise","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_menu_vue_vue_type_style_index_0_id_56348a0e_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_menu_vue_vue_type_style_index_0_id_56348a0e_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","font-size","calcHeight","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_menu_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_menu_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","botRight","vector","other","xmin","xmax","ymin","ymax","botright","dirIsNeg","txmin","getDiagCorner","txmax","tymin","tymax","tMax","sw","getPointDistance","p1","p2","Point","vec","scale","maxT","t1","t2","vue_slider_component_1","lodash_1","initiative_vue_1","menu_vue_1","note_vue_1","selection_info_vue_1","tools_vue_1","keyboard_1","mouse_1","Game","manager","updateZoom","newZoomValue","zoomLocation","addEventListener","setWidth","setHeight","throttle","scrollZoom","dropAsset","tool-bar","selection-info","prompt-dialog","confirm-dialog","menu-bar","initiative-dialog","zoom-slider","note-dialog","obj","z","l2gr","modal-mask","dialog-mask","dragOver","moveDrag","stopDrag","dir","multiple","hidden","createDirectory","prepareUpload","dblclick","changeDirectory","dragleave","leaveDrag","inode-selected","cm","startDrag","asset_node_vue_1","MenuBar","setUseGrid","setFullFOW","setFOWOpacity","setLineOfSight","setUnitSize","setGridSize","setGridColour","setFOWColour","setRulerColour","nextElementSibling","newNote","asset-node","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_colorpicker_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_colorpicker_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_selection_info_vue_vue_type_style_index_0_id_4d8cbeae_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_selection_info_vue_vue_type_style_index_0_id_4d8cbeae_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","annotation_1","GameManager","selectedTool","oldShape","redrawInitiative","checkVisionSources","setMovementBlock","setIsToken","move","localPos","LoadComponent","registerHooks","Dashboard","vm","err","post","$router","_confirm_vue_vue_type_template_id_94ad04e6_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_confirm_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","keyup","_k","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_shapecontext_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_shapecontext_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_manager_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_manager_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_main_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_main_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_selectcontext_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_selectcontext_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","FOWPlayersLayer","skipPlayerFOW","maxLength","tokenId","closePath","grid-column","updateShape","grid-column-start","setToken","setVisionBlocker","setMovementBlocker","owner","updateOwner","removeOwner","tracker","removeTracker","updateAuraColour","updateAuraVisionSource","removeAura","updateAnnotation","selectionColor","selectionWidth","invalidateLight","serverShape","lsI","lbI","mbI","anI","annotationIndex","ownedIndex","ogOP","drawAuras","destinationIndex","oldIdx","sign","deltaY","coreVisible","mx","my","_select_vue_vue_type_template_id_c3ff5224___WEBPACK_IMPORTED_MODULE_0__","_select_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","_main_vue_vue_type_template_id_3430ab3a_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_main_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","node_1","BoundingVolume","totalNodes","buildData","orderedPrims","nodes","_a","Error","recursiveBuild","compact","node","createLeaf","centroidBbox","getMaxExtent","pMid","partitionedData","flattened","stopOnFirstHit","tMin","todoOffset","nodeNum","todo","secondChildOffset","flatten","myOffset","secondOffset","primitivesOffset","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_shapecontext_vue_vue_type_style_index_0_id_0dac178b_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_shapecontext_vue_vue_type_style_index_0_id_0dac178b_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","currentTarget","closePicker","z-index","updateColor","createtokendialog","$root","Logout","CoreStore","init","App_vue_1","router_1","config","productionTip","devtools","performance","$mount","props","Initiative","code","sessionUrl","_prompt_vue_vue_type_template_id_3c674586_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_prompt_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","_edit_dialog_vue_vue_type_template_id_6f3cf09f_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_edit_dialog_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_confirm_vue_vue_type_style_index_0_id_94ad04e6_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_confirm_vue_vue_type_style_index_0_id_94ad04e6_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","tempFill","Login","password","$route","statusText","span","openEditDialog","changeValue","maxvalue","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_game_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_game_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","ruler","diffsign","xdiff","ydiff","label","atan2","xmid","ymid","_modal_vue_vue_type_template_id_8b7717ce_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_modal_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_game_vue_vue_type_style_index_1_id_07e4e47f_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_game_vue_vue_type_style_index_1_id_07e4e47f_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","EditDialog","addEmpty","hadAnnotation","an","ownerIndex","tr","ok","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_edit_dialog_vue_vue_type_style_index_0_id_6f3cf09f_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_edit_dialog_vue_vue_type_style_index_0_id_6f3cf09f_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","_map_vue_vue_type_template_id_1ca85fc4___WEBPACK_IMPORTED_MODULE_0__","_map_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_select_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_select_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","_manager_vue_vue_type_template_id_8fda09aa___WEBPACK_IMPORTED_MODULE_0__","_manager_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_tools_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_tools_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_modal_vue_vue_type_style_index_0_id_8b7717ce_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_modal_vue_vue_type_style_index_0_id_8b7717ce_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","_tool_vue_vue_type_template_id_72c5bad7___WEBPACK_IMPORTED_MODULE_0__","_tool_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","vuedraggable_1","getActor","$off","actorId","order","show","option","effectIndex","syncEffect","_selection_info_vue_vue_type_template_id_4d8cbeae_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_selection_info_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","bvh_1","GameStore","selectedLayerIndex","boardInitialized","roomName","roomCreator","locationName","freeze","isDM","success","oldLoc","newLoc","getGridLayer","increase","unit_size","gridLayer","use_grid","full_fow","fow_opacity","fow_los","actualNote","context","getters","commit","Action","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_confirm_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_confirm_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","vision_source","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_contextMenu_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_contextMenu_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","_note_vue_vue_type_template_id_6c3d2628_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_note_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","_initiative_vue_vue_type_template_id_38ee733a_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_initiative_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","fow_1","fowplayers_1","grid_1","createLayer","layerInfo","zIndex","player_editable","setShapes","focusin","focusout","login","required","visibility","register","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_edit_dialog_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_edit_dialog_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","edit_dialog_vue_1","SelectionInfo","editDialog","ogValue","isNaN","edit-dialog","setRoomName","setRoomCreator","setInvitationCode","setDM","grid_colour","fow_colour","ruler_colour","setPanX","pan_x","setPanY","pan_y","setZoomFactor","zoom_factor","active_layer","setLocationName","setCenterPosition","setAssets","locationInfo","setLocations","innerHTML","resetLayerInfo","reset","setBoardInitialized","realShape"],"mappings":"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","file":"static/js/app.c3aabeba.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('modal',{attrs:{\"visible\":_vm.visible},on:{\"close\":function($event){_vm.visible = false}},scopedSlots:_vm._u([{key:\"header\",fn:function(m){return _c('div',{staticClass:\"modal-header\",attrs:{\"draggable\":\"true\"},on:{\"dragstart\":m.dragStart,\"dragend\":m.dragEnd}},[_vm._v(\"Create basic token\")])}}])},[_c('div',{staticClass:\"modal-body\"},[_c('label',{attrs:{\"for\":\"createtokendialog-text\"}},[_vm._v(\"Text\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.text),expression:\"text\"}],attrs:{\"type\":\"text\",\"id\":\"createtokendialog-name\"},domProps:{\"value\":(_vm.text)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.text=$event.target.value}}}),_c('label',[_vm._v(\"Colours\")]),_c('div',{staticClass:\"colours\"},[_c('span',[_vm._v(\"Fill:\")]),_c('color-picker',{attrs:{\"color\":_vm.fillColour},on:{\"update:color\":function($event){_vm.fillColour=$event}}}),_c('span',[_vm._v(\"Border:\")]),_c('color-picker',{attrs:{\"color\":_vm.borderColour},on:{\"update:color\":function($event){_vm.borderColour=$event}}})],1),_c('canvas',{ref:\"canvas\",attrs:{\"width\":\"100px\",\"height\":\"100px\"}})]),_c('div',{staticClass:\"modal-footer\"},[_c('button',{on:{\"click\":_vm.submit}},[_vm._v(\"Submit\")])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"339cf1e4-vue-loader-template\\\"}!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./createtoken_modal.vue?vue&type=template&id=254e8bcf&scoped=true&\"","import { GlobalPoint, LocalPoint } from \"@/game/geom\";\r\nimport { BoundingRect } from \"@/game/shapes/boundingrect\";\r\nimport { Shape } from \"@/game/shapes/shape\";\r\nimport { g2l } from \"@/game/units\";\r\n\r\nexport class Text extends Shape {\r\n    type = \"text\";\r\n    text: string;\r\n    font: string;\r\n    angle: number;\r\n    constructor(\r\n        position: GlobalPoint,\r\n        text: string,\r\n        font: string,\r\n        angle?: number,\r\n        fillColour?: string,\r\n        strokeColour?: string,\r\n        uuid?: string,\r\n    ) {\r\n        super(position, fillColour, strokeColour, uuid);\r\n        this.text = text;\r\n        this.font = font;\r\n        this.angle = angle || 0;\r\n    }\r\n    asDict() {\r\n        return Object.assign(this.getBaseDict(), {\r\n            text: this.text,\r\n            font: this.font,\r\n            angle: this.angle,\r\n        });\r\n    }\r\n    getBoundingBox(): BoundingRect {\r\n        return new BoundingRect(this.refPoint, 5, 5); // TODO: fix this bounding box\r\n    }\r\n    draw(ctx: CanvasRenderingContext2D) {\r\n        super.draw(ctx);\r\n        ctx.font = this.font;\r\n        ctx.fillStyle = this.fillColour;\r\n        ctx.save();\r\n        const dest = g2l(this.refPoint);\r\n        ctx.translate(dest.x, dest.y);\r\n        ctx.rotate(this.angle);\r\n        ctx.textAlign = \"center\";\r\n        this.getLines(ctx).map(line => ctx.fillText(line.text, line.x, line.y));\r\n        ctx.restore();\r\n    }\r\n    contains(point: GlobalPoint): boolean {\r\n        return false; // TODO\r\n    }\r\n\r\n    center(): GlobalPoint;\r\n    center(centerPoint: GlobalPoint): void;\r\n    center(centerPoint?: GlobalPoint): GlobalPoint | void {} // TODO\r\n    getCorner(point: GlobalPoint): string | undefined {\r\n        return \"\";\r\n    } // TODO\r\n    visibleInCanvas(canvas: HTMLCanvasElement): boolean {\r\n        return true;\r\n    } // TODO\r\n    snapToGrid(): void {}\r\n    resizeToGrid(): void {}\r\n    resize(resizeDir: string, point: LocalPoint): void {}\r\n\r\n    getMaxHeight(ctx: CanvasRenderingContext2D) {\r\n        const lines = this.getLines(ctx);\r\n        const lineHeight = 30;\r\n        return lineHeight * lines.length;\r\n    }\r\n\r\n    getMaxWidth(ctx: CanvasRenderingContext2D) {\r\n        const lines = this.getLines(ctx);\r\n        const widths = lines.map(line => ctx.measureText(line.text).width);\r\n        return Math.max(...widths);\r\n    }\r\n\r\n    private getLines(ctx: CanvasRenderingContext2D) {\r\n        const lines = this.text.split(\"\\n\");\r\n        const allLines: { text: string; x: number; y: number }[] = [];\r\n        const maxWidth = ctx.canvas.width;\r\n        const lineHeight = 30;\r\n        const x = 0; // this.refPoint.x;\r\n        let y = 0; // this.refPoint.y;\r\n\r\n        for (const line of lines) {\r\n            let targetLine = \"\";\r\n            const words = line.split(\" \");\r\n            for (const word of words) {\r\n                const testLine = targetLine + word + \" \";\r\n                const metrics = ctx.measureText(testLine);\r\n                const testWidth = metrics.width;\r\n                if (testWidth > maxWidth) {\r\n                    ctx.fillText(targetLine, x, y);\r\n                    allLines.push({ text: targetLine, x, y });\r\n                    targetLine = word + \" \";\r\n                    y += lineHeight;\r\n                } else {\r\n                    targetLine = testLine;\r\n                }\r\n            }\r\n            allLines.push({ text: targetLine, x, y });\r\n            y += lineHeight;\r\n        }\r\n        return allLines;\r\n    }\r\n}\r\n","import { render, staticRenderFns } from \"./shapecontext.vue?vue&type=template&id=0dac178b&scoped=true&\"\nimport script from \"./shapecontext.vue?vue&type=script&lang=ts&\"\nexport * from \"./shapecontext.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./shapecontext.vue?vue&type=style&index=0&id=0dac178b&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0dac178b\",\n  null\n  \n)\n\ncomponent.options.__file = \"shapecontext.vue\"\nexport default component.exports","import mod from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport tinycolor from \"tinycolor2\";\r\nimport Vue from \"vue\";\r\nimport Component from \"vue-class-component\";\r\n\r\nimport { Chrome } from \"vue-color\";\r\nimport { Prop } from \"vue-property-decorator\";\r\n\r\n@Component<ColorPicker>({\r\n    components: {\r\n        \"chrome-picker\": Chrome,\r\n    },\r\n})\r\nexport default class ColorPicker extends Vue {\r\n    @Prop(String) color!: string;\r\n\r\n    display = false;\r\n    left = 0;\r\n    top = 0;\r\n    transparent = false;\r\n\r\n    mounted() {\r\n        this.transparent = (<any>this.$refs.chromePicker).val.rgba.a === 0;\r\n        this.setPosition();\r\n    }\r\n\r\n    open() {\r\n        if (this.display) return; // click on the picker itself\r\n        this.setPosition();\r\n        this.display = true;\r\n        this.$nextTick(() => this.$children[0].$el.focus());\r\n    }\r\n    updateColor(value: { rgba: { r: number; g: number; b: number; a: number } }) {\r\n        this.transparent = value.rgba.a === 0;\r\n        const newColor = tinycolor(value.rgba).toRgbString();\r\n        this.$emit(\"update:color\", newColor);\r\n        this.$emit(\"input\", newColor);\r\n    }\r\n    closePicker() {\r\n        this.display = false;\r\n        this.$emit(\"change\", this.color);\r\n    }\r\n    setPosition() {\r\n        const rect = this.$el.getBoundingClientRect();\r\n        // 224 is the width of the picker, 242 the height\r\n        if (rect.right + 224 > window.innerWidth) this.left = rect.left - 224;\r\n        else this.left = rect.right;\r\n        if (rect.bottom + 242 > window.innerHeight) this.top = rect.top - 242;\r\n        else this.top = rect.bottom;\r\n    }\r\n}\r\n","import { render, staticRenderFns } from \"./game.vue?vue&type=template&id=07e4e47f&scoped=true&\"\nimport script from \"./game.vue?vue&type=script&lang=ts&\"\nexport * from \"./game.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./game.vue?vue&type=style&index=0&lang=css&\"\nimport style1 from \"./game.vue?vue&type=style&index=1&id=07e4e47f&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"07e4e47f\",\n  null\n  \n)\n\ncomponent.options.__file = \"game.vue\"\nexport default component.exports","import io from \"socket.io-client\";\r\nimport { Route } from \"vue-router\";\r\n\r\nexport const socket = io(location.protocol + \"//\" + location.host + \"/planarally\", { autoConnect: false });\r\n\r\nexport function createConnection(route: Route) {\r\n    socket.io.opts.query = `user=${route.params.creator}&room=${route.params.room}`;\r\n    socket.connect();\r\n}\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{attrs:{\"id\":\"toolselect\"}},[_c('ul',_vm._l((_vm.tools),function(tool){return (!_vm.dmTools.includes(tool) || _vm.IS_DM)?_c('li',{key:tool,ref:tool + '-selector',refInFor:true,class:{'tool-selected': _vm.currentTool === tool},on:{\"click\":function($event){_vm.currentTool = tool}}},[_c('a',{attrs:{\"href\":\"#\"}},[_vm._v(_vm._s(tool))])]):_vm._e()}))]),_c('div',[[_c('select-tool',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.currentTool === 'Select'),expression:\"currentTool === 'Select'\"}],ref:\"selectTool\"}),_c('pan-tool',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.currentTool === 'Pan'),expression:\"currentTool === 'Pan'\"}]}),_c('keep-alive',[_c('draw-tool',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.currentTool === 'Draw'),expression:\"currentTool === 'Draw'\"}]})],1),_c('ruler-tool',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.currentTool === 'Ruler'),expression:\"currentTool === 'Ruler'\"}]}),_c('map-tool',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.currentTool === 'Map'),expression:\"currentTool === 'Map'\"}]}),_c('shape-menu',{ref:\"shapecontext\"}),_c('createtoken-dialog',{ref:\"createtokendialog\"})]],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"339cf1e4-vue-loader-template\\\"}!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tools.vue?vue&type=template&id=18f17c2d&scoped=true&\"","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport Vue from \"vue\";\r\nimport Component from \"vue-class-component\";\r\n\r\nimport AssetContextMenu from \"@/assetManager/contextMenu.vue\";\r\nimport ConfirmDialog from \"@/core/components/modals/confirm.vue\";\r\nimport Prompt from \"@/core/components/modals/prompt.vue\";\r\n\r\nimport { socket } from \"@/assetManager/socket\";\r\nimport { assetStore } from \"@/assetManager/store\";\r\nimport { Asset } from \"@/core/comm/types\";\r\nimport { uuidv4 } from \"@/core/utils\";\r\n\r\n@Component({\r\n    components: {\r\n        Prompt,\r\n        ConfirmDialog,\r\n        AssetContextMenu,\r\n    },\r\n    beforeRouteEnter(to, from, next) {\r\n        socket.connect();\r\n        next();\r\n    },\r\n    beforeRouteLeave(to, from, next) {\r\n        socket.disconnect();\r\n        next();\r\n    },\r\n})\r\nexport default class AssetManager extends Vue {\r\n    path: number[] = [];\r\n    draggingSelection = false;\r\n\r\n    get folders(): number[] {\r\n        return assetStore.folders;\r\n    }\r\n\r\n    get files(): number[] {\r\n        return assetStore.files;\r\n    }\r\n\r\n    get selected(): number[] {\r\n        return assetStore.selected;\r\n    }\r\n\r\n    get idMap() {\r\n        return assetStore.idMap;\r\n    }\r\n\r\n    get currentFolder(): number {\r\n        if (this.path.length) return this.path[this.path.length - 1];\r\n        return assetStore.root;\r\n    }\r\n    get parentFolder(): number {\r\n        let parent = this.path[this.path.length - 2];\r\n        if (parent === undefined) parent = assetStore.root;\r\n        return parent;\r\n    }\r\n    get firstSelectedFile(): Asset | null {\r\n        for (const sel of assetStore.selected) {\r\n            if (assetStore.idMap.get(sel)!.file_hash) {\r\n                return assetStore.idMap.get(sel)!;\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n    changeDirectory(nextFolder: number) {\r\n        if (nextFolder < 0) this.path.pop();\r\n        else this.path.push(nextFolder);\r\n        assetStore.clearSelected();\r\n        socket.emit(\"Folder.Get\", this.currentFolder);\r\n    }\r\n    createDirectory() {\r\n        const name = window.prompt(\"New folder name\");\r\n        if (name !== null) {\r\n            socket.emit(\"Folder.Create\", { name, parent: this.currentFolder });\r\n        }\r\n    }\r\n    moveInode(inode: number, target: number) {\r\n        if (assetStore.isFile(inode)) assetStore.files.splice(assetStore.files.indexOf(inode), 1);\r\n        else assetStore.folders.splice(assetStore.folders.indexOf(inode), 1);\r\n        assetStore.idMap.delete(inode);\r\n        socket.emit(\"Inode.Move\", { inode, target });\r\n    }\r\n    select(event: MouseEvent, inode: number) {\r\n        if (event.shiftKey && assetStore.selected.length > 0) {\r\n            const inodes = [...assetStore.files, ...assetStore.folders];\r\n            const start = inodes.indexOf(assetStore.selected[assetStore.selected.length - 1]);\r\n            const end = inodes.indexOf(inode);\r\n            for (let i = start; i !== end; start < end ? i++ : i--) assetStore.selected.push(inodes[i]);\r\n            assetStore.selected.push(inodes[end]);\r\n        } else {\r\n            if (!event.ctrlKey) {\r\n                assetStore.clearSelected();\r\n            }\r\n            assetStore.selected.push(inode);\r\n        }\r\n    }\r\n    startDrag(event: DragEvent, file: number) {\r\n        if (event.dataTransfer === null) return;\r\n        event.dataTransfer.setData(\"Hack\", \"ittyHack\");\r\n        event.dataTransfer.dropEffect = \"move\";\r\n        if (!assetStore.selected.includes(file)) assetStore.selected.push(file);\r\n        this.draggingSelection = true;\r\n    }\r\n    moveDrag(event: DragEvent) {\r\n        if ((<HTMLElement>event.target).classList.contains(\"folder\"))\r\n            (<HTMLElement>event.target).classList.add(\"inode-selected\");\r\n    }\r\n    leaveDrag(event: DragEvent) {\r\n        if ((<HTMLElement>event.target).classList.contains(\"folder\"))\r\n            (<HTMLElement>event.target).classList.remove(\"inode-selected\");\r\n    }\r\n    stopDrag(event: DragEvent, target: number) {\r\n        (<HTMLElement>event.target).classList.remove(\"inode-selected\");\r\n        if (this.draggingSelection) {\r\n            if (\r\n                (target === assetStore.root || assetStore.folders.includes(target)) &&\r\n                !assetStore.selected.includes(target)\r\n            ) {\r\n                for (const inode of assetStore.selected) {\r\n                    this.moveInode(inode, target);\r\n                }\r\n            }\r\n            assetStore.clearSelected();\r\n        } else if (event.dataTransfer && event.dataTransfer.files.length > 0) {\r\n            this.upload(event.dataTransfer.files, target);\r\n        }\r\n        this.draggingSelection = false;\r\n    }\r\n    prepareUpload() {\r\n        document.getElementById(\"files\")!.click();\r\n    }\r\n    upload(fls?: FileList, target?: number) {\r\n        const files = (<HTMLInputElement>document.getElementById(\"files\")!).files;\r\n        if (fls === undefined) {\r\n            if (files) fls = files;\r\n            else return;\r\n        }\r\n        if (target === undefined) target = this.currentFolder;\r\n        const CHUNK_SIZE = 100000;\r\n        for (const file of fls) {\r\n            const uuid = uuidv4();\r\n            const slices = Math.ceil(file.size / CHUNK_SIZE);\r\n            for (let slice = 0; slice < slices; slice++) {\r\n                const fr = new FileReader();\r\n                fr.readAsArrayBuffer(\r\n                    file.slice(\r\n                        slice * CHUNK_SIZE,\r\n                        slice * CHUNK_SIZE + Math.min(CHUNK_SIZE, file.size - slice * CHUNK_SIZE),\r\n                    ),\r\n                );\r\n                fr.onload = e => {\r\n                    socket.emit(\"Asset.Upload\", {\r\n                        name: file.name,\r\n                        directory: target,\r\n                        data: fr.result,\r\n                        slice,\r\n                        totalSlices: slices,\r\n                        uuid,\r\n                    });\r\n                };\r\n            }\r\n        }\r\n    }\r\n}\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.visible)?_c('div',{staticClass:\"ContextMenu\",style:({left:_vm.left, top:_vm.top}),attrs:{\"tabindex\":\"-1\"},on:{\"blur\":function($event){_vm.$emit('close')}}},[_c('ul',[_vm._t(\"default\")],2)]):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"339cf1e4-vue-loader-template\\\"}!../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./contextmenu.vue?vue&type=template&id=3cf88d4e&\"","import { render, staticRenderFns } from \"./asset_node.vue?vue&type=template&id=03d8fe61&scoped=true&\"\nimport script from \"./asset_node.vue?vue&type=script&lang=ts&\"\nexport * from \"./asset_node.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./asset_node.vue?vue&type=style&index=0&id=03d8fe61&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"03d8fe61\",\n  null\n  \n)\n\ncomponent.options.__file = \"asset_node.vue\"\nexport default component.exports","import { render, staticRenderFns } from \"./login.vue?vue&type=template&id=51240a1f&scoped=true&\"\nimport script from \"./login.vue?vue&type=script&lang=ts&\"\nexport * from \"./login.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./login.vue?vue&type=style&index=0&id=51240a1f&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"51240a1f\",\n  null\n  \n)\n\ncomponent.options.__file = \"login.vue\"\nexport default component.exports","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tools.vue?vue&type=style&index=0&id=18f17c2d&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tools.vue?vue&type=style&index=0&id=18f17c2d&scoped=true&lang=css&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./colorpicker.vue?vue&type=style&index=0&id=a45a1816&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./colorpicker.vue?vue&type=style&index=0&id=a45a1816&scoped=true&lang=css&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tool.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tool.vue?vue&type=style&index=0&lang=css&\"","import * as tinycolor from \"tinycolor2\";\r\n\r\nimport { calcFontScale } from \"@/core/utils\";\r\nimport { InitiativeData } from \"@/game/comm/types/general\";\r\nimport { ServerCircularToken } from \"@/game/comm/types/shapes\";\r\nimport { GlobalPoint } from \"@/game/geom\";\r\nimport { Circle } from \"@/game/shapes/circle\";\r\nimport { gameStore } from \"@/game/store\";\r\nimport { g2l, g2lz } from \"@/game/units\";\r\n\r\nexport class CircularToken extends Circle {\r\n    type = \"circulartoken\";\r\n    text: string;\r\n    font: string;\r\n    constructor(\r\n        center: GlobalPoint,\r\n        r: number,\r\n        text: string,\r\n        font: string,\r\n        fillColour?: string,\r\n        strokeColour?: string,\r\n        uuid?: string,\r\n    ) {\r\n        super(center, r, fillColour, strokeColour, uuid);\r\n        this.text = text;\r\n        this.font = font;\r\n    }\r\n    asDict(): ServerCircularToken {\r\n        return Object.assign(this.getBaseDict(), {\r\n            radius: this.r,\r\n            text: this.text,\r\n            font: this.font,\r\n        });\r\n    }\r\n    fromDict(data: ServerCircularToken) {\r\n        super.fromDict(data);\r\n        this.r = data.radius;\r\n        this.text = data.text;\r\n        this.font = data.font;\r\n    }\r\n    draw(ctx: CanvasRenderingContext2D) {\r\n        super.draw(ctx);\r\n        ctx.font = this.font;\r\n        ctx.save();\r\n        const dest = g2l(this.center());\r\n        ctx.textAlign = \"center\";\r\n        ctx.textBaseline = \"middle\";\r\n        const xs = calcFontScale(ctx, this.text, g2lz(this.r), g2lz(this.r));\r\n        const ys = 0;\r\n        ctx.transform(xs, ys, -ys, xs, dest.x, dest.y);\r\n        ctx.fillStyle = tinycolor.mostReadable(this.fillColour, [\"#000\", \"#fff\"]).toHexString();\r\n        ctx.fillText(this.text, 0, 0);\r\n        ctx.restore();\r\n    }\r\n    getInitiativeRepr(): InitiativeData {\r\n        return {\r\n            uuid: this.uuid,\r\n            visible: !gameStore.IS_DM,\r\n            group: false,\r\n            source: this.name === \"\" || this.name === \"Unknown shape\" ? this.text : this.name,\r\n            has_img: false,\r\n            effects: [],\r\n            index: Infinity,\r\n        };\r\n    }\r\n}\r\n","import { GlobalPoint, LocalPoint } from \"@/game/geom\";\r\nimport { Layer } from \"@/game/layers/layer\";\r\nimport { layerManager } from \"@/game/layers/manager\";\r\nimport { Rect } from \"@/game/shapes/rect\";\r\nimport { Text } from \"@/game/shapes/text\";\r\nimport { gameStore } from \"@/game/store\";\r\nimport { l2g } from \"@/game/units\";\r\n\r\nexport class AnnotationManager {\r\n    annotationText: Text;\r\n    annotationRect: Rect;\r\n    layer: Layer | undefined;\r\n    shown: boolean = false;\r\n\r\n    constructor() {\r\n        const origin = new GlobalPoint(0, 0);\r\n        this.annotationText = new Text(origin, \"\", \"bold 20px serif\", 0, \"rgba(230, 230, 230, 1)\");\r\n        this.annotationRect = new Rect(origin, 0, 0, \"rgba(0, 0, 0, 0.6)\");\r\n    }\r\n\r\n    setActiveText(text: string) {\r\n        if (this.layer === undefined) {\r\n            if (layerManager.hasLayer(\"draw\")) {\r\n                this.layer = layerManager.getLayer(\"draw\")!;\r\n                this.layer.addShape(this.annotationRect, false);\r\n                this.layer.addShape(this.annotationText, false);\r\n            } else {\r\n                console.warn(\"There is no draw layer to draw annotations on!\");\r\n                return;\r\n            }\r\n        }\r\n        this.shown = text !== \"\";\r\n        this.annotationText.refPoint = l2g(new LocalPoint(this.layer.canvas.width / 2, 50));\r\n        this.annotationText.text = text;\r\n        const width = this.shown ? this.annotationText.getMaxWidth(this.layer.ctx) + 10 : 0;\r\n        const height = this.shown ? this.annotationText.getMaxHeight(this.layer.ctx) + 10 : 0;\r\n        this.annotationRect.refPoint = l2g(new LocalPoint(this.layer.canvas.width / 2 - width / 2, 30));\r\n        this.annotationRect.w = width / gameStore.zoomFactor;\r\n        this.annotationRect.h = height / gameStore.zoomFactor;\r\n        this.layer.invalidate(true);\r\n    }\r\n}\r\n","import { render, staticRenderFns } from \"./menu.vue?vue&type=template&id=56348a0e&scoped=true&\"\nimport script from \"./menu.vue?vue&type=script&lang=ts&\"\nexport * from \"./menu.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./menu.vue?vue&type=style&index=0&id=56348a0e&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"56348a0e\",\n  null\n  \n)\n\ncomponent.options.__file = \"menu.vue\"\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"menuContainer\"}},[_c('div',{ref:\"rm\",style:({\n              left: _vm.visible.settings ? '200px' : '0',\n              top: _vm.visible.locations ? '100px' : '0'\n          }),attrs:{\"id\":\"radialmenu\"}},[_c('div',{staticClass:\"rm-wrapper\"},[_c('div',{staticClass:\"rm-toggler\"},[_c('ul',{staticClass:\"rm-list\",class:{ 'rm-list-dm': _vm.IS_DM }},[(_vm.IS_DM)?_c('li',{staticClass:\"rm-item\",attrs:{\"id\":\"rm-locations\"},on:{\"click\":function($event){_vm.visible.locations = !_vm.visible.locations}}},[_vm._m(0)]):_vm._e(),_c('li',{staticClass:\"rm-item\",attrs:{\"id\":\"rm-settings\"},on:{\"click\":function($event){_vm.visible.settings = !_vm.visible.settings}}},[_vm._m(1)])])]),_vm._m(2)])]),_c('transition',{attrs:{\"name\":\"settings\"},on:{\"enter\":function($event){_vm.$refs.rm.style.transition = 'left 500ms'}}},[(_vm.visible.settings)?_c('div',{ref:\"settings\",attrs:{\"id\":\"menu\"},on:{\"click\":_vm.settingsClick}},[_c('div',{staticStyle:{\"width\":\"200px\",\"height\":\"90%\",\"overflow-y\":\"auto\",\"overflow-x\":\"hidden\"}},[(_vm.IS_DM)?[_c('button',{staticClass:\"accordion\"},[_vm._v(\"Assets\")]),_c('div',{staticClass:\"accordion-panel\"},[_c('a',{staticClass:\"actionButton\",attrs:{\"href\":\"/assets\",\"target\":\"blank\"}},[_c('i',{staticClass:\"fas fa-external-link-alt\"})]),_c('div',{staticClass:\"directory\",attrs:{\"id\":\"menu-tokens\"}},[_c('asset-node',{attrs:{\"asset\":_vm.assets}})],1)]),_c('button',{staticClass:\"accordion\"},[_vm._v(\"Notes\")]),_c('div',{staticClass:\"accordion-panel\"},[_c('div',{staticClass:\"accordion-subpanel\",attrs:{\"id\":\"menu-notes\"}},[_c('a',{staticClass:\"actionButton\",on:{\"click\":_vm.createNote}},[_c('i',{staticClass:\"far fa-plus-square\"})]),_vm._l((_vm.notes),function(note){return _c('div',{key:note.uuid,staticStyle:{\"cursor\":\"pointer\"},on:{\"click\":function($event){_vm.openNote(note)}}},[_vm._v(_vm._s(note.title || \"[?]\"))])}),(!_vm.notes.length)?_c('div',[_vm._v(\"No notes\")]):_vm._e()],2)]),_c('button',{staticClass:\"accordion\"},[_vm._v(\"DM Options\")]),_c('div',{staticClass:\"accordion-panel\"},[_c('div',{staticClass:\"accordion-subpanel\"},[_c('label',{attrs:{\"for\":\"useGridInput\"}},[_vm._v(\"Use grid:\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.useGrid),expression:\"useGrid\"}],attrs:{\"id\":\"useGridInput\",\"type\":\"checkbox\",\"checked\":\"checked\"},domProps:{\"checked\":Array.isArray(_vm.useGrid)?_vm._i(_vm.useGrid,null)>-1:(_vm.useGrid)},on:{\"change\":function($event){var $$a=_vm.useGrid,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.useGrid=$$a.concat([$$v]))}else{$$i>-1&&(_vm.useGrid=$$a.slice(0,$$i).concat($$a.slice($$i+1)))}}else{_vm.useGrid=$$c}}}}),_c('label',{attrs:{\"for\":\"useFOWInput\"}},[_vm._v(\"Fill entire canvas with FOW:\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.fullFOW),expression:\"fullFOW\"}],attrs:{\"id\":\"useFOWInput\",\"type\":\"checkbox\"},domProps:{\"checked\":Array.isArray(_vm.fullFOW)?_vm._i(_vm.fullFOW,null)>-1:(_vm.fullFOW)},on:{\"change\":function($event){var $$a=_vm.fullFOW,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.fullFOW=$$a.concat([$$v]))}else{$$i>-1&&(_vm.fullFOW=$$a.slice(0,$$i).concat($$a.slice($$i+1)))}}else{_vm.fullFOW=$$c}}}}),_c('label',{attrs:{\"for\":\"fowOpacity\"}},[_vm._v(\"FOW opacity:\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.fowOpacity),expression:\"fowOpacity\",modifiers:{\"number\":true}}],attrs:{\"id\":\"fowOpacity\",\"type\":\"number\",\"min\":\"0\",\"max\":\"1\",\"step\":\"0.1\"},domProps:{\"value\":(_vm.fowOpacity)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.fowOpacity=_vm._n($event.target.value)},\"blur\":function($event){_vm.$forceUpdate()}}}),_c('label',{attrs:{\"for\":\"fowLOS\"}},[_vm._v(\"Only show lights in LoS:\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.fowLOS),expression:\"fowLOS\"}],attrs:{\"id\":\"fowLOS\",\"type\":\"checkbox\"},domProps:{\"checked\":Array.isArray(_vm.fowLOS)?_vm._i(_vm.fowLOS,null)>-1:(_vm.fowLOS)},on:{\"change\":function($event){var $$a=_vm.fowLOS,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.fowLOS=$$a.concat([$$v]))}else{$$i>-1&&(_vm.fowLOS=$$a.slice(0,$$i).concat($$a.slice($$i+1)))}}else{_vm.fowLOS=$$c}}}}),_c('label',{attrs:{\"for\":\"unitSizeInput\"}},[_vm._v(\"Unit Size (in ft.):\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.unitSize),expression:\"unitSize\",modifiers:{\"number\":true}}],attrs:{\"id\":\"unitSizeInput\",\"type\":\"number\"},domProps:{\"value\":(_vm.unitSize)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.unitSize=_vm._n($event.target.value)},\"blur\":function($event){_vm.$forceUpdate()}}}),_c('label',{attrs:{\"for\":\"gridSizeInput\"}},[_vm._v(\"Grid Size (in pixels):\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.gridSize),expression:\"gridSize\",modifiers:{\"number\":true}}],attrs:{\"id\":\"gridSizeInput\",\"type\":\"number\",\"min\":\"0\"},domProps:{\"value\":(_vm.gridSize)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.gridSize=_vm._n($event.target.value)},\"blur\":function($event){_vm.$forceUpdate()}}}),_c('label',{attrs:{\"for\":\"invitation\"}},[_vm._v(\"Invitation Code:\")]),_c('input',{attrs:{\"id\":\"invitation\",\"type\":\"text\",\"readonly\":\"readonly\"},domProps:{\"value\":_vm.invitationCode}})])])]:_vm._e(),_c('button',{staticClass:\"accordion\"},[_vm._v(\"Client Options\")]),_c('div',{staticClass:\"accordion-panel\"},[_c('div',{staticClass:\"accordion-subpanel\"},[_c('label',{attrs:{\"for\":\"gridColour\"}},[_vm._v(\"Grid Colour:\")]),_c('color-picker',{attrs:{\"id\":\"gridColour\",\"color\":_vm.gridColour},on:{\"update:color\":function($event){_vm.gridColour=$event}}}),_c('label',{attrs:{\"for\":\"fowColour\"}},[_vm._v(\"FOW Colour:\")]),_c('color-picker',{attrs:{\"id\":\"fowColour\",\"color\":_vm.fowColour},on:{\"update:color\":function($event){_vm.fowColour=$event}}}),_c('label',{attrs:{\"for\":\"rulerColour\"}},[_vm._v(\"Ruler Colour:\")]),_c('color-picker',{attrs:{\"id\":\"rulerColour\",\"color\":_vm.rulerColour},on:{\"update:color\":function($event){_vm.rulerColour=$event}}})],1)])],2),_c('router-link',{staticClass:\"accordion\",staticStyle:{\"text-decoration\":\"none\",\"display\":\"inline-block\",\"position\":\"absolute\",\"bottom\":\"0\"},attrs:{\"to\":\"/dashboard\"}},[_vm._v(\"Exit\")])],1):_vm._e()]),_c('transition',{attrs:{\"name\":\"locations\"},on:{\"enter\":function($event){_vm.$refs.rm.style.transition = 'top 500ms'}}},[(_vm.IS_DM && _vm.visible.locations)?_c('div',{attrs:{\"id\":\"locations-menu\"}},[_c('div',[_vm._l((_vm.locations),function(location){return _c('div',{key:location,on:{\"click\":function($event){_vm.changeLocation(location)}}},[_vm._v(_vm._s(location))])}),_c('div',{on:{\"click\":_vm.createLocation}},[_c('i',{staticClass:\"fas fa-plus\"})])],2)]):_vm._e()]),_c('img',{attrs:{\"id\":\"dragImage\"}})],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('a',{attrs:{\"href\":\"#\"}},[_c('i',{staticClass:\"far fa-compass\"})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('a',{attrs:{\"href\":\"#\"}},[_c('i',{staticClass:\"fas fa-cog\"})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',{staticClass:\"rm-topper\"},[_c('i',{staticClass:\"icon-share-alt\"})])}]\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"339cf1e4-vue-loader-template\\\"}!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./menu.vue?vue&type=template&id=56348a0e&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ContextMenu',{attrs:{\"visible\":_vm.visible,\"left\":_vm.x + 'px',\"top\":_vm.y + 'px'},on:{\"close\":_vm.close}},[(_vm.IS_DM)?_c('li',{on:{\"click\":_vm.bringPlayers}},[_vm._v(\"Bring players\")]):_vm._e(),_c('li',{on:{\"click\":_vm.createToken}},[_vm._v(\"Create basic token\")]),_c('li',{on:{\"click\":_vm.showInitiative}},[_vm._v(\"Show initiative\")])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"339cf1e4-vue-loader-template\\\"}!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./selectcontext.vue?vue&type=template&id=6d5bd46a&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('modal',{attrs:{\"visible\":_vm.visible},on:{\"close\":_vm.close},scopedSlots:_vm._u([{key:\"header\",fn:function(m){return _c('div',{staticClass:\"modal-header\",attrs:{\"draggable\":\"true\"},on:{\"dragstart\":m.dragStart,\"dragend\":m.dragEnd}},[_vm._v(_vm._s(_vm.title))])}}])},[_c('div',{staticClass:\"modal-body\"},[_c('button',{ref:\"confirm\",on:{\"click\":_vm.confirm}},[_vm._v(_vm._s(_vm.yes))]),(!!_vm.no)?_c('button',{on:{\"click\":_vm.deny}},[_vm._v(_vm._s(_vm.no))]):_vm._e()])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"339cf1e4-vue-loader-template\\\"}!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./confirm.vue?vue&type=template&id=94ad04e6&scoped=true&\"","import { render, staticRenderFns } from \"./contextmenu.vue?vue&type=template&id=3cf88d4e&\"\nimport script from \"./contextmenu.vue?vue&type=script&lang=ts&\"\nexport * from \"./contextmenu.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./contextmenu.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"contextmenu.vue\"\nexport default component.exports","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./login.vue?vue&type=style&index=0&id=51240a1f&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./login.vue?vue&type=style&index=0&id=51240a1f&scoped=true&lang=css&\"","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./note.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./note.vue?vue&type=script&lang=ts&\"","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--12-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./login.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--12-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./login.vue?vue&type=script&lang=ts&\"","import {\r\n    ServerAsset,\r\n    ServerCircle,\r\n    ServerCircularToken,\r\n    ServerLine,\r\n    ServerMultiLine,\r\n    ServerRect,\r\n    ServerShape,\r\n    ServerText,\r\n} from \"@/game/comm/types/shapes\";\r\nimport { GlobalPoint } from \"@/game/geom\";\r\nimport { layerManager } from \"@/game/layers/manager\";\r\nimport { Asset } from \"@/game/shapes/asset\";\r\nimport { Circle } from \"@/game/shapes/circle\";\r\nimport { CircularToken } from \"@/game/shapes/circulartoken\";\r\nimport { Line } from \"@/game/shapes/line\";\r\nimport { MultiLine } from \"@/game/shapes/multiline\";\r\nimport { Rect } from \"@/game/shapes/rect\";\r\nimport { Shape } from \"@/game/shapes/shape\";\r\nimport { Text } from \"@/game/shapes/text\";\r\n\r\nexport function createShapeFromDict(shape: ServerShape, dummy?: boolean) {\r\n    // TODO: is this dummy stuff actually needed, do we ever want to return the local shape?\r\n    if (dummy === undefined) dummy = false;\r\n    if (!dummy && layerManager.UUIDMap.has(shape.uuid)) return layerManager.UUIDMap.get(shape.uuid);\r\n\r\n    let sh: Shape;\r\n\r\n    // A fromJSON and toJSON on Shape would be cleaner but ts does not allow for static abstracts so yeah.\r\n\r\n    // Shape Type specifics\r\n\r\n    const refPoint = new GlobalPoint(shape.x, shape.y);\r\n    if (shape.type_ === \"rect\") {\r\n        const rect = <ServerRect>shape;\r\n        sh = new Rect(refPoint, rect.width, rect.height, rect.fill_colour, rect.stroke_colour, rect.uuid);\r\n    } else if (shape.type_ === \"circle\") {\r\n        const circ = <ServerCircle>shape;\r\n        sh = new Circle(refPoint, circ.radius, circ.fill_colour, circ.stroke_colour, circ.uuid);\r\n    } else if (shape.type_ === \"circulartoken\") {\r\n        const token = <ServerCircularToken>shape;\r\n        sh = new CircularToken(\r\n            refPoint,\r\n            token.radius,\r\n            token.text,\r\n            token.font,\r\n            token.fill_colour,\r\n            token.stroke_colour,\r\n            token.uuid,\r\n        );\r\n    } else if (shape.type_ === \"line\") {\r\n        const line = <ServerLine>shape;\r\n        sh = new Line(refPoint, new GlobalPoint(line.x2, line.y2), line.line_width, line.stroke_colour, line.uuid);\r\n    } else if (shape.type_ === \"multiline\") {\r\n        const multiline = <ServerMultiLine>shape;\r\n        sh = new MultiLine(\r\n            refPoint,\r\n            multiline.points.map(p => new GlobalPoint(p.x, p.y)),\r\n            multiline.line_width,\r\n            multiline.stroke_colour,\r\n            multiline.uuid,\r\n        );\r\n    } else if (shape.type_ === \"text\") {\r\n        const text = <ServerText>shape;\r\n        sh = new Text(refPoint, text.text, text.font, text.angle, text.fill_colour, text.stroke_colour, text.uuid);\r\n    } else if (shape.type_ === \"assetrect\") {\r\n        const asset = <ServerAsset>shape;\r\n        const img = new Image(asset.width, asset.height);\r\n        if (asset.src.startsWith(\"http\")) img.src = new URL(asset.src).pathname;\r\n        else img.src = asset.src;\r\n        sh = new Asset(img, refPoint, asset.width, asset.height, asset.uuid);\r\n        img.onload = () => {\r\n            layerManager.getLayer(shape.layer)!.invalidate(false);\r\n        };\r\n    } else {\r\n        return undefined;\r\n    }\r\n    sh.fromDict(shape);\r\n    return sh;\r\n}\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"main\"},on:{\"mouseleave\":_vm.mouseleave}},[_c('menu-bar'),_c('div',{attrs:{\"id\":\"board\"}},[(_vm.ready.manager)?[_c('tool-bar',{ref:\"tools\"})]:_vm._e(),_c('div',{attrs:{\"id\":\"layers\"},on:{\"mousedown\":_vm.mousedown,\"mouseup\":_vm.mouseup,\"mousemove\":_vm.mousemove,\"contextmenu\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.contextmenu($event)},\"dragover\":function($event){$event.preventDefault();},\"drop\":_vm.drop}}),(_vm.layers.length > 1)?_c('div',{attrs:{\"id\":\"layerselect\"}},[_c('ul',_vm._l((_vm.layers),function(layer){return _c('li',{key:layer.name,class:{ 'layer-selected': layer === _vm.selectedLayer },on:{\"click\":function($event){_vm.selectLayer(layer)}}},[_c('a',{attrs:{\"href\":\"#\"}},[_vm._v(_vm._s(layer))])])}))]):_vm._e()],2),_c('selection-info',{ref:\"selectionInfo\"}),_c('initiative-dialog',{ref:\"initiative\",attrs:{\"id\":\"initiativedialog\"}}),_c('note-dialog',{ref:\"note\"}),_c('zoom-slider',{attrs:{\"id\":\"zoomer\",\"height\":6,\"width\":200,\"min\":0.1,\"max\":5.0,\"interval\":0.1,\"dot-width\":8,\"dot-height\":20,\"tooltip-dir\":'bottom',\"tooltip\":'hover',\"formatter\":_vm.zoomFactor.toFixed(1),\"slider-style\":{'border-radius': '15%'},\"bg-style\":{'background-color': '#fff', 'box-shadow': '0.5px 0.5px 3px 1px rgba(0, 0, 0, .36)'},\"process-style\":{'background-color': '#fff'}},model:{value:(_vm.zoomFactor),callback:function ($$v) {_vm.zoomFactor=$$v},expression:\"zoomFactor\"}}),_c('prompt-dialog',{ref:\"prompt\"}),_c('confirm-dialog',{ref:\"confirm\"})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"339cf1e4-vue-loader-template\\\"}!../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./game.vue?vue&type=template&id=07e4e47f&scoped=true&\"","import tinycolor from \"tinycolor2\";\r\n\r\nimport { uuidv4 } from \"@/core/utils\";\r\nimport { socket } from \"@/game/api/socket\";\r\nimport { aurasFromServer, aurasToServer } from \"@/game/comm/conversion/aura\";\r\nimport { InitiativeData } from \"@/game/comm/types/general\";\r\nimport { ServerShape } from \"@/game/comm/types/shapes\";\r\nimport { GlobalPoint, LocalPoint } from \"@/game/geom\";\r\nimport { layerManager } from \"@/game/layers/manager\";\r\nimport { BoundingRect } from \"@/game/shapes/boundingrect\";\r\nimport { gameStore } from \"@/game/store\";\r\nimport { g2l, g2lr, g2lx, g2ly, g2lz } from \"@/game/units\";\r\n\r\nexport abstract class Shape {\r\n    // Used to create class instance from server shape data\r\n    abstract type: string;\r\n    // The unique ID of this shape\r\n    uuid: string;\r\n    // The layer the shape is currently on\r\n    layer!: string;\r\n\r\n    // A reference point regarding that specific shape's structure\r\n    refPoint: GlobalPoint;\r\n\r\n    // Fill colour of the shape\r\n    fillColour: string = \"#000\";\r\n    strokeColour: string = \"rgba(0,0,0,0)\";\r\n    // The optional name associated with the shape\r\n    name = \"Unknown shape\";\r\n\r\n    // Associated trackers/auras/owners\r\n    trackers: Tracker[] = [];\r\n    auras: Aura[] = [];\r\n    owners: string[] = [];\r\n\r\n    // Block light sources\r\n    visionObstruction = false;\r\n    // Prevent shapes from overlapping with this shape\r\n    movementObstruction = false;\r\n    // Does this shape represent a playable token\r\n    isToken = false;\r\n    // Show a highlight box\r\n    showHighlight = false;\r\n\r\n    // Mouseover annotation\r\n    annotation: string = \"\";\r\n\r\n    // Draw modus to use\r\n    globalCompositeOperation: string = \"source-over\";\r\n\r\n    // Additional options for specialized uses\r\n    options: Map<string, any> = new Map();\r\n\r\n    constructor(refPoint: GlobalPoint, fillColour?: string, strokeColour?: string, uuid?: string) {\r\n        this.refPoint = refPoint;\r\n        this.uuid = uuid || uuidv4();\r\n        if (fillColour !== undefined) this.fillColour = fillColour;\r\n        if (strokeColour !== undefined) this.strokeColour = strokeColour;\r\n    }\r\n\r\n    abstract getBoundingBox(): BoundingRect;\r\n\r\n    // If inWorldCoord is\r\n    abstract contains(point: GlobalPoint): boolean;\r\n\r\n    abstract center(): GlobalPoint;\r\n    abstract center(centerPoint: GlobalPoint): void;\r\n    abstract getCorner(point: GlobalPoint): string | undefined;\r\n    visibleInCanvas(canvas: HTMLCanvasElement): boolean {\r\n        // for (const aura of this.auras) {\r\n        //     if (aura.value > 0) {\r\n        //         const auraCircle = new Circle(this.center(), aura.value);\r\n        //         if (auraCircle.visibleInCanvas(canvas)) return true;\r\n        //     }\r\n        // }\r\n        return false;\r\n    }\r\n\r\n    // Code to snap a shape to the grid\r\n    // This is shape dependent as the shape refPoints are shape specific in\r\n    abstract snapToGrid(): void;\r\n    abstract resizeToGrid(): void;\r\n    abstract resize(resizeDir: string, point: LocalPoint): void;\r\n\r\n    invalidate(skipLightUpdate: boolean) {\r\n        const l = layerManager.getLayer(this.layer);\r\n        if (l) l.invalidate(skipLightUpdate);\r\n    }\r\n\r\n    checkVisionSources() {\r\n        const self = this;\r\n        const obstructionIndex = gameStore.visionBlockers.indexOf(this.uuid);\r\n        let changeBV = false;\r\n        if (this.visionObstruction && obstructionIndex === -1) {\r\n            gameStore.visionBlockers.push(this.uuid);\r\n            changeBV = true;\r\n        } else if (!this.visionObstruction && obstructionIndex >= 0) {\r\n            gameStore.visionBlockers.splice(obstructionIndex, 1);\r\n            changeBV = true;\r\n        }\r\n        if (changeBV) gameStore.recalculateBV();\r\n\r\n        // Check if the visionsource auras are in the gameManager\r\n        this.auras.forEach(au => {\r\n            const ls = gameStore.visionSources;\r\n            const i = ls.findIndex(o => o.aura === au.uuid);\r\n            if (au.visionSource && i === -1) {\r\n                ls.push({ shape: self.uuid, aura: au.uuid });\r\n            } else if (!au.visionSource && i >= 0) {\r\n                ls.splice(i, 1);\r\n            }\r\n        });\r\n        // Check if anything in the gameManager referencing this shape is in fact still a visionsource\r\n        for (let i = gameStore.visionSources.length - 1; i >= 0; i--) {\r\n            const ls = gameStore.visionSources[i];\r\n            if (ls.shape === self.uuid) {\r\n                if (!self.auras.some(a => a.uuid === ls.aura && a.visionSource)) gameStore.visionSources.splice(i, 1);\r\n            }\r\n        }\r\n    }\r\n\r\n    setMovementBlock(blocksMovement: boolean) {\r\n        this.movementObstruction = blocksMovement || false;\r\n        const obstructionIndex = gameStore.movementblockers.indexOf(this.uuid);\r\n        if (this.movementObstruction && obstructionIndex === -1) gameStore.movementblockers.push(this.uuid);\r\n        else if (!this.movementObstruction && obstructionIndex >= 0)\r\n            gameStore.movementblockers.splice(obstructionIndex, 1);\r\n    }\r\n\r\n    setIsToken(isToken: boolean) {\r\n        this.isToken = isToken;\r\n        if (this.ownedBy()) {\r\n            const i = gameStore.ownedtokens.indexOf(this.uuid);\r\n            if (this.isToken && i === -1) gameStore.ownedtokens.push(this.uuid);\r\n            else if (!this.isToken && i >= 0) gameStore.ownedtokens.splice(i, 1);\r\n        }\r\n    }\r\n\r\n    ownedBy(username?: string) {\r\n        if (username === undefined) username = gameStore.username;\r\n        return gameStore.IS_DM || this.owners.includes(username);\r\n    }\r\n\r\n    abstract asDict(): ServerShape;\r\n    getBaseDict(): ServerShape {\r\n        return {\r\n            type_: this.type,\r\n            uuid: this.uuid,\r\n            x: this.refPoint.x,\r\n            y: this.refPoint.y,\r\n            layer: this.layer,\r\n            draw_operator: this.globalCompositeOperation,\r\n            movement_obstruction: this.movementObstruction,\r\n            vision_obstruction: this.visionObstruction,\r\n            auras: aurasToServer(this.auras),\r\n            trackers: this.trackers,\r\n            owners: this.owners,\r\n            fill_colour: this.fillColour,\r\n            stroke_colour: this.strokeColour,\r\n            name: this.name,\r\n            annotation: this.annotation,\r\n            is_token: this.isToken,\r\n            options: JSON.stringify([...this.options]),\r\n        };\r\n    }\r\n    fromDict(data: ServerShape) {\r\n        this.layer = data.layer;\r\n        this.globalCompositeOperation = data.draw_operator;\r\n        this.movementObstruction = data.movement_obstruction;\r\n        this.visionObstruction = data.vision_obstruction;\r\n        this.auras = aurasFromServer(data.auras);\r\n        this.trackers = data.trackers;\r\n        this.owners = data.owners;\r\n        this.isToken = data.is_token;\r\n        if (data.annotation) this.annotation = data.annotation;\r\n        if (data.name) this.name = data.name;\r\n        if (data.options) this.options = new Map(JSON.parse(data.options));\r\n    }\r\n\r\n    draw(ctx: CanvasRenderingContext2D) {\r\n        if (this.globalCompositeOperation !== undefined) ctx.globalCompositeOperation = this.globalCompositeOperation;\r\n        else ctx.globalCompositeOperation = \"source-over\";\r\n        if (this.showHighlight) {\r\n            const bbox = this.getBoundingBox();\r\n            ctx.strokeStyle = \"red\";\r\n            ctx.strokeRect(g2lx(bbox.topLeft.x) - 5, g2ly(bbox.topLeft.y) - 5, g2lz(bbox.w) + 10, g2lz(bbox.h) + 10);\r\n        }\r\n    }\r\n\r\n    drawAuras(ctx: CanvasRenderingContext2D) {\r\n        for (const aura of this.auras) {\r\n            if (aura.value === 0 && aura.dim === 0) return;\r\n            ctx.beginPath();\r\n\r\n            const loc = g2l(this.center());\r\n            const innerRange = g2lr(aura.value + aura.dim);\r\n\r\n            if (aura.dim === 0) ctx.fillStyle = aura.colour;\r\n            else {\r\n                const gradient = ctx.createRadialGradient(\r\n                    loc.x,\r\n                    loc.y,\r\n                    g2lr(aura.value),\r\n                    loc.x,\r\n                    loc.y,\r\n                    g2lr(aura.value + aura.dim),\r\n                );\r\n                const tc = tinycolor(aura.colour);\r\n                ctx.fillStyle = gradient;\r\n                gradient.addColorStop(0, aura.colour);\r\n                gradient.addColorStop(1, tc.setAlpha(0).toRgbString());\r\n            }\r\n            if (!aura.visionSource || aura.lastPath === undefined) {\r\n                ctx.arc(loc.x, loc.y, innerRange, 0, 2 * Math.PI);\r\n                ctx.fill();\r\n            } else {\r\n                try {\r\n                    ctx.fill(aura.lastPath);\r\n                } catch (e) {\r\n                    ctx.arc(loc.x, loc.y, innerRange, 0, 2 * Math.PI);\r\n                    ctx.fill();\r\n                    console.warn(e);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    getInitiativeRepr(): InitiativeData {\r\n        return {\r\n            uuid: this.uuid,\r\n            visible: !gameStore.IS_DM,\r\n            group: false,\r\n            source: this.name,\r\n            has_img: false,\r\n            effects: [],\r\n            index: Infinity,\r\n        };\r\n    }\r\n\r\n    moveLayer(layer: string, sync: boolean) {\r\n        const oldLayer = layerManager.getLayer(this.layer);\r\n        const newLayer = layerManager.getLayer(layer);\r\n        if (oldLayer === undefined || newLayer === undefined) return;\r\n        this.layer = layer;\r\n        // Update layer shapes\r\n        oldLayer.shapes.splice(oldLayer.shapes.indexOf(this), 1);\r\n        newLayer.shapes.push(this);\r\n        // Revalidate layers  (light should at most be redone once)\r\n        oldLayer.invalidate(true);\r\n        newLayer.invalidate(false);\r\n        // Sync!\r\n        if (sync) socket.emit(\"Shape.Layer.Change\", { uuid: this.uuid, layer });\r\n    }\r\n}\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./prompt.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./prompt.vue?vue&type=script&lang=ts&\"","\n\n\n\n\r\nimport SelectContext from \"@/game/ui/tools/selectcontext.vue\";\r\nimport Tool from \"@/game/ui/tools/tool.vue\";\r\nimport SelectionInfo from \"../selection/selection_info.vue\";\r\n\r\nimport { getRef } from \"@/core/utils\";\r\nimport { socket } from \"@/game/api/socket\";\r\nimport { GlobalPoint, LocalPoint, Ray, Vector } from \"@/game/geom\";\r\nimport { layerManager } from \"@/game/layers/manager\";\r\nimport { Rect } from \"@/game/shapes/rect\";\r\nimport { gameStore } from \"@/game/store\";\r\nimport { calculateDelta } from \"@/game/ui/tools/utils\";\r\nimport { g2l, g2lx, g2ly, l2g } from \"@/game/units\";\r\nimport { getMouse } from \"@/game/utils\";\r\nimport Component from \"vue-class-component\";\r\n\r\nexport enum SelectOperations {\r\n    Noop,\r\n    Resize,\r\n    Drag,\r\n    GroupSelect,\r\n}\r\n\r\nconst start = new GlobalPoint(-1000, -1000);\r\n\r\n@Component({\r\n    components: {\r\n        SelectContext,\r\n    },\r\n})\r\nexport default class SelectTool extends Tool {\r\n    name = \"Select\";\r\n    showContextMenu = false;\r\n    active = false;\r\n\r\n    mode = SelectOperations.Noop;\r\n    resizeDirection = \"\";\r\n    deltaChanged = false;\r\n    // Because we never drag from the asset's (0, 0) coord and want a smoother drag experience\r\n    // we keep track of the actual offset within the asset.\r\n    dragRay = new Ray<LocalPoint>(new LocalPoint(0, 0), new Vector(0, 0));\r\n    selectionStartPoint = start;\r\n    selectionHelper = new Rect(start, 0, 0);\r\n    created() {\r\n        this.selectionHelper.globalCompositeOperation = \"source-over\";\r\n    }\r\n    onMouseDown(event: MouseEvent) {\r\n        const layer = layerManager.getLayer();\r\n        if (layer === undefined) {\r\n            console.log(\"No active layer!\");\r\n            return;\r\n        }\r\n\r\n        if (!this.selectionHelper.owners.includes(gameStore.username)) {\r\n            this.selectionHelper.owners.push(gameStore.username);\r\n        }\r\n\r\n        const mouse = getMouse(event);\r\n        const globalMouse = l2g(mouse);\r\n\r\n        let hit = false;\r\n        // The selectionStack allows for lower positioned objects that are selected to have precedence during overlap.\r\n        let selectionStack;\r\n        if (!layer.selection.length) selectionStack = layer.shapes;\r\n        else selectionStack = layer.shapes.concat(layer.selection);\r\n        for (let i = selectionStack.length - 1; i >= 0; i--) {\r\n            const shape = selectionStack[i];\r\n\r\n            if (!shape.ownedBy()) continue;\r\n\r\n            const corner = shape.getBoundingBox().getCorner(globalMouse);\r\n\r\n            // Resize case, a corner is selected\r\n            if (corner !== undefined) {\r\n                layer.selection = [shape];\r\n                getRef<SelectionInfo>(\"selectionInfo\").shape = shape;\r\n                this.mode = SelectOperations.Resize;\r\n                this.resizeDirection = corner;\r\n                layer.invalidate(true);\r\n                hit = true;\r\n                break;\r\n\r\n                // Drag case, a shape is selected\r\n            } else if (shape.contains(globalMouse)) {\r\n                const selection = shape;\r\n                if (layer.selection.indexOf(selection) === -1) {\r\n                    layer.selection = [selection];\r\n                    getRef<SelectionInfo>(\"selectionInfo\").shape = selection;\r\n                }\r\n                this.mode = SelectOperations.Drag;\r\n                const localRefPoint = g2l(selection.refPoint);\r\n                this.dragRay = new Ray<LocalPoint>(localRefPoint, mouse.subtract(localRefPoint));\r\n                layer.invalidate(true);\r\n                hit = true;\r\n                break;\r\n            }\r\n        }\r\n\r\n        // GroupSelect case, draw a selection box to select multiple shapes\r\n        if (!hit) {\r\n            this.mode = SelectOperations.GroupSelect;\r\n            for (const selection of layer.selection) getRef<SelectionInfo>(\"selectionInfo\").shape = selection;\r\n\r\n            this.selectionStartPoint = globalMouse;\r\n\r\n            this.selectionHelper.refPoint = this.selectionStartPoint;\r\n            this.selectionHelper.w = 0;\r\n            this.selectionHelper.h = 0;\r\n\r\n            layer.selection = [this.selectionHelper];\r\n            layer.invalidate(true);\r\n        }\r\n        this.active = true;\r\n    }\r\n    onMouseMove(event: MouseEvent) {\r\n        // if (!this.active) return;   we require mousemove for the resize cursor\r\n        const layer = layerManager.getLayer();\r\n        if (layer === undefined) {\r\n            console.log(\"No active layer!\");\r\n            return;\r\n        }\r\n        const mouse = getMouse(event);\r\n        const globalMouse = l2g(mouse);\r\n        this.deltaChanged = false;\r\n\r\n        if (this.mode === SelectOperations.GroupSelect) {\r\n            // Currently draw on active layer\r\n            const endPoint = globalMouse;\r\n\r\n            this.selectionHelper.w = Math.abs(endPoint.x - this.selectionStartPoint.x);\r\n            this.selectionHelper.h = Math.abs(endPoint.y - this.selectionStartPoint.y);\r\n            this.selectionHelper.refPoint = new GlobalPoint(\r\n                Math.min(this.selectionStartPoint.x, endPoint.x),\r\n                Math.min(this.selectionStartPoint.y, endPoint.y),\r\n            );\r\n            layer.invalidate(true);\r\n        } else if (layer.selection.length) {\r\n            const og = g2l(layer.selection[layer.selection.length - 1].refPoint);\r\n            const origin = og.add(this.dragRay.direction);\r\n            let delta = mouse.subtract(origin).multiply(1 / gameStore.zoomFactor);\r\n            const ogDelta = delta;\r\n            if (this.mode === SelectOperations.Drag) {\r\n                // If we are on the tokens layer do a movement block check.\r\n                if (layer.name === \"tokens\" && !(event.shiftKey && gameStore.IS_DM)) {\r\n                    for (const sel of layer.selection) {\r\n                        if (sel.uuid === this.selectionHelper.uuid) continue; // the selection helper should not be treated as a real shape.\r\n                        delta = calculateDelta(delta, sel);\r\n                        if (delta !== ogDelta) this.deltaChanged = true;\r\n                    }\r\n                }\r\n                // Actually apply the delta on all shapes\r\n                for (const sel of layer.selection) {\r\n                    sel.refPoint = sel.refPoint.add(delta);\r\n                    if (sel !== this.selectionHelper) {\r\n                        if (sel.visionObstruction) gameStore.recalculateBV();\r\n                        socket.emit(\"Shape.Update\", { shape: sel.asDict(), redraw: true, temporary: true });\r\n                    }\r\n                }\r\n                layer.invalidate(false);\r\n            } else if (this.mode === SelectOperations.Resize) {\r\n                for (const sel of layer.selection) {\r\n                    sel.resize(this.resizeDirection, mouse);\r\n                    if (sel !== this.selectionHelper) {\r\n                        if (sel.visionObstruction) gameStore.recalculateBV();\r\n                        socket.emit(\"Shape.Update\", { shape: sel.asDict(), redraw: true, temporary: true });\r\n                    }\r\n                    layer.invalidate(false);\r\n                }\r\n            } else {\r\n                for (const sel of layer.selection) {\r\n                    const bb = sel.getBoundingBox();\r\n                    const gm = globalMouse;\r\n                    if (bb.inCorner(gm, \"nw\")) {\r\n                        document.body.style.cursor = \"nw-resize\";\r\n                    } else if (bb.inCorner(gm, \"ne\")) {\r\n                        document.body.style.cursor = \"ne-resize\";\r\n                    } else if (bb.inCorner(gm, \"se\")) {\r\n                        document.body.style.cursor = \"se-resize\";\r\n                    } else if (bb.inCorner(gm, \"sw\")) {\r\n                        document.body.style.cursor = \"sw-resize\";\r\n                    } else {\r\n                        document.body.style.cursor = \"default\";\r\n                    }\r\n                }\r\n            }\r\n        } else {\r\n            document.body.style.cursor = \"default\";\r\n        }\r\n    }\r\n    onMouseUp(e: MouseEvent): void {\r\n        if (!this.active) return;\r\n        if (layerManager.getLayer() === undefined) {\r\n            console.log(\"No active layer!\");\r\n            return;\r\n        }\r\n        const layer = layerManager.getLayer()!;\r\n\r\n        if (this.mode === SelectOperations.GroupSelect) {\r\n            layer.clearSelection();\r\n            layer.shapes.forEach(shape => {\r\n                if (shape === this.selectionHelper) return;\r\n                const bbox = shape.getBoundingBox();\r\n                if (!shape.ownedBy()) return;\r\n                if (\r\n                    this.selectionHelper!.refPoint.x <= bbox.topRight.x &&\r\n                    this.selectionHelper!.refPoint.x + this.selectionHelper!.w >= bbox.topLeft.x &&\r\n                    this.selectionHelper!.refPoint.y <= bbox.botLeft.y &&\r\n                    this.selectionHelper!.refPoint.y + this.selectionHelper!.h >= bbox.topLeft.y\r\n                ) {\r\n                    layer.selection.push(shape);\r\n                }\r\n            });\r\n\r\n            // Push the selection helper as the last element of the selection\r\n            // This makes sure that it will be the first one to be hit in the hit detection onMouseDown\r\n            if (layer.selection.length > 0) layer.selection.push(this.selectionHelper);\r\n\r\n            layer.invalidate(true);\r\n        } else if (layer.selection.length) {\r\n            layer.selection.forEach(sel => {\r\n                if (this.mode === SelectOperations.Drag) {\r\n                    if (\r\n                        this.dragRay.origin!.x === g2lx(sel.refPoint.x) &&\r\n                        this.dragRay.origin!.y === g2ly(sel.refPoint.y)\r\n                    )\r\n                        return;\r\n\r\n                    if (gameStore.useGrid && !e.altKey && !this.deltaChanged) {\r\n                        sel.snapToGrid();\r\n                    }\r\n\r\n                    if (sel !== this.selectionHelper) {\r\n                        if (sel.visionObstruction) gameStore.recalculateBV();\r\n                        socket.emit(\"Shape.Update\", { shape: sel.asDict(), redraw: true, temporary: false });\r\n                    }\r\n                    layer.invalidate(false);\r\n                }\r\n                if (this.mode === SelectOperations.Resize) {\r\n                    if (gameStore.useGrid && !e.altKey) {\r\n                        sel.resizeToGrid();\r\n                    }\r\n                    if (sel !== this.selectionHelper) {\r\n                        if (sel.visionObstruction) gameStore.recalculateBV();\r\n                        socket.emit(\"Shape.Update\", { shape: sel.asDict(), redraw: true, temporary: false });\r\n                    }\r\n                    layer.invalidate(false);\r\n                }\r\n            });\r\n        }\r\n        this.mode = SelectOperations.Noop;\r\n        this.active = false;\r\n    }\r\n    onContextMenu(event: MouseEvent) {\r\n        if (layerManager.getLayer() === undefined) {\r\n            console.log(\"No active layer!\");\r\n            return;\r\n        }\r\n        const layer = layerManager.getLayer()!;\r\n        const mouse = getMouse(event);\r\n        const globalMouse = l2g(mouse);\r\n\r\n        for (const shape of layer.selection) {\r\n            if (shape.contains(globalMouse)) {\r\n                layer.selection = [shape];\r\n                getRef<SelectionInfo>(\"selectionInfo\").shape = shape;\r\n                layer.invalidate(true);\r\n                (<any>this.$parent.$refs.shapecontext).open(event, shape);\r\n                return;\r\n            }\r\n        }\r\n        (<any>this.$refs.selectcontext).open(event);\r\n    }\r\n}\r\n","import { Ray, Vector } from \"@/game/geom\";\r\nimport { layerManager } from \"@/game/layers/manager\";\r\nimport { Shape } from \"@/game/shapes/shape\";\r\nimport { gameStore } from \"@/game/store\";\r\n\r\n// First go through each shape in the selection and see if the delta has to be truncated due to movement blockers\r\n\r\n// This is definitely super convoluted and inefficient but I was tired and really wanted the smooth wall sliding collision stuff to work\r\n// And it does now, so hey \\_()_/\r\nexport function calculateDelta(delta: Vector, sel: Shape, done?: string[]) {\r\n    if (done === undefined) done = [];\r\n    const ogSelBBox = sel.getBoundingBox();\r\n    const newSelBBox = ogSelBBox.offset(delta);\r\n    let refine = false;\r\n    for (const movementBlocker of gameStore.movementblockers) {\r\n        if (done.includes(movementBlocker)) continue;\r\n        const blocker = layerManager.UUIDMap.get(movementBlocker)!;\r\n        const blockerBBox = blocker.getBoundingBox();\r\n        let found = blockerBBox.intersectsWithInner(newSelBBox);\r\n        if (!found) {\r\n            // This is an edge case, precalculating the rays is not worth in this case.\r\n            const ray = Ray.fromPoints(ogSelBBox.topLeft.add(delta.normalize()), newSelBBox.topLeft);\r\n            const invDir = ray.direction.inverse();\r\n            const dirIsNegative = [invDir.x < 0, invDir.y < 0];\r\n            found = blockerBBox.intersectP(ray, invDir, dirIsNegative).hit;\r\n        }\r\n        // Check if the bounding box of our destination would intersect with the bounding box of the movementblocker\r\n        if (found) {\r\n            const bCenter = blockerBBox.center();\r\n            const sCenter = ogSelBBox.center();\r\n\r\n            const d = sCenter.subtract(bCenter);\r\n            const ux = new Vector(1, 0);\r\n            const uy = new Vector(0, 1);\r\n            let dx = d.dot(ux);\r\n            let dy = d.dot(uy);\r\n            if (dx > blockerBBox.w / 2) dx = blockerBBox.w / 2;\r\n            if (dx < -blockerBBox.w / 2) dx = -blockerBBox.w / 2;\r\n            if (dy > blockerBBox.h / 2) dy = blockerBBox.h / 2;\r\n            if (dy < -blockerBBox.h / 2) dy = -blockerBBox.h / 2;\r\n\r\n            // Closest point / intersection point between the two bboxes.  Not the delta intersect!\r\n            const p = bCenter.add(ux.multiply(dx)).add(uy.multiply(dy));\r\n\r\n            if (p.x === ogSelBBox.topLeft.x || p.x === ogSelBBox.topRight.x) delta = new Vector(0, delta.y);\r\n            else if (p.y === ogSelBBox.topLeft.y || p.y === ogSelBBox.botLeft.y) delta = new Vector(delta.x, 0);\r\n            else {\r\n                if (p.x < ogSelBBox.topLeft.x) delta = new Vector(p.x - ogSelBBox.topLeft.x, delta.y);\r\n                else if (p.x > ogSelBBox.topRight.x) delta = new Vector(p.x - ogSelBBox.topRight.x, delta.y);\r\n                else if (p.y < ogSelBBox.topLeft.y) delta = new Vector(delta.x, p.y - ogSelBBox.topLeft.y);\r\n                else if (p.y > ogSelBBox.botLeft.y) delta = new Vector(delta.x, p.y - ogSelBBox.botLeft.y);\r\n            }\r\n            refine = true;\r\n            done.push(movementBlocker);\r\n            break;\r\n        }\r\n    }\r\n    if (refine) delta = calculateDelta(delta, sel, done);\r\n    return delta;\r\n}\r\n","import { socket } from \"@/game/api/socket\";\r\nimport { gameStore } from \"@/game/store\";\r\n\r\nexport function sendClientOptions() {\r\n    socket.emit(\"Client.Options.Set\", {\r\n        locationOptions: {\r\n            panX: gameStore.panX,\r\n            panY: gameStore.panY,\r\n            zoomFactor: gameStore.zoomFactor,\r\n        },\r\n    });\r\n}\r\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport Vue from \"vue\";\r\nimport Component from \"vue-class-component\";\r\nimport { Prop } from \"vue-property-decorator\";\r\n\r\nimport { AssetFile, AssetList } from \"@/core/comm/types\";\r\nimport { alphSort } from \"@/core/utils\";\r\n\r\n@Component\r\nexport default class AssetNode extends Vue {\r\n    @Prop() asset!: AssetList;\r\n\r\n    showImage = null;\r\n    get folders(): string[] {\r\n        return Object.keys(this.asset)\r\n            .filter(el => ![\"__files\"].includes(el))\r\n            .sort(alphSort);\r\n    }\r\n\r\n    get files(): AssetFile[] {\r\n        if (this.asset.__files)\r\n            return (<AssetFile[]>this.asset.__files)\r\n                .concat()\r\n                .sort((a, b) => (a.name.toLowerCase() > b.name.toLowerCase() ? 1 : -1));\r\n        return [];\r\n    }\r\n\r\n    toggle(event: { target: HTMLElement }) {\r\n        // tslint:disable-next-line:prefer-for-of\r\n        for (let i = 0; i < event.target.children.length; i++) {\r\n            const el = <HTMLElement>event.target.children[i];\r\n            el.style.display = el.style.display === \"\" ? \"block\" : \"\";\r\n        }\r\n    }\r\n\r\n    dragStart(event: DragEvent, imageSource: string) {\r\n        if (event === null || event.dataTransfer === null) return;\r\n        const img = (<HTMLElement>event.target).querySelector(\".preview\")!;\r\n        event.dataTransfer.setDragImage(img, 0, 0);\r\n        event.dataTransfer.setData(\"text/plain\", imageSource);\r\n    }\r\n}\r\n","// import Vuex from \"vuex\";\r\nimport { getModule, Module, Mutation, VuexModule } from \"vuex-module-decorators\";\r\n\r\nimport { Asset } from \"@/core/comm/types\";\r\nimport { rootStore } from \"@/store\";\r\n\r\nexport interface AssetState {\r\n    root: number;\r\n    files: number[];\r\n    folders: number[];\r\n    idMap: Map<number, Asset>;\r\n    selected: number[];\r\n}\r\n\r\n@Module({ dynamic: true, store: rootStore, name: \"assets\", namespaced: true })\r\nclass AssetStore extends VuexModule {\r\n    root = -1;\r\n    files: number[] = [];\r\n    folders: number[] = [];\r\n    idMap: Map<number, Asset> = new Map();\r\n    selected: number[] = [];\r\n\r\n    @Mutation\r\n    clear() {\r\n        this.folders = [];\r\n        this.files = [];\r\n    }\r\n\r\n    @Mutation\r\n    clearSelected() {\r\n        this.selected = [];\r\n    }\r\n\r\n    @Mutation\r\n    setRoot(root: number) {\r\n        this.root = root;\r\n    }\r\n\r\n    @Mutation\r\n    isFile(inode: number): boolean {\r\n        return this.files.includes(inode);\r\n    }\r\n}\r\n\r\nexport const assetStore = getModule(AssetStore);\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./contextmenu.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./contextmenu.vue?vue&type=script&lang=ts&\"","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport Vue from \"vue\";\r\nimport Component from \"vue-class-component\";\r\n\r\nimport ContextMenu from \"@/core/components/contextmenu.vue\";\r\nimport Initiative from \"@/game/ui/initiative.vue\";\r\n\r\nimport { getRef } from \"@/core/utils\";\r\nimport { layerManager } from \"@/game/layers/manager\";\r\nimport { Shape } from \"@/game/shapes/shape\";\r\nimport { gameStore } from \"@/game/store\";\r\n\r\n@Component({\r\n    components: {\r\n        ContextMenu,\r\n    },\r\n})\r\nexport default class ShapeContext extends Vue {\r\n    visible = false;\r\n    x = 0;\r\n    y = 0;\r\n    shape: Shape | null = null;\r\n    get activeLayer(): string {\r\n        const layer = layerManager.getLayer();\r\n        return layer === undefined ? \"\" : layer.name;\r\n    }\r\n    open(event: MouseEvent, shape: Shape) {\r\n        this.visible = true;\r\n        this.x = event.pageX;\r\n        this.y = event.pageY;\r\n        this.shape = shape;\r\n        this.$nextTick(() => this.$children[0].$el.focus());\r\n    }\r\n    close() {\r\n        this.visible = false;\r\n        this.shape = null;\r\n    }\r\n    getLayers() {\r\n        return layerManager.layers.filter(l => l.selectable && (gameStore.IS_DM || l.playerEditable));\r\n    }\r\n    getActiveLayer() {\r\n        return layerManager.getLayer();\r\n    }\r\n    getInitiativeWord() {\r\n        if (this.shape === null) return \"\";\r\n        return getRef<Initiative>(\"initiative\").contains(this.shape.uuid) ? \"Show\" : \"Add\";\r\n    }\r\n    setLayer(newLayer: string) {\r\n        if (this.shape === null) return;\r\n        this.shape.moveLayer(newLayer, true);\r\n        this.close();\r\n    }\r\n    moveToBack() {\r\n        if (this.shape === null) return;\r\n        const layer = this.getActiveLayer()!;\r\n        layer.moveShapeOrder(this.shape, 0, true);\r\n        this.close();\r\n    }\r\n    moveToFront() {\r\n        if (this.shape === null) return;\r\n        const layer = this.getActiveLayer()!;\r\n        layer.moveShapeOrder(this.shape, layer.shapes.length - 1, true);\r\n        this.close();\r\n    }\r\n    addInitiative() {\r\n        if (this.shape === null) return;\r\n        const initiative = getRef<Initiative>(\"initiative\");\r\n        if (!initiative.contains(this.shape.uuid)) initiative.addInitiative(this.shape.getInitiativeRepr());\r\n        initiative.visible = true;\r\n        this.close();\r\n    }\r\n}\r\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./main.vue?vue&type=style&index=0&id=3430ab3a&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./main.vue?vue&type=style&index=0&id=3430ab3a&scoped=true&lang=css&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./draw.vue?vue&type=style&index=0&id=67a6ef9a&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./draw.vue?vue&type=style&index=0&id=67a6ef9a&scoped=true&lang=css&\"","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./map.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./map.vue?vue&type=script&lang=ts&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.selected)?_c('div',{staticClass:\"tool-detail\",style:({'--detailRight': _vm.detailRight, '--detailArrow': _vm.detailArrow})},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.IS_DM),expression:\"IS_DM\"}]},[_vm._v(\"Mode\")]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.IS_DM),expression:\"IS_DM\"}],staticClass:\"selectgroup\"},_vm._l((_vm.modes),function(mode){return _c('div',{key:mode,staticClass:\"option\",class:{'option-selected': _vm.modeSelect === mode},on:{\"click\":function($event){_vm.modeSelect = mode}}},[_vm._v(_vm._s(mode))])})),_c('div',[_vm._v(\"Shape\")]),_c('div',{staticClass:\"selectgroup\"},_vm._l((_vm.shapes),function(shape){return _c('div',{key:shape,staticClass:\"option\",class:{'option-selected': _vm.shapeSelect === shape},on:{\"click\":function($event){_vm.shapeSelect = shape}}},[_c('i',{staticClass:\"fas\",class:'fa-' + shape})])})),_c('div',[_vm._v(\"Colours\")]),_c('div',{staticClass:\"selectgroup\"},[_c('color-picker',{staticClass:\"option\",attrs:{\"color\":_vm.fillColour},on:{\"update:color\":function($event){_vm.fillColour=$event}}}),_c('color-picker',{staticClass:\"option\",attrs:{\"color\":_vm.borderColour},on:{\"update:color\":function($event){_vm.borderColour=$event}}})],1),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.shapeSelect === 'paint-brush'),expression:\"shapeSelect === 'paint-brush'\"}]},[_vm._v(\"Brush size\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.brushSize),expression:\"brushSize\"},{name:\"show\",rawName:\"v-show\",value:(_vm.shapeSelect === 'paint-brush'),expression:\"shapeSelect === 'paint-brush'\"}],staticStyle:{\"max-width\":\"100px\"},attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.brushSize)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.brushSize=$event.target.value}}})]):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"339cf1e4-vue-loader-template\\\"}!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./draw.vue?vue&type=template&id=67a6ef9a&scoped=true&\"","import { Layer } from \"@/game/layers/layer\";\r\nimport { gameStore } from \"@/game/store\";\r\n\r\nexport class GridLayer extends Layer {\r\n    invalidate(): void {\r\n        this.valid = false;\r\n    }\r\n    draw(doClear?: boolean): void {\r\n        if (!this.valid) {\r\n            this.drawGrid();\r\n        }\r\n    }\r\n    drawGrid(): void {\r\n        const ctx = this.ctx;\r\n        this.clear();\r\n        ctx.beginPath();\r\n\r\n        const gs = gameStore.gridSize;\r\n\r\n        for (let i = 0; i < this.width; i += gs * gameStore.zoomFactor) {\r\n            ctx.moveTo(i + (gameStore.panX % gs) * gameStore.zoomFactor, 0);\r\n            ctx.lineTo(i + (gameStore.panX % gs) * gameStore.zoomFactor, this.height);\r\n            ctx.moveTo(0, i + (gameStore.panY % gs) * gameStore.zoomFactor);\r\n            ctx.lineTo(this.width, i + (gameStore.panY % gs) * gameStore.zoomFactor);\r\n        }\r\n\r\n        ctx.strokeStyle = gameStore.gridColour;\r\n        ctx.lineWidth = 1;\r\n        ctx.stroke();\r\n        this.valid = true;\r\n    }\r\n}\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ul',[_vm._l((_vm.folders),function(folder){return _c('li',{key:folder,staticClass:\"folder\",on:{\"click\":function($event){$event.stopPropagation();return _vm.toggle($event)}}},[_vm._v(\"\\n    \"+_vm._s(folder)+\"\\n    \"),_c('asset-node',{attrs:{\"asset\":_vm.asset[folder]}})],1)}),_vm._l((_vm.files),function(file){return _c('li',{key:file.name,staticClass:\"file draggable token\",attrs:{\"draggable\":\"true\"},on:{\"mouseover\":function($event){_vm.showImage = file.hash},\"mouseout\":function($event){_vm.showImage = null},\"dragstart\":function($event){_vm.dragStart($event, '/static/assets/' + file.hash)}}},[_vm._v(\"\\n    \"+_vm._s(file.name)+\"\\n    \"),(_vm.showImage == file.hash)?_c('div',{staticClass:\"preview\"},[_c('img',{staticClass:\"asset-preview-image\",attrs:{\"src\":'/static/assets/' + file.hash}})]):_vm._e()])})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"339cf1e4-vue-loader-template\\\"}!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./asset_node.vue?vue&type=template&id=03d8fe61&scoped=true&\"","import Vue from \"vue\";\r\nimport Vuex from \"vuex\";\r\n\r\nimport { AssetState } from \"@/assetManager/store\";\r\nimport { CoreState } from \"@/core/store\";\r\nimport { GameState } from \"@/game/store\";\r\n\r\nVue.use(Vuex);\r\n\r\nexport interface RootState {\r\n    assets: AssetState;\r\n    core: CoreState;\r\n    game: GameState;\r\n}\r\n\r\nexport const rootStore = new Vuex.Store<RootState>({});\r\n","import { render, staticRenderFns } from \"./colorpicker.vue?vue&type=template&id=a45a1816&scoped=true&\"\nimport script from \"./colorpicker.vue?vue&type=script&lang=ts&\"\nexport * from \"./colorpicker.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./colorpicker.vue?vue&type=style&index=0&id=a45a1816&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"a45a1816\",\n  null\n  \n)\n\ncomponent.options.__file = \"colorpicker.vue\"\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('router-view',{ref:\"activeComponent\"})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=36fe14a6&\"\nvar script = {}\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"App.vue\"\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./initiative.vue?vue&type=style&index=0&id=38ee733a&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./initiative.vue?vue&type=style&index=0&id=38ee733a&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.selected)?_c('div',{staticClass:\"tool-detail\",style:({'--detailRight': _vm.detailRight, '--detailArrow': _vm.detailArrow})},[_c('div',[_vm._v(\"#X\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.xCount),expression:\"xCount\"}],attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.xCount)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.xCount=$event.target.value}}}),_c('div',[_vm._v(\"#Y\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.yCount),expression:\"yCount\"}],attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.yCount)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.yCount=$event.target.value}}})]):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"339cf1e4-vue-loader-template\\\"}!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./map.vue?vue&type=template&id=1ca85fc4&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.getActiveLayer() !== undefined)?_c('ContextMenu',{attrs:{\"visible\":_vm.visible,\"left\":_vm.x + 'px',\"top\":_vm.y + 'px'},on:{\"close\":_vm.close}},[(_vm.getLayers().length > 1)?_c('li',[_vm._v(\"Layer\\n    \"),_c('ul',_vm._l((_vm.getLayers()),function(layer){return _c('li',{key:layer.name,style:([_vm.getActiveLayer().name === layer.name ? {'background-color':'#82c8a0'}: {}]),on:{\"click\":function($event){_vm.setLayer(layer.name)}}},[_vm._v(_vm._s(layer.name))])}))]):_vm._e(),_c('li',{on:{\"click\":_vm.moveToBack}},[_vm._v(\"Move to back\")]),_c('li',{on:{\"click\":_vm.moveToFront}},[_vm._v(\"Move to front\")]),_c('li',{on:{\"click\":_vm.addInitiative}},[_vm._v(_vm._s(_vm.getInitiativeWord())+\" initiative\")])]):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"339cf1e4-vue-loader-template\\\"}!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./shapecontext.vue?vue&type=template&id=0dac178b&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('SelectContext',{ref:\"selectcontext\"})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"339cf1e4-vue-loader-template\\\"}!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./select.vue?vue&type=template&id=c3ff5224&\"","import { GlobalPoint, Ray } from \"@/game/geom\";\r\nimport { Layer } from \"@/game/layers/layer\";\r\nimport { layerManager } from \"@/game/layers/manager\";\r\nimport { Settings } from \"@/game/settings\";\r\nimport { Circle } from \"@/game/shapes/circle\";\r\nimport { Shape } from \"@/game/shapes/shape\";\r\nimport { gameStore } from \"@/game/store\";\r\nimport { g2l, g2lr, g2lx, g2ly, g2lz, getUnitDistance } from \"@/game/units\";\r\nimport { getFogColour } from \"@/game/utils\";\r\n\r\nexport class FOWLayer extends Layer {\r\n    isVisionLayer: boolean = true;\r\n    preFogShapes: Shape[] = [];\r\n\r\n    addShape(shape: Shape, sync: boolean, temporary?: boolean): void {\r\n        super.addShape(shape, sync, temporary);\r\n        if (shape.options.has(\"preFogShape\") && shape.options.get(\"preFogShape\")) {\r\n            this.preFogShapes.push(shape);\r\n        }\r\n    }\r\n\r\n    removeShape(shape: Shape, sync: boolean, temporary?: boolean) {\r\n        if (shape.options.has(\"preFogShape\") && shape.options.get(\"preFogShape\")) {\r\n            const idx = this.preFogShapes.findIndex(s => s.uuid === shape.uuid);\r\n            this.preFogShapes.splice(idx, 1);\r\n        }\r\n        super.removeShape(shape, sync, temporary);\r\n    }\r\n\r\n    draw(): void {\r\n        if (!this.valid) {\r\n            const ctx = this.ctx;\r\n\r\n            if (Settings.skipLightFOW) {\r\n                ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\r\n                this.valid = true;\r\n                return;\r\n            }\r\n\r\n            const originalOperation = ctx.globalCompositeOperation;\r\n            ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\r\n\r\n            ctx.fillStyle = \"rgba(0, 0, 0, 1)\";\r\n\r\n            const dctx = layerManager.getLayer(\"draw\")!.ctx;\r\n            if (Settings.drawAngleLines || Settings.drawFirstLightHit) {\r\n                dctx.clearRect(0, 0, dctx.canvas.width, dctx.canvas.height);\r\n            }\r\n\r\n            // At all times provide a minimal vision range to prevent losing your tokens in fog.\r\n            if (gameStore.fullFOW && layerManager.hasLayer(\"tokens\")) {\r\n                layerManager.getLayer(\"tokens\")!.shapes.forEach(sh => {\r\n                    if (!sh.ownedBy() || !sh.isToken) return;\r\n                    const bb = sh.getBoundingBox();\r\n                    const lcenter = g2l(sh.center());\r\n                    const alm = 0.8 * g2lz(bb.w);\r\n                    ctx.beginPath();\r\n                    ctx.arc(lcenter.x, lcenter.y, alm, 0, 2 * Math.PI);\r\n                    const gradient = ctx.createRadialGradient(lcenter.x, lcenter.y, alm / 2, lcenter.x, lcenter.y, alm);\r\n                    gradient.addColorStop(0, \"rgba(0, 0, 0, 1)\");\r\n                    gradient.addColorStop(1, \"rgba(0, 0, 0, 0)\");\r\n                    ctx.fillStyle = gradient;\r\n                    ctx.fill();\r\n                });\r\n            }\r\n\r\n            // First cut out all the light sources\r\n            for (const light of gameStore.visionSources) {\r\n                const shape = layerManager.UUIDMap.get(light.shape);\r\n                if (shape === undefined) continue;\r\n                const aura = shape.auras.find(a => a.uuid === light.aura);\r\n                if (aura === undefined) continue;\r\n\r\n                const auraLength = getUnitDistance(aura.value + aura.dim);\r\n                const center = shape.center();\r\n                const lcenter = g2l(center);\r\n\r\n                const auraCircle = new Circle(center, auraLength);\r\n                if (!auraCircle.visibleInCanvas(ctx.canvas)) continue;\r\n\r\n                let lastArcAngle = -1;\r\n\r\n                const path = new Path2D();\r\n                path.moveTo(lcenter.x, lcenter.y);\r\n                let firstPoint: GlobalPoint;\r\n\r\n                for (let angle = 0; angle < 2 * Math.PI; angle += (Settings.angleSteps / 180) * Math.PI) {\r\n                    const anglePoint = new GlobalPoint(\r\n                        center.x + auraLength * Math.cos(angle),\r\n                        center.y + auraLength * Math.sin(angle),\r\n                    );\r\n                    if (Settings.drawAngleLines) {\r\n                        dctx!.beginPath();\r\n                        dctx!.moveTo(g2lx(center.x), g2ly(center.y));\r\n                        dctx!.lineTo(g2lx(anglePoint.x), g2ly(anglePoint.y));\r\n                        dctx!.stroke();\r\n                    }\r\n\r\n                    // Check if there is a hit with one of the nearby light blockers.\r\n                    const lightRay = Ray.fromPoints(center, anglePoint);\r\n                    const hitResult = gameStore.BV.intersect(lightRay);\r\n\r\n                    if (angle === 0) firstPoint = hitResult.hit ? hitResult.intersect : anglePoint;\r\n\r\n                    // We can move on to the next angle if nothing was hit.\r\n                    if (!hitResult.hit) {\r\n                        // If an earlier hit caused the aura to leave the arc, we need to go back to the arc\r\n                        if (lastArcAngle === -1) {\r\n                            // Set the start of a new arc beginning at the current angle\r\n                            lastArcAngle = angle;\r\n                            // Draw a line from the last non arc location back to the arc\r\n                            const dest = g2l(anglePoint);\r\n                            ctx.lineTo(dest.x, dest.y);\r\n                        }\r\n                        continue;\r\n                    }\r\n                    // If hit , first finish any ongoing arc, then move to the intersection point\r\n                    if (lastArcAngle !== -1) {\r\n                        path.arc(lcenter.x, lcenter.y, g2lr(aura.value + aura.dim), lastArcAngle, angle);\r\n                        lastArcAngle = -1;\r\n                    }\r\n                    path.lineTo(g2lx(hitResult.intersect.x), g2ly(hitResult.intersect.y));\r\n                }\r\n\r\n                // Finish the final arc.\r\n                if (lastArcAngle === -1) path.lineTo(g2lx(firstPoint!.x), g2ly(firstPoint!.y));\r\n                else path.arc(lcenter.x, lcenter.y, g2lr(aura.value + aura.dim), lastArcAngle, 2 * Math.PI);\r\n\r\n                if (gameStore.fullFOW) {\r\n                    if (aura.dim > 0) {\r\n                        // Fill the light aura with a radial dropoff towards the outside.\r\n                        const gradient = ctx.createRadialGradient(\r\n                            lcenter.x,\r\n                            lcenter.y,\r\n                            g2lr(aura.value),\r\n                            lcenter.x,\r\n                            lcenter.y,\r\n                            g2lr(aura.value + aura.dim),\r\n                        );\r\n                        gradient.addColorStop(0, \"rgba(0, 0, 0, 1)\");\r\n                        gradient.addColorStop(1, \"rgba(0, 0, 0, 0)\");\r\n                        ctx.fillStyle = gradient;\r\n                    } else {\r\n                        ctx.fillStyle = \"rgba(0, 0, 0, 1)\";\r\n                    }\r\n                    ctx.fill(path);\r\n                }\r\n\r\n                aura.lastPath = path;\r\n            }\r\n\r\n            // At the DM Side due to opacity of the two fow layers, it looks strange if we just render them on top of eachother like players.\r\n            if (gameStore.fowLOS) {\r\n                ctx.globalCompositeOperation = \"source-in\";\r\n                ctx.drawImage(layerManager.getLayer(\"fow-players\")!.canvas, 0, 0);\r\n            }\r\n\r\n            for (const preShape of this.preFogShapes) {\r\n                if (!preShape.visibleInCanvas(this.canvas)) continue;\r\n                const ogComposite = preShape.globalCompositeOperation;\r\n                if (!gameStore.fullFOW) {\r\n                    if (preShape.globalCompositeOperation === \"source-over\")\r\n                        preShape.globalCompositeOperation = \"destination-out\";\r\n                    else if (preShape.globalCompositeOperation === \"destination-out\")\r\n                        preShape.globalCompositeOperation = \"source-over\";\r\n                }\r\n                preShape.draw(ctx);\r\n                preShape.globalCompositeOperation = ogComposite;\r\n            }\r\n\r\n            if (gameStore.fullFOW) {\r\n                ctx.globalCompositeOperation = \"source-out\";\r\n                ctx.fillStyle = getFogColour();\r\n                ctx.fillRect(0, 0, ctx.canvas.width, ctx.canvas.height);\r\n            }\r\n\r\n            super.draw(false);\r\n\r\n            ctx.globalCompositeOperation = originalOperation;\r\n        }\r\n    }\r\n}\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"formcontainer\"}},[(_vm.owned || _vm.joined)?_c('form',[_c('fieldset',[_c('legend',{staticClass:\"legend\"},[_vm._v(\"Your sessions\")]),_c('div',{staticClass:\"input\"},[_vm._l((_vm.owned),function(room,i){return _c('router-link',{key:'o-'+i,attrs:{\"to\":'/game/' + room[1] + '/' + room[0]}},[_vm._v(_vm._s(room[0]))])}),_vm._l((_vm.joined),function(room,i){return _c('router-link',{key:'j-'+i,attrs:{\"to\":'/game/' + room[1] + '/' + room[0]}},[_vm._v(_vm._s(room[1])+\"/\"+_vm._s(room[0]))])})],2)])]):_vm._e(),_vm._m(0),_c('form',{on:{\"submit\":function($event){$event.preventDefault();return _vm.createRoom($event)}}},[_c('fieldset',[(!_vm.owned && !_vm.joined)?_c('legend',{staticClass:\"legend\"},[_vm._v(\"Create a session\")]):_c('div',{staticClass:\"input\"},[_vm._v(\"Create a new session\")]),_c('div',{staticClass:\"input\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.newSessionName),expression:\"newSessionName\"}],attrs:{\"type\":\"text\",\"name\":\"room_name\",\"placeholder\":\"Session Name\"},domProps:{\"value\":(_vm.newSessionName)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.newSessionName=$event.target.value}}}),_vm._m(1)]),_vm._m(2)])]),_c('div',{attrs:{\"id\":\"account-options\"}},[_c('form',{on:{\"submit\":function($event){$event.preventDefault();}}},[_c('router-link',{staticClass:\"submit\",attrs:{\"tag\":\"button\",\"title\":\"Account Settings\",\"to\":\"/account\"}},[_c('i',{staticClass:\"fas fa-cog\"})])],1),_c('form',{on:{\"submit\":function($event){$event.preventDefault();}}},[_c('router-link',{staticClass:\"submit\",attrs:{\"tag\":\"button\",\"title\":\"Logout\",\"to\":\"/auth/logout\"}},[_c('i',{staticClass:\"fas fa-sign-out-alt\"})])],1)])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('h4',[_c('span',[_vm._v(\"OR\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',[_c('i',{staticClass:\"fab fa-d-and-d\"})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('button',{staticClass:\"submit\",attrs:{\"type\":\"submit\",\"title\":\"Create\"}},[_c('i',{staticClass:\"fas fa-arrow-right\"})])}]\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"339cf1e4-vue-loader-template\\\"}!../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./main.vue?vue&type=template&id=3430ab3a&scoped=true&\"","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./load.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./load.vue?vue&type=script&lang=ts&\"","import { ServerCircle } from \"@/game/comm/types/shapes\";\r\nimport { GlobalPoint, LocalPoint, Vector } from \"@/game/geom\";\r\nimport { BoundingRect } from \"@/game/shapes/boundingrect\";\r\nimport { Shape } from \"@/game/shapes/shape\";\r\nimport { gameStore } from \"@/game/store\";\r\nimport { calculateDelta } from \"@/game/ui/tools/utils\";\r\nimport { g2l, g2lz, l2g } from \"@/game/units\";\r\nimport { getFogColour } from \"@/game/utils\";\r\n\r\nexport class Circle extends Shape {\r\n    type = \"circle\";\r\n    r: number;\r\n    constructor(center: GlobalPoint, r: number, fillColour?: string, strokeColour?: string, uuid?: string) {\r\n        super(center, fillColour, strokeColour, uuid);\r\n        this.r = r || 1;\r\n    }\r\n    asDict(): ServerCircle {\r\n        // const base = <ServerCircle>this.getBaseDict();\r\n        // base.r = this.r;\r\n        // base.border = this.border;\r\n        // return base;\r\n        return Object.assign(this.getBaseDict(), {\r\n            radius: this.r,\r\n        });\r\n    }\r\n    fromDict(data: ServerCircle) {\r\n        super.fromDict(data);\r\n        this.r = data.radius;\r\n    }\r\n    getBoundingBox(): BoundingRect {\r\n        return new BoundingRect(\r\n            new GlobalPoint(this.refPoint.x - this.r, this.refPoint.y - this.r),\r\n            this.r * 2,\r\n            this.r * 2,\r\n        );\r\n    }\r\n    draw(ctx: CanvasRenderingContext2D) {\r\n        super.draw(ctx);\r\n        ctx.beginPath();\r\n        if (this.fillColour === \"fog\") ctx.fillStyle = getFogColour();\r\n        else ctx.fillStyle = this.fillColour;\r\n        const loc = g2l(this.refPoint);\r\n        ctx.arc(loc.x, loc.y, g2lz(this.r), 0, 2 * Math.PI);\r\n        ctx.fill();\r\n        if (this.strokeColour !== \"rgba(0, 0, 0, 0)\") {\r\n            ctx.beginPath();\r\n            ctx.lineWidth = g2lz(5);\r\n            ctx.strokeStyle = this.strokeColour;\r\n            ctx.arc(loc.x, loc.y, g2lz(this.r), 0, 2 * Math.PI);\r\n            ctx.stroke();\r\n        }\r\n    }\r\n    contains(point: GlobalPoint): boolean {\r\n        return (point.x - this.refPoint.x) ** 2 + (point.y - this.refPoint.y) ** 2 < this.r ** 2;\r\n    }\r\n    inCorner(point: GlobalPoint, corner: string) {\r\n        return false; // TODO\r\n    }\r\n    getCorner(point: GlobalPoint) {\r\n        if (this.inCorner(point, \"ne\")) return \"ne\";\r\n        else if (this.inCorner(point, \"nw\")) return \"nw\";\r\n        else if (this.inCorner(point, \"se\")) return \"se\";\r\n        else if (this.inCorner(point, \"sw\")) return \"sw\";\r\n    }\r\n    center(): GlobalPoint;\r\n    center(centerPoint: GlobalPoint): void;\r\n    center(centerPoint?: GlobalPoint): GlobalPoint | void {\r\n        if (centerPoint === undefined) return this.refPoint;\r\n        this.refPoint = centerPoint;\r\n    }\r\n    visibleInCanvas(canvas: HTMLCanvasElement): boolean {\r\n        return true;\r\n    } // TODO\r\n    snapToGrid() {\r\n        const gs = gameStore.gridSize;\r\n        let targetX;\r\n        let targetY;\r\n        if (((2 * this.r) / gs) % 2 === 0) {\r\n            targetX = Math.round(this.refPoint.x / gs) * gs;\r\n        } else {\r\n            targetX = Math.round((this.refPoint.x - gs / 2) / gs) * gs + this.r;\r\n        }\r\n        if (((2 * this.r) / gs) % 2 === 0) {\r\n            targetY = Math.round(this.refPoint.y / gs) * gs;\r\n        } else {\r\n            targetY = Math.round((this.refPoint.y - gs / 2) / gs) * gs + this.r;\r\n        }\r\n        const delta = calculateDelta(new Vector(targetX - this.refPoint.x, targetY - this.refPoint.y), this);\r\n        this.refPoint = this.refPoint.add(delta);\r\n        this.invalidate(false);\r\n    }\r\n    resizeToGrid() {\r\n        const gs = gameStore.gridSize;\r\n        this.r = Math.max(Math.round(this.r / gs) * gs, gs / 2);\r\n        this.invalidate(false);\r\n    }\r\n    resize(resizedir: string, point: LocalPoint) {\r\n        const z = gameStore.zoomFactor;\r\n        const diff = l2g(point).subtract(this.refPoint);\r\n        this.r = Math.sqrt(Math.pow(diff.length(), 2) / 2);\r\n    }\r\n}\r\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport Tool from \"@/game/ui/tools/tool.vue\";\r\n\r\nimport { GlobalPoint } from \"@/game/geom\";\r\nimport { layerManager } from \"@/game/layers/manager\";\r\nimport { BaseRect } from \"@/game/shapes/baserect\";\r\nimport { Rect } from \"@/game/shapes/rect\";\r\nimport { gameStore } from \"@/game/store\";\r\nimport { l2g } from \"@/game/units\";\r\nimport { getMouse } from \"@/game/utils\";\r\nimport Component from \"vue-class-component\";\r\n\r\n@Component\r\nexport default class MapTool extends Tool {\r\n    name = \"Map\";\r\n    active = false;\r\n    xCount = 3;\r\n    yCount = 3;\r\n    startPoint: GlobalPoint | null = null;\r\n    rect: Rect | null = null;\r\n\r\n    onMouseDown(event: MouseEvent) {\r\n        const layer = layerManager.getLayer();\r\n        if (layer === undefined) {\r\n            console.log(\"No active layer!\");\r\n            return;\r\n        }\r\n        this.active = true;\r\n\r\n        this.startPoint = l2g(getMouse(event));\r\n        this.rect = new Rect(this.startPoint.clone(), 0, 0, \"rgba(0,0,0,0)\", \"black\");\r\n        layer.addShape(this.rect, false, false);\r\n    }\r\n    onMouseMove(event: MouseEvent) {\r\n        if (!this.active || this.rect === null || this.startPoint === null) return;\r\n        const layer = layerManager.getLayer();\r\n        if (layer === undefined) {\r\n            console.log(\"No active layer!\");\r\n            return;\r\n        }\r\n\r\n        const endPoint = l2g(getMouse(event));\r\n\r\n        this.rect.w = Math.abs(endPoint.x - this.startPoint.x);\r\n        this.rect.h = Math.abs(endPoint.y - this.startPoint.y);\r\n        this.rect.refPoint.x = Math.min(this.startPoint.x, endPoint.x);\r\n        this.rect.refPoint.y = Math.min(this.startPoint.y, endPoint.y);\r\n        layer.invalidate(false);\r\n    }\r\n    onMouseUp(event: MouseEvent) {\r\n        if (!this.active || this.rect === null) return;\r\n        const layer = layerManager.getLayer();\r\n        if (layer === undefined) {\r\n            console.log(\"No active layer!\");\r\n            return;\r\n        }\r\n        this.active = false;\r\n\r\n        if (layer.selection.length !== 1) {\r\n            layer.removeShape(this.rect, false, false);\r\n            return;\r\n        }\r\n\r\n        const w = this.rect.w;\r\n        const h = this.rect.h;\r\n        const sel = layer.selection[0];\r\n\r\n        if (sel instanceof BaseRect) {\r\n            sel.w *= (this.xCount * gameStore.gridSize) / w;\r\n            sel.h *= (this.yCount * gameStore.gridSize) / h;\r\n        }\r\n\r\n        layer.removeShape(this.rect, false, false);\r\n    }\r\n}\r\n","import { render, staticRenderFns } from \"./load.vue?vue&type=template&id=fbaff2fc&\"\nimport script from \"./load.vue?vue&type=script&lang=ts&\"\nexport * from \"./load.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"load.vue\"\nexport default component.exports","import Tool from \"@/game/ui/tools/tool.vue\";\r\n\r\nimport { sendClientOptions } from \"@/game/api/utils\";\r\nimport { LocalPoint } from \"@/game/geom\";\r\nimport { layerManager } from \"@/game/layers/manager\";\r\nimport { gameStore } from \"@/game/store\";\r\nimport { getMouse } from \"@/game/utils\";\r\nimport Component from \"vue-class-component\";\r\n\r\n@Component\r\nexport default class PanTool extends Tool {\r\n    name = \"Pan\";\r\n    panStart = new LocalPoint(0, 0);\r\n    active = false;\r\n\r\n    onMouseDown(event: MouseEvent) {\r\n        this.panStart = getMouse(event);\r\n        this.active = true;\r\n    }\r\n    onMouseMove(event: MouseEvent) {\r\n        if (!this.active) return;\r\n        const mouse = getMouse(event);\r\n        const distance = mouse.subtract(this.panStart).multiply(1 / gameStore.zoomFactor);\r\n        gameStore.increasePanX(Math.round(distance.x));\r\n        gameStore.increasePanY(Math.round(distance.y));\r\n        this.panStart = mouse;\r\n        layerManager.invalidate();\r\n    }\r\n    onMouseUp(event: MouseEvent) {\r\n        this.active = false;\r\n        sendClientOptions();\r\n    }\r\n}\r\n","import { render, staticRenderFns } from \"./selectcontext.vue?vue&type=template&id=6d5bd46a&scoped=true&\"\nimport script from \"./selectcontext.vue?vue&type=script&lang=ts&\"\nexport * from \"./selectcontext.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./selectcontext.vue?vue&type=style&index=0&id=6d5bd46a&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6d5bd46a\",\n  null\n  \n)\n\ncomponent.options.__file = \"selectcontext.vue\"\nexport default component.exports","import Vue from \"vue\";\r\n\r\nimport { app } from \"@/main\";\r\n\r\n// Reference: https://stackoverflow.com/questions/105034/create-guid-uuid-in-javascript\r\nexport function uuidv4() {\r\n    return \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g, c => {\r\n        const r = (Math.random() * 16) | 0;\r\n        const v = c === \"x\" ? r : (r & 0x3) | 0x8;\r\n        return v.toString(16);\r\n    });\r\n}\r\n\r\nexport function capitalize(text: string) {\r\n    return text.charAt(0).toUpperCase() + text.slice(1);\r\n}\r\n\r\nexport function alphSort(a: string, b: string) {\r\n    if (a.toLowerCase() < b.toLowerCase()) return -1;\r\n    else return 1;\r\n}\r\n\r\nexport function getHTMLFont(element: HTMLElement) {\r\n    let font = element.style.font;\r\n    while (font === null && element.parentElement !== null) {\r\n        element = element.parentElement;\r\n        font = element.style.font;\r\n    }\r\n    if (font === null) font = window.getComputedStyle(document.body).getPropertyValue(\"font\");\r\n    return font;\r\n}\r\n\r\nexport function getHTMLTextWidth(text: string, font: string): number {\r\n    let fakeElement = <HTMLCanvasElement>document.getElementById(\"emptycanvas\");\r\n    if (fakeElement === null) {\r\n        fakeElement = document.createElement(\"canvas\");\r\n        fakeElement.id = \"emptycanvas\";\r\n        fakeElement.style.display = \"\";\r\n        document.body.appendChild(fakeElement);\r\n    }\r\n    const ctx = fakeElement.getContext(\"2d\")!;\r\n    ctx.font = font;\r\n    return Math.ceil(ctx.measureText(text).width);\r\n}\r\n\r\nexport function partition<T>(arr: T[], predicate: (n: T) => boolean) {\r\n    const ret: T[][] = [[], []];\r\n    arr.forEach(n => (predicate(n) ? ret[1].push(n) : ret[0].push(n)));\r\n    return ret;\r\n}\r\n\r\nexport function calcFontScale(ctx: CanvasRenderingContext2D, text: string, width: number, height: number) {\r\n    const points = Number(ctx.font.split(\"px\")[0]) * 0.2;\r\n    const fontWidth = ctx.measureText(text).width;\r\n    return Math.min(width / fontWidth, height / points);\r\n}\r\n\r\nexport function fixedEncodeURIComponent(str: string) {\r\n    return encodeURIComponent(str).replace(/[!'()*]/g, c => {\r\n        return \"%\" + c.charCodeAt(0).toString(16);\r\n    });\r\n}\r\n\r\nexport class OrderedMap<K, V> {\r\n    keys: K[] = [];\r\n    values: V[] = [];\r\n    get(key: K) {\r\n        return this.values[this.keys.indexOf(key)];\r\n    }\r\n    getIndexValue(idx: number) {\r\n        return this.values[idx];\r\n    }\r\n    getIndexKey(idx: number) {\r\n        return this.keys[idx];\r\n    }\r\n    set(key: K, value: V) {\r\n        this.keys.push(key);\r\n        this.values.push(value);\r\n    }\r\n    indexOf(element: K) {\r\n        return this.keys.indexOf(element);\r\n    }\r\n    remove(element: K) {\r\n        const idx = this.indexOf(element);\r\n        this.keys.splice(idx, 1);\r\n        this.values.splice(idx, 1);\r\n    }\r\n}\r\n\r\nexport function getComponent<T extends Vue>(): T {\r\n    return <T>app.$children[0].$refs.activeComponent;\r\n}\r\n\r\nexport function getRef<T extends Vue>(ref: string): T {\r\n    const active = <Vue>app.$children[0].$refs.activeComponent;\r\n    return <T>active.$refs[ref];\r\n}\r\n","import { render, staticRenderFns } from \"./contextMenu.vue?vue&type=template&id=547e08d0&\"\nimport script from \"./contextMenu.vue?vue&type=script&lang=ts&\"\nexport * from \"./contextMenu.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"contextMenu.vue\"\nexport default component.exports","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./asset_node.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./asset_node.vue?vue&type=script&lang=ts&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_vm._v(_vm._s(_vm.message))])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"339cf1e4-vue-loader-template\\\"}!../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./load.vue?vue&type=template&id=fbaff2fc&\"","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport Vue from \"vue\";\r\nimport Component from \"vue-class-component\";\r\nimport { Prop } from \"vue-property-decorator\";\r\n\r\n@Component\r\nexport default class Modal extends Vue {\r\n    @Prop(Boolean) visible!: boolean;\r\n    @Prop({ type: Boolean, default: true }) mask!: boolean;\r\n\r\n    $refs!: {\r\n        container: HTMLElement;\r\n    };\r\n\r\n    positioned = false;\r\n    offsetX = 0;\r\n    offsetY = 0;\r\n    screenX = 0;\r\n    screenY = 0;\r\n    dragging = false;\r\n\r\n    // Example of mounted required: opening note\r\n    mounted() {\r\n        this.updatePosition();\r\n    }\r\n    // Example of updated required: opening initiative\r\n    updated() {\r\n        this.updatePosition();\r\n    }\r\n\r\n    close(event: MouseEvent) {\r\n        this.$emit(\"close\");\r\n    }\r\n    updatePosition() {\r\n        if (!this.positioned) {\r\n            const container = <any>this.$refs.container;\r\n            if (container.offsetWidth === 0 && container.offsetHeight === 0) return;\r\n            this.$refs.container.style.left = (window.innerWidth - container.offsetWidth) / 2 + \"px\";\r\n            this.$refs.container.style.top = (window.innerHeight - container.offsetHeight) / 2 + \"px\";\r\n            this.positioned = true;\r\n        }\r\n    }\r\n    dragStart(event: DragEvent) {\r\n        if (event === null || event.dataTransfer === null) return;\r\n        event.dataTransfer.setData(\"Hack\", \"\");\r\n        // Because the drag event is happening on the header, we have to change the drag image\r\n        // in order to give the impression that the entire modal is dragged.\r\n        event.dataTransfer.setDragImage(<Element>this.$refs.container, event.offsetX, event.offsetY);\r\n        this.offsetX = event.offsetX;\r\n        this.offsetY = event.offsetY;\r\n        this.screenX = event.screenX;\r\n        this.screenY = event.screenY;\r\n        this.dragging = true;\r\n    }\r\n    dragEnd(event: DragEvent) {\r\n        this.dragging = false;\r\n        let left = event.clientX - this.offsetX;\r\n        let top = event.clientY - this.offsetY;\r\n        if (event.clientX === 0 && event.clientY === 0 && event.pageX === 0 && event.pageY === 0) {\r\n            left = parseInt(this.$refs.container.style.left!, 10) - (this.screenX - event.screenX);\r\n            top = parseInt(this.$refs.container.style.top!, 10) - (this.screenY - event.screenY);\r\n        }\r\n        if (left < 0) left = 0;\r\n        if (left > window.innerWidth - 100) left = window.innerWidth - 100;\r\n        if (top < 0) top = 0;\r\n        if (top > window.innerHeight - 100) top = window.innerHeight - 100;\r\n        this.$refs.container.style.left = left + \"px\";\r\n        this.$refs.container.style.top = top + \"px\";\r\n        this.$refs.container.style.display = \"block\";\r\n    }\r\n    dragOver(event: DragEvent) {\r\n        if (this.dragging) this.$refs.container.style.display = \"none\";\r\n    }\r\n}\r\n","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./createtoken_modal.vue?vue&type=style&index=0&id=254e8bcf&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./createtoken_modal.vue?vue&type=style&index=0&id=254e8bcf&scoped=true&lang=css&\"","import io from \"socket.io-client\";\r\n\r\nimport { Asset } from \"@/core/comm/types\";\r\nimport { assetStore } from \"./store\";\r\n\r\nexport const socket = io(location.protocol + \"//\" + location.host + \"/pa_assetmgmt\", { autoConnect: false });\r\n\r\n// export const socket = io.connect(location.protocol + \"//\" + location.host + \"/pa_assetmgmt\");\r\nsocket.on(\"connect\", () => {\r\n    console.log(\"Connected\");\r\n});\r\nsocket.on(\"disconnect\", () => {\r\n    console.log(\"Disconnected\");\r\n});\r\nsocket.on(\"redirect\", (destination: string) => {\r\n    console.log(\"redirecting\");\r\n    window.location.href = destination;\r\n});\r\nsocket.on(\"Folder.Root.Set\", (root: number) => {\r\n    assetStore.setRoot(root);\r\n});\r\nsocket.on(\"Folder.Set\", (folder: Asset) => {\r\n    assetStore.clear();\r\n    if (folder.children) {\r\n        for (const child of folder.children) {\r\n            assetStore.idMap.set(child.id, child);\r\n            if (child.file_hash) {\r\n                assetStore.files.push(child.id);\r\n            } else {\r\n                assetStore.folders.push(child.id);\r\n            }\r\n        }\r\n    }\r\n});\r\nsocket.on(\"Folder.Create\", (folder: Asset) => {\r\n    assetStore.folders.push(folder.id);\r\n    assetStore.idMap.set(folder.id, folder);\r\n});\r\nsocket.on(\"Asset.Upload.Finish\", (asset: Asset) => {\r\n    assetStore.idMap.set(asset.id, asset);\r\n    assetStore.files.push(asset.id);\r\n});\r\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./game.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./game.vue?vue&type=style&index=0&lang=css&\"","import { GlobalPoint, LocalPoint } from \"@/game/geom\";\r\nimport { BoundingRect } from \"@/game/shapes/boundingrect\";\r\nimport { Shape } from \"@/game/shapes/shape\";\r\nimport { g2lx, g2ly, g2lz } from \"@/game/units\";\r\nimport { getFogColour } from \"@/game/utils\";\r\n\r\nexport class MultiLine extends Shape {\r\n    type = \"multiline\";\r\n    points: GlobalPoint[] = [];\r\n    lineWidth: number;\r\n    constructor(\r\n        startPoint: GlobalPoint,\r\n        points?: GlobalPoint[],\r\n        lineWidth?: number,\r\n        strokeColour?: string,\r\n        uuid?: string,\r\n    ) {\r\n        super(startPoint, \"rgba(0, 0, 0, 0)\", strokeColour || \"#000\", uuid);\r\n        this.points = points || [];\r\n        this.lineWidth = lineWidth || 3;\r\n    }\r\n    asDict() {\r\n        return Object.assign(this.getBaseDict(), {\r\n            line_width: this.lineWidth,\r\n            points: this.points.map(p => ({ x: p.x, y: p.y })),\r\n        });\r\n    }\r\n    getBoundingBox(): BoundingRect {\r\n        let minx: number = this.refPoint.x;\r\n        let maxx: number = this.refPoint.y;\r\n        let miny: number = this.refPoint.x;\r\n        let maxy: number = this.refPoint.y;\r\n        for (const p of this.points) {\r\n            if (p.x < minx) minx = p.x;\r\n            if (p.x > maxx) maxx = p.x;\r\n            if (p.y < miny) miny = p.y;\r\n            if (p.y > maxy) maxy = p.y;\r\n        }\r\n        return new BoundingRect(new GlobalPoint(minx, miny), maxx - minx, maxy - miny);\r\n    }\r\n    draw(ctx: CanvasRenderingContext2D) {\r\n        super.draw(ctx);\r\n        ctx.beginPath();\r\n        ctx.lineCap = \"round\";\r\n        ctx.lineJoin = \"round\";\r\n        ctx.moveTo(g2lx(this.refPoint.x), g2ly(this.refPoint.y));\r\n        for (const p of this.points) ctx.lineTo(g2lx(p.x), g2ly(p.y));\r\n        if (this.strokeColour === \"fog\") ctx.strokeStyle = getFogColour();\r\n        else ctx.strokeStyle = this.strokeColour;\r\n        ctx.lineWidth = g2lz(this.lineWidth);\r\n        ctx.stroke();\r\n    }\r\n    contains(point: GlobalPoint): boolean {\r\n        return this.points.includes(point);\r\n    }\r\n\r\n    center(): GlobalPoint;\r\n    center(centerPoint: GlobalPoint): void;\r\n    center(centerPoint?: GlobalPoint): GlobalPoint | void {} // TODO\r\n    getCorner(point: GlobalPoint): string | undefined {\r\n        return \"\";\r\n    } // TODO\r\n    visibleInCanvas(canvas: HTMLCanvasElement): boolean {\r\n        return true;\r\n    } // TODO\r\n    snapToGrid(): void {}\r\n    resizeToGrid(): void {}\r\n    resize(resizeDir: string, point: LocalPoint): void {}\r\n}\r\n","import { render, staticRenderFns } from \"./draw.vue?vue&type=template&id=67a6ef9a&scoped=true&\"\nimport script from \"./draw.vue?vue&type=script&lang=ts&\"\nexport * from \"./draw.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./draw.vue?vue&type=style&index=0&id=67a6ef9a&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"67a6ef9a\",\n  null\n  \n)\n\ncomponent.options.__file = \"draw.vue\"\nexport default component.exports","import tinycolor from \"tinycolor2\";\r\n\r\nimport { LocalPoint } from \"@/game/geom\";\r\nimport { gameStore } from \"@/game/store\";\r\n\r\nexport function getMouse(e: MouseEvent): LocalPoint {\r\n    return new LocalPoint(e.pageX, e.pageY);\r\n}\r\n\r\nexport function getFogColour(opposite: boolean = false): string {\r\n    const tc = tinycolor(gameStore.fowColour);\r\n    if (gameStore.IS_DM) tc.setAlpha(opposite ? 1 : gameStore.fowOpacity);\r\n    else tc.setAlpha(1);\r\n    return tc.toRgbString();\r\n}\r\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport * as tinycolor from \"tinycolor2\";\r\nimport Vue from \"vue\";\r\nimport Component from \"vue-class-component\";\r\n\r\nimport { mapState } from \"vuex\";\r\n\r\nimport ColorPicker from \"@/core/components/colorpicker.vue\";\r\nimport Modal from \"@/core/components/modals/modal.vue\";\r\n\r\nimport { calcFontScale } from \"@/core/utils\";\r\nimport { LocalPoint } from \"@/game/geom\";\r\nimport { layerManager } from \"@/game/layers/manager\";\r\nimport { CircularToken } from \"@/game/shapes/circulartoken\";\r\nimport { gameStore } from \"@/game/store\";\r\nimport { getUnitDistance, l2g } from \"@/game/units\";\r\nimport { Watch } from \"vue-property-decorator\";\r\n\r\n@Component({\r\n    components: {\r\n        Modal,\r\n        \"color-picker\": ColorPicker,\r\n    },\r\n    computed: {\r\n        ...mapState(\"game\", [\"unitSize\"]),\r\n    },\r\n})\r\nexport default class CreateTokenModal extends Vue {\r\n    x = 0;\r\n    y = 0;\r\n    visible = false;\r\n    text = \"X\";\r\n    fillColour = \"rgba(255, 255, 255, 1)\";\r\n    borderColour = \"rgba(0, 0, 0, 1)\";\r\n\r\n    mounted() {\r\n        this.updatePreview();\r\n    }\r\n\r\n    @Watch(\"text\")\r\n    onTextChange(newValue: string, oldValue: string) {\r\n        this.updatePreview();\r\n    }\r\n    @Watch(\"fillColour\")\r\n    onFillChange(newValue: string, oldValue: string) {\r\n        this.updatePreview();\r\n    }\r\n    @Watch(\"borderColour\")\r\n    onBorderChange(newValue: string, oldValue: string) {\r\n        this.updatePreview();\r\n    }\r\n\r\n    open(x: number, y: number) {\r\n        this.visible = true;\r\n        this.x = x;\r\n        this.y = y;\r\n    }\r\n    submit() {\r\n        const layer = layerManager.getLayer();\r\n        if (layer === undefined) return;\r\n        const token = new CircularToken(\r\n            l2g(new LocalPoint(this.x, this.y)),\r\n            getUnitDistance(gameStore.unitSize / 2),\r\n            this.text,\r\n            \"10px serif\",\r\n            this.fillColour,\r\n            this.borderColour,\r\n        );\r\n        token.owners.push(gameStore.username);\r\n        layer.addShape(token, true);\r\n        layer.invalidate(false);\r\n        this.visible = false;\r\n    }\r\n    updatePreview() {\r\n        const ctx = (<HTMLCanvasElement>this.$refs.canvas).getContext(\"2d\")!;\r\n        ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\r\n        ctx.beginPath();\r\n        const dest = { x: ctx.canvas.width / 2, y: ctx.canvas.height / 2 };\r\n        const r = Math.min(dest.x, dest.y) * 0.9;\r\n\r\n        ctx.fillStyle = this.fillColour;\r\n\r\n        ctx.arc(dest.x, dest.y, r, 0, 2 * Math.PI);\r\n        ctx.fill();\r\n        if (this.borderColour !== \"rgba(0, 0, 0, 0)\") {\r\n            ctx.beginPath();\r\n            ctx.lineWidth = 5;\r\n            ctx.strokeStyle = this.borderColour;\r\n            ctx.arc(dest.x, dest.y, r, 0, 2 * Math.PI);\r\n            ctx.stroke();\r\n        }\r\n        ctx.save();\r\n        ctx.textAlign = \"center\";\r\n        ctx.textBaseline = \"middle\";\r\n        const xs = calcFontScale(ctx, this.text, r, r);\r\n        const ys = 0;\r\n        ctx.transform(xs, ys, -ys, xs, dest.x, dest.y);\r\n        ctx.fillStyle = tinycolor.mostReadable(this.fillColour, [\"#000\", \"#fff\"]).toHexString();\r\n        ctx.fillText(this.text, 0, 0);\r\n        ctx.restore();\r\n    }\r\n}\r\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport Vue from \"vue\";\r\nimport Component from \"vue-class-component\";\r\n\r\nimport ConfirmDialog from \"@/core/components/modals/confirm.vue\";\r\nimport Modal from \"@/core/components/modals/modal.vue\";\r\n\r\nimport { getRef } from \"@/core/utils\";\r\nimport { Note } from \"@/game/comm/types/general\";\r\nimport { gameStore } from \"@/game/store\";\r\n\r\n@Component({\r\n    components: {\r\n        Modal,\r\n    },\r\n})\r\nexport default class NoteDialog extends Vue {\r\n    visible = false;\r\n    note: Note | null = null;\r\n\r\n    open(note: Note) {\r\n        this.visible = true;\r\n        this.note = note;\r\n    }\r\n    calcHeight() {\r\n        if (this.$refs.textarea) {\r\n            const el = <HTMLElement>this.$refs.textarea;\r\n            el.style.height = \"auto\";\r\n            el.style.height = el.scrollHeight + \"px\";\r\n            // Using the return value without the above did not achieve what I want, so hey /shrug\r\n            return el.scrollHeight + \"px\";\r\n        }\r\n        return \"100px\";\r\n    }\r\n    updateNote() {\r\n        if (this.note) gameStore.updateNote({ note: this.note, sync: true });\r\n    }\r\n    removeNote() {\r\n        getRef<ConfirmDialog>(\"confirm\")\r\n            .open(\"Are you sure you wish to remove this?\")\r\n            .then(\r\n                (result: boolean) => {\r\n                    if (result && this.note) {\r\n                        gameStore.removeNote({ note: this.note, sync: true });\r\n                        this.visible = false;\r\n                    }\r\n                },\r\n                () => {},\r\n            );\r\n    }\r\n}\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ContextMenu',{attrs:{\"visible\":_vm.visible,\"left\":_vm.left + 'px',\"top\":_vm.top + 'px'},on:{\"close\":_vm.close}},[_c('li',{on:{\"click\":_vm.rename}},[_vm._v(\"Rename\")]),_c('li',{on:{\"click\":_vm.remove}},[_vm._v(\"Remove\")])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"339cf1e4-vue-loader-template\\\"}!../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./contextMenu.vue?vue&type=template&id=547e08d0&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('modal',{attrs:{\"visible\":_vm.visible,\"mask\":false},on:{\"close\":function($event){_vm.visible = false}},scopedSlots:_vm._u([{key:\"header\",fn:function(m){return _c('div',{staticClass:\"modal-header\",attrs:{\"draggable\":\"true\"},on:{\"dragstart\":m.dragStart,\"dragend\":m.dragEnd}},[_c('div',[_vm._v(\"Initiative\")]),_c('div',{staticClass:\"header-close\",on:{\"click\":function($event){_vm.visible = false}}},[_c('i',{staticClass:\"far fa-window-close\"})])])}}])},[_c('div',{staticClass:\"modal-body\"},[_c('draggable',{attrs:{\"id\":\"initiative-list\",\"options\":{setData: _vm.fakeSetData, disabled: !_vm.$store.state.game.IS_DM}},on:{\"change\":_vm.updateOrder},model:{value:(_vm.data),callback:function ($$v) {_vm.data=$$v},expression:\"data\"}},[_vm._l((_vm.data),function(actor){return [_c('div',{key:actor.uuid,staticStyle:{\"display\":\"flex\",\"flex-direction\":\"column\",\"align-items\":\"flex-end\"}},[_c('div',{staticClass:\"initiative-actor\",class:{'initiative-selected': _vm.currentActor === actor.uuid},style:({'cursor': _vm.$store.state.game.IS_DM && 'move'}),on:{\"mouseenter\":function($event){_vm.toggleHighlight(actor, true)},\"mouseleave\":function($event){_vm.toggleHighlight(actor, false)}}},[(actor.has_img)?[_c('img',{attrs:{\"src\":actor.source,\"width\":\"30px\",\"height\":\"30px\"}})]:[_c('span',{staticStyle:{\"width\":\"auto\"}},[_vm._v(_vm._s(actor.source))])],_c('input',{directives:[{name:\"model\",rawName:\"v-model.lazy.number\",value:(actor.initiative),expression:\"actor.initiative\",modifiers:{\"lazy\":true,\"number\":true}}],class:{'notAllowed': !_vm.owns(actor)},attrs:{\"type\":\"text\",\"placeholder\":\"value\",\"disabled\":!_vm.owns(actor)},domProps:{\"value\":(actor.initiative)},on:{\"change\":[function($event){_vm.$set(actor, \"initiative\", _vm._n($event.target.value))},function($event){_vm.syncInitiative(actor)}],\"blur\":function($event){_vm.$forceUpdate()}}}),_c('div',{staticClass:\"initiative-effects-icon\",class:{'notAllowed': !_vm.owns(actor)},staticStyle:{\"opacity\":\"0.6\"},on:{\"click\":function($event){_vm.createEffect(actor, _vm.getDefaultEffect(), true)}}},[_c('i',{staticClass:\"fas fa-stopwatch\"}),(actor.effects)?[_vm._v(_vm._s(actor.effects.length))]:[_vm._v(\"0\")]],2),_c('div',{class:{'notAllowed': !_vm.owns(actor)},style:({'opacity': actor.visible ? '1.0' : '0.3'}),on:{\"click\":function($event){_vm.toggleOption(actor, 'visible')}}},[_c('i',{staticClass:\"fas fa-eye\"})]),_c('div',{class:{'notAllowed': !_vm.owns(actor)},style:({'opacity': actor.group ? '1.0' : '0.3'}),on:{\"click\":function($event){_vm.toggleOption(actor, 'group')}}},[_c('i',{staticClass:\"fas fa-users\"})]),_c('div',{class:{'notAllowed': !_vm.owns(actor)},style:({'opacity': _vm.owns(actor) ? '1.0' : '0.3'}),on:{\"click\":function($event){_vm.removeInitiative(actor.uuid, true, true)}}},[_c('i',{staticClass:\"fas fa-trash-alt\"})])],2),(actor.effects)?_c('div',{staticClass:\"initiative-effect\"},_vm._l((actor.effects),function(effect){return _c('div',{key:effect.uuid},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(effect.name),expression:\"effect.name\"}],attrs:{\"type\":\"text\",\"size\":effect.name.length || 1},domProps:{\"value\":(effect.name)},on:{\"change\":function($event){_vm.updateEffect(actor.uuid, effect, true)},\"input\":function($event){if($event.target.composing){ return; }_vm.$set(effect, \"name\", $event.target.value)}}}),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(effect.turns),expression:\"effect.turns\"}],attrs:{\"type\":\"text\",\"size\":effect.turns.toString().length || 1},domProps:{\"value\":(effect.turns)},on:{\"change\":function($event){_vm.updateEffect(actor.uuid, effect, true)},\"input\":function($event){if($event.target.composing){ return; }_vm.$set(effect, \"turns\", $event.target.value)}}})])})):_vm._e()])]})],2),_c('div',{attrs:{\"id\":\"initiative-bar\"}},[_c('div',{attrs:{\"id\":\"initiative-round\"}},[_vm._v(\"Round \"+_vm._s(_vm.roundCounter))]),_c('div',{staticStyle:{\"display\":\"flex\"}}),_c('div',{staticClass:\"initiative-bar-button\",class:{'notAllowed': !_vm.$store.state.game.IS_DM},on:{\"click\":function($event){_vm.setRound(0, true); _vm.setTurn(_vm.data[0].uuid, true)}}},[_c('i',{staticClass:\"fas fa-sync-alt\"})]),_c('div',{staticClass:\"initiative-bar-button\",class:{'notAllowed': !_vm.$store.state.game.IS_DM},on:{\"click\":_vm.nextTurn}},[_c('i',{staticClass:\"fas fa-chevron-right\"})])])],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"339cf1e4-vue-loader-template\\\"}!../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./initiative.vue?vue&type=template&id=38ee733a&scoped=true&\"","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport Component from \"vue-class-component\";\r\n\r\nimport { Watch } from \"vue-property-decorator\";\r\n\r\nimport ColorPicker from \"@/core/components/colorpicker.vue\";\r\nimport Tool from \"@/game/ui/tools/tool.vue\";\r\n\r\nimport { socket } from \"@/game/api/socket\";\r\nimport { GlobalPoint } from \"@/game/geom\";\r\nimport { layerManager } from \"@/game/layers/manager\";\r\nimport { Circle } from \"@/game/shapes/circle\";\r\nimport { MultiLine } from \"@/game/shapes/multiline\";\r\nimport { Rect } from \"@/game/shapes/rect\";\r\nimport { Shape } from \"@/game/shapes/shape\";\r\nimport { gameStore } from \"@/game/store\";\r\nimport { getUnitDistance, l2g } from \"@/game/units\";\r\nimport { getMouse } from \"@/game/utils\";\r\n\r\n@Component({\r\n    components: {\r\n        \"color-picker\": ColorPicker,\r\n    },\r\n})\r\nexport default class DrawTool extends Tool {\r\n    name = \"Draw\";\r\n    active = false;\r\n\r\n    startPoint: GlobalPoint | null = null;\r\n    shape: Shape | null = null;\r\n    brushHelper: Circle | null = null;\r\n\r\n    fillColour = \"rgba(0, 0, 0, 1)\";\r\n    borderColour = \"rgba(255, 255, 255, 0)\";\r\n\r\n    shapeSelect = \"square\";\r\n    shapes = [\"square\", \"circle\", \"paint-brush\"];\r\n    modeSelect = \"normal\";\r\n    modes = [\"normal\", \"reveal\", \"hide\"];\r\n\r\n    brushSize = getUnitDistance(gameStore.unitSize);\r\n\r\n    get helperSize(): number {\r\n        if (this.shapeSelect === \"paint-brush\") return this.brushSize / 2;\r\n        return getUnitDistance(this.unitSize) / 8;\r\n    }\r\n    get IS_DM(): boolean {\r\n        return gameStore.IS_DM;\r\n    }\r\n    get unitSize(): number {\r\n        return gameStore.unitSize;\r\n    }\r\n    get useGrid(): boolean {\r\n        return gameStore.useGrid;\r\n    }\r\n\r\n    @Watch(\"fillColour\")\r\n    onFillChange() {\r\n        if (this.brushHelper) this.brushHelper.fillColour = this.fillColour;\r\n    }\r\n\r\n    @Watch(\"modeSelect\")\r\n    onModeUpdate(newValue: string, oldValue: string) {\r\n        this.onModeChange(newValue, oldValue);\r\n    }\r\n\r\n    setupBrush() {\r\n        if (this.brushHelper === null) return;\r\n        if (this.modeSelect === \"reveal\" || this.modeSelect === \"hide\") {\r\n            this.brushHelper.options.set(\"preFogShape\", true);\r\n            this.brushHelper.options.set(\"skipDraw\", true);\r\n            this.brushHelper.fillColour = \"rgba(0, 0, 0, 1)\";\r\n\r\n            if (this.modeSelect === \"reveal\") this.brushHelper.globalCompositeOperation = \"source-over\";\r\n            else if (this.modeSelect === \"hide\") this.brushHelper.globalCompositeOperation = \"destination-out\";\r\n        } else {\r\n            this.brushHelper.options.delete(\"preFogShape\");\r\n            this.brushHelper.options.delete(\"skipDraw\");\r\n            this.brushHelper.globalCompositeOperation = \"source-over\";\r\n            this.brushHelper.fillColour = this.fillColour;\r\n        }\r\n    }\r\n    onModeChange(newValue: string, oldValue: string) {\r\n        if (this.brushHelper === null) return;\r\n\r\n        const fowLayer = layerManager.getLayer(\"fow\");\r\n        const normalLayer = layerManager.getLayer();\r\n        if (fowLayer === undefined || normalLayer === undefined) return;\r\n\r\n        this.setupBrush();\r\n\r\n        if (newValue !== \"normal\" && oldValue === \"normal\") {\r\n            normalLayer.removeShape(this.brushHelper, false);\r\n            fowLayer.addShape(this.brushHelper, false);\r\n        } else if (newValue === \"normal\" && oldValue !== \"normal\") {\r\n            normalLayer.addShape(this.brushHelper, false);\r\n            fowLayer.removeShape(this.brushHelper, false);\r\n        }\r\n    }\r\n    getLayer() {\r\n        if (this.modeSelect === \"normal\") return layerManager.getLayer();\r\n        return layerManager.getLayer(\"fow\");\r\n    }\r\n    onMouseDown(event: MouseEvent) {\r\n        const layer = this.getLayer();\r\n        if (layer === undefined) {\r\n            console.log(\"No active layer!\");\r\n            return;\r\n        }\r\n        this.active = true;\r\n        this.startPoint = l2g(getMouse(event));\r\n        if (this.shapeSelect === \"square\")\r\n            this.shape = new Rect(this.startPoint.clone(), 0, 0, this.fillColour, this.borderColour);\r\n        else if (this.shapeSelect === \"circle\")\r\n            this.shape = new Circle(this.startPoint.clone(), this.helperSize, this.fillColour, this.borderColour);\r\n        else if (this.shapeSelect === \"paint-brush\") {\r\n            this.shape = new MultiLine(this.startPoint.clone(), [], this.brushSize);\r\n            this.shape.fillColour = this.fillColour;\r\n        } else return;\r\n\r\n        if (this.modeSelect !== \"normal\") {\r\n            this.shape.options.set(\"preFogShape\", true);\r\n            this.shape.options.set(\"skipDraw\", true);\r\n            this.shape.fillColour = \"rgba(0, 0, 0, 1)\";\r\n        }\r\n        if (this.modeSelect === \"reveal\") this.shape.globalCompositeOperation = \"source-over\";\r\n        else if (this.modeSelect === \"hide\") this.shape.globalCompositeOperation = \"destination-out\";\r\n\r\n        this.shape.owners.push(gameStore.username);\r\n        if (layer.name === \"fow\" && this.modeSelect === \"normal\") {\r\n            this.shape.visionObstruction = true;\r\n            this.shape.movementObstruction = true;\r\n        }\r\n        gameStore.visionBlockers.push(this.shape.uuid);\r\n        layer.addShape(this.shape, true, false);\r\n\r\n        // Push brushhelper to back\r\n        this.onDeselect();\r\n        this.onSelect();\r\n    }\r\n    onMouseMove(event: MouseEvent) {\r\n        const endPoint = l2g(getMouse(event));\r\n        const layer = this.getLayer();\r\n        if (layer === undefined) {\r\n            console.log(\"No active layer!\");\r\n            return;\r\n        }\r\n\r\n        if (this.brushHelper !== null) {\r\n            this.brushHelper.r = this.helperSize;\r\n            this.brushHelper.refPoint = endPoint;\r\n            if (!this.active) layer.invalidate(false);\r\n        }\r\n\r\n        if (!this.active || this.startPoint === null || this.shape === null) return;\r\n\r\n        if (this.shapeSelect === \"square\") {\r\n            (<Rect>this.shape).w = Math.abs(endPoint.x - this.startPoint.x);\r\n            (<Rect>this.shape).h = Math.abs(endPoint.y - this.startPoint.y);\r\n            this.shape.refPoint.x = Math.min(this.startPoint.x, endPoint.x);\r\n            this.shape.refPoint.y = Math.min(this.startPoint.y, endPoint.y);\r\n        } else if (this.shapeSelect === \"circle\") {\r\n            (<Circle>this.shape).r = endPoint.subtract(this.startPoint).length();\r\n        } else if (this.shapeSelect === \"paint-brush\") {\r\n            (<MultiLine>this.shape).points.push(endPoint);\r\n        }\r\n        socket.emit(\"Shape.Update\", { shape: this.shape!.asDict(), redraw: true, temporary: false });\r\n        if (this.shape.visionObstruction) gameStore.recalculateBV();\r\n        layer.invalidate(false);\r\n    }\r\n    onMouseUp(event: MouseEvent) {\r\n        if (this.active && this.shape !== null && !event.altKey && this.useGrid) {\r\n            this.shape.resizeToGrid();\r\n            socket.emit(\"Shape.Update\", { shape: this.shape!.asDict(), redraw: true, temporary: false });\r\n        }\r\n        this.active = false;\r\n    }\r\n    onSelect() {\r\n        const layer = this.getLayer();\r\n        if (layer === undefined) return;\r\n        this.brushHelper = new Circle(new GlobalPoint(-1000, -1000), this.brushSize / 2, this.fillColour);\r\n        this.setupBrush();\r\n        layer.addShape(this.brushHelper, false); // during mode change the shape is already added\r\n    }\r\n    onDeselect() {\r\n        const layer = this.getLayer();\r\n        if (this.brushHelper !== null && layer !== undefined) layer.removeShape(this.brushHelper, false);\r\n    }\r\n}\r\n","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./asset_node.vue?vue&type=style&index=0&id=03d8fe61&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./asset_node.vue?vue&type=style&index=0&id=03d8fe61&scoped=true&lang=css&\"","import { BoundingRect } from \"@/game/shapes/boundingrect\";\r\n\r\nexport class BoundingNode {\r\n    bbox: BoundingRect;\r\n    nPrimitives: number;\r\n    children: BoundingNode[] = [];\r\n    constructor(nPrimitives: number, bbox: BoundingRect) {\r\n        this.nPrimitives = nPrimitives;\r\n        this.bbox = bbox;\r\n    }\r\n}\r\n\r\nexport class LeafNode extends BoundingNode {\r\n    firstPrimOffset: number;\r\n    constructor(first: number, n: number, bbox: BoundingRect) {\r\n        super(n, bbox);\r\n        this.firstPrimOffset = first;\r\n    }\r\n}\r\n\r\nexport class InteriorNode extends BoundingNode {\r\n    dimension: number;\r\n    constructor(dimension: number, c1: BoundingNode, c2: BoundingNode) {\r\n        super(0, c1.bbox.union(c2.bbox));\r\n        this.dimension = dimension;\r\n        this.children.push(c1);\r\n        this.children.push(c2);\r\n    }\r\n}\r\n","import { GlobalPoint, LocalPoint } from \"@/game/geom\";\r\nimport { BoundingRect } from \"@/game/shapes/boundingrect\";\r\nimport { Shape } from \"@/game/shapes/shape\";\r\nimport { g2lx, g2ly } from \"@/game/units\";\r\n\r\nexport class Line extends Shape {\r\n    type = \"line\";\r\n    endPoint: GlobalPoint;\r\n    lineWidth: number;\r\n    constructor(\r\n        startPoint: GlobalPoint,\r\n        endPoint: GlobalPoint,\r\n        lineWidth?: number,\r\n        strokeColour?: string,\r\n        uuid?: string,\r\n    ) {\r\n        super(startPoint, \"rgba(0, 0, 0, 0)\", strokeColour || \"#000\", uuid);\r\n        this.endPoint = endPoint;\r\n        this.lineWidth = lineWidth === undefined ? 1 : lineWidth;\r\n    }\r\n    asDict() {\r\n        return Object.assign(this.getBaseDict(), {\r\n            x2: this.endPoint.x,\r\n            y2: this.endPoint.y,\r\n            line_width: this.lineWidth,\r\n        });\r\n    }\r\n    getBoundingBox(): BoundingRect {\r\n        return new BoundingRect(\r\n            new GlobalPoint(Math.min(this.refPoint.x, this.endPoint.x), Math.min(this.refPoint.x, this.endPoint.y)),\r\n            Math.abs(this.refPoint.x - this.endPoint.x),\r\n            Math.abs(this.refPoint.y - this.endPoint.y),\r\n        );\r\n    }\r\n    draw(ctx: CanvasRenderingContext2D) {\r\n        super.draw(ctx);\r\n        ctx.strokeStyle = this.strokeColour;\r\n        ctx.beginPath();\r\n        ctx.moveTo(g2lx(this.refPoint.x), g2ly(this.refPoint.y));\r\n        ctx.lineTo(g2lx(this.endPoint.x), g2ly(this.endPoint.y));\r\n        ctx.lineWidth = this.lineWidth;\r\n        ctx.stroke();\r\n    }\r\n    contains(point: GlobalPoint): boolean {\r\n        return false; // TODO\r\n    }\r\n\r\n    center(): GlobalPoint;\r\n    center(centerPoint: GlobalPoint): void;\r\n    center(centerPoint?: GlobalPoint): GlobalPoint | void {} // TODO\r\n    getCorner(point: GlobalPoint): string | undefined {\r\n        return \"\";\r\n    } // TODO\r\n    visibleInCanvas(canvas: HTMLCanvasElement): boolean {\r\n        return true;\r\n    } // TODO\r\n    snapToGrid(): void {}\r\n    resizeToGrid(): void {}\r\n    resize(resizeDir: string, point: LocalPoint): void {}\r\n}\r\n","// import \"./class-component-hooks\";\r\n\r\nimport axios, { AxiosResponse } from \"axios\";\r\nimport Vue from \"vue\";\r\nimport Router from \"vue-router\";\r\n\r\nVue.use(Router);\r\n\r\nimport AssetManager from \"@/assetManager/manager.vue\";\r\nimport Login from \"@/auth/login.vue\";\r\nimport Logout from \"@/auth/logout\";\r\nimport LoadComponent from \"@/core/components/load.vue\";\r\nimport Dashboard from \"@/dashboard/main.vue\";\r\nimport Game from \"@/game/game.vue\";\r\nimport Invitation from \"@/invitation/invitation\";\r\n\r\nimport { coreStore } from \"@/core/store\";\r\n// import { AssetManager } from \"./assetManager/assets\";\r\n// const AssetManager = () => import(\"./assetManager/assets\").then(m => m.AssetManager);\r\n\r\nexport const router = new Router({\r\n    mode: \"history\",\r\n    base: process.env.BASE_URL,\r\n    routes: [\r\n        {\r\n            path: \"/\",\r\n            redirect: \"/dashboard\",\r\n        },\r\n        {\r\n            path: \"/_load\",\r\n            name: \"load\",\r\n            component: LoadComponent,\r\n        },\r\n        {\r\n            path: \"/assets\",\r\n            component: AssetManager,\r\n            meta: {\r\n                auth: true,\r\n            },\r\n        },\r\n        {\r\n            path: \"/auth\",\r\n            component: { template: \"<router-view></router-view>\" },\r\n            children: [{ path: \"login\", component: Login }, { path: \"logout\", component: Logout }],\r\n        },\r\n        {\r\n            path: \"/invite/:code\",\r\n            component: Invitation,\r\n            meta: {\r\n                auth: true,\r\n            },\r\n        },\r\n        {\r\n            path: \"/dashboard\",\r\n            component: Dashboard,\r\n            meta: {\r\n                auth: true,\r\n            },\r\n        },\r\n        {\r\n            path: \"/game/:creator/:room\",\r\n            component: Game,\r\n            meta: {\r\n                auth: true,\r\n            },\r\n        },\r\n    ],\r\n});\r\n\r\nrouter.beforeEach((to, from, next) => {\r\n    if (!coreStore.initialized && to.path !== \"/_load\") {\r\n        next({ path: \"/_load\" });\r\n        axios\r\n            .get(\"/api/auth\")\r\n            .then((response: AxiosResponse) => {\r\n                if (response.data.auth) {\r\n                    coreStore.setAuthenticated(true);\r\n                    coreStore.setUsername(response.data.username);\r\n                }\r\n                coreStore.setInitialized(true);\r\n                router.push(to.path);\r\n            })\r\n            .catch(() => {\r\n                console.error(\"Authentication check could not be fulfilled.\");\r\n            });\r\n    } else if (to.matched.some(record => record.meta.auth) && !coreStore.authenticated) {\r\n        next({ path: \"/auth/login\", query: { redirect: to.path } });\r\n    } else {\r\n        next();\r\n    }\r\n});\r\n","\n\n\r\nimport Vue from \"vue\";\r\nimport Component from \"vue-class-component\";\r\n\r\n@Component\r\nexport default class Tool extends Vue {\r\n    name = \"\";\r\n    selected = false;\r\n    active = false;\r\n    get detailRight(): string {\r\n        const rect = (<any>this.$parent.$refs[this.name + \"-selector\"])[0].getBoundingClientRect();\r\n        const mid = rect.left + rect.width / 2;\r\n\r\n        return `${window.innerWidth - Math.min(window.innerWidth - 25, mid + 75)}px`;\r\n    }\r\n    get detailArrow(): string {\r\n        const rect = (<any>this.$parent.$refs[this.name + \"-selector\"])[0].getBoundingClientRect();\r\n        const mid = rect.left + rect.width / 2;\r\n        const right = Math.min(window.innerWidth - 25, mid + 75);\r\n        return `${right - mid - 14}px`; // border width\r\n    }\r\n    created() {\r\n        this.$parent.$on(\"mousedown\", (event: MouseEvent, tool: string) => {\r\n            if (tool === this.name) this.onMouseDown(event);\r\n        });\r\n        this.$parent.$on(\"mouseup\", (event: MouseEvent, tool: string) => {\r\n            if (tool === this.name) this.onMouseUp(event);\r\n        });\r\n        this.$parent.$on(\"mousemove\", (event: MouseEvent, tool: string) => {\r\n            if (tool === this.name) this.onMouseMove(event);\r\n        });\r\n        this.$parent.$on(\"contextmenu\", (event: MouseEvent, tool: string) => {\r\n            if (tool === this.name) this.onContextMenu(event);\r\n        });\r\n        this.$parent.$on(\"tools-select-change\", (newValue: string, oldValue: string) => {\r\n            if (oldValue === this.name) {\r\n                this.selected = false;\r\n                this.onDeselect();\r\n            } else if (newValue === this.name) {\r\n                this.selected = true;\r\n                this.onSelect();\r\n            }\r\n        });\r\n    }\r\n    onSelect() {}\r\n    onDeselect() {}\r\n    onMouseDown(event: MouseEvent) {}\r\n    onMouseUp(event: MouseEvent) {}\r\n    onMouseMove(event: MouseEvent) {}\r\n    onContextMenu(event: MouseEvent) {}\r\n}\r\n","import { render, staticRenderFns } from \"./tools.vue?vue&type=template&id=18f17c2d&scoped=true&\"\nimport script from \"./tools.vue?vue&type=script&lang=ts&\"\nexport * from \"./tools.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./tools.vue?vue&type=style&index=0&id=18f17c2d&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"18f17c2d\",\n  null\n  \n)\n\ncomponent.options.__file = \"tools.vue\"\nexport default component.exports","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tool.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tool.vue?vue&type=script&lang=ts&\"","import { InitiativeData } from \"@/game/comm/types/general\";\r\nimport { ServerAsset } from \"@/game/comm/types/shapes\";\r\nimport { GlobalPoint } from \"@/game/geom\";\r\nimport { BaseRect } from \"@/game/shapes/baserect\";\r\nimport { gameStore } from \"@/game/store\";\r\nimport { g2lx, g2ly, g2lz } from \"@/game/units\";\r\n\r\nexport class Asset extends BaseRect {\r\n    type = \"assetrect\";\r\n    img: HTMLImageElement;\r\n    src: string = \"\";\r\n    constructor(img: HTMLImageElement, topleft: GlobalPoint, w: number, h: number, uuid?: string) {\r\n        super(topleft, w, h);\r\n        if (uuid !== undefined) this.uuid = uuid;\r\n        this.img = img;\r\n    }\r\n    asDict() {\r\n        return Object.assign(this.getBaseDict(), {\r\n            src: this.src,\r\n        });\r\n    }\r\n    fromDict(data: ServerAsset) {\r\n        super.fromDict(data);\r\n        this.src = data.src;\r\n    }\r\n    draw(ctx: CanvasRenderingContext2D) {\r\n        super.draw(ctx);\r\n        try {\r\n            ctx.drawImage(this.img, g2lx(this.refPoint.x), g2ly(this.refPoint.y), g2lz(this.w), g2lz(this.h));\r\n        } catch (error) {\r\n            console.warn(`Shape ${this.uuid} could not load the image ${this.src}`);\r\n        }\r\n    }\r\n    getInitiativeRepr(): InitiativeData {\r\n        return {\r\n            uuid: this.uuid,\r\n            visible: !gameStore.IS_DM,\r\n            group: false,\r\n            source: this.src,\r\n            has_img: true,\r\n            effects: [],\r\n            index: Infinity,\r\n        };\r\n    }\r\n}\r\n","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./prompt.vue?vue&type=style&index=0&id=3c674586&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./prompt.vue?vue&type=style&index=0&id=3c674586&scoped=true&lang=css&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./note.vue?vue&type=style&index=0&id=6c3d2628&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./note.vue?vue&type=style&index=0&id=6c3d2628&scoped=true&lang=css&\"","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./draw.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./draw.vue?vue&type=script&lang=ts&\"","import { GlobalPoint } from \"@/game/geom\";\r\nimport { GridLayer } from \"@/game/layers/grid\";\r\nimport { Layer } from \"@/game/layers/layer\";\r\nimport { Asset } from \"@/game/shapes/asset\";\r\nimport { Shape } from \"@/game/shapes/shape\";\r\nimport { gameStore } from \"@/game/store\";\r\nimport { l2gx, l2gy, l2gz } from \"@/game/units\";\r\n\r\nclass LayerManager {\r\n    layers: Layer[] = [];\r\n    width = window.innerWidth;\r\n    height = window.innerHeight;\r\n\r\n    UUIDMap: Map<string, Shape> = new Map();\r\n\r\n    // Refresh interval and redraw setter.\r\n    interval = 30;\r\n\r\n    constructor() {\r\n        requestAnimationFrame(this.drawLoop);\r\n    }\r\n\r\n    reset() {\r\n        this.layers = [];\r\n        this.UUIDMap = new Map();\r\n    }\r\n\r\n    drawLoop = () => {\r\n        for (let i = this.layers.length - 1; i >= 0; i--) {\r\n            this.layers[i].draw();\r\n        }\r\n        requestAnimationFrame(this.drawLoop);\r\n    };\r\n\r\n    setWidth(width: number): void {\r\n        this.width = width;\r\n        for (const layer of this.layers) {\r\n            layer.canvas.width = width;\r\n            layer.width = width;\r\n        }\r\n    }\r\n\r\n    setHeight(height: number): void {\r\n        this.height = height;\r\n        for (const layer of this.layers) {\r\n            layer.canvas.height = height;\r\n            layer.height = height;\r\n        }\r\n    }\r\n\r\n    addLayer(layer: Layer): void {\r\n        this.layers.push(layer);\r\n        if (!gameStore.IS_DM && !layer.playerEditable) return;\r\n        if (layer.selectable) gameStore.addLayer(layer.name);\r\n    }\r\n\r\n    hasLayer(name: string): boolean {\r\n        return this.layers.some(l => l.name === name);\r\n    }\r\n\r\n    getLayer(name?: string) {\r\n        name = name === undefined ? gameStore.selectedLayer : name;\r\n        for (const layer of this.layers) {\r\n            if (layer.name === name) return layer;\r\n        }\r\n    }\r\n\r\n    selectLayer(name: string, sync: boolean = true): void {\r\n        let found = false;\r\n        for (const layer of this.layers) {\r\n            if (!layer.selectable) continue;\r\n            if (found && layer.name !== \"fow\") layer.ctx.globalAlpha = 0.3;\r\n            else layer.ctx.globalAlpha = 1.0;\r\n\r\n            if (name === layer.name) {\r\n                gameStore.selectLayer({ name, sync });\r\n                found = true;\r\n            }\r\n\r\n            layer.clearSelection();\r\n            layer.invalidate(true);\r\n        }\r\n    }\r\n\r\n    getGridLayer(): GridLayer | undefined {\r\n        return <GridLayer>this.getLayer(\"grid\");\r\n    }\r\n\r\n    hasSelection() {\r\n        const selection = this.getSelection();\r\n        return selection !== undefined && selection.length > 0;\r\n    }\r\n\r\n    // THIS INCLUDES POTENTIALLY THE SelectTool.SelectionHelper !!!\r\n    getSelection() {\r\n        const layer = this.getLayer();\r\n        if (layer === undefined) return undefined;\r\n        return layer.selection;\r\n    }\r\n\r\n    invalidate(): void {\r\n        for (let i = this.layers.length - 1; i >= 0; i--) {\r\n            this.layers[i].invalidate(true);\r\n        }\r\n    }\r\n\r\n    invalidateLight() {\r\n        for (let i = this.layers.length - 1; i >= 0; i--)\r\n            if (this.layers[i].isVisionLayer) this.layers[i].invalidate(true);\r\n    }\r\n\r\n    dropAsset(event: DragEvent) {\r\n        const layer = this.getLayer();\r\n        if (layer === undefined || event === null || event.dataTransfer === null) return;\r\n        const image = document.createElement(\"img\");\r\n        image.src = event.dataTransfer.getData(\"text/plain\");\r\n        const asset = new Asset(\r\n            image,\r\n            new GlobalPoint(l2gx(event.clientX), l2gy(event.clientY)),\r\n            l2gz(image.width),\r\n            l2gz(image.height),\r\n        );\r\n        asset.src = new URL(image.src).pathname;\r\n\r\n        if (gameStore.useGrid) {\r\n            const gs = gameStore.gridSize;\r\n            asset.refPoint.x = Math.round(asset.refPoint.x / gs) * gs;\r\n            asset.refPoint.y = Math.round(asset.refPoint.y / gs) * gs;\r\n            asset.w = Math.max(Math.round(asset.w / gs) * gs, gs);\r\n            asset.h = Math.max(Math.round(asset.h / gs) * gs, gs);\r\n        }\r\n\r\n        layer.addShape(asset, true);\r\n    }\r\n}\r\n\r\nexport const layerManager = new LayerManager();\r\n(<any>window).lm = layerManager;\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./initiative.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./initiative.vue?vue&type=script&lang=ts&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./selectcontext.vue?vue&type=style&index=0&id=6d5bd46a&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./selectcontext.vue?vue&type=style&index=0&id=6d5bd46a&scoped=true&lang=css&\"","import { render, staticRenderFns } from \"./createtoken_modal.vue?vue&type=template&id=254e8bcf&scoped=true&\"\nimport script from \"./createtoken_modal.vue?vue&type=script&lang=ts&\"\nexport * from \"./createtoken_modal.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./createtoken_modal.vue?vue&type=style&index=0&id=254e8bcf&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"254e8bcf\",\n  null\n  \n)\n\ncomponent.options.__file = \"createtoken_modal.vue\"\nexport default component.exports","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./createtoken_modal.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./createtoken_modal.vue?vue&type=script&lang=ts&\"","import Tools from \"../ui/tools/tools.vue\";\r\n\r\nimport { getRef } from \"@/core/utils\";\r\nimport { socket } from \"@/game/api/socket\";\r\nimport { sendClientOptions } from \"@/game/api/utils\";\r\nimport { EventBus } from \"@/game/event-bus\";\r\nimport { Vector } from \"@/game/geom\";\r\nimport { layerManager } from \"@/game/layers/manager\";\r\nimport { gameStore } from \"@/game/store\";\r\nimport { calculateDelta } from \"@/game/ui/tools/utils\";\r\n\r\nexport function onKeyUp(event: KeyboardEvent) {\r\n    if (event.target instanceof HTMLInputElement || event.target instanceof HTMLTextAreaElement) {\r\n    } else {\r\n        if (event.key === \"Delete\" || event.key === \"Del\" || event.key === \"Backspace\") {\r\n            if (layerManager.getLayer === undefined) {\r\n                console.log(\"No active layer selected for delete operation\");\r\n                return;\r\n            }\r\n            const l = layerManager.getLayer()!;\r\n            for (let i = l.selection.length - 1; i >= 0; i--) {\r\n                const sel = l.selection[i];\r\n                if ((<any>getRef<Tools>(\"tools\").$refs.selectTool).selectionHelper.uuid === sel.uuid) {\r\n                    l.selection.splice(i, 1);\r\n                    continue;\r\n                }\r\n                l.removeShape(sel, true, false);\r\n                EventBus.$emit(\"SelectionInfo.Shape.Set\", null);\r\n                EventBus.$emit(\"Initiative.Remove\", sel.uuid);\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport function onKeyDown(event: KeyboardEvent) {\r\n    if (event.target instanceof HTMLInputElement || event.target instanceof HTMLTextAreaElement) {\r\n        if (event.keyCode === 65 && event.ctrlKey) event.target!.select();\r\n    } else {\r\n        if (event.keyCode >= 37 && event.keyCode <= 40) {\r\n            // todo: this should already be rounded\r\n            const gridSize = Math.round(gameStore.gridSize);\r\n            let offsetX = gridSize * (event.keyCode % 2);\r\n            let offsetY = gridSize * (event.keyCode % 2 ? 0 : 1);\r\n            if (layerManager.hasSelection()) {\r\n                const selection = layerManager.getSelection()!;\r\n                offsetX *= event.keyCode <= 38 ? -1 : 1;\r\n                offsetY *= event.keyCode <= 38 ? -1 : 1;\r\n                let delta = new Vector(offsetX, offsetY);\r\n                if (!event.shiftKey || !gameStore.IS_DM) {\r\n                    // First check for collisions.  Using the smooth wall slide collision check used on mouse move is overkill here.\r\n                    for (const sel of selection) delta = calculateDelta(delta, sel);\r\n                }\r\n                for (const sel of selection) {\r\n                    sel.refPoint.x += delta.x;\r\n                    sel.refPoint.y += delta.y;\r\n                    if (sel.refPoint.x % gridSize !== 0 || sel.refPoint.y % gridSize !== 0) sel.snapToGrid();\r\n                    socket.emit(\"Shape.Position.Update\", { shape: sel.asDict(), redraw: true, temporary: false });\r\n                }\r\n                layerManager.getLayer()!.invalidate(false);\r\n            } else {\r\n                // The pan offsets should be in the opposite direction to give the correct feel.\r\n                gameStore.increasePanX(offsetX * (event.keyCode <= 38 ? 1 : -1));\r\n                gameStore.increasePanY(offsetY * (event.keyCode <= 38 ? 1 : -1));\r\n                layerManager.invalidate();\r\n                sendClientOptions();\r\n            }\r\n        } else if (event.keyCode === 68) {\r\n            const layer = layerManager.getLayer();\r\n            if (layer) {\r\n                layer.clearSelection();\r\n                layer.invalidate(true);\r\n            }\r\n        }\r\n    }\r\n}\r\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./manager.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./manager.vue?vue&type=style&index=0&lang=css&\"","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport Vue from \"vue\";\r\n\r\nimport ShapeContext from \"@/game/ui/selection/shapecontext.vue\";\r\nimport CreateTokenModal from \"@/game/ui/tools/createtoken_modal.vue\";\r\nimport DrawTool from \"@/game/ui/tools/draw.vue\";\r\nimport MapTool from \"@/game/ui/tools/map.vue\";\r\nimport PanTool from \"@/game/ui/tools/pan\";\r\nimport SelectTool from \"@/game/ui/tools/select.vue\";\r\n\r\nimport { layerManager } from \"@/game/layers/manager\";\r\nimport { gameManager } from \"@/game/manager\";\r\nimport { gameStore } from \"@/game/store\";\r\nimport { RulerTool } from \"@/game/ui/tools/ruler\";\r\nimport { l2g } from \"@/game/units\";\r\nimport { getMouse } from \"@/game/utils\";\r\nimport Component from \"vue-class-component\";\r\n\r\n@Component({\r\n    components: {\r\n        \"select-tool\": SelectTool,\r\n        \"pan-tool\": PanTool,\r\n        \"draw-tool\": DrawTool,\r\n        \"ruler-tool\": RulerTool,\r\n        \"map-tool\": MapTool,\r\n        \"shape-menu\": ShapeContext,\r\n        \"createtoken-dialog\": CreateTokenModal,\r\n    },\r\n    watch: {\r\n        currentTool(newValue, oldValue) {\r\n            this.$emit(\"tools-select-change\", newValue, oldValue);\r\n        },\r\n    },\r\n})\r\nexport default class Tools extends Vue {\r\n    $refs!: {\r\n        selectTool: InstanceType<typeof SelectTool>;\r\n    };\r\n\r\n    currentTool = \"Select\";\r\n    tools = [\"Select\", \"Pan\", \"Draw\", \"Ruler\", \"Map\"];\r\n    dmTools = [\"Map\"];\r\n\r\n    get IS_DM(): boolean {\r\n        return gameStore.IS_DM;\r\n    }\r\n\r\n    get currentToolComponent(): string {\r\n        return `${this.currentTool.toLowerCase()}-tool`;\r\n    }\r\n\r\n    mousedown(event: MouseEvent) {\r\n        if ((<HTMLElement>event.target).tagName !== \"CANVAS\") return;\r\n\r\n        let targetTool = this.currentTool;\r\n        if (event.button === 1) {\r\n            targetTool = \"Pan\";\r\n        } else if (event.button !== 0) {\r\n            return;\r\n        }\r\n\r\n        this.$emit(\"mousedown\", event, targetTool);\r\n    }\r\n    mouseup(event: MouseEvent) {\r\n        if ((<HTMLElement>event.target).tagName !== \"CANVAS\") return;\r\n\r\n        let targetTool = this.currentTool;\r\n        if (event.button === 1) {\r\n            targetTool = \"Pan\";\r\n        } else if (event.button !== 0) {\r\n            return;\r\n        }\r\n\r\n        this.$emit(\"mouseup\", event, targetTool);\r\n    }\r\n    mousemove(event: MouseEvent) {\r\n        if ((<HTMLElement>event.target).tagName !== \"CANVAS\") return;\r\n\r\n        let targetTool = this.currentTool;\r\n        if ((event.buttons & 4) !== 0) {\r\n            targetTool = \"Pan\";\r\n        } else if ((event.button & 1) > 1) {\r\n            return;\r\n        }\r\n\r\n        this.$emit(\"mousemove\", event, targetTool);\r\n\r\n        // Annotation hover\r\n        let found = false;\r\n        for (const uuid of gameStore.annotations) {\r\n            if (layerManager.UUIDMap.has(uuid) && layerManager.hasLayer(\"draw\")) {\r\n                const shape = layerManager.UUIDMap.get(uuid)!;\r\n                if (shape.contains(l2g(getMouse(event)))) {\r\n                    found = true;\r\n                    gameManager.annotationManager.setActiveText(shape.annotation);\r\n                }\r\n            }\r\n        }\r\n        if (!found && gameManager.annotationManager.shown) {\r\n            gameManager.annotationManager.setActiveText(\"\");\r\n        }\r\n    }\r\n    mouseleave(event: MouseEvent) {\r\n        // When leaving the window while a mouse is pressed down, act as if it was released\r\n        if ((event.buttons & 1) !== 0) {\r\n            this.$emit(\"mouseup\", event, this.currentTool);\r\n        }\r\n    }\r\n    contextmenu(event: MouseEvent) {\r\n        if ((<HTMLElement>event.target).tagName !== \"CANVAS\") return;\r\n        if (event.button !== 2 || (<HTMLElement>event.target).tagName !== \"CANVAS\") return;\r\n        this.$emit(\"contextmenu\", event, this.currentTool);\r\n    }\r\n}\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./selection_info.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./selection_info.vue?vue&type=script&lang=ts&\"","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./modal.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./modal.vue?vue&type=script&lang=ts&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./contextmenu.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./contextmenu.vue?vue&type=style&index=0&lang=css&\"","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport Vue from \"vue\";\r\nimport Component from \"vue-class-component\";\r\n\r\nimport Modal from \"@/core/components/modals/modal.vue\";\r\n\r\n@Component({\r\n    components: {\r\n        Modal,\r\n    },\r\n})\r\nexport default class Prompt extends Vue {\r\n    $refs!: {\r\n        answer: HTMLElement;\r\n    };\r\n\r\n    visible = false;\r\n    question = \"\";\r\n    answer = \"\";\r\n    title = \"\";\r\n\r\n    resolve = (value: string) => {};\r\n    reject = () => {};\r\n\r\n    submit() {\r\n        this.resolve(this.answer);\r\n        this.close();\r\n    }\r\n    close() {\r\n        this.reject();\r\n        this.visible = false;\r\n        this.question = \"\";\r\n        this.answer = \"\";\r\n        this.title = \"\";\r\n    }\r\n    prompt(question: string, title: string): Promise<string> {\r\n        this.question = question;\r\n        this.title = title;\r\n        this.visible = true;\r\n        this.$nextTick(() => {\r\n            this.$refs.answer.focus();\r\n        });\r\n        return new Promise((resolve, reject) => {\r\n            this.resolve = resolve;\r\n            this.reject = reject;\r\n        });\r\n    }\r\n}\r\n","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./menu.vue?vue&type=style&index=0&id=56348a0e&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./menu.vue?vue&type=style&index=0&id=56348a0e&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.note !== null)?_c('modal',{attrs:{\"visible\":_vm.visible,\"mask\":false},on:{\"close\":function($event){_vm.visible = false}},scopedSlots:_vm._u([{key:\"header\",fn:function(m){return _c('div',{staticClass:\"modal-header\",attrs:{\"draggable\":\"true\"},on:{\"dragstart\":m.dragStart,\"dragend\":m.dragEnd}},[_c('span',{on:{\"click\":function($event){_vm.$refs.title.select()}}},[_c('i',{staticClass:\"fas fa-pencil-alt\",staticStyle:{\"font-size\":\"15px\"}})]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.note.title),expression:\"note.title\"}],ref:\"title\",domProps:{\"value\":(_vm.note.title)},on:{\"change\":_vm.updateNote,\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.note, \"title\", $event.target.value)}}}),_c('div',{staticClass:\"header-close\",on:{\"click\":function($event){_vm.visible = false}}},[_c('i',{staticClass:\"far fa-window-close\"})])])}}])},[_c('div',{staticClass:\"modal-body\"},[_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.note.text),expression:\"note.text\"}],ref:\"textarea\",style:({'height': _vm.calcHeight()}),domProps:{\"value\":(_vm.note.text)},on:{\"change\":_vm.updateNote,\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.note, \"text\", $event.target.value)}}})]),_c('div',{staticClass:\"modal-footer\"},[_c('button',{on:{\"click\":_vm.removeNote}},[_c('i',{staticClass:\"far fa-trash-alt\"}),_vm._v(\" Remove\\n    \")])])]):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"339cf1e4-vue-loader-template\\\"}!../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./note.vue?vue&type=template&id=6c3d2628&scoped=true&\"","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./menu.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./menu.vue?vue&type=script&lang=ts&\"","import { GlobalPoint, Point, Ray, Vector } from \"@/game/geom\";\r\n\r\nexport class BoundingRect {\r\n    readonly w: number;\r\n    readonly h: number;\r\n    readonly topLeft: GlobalPoint;\r\n    readonly topRight: GlobalPoint;\r\n    readonly botRight: GlobalPoint;\r\n    readonly botLeft: GlobalPoint;\r\n\r\n    constructor(topleft: GlobalPoint, w: number, h: number) {\r\n        this.w = w;\r\n        this.h = h;\r\n        this.topLeft = topleft;\r\n        this.topRight = new GlobalPoint(topleft.x + w, topleft.y);\r\n        this.botRight = new GlobalPoint(topleft.x + w, topleft.y + h);\r\n        this.botLeft = new GlobalPoint(topleft.x, topleft.y + h);\r\n    }\r\n\r\n    contains(point: GlobalPoint): boolean {\r\n        return (\r\n            this.topLeft.x <= point.x &&\r\n            this.topRight.x >= point.x &&\r\n            this.topLeft.y <= point.y &&\r\n            this.botLeft.y >= point.y\r\n        );\r\n    }\r\n\r\n    offset(vector: Vector): BoundingRect {\r\n        return new BoundingRect(this.topLeft.add(vector), this.w, this.h);\r\n    }\r\n\r\n    union(other: BoundingRect): BoundingRect {\r\n        const xmin = Math.min(this.topLeft.x, other.topLeft.x);\r\n        const xmax = Math.max(this.topRight.x, other.topRight.x);\r\n        const ymin = Math.min(this.topLeft.y, other.topLeft.y);\r\n        const ymax = Math.max(this.botLeft.y, other.botLeft.y);\r\n        return new BoundingRect(new GlobalPoint(xmin, ymin), xmax - xmin, ymax - ymin);\r\n    }\r\n\r\n    getDiagCorner(botright: boolean) {\r\n        return botright ? this.botRight : this.topLeft;\r\n    }\r\n\r\n    intersectsWith(other: BoundingRect): boolean {\r\n        return !(\r\n            other.topLeft.x > this.topRight.x ||\r\n            other.topRight.x < this.topLeft.x ||\r\n            other.topLeft.y > this.botLeft.y ||\r\n            other.botLeft.y < this.topLeft.y\r\n        );\r\n    }\r\n\r\n    intersectsWithInner(other: BoundingRect): boolean {\r\n        return !(\r\n            other.topLeft.x >= this.topRight.x ||\r\n            other.topRight.x <= this.topLeft.x ||\r\n            other.topLeft.y >= this.botLeft.y ||\r\n            other.botLeft.y <= this.topLeft.y\r\n        );\r\n    }\r\n\r\n    intersectP(ray: Ray<Point>, invDir: Vector, dirIsNeg: boolean[]) {\r\n        let txmin = invDir.x * (this.getDiagCorner(dirIsNeg[0]).x - ray.origin!.x);\r\n        let txmax = invDir.x * (this.getDiagCorner(!dirIsNeg[0]).x - ray.origin!.x);\r\n        const tymin = invDir.y * (this.getDiagCorner(dirIsNeg[1]).y - ray.origin!.y);\r\n        const tymax = invDir.y * (this.getDiagCorner(!dirIsNeg[1]).y - ray.origin!.y);\r\n        if (txmin > tymax || tymin > txmax) return { hit: false, min: txmin, max: txmax };\r\n        if (tymin > txmin) txmin = tymin;\r\n        if (tymax < txmax) txmax = tymax;\r\n        return { hit: txmin < ray.tMax! && txmax > 0, min: txmin, max: txmax };\r\n    }\r\n\r\n    center(): GlobalPoint;\r\n    center(centerPoint: GlobalPoint): void;\r\n    center(centerPoint?: GlobalPoint): GlobalPoint | void {\r\n        if (centerPoint === undefined) return this.topLeft.add(new Vector(this.w / 2, this.h / 2));\r\n        this.topLeft.x = centerPoint.x - this.w / 2;\r\n        this.topLeft.y = centerPoint.y - this.h / 2;\r\n    }\r\n    inCorner(point: GlobalPoint, corner: string) {\r\n        const sw = Math.min(6, this.w / 2) / 2;\r\n        switch (corner) {\r\n            case \"ne\":\r\n                return (\r\n                    this.topRight.x - sw <= point.x &&\r\n                    point.x <= this.topRight.x + sw &&\r\n                    this.topLeft.y - sw <= point.y &&\r\n                    point.y <= this.topLeft.y + sw\r\n                );\r\n            case \"nw\":\r\n                return (\r\n                    this.topLeft.x - sw <= point.x &&\r\n                    point.x <= this.topLeft.x + sw &&\r\n                    this.topLeft.y - sw <= point.y &&\r\n                    point.y <= this.topLeft.y + sw\r\n                );\r\n            case \"sw\":\r\n                return (\r\n                    this.topLeft.x - sw <= point.x &&\r\n                    point.x <= this.topLeft.x + sw &&\r\n                    this.botLeft.y - sw <= point.y &&\r\n                    point.y <= this.botLeft.y + sw\r\n                );\r\n            case \"se\":\r\n                return (\r\n                    this.topRight.x - sw <= point.x &&\r\n                    point.x <= this.topRight.x + sw &&\r\n                    this.botLeft.y - sw <= point.y &&\r\n                    point.y <= this.botLeft.y + sw\r\n                );\r\n            default:\r\n                return false;\r\n        }\r\n    }\r\n    getCorner(point: GlobalPoint): string | undefined {\r\n        if (this.inCorner(point, \"ne\")) return \"ne\";\r\n        else if (this.inCorner(point, \"nw\")) return \"nw\";\r\n        else if (this.inCorner(point, \"se\")) return \"se\";\r\n        else if (this.inCorner(point, \"sw\")) return \"sw\";\r\n    }\r\n\r\n    getMaxExtent() {\r\n        return this.w > this.h ? 0 : 1;\r\n    }\r\n}\r\n","/*\r\nThis module defines some Point classes.\r\nA strong focus is made to ensure that at no time a global and a local point are mixed up with each other.\r\nAt first glance this adds weird looking hacks as ts does not support nominal typing.\r\n*/\r\n\r\nexport function getPointDistance(p1: Point, p2: Point) {\r\n    const a = p1.x - p2.x;\r\n    const b = p1.y - p2.y;\r\n    return Math.sqrt(a * a + b * b);\r\n}\r\n\r\nexport class Point {\r\n    x: number;\r\n    y: number;\r\n    constructor(x: number, y: number) {\r\n        this.x = x;\r\n        this.y = y;\r\n    }\r\n    add(vec: Vector) {\r\n        return new Point(this.x + vec.x, this.y + vec.y);\r\n    }\r\n    subtract(other: Point) {\r\n        return new Vector(this.x - other.x, this.y - other.y);\r\n    }\r\n    clone(): Point {\r\n        return new Point(this.x, this.y);\r\n    }\r\n    get(dimension: 0 | 1) {\r\n        if (dimension === 0) return this.x;\r\n        return this.y;\r\n    }\r\n}\r\nexport class GlobalPoint extends Point {\r\n    // This is to differentiate with LocalPoint, is actually never used\r\n    // We do ! to prevent errors that it never gets initialized\r\n    // tslint:disable-next-line:variable-name\r\n    _GlobalPoint!: string;\r\n    add(vec: Vector): GlobalPoint {\r\n        return <GlobalPoint>super.add(vec);\r\n    }\r\n    subtract(other: GlobalPoint): Vector {\r\n        return super.subtract(other);\r\n    }\r\n    clone(): GlobalPoint {\r\n        return <GlobalPoint>super.clone();\r\n    }\r\n}\r\n\r\nexport class LocalPoint extends Point {\r\n    // This is to differentiate with GlobalPoint, is actually never used\r\n    // We do ! to prevent errors that it never gets initialized\r\n    // tslint:disable-next-line:variable-name\r\n    _LocalPoint!: string;\r\n    add(vec: Vector): LocalPoint {\r\n        return <LocalPoint>super.add(vec);\r\n    }\r\n    subtract(other: LocalPoint): Vector {\r\n        return super.subtract(other);\r\n    }\r\n    clone(): LocalPoint {\r\n        return <LocalPoint>super.clone();\r\n    }\r\n}\r\n\r\nexport class Vector {\r\n    readonly x: number;\r\n    readonly y: number;\r\n    constructor(x: number, y: number) {\r\n        this.x = x;\r\n        this.y = y;\r\n    }\r\n    dot(other: Vector) {\r\n        return this.x * other.x + this.y * other.y;\r\n    }\r\n    inverse() {\r\n        return new Vector(1 / this.x, 1 / this.y);\r\n    }\r\n    length() {\r\n        return Math.sqrt(Math.pow(this.x, 2) + Math.pow(this.y, 2));\r\n    }\r\n    normalize() {\r\n        const l = this.length();\r\n        return new Vector(this.x / l, this.y / l);\r\n    }\r\n    reverse() {\r\n        return new Vector(-this.x, -this.y);\r\n    }\r\n    multiply(scale: number) {\r\n        return new Vector(this.x * scale, this.y * scale);\r\n    }\r\n}\r\n\r\nexport class Ray<T extends Point> {\r\n    readonly direction: Vector;\r\n    readonly origin: T;\r\n    tMax: number;\r\n    constructor(origin: T, direction: Vector, tMax?: number) {\r\n        this.direction = direction;\r\n        this.origin = origin;\r\n        if (tMax === undefined) tMax = Infinity;\r\n        this.tMax = tMax;\r\n    }\r\n    static fromPoints<T extends Point>(p1: T, p2: T): Ray<T> {\r\n        const vec = new Vector(p2.x - p1.x, p2.y - p1.y);\r\n        let maxT;\r\n        if (Math.abs(vec.x) > 0.01) maxT = (p2.x - p1.x) / vec.x;\r\n        else maxT = (p2.y - p1.y) / vec.y;\r\n        return new Ray(p1, vec, maxT);\r\n    }\r\n    get(t: number): T {\r\n        return <T>new Point(this.origin.x + t * this.direction.x, this.origin.y + t * this.direction.y);\r\n    }\r\n    getDistance(t1: number, t2: number) {\r\n        return Math.sqrt(Math.pow(t2 - t1, 2) * (Math.pow(this.direction.x, 2) + Math.pow(this.direction.y, 2)));\r\n    }\r\n    getT(t1: number, distance: number) {\r\n        return t1 + Math.sqrt(Math.pow(distance, 2) / (Math.pow(this.direction.x, 2) + Math.pow(this.direction.y, 2)));\r\n    }\r\n}\r\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport Vue from \"vue\";\r\nimport Component from \"vue-class-component\";\r\nimport vueSlider from \"vue-slider-component\";\r\n\r\nimport \"@/game/api/events\";\r\n\r\nimport { throttle } from \"lodash\";\r\nimport { mapGetters, mapState } from \"vuex\";\r\n\r\nimport ConfirmDialog from \"@/core/components/modals/confirm.vue\";\r\nimport Prompt from \"@/core/components/modals/prompt.vue\";\r\nimport Initiative from \"@/game/ui/initiative.vue\";\r\nimport MenuBar from \"@/game/ui/menu/menu.vue\";\r\nimport NoteDialog from \"@/game/ui/note.vue\";\r\nimport SelectionInfo from \"@/game/ui/selection/selection_info.vue\";\r\nimport Tools from \"@/game/ui/tools/tools.vue\";\r\n\r\nimport { createConnection, socket } from \"@/game/api/socket\";\r\nimport { onKeyDown, onKeyUp } from \"@/game/events/keyboard\";\r\nimport { scrollZoom } from \"@/game/events/mouse\";\r\nimport { layerManager } from \"@/game/layers/manager\";\r\nimport { gameStore } from \"@/game/store\";\r\nimport { l2g } from \"@/game/units\";\r\nimport { LocalPoint } from \"./geom\";\r\n\r\n@Component({\r\n    components: {\r\n        \"tool-bar\": Tools,\r\n        \"selection-info\": SelectionInfo,\r\n        \"prompt-dialog\": Prompt,\r\n        \"confirm-dialog\": ConfirmDialog,\r\n        \"menu-bar\": MenuBar,\r\n        \"initiative-dialog\": Initiative,\r\n        \"zoom-slider\": vueSlider,\r\n        \"note-dialog\": NoteDialog,\r\n    },\r\n    beforeRouteEnter(to, from, next) {\r\n        createConnection(to);\r\n        next();\r\n    },\r\n    beforeRouteLeave(to, from, next) {\r\n        socket.disconnect();\r\n        next();\r\n    },\r\n})\r\nexport default class Game extends Vue {\r\n    $refs!: {\r\n        confirm: InstanceType<typeof ConfirmDialog>;\r\n        tools: InstanceType<typeof Tools>;\r\n    };\r\n\r\n    ready = {\r\n        manager: false,\r\n        tools: false,\r\n    };\r\n\r\n    get IS_DM(): boolean {\r\n        return gameStore.IS_DM;\r\n    }\r\n\r\n    get layers(): string[] {\r\n        return gameStore.layers;\r\n    }\r\n\r\n    get selectedLayer(): string {\r\n        return gameStore.selectedLayer;\r\n    }\r\n\r\n    get zoomFactor(): number {\r\n        return gameStore.zoomFactor;\r\n    }\r\n\r\n    set zoomFactor(value: number) {\r\n        gameStore.updateZoom({\r\n            newZoomValue: value,\r\n            zoomLocation: l2g(new LocalPoint(window.innerWidth / 2, window.innerHeight / 2)),\r\n        });\r\n    }\r\n\r\n    mounted() {\r\n        window.addEventListener(\"resize\", () => {\r\n            layerManager.setWidth(window.innerWidth);\r\n            layerManager.setHeight(window.innerHeight);\r\n            layerManager.invalidate();\r\n        });\r\n        window.addEventListener(\"wheel\", throttle(scrollZoom));\r\n        window.addEventListener(\"keyup\", onKeyUp);\r\n        window.addEventListener(\"keydown\", onKeyDown);\r\n        // // prevent double clicking text selection\r\n        window.addEventListener(\"selectstart\", e => {\r\n            e.preventDefault();\r\n            return false;\r\n        });\r\n        this.ready.manager = true;\r\n    }\r\n\r\n    mousedown(event: MouseEvent) {\r\n        this.$refs.tools.mousedown(event);\r\n    }\r\n    mouseup(event: MouseEvent) {\r\n        this.$refs.tools.mouseup(event);\r\n    }\r\n    mousemove(event: MouseEvent) {\r\n        this.$refs.tools.mousemove(event);\r\n    }\r\n    mouseleave(event: MouseEvent) {\r\n        this.$refs.tools.mouseleave(event);\r\n    }\r\n    contextmenu(event: MouseEvent) {\r\n        this.$refs.tools.contextmenu(event);\r\n    }\r\n    selectLayer(layer: string) {\r\n        layerManager.selectLayer(layer);\r\n    }\r\n    drop(event: DragEvent) {\r\n        if (event === null || event.dataTransfer === null) return;\r\n        if (event.dataTransfer.files.length > 0) {\r\n            this.$refs.confirm\r\n                .open(\"Uploading files should be done through the asset manager.\", \"Ok\", \"\")\r\n                .then(() => {}, () => {});\r\n        } else if (event.dataTransfer.getData(\"text/plain\") === \"\") {\r\n            return;\r\n        } else {\r\n            layerManager.dropAsset(event);\r\n        }\r\n    }\r\n}\r\n","import { GlobalPoint, LocalPoint, Ray } from \"@/game/geom\";\r\nimport { gameStore } from \"@/game/store\";\r\n\r\nexport function g2l(obj: GlobalPoint): LocalPoint {\r\n    const z = gameStore.zoomFactor;\r\n    const panX = gameStore.panX;\r\n    const panY = gameStore.panY;\r\n    return new LocalPoint((obj.x + panX) * z, (obj.y + panY) * z);\r\n}\r\n\r\nexport function g2lx(x: number) {\r\n    return g2l(new GlobalPoint(x, 0)).x;\r\n}\r\n\r\nexport function g2ly(y: number) {\r\n    return g2l(new GlobalPoint(0, y)).y;\r\n}\r\n\r\nexport function g2lz(z: number) {\r\n    return z * gameStore.zoomFactor;\r\n}\r\n\r\nexport function getUnitDistance(r: number) {\r\n    return (r / gameStore.unitSize) * gameStore.gridSize;\r\n}\r\n\r\nexport function g2lr(r: number) {\r\n    return g2lz(getUnitDistance(r));\r\n}\r\n\r\nexport function l2g(obj: LocalPoint): GlobalPoint;\r\nexport function l2g(obj: Ray<LocalPoint>): Ray<GlobalPoint>;\r\nexport function l2g(obj: LocalPoint | Ray<LocalPoint>): GlobalPoint | Ray<GlobalPoint> {\r\n    const z = gameStore.zoomFactor;\r\n    const panX = gameStore.panX;\r\n    const panY = gameStore.panY;\r\n    if (obj instanceof LocalPoint) {\r\n        return new GlobalPoint(obj.x / z - panX, obj.y / z - panY);\r\n    } else {\r\n        return new Ray<GlobalPoint>(l2g(obj.origin), obj.direction.multiply(1 / z), obj.tMax);\r\n    }\r\n}\r\n\r\nexport function l2gx(x: number) {\r\n    return l2g(new LocalPoint(x, 0)).x;\r\n}\r\n\r\nexport function l2gy(y: number) {\r\n    return l2g(new LocalPoint(0, y)).y;\r\n}\r\n\r\nexport function l2gz(z: number) {\r\n    return z / gameStore.zoomFactor;\r\n}\r\n\r\nexport function l2gr(r: number) {\r\n    return l2gz(getUnitDistance(r));\r\n}\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('transition',{attrs:{\"name\":\"modal\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.visible),expression:\"visible\"}],staticClass:\"mask\",class:{'modal-mask': _vm.mask, 'dialog-mask': !_vm.mask},on:{\"click\":_vm.close,\"dragover\":function($event){$event.preventDefault();return _vm.dragOver($event)}}},[_c('div',{ref:\"container\",staticClass:\"modal-container\",on:{\"click\":function($event){$event.stopPropagation();}}},[_vm._t(\"header\",null,{dragStart:_vm.dragStart,dragEnd:_vm.dragEnd}),_vm._t(\"default\")],2)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"339cf1e4-vue-loader-template\\\"}!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./modal.vue?vue&type=template&id=8b7717ce&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"AssetManager\"}},[_c('div',{attrs:{\"id\":\"titlebar\"}},[_vm._v(\"Asset Manager\")]),_c('div',{attrs:{\"id\":\"main\"}},[_c('div',{attrs:{\"id\":\"assets\"},on:{\"dragover\":function($event){$event.preventDefault();return _vm.moveDrag($event)},\"drop\":function($event){$event.preventDefault();$event.stopPropagation();_vm.stopDrag($event, _vm.currentFolder)}}},[_c('div',{attrs:{\"id\":\"breadcrumbs\"}},[_c('div',[_vm._v(\"/\")]),_vm._l((_vm.path),function(dir){return _c('div',{key:dir},[_vm._v(_vm._s(_vm.idMap.get(dir).name))])})],2),_c('div',{attrs:{\"id\":\"actionbar\"}},[_c('input',{attrs:{\"id\":\"files\",\"type\":\"file\",\"multiple\":\"\",\"hidden\":\"\"},on:{\"change\":function($event){_vm.upload()}}}),_c('div',{attrs:{\"title\":\"Create folder\"},on:{\"click\":_vm.createDirectory}},[_c('i',{staticClass:\"fas fa-plus-square\"})]),_c('div',{attrs:{\"title\":\"Upload files\"},on:{\"click\":_vm.prepareUpload}},[_c('i',{staticClass:\"fas fa-upload\"})])]),_c('div',{attrs:{\"id\":\"explorer\"}},[(_vm.path.length)?_c('div',{staticClass:\"inode folder\",on:{\"dblclick\":function($event){_vm.changeDirectory(-1)},\"dragover\":function($event){$event.preventDefault();return _vm.moveDrag($event)},\"dragleave\":function($event){$event.preventDefault();return _vm.leaveDrag($event)},\"drop\":function($event){$event.preventDefault();$event.stopPropagation();_vm.stopDrag($event, _vm.parentFolder)}}},[_c('i',{staticClass:\"fas fa-folder\",staticStyle:{\"font-size\":\"50px\"}}),_c('div',{staticClass:\"title\"},[_vm._v(\"..\")])]):_vm._e(),_vm._l((_vm.folders),function(key){return _c('div',{key:key,staticClass:\"inode folder\",class:{'inode-selected': _vm.selected.includes(key)},attrs:{\"draggable\":\"true\"},on:{\"click\":function($event){_vm.select($event, key)},\"dblclick\":function($event){_vm.changeDirectory(key)},\"contextmenu\":function($event){$event.preventDefault();_vm.$refs.cm.open($event, key)},\"dragstart\":function($event){_vm.startDrag($event, key)},\"dragover\":function($event){$event.preventDefault();return _vm.moveDrag($event)},\"dragleave\":function($event){$event.preventDefault();return _vm.leaveDrag($event)},\"drop\":function($event){$event.preventDefault();$event.stopPropagation();_vm.stopDrag($event, key)}}},[_c('i',{staticClass:\"fas fa-folder\",staticStyle:{\"font-size\":\"50px\"}}),_c('div',{staticClass:\"title\"},[_vm._v(_vm._s(_vm.idMap.get(key).name))])])}),_vm._l((_vm.files),function(file){return _c('div',{key:file,staticClass:\"inode file\",class:{'inode-selected': _vm.selected.includes(file)},attrs:{\"draggable\":\"true\"},on:{\"click\":function($event){_vm.select($event, file)},\"contextmenu\":function($event){$event.preventDefault();_vm.$refs.cm.open($event, file)},\"dragstart\":function($event){_vm.startDrag($event, file)}}},[_c('img',{attrs:{\"src\":'/static/assets/' + _vm.idMap.get(file).file_hash,\"width\":\"50\"}}),_c('div',{staticClass:\"title\"},[_vm._v(_vm._s(_vm.idMap.get(file).name))])])})],2)]),(_vm.firstSelectedFile)?_c('div',{attrs:{\"id\":\"asset-details\"}},[_c('div',{attrs:{\"id\":\"asset-detail-title\"}},[_vm._v(_vm._s(_vm.firstSelectedFile.name))]),_c('img',{attrs:{\"src\":'/static/assets/' + _vm.firstSelectedFile.file_hash}})]):_vm._e()]),_c('AssetContextMenu',{ref:\"cm\"}),_c('Prompt',{ref:\"prompt\"}),_c('ConfirmDialog',{ref:\"confirm\"})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"339cf1e4-vue-loader-template\\\"}!../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./manager.vue?vue&type=template&id=8fda09aa&\"","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport Vue from \"vue\";\r\nimport Component from \"vue-class-component\";\r\n\r\nimport { mapState } from \"vuex\";\r\n\r\nimport ColorPicker from \"@/core/components/colorpicker.vue\";\r\nimport Prompt from \"@/core/components/modals/prompt.vue\";\r\nimport AssetNode from \"@/game/ui/menu/asset_node.vue\";\r\nimport NoteDialog from \"@/game/ui/note.vue\";\r\n\r\nimport { getRef, uuidv4 } from \"@/core/utils\";\r\nimport { socket } from \"@/game/api/socket\";\r\nimport { Note } from \"@/game/comm/types/general\";\r\nimport { gameStore } from \"@/game/store\";\r\n\r\n@Component({\r\n    components: {\r\n        \"color-picker\": ColorPicker,\r\n        \"asset-node\": AssetNode,\r\n    },\r\n    computed: {\r\n        ...mapState(\"game\", [\"invitationCode\", \"IS_DM\", \"locations\", \"assets\", \"notes\"]),\r\n    },\r\n})\r\nexport default class MenuBar extends Vue {\r\n    visible = {\r\n        settings: false,\r\n        locations: false,\r\n    };\r\n\r\n    get useGrid(): boolean {\r\n        return gameStore.useGrid;\r\n    }\r\n    set useGrid(value: boolean) {\r\n        gameStore.setUseGrid({ useGrid: value, sync: true });\r\n    }\r\n    get fullFOW(): boolean {\r\n        return gameStore.fullFOW;\r\n    }\r\n    set fullFOW(value: boolean) {\r\n        gameStore.setFullFOW({ fullFOW: value, sync: true });\r\n    }\r\n    get fowOpacity(): number {\r\n        return gameStore.fowOpacity;\r\n    }\r\n    set fowOpacity(value: number) {\r\n        if (typeof value !== \"number\") return;\r\n        gameStore.setFOWOpacity({ fowOpacity: value, sync: true });\r\n    }\r\n    get fowLOS(): boolean {\r\n        return gameStore.fowLOS;\r\n    }\r\n    set fowLOS(value: boolean) {\r\n        gameStore.setLineOfSight({ fowLOS: value, sync: true });\r\n    }\r\n    get unitSize(): number {\r\n        return gameStore.unitSize;\r\n    }\r\n    set unitSize(value: number) {\r\n        if (typeof value !== \"number\") return;\r\n        gameStore.setUnitSize({ unitSize: value, sync: true });\r\n    }\r\n    get gridSize(): number {\r\n        return gameStore.gridSize;\r\n    }\r\n    set gridSize(value: number) {\r\n        if (typeof value !== \"number\") return;\r\n        gameStore.setGridSize({ gridSize: value, sync: true });\r\n    }\r\n    get gridColour(): string {\r\n        return gameStore.gridColour;\r\n    }\r\n    set gridColour(value: string) {\r\n        gameStore.setGridColour({ colour: value, sync: true });\r\n    }\r\n    get fowColour(): string {\r\n        return gameStore.fowColour;\r\n    }\r\n    set fowColour(value: string) {\r\n        gameStore.setFOWColour({ colour: value, sync: true });\r\n    }\r\n    get rulerColour(): string {\r\n        return gameStore.rulerColour;\r\n    }\r\n    set rulerColour(value: string) {\r\n        gameStore.setRulerColour({ colour: value, sync: true });\r\n    }\r\n    settingsClick(event: { target: HTMLElement }) {\r\n        if (event.target.classList.contains(\"accordion\")) {\r\n            event.target.classList.toggle(\"accordion-active\");\r\n            const next = <HTMLElement>event.target.nextElementSibling;\r\n            if (next !== null) next.style.display = next.style.display === \"\" ? \"block\" : \"\";\r\n        }\r\n    }\r\n    changeLocation(name: string) {\r\n        socket.emit(\"Location.Change\", name);\r\n    }\r\n    createLocation() {\r\n        getRef<Prompt>(\"prompt\")\r\n            .prompt(`New location name:`, `Create new location`)\r\n            .then(\r\n                (value: string) => {\r\n                    socket.emit(\"Location.New\", value);\r\n                },\r\n                () => {},\r\n            );\r\n    }\r\n    createNote() {\r\n        const note = { title: \"New note\", text: \"\", uuid: uuidv4() };\r\n        gameStore.newNote({ note, sync: true });\r\n        this.openNote(note);\r\n    }\r\n    openNote(note: Note) {\r\n        getRef<NoteDialog>(\"note\").open(note);\r\n    }\r\n}\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./colorpicker.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./colorpicker.vue?vue&type=script&lang=ts&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./selection_info.vue?vue&type=style&index=0&id=4d8cbeae&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./selection_info.vue?vue&type=style&index=0&id=4d8cbeae&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c(\"div\")}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"339cf1e4-vue-loader-template\\\"}!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tool.vue?vue&type=template&id=72c5bad7&\"","import Initiative from \"./ui/initiative.vue\";\r\n\r\nimport { getRef } from \"@/core/utils\";\r\nimport { sendClientOptions } from \"@/game/api/utils\";\r\nimport { ServerShape } from \"@/game/comm/types/shapes\";\r\nimport { GlobalPoint } from \"@/game/geom\";\r\nimport { layerManager } from \"@/game/layers/manager\";\r\nimport { createShapeFromDict } from \"@/game/shapes/utils\";\r\nimport { gameStore } from \"@/game/store\";\r\nimport { AnnotationManager } from \"@/game/ui/annotation\";\r\nimport { g2l } from \"@/game/units\";\r\n\r\nexport class GameManager {\r\n    selectedTool: number = 0;\r\n\r\n    annotationManager = new AnnotationManager();\r\n\r\n    addShape(shape: ServerShape): void {\r\n        if (!layerManager.hasLayer(shape.layer)) {\r\n            console.log(`Shape with unknown layer ${shape.layer} could not be added`);\r\n            return;\r\n        }\r\n        const layer = layerManager.getLayer(shape.layer)!;\r\n        const sh = createShapeFromDict(shape);\r\n        if (sh === undefined) {\r\n            console.log(`Shape with unknown type ${shape.type_} could not be added`);\r\n            return;\r\n        }\r\n        layer.addShape(sh, false);\r\n        layer.invalidate(false);\r\n    }\r\n\r\n    updateShape(data: { shape: ServerShape; redraw: boolean; move: boolean }): void {\r\n        if (!layerManager.hasLayer(data.shape.layer)) {\r\n            console.log(`Shape with unknown layer ${data.shape.layer} could not be added`);\r\n            return;\r\n        }\r\n        const sh = createShapeFromDict(data.shape, true);\r\n        if (sh === undefined) {\r\n            console.log(`Shape with unknown type ${data.shape.type_} could not be added`);\r\n            return;\r\n        }\r\n        const oldShape = layerManager.UUIDMap.get(data.shape.uuid);\r\n        if (oldShape === undefined) {\r\n            console.log(`Shape with unknown id could not be updated`);\r\n            return;\r\n        }\r\n        const redrawInitiative = sh.owners !== oldShape.owners;\r\n        const shape = Object.assign(oldShape, sh);\r\n        shape.checkVisionSources();\r\n        shape.setMovementBlock(shape.movementObstruction);\r\n        shape.setIsToken(shape.isToken);\r\n        if (data.move && shape.visionObstruction) gameStore.recalculateBV();\r\n        if (data.redraw) layerManager.getLayer(data.shape.layer)!.invalidate(false);\r\n        if (redrawInitiative) getRef<Initiative>(\"initiative\").$forceUpdate();\r\n    }\r\n\r\n    setCenterPosition(position: GlobalPoint) {\r\n        const localPos = g2l(position);\r\n        gameStore.increasePanX((window.innerWidth / 2 - localPos.x) / gameStore.zoomFactor);\r\n        gameStore.increasePanY((window.innerHeight / 2 - localPos.y) / gameStore.zoomFactor);\r\n        layerManager.invalidate();\r\n        sendClientOptions();\r\n    }\r\n}\r\n\r\nexport const gameManager = new GameManager();\r\n(<any>window).gameManager = gameManager;\r\n","\n\n\n\n\n\r\nimport Vue from \"vue\";\r\nimport Component from \"vue-class-component\";\r\n\r\n@Component\r\nexport default class LoadComponent extends Vue {\r\n    message = \"Loading...\";\r\n}\r\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport axios, { AxiosError, AxiosResponse } from \"axios\";\r\nimport Vue from \"vue\";\r\nimport Component from \"vue-class-component\";\r\nimport { Route } from \"vue-router\";\r\n\r\nimport { coreStore } from \"@/core/store\";\r\n\r\nComponent.registerHooks([\"beforeRouteEnter\"]);\r\n\r\n@Component\r\nexport default class Dashboard extends Vue {\r\n    owned = [];\r\n    joined = [];\r\n    error = \"\";\r\n\r\n    newSessionName = \"\";\r\n\r\n    beforeRouteEnter(to: Route, from: Route, next: ({}) => {}) {\r\n        axios\r\n            .get(\"/api/rooms\")\r\n            .then((response: AxiosResponse) => {\r\n                next((vm: this) => {\r\n                    vm.owned = response.data.owned;\r\n                    vm.joined = response.data.joined;\r\n                });\r\n            })\r\n            .catch((err: AxiosError) => {\r\n                next((vm: this) => {\r\n                    vm.error = err.message;\r\n                });\r\n            });\r\n    }\r\n\r\n    createRoom(event: Event) {\r\n        axios\r\n            .post(\"/api/rooms\", {\r\n                name: this.newSessionName,\r\n            })\r\n            .then((response: AxiosResponse) => {\r\n                this.$router.push(`/game/${coreStore.username}/${this.newSessionName}`);\r\n            })\r\n            .catch((err: AxiosError) => {\r\n                this.error = err.message;\r\n            });\r\n    }\r\n}\r\n","import { render, staticRenderFns } from \"./confirm.vue?vue&type=template&id=94ad04e6&scoped=true&\"\nimport script from \"./confirm.vue?vue&type=script&lang=ts&\"\nexport * from \"./confirm.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./confirm.vue?vue&type=style&index=0&id=94ad04e6&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"94ad04e6\",\n  null\n  \n)\n\ncomponent.options.__file = \"confirm.vue\"\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('Modal',{attrs:{\"visible\":_vm.visible},on:{\"close\":_vm.close},scopedSlots:_vm._u([{key:\"header\",fn:function(m){return _c('div',{staticClass:\"modal-header\",attrs:{\"draggable\":\"true\"},on:{\"dragstart\":m.dragStart,\"dragend\":m.dragEnd}},[_vm._v(_vm._s(_vm.title))])}}])},[_c('div',{staticClass:\"modal-body\"},[_vm._v(\"\\n    \"+_vm._s(_vm.question)+\"\\n    \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.answer),expression:\"answer\"}],ref:\"answer\",attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.answer)},on:{\"keyup\":function($event){if(!('button' in $event)&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.submit($event)},\"input\":function($event){if($event.target.composing){ return; }_vm.answer=$event.target.value}}})]),_c('div',{staticClass:\"modal-footer\"},[_c('button',{on:{\"click\":_vm.submit}},[_vm._v(\"Submit\")])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"339cf1e4-vue-loader-template\\\"}!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./prompt.vue?vue&type=template&id=3c674586&scoped=true&\"","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./shapecontext.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./shapecontext.vue?vue&type=script&lang=ts&\"","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--12-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./manager.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--12-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./manager.vue?vue&type=script&lang=ts&\"","import Vue from \"vue\";\r\nexport const EventBus = new Vue();\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--12-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./main.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--12-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./main.vue?vue&type=script&lang=ts&\"","import { GlobalPoint } from \"@/game/geom\";\r\nimport { BaseRect } from \"@/game/shapes/baserect\";\r\nimport { gameStore } from \"@/game/store\";\r\nimport { g2l } from \"@/game/units\";\r\nimport { getFogColour } from \"@/game/utils\";\r\n\r\nexport class Rect extends BaseRect {\r\n    type = \"rect\";\r\n    constructor(topleft: GlobalPoint, w: number, h: number, fillColour?: string, strokeColour?: string, uuid?: string) {\r\n        super(topleft, w, h, fillColour, strokeColour, uuid);\r\n    }\r\n    asDict() {\r\n        return super.getBaseDict();\r\n    }\r\n    draw(ctx: CanvasRenderingContext2D) {\r\n        super.draw(ctx);\r\n        if (this.fillColour === \"fog\") ctx.fillStyle = getFogColour();\r\n        else ctx.fillStyle = this.fillColour;\r\n        const z = gameStore.zoomFactor;\r\n        const loc = g2l(this.refPoint);\r\n        ctx.fillRect(loc.x, loc.y, this.w * z, this.h * z);\r\n        if (this.strokeColour !== \"rgba(0, 0, 0, 0)\") {\r\n            ctx.strokeStyle = this.strokeColour;\r\n            ctx.lineWidth = 5;\r\n            ctx.strokeRect(loc.x, loc.y, this.w * z, this.h * z);\r\n        }\r\n    }\r\n}\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./selectcontext.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./selectcontext.vue?vue&type=script&lang=ts&\"","import { Ray, Vector } from \"@/game/geom\";\r\nimport { Layer } from \"@/game/layers/layer\";\r\nimport { layerManager } from \"@/game/layers/manager\";\r\nimport { Settings } from \"@/game/settings\";\r\nimport { gameStore } from \"@/game/store\";\r\nimport { g2l, g2lx, g2ly } from \"@/game/units\";\r\n\r\nexport class FOWPlayersLayer extends Layer {\r\n    isVisionLayer: boolean = true;\r\n\r\n    draw(): void {\r\n        if (!this.valid) {\r\n            const ctx = this.ctx;\r\n\r\n            if (!gameStore.fowLOS || Settings.skipPlayerFOW) {\r\n                ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\r\n                this.valid = true;\r\n                return;\r\n            }\r\n\r\n            ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\r\n\r\n            const originalOperation = ctx.globalCompositeOperation;\r\n\r\n            ctx.fillStyle = \"rgba(0, 0, 0, 1)\";\r\n\r\n            // For the DM this is done at the end of this function.  TODO: why the split up ???\r\n            // This was done in commit be1e65cff1e7369375fe11cfa1643fab1d11beab.\r\n            if (!gameStore.IS_DM) super.draw(!gameStore.fullFOW);\r\n\r\n            // Then cut out all the player vision auras\r\n            const maxLength = ctx.canvas.width + ctx.canvas.height;\r\n            for (const tokenId of gameStore.ownedtokens) {\r\n                ctx.beginPath();\r\n                let lastArcAngle = -1;\r\n                const token = layerManager.UUIDMap.get(tokenId);\r\n                if (token === undefined) continue;\r\n                const center = token.center();\r\n                const lcenter = g2l(center);\r\n\r\n                for (let angle = 0; angle < 2 * Math.PI; angle += (Settings.angleSteps / 2 / 180) * Math.PI) {\r\n                    const cos = Math.cos(angle);\r\n                    const sin = Math.sin(angle);\r\n                    // Check if there is a hit with one of the nearby light blockers.\r\n                    const lightRay = new Ray(center, new Vector(cos, sin));\r\n                    const hitResult = gameStore.BV.intersect(lightRay);\r\n\r\n                    // We can move on to the next angle if nothing was hit.\r\n                    if (!hitResult.hit) {\r\n                        // If an earlier hit caused the aura to leave the arc, we need to go back to the arc\r\n                        if (lastArcAngle === -1) {\r\n                            // Draw a line from the last non arc location back to the arc\r\n                            ctx.lineTo(lcenter.x + maxLength * cos, lcenter.y + maxLength * sin);\r\n                            // Set the start of a new arc beginning at the current angle\r\n                            lastArcAngle = angle;\r\n                        }\r\n                        continue;\r\n                    }\r\n                    // If hit , first finish any ongoing arc, then move to the intersection point\r\n                    if (lastArcAngle !== -1) {\r\n                        ctx.arc(lcenter.x, lcenter.y, maxLength, lastArcAngle, angle);\r\n                        lastArcAngle = -1;\r\n                    }\r\n                    ctx.lineTo(g2lx(hitResult.intersect.x), g2ly(hitResult.intersect.y));\r\n                }\r\n\r\n                // Finish the final arc.\r\n                if (lastArcAngle !== -1) ctx.arc(lcenter.x, lcenter.y, maxLength, lastArcAngle, 2 * Math.PI);\r\n                else ctx.closePath();\r\n                ctx.fill();\r\n            }\r\n\r\n            // For the players this is done at the beginning of this function.  TODO: why the split up ???\r\n            // This was done in commit be1e65cff1e7369375fe11cfa1643fab1d11beab.\r\n            if (gameStore.IS_DM) super.draw(!gameStore.fullFOW);\r\n\r\n            ctx.globalCompositeOperation = originalOperation;\r\n        }\r\n    }\r\n}\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('Modal',{attrs:{\"visible\":_vm.visible,\"mask\":false},on:{\"close\":function($event){_vm.visible = false}},scopedSlots:_vm._u([{key:\"header\",fn:function(m){return _c('div',{staticClass:\"modal-header\",attrs:{\"draggable\":\"true\"},on:{\"dragstart\":m.dragStart,\"dragend\":m.dragEnd}},[_c('div',[_vm._v(\"Edit asset\")]),_c('div',{staticClass:\"header-close\",on:{\"click\":function($event){_vm.visible = false}}},[_c('i',{staticClass:\"far fa-window-close\"})])])}}])},[_c('div',{staticClass:\"modal-body\"},[_c('label',{attrs:{\"for\":\"shapeselectiondialog-name\"}},[_vm._v(\"Name\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.shape.name),expression:\"shape.name\"}],staticStyle:{\"grid-column\":\"numerator / end\"},attrs:{\"type\":\"text\",\"id\":\"shapeselectiondialog-name\"},domProps:{\"value\":(_vm.shape.name)},on:{\"change\":function($event){_vm.updateShape(false)},\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.shape, \"name\", $event.target.value)}}}),_c('label',{attrs:{\"for\":\"shapeselectiondialog-istoken\"}},[_vm._v(\"Is a token\")]),_c('input',{staticStyle:{\"grid-column-start\":\"remove\",\"width\":\"15px\",\"height\":\"15px\"},attrs:{\"type\":\"checkbox\",\"id\":\"shapeselectiondialog-istoken\"},domProps:{\"checked\":_vm.shape.isToken},on:{\"click\":_vm.setToken}}),_c('label',{attrs:{\"for\":\"shapeselectiondialog-visionblocker\"}},[_vm._v(\"Blocks vision/light\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.shape.visionObstruction),expression:\"shape.visionObstruction\"}],staticStyle:{\"grid-column-start\":\"remove\",\"width\":\"15px\",\"height\":\"15px\"},attrs:{\"type\":\"checkbox\",\"id\":\"shapeselectiondialog-visionblocker\"},domProps:{\"checked\":Array.isArray(_vm.shape.visionObstruction)?_vm._i(_vm.shape.visionObstruction,null)>-1:(_vm.shape.visionObstruction)},on:{\"change\":[function($event){var $$a=_vm.shape.visionObstruction,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.$set(_vm.shape, \"visionObstruction\", $$a.concat([$$v])))}else{$$i>-1&&(_vm.$set(_vm.shape, \"visionObstruction\", $$a.slice(0,$$i).concat($$a.slice($$i+1))))}}else{_vm.$set(_vm.shape, \"visionObstruction\", $$c)}},_vm.setVisionBlocker]}}),_c('label',{attrs:{\"for\":\"shapeselectiondialog-moveblocker\"}},[_vm._v(\"Blocks movement\")]),_c('input',{staticStyle:{\"grid-column-start\":\"remove\",\"width\":\"15px\",\"height\":\"15px\"},attrs:{\"type\":\"checkbox\",\"id\":\"shapeselectiondialog-moveblocker\"},domProps:{\"checked\":_vm.shape.movementObstruction},on:{\"click\":_vm.setMovementBlocker}}),_c('div',{staticClass:\"spanrow header\"},[_vm._v(\"Access\")]),_vm._l((_vm.shape.owners),function(owner){return [_c('input',{key:owner,staticStyle:{\"grid-column-start\":\"name\"},attrs:{\"type\":\"text\",\"placeholder\":\"name\"},domProps:{\"value\":owner},on:{\"change\":function($event){_vm.updateOwner($event, owner)}}}),(owner !== '')?_c('div',{key:'remove-' + owner,staticStyle:{\"grid-column-start\":\"remove\"},on:{\"click\":function($event){_vm.removeOwner(owner)}}},[_c('i',{staticClass:\"fas fa-trash-alt\"})]):_vm._e()]}),_c('div',{staticClass:\"spanrow header\"},[_vm._v(\"Trackers\")]),_vm._l((_vm.shape.trackers),function(tracker){return [_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(tracker.name),expression:\"tracker.name\"}],key:'name-'+tracker.uuid,staticStyle:{\"grid-column-start\":\"name\"},attrs:{\"type\":\"text\",\"placeholder\":\"name\"},domProps:{\"value\":(tracker.name)},on:{\"change\":function($event){_vm.updateShape(false);},\"input\":function($event){if($event.target.composing){ return; }_vm.$set(tracker, \"name\", $event.target.value)}}}),_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(tracker.value),expression:\"tracker.value\",modifiers:{\"number\":true}}],key:'value-'+tracker.uuid,attrs:{\"type\":\"text\",\"title\":\"Current value\"},domProps:{\"value\":(tracker.value)},on:{\"change\":function($event){_vm.updateShape(false)},\"input\":function($event){if($event.target.composing){ return; }_vm.$set(tracker, \"value\", _vm._n($event.target.value))},\"blur\":function($event){_vm.$forceUpdate()}}}),_c('span',{key:'fspan-'+tracker.uuid},[_vm._v(\"/\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(tracker.maxvalue),expression:\"tracker.maxvalue\",modifiers:{\"number\":true}}],key:'maxvalue-'+tracker.uuid,attrs:{\"type\":\"text\",\"title\":\"Current value\"},domProps:{\"value\":(tracker.maxvalue)},on:{\"change\":function($event){_vm.updateShape(false)},\"input\":function($event){if($event.target.composing){ return; }_vm.$set(tracker, \"maxvalue\", _vm._n($event.target.value))},\"blur\":function($event){_vm.$forceUpdate()}}}),_c('span',{key:'sspan-'+tracker.uuid}),_c('div',{key:'visibility-'+tracker.uuid,style:({opacity: tracker.visible ? 1.0 : 0.3}),on:{\"click\":function($event){tracker.visible = !tracker.visible;_vm.updateShape(false)}}},[_c('i',{staticClass:\"fas fa-eye\"})]),_c('span',{key:'tspan-'+tracker.uuid}),(tracker.name !== '' || tracker.value !== 0)?_c('div',{key:'remove-'+tracker.uuid,on:{\"click\":function($event){_vm.removeTracker(tracker.uuid)}}},[_c('i',{staticClass:\"fas fa-trash-alt\"})]):_vm._e()]}),_c('div',{staticClass:\"spanrow header\"},[_vm._v(\"Auras\")]),_vm._l((_vm.shape.auras),function(aura){return [_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(aura.name),expression:\"aura.name\"}],key:'name-'+aura.uuid,staticStyle:{\"grid-column-start\":\"name\"},attrs:{\"type\":\"text\",\"placeholder\":\"name\"},domProps:{\"value\":(aura.name)},on:{\"change\":function($event){_vm.updateShape(false)},\"input\":function($event){if($event.target.composing){ return; }_vm.$set(aura, \"name\", $event.target.value)}}}),_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(aura.value),expression:\"aura.value\",modifiers:{\"number\":true}}],key:'value-'+aura.uuid,attrs:{\"type\":\"text\",\"title\":\"Current value\"},domProps:{\"value\":(aura.value)},on:{\"change\":function($event){_vm.updateShape(true)},\"input\":function($event){if($event.target.composing){ return; }_vm.$set(aura, \"value\", _vm._n($event.target.value))},\"blur\":function($event){_vm.$forceUpdate()}}}),_c('span',{key:'fspan-'+aura.uuid},[_vm._v(\"/\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(aura.dim),expression:\"aura.dim\",modifiers:{\"number\":true}}],key:'dimvalue-'+aura.uuid,attrs:{\"type\":\"text\",\"title\":\"Dim value\"},domProps:{\"value\":(aura.dim)},on:{\"change\":function($event){_vm.updateShape(true)},\"input\":function($event){if($event.target.composing){ return; }_vm.$set(aura, \"dim\", _vm._n($event.target.value))},\"blur\":function($event){_vm.$forceUpdate()}}}),_c('color-picker',{key:'colour-'+aura.uuid,attrs:{\"color\":aura.colour},on:{\"update:color\":function($event){_vm.$set(aura, \"colour\", $event)},\"input\":function($event){_vm.updateAuraColour(aura, $event)},\"change\":function($event){_vm.updateShape(true)}}}),_c('div',{key:'visibility-'+aura.uuid,style:({opacity: aura.visible ? 1.0 : 0.3}),on:{\"click\":function($event){aura.visible = !aura.visible;_vm.updateShape(true)}}},[_c('i',{staticClass:\"fas fa-eye\"})]),_c('div',{key:'visionsource-'+aura.uuid,style:({opacity: aura.visionSource ? 1.0 : 0.3}),on:{\"click\":function($event){_vm.updateAuraVisionSource(aura)}}},[_c('i',{staticClass:\"fas fa-lightbulb\"})]),(aura.name !== '' || aura.value !== 0)?_c('div',{key:'remove-'+aura.uuid,on:{\"click\":function($event){_vm.removeAura(aura.uuid)}}},[_c('i',{staticClass:\"fas fa-trash-alt\"})]):_vm._e()]}),_c('div',{staticClass:\"spanrow header\"},[_vm._v(\"Annotation\")]),_c('textarea',{staticClass:\"spanrow\",domProps:{\"value\":_vm.shape.annotation},on:{\"change\":_vm.updateAnnotation}})],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"339cf1e4-vue-loader-template\\\"}!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./edit_dialog.vue?vue&type=template&id=6f3cf09f&scoped=true&\"","import { socket } from \"@/game/api/socket\";\r\nimport { ServerShape } from \"@/game/comm/types/shapes\";\r\nimport { EventBus } from \"@/game/event-bus\";\r\nimport { layerManager } from \"@/game/layers/manager\";\r\nimport { Shape } from \"@/game/shapes/shape\";\r\nimport { createShapeFromDict } from \"@/game/shapes/utils\";\r\nimport { gameStore } from \"@/game/store\";\r\nimport { g2lx, g2ly } from \"@/game/units\";\r\n\r\nexport class Layer {\r\n    name: string;\r\n    width: number;\r\n    height: number;\r\n    canvas: HTMLCanvasElement;\r\n    ctx: CanvasRenderingContext2D;\r\n\r\n    selectable: boolean = false;\r\n    playerEditable: boolean = false;\r\n    isVisionLayer: boolean = false;\r\n\r\n    // When set to false, the layer will be redrawn on the next tick\r\n    valid: boolean = false;\r\n    // The collection of shapes that this layer contains.\r\n    // These are ordered on a depth basis.\r\n    shapes: Shape[] = [];\r\n\r\n    // Collection of shapes that are currently selected\r\n    selection: Shape[] = [];\r\n\r\n    // Extra selection highlighting settings\r\n    selectionColor = \"#CC0000\";\r\n    selectionWidth = 2;\r\n\r\n    constructor(canvas: HTMLCanvasElement, name: string) {\r\n        this.canvas = canvas;\r\n        this.name = name;\r\n        this.width = canvas.width;\r\n        this.height = canvas.height;\r\n        this.ctx = canvas.getContext(\"2d\")!;\r\n    }\r\n\r\n    invalidate(skipLightUpdate: boolean): void {\r\n        this.valid = false;\r\n        if (!skipLightUpdate) {\r\n            layerManager.invalidateLight();\r\n        }\r\n    }\r\n\r\n    addShape(shape: Shape, sync: boolean, temporary?: boolean): void {\r\n        if (temporary === undefined) temporary = false;\r\n        shape.layer = this.name;\r\n        this.shapes.push(shape);\r\n        layerManager.UUIDMap.set(shape.uuid, shape);\r\n        shape.checkVisionSources();\r\n        shape.setMovementBlock(shape.movementObstruction);\r\n        if (shape.ownedBy(gameStore.username) && shape.isToken) gameStore.ownedtokens.push(shape.uuid);\r\n        if (shape.annotation.length) gameStore.annotations.push(shape.uuid);\r\n        if (sync) socket.emit(\"Shape.Add\", { shape: shape.asDict(), temporary });\r\n        this.invalidate(!sync);\r\n    }\r\n\r\n    setShapes(shapes: ServerShape[]): void {\r\n        for (const serverShape of shapes) {\r\n            const shape = createShapeFromDict(serverShape);\r\n            if (shape === undefined) {\r\n                console.log(`Shape with unknown type ${serverShape.type_} could not be added`);\r\n                return;\r\n            }\r\n            this.addShape(shape, false, false);\r\n        }\r\n        this.clearSelection(); // TODO: Fix keeping selection on those items that are not moved.\r\n        this.invalidate(false);\r\n    }\r\n\r\n    removeShape(shape: Shape, sync: boolean, temporary?: boolean) {\r\n        if (temporary === undefined) temporary = false;\r\n        this.shapes.splice(this.shapes.indexOf(shape), 1);\r\n\r\n        if (sync) socket.emit(\"Shape.Remove\", { shape, temporary });\r\n        const lsI = gameStore.visionSources.findIndex(ls => ls.shape === shape.uuid);\r\n        const lbI = gameStore.visionBlockers.findIndex(ls => ls === shape.uuid);\r\n\r\n        const mbI = gameStore.movementblockers.findIndex(ls => ls === shape.uuid);\r\n        const anI = gameStore.annotations.findIndex(ls => ls === shape.uuid);\r\n        if (lsI >= 0) gameStore.visionSources.splice(lsI, 1);\r\n        if (lbI >= 0) gameStore.visionBlockers.splice(lbI, 1);\r\n        if (mbI >= 0) gameStore.movementblockers.splice(mbI, 1);\r\n        if (anI >= 0) gameStore.annotations.splice(anI, 1);\r\n\r\n        const annotationIndex = gameStore.annotations.indexOf(shape.uuid);\r\n        if (annotationIndex >= 0) gameStore.annotations.splice(annotationIndex, 1);\r\n\r\n        const ownedIndex = gameStore.ownedtokens.indexOf(shape.uuid);\r\n        if (ownedIndex >= 0) gameStore.ownedtokens.splice(ownedIndex, 1);\r\n\r\n        layerManager.UUIDMap.delete(shape.uuid);\r\n\r\n        const index = this.selection.indexOf(shape);\r\n        if (index >= 0) this.selection.splice(index, 1);\r\n        if (lbI >= 0) gameStore.recalculateBV();\r\n        this.invalidate(!sync);\r\n    }\r\n\r\n    clear(): void {\r\n        this.ctx.clearRect(0, 0, this.width, this.height);\r\n    }\r\n\r\n    clearSelection(): void {\r\n        this.selection = [];\r\n        EventBus.$emit(\"SelectionInfo.Shape.Set\", null);\r\n    }\r\n\r\n    draw(doClear?: boolean): void {\r\n        if (!this.valid) {\r\n            const ctx = this.ctx;\r\n            const ogOP = ctx.globalCompositeOperation;\r\n            doClear = doClear === undefined ? true : doClear;\r\n\r\n            if (doClear) this.clear();\r\n\r\n            const state = this;\r\n\r\n            // We iteratre twice over all shapes\r\n            // First to draw the auras and a second time to draw the shapes themselves\r\n            // Otherwise auras from one shape could be overlapping another shape itself.\r\n\r\n            this.shapes.forEach(shape => {\r\n                if (shape.options.has(\"skipDraw\") && shape.options.get(\"skipDraw\")) return;\r\n                if (layerManager.getLayer() === undefined) return;\r\n                if (!shape.visibleInCanvas(state.canvas)) return;\r\n                if (state.name === \"fow\" && shape.visionObstruction && layerManager.getLayer()!.name !== state.name)\r\n                    return;\r\n                shape.drawAuras(ctx);\r\n            });\r\n            this.shapes.forEach(shape => {\r\n                if (shape.options.has(\"skipDraw\") && shape.options.get(\"skipDraw\")) return;\r\n                if (layerManager.getLayer() === undefined) return;\r\n                if (!shape.visibleInCanvas(state.canvas)) return;\r\n                if (state.name === \"fow\" && shape.visionObstruction && layerManager.getLayer()!.name !== state.name)\r\n                    return;\r\n                shape.draw(ctx);\r\n            });\r\n\r\n            if (this.selection != null) {\r\n                ctx.fillStyle = this.selectionColor;\r\n                ctx.strokeStyle = this.selectionColor;\r\n                ctx.lineWidth = this.selectionWidth;\r\n                const z = gameStore.zoomFactor;\r\n                this.selection.forEach(sel => {\r\n                    ctx.globalCompositeOperation = sel.globalCompositeOperation;\r\n                    const bb = sel.getBoundingBox();\r\n                    // TODO: REFACTOR THIS TO Shape.drawSelection(ctx);\r\n                    ctx.strokeRect(g2lx(bb.topLeft.x), g2ly(bb.topLeft.y), bb.w * z, bb.h * z);\r\n\r\n                    const sw = Math.min(6, bb.w / 2);\r\n\r\n                    // topright\r\n                    ctx.fillRect(g2lx(bb.topRight.x - sw / 2), g2ly(bb.topLeft.y - sw / 2), sw * z, sw * z);\r\n                    // topleft\r\n                    ctx.fillRect(g2lx(bb.topLeft.x - sw / 2), g2ly(bb.topLeft.y - sw / 2), sw * z, sw * z);\r\n                    // botright\r\n                    ctx.fillRect(g2lx(bb.topRight.x - sw / 2), g2ly(bb.botLeft.y - sw / 2), sw * z, sw * z);\r\n                    // botleft\r\n                    ctx.fillRect(g2lx(bb.topLeft.x - sw / 2), g2ly(bb.botLeft.y - sw / 2), sw * z, sw * z);\r\n                });\r\n            }\r\n            ctx.globalCompositeOperation = ogOP;\r\n            this.valid = true;\r\n        }\r\n    }\r\n\r\n    moveShapeOrder(shape: Shape, destinationIndex: number, sync: boolean): void {\r\n        const oldIdx = this.shapes.indexOf(shape);\r\n        if (oldIdx === destinationIndex) return;\r\n        this.shapes.splice(oldIdx, 1);\r\n        this.shapes.splice(destinationIndex, 0, shape);\r\n        if (sync) socket.emit(\"Shape.Order.Set\", { shape: shape.asDict(), index: destinationIndex });\r\n        this.invalidate(true);\r\n    }\r\n\r\n    onShapeMove(shape: Shape): void {\r\n        shape.checkVisionSources();\r\n        if (shape.visionObstruction) gameStore.recalculateBV();\r\n        this.invalidate(false);\r\n    }\r\n}\r\n","import { gameStore } from \"@/game/store\";\r\nimport { l2g } from \"@/game/units\";\r\nimport { getMouse } from \"@/game/utils\";\r\n\r\nexport function scrollZoom(e: WheelEvent) {\r\n    if (!e.target || !(<HTMLElement>e.target).tagName || (<HTMLElement>e.target).tagName !== \"CANVAS\") return;\r\n    let delta: number;\r\n    delta = Math.sign(e.deltaY) * -1;\r\n    gameStore.updateZoom({ newZoomValue: gameStore.zoomFactor + 0.1 * delta, zoomLocation: l2g(getMouse(e)) });\r\n}\r\n","import { GlobalPoint, LocalPoint, Vector } from \"@/game/geom\";\r\nimport { BoundingRect } from \"@/game/shapes/boundingrect\";\r\nimport { Shape } from \"@/game/shapes/shape\";\r\nimport { gameStore } from \"@/game/store\";\r\nimport { calculateDelta } from \"@/game/ui/tools/utils\";\r\nimport { g2lx, g2ly, l2g, l2gx, l2gy } from \"@/game/units\";\r\n\r\nexport abstract class BaseRect extends Shape {\r\n    w: number;\r\n    h: number;\r\n    constructor(topleft: GlobalPoint, w: number, h: number, fillColour?: string, strokeColour?: string, uuid?: string) {\r\n        super(topleft, fillColour, strokeColour, uuid);\r\n        this.w = w;\r\n        this.h = h;\r\n    }\r\n    getBaseDict() {\r\n        return Object.assign(super.getBaseDict(), {\r\n            width: this.w,\r\n            height: this.h,\r\n        });\r\n    }\r\n    getBoundingBox() {\r\n        return new BoundingRect(this.refPoint, this.w, this.h);\r\n    }\r\n    contains(point: GlobalPoint): boolean {\r\n        return (\r\n            this.refPoint.x <= point.x &&\r\n            this.refPoint.x + this.w >= point.x &&\r\n            this.refPoint.y <= point.y &&\r\n            this.refPoint.y + this.h >= point.y\r\n        );\r\n    }\r\n    inCorner(point: GlobalPoint, corner: string) {\r\n        switch (corner) {\r\n            case \"ne\":\r\n                return (\r\n                    this.refPoint.x + this.w - 3 <= point.x &&\r\n                    point.x <= this.refPoint.x + this.w + 3 &&\r\n                    this.refPoint.y - 3 <= point.y &&\r\n                    point.y <= this.refPoint.y + 3\r\n                );\r\n            case \"nw\":\r\n                return (\r\n                    this.refPoint.x - 3 <= point.x &&\r\n                    point.x <= this.refPoint.x + 3 &&\r\n                    this.refPoint.y - 3 <= point.y &&\r\n                    point.y <= this.refPoint.y + 3\r\n                );\r\n            case \"sw\":\r\n                return (\r\n                    this.refPoint.x - 3 <= point.x &&\r\n                    point.x <= this.refPoint.x + 3 &&\r\n                    this.refPoint.y + this.h - 3 <= point.y &&\r\n                    point.y <= this.refPoint.y + this.h + 3\r\n                );\r\n            case \"se\":\r\n                return (\r\n                    this.refPoint.x + this.w - 3 <= point.x &&\r\n                    point.x <= this.refPoint.x + this.w + 3 &&\r\n                    this.refPoint.y + this.h - 3 <= point.y &&\r\n                    point.y <= this.refPoint.y + this.h + 3\r\n                );\r\n            default:\r\n                return false;\r\n        }\r\n    }\r\n    getCorner(point: GlobalPoint): string | undefined {\r\n        if (this.inCorner(point, \"ne\")) return \"ne\";\r\n        else if (this.inCorner(point, \"nw\")) return \"nw\";\r\n        else if (this.inCorner(point, \"se\")) return \"se\";\r\n        else if (this.inCorner(point, \"sw\")) return \"sw\";\r\n    }\r\n    center(): GlobalPoint;\r\n    center(centerPoint: GlobalPoint): void;\r\n    center(centerPoint?: GlobalPoint): GlobalPoint | void {\r\n        if (centerPoint === undefined) return this.refPoint.add(new Vector(this.w / 2, this.h / 2));\r\n        this.refPoint.x = centerPoint.x - this.w / 2;\r\n        this.refPoint.y = centerPoint.y - this.h / 2;\r\n    }\r\n\r\n    visibleInCanvas(canvas: HTMLCanvasElement): boolean {\r\n        if (super.visibleInCanvas(canvas)) return true;\r\n        const coreVisible = !(\r\n            g2lx(this.refPoint.x) > canvas.width ||\r\n            g2ly(this.refPoint.y) > canvas.height ||\r\n            g2lx(this.refPoint.x + this.w) < 0 ||\r\n            g2ly(this.refPoint.y + this.h) < 0\r\n        );\r\n        if (coreVisible) return true;\r\n        return false;\r\n    }\r\n    snapToGrid() {\r\n        const gs = gameStore.gridSize;\r\n        const center = this.center();\r\n        const mx = center.x;\r\n        const my = center.y;\r\n\r\n        let targetX;\r\n        let targetY;\r\n\r\n        if ((this.w / gs) % 2 === 0) {\r\n            targetX = Math.round(mx / gs) * gs - this.w / 2;\r\n        } else {\r\n            targetX = (Math.round((mx + gs / 2) / gs) - 1 / 2) * gs - this.w / 2;\r\n        }\r\n        if ((this.h / gs) % 2 === 0) {\r\n            targetY = Math.round(my / gs) * gs - this.h / 2;\r\n        } else {\r\n            targetY = (Math.round((my + gs / 2) / gs) - 1 / 2) * gs - this.h / 2;\r\n        }\r\n\r\n        const delta = calculateDelta(new Vector(targetX - this.refPoint.x, targetY - this.refPoint.y), this);\r\n        this.refPoint = this.refPoint.add(delta);\r\n\r\n        this.invalidate(false);\r\n    }\r\n    resizeToGrid() {\r\n        const gs = gameStore.gridSize;\r\n        this.refPoint.x = Math.round(this.refPoint.x / gs) * gs;\r\n        this.refPoint.y = Math.round(this.refPoint.y / gs) * gs;\r\n        this.w = Math.max(Math.round(this.w / gs) * gs, gs);\r\n        this.h = Math.max(Math.round(this.h / gs) * gs, gs);\r\n        this.invalidate(false);\r\n    }\r\n    resize(resizedir: string, point: LocalPoint) {\r\n        const z = gameStore.zoomFactor;\r\n        if (resizedir === \"nw\") {\r\n            this.w = g2lx(this.refPoint.x) + this.w * z - point.x;\r\n            this.h = g2ly(this.refPoint.y) + this.h * z - point.y;\r\n            this.refPoint = l2g(point);\r\n        } else if (resizedir === \"ne\") {\r\n            this.w = point.x - g2lx(this.refPoint.x);\r\n            this.h = g2ly(this.refPoint.y) + this.h * z - point.y;\r\n            this.refPoint.y = l2gy(point.y);\r\n        } else if (resizedir === \"se\") {\r\n            this.w = point.x - g2lx(this.refPoint.x);\r\n            this.h = point.y - g2ly(this.refPoint.y);\r\n        } else if (resizedir === \"sw\") {\r\n            this.w = g2lx(this.refPoint.x) + this.w * z - point.x;\r\n            this.h = point.y - g2ly(this.refPoint.y);\r\n            this.refPoint.x = l2gx(point.x);\r\n        }\r\n        this.w /= z;\r\n        this.h /= z;\r\n\r\n        if (this.w < 0) {\r\n            this.refPoint.x += this.w;\r\n            this.w = Math.abs(this.w);\r\n        }\r\n        if (this.h < 0) {\r\n            this.refPoint.y += this.h;\r\n            this.h = Math.abs(this.h);\r\n        }\r\n    }\r\n}\r\n","import { render, staticRenderFns } from \"./select.vue?vue&type=template&id=c3ff5224&\"\nimport script from \"./select.vue?vue&type=script&lang=ts&\"\nexport * from \"./select.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"select.vue\"\nexport default component.exports","import { render, staticRenderFns } from \"./main.vue?vue&type=template&id=3430ab3a&scoped=true&\"\nimport script from \"./main.vue?vue&type=script&lang=ts&\"\nexport * from \"./main.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./main.vue?vue&type=style&index=0&id=3430ab3a&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3430ab3a\",\n  null\n  \n)\n\ncomponent.options.__file = \"main.vue\"\nexport default component.exports","import { partition } from \"@/core/utils\";\r\nimport { BoundingNode, InteriorNode, LeafNode } from \"@/game/bvh/node\";\r\nimport { GlobalPoint, Ray } from \"@/game/geom\";\r\nimport { layerManager } from \"@/game/layers/manager\";\r\nimport { BoundingRect } from \"@/game/shapes/boundingrect\";\r\nimport { g2lx, g2ly, g2lz } from \"@/game/units\";\r\nimport { gameManager } from \"../manager\";\r\nimport { gameStore } from \"../store\";\r\n\r\ninterface BuildInfo {\r\n    index: number;\r\n    bbox: BoundingRect;\r\n    center: BoundingRect;\r\n}\r\ninterface LinearBHVNode {\r\n    bbox: BoundingRect;\r\n    nPrimitives: number;\r\n}\r\ninterface LinearLeafNode extends LinearBHVNode {\r\n    primitivesOffset: number;\r\n}\r\ninterface LinearInternalNode extends LinearBHVNode {\r\n    secondChildOffset: number;\r\n    dimension: number;\r\n}\r\n\r\nexport class BoundingVolume {\r\n    totalNodes = 0;\r\n    buildData: BuildInfo[] = [];\r\n    shapes: string[];\r\n    orderedPrims: string[] = [];\r\n    root: BoundingNode | null;\r\n    nodes: LinearBHVNode[] = [];\r\n\r\n    offset = 0;\r\n\r\n    constructor(shapes: string[]) {\r\n        this.shapes = shapes;\r\n        if (this.shapes.length === 0) {\r\n            this.root = null;\r\n            this.nodes = [];\r\n            return;\r\n        }\r\n        for (let i = 0; i < shapes.length; i++) {\r\n            const shape = layerManager.UUIDMap.get(shapes[i])!;\r\n            try {\r\n                this.buildData.push({\r\n                    index: i,\r\n                    bbox: shape.getBoundingBox(),\r\n                    center: new BoundingRect(shape.center(), 0, 0),\r\n                });\r\n            } catch {\r\n                console.warn(`Shape ${shape.type} - ${shape.uuid} cannot be used for vision blocking !!!`);\r\n                shape.visionObstruction = false;\r\n                gameStore.visionBlockers.splice(i, 1);\r\n                throw new Error();\r\n            }\r\n        }\r\n        this.root = this.recursiveBuild(0, shapes.length);\r\n        this.compact();\r\n    }\r\n\r\n    draw() {\r\n        const ctx = layerManager.getLayer(\"draw\")!.ctx;\r\n        for (const node of this.nodes) {\r\n            const b = node.bbox;\r\n            ctx.strokeRect(g2lx(b.topLeft.x), g2ly(b.topLeft.y), g2lz(b.w), g2lz(b.h));\r\n        }\r\n    }\r\n\r\n    recursiveBuild(start: number, end: number): BoundingNode {\r\n        this.totalNodes++;\r\n        let bbox = this.buildData[start].bbox;\r\n        for (let i = start + 1; i < end; i++) bbox = bbox.union(this.buildData[i].bbox);\r\n        const nPrimitives = end - start;\r\n        if (nPrimitives === 1) {\r\n            return this.createLeaf(start, end, nPrimitives, bbox);\r\n        } else {\r\n            let centroidBbox = this.buildData[start].center;\r\n            for (let i = start; i < end; i++) centroidBbox = centroidBbox.union(this.buildData[i].center);\r\n            const dimension = centroidBbox.getMaxExtent();\r\n            if (centroidBbox.botRight.get(dimension) === centroidBbox.topLeft.get(dimension)) {\r\n                return this.createLeaf(start, end, nPrimitives, bbox);\r\n            }\r\n            // Use shitty Middle thingy until an introselect js algo is added\r\n            const pMid = 0.5 * (centroidBbox.topLeft.get(dimension) + centroidBbox.botRight.get(dimension));\r\n            const partitionedData = partition(\r\n                this.buildData.slice(start, end),\r\n                (n: BuildInfo) => n.center.center().get(dimension) < pMid,\r\n            );\r\n            const flattened = (<BuildInfo[]>[]).concat.apply([], partitionedData);\r\n            if (partitionedData[0].length === 0 || partitionedData[1].length === 0) console.log(\"EMPTY\");\r\n            this.buildData.splice(start, flattened.length, ...flattened);\r\n            const mid = partitionedData[0].length + start;\r\n            return new InteriorNode(dimension, this.recursiveBuild(start, mid), this.recursiveBuild(mid, end));\r\n        }\r\n    }\r\n\r\n    intersect(ray: Ray<GlobalPoint>, stopOnFirstHit?: boolean) {\r\n        if (this.nodes.length === 0) return { hit: false, intersect: ray.get(0), tMin: 0, tMax: ray.tMax };\r\n        if (stopOnFirstHit === undefined) stopOnFirstHit = false;\r\n        // Initialize return values\r\n        let hit = false;\r\n        let tMin = 0;\r\n        let tMax = ray.tMax;\r\n\r\n        // Initialize work variables\r\n        let todoOffset = 0;\r\n        let nodeNum = 0;\r\n        const todo: number[] = [];\r\n\r\n        // Precalculate intersection vectors\r\n        const invDir = ray.direction.inverse();\r\n        const dirIsNegative = [invDir.x < 0, invDir.y < 0];\r\n\r\n        while (true) {\r\n            const node = this.nodes[nodeNum];\r\n\r\n            const i = node.bbox.intersectP(ray, invDir, dirIsNegative);\r\n            if (i.hit) {\r\n                if (node.nPrimitives > 0) {\r\n                    // TODO: nPrimitives is currently always 1 , this could be generalised\r\n                    // for (let i=0; i < node.nPrimitives; i++) {\r\n                    //     if (this.shapes[(<LinearLeafNode>node).primitivesOffset + i])\r\n                    // }\r\n                    hit = true;\r\n                    tMin = ray.tMax = i.min;\r\n                    tMax = i.max;\r\n                    if (todoOffset === 0 || stopOnFirstHit) break;\r\n                    nodeNum = todo[--todoOffset];\r\n                } else {\r\n                    if (dirIsNegative[(<LinearInternalNode>node).dimension]) {\r\n                        todo[todoOffset++] = nodeNum + 1;\r\n                        nodeNum = (<LinearInternalNode>node).secondChildOffset;\r\n                    } else {\r\n                        todo[todoOffset++] = (<LinearInternalNode>node).secondChildOffset;\r\n                        nodeNum++;\r\n                    }\r\n                }\r\n            } else {\r\n                if (todoOffset === 0) break;\r\n                nodeNum = todo[--todoOffset];\r\n            }\r\n        }\r\n        return { hit, intersect: ray.get(tMin), tMin, tMax };\r\n    }\r\n\r\n    private compact() {\r\n        this.offset = 0;\r\n        if (this.root !== null) this.flatten(this.root);\r\n    }\r\n\r\n    private flatten(node: BoundingNode) {\r\n        const index = this.offset;\r\n        const myOffset = this.offset++;\r\n        if (node.nPrimitives === 0) {\r\n            this.flatten(node.children[0]);\r\n            const secondOffset = this.flatten(node.children[1]);\r\n            this.nodes[index] = <LinearInternalNode>{\r\n                bbox: node.bbox,\r\n                dimension: (<InteriorNode>node).dimension,\r\n                nPrimitives: 0,\r\n                secondChildOffset: secondOffset,\r\n            };\r\n        } else {\r\n            this.nodes[index] = <LinearLeafNode>{\r\n                bbox: node.bbox,\r\n                primitivesOffset: (<LeafNode>node).firstPrimOffset,\r\n                nPrimitives: node.nPrimitives,\r\n            };\r\n        }\r\n        return myOffset;\r\n    }\r\n\r\n    private createLeaf(start: number, end: number, nPrimitives: number, bbox: BoundingRect) {\r\n        const size = this.orderedPrims.length;\r\n        for (let i = start; i < end; i++) this.orderedPrims.push(this.shapes[this.buildData[i].index]);\r\n        return new LeafNode(size, nPrimitives, bbox);\r\n    }\r\n}\r\n","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./shapecontext.vue?vue&type=style&index=0&id=0dac178b&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./shapecontext.vue?vue&type=style&index=0&id=0dac178b&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"outer\",on:{\"click\":function($event){if($event.target !== $event.currentTarget){ return null; }return _vm.open($event)}}},[_c('div',{staticClass:\"current-color\",style:(_vm.transparent ? 'background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAIAAADZF8uwAAAAGUlEQVQYV2M4gwH+YwCGIasIUwhT25BVBADtzYNYrHvv4gAAAABJRU5ErkJggg==)' : 'background-color:' + _vm.color),on:{\"click\":function($event){if($event.target !== $event.currentTarget){ return null; }return _vm.open($event)}}}),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.display),expression:\"display\"}],staticClass:\"mask\",on:{\"click\":function($event){if($event.target !== $event.currentTarget){ return null; }return _vm.closePicker($event)}}}),_c('chrome-picker',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.display),expression:\"display\"}],ref:\"chromePicker\",style:({position: 'fixed', left:_vm.left + 'px', top:_vm.top + 'px', 'z-index': 9999}),attrs:{\"value\":_vm.color,\"tabindex\":\"-1\"},on:{\"input\":_vm.updateColor}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"339cf1e4-vue-loader-template\\\"}!../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./colorpicker.vue?vue&type=template&id=a45a1816&scoped=true&\"","\n\n\n\n\n\n\n\n\r\nimport Vue from \"vue\";\r\nimport Component from \"vue-class-component\";\r\n\r\nimport ContextMenu from \"@/core/components/contextmenu.vue\";\r\n\r\nimport { socket } from \"@/game/api/socket\";\r\nimport { gameStore } from \"@/game/store\";\r\nimport { l2gx, l2gy } from \"@/game/units\";\r\n\r\n@Component({\r\n    components: {\r\n        ContextMenu,\r\n    },\r\n})\r\nexport default class SelectContext extends Vue {\r\n    visible = false;\r\n    x = 0;\r\n    y = 0;\r\n\r\n    get IS_DM(): boolean {\r\n        return gameStore.IS_DM;\r\n    }\r\n\r\n    open(event: MouseEvent) {\r\n        this.visible = true;\r\n        this.x = event.pageX;\r\n        this.y = event.pageY;\r\n        this.$nextTick(() => this.$children[0].$el.focus());\r\n    }\r\n    close() {\r\n        this.visible = false;\r\n    }\r\n    bringPlayers() {\r\n        if (!gameStore.IS_DM) return;\r\n        socket.emit(\"Players.Bring\", { x: l2gx(this.x), y: l2gy(this.y) });\r\n        this.close();\r\n    }\r\n    createToken() {\r\n        (<any>this.$parent.$parent.$refs.createtokendialog).open(this.x, this.y);\r\n        this.close();\r\n    }\r\n    showInitiative() {\r\n        (<any>this.$root.$refs.initiative).visible = true;\r\n        this.close();\r\n    }\r\n}\r\n","import Axios from \"axios\";\r\nimport Vue from \"vue\";\r\nimport Component from \"vue-class-component\";\r\nimport { Route } from \"vue-router\";\r\n\r\nimport { coreStore } from \"@/core/store\";\r\n\r\n@Component({ template: \"\" })\r\nexport default class Logout extends Vue {\r\n    beforeRouteEnter(to: Route, from: Route, next: ({}) => {}) {\r\n        Axios.post(\"/api/logout\").then(() => {\r\n            coreStore.setAuthenticated(false);\r\n            coreStore.setUsername(\"\");\r\n            next({ path: \"/auth/login\" });\r\n        });\r\n    }\r\n}\r\n","import { getModule, Module, Mutation, VuexModule } from \"vuex-module-decorators\";\r\n\r\nimport { rootStore } from \"@/store\";\r\n\r\nexport interface CoreState {\r\n    authenticated: boolean;\r\n    initialized: boolean;\r\n}\r\n\r\n@Module({ dynamic: true, store: rootStore, name: \"core\" })\r\nclass CoreStore extends VuexModule {\r\n    authenticated = false;\r\n    initialized = false;\r\n    username = \"\";\r\n\r\n    @Mutation\r\n    setAuthenticated(auth: boolean) {\r\n        this.authenticated = auth;\r\n    }\r\n\r\n    @Mutation\r\n    setInitialized(init: boolean) {\r\n        this.initialized = init;\r\n    }\r\n\r\n    @Mutation\r\n    setUsername(username: string) {\r\n        this.username = username;\r\n    }\r\n}\r\n\r\nexport const coreStore = getModule(CoreStore);\r\n","import Vue from \"vue\";\r\n\r\nimport App from \"@/App.vue\";\r\nimport { router } from \"@/router\";\r\nimport { rootStore } from \"@/store\";\r\n\r\nVue.config.productionTip = false;\r\nVue.config.devtools = true;\r\nVue.config.performance = true;\r\n\r\nexport const app = new Vue({\r\n    router,\r\n    store: rootStore,\r\n    render: h => h(App),\r\n}).$mount(\"#app\");\r\n\r\n(<any>window).app = app;\r\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport Vue from \"vue\";\r\nimport Component from \"vue-class-component\";\r\n\r\n@Component({\r\n    props: [\"visible\", \"left\", \"top\"],\r\n})\r\nexport default class ContextMenu extends Vue {}\r\n","import Axios, { AxiosError, AxiosResponse } from \"axios\";\r\nimport Vue from \"vue\";\r\nimport Component from \"vue-class-component\";\r\nimport { Route } from \"vue-router\";\r\n\r\n@Component({ template: \"\" })\r\nexport default class Initiative extends Vue {\r\n    beforeRouteEnter(to: Route, from: Route, next: ({}) => {}) {\r\n        Axios.post(\"/api/invite\", {\r\n            code: to.params.code,\r\n        })\r\n            .then((response: AxiosResponse) => {\r\n                next({ path: response.data.sessionUrl });\r\n            })\r\n            .catch((error: AxiosError) => {\r\n                console.error(\"Invitation code could not be redeemed\");\r\n                next({ path: \"/dashboard\" });\r\n            });\r\n    }\r\n}\r\n","import { render, staticRenderFns } from \"./prompt.vue?vue&type=template&id=3c674586&scoped=true&\"\nimport script from \"./prompt.vue?vue&type=script&lang=ts&\"\nexport * from \"./prompt.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./prompt.vue?vue&type=style&index=0&id=3c674586&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3c674586\",\n  null\n  \n)\n\ncomponent.options.__file = \"prompt.vue\"\nexport default component.exports","import { render, staticRenderFns } from \"./edit_dialog.vue?vue&type=template&id=6f3cf09f&scoped=true&\"\nimport script from \"./edit_dialog.vue?vue&type=script&lang=ts&\"\nexport * from \"./edit_dialog.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./edit_dialog.vue?vue&type=style&index=0&id=6f3cf09f&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6f3cf09f\",\n  null\n  \n)\n\ncomponent.options.__file = \"edit_dialog.vue\"\nexport default component.exports","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./confirm.vue?vue&type=style&index=0&id=94ad04e6&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./confirm.vue?vue&type=style&index=0&id=94ad04e6&scoped=true&lang=css&\"","export class Settings {\r\n    static angleSteps = 4;\r\n    static drawAngleLines = false;\r\n    static drawFirstLightHit = false;\r\n    static skipPlayerFOW = false;\r\n    static skipLightFOW = false;\r\n\r\n    static tempFill: string = \"fog\";\r\n}\r\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport axios, { AxiosError, AxiosResponse } from \"axios\";\r\nimport Vue from \"vue\";\r\nimport Component from \"vue-class-component\";\r\n\r\nimport { coreStore } from \"@/core/store\";\r\n\r\n@Component\r\nexport default class Login extends Vue {\r\n    username = \"\";\r\n    password = \"\";\r\n    error = \"\";\r\n\r\n    login() {\r\n        axios\r\n            .post(\"/api/login\", {\r\n                username: this.username,\r\n                password: this.password,\r\n            })\r\n            .then((response: AxiosResponse) => {\r\n                coreStore.setUsername(this.username);\r\n                coreStore.setAuthenticated(true);\r\n                this.$router.push(<string>this.$route.query.redirect || \"/\");\r\n            })\r\n            .catch((error: AxiosError) => {\r\n                if (error.response) this.error = error.response.statusText;\r\n                else this.error = \"Unknown error occured\";\r\n            });\r\n    }\r\n\r\n    register() {\r\n        axios\r\n            .post(\"/api/register\", {\r\n                username: this.username,\r\n                password: this.password,\r\n            })\r\n            .then((response: AxiosResponse) => {\r\n                coreStore.setUsername(this.username);\r\n                coreStore.setAuthenticated(true);\r\n                this.$router.push(<string>this.$route.query.redirect || \"/\");\r\n            })\r\n            .catch((error: AxiosError) => {\r\n                if (error.response) this.error = error.response.statusText;\r\n                else this.error = \"Unknown error occured\";\r\n            });\r\n    }\r\n\r\n    focusin(event: { target?: { nextElementSibling?: HTMLElement } }) {\r\n        if (event.target && event.target.nextElementSibling) {\r\n            const span = event.target.nextElementSibling;\r\n            span.style.opacity = \"0\";\r\n        }\r\n    }\r\n\r\n    focusout(event: { target?: { nextElementSibling?: HTMLElement } }) {\r\n        if (event.target && event.target.nextElementSibling) {\r\n            const span = event.target.nextElementSibling;\r\n            span.style.opacity = \"1\";\r\n        }\r\n    }\r\n}\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.shape !== null)?_c('div',[_c('div',{attrs:{\"id\":\"selection-menu\"}},[_c('div',{attrs:{\"id\":\"selection-edit-button\"},on:{\"click\":_vm.openEditDialog}},[_c('i',{staticClass:\"fas fa-edit\"})]),_c('div',{attrs:{\"id\":\"selection-name\"}},[_vm._v(_vm._s(_vm.shape.name))]),_c('div',{attrs:{\"id\":\"selection-trackers\"}},[_vm._l((_vm.shape.trackers),function(tracker){return (tracker.name !== '' || tracker.value !== 0)?[_c('div',{key:'name-' + tracker.uuid},[_vm._v(_vm._s(tracker.name))]),_c('div',{key:'value-' + tracker.uuid,staticClass:\"selection-tracker-value\",on:{\"click\":function($event){_vm.changeValue(tracker, false)}}},[(tracker.maxvalue === 0)?[_vm._v(_vm._s(tracker.value))]:[_vm._v(_vm._s(tracker.value)+\" / \"+_vm._s(tracker.maxvalue))]],2)]:_vm._e()})],2),_c('div',{attrs:{\"id\":\"selection-auras\"}},[_vm._l((_vm.shape.auras),function(aura){return (aura.name !== '' || aura.value !== 0)?[_c('div',{key:'name-' + aura.uuid},[_vm._v(_vm._s(aura.name))]),_c('div',{key:'value-' + aura.uuid,staticClass:\"selection-tracker-value\",on:{\"click\":function($event){_vm.changeValue(aura, true)}}},[(aura.dim === 0)?[_vm._v(_vm._s(aura.value))]:[_vm._v(_vm._s(aura.value)+\" / \"+_vm._s(aura.dim))]],2)]:_vm._e()})],2)]),_c('edit-dialog',{ref:\"editDialog\",attrs:{\"shape\":_vm.shape}})],1):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"339cf1e4-vue-loader-template\\\"}!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./selection_info.vue?vue&type=template&id=4d8cbeae&scoped=true&\"","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--12-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./game.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--12-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./game.vue?vue&type=script&lang=ts&\"","import Component from \"vue-class-component\";\r\n\r\nimport Tool from \"@/game/ui/tools/tool.vue\";\r\n\r\nimport { socket } from \"@/game/api/socket\";\r\nimport { GlobalPoint } from \"@/game/geom\";\r\nimport { layerManager } from \"@/game/layers/manager\";\r\nimport { Line } from \"@/game/shapes/line\";\r\nimport { Text } from \"@/game/shapes/text\";\r\nimport { gameStore } from \"@/game/store\";\r\nimport { l2g } from \"@/game/units\";\r\nimport { getMouse } from \"@/game/utils\";\r\n\r\n@Component\r\nexport class RulerTool extends Tool {\r\n    name = \"Ruler\";\r\n    active = false;\r\n    startPoint: GlobalPoint | null = null;\r\n    ruler: Line | null = null;\r\n    text: Text | null = null;\r\n    onMouseDown(event: MouseEvent) {\r\n        const layer = layerManager.getLayer(\"draw\");\r\n        if (layer === undefined) {\r\n            console.log(\"No draw layer!\");\r\n            return;\r\n        }\r\n        this.active = true;\r\n        this.startPoint = l2g(getMouse(event));\r\n        this.ruler = new Line(this.startPoint, this.startPoint, 3, gameStore.rulerColour);\r\n        this.text = new Text(this.startPoint.clone(), \"\", \"bold 20px serif\");\r\n        this.ruler.owners.push(gameStore.username);\r\n        this.text.owners.push(gameStore.username);\r\n        layer.addShape(this.ruler, true, true);\r\n        layer.addShape(this.text, true, true);\r\n    }\r\n    onMouseMove(event: MouseEvent) {\r\n        if (!this.active || this.ruler === null || this.startPoint === null || this.text === null) return;\r\n\r\n        const layer = layerManager.getLayer(\"draw\");\r\n        if (layer === undefined) {\r\n            console.log(\"No draw layer!\");\r\n            return;\r\n        }\r\n        const endPoint = l2g(getMouse(event));\r\n\r\n        this.ruler.endPoint = endPoint;\r\n        socket.emit(\"Shape.Update\", { shape: this.ruler!.asDict(), redraw: true, temporary: true });\r\n\r\n        const diffsign = Math.sign(endPoint.x - this.startPoint.x) * Math.sign(endPoint.y - this.startPoint.y);\r\n        const xdiff = Math.abs(endPoint.x - this.startPoint.x);\r\n        const ydiff = Math.abs(endPoint.y - this.startPoint.y);\r\n        const label =\r\n            Math.round((Math.sqrt(xdiff ** 2 + ydiff ** 2) * gameStore.unitSize) / gameStore.gridSize) + \" ft\";\r\n        const angle = Math.atan2(diffsign * ydiff, xdiff);\r\n        const xmid = Math.min(this.startPoint.x, endPoint.x) + xdiff / 2;\r\n        const ymid = Math.min(this.startPoint.y, endPoint.y) + ydiff / 2;\r\n        this.text.refPoint.x = xmid;\r\n        this.text.refPoint.y = ymid;\r\n        this.text.text = label;\r\n        this.text.angle = angle;\r\n        socket.emit(\"Shape.Update\", { shape: this.text.asDict(), redraw: true, temporary: true });\r\n        layer.invalidate(true);\r\n    }\r\n    onMouseUp(event: MouseEvent) {\r\n        if (!this.active || this.ruler === null || this.startPoint === null || this.text === null) return;\r\n\r\n        const layer = layerManager.getLayer(\"draw\");\r\n        if (layer === undefined) {\r\n            console.log(\"No active layer!\");\r\n            return;\r\n        }\r\n        this.active = false;\r\n\r\n        layer.removeShape(this.ruler, true, true);\r\n        layer.removeShape(this.text, true, true);\r\n        layer.invalidate(true);\r\n        this.ruler = this.startPoint = this.text = null;\r\n    }\r\n}\r\n","import { render, staticRenderFns } from \"./modal.vue?vue&type=template&id=8b7717ce&scoped=true&\"\nimport script from \"./modal.vue?vue&type=script&lang=ts&\"\nexport * from \"./modal.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./modal.vue?vue&type=style&index=0&id=8b7717ce&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"8b7717ce\",\n  null\n  \n)\n\ncomponent.options.__file = \"modal.vue\"\nexport default component.exports","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./game.vue?vue&type=style&index=1&id=07e4e47f&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./game.vue?vue&type=style&index=1&id=07e4e47f&scoped=true&lang=css&\"","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport Vue from \"vue\";\r\nimport Component from \"vue-class-component\";\r\n\r\nimport ColorPicker from \"@/core/components/colorpicker.vue\";\r\nimport Modal from \"@/core/components/modals/modal.vue\";\r\n\r\nimport { uuidv4 } from \"@/core/utils\";\r\nimport { socket } from \"@/game/api/socket\";\r\nimport { layerManager } from \"@/game/layers/manager\";\r\nimport { Shape } from \"@/game/shapes/shape\";\r\nimport { gameStore } from \"@/game/store\";\r\nimport { Prop } from \"vue-property-decorator\";\r\n\r\n@Component({\r\n    components: {\r\n        Modal,\r\n        \"color-picker\": ColorPicker,\r\n    },\r\n})\r\nexport default class EditDialog extends Vue {\r\n    @Prop() shape!: Shape;\r\n\r\n    visible = false;\r\n    updated() {\r\n        this.addEmpty();\r\n    }\r\n    addEmpty() {\r\n        if (this.shape.owners[this.shape.owners.length - 1] !== \"\") this.shape.owners.push(\"\");\r\n        if (\r\n            !this.shape.trackers.length ||\r\n            this.shape.trackers[this.shape.trackers.length - 1].name !== \"\" ||\r\n            this.shape.trackers[this.shape.trackers.length - 1].value !== 0\r\n        )\r\n            this.shape.trackers.push({ uuid: uuidv4(), name: \"\", value: 0, maxvalue: 0, visible: false });\r\n        if (\r\n            !this.shape.auras.length ||\r\n            this.shape.auras[this.shape.auras.length - 1].name !== \"\" ||\r\n            this.shape.auras[this.shape.auras.length - 1].value !== 0\r\n        )\r\n            this.shape.auras.push({\r\n                uuid: uuidv4(),\r\n                name: \"\",\r\n                value: 0,\r\n                dim: 0,\r\n                visionSource: false,\r\n                colour: \"rgba(0,0,0,0)\",\r\n                visible: false,\r\n            });\r\n    }\r\n    updateShape(redraw: boolean) {\r\n        socket.emit(\"Shape.Update\", { shape: this.shape.asDict(), redraw, temporary: false });\r\n        if (redraw) layerManager.invalidate();\r\n        this.addEmpty();\r\n    }\r\n    setToken(event: { target: HTMLInputElement }) {\r\n        this.shape.setIsToken(event.target.checked);\r\n        this.updateShape(true);\r\n    }\r\n    setVisionBlocker(event: { target: HTMLInputElement }) {\r\n        this.shape.checkVisionSources();\r\n        this.updateShape(true);\r\n    }\r\n    setMovementBlocker(event: { target: HTMLInputElement }) {\r\n        this.shape.setMovementBlock(event.target.checked);\r\n        this.updateShape(false);\r\n    }\r\n    updateAnnotation(event: { target: HTMLInputElement }) {\r\n        const hadAnnotation = this.shape.annotation !== \"\";\r\n        this.shape.annotation = event.target.value;\r\n        if (this.shape.annotation !== \"\" && !hadAnnotation) {\r\n            gameStore.annotations.push(this.shape.uuid);\r\n            if (layerManager.hasLayer(\"draw\")) layerManager.getLayer(\"draw\")!.invalidate(true);\r\n        } else if (this.shape.annotation === \"\" && hadAnnotation) {\r\n            gameStore.annotations.splice(gameStore.annotations.findIndex(an => an === this.shape.uuid));\r\n            if (layerManager.hasLayer(\"draw\")) layerManager.getLayer(\"draw\")!.invalidate(true);\r\n        }\r\n        this.updateShape(false);\r\n    }\r\n    updateOwner(event: { target: HTMLInputElement }, oldValue: string) {\r\n        const ownerIndex = this.shape.owners.findIndex(o => o === oldValue);\r\n        if (ownerIndex >= 0) this.shape.owners.splice(ownerIndex, 1, event.target.value);\r\n        else this.shape.owners.push(event.target.value);\r\n        this.updateShape(gameStore.fowLOS);\r\n    }\r\n    removeOwner(value: string) {\r\n        const ownerIndex = this.shape.owners.findIndex(o => o === value);\r\n        this.shape.owners.splice(ownerIndex, 1);\r\n        this.updateShape(gameStore.fowLOS);\r\n    }\r\n    removeTracker(uuid: string) {\r\n        this.shape.trackers = this.shape.trackers.filter(tr => tr.uuid !== uuid);\r\n        this.updateShape(false);\r\n    }\r\n    removeAura(uuid: string) {\r\n        this.shape.auras = this.shape.auras.filter(au => au.uuid !== uuid);\r\n        this.shape.checkVisionSources();\r\n        this.updateShape(true);\r\n    }\r\n    updateAuraVisionSource(aura: Aura) {\r\n        aura.visionSource = !aura.visionSource;\r\n        const i = gameStore.visionSources.findIndex(ls => ls.aura === aura.uuid);\r\n        if (aura.visionSource && i === -1) gameStore.visionSources.push({ shape: this.shape.uuid, aura: aura.uuid });\r\n        else if (!aura.visionSource && i >= 0) gameStore.visionSources.splice(i, 1);\r\n        // aura.lastPath = undefined;\r\n        layerManager.invalidateLight();\r\n        this.updateShape(true);\r\n    }\r\n    updateAuraColour(aura: Aura, colour: string) {\r\n        const layer = layerManager.getLayer(this.shape.layer);\r\n        if (layer === undefined) return;\r\n        layer.invalidate(!aura.visionSource);\r\n    }\r\n}\r\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport Vue from \"vue\";\r\nimport Component from \"vue-class-component\";\r\n\r\nimport Modal from \"@/core/components/modals/modal.vue\";\r\n\r\n@Component({\r\n    components: {\r\n        Modal,\r\n    },\r\n})\r\nexport default class ConfirmDialog extends Vue {\r\n    $refs!: {\r\n        confirm: HTMLButtonElement;\r\n    };\r\n\r\n    visible = false;\r\n    yes = \"Yes\";\r\n    no = \"No\";\r\n    title = \"\";\r\n\r\n    resolve = (ok: boolean) => {};\r\n    reject = () => {};\r\n\r\n    confirm() {\r\n        this.resolve(true);\r\n        this.close();\r\n    }\r\n    deny() {\r\n        this.resolve(false);\r\n        this.close();\r\n    }\r\n    close() {\r\n        this.reject();\r\n        this.visible = false;\r\n        this.title = \"\";\r\n    }\r\n    open(title: string, yes = \"yes\", no = \"no\"): Promise<boolean> {\r\n        this.yes = yes;\r\n        this.no = no;\r\n        this.title = title;\r\n\r\n        this.visible = true;\r\n        this.$nextTick(() => {\r\n            this.$refs.confirm.focus();\r\n        });\r\n\r\n        return new Promise((resolve, reject) => {\r\n            this.resolve = resolve;\r\n            this.reject = reject;\r\n        });\r\n    }\r\n}\r\n","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./edit_dialog.vue?vue&type=style&index=0&id=6f3cf09f&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./edit_dialog.vue?vue&type=style&index=0&id=6f3cf09f&scoped=true&lang=css&\"","import { render, staticRenderFns } from \"./map.vue?vue&type=template&id=1ca85fc4&\"\nimport script from \"./map.vue?vue&type=script&lang=ts&\"\nexport * from \"./map.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"map.vue\"\nexport default component.exports","\n\n\n\n\n\n\n\r\nimport Vue from \"vue\";\r\n\r\nimport Component from \"vue-class-component\";\r\n\r\nimport AssetManager from \"@/assetManager/manager.vue\";\r\nimport ContextMenu from \"@/core/components/contextmenu.vue\";\r\nimport ConfirmDialog from \"@/core/components/modals/confirm.vue\";\r\nimport Prompt from \"@/core/components/modals/prompt.vue\";\r\n\r\nimport { socket } from \"@/assetManager/socket\";\r\nimport { assetStore } from \"@/assetManager/store\";\r\nimport { getComponent, getRef } from \"@/core/utils\";\r\n\r\n@Component({\r\n    components: {\r\n        ContextMenu,\r\n    },\r\n})\r\nexport default class AssetContextMenu extends Vue {\r\n    visible = false;\r\n    left = 0;\r\n    top = 0;\r\n    open(event: MouseEvent, inode: number) {\r\n        if (!assetStore.selected.includes(inode)) getComponent<any>().select(event, inode);\r\n\r\n        this.visible = true;\r\n        this.left = event.pageX;\r\n        this.top = event.pageY;\r\n        this.$nextTick(() => {\r\n            this.$children[0].$el.focus();\r\n        });\r\n    }\r\n    close() {\r\n        this.visible = false;\r\n    }\r\n    rename() {\r\n        if (assetStore.selected.length !== 1) return;\r\n        const asset = assetStore.idMap.get(assetStore.selected[0])!;\r\n\r\n        getRef<Prompt>(\"prompt\")\r\n            .prompt(\"New name:\", `Renaming ${asset.name}`)\r\n            .then(\r\n                (name: string) => {\r\n                    socket.emit(\"Asset.Rename\", {\r\n                        asset: asset.id,\r\n                        name,\r\n                    });\r\n                    asset.name = name;\r\n                    getComponent().$forceUpdate();\r\n                },\r\n                () => {},\r\n            );\r\n        this.close();\r\n    }\r\n    remove() {\r\n        if (assetStore.selected.length === 0) return;\r\n        getRef<ConfirmDialog>(\"confirm\")\r\n            .open(\"Are you sure you wish to remove this?\")\r\n            .then(\r\n                (result: boolean) => {\r\n                    if (result) {\r\n                        for (const sel of assetStore.selected) {\r\n                            socket.emit(\"Asset.Remove\", sel);\r\n                            if (assetStore.isFile(sel)) assetStore.files.splice(assetStore.files.indexOf(sel), 1);\r\n                            else assetStore.folders.splice(assetStore.folders.indexOf(sel), 1);\r\n                        }\r\n                        assetStore.selected = [];\r\n                    }\r\n                },\r\n                () => {},\r\n            );\r\n        this.close();\r\n    }\r\n}\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./select.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./select.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./manager.vue?vue&type=template&id=8fda09aa&\"\nimport script from \"./manager.vue?vue&type=script&lang=ts&\"\nexport * from \"./manager.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./manager.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"manager.vue\"\nexport default component.exports","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tools.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tools.vue?vue&type=script&lang=ts&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./modal.vue?vue&type=style&index=0&id=8b7717ce&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./modal.vue?vue&type=style&index=0&id=8b7717ce&scoped=true&lang=css&\"","import { render, staticRenderFns } from \"./tool.vue?vue&type=template&id=72c5bad7&\"\nimport script from \"./tool.vue?vue&type=script&lang=ts&\"\nexport * from \"./tool.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./tool.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"tool.vue\"\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport Vue from \"vue\";\r\nimport Component from \"vue-class-component\";\r\nimport draggable from \"vuedraggable\";\r\nVue.component(\"draggable\", draggable);\r\n\r\nimport Modal from \"@/core/components/modals/modal.vue\";\r\n\r\nimport { uuidv4 } from \"@/core/utils\";\r\nimport { socket } from \"@/game/api/socket\";\r\nimport { InitiativeData, InitiativeEffect } from \"@/game/comm/types/general\";\r\nimport { EventBus } from \"@/game/event-bus\";\r\nimport { layerManager } from \"@/game/layers/manager\";\r\nimport { gameStore } from \"@/game/store\";\r\n\r\n@Component({\r\n    components: {\r\n        Modal,\r\n        draggable,\r\n    },\r\n})\r\nexport default class Initiative extends Vue {\r\n    visible = false;\r\n    data: InitiativeData[] = [];\r\n    currentActor: string | null = null;\r\n    roundCounter = 0;\r\n\r\n    mounted() {\r\n        EventBus.$on(\"Initiative.Clear\", this.clear);\r\n        EventBus.$on(\"Initiative.Remove\", (data: string) => this.removeInitiative(data));\r\n\r\n        socket.on(\"Initiative.Set\", (data: InitiativeData[]) => {\r\n            this.data = data;\r\n        });\r\n        socket.on(\"Initiative.Turn.Update\", (data: string) => this.setTurn(data, false));\r\n        socket.on(\"Initiative.Round.Update\", (data: number) => this.setRound(data, false));\r\n        socket.on(\"Initiative.Effect.New\", (data: { actor: string; effect: InitiativeEffect }) => {\r\n            const actor = this.getActor(data.actor);\r\n            if (actor === undefined) return;\r\n            this.createEffect(actor, data.effect, false);\r\n        });\r\n        socket.on(\"Initiative.Effect.Update\", (data: { actor: string; effect: InitiativeEffect }) =>\r\n            this.updateEffect(data.actor, data.effect, false),\r\n        );\r\n    }\r\n\r\n    beforeDestroy() {\r\n        EventBus.$off();\r\n    }\r\n\r\n    // Utilities\r\n    clear() {\r\n        this.data = [];\r\n        this.currentActor = null;\r\n    }\r\n    getActor(actorId: string) {\r\n        return this.data.find(a => a.uuid === actorId);\r\n    }\r\n    contains(uuid: string) {\r\n        return this.data.some(d => d.uuid === uuid);\r\n    }\r\n    owns(actor: InitiativeData): boolean {\r\n        if (gameStore.IS_DM) return true;\r\n        const shape = layerManager.UUIDMap.get(actor.uuid);\r\n        // Shapes that are unknown to this client are hidden from this client but owned by other clients\r\n        if (shape === undefined) return false;\r\n        return shape.owners.includes(gameStore.username);\r\n    }\r\n    getDefaultEffect() {\r\n        return { uuid: uuidv4(), name: \"New Effect\", turns: 10 };\r\n    }\r\n    fakeSetData(dataTransfer: DataTransfer) {\r\n        dataTransfer.setData(\"Hack\", \"\");\r\n    }\r\n    syncInitiative(data: InitiativeData | { uuid: string }) {\r\n        socket.emit(\"Initiative.Update\", data);\r\n    }\r\n    // Events\r\n    addInitiative(data: InitiativeData) {\r\n        const d = this.data.findIndex(a => a.uuid === data.uuid);\r\n        if (d >= 0) return;\r\n        if (data.initiative === undefined) data.initiative = 0;\r\n        this.syncInitiative(data);\r\n    }\r\n    removeInitiative(uuid: string) {\r\n        const d = this.data.findIndex(a => a.uuid === uuid);\r\n        if (d < 0 || this.data[d].group) return;\r\n        this.syncInitiative({ uuid });\r\n        // Remove highlight\r\n        const shape = layerManager.UUIDMap.get(uuid);\r\n        if (shape === undefined) return;\r\n        if (shape.showHighlight) {\r\n            shape.showHighlight = false;\r\n            layerManager.getLayer(shape.layer)!.invalidate(true);\r\n        }\r\n    }\r\n    updateOrder() {\r\n        if (!gameStore.IS_DM) return;\r\n        socket.emit(\"Initiative.Set\", this.data.map(d => d.uuid));\r\n    }\r\n    setTurn(actorId: string | null, sync: boolean) {\r\n        if (!gameStore.IS_DM && sync) return;\r\n        this.currentActor = actorId;\r\n        const actor = this.data.find(a => a.uuid === actorId);\r\n        if (actor === undefined) return;\r\n        if (actor.effects) {\r\n            for (let e = actor.effects.length - 1; e >= 0; e--) {\r\n                if (actor.effects[e].turns <= 0) actor.effects.splice(e, 1);\r\n                else actor.effects[e].turns--;\r\n            }\r\n        }\r\n        if (sync) socket.emit(\"Initiative.Turn.Update\", actorId);\r\n    }\r\n    setRound(round: number, sync: boolean) {\r\n        if (!gameStore.IS_DM && sync) return;\r\n        this.roundCounter = round;\r\n        if (sync) socket.emit(\"Initiative.Round.Update\", round);\r\n    }\r\n    nextTurn() {\r\n        if (!gameStore.IS_DM) return;\r\n        const order = this.data;\r\n        const next = order[(order.findIndex(a => a.uuid === this.currentActor) + 1) % order.length];\r\n        if (this.data[0].uuid === next.uuid) this.setRound(this.roundCounter + 1, true);\r\n        this.setTurn(next.uuid, true);\r\n    }\r\n    toggleHighlight(actor: InitiativeData, show: boolean) {\r\n        const shape = layerManager.UUIDMap.get(actor.uuid);\r\n        if (shape === undefined) return;\r\n        shape.showHighlight = show;\r\n        layerManager.getLayer(shape.layer)!.invalidate(true);\r\n    }\r\n    toggleOption(actor: InitiativeData, option: \"visible\" | \"group\") {\r\n        if (!this.owns(actor)) return;\r\n        actor[option] = !actor[option];\r\n        this.syncInitiative(actor);\r\n    }\r\n    createEffect(actor: InitiativeData, effect: InitiativeEffect, sync: boolean) {\r\n        if (!this.owns(actor)) return;\r\n        actor.effects.push(effect);\r\n        if (sync) socket.emit(\"Initiative.Effect.New\", { actor: actor.uuid, effect });\r\n    }\r\n    syncEffect(actor: InitiativeData, effect: InitiativeEffect) {\r\n        if (!this.owns(actor)) return;\r\n        socket.emit(\"Initiative.Effect.Update\", { actor: actor.uuid, effect });\r\n    }\r\n    updateEffect(actorId: string, effect: InitiativeEffect, sync: boolean) {\r\n        const actor = this.data.find(a => a.uuid === actorId);\r\n        if (actor === undefined) return;\r\n        const effectIndex = actor.effects.findIndex(e => e.uuid === effect.uuid);\r\n        if (effectIndex === undefined) return;\r\n        actor.effects[effectIndex] = effect;\r\n        if (sync) this.syncEffect(actor, effect);\r\n        else this.$forceUpdate();\r\n    }\r\n}\r\n","import { render, staticRenderFns } from \"./selection_info.vue?vue&type=template&id=4d8cbeae&scoped=true&\"\nimport script from \"./selection_info.vue?vue&type=script&lang=ts&\"\nexport * from \"./selection_info.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./selection_info.vue?vue&type=style&index=0&id=4d8cbeae&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4d8cbeae\",\n  null\n  \n)\n\ncomponent.options.__file = \"selection_info.vue\"\nexport default component.exports","// import Vuex from \"vuex\";\r\nimport { Action, getModule, Module, Mutation, VuexModule } from \"vuex-module-decorators\";\r\n\r\nimport { AssetList } from \"@/core/comm/types\";\r\nimport { socket } from \"@/game/api/socket\";\r\nimport { sendClientOptions } from \"@/game/api/utils\";\r\nimport { BoundingVolume } from \"@/game/bvh/bvh\";\r\nimport { Note } from \"@/game/comm/types/general\";\r\nimport { GlobalPoint } from \"@/game/geom\";\r\nimport { layerManager } from \"@/game/layers/manager\";\r\nimport { g2l, l2g } from \"@/game/units\";\r\nimport { rootStore } from \"@/store\";\r\n\r\nexport interface GameState {\r\n    boardInitialized: boolean;\r\n}\r\n\r\n@Module({ dynamic: true, store: rootStore, name: \"game\", namespaced: true })\r\nclass GameStore extends VuexModule {\r\n    // This is a limited view of selectable layers that is used to generate the layer selection UI and ability to switch layers\r\n    // See the layerManager for proper layer management tools\r\n    layers: string[] = [];\r\n    selectedLayerIndex = -1;\r\n    boardInitialized = false;\r\n\r\n    locations: string[] = [];\r\n\r\n    assets: AssetList = {};\r\n\r\n    notes: Note[] = [];\r\n\r\n    IS_DM = false;\r\n    gridSize = 50;\r\n    username = \"\";\r\n    roomName = \"\";\r\n    roomCreator = \"\";\r\n    invitationCode = \"\";\r\n\r\n    gridColour = \"rgba(0, 0, 0, 1)\";\r\n    fowColour = \"rgba(0, 0, 0, 1)\";\r\n    rulerColour = \"rgba(255, 0, 0, 1)\";\r\n    panX = 0;\r\n    panY = 0;\r\n    zoomFactor = 1;\r\n\r\n    unitSize = 5;\r\n    useGrid = true;\r\n    fullFOW = false;\r\n    fowOpacity = 0.3;\r\n    fowLOS = false;\r\n    locationName = \"\";\r\n\r\n    visionSources: { shape: string; aura: string }[] = [];\r\n    visionBlockers: string[] = [];\r\n    annotations: string[] = [];\r\n    movementblockers: string[] = [];\r\n    ownedtokens: string[] = [];\r\n\r\n    BV = Object.freeze(new BoundingVolume([]));\r\n\r\n    get selectedLayer() {\r\n        return this.layers[this.selectedLayerIndex];\r\n    }\r\n\r\n    @Mutation\r\n    setBoardInitialized(boardInitialized: boolean) {\r\n        this.boardInitialized = boardInitialized;\r\n    }\r\n\r\n    @Mutation\r\n    setDM(isDM: boolean) {\r\n        this.IS_DM = isDM;\r\n    }\r\n\r\n    @Mutation\r\n    setUsername(username: string) {\r\n        this.username = username;\r\n    }\r\n\r\n    @Mutation\r\n    setRoomName(name: string) {\r\n        this.roomName = name;\r\n    }\r\n\r\n    @Mutation\r\n    setRoomCreator(name: string) {\r\n        this.roomCreator = name;\r\n    }\r\n\r\n    @Mutation\r\n    setInvitationCode(code: string) {\r\n        this.invitationCode = code;\r\n    }\r\n\r\n    @Mutation\r\n    addLayer(name: string) {\r\n        this.layers.push(name);\r\n        if (this.selectedLayerIndex === -1) this.selectedLayerIndex = this.layers.indexOf(name);\r\n    }\r\n\r\n    @Mutation\r\n    selectLayer(data: { name: string; sync: boolean }) {\r\n        const index = this.layers.indexOf(data.name);\r\n        if (index >= 0) this.selectedLayerIndex = index;\r\n        if (data.sync) socket.emit(\"Client.ActiveLayer.Set\", data.name);\r\n    }\r\n\r\n    @Mutation\r\n    newNote(data: { note: Note; sync: boolean }) {\r\n        this.notes.push(data.note);\r\n        if (data.sync) socket.emit(\"Note.New\", data.note);\r\n    }\r\n\r\n    @Mutation\r\n    setAssets(assets: AssetList) {\r\n        this.assets = assets;\r\n    }\r\n\r\n    @Mutation\r\n    setLocations(locations: string[]) {\r\n        this.locations = locations;\r\n    }\r\n\r\n    @Mutation\r\n    resetLayerInfo() {\r\n        this.layers = [];\r\n        this.selectedLayerIndex = -1;\r\n    }\r\n\r\n    @Mutation\r\n    recalculateBV() {\r\n        if (this.boardInitialized) {\r\n            let success = false;\r\n            while (!success) {\r\n                success = true;\r\n                try {\r\n                    this.BV = Object.freeze(new BoundingVolume(this.visionBlockers));\r\n                } catch {\r\n                    success = false;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    @Mutation\r\n    updateZoom(data: { newZoomValue: number; zoomLocation: GlobalPoint }) {\r\n        if (data.newZoomValue === this.zoomFactor) return;\r\n        if (data.newZoomValue < 0.1) data.newZoomValue = 0.1;\r\n        if (data.newZoomValue > 5) data.newZoomValue = 5;\r\n\r\n        const oldLoc = g2l(data.zoomLocation);\r\n\r\n        this.zoomFactor = data.newZoomValue;\r\n\r\n        const newLoc = l2g(oldLoc);\r\n\r\n        // Change the pan settings to keep the zoomLocation in the same exact location before and after the zoom.\r\n        const diff = newLoc.subtract(data.zoomLocation);\r\n        this.panX += diff.x;\r\n        this.panY += diff.y;\r\n\r\n        layerManager.invalidate();\r\n        sendClientOptions();\r\n    }\r\n\r\n    @Mutation\r\n    setGridColour(data: { colour: string; sync: boolean }) {\r\n        this.gridColour = data.colour;\r\n        layerManager.getGridLayer()!.drawGrid();\r\n        if (data.sync) socket.emit(\"Client.Options.Set\", { gridColour: data.colour });\r\n    }\r\n\r\n    @Mutation\r\n    setFOWColour(data: { colour: string; sync: boolean }) {\r\n        this.fowColour = data.colour;\r\n        layerManager.invalidate();\r\n        if (data.sync) socket.emit(\"Client.Options.Set\", { fowColour: data.colour });\r\n    }\r\n\r\n    @Mutation\r\n    setRulerColour(data: { colour: string; sync: boolean }) {\r\n        this.rulerColour = data.colour;\r\n        if (data.sync) socket.emit(\"Client.Options.Set\", { rulerColour: data.colour });\r\n    }\r\n\r\n    @Mutation\r\n    setPanX(x: number) {\r\n        this.panX = x;\r\n    }\r\n\r\n    @Mutation\r\n    setPanY(y: number) {\r\n        this.panY = y;\r\n    }\r\n\r\n    @Mutation\r\n    setZoomFactor(zoomFactor: number) {\r\n        this.zoomFactor = zoomFactor;\r\n    }\r\n\r\n    @Mutation\r\n    increasePanX(increase: number) {\r\n        this.panX += increase;\r\n    }\r\n\r\n    @Mutation\r\n    increasePanY(increase: number) {\r\n        this.panY += increase;\r\n    }\r\n\r\n    @Mutation\r\n    setUnitSize(data: { unitSize: number; sync: boolean }) {\r\n        if (this.unitSize !== data.unitSize) {\r\n            this.unitSize = data.unitSize;\r\n            if (layerManager.getGridLayer() !== undefined) layerManager.getGridLayer()!.drawGrid();\r\n            if (data.sync) socket.emit(\"Location.Options.Set\", { unit_size: data.unitSize });\r\n        }\r\n    }\r\n\r\n    @Mutation\r\n    setUseGrid(data: { useGrid: boolean; sync: boolean }) {\r\n        if (this.useGrid !== data.useGrid) {\r\n            this.useGrid = data.useGrid;\r\n            const gridLayer = layerManager.getGridLayer()!;\r\n            if (data.useGrid) gridLayer.canvas.style.display = \"block\";\r\n            else gridLayer.canvas.style.display = \"none\";\r\n            if (data.sync) socket.emit(\"Location.Options.Set\", { use_grid: data.useGrid });\r\n        }\r\n    }\r\n\r\n    @Mutation\r\n    setGridSize(data: { gridSize: number; sync: boolean }): void {\r\n        if (this.gridSize !== data.gridSize && data.gridSize > 0) {\r\n            this.gridSize = data.gridSize;\r\n            const gridLayer = layerManager.getGridLayer();\r\n            if (gridLayer !== undefined) gridLayer.drawGrid();\r\n            if (data.sync) socket.emit(\"Gridsize.Set\", data.gridSize);\r\n        }\r\n    }\r\n\r\n    @Mutation\r\n    setFullFOW(data: { fullFOW: boolean; sync: boolean }) {\r\n        if (this.fullFOW !== data.fullFOW) {\r\n            this.fullFOW = data.fullFOW;\r\n            layerManager.invalidateLight();\r\n            if (data.sync) socket.emit(\"Location.Options.Set\", { full_fow: data.fullFOW });\r\n        }\r\n    }\r\n\r\n    @Mutation\r\n    setFOWOpacity(data: { fowOpacity: number; sync: boolean }) {\r\n        this.fowOpacity = data.fowOpacity;\r\n        layerManager.invalidateLight();\r\n        if (data.sync) socket.emit(\"Location.Options.Set\", { fow_opacity: data.fowOpacity });\r\n    }\r\n\r\n    @Mutation\r\n    setLineOfSight(data: { fowLOS: boolean; sync: boolean }) {\r\n        if (this.fowLOS !== data.fowLOS) {\r\n            this.fowLOS = data.fowLOS;\r\n            layerManager.invalidate();\r\n            if (data.sync) socket.emit(\"Location.Options.Set\", { fow_los: data.fowLOS });\r\n        }\r\n    }\r\n\r\n    @Mutation\r\n    setLocationName(name: string) {\r\n        this.locationName = name;\r\n    }\r\n\r\n    @Mutation\r\n    updateNote(data: { note: Note; sync: boolean }) {\r\n        const actualNote = this.notes.find(n => n.uuid === data.note.uuid);\r\n        if (actualNote === undefined) return;\r\n        actualNote.title = data.note.title;\r\n        actualNote.text = data.note.text;\r\n        if (data.sync) socket.emit(\"Note.Update\", actualNote);\r\n    }\r\n\r\n    @Mutation\r\n    removeNote(data: { note: Note; sync: boolean }) {\r\n        this.notes = this.notes.filter(n => n.uuid !== data.note.uuid);\r\n        if (data.sync) socket.emit(\"Note.Remove\", data.note.uuid);\r\n    }\r\n\r\n    @Action\r\n    clear() {\r\n        this.context.getters.visionSources = [];\r\n        this.context.getters.visionBlockers = [];\r\n        this.context.getters.ownedtokens = [];\r\n        this.context.getters.annotations = [];\r\n        this.context.getters.movementblockers = [];\r\n        this.context.commit(\"recalculateBV\");\r\n    }\r\n}\r\n\r\nexport const gameStore = getModule(GameStore);\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./confirm.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./confirm.vue?vue&type=script&lang=ts&\"","import { ServerAura } from \"@/game/comm/types/shapes\";\r\n\r\nexport const aurasFromServer = (auras: ServerAura[]): Aura[] => {\r\n    const result = [];\r\n    for (const aura of auras) {\r\n        result.push({\r\n            uuid: aura.uuid,\r\n            visionSource: aura.vision_source,\r\n            visible: aura.visible,\r\n            name: aura.name,\r\n            value: aura.value,\r\n            dim: aura.dim,\r\n            colour: aura.colour,\r\n        });\r\n    }\r\n    return result;\r\n};\r\n\r\nexport const aurasToServer = (auras: Aura[]): ServerAura[] => {\r\n    const result = [];\r\n    for (const aura of auras) {\r\n        result.push({\r\n            uuid: aura.uuid,\r\n            vision_source: aura.visionSource,\r\n            visible: aura.visible,\r\n            name: aura.name,\r\n            value: aura.value,\r\n            dim: aura.dim,\r\n            colour: aura.colour,\r\n        });\r\n    }\r\n    return result;\r\n};\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--12-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./contextMenu.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--12-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./contextMenu.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./note.vue?vue&type=template&id=6c3d2628&scoped=true&\"\nimport script from \"./note.vue?vue&type=script&lang=ts&\"\nexport * from \"./note.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./note.vue?vue&type=style&index=0&id=6c3d2628&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6c3d2628\",\n  null\n  \n)\n\ncomponent.options.__file = \"note.vue\"\nexport default component.exports","import { render, staticRenderFns } from \"./initiative.vue?vue&type=template&id=38ee733a&scoped=true&\"\nimport script from \"./initiative.vue?vue&type=script&lang=ts&\"\nexport * from \"./initiative.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./initiative.vue?vue&type=style&index=0&id=38ee733a&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"38ee733a\",\n  null\n  \n)\n\ncomponent.options.__file = \"initiative.vue\"\nexport default component.exports","import { ServerLayer } from \"@/game/comm/types/general\";\r\nimport { FOWLayer } from \"@/game/layers/fow\";\r\nimport { FOWPlayersLayer } from \"@/game/layers/fowplayers\";\r\nimport { GridLayer } from \"@/game/layers/grid\";\r\nimport { Layer } from \"@/game/layers/layer\";\r\nimport { layerManager } from \"@/game/layers/manager\";\r\nimport { gameStore } from \"@/game/store\";\r\n\r\nexport function createLayer(layerInfo: ServerLayer) {\r\n    // Create canvas element\r\n    const canvas = document.createElement(\"canvas\");\r\n    canvas.style.zIndex = layerManager.layers.length.toString();\r\n    canvas.width = window.innerWidth;\r\n    canvas.height = window.innerHeight;\r\n\r\n    // Create the Layer instance\r\n    let layer: Layer;\r\n    if (layerInfo.type_ === \"grid\") layer = new GridLayer(canvas, layerInfo.name);\r\n    else if (layerInfo.type_ === \"fow\") layer = new FOWLayer(canvas, layerInfo.name);\r\n    else if (layerInfo.type_ === \"fow-players\") layer = new FOWPlayersLayer(canvas, layerInfo.name);\r\n    else layer = new Layer(canvas, layerInfo.name);\r\n    layer.selectable = layerInfo.selectable;\r\n    layer.playerEditable = layerInfo.player_editable;\r\n    layerManager.addLayer(layer);\r\n\r\n    // Add the element to the DOM\r\n    const layers = document.getElementById(\"layers\");\r\n    if (layers === null) {\r\n        console.warn(\"Layers div is missing, this will prevent the main game board from loading!\");\r\n        return;\r\n    }\r\n    if (layerInfo.name !== \"fow-players\") layers.appendChild(canvas);\r\n\r\n    if (layerInfo.type_ === \"grid\" && layerInfo.size) gameStore.setGridSize({ gridSize: layerInfo.size, sync: false });\r\n    // Load layer shapes\r\n    layer.setShapes(layerInfo.shapes);\r\n}\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('form',{on:{\"focusin\":_vm.focusin,\"focusout\":_vm.focusout,\"submit\":function($event){$event.preventDefault();return _vm.login($event)}}},[_c('fieldset',[_c('legend',{staticClass:\"legend\"},[_vm._v(\"PlanarAlly\")]),_c('div',{staticClass:\"input\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.username),expression:\"username\"}],attrs:{\"type\":\"text\",\"name\":\"username\",\"placeholder\":\"Username\",\"required\":\"\"},domProps:{\"value\":(_vm.username)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.username=$event.target.value}}}),_vm._m(0)]),_c('div',{staticClass:\"input\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.password),expression:\"password\"}],attrs:{\"type\":\"password\",\"name\":\"password\",\"placeholder\":\"Password\",\"required\":\"\"},domProps:{\"value\":(_vm.password)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.password=$event.target.value}}}),_vm._m(1)]),_c('div',{staticStyle:{\"display\":\"flex\"}},[_c('button',{staticStyle:{\"visibility\":\"hidden\",\"display\":\"none\"},attrs:{\"type\":\"submit\",\"name\":\"login\"}}),_c('button',{staticClass:\"submit\",attrs:{\"type\":\"button\",\"name\":\"register\",\"title\":\"Register\"},on:{\"click\":_vm.register}},[_c('i',{staticClass:\"fas fa-plus\"})]),_vm._m(2)])]),(_vm.error)?_c('div',{staticClass:\"feedback\"},[_c('p',{staticClass:\"error\"},[_c('strong',[_vm._v(\"Error:\")]),_vm._v(\"\\n      \"+_vm._s(_vm.error)+\"\\n    \")])]):_vm._e()])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',[_c('i',{staticClass:\"fas fa-user-circle\"})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',[_c('i',{staticClass:\"fas fa-lock\"})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('button',{staticClass:\"submit\",attrs:{\"type\":\"submit\",\"name\":\"login\",\"title\":\"Login\"}},[_c('i',{staticClass:\"fas fa-arrow-right\"})])}]\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"339cf1e4-vue-loader-template\\\"}!../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./login.vue?vue&type=template&id=51240a1f&scoped=true&\"","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./edit_dialog.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./edit_dialog.vue?vue&type=script&lang=ts&\"","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport Vue from \"vue\";\r\nimport Component from \"vue-class-component\";\r\n\r\nimport Prompt from \"@/core/components/modals/prompt.vue\";\r\nimport EditDialog from \"@/game/ui/selection/edit_dialog.vue\";\r\n\r\nimport { getRef } from \"@/core/utils\";\r\nimport { socket } from \"@/game/api/socket\";\r\nimport { EventBus } from \"@/game/event-bus\";\r\nimport { layerManager } from \"@/game/layers/manager\";\r\nimport { Shape } from \"@/game/shapes/shape\";\r\n\r\n@Component({\r\n    components: {\r\n        \"edit-dialog\": EditDialog,\r\n    },\r\n})\r\nexport default class SelectionInfo extends Vue {\r\n    shape: Shape | null = null;\r\n\r\n    mounted() {\r\n        EventBus.$on(\"SelectionInfo.Shape.Set\", (shape: Shape | null) => {\r\n            this.shape = shape;\r\n        });\r\n    }\r\n\r\n    beforeDestroy() {\r\n        EventBus.$off();\r\n    }\r\n\r\n    openEditDialog() {\r\n        (<any>this.$refs.editDialog).visible = true;\r\n    }\r\n    changeValue(object: Tracker | Aura, redraw: boolean) {\r\n        if (this.shape === null) return;\r\n        getRef<Prompt>(\"prompt\")\r\n            .prompt(`New  ${object.name} value:`, `Updating ${object.name}`)\r\n            .then(\r\n                (value: string) => {\r\n                    if (this.shape === null) return;\r\n                    const ogValue = object.value;\r\n                    if (value[0] === \"+\" || value[0] === \"-\") object.value += parseInt(value, 10);\r\n                    else object.value = parseInt(value, 10);\r\n                    if (isNaN(object.value)) object.value = ogValue;\r\n                    socket.emit(\"Shape.Update\", { shape: this.shape.asDict(), redraw, temporary: false });\r\n                    if (redraw) layerManager.invalidate();\r\n                },\r\n                () => {},\r\n            );\r\n    }\r\n}\r\n","import { AssetList } from \"@/core/comm/types\";\r\nimport { socket } from \"@/game/api/socket\";\r\nimport { BoardInfo, Note, ServerClient, ServerLocation } from \"@/game/comm/types/general\";\r\nimport { ServerShape } from \"@/game/comm/types/shapes\";\r\nimport { EventBus } from \"@/game/event-bus\";\r\nimport { GlobalPoint } from \"@/game/geom\";\r\nimport { layerManager } from \"@/game/layers/manager\";\r\nimport { createLayer } from \"@/game/layers/utils\";\r\nimport { gameManager } from \"@/game/manager\";\r\nimport { gameStore } from \"@/game/store\";\r\nimport { router } from \"@/router\";\r\n\r\nsocket.on(\"connect\", () => {\r\n    console.log(\"Connected\");\r\n});\r\nsocket.on(\"disconnect\", () => {\r\n    console.log(\"Disconnected\");\r\n});\r\nsocket.on(\"connect_error\", (error: any) => {\r\n    console.error(\"Could not connect to game session.\");\r\n    router.push(\"/dashboard\");\r\n});\r\nsocket.on(\"error\", (error: any) => {\r\n    console.error(\"Game session does not exist.\");\r\n    router.push(\"/dashboard\");\r\n});\r\nsocket.on(\"redirect\", (destination: string) => {\r\n    console.log(\"redirecting\");\r\n    router.push(destination);\r\n});\r\nsocket.on(\"Room.Info.Set\", (data: { name: string; creator: string; invitationCode: string }) => {\r\n    gameStore.setRoomName(data.name);\r\n    gameStore.setRoomCreator(data.creator);\r\n    gameStore.setInvitationCode(data.invitationCode);\r\n});\r\nsocket.on(\"Username.Set\", (username: string) => {\r\n    gameStore.setUsername(username);\r\n    gameStore.setDM(username === window.location.pathname.split(\"/\")[2]);\r\n});\r\nsocket.on(\"Client.Options.Set\", (options: ServerClient) => {\r\n    gameStore.setGridColour({ colour: options.grid_colour, sync: false });\r\n    gameStore.setFOWColour({ colour: options.fow_colour, sync: false });\r\n    gameStore.setRulerColour({ colour: options.ruler_colour, sync: false });\r\n    gameStore.setPanX(options.pan_x);\r\n    gameStore.setPanY(options.pan_y);\r\n    gameStore.setZoomFactor(options.zoom_factor);\r\n    if (options.active_layer) layerManager.selectLayer(options.active_layer, false);\r\n    if (layerManager.getGridLayer() !== undefined) layerManager.getGridLayer()!.invalidate();\r\n});\r\nsocket.on(\"Location.Set\", (data: Partial<ServerLocation>) => {\r\n    if (data.name !== undefined) gameStore.setLocationName(data.name);\r\n    if (data.unit_size !== undefined) gameStore.setUnitSize({ unitSize: data.unit_size, sync: false });\r\n    if (data.use_grid !== undefined) gameStore.setUseGrid({ useGrid: data.use_grid, sync: false });\r\n    if (data.full_fow !== undefined) gameStore.setFullFOW({ fullFOW: data.full_fow, sync: false });\r\n    if (data.fow_opacity !== undefined) gameStore.setFOWOpacity({ fowOpacity: data.fow_opacity, sync: false });\r\n    if (data.fow_los !== undefined) gameStore.setLineOfSight({ fowLOS: data.fow_los, sync: false });\r\n});\r\nsocket.on(\"Position.Set\", (data: { x: number; y: number }) => {\r\n    gameManager.setCenterPosition(new GlobalPoint(data.x, data.y));\r\n});\r\nsocket.on(\"Notes.Set\", (notes: Note[]) => {\r\n    for (const note of notes) gameStore.newNote({ note, sync: false });\r\n});\r\nsocket.on(\"Asset.List.Set\", (assets: AssetList) => {\r\n    gameStore.setAssets(assets);\r\n});\r\nsocket.on(\"Board.Set\", (locationInfo: BoardInfo) => {\r\n    gameStore.clear();\r\n    gameStore.setLocations(locationInfo.locations);\r\n    document.getElementById(\"layers\")!.innerHTML = \"\";\r\n    gameStore.resetLayerInfo();\r\n    layerManager.reset();\r\n    for (const layer of locationInfo.layers) createLayer(layer);\r\n    // Force the correct opacity render on other layers.\r\n    layerManager.selectLayer(layerManager.getLayer()!.name, false);\r\n    EventBus.$emit(\"Initiative.Clear\");\r\n    gameStore.setBoardInitialized(true);\r\n    gameStore.recalculateBV();\r\n});\r\nsocket.on(\"Gridsize.Set\", (gridSize: number) => {\r\n    gameStore.setGridSize({ gridSize, sync: false });\r\n});\r\nsocket.on(\"Shape.Add\", (shape: ServerShape) => {\r\n    gameManager.addShape(shape);\r\n});\r\nsocket.on(\"Shape.Remove\", (shape: ServerShape) => {\r\n    if (!layerManager.UUIDMap.has(shape.uuid)) {\r\n        console.log(`Attempted to remove an unknown shape`);\r\n        return;\r\n    }\r\n    if (!layerManager.hasLayer(shape.layer)) {\r\n        console.log(`Attempted to remove shape from an unknown layer ${shape.layer}`);\r\n        return;\r\n    }\r\n    const layer = layerManager.getLayer(shape.layer)!;\r\n    layer.removeShape(layerManager.UUIDMap.get(shape.uuid)!, false);\r\n    layer.invalidate(false);\r\n});\r\nsocket.on(\"Shape.Order.Set\", (data: { shape: ServerShape; index: number }) => {\r\n    if (!layerManager.UUIDMap.has(data.shape.uuid)) {\r\n        console.log(`Attempted to move the shape order of an unknown shape`);\r\n        return;\r\n    }\r\n    if (!layerManager.hasLayer(data.shape.layer)) {\r\n        console.log(`Attempted to remove shape from an unknown layer ${data.shape.layer}`);\r\n        return;\r\n    }\r\n    const shape = layerManager.UUIDMap.get(data.shape.uuid)!;\r\n    const layer = layerManager.getLayer(shape.layer)!;\r\n    layer.moveShapeOrder(shape, data.index, false);\r\n});\r\nsocket.on(\"Shape.Layer.Change\", (data: { uuid: string; layer: string }) => {\r\n    const shape = layerManager.UUIDMap.get(data.uuid);\r\n    if (shape === undefined) return;\r\n    shape.moveLayer(data.layer, false);\r\n});\r\nsocket.on(\"Shape.Update\", (data: { shape: ServerShape; redraw: boolean; move: boolean }) => {\r\n    gameManager.updateShape(data);\r\n});\r\nsocket.on(\"Temp.Clear\", (shapes: ServerShape[]) => {\r\n    shapes.forEach(shape => {\r\n        if (!layerManager.UUIDMap.has(shape.uuid)) {\r\n            console.log(\"Attempted to remove an unknown temporary shape\");\r\n            return;\r\n        }\r\n        if (!layerManager.hasLayer(shape.layer)) {\r\n            console.log(`Attempted to remove shape from an unknown layer ${shape.layer}`);\r\n            return;\r\n        }\r\n        const realShape = layerManager.UUIDMap.get(shape.uuid)!;\r\n        layerManager.getLayer(shape.layer)!.removeShape(realShape, false);\r\n    });\r\n});\r\n"],"sourceRoot":""}