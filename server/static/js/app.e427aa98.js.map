{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/game/shapes/text.ts","webpack:///./src/game/ui/selection/shapecontext.vue","webpack:///./src/App.vue?5b85","webpack:///./src/core/components/modals/prompt.vue?d33d","webpack:///./src/core/components/colorpicker.vue?4d88","webpack:///./src/game/game.vue","webpack:///./src/game/api/socket.ts","webpack:///./src/assetManager/manager.vue?5633","webpack:///./src/game/ui/menu/asset_node.vue","webpack:///./src/game/ui/tools/selectcontext.vue?02dc","webpack:///./src/auth/login.vue","webpack:///./src/game/visibility/te/draw.ts","webpack:///./src/game/ui/tools/createtoken_modal.vue?ed6e","webpack:///./src/game/ui/tools/createtoken_modal.vue?3856","webpack:///./src/game/ui/tools/tool.vue?5b17","webpack:///./src/game/shapes/circulartoken.ts","webpack:///./src/assetManager/manager.vue?3cb9","webpack:///./src/assetManager/manager.vue?1f53","webpack:///./src/game/ui/annotation.ts","webpack:///./src/core/components/colorpicker.vue?8070","webpack:///./src/game/ui/menu/menu.vue","webpack:///./src/core/components/contextmenu.vue","webpack:///./src/game/ui/note.vue?49b7","webpack:///./src/auth/login.vue?c159","webpack:///./src/game/shapes/utils.ts","webpack:///./src/core/components/modals/confirm.vue?e6fb","webpack:///./src/game/shapes/shape.ts","webpack:///./src/core/components/modals/prompt.vue?d457","webpack:///./src/game/ui/note.vue?a34d","webpack:///./src/game/ui/note.vue?23aa","webpack:///./src/core/components/modals/modal.vue?33b9","webpack:///./src/game/ui/tools/select.vue?49f9","webpack:///./src/game/ui/tools/utils.ts","webpack:///./src/game/ui/note.vue?a508","webpack:///./src/game/api/utils.ts","webpack:///./src/game/ui/menu/asset_node.vue?f519","webpack:///./src/core/components/contextmenu.vue?f03a","webpack:///./src/core/components/contextmenu.vue?7efa","webpack:///./src/assetManager/store.ts","webpack:///./src/game/ui/selection/edit_dialog.vue?03e8","webpack:///./src/core/components/contextmenu.vue?50e1","webpack:///./src/game/ui/selection/shapecontext.vue?1cf6","webpack:///./src/game/ui/selection/selection_info.vue?321c","webpack:///./src/game/ui/selection/selection_info.vue?8aba","webpack:///./src/game/ui/tools/map.vue?284a","webpack:///./src/game/layers/grid.ts","webpack:///./src/store.ts","webpack:///./src/core/components/colorpicker.vue","webpack:///./src/App.vue?2e53","webpack:///./src/App.vue","webpack:///./src/game/layers/fow.ts","webpack:///./src/core/components/load.vue?18c2","webpack:///./src/game/shapes/circle.ts","webpack:///./src/game/ui/tools/map.vue?a3ab","webpack:///./src/core/components/load.vue","webpack:///./src/game/ui/tools/pan.ts","webpack:///./src/game/ui/tools/selectcontext.vue","webpack:///./src/core/utils.ts","webpack:///./src/assetManager/contextMenu.vue","webpack:///./src/game/visibility/te/triag.ts","webpack:///./src/game/ui/selection/edit_dialog.vue?391c","webpack:///./src/game/ui/selection/edit_dialog.vue?057b","webpack:///./src/game/ui/menu/asset_node.vue?1f27","webpack:///./src/game/ui/selection/shapecontext.vue?ab76","webpack:///./src/game/ui/selection/shapecontext.vue?3b0d","webpack:///./src/core/components/modals/modal.vue?44ae","webpack:///./src/assetManager/socket.ts","webpack:///./src/game/ui/tools/tools.vue?c96e","webpack:///./src/game/game.vue?5550","webpack:///./src/game/shapes/multiline.ts","webpack:///./src/core/components/colorpicker.vue?eaab","webpack:///./src/core/components/colorpicker.vue?8615","webpack:///./src/game/ui/tools/draw.vue","webpack:///./src/game/utils.ts","webpack:///./src/game/ui/tools/createtoken_modal.vue?d0df","webpack:///./src/game/ui/note.vue?f9bd","webpack:///./src/game/ui/initiative.vue?f4e1","webpack:///./src/game/ui/tools/draw.vue?b96d","webpack:///./src/game/shapes/line.ts","webpack:///./src/router.ts","webpack:///./src/game/ui/tools/tool.vue?d136","webpack:///./src/game/ui/tools/draw.vue?d046","webpack:///./src/game/ui/tools/draw.vue?57e4","webpack:///./src/game/ui/tools/tools.vue","webpack:///./src/game/ui/tools/tool.vue?8ce3","webpack:///./src/game/shapes/asset.ts","webpack:///./src/game/visibility/te/cdt.ts","webpack:///./src/game/ui/menu/menu.vue?ed47","webpack:///./src/game/ui/menu/menu.vue?6a3f","webpack:///./src/game/ui/tools/draw.vue?1261","webpack:///./src/game/layers/manager.ts","webpack:///./src/game/ui/initiative.vue?c7e1","webpack:///./src/game/ui/tools/createtoken_modal.vue","webpack:///./src/game/visibility/bvh/node.ts","webpack:///./src/game/ui/tools/createtoken_modal.vue?f918","webpack:///./src/game/events/keyboard.ts","webpack:///./src/assetManager/manager.vue?433f","webpack:///./src/game/ui/tools/tools.vue?25b2","webpack:///./src/game/ui/selection/selection_info.vue?2310","webpack:///./src/core/components/modals/modal.vue?09d2","webpack:///./src/core/components/contextmenu.vue?a0a2","webpack:///./src/game/ui/selection/selection_info.vue?b9a9","webpack:///./src/core/components/modals/prompt.vue?4e1b","webpack:///./src/game/ui/menu/asset_node.vue?4088","webpack:///./src/game/ui/menu/asset_node.vue?fc27","webpack:///./src/core/components/load.vue?4ab2","webpack:///./src/core/components/load.vue?0f87","webpack:///./src/game/ui/tools/tools.vue?d74c","webpack:///./src/game/ui/tools/tools.vue?35df","webpack:///./src/game/ui/menu/menu.vue?8b23","webpack:///./src/game/shapes/boundingrect.ts","webpack:///./src/dashboard/main.vue?5e14","webpack:///./src/dashboard/main.vue?94d1","webpack:///./src/game/geom.ts","webpack:///./src/game/game.vue?5592","webpack:///./src/game/units.ts","webpack:///./src/game/ui/menu/menu.vue?ae57","webpack:///./src/core/components/colorpicker.vue?1682","webpack:///./src/game/ui/tools/selectcontext.vue?0020","webpack:///./src/game/ui/tools/selectcontext.vue?758c","webpack:///./src/game/visibility/te/tds.ts","webpack:///./src/game/visibility/bvh/bvh.ts","webpack:///./src/game/ui/selection/shapecontext.vue?6173","webpack:///./src/game/ui/menu/menu.vue?0d5b","webpack:///./src/game/manager.ts","webpack:///./src/game/ui/initiative.vue?e806","webpack:///./src/game/ui/initiative.vue?ca6b","webpack:///./src/core/components/load.vue?8cd0","webpack:///./src/game/game.vue?9a3e","webpack:///./src/dashboard/main.vue?3f72","webpack:///./src/core/components/modals/confirm.vue","webpack:///./src/game/ui/selection/shapecontext.vue?aac0","webpack:///./src/assetManager/manager.vue?a11e","webpack:///./src/game/event-bus.ts","webpack:///./src/dashboard/main.vue?d5a9","webpack:///./src/game/shapes/rect.ts","webpack:///./src/game/ui/tools/selectcontext.vue?6f66","webpack:///./src/game/layers/fowplayers.ts","webpack:///./src/game/layers/layer.ts","webpack:///./src/game/ui/tools/select.vue?2a55","webpack:///./src/game/ui/tools/select.vue?b488","webpack:///./src/game/events/mouse.ts","webpack:///./src/game/ui/menu/asset_node.vue?be10","webpack:///./src/game/shapes/baserect.ts","webpack:///./src/game/ui/tools/select.vue","webpack:///./src/dashboard/main.vue","webpack:///./src/game/ui/tools/selectcontext.vue?d61f","webpack:///./src/auth/logout.ts","webpack:///./src/core/store.ts","webpack:///./src/main.ts","webpack:///./src/core/components/contextmenu.vue?f402","webpack:///./src/invitation/invitation.ts","webpack:///./src/core/components/modals/prompt.vue","webpack:///./src/game/ui/tools/draw.vue?6d03","webpack:///./src/game/visibility/te/te.ts","webpack:///./src/auth/login.vue?5f02","webpack:///./src/game/ui/selection/edit_dialog.vue","webpack:///./src/game/settings.ts","webpack:///./src/auth/login.vue?283c","webpack:///./src/game/ui/tools/tool.vue?6323","webpack:///./src/game/ui/tools/tool.vue?f5ba","webpack:///./src/core/components/modals/modal.vue?1854","webpack:///./src/core/components/modals/modal.vue?e329","webpack:///./src/game/game.vue?d01c","webpack:///./src/game/ui/tools/ruler.ts","webpack:///./src/core/components/modals/modal.vue","webpack:///./src/game/visibility/te/pa.ts","webpack:///./src/game/ui/tools/createtoken_modal.vue?41c9","webpack:///./src/dashboard/main.vue?1359","webpack:///./src/auth/login.vue?12cd","webpack:///./src/auth/login.vue?7cce","webpack:///./src/game/ui/selection/edit_dialog.vue?9a84","webpack:///./src/game/game.vue?5ab9","webpack:///./src/game/game.vue?07bd","webpack:///./src/core/components/modals/confirm.vue?f9ee","webpack:///./src/game/ui/tools/map.vue","webpack:///./src/assetManager/contextMenu.vue?d089","webpack:///./src/assetManager/contextMenu.vue?b4b1","webpack:///./src/core/components/modals/confirm.vue?e141","webpack:///./src/core/components/modals/confirm.vue?be48","webpack:///./src/assetManager/contextMenu.vue?1b1b","webpack:///./src/game/ui/tools/select.vue?b7fd","webpack:///./src/assetManager/manager.vue","webpack:///./src/game/ui/tools/tools.vue?fa4a","webpack:///./src/game/ui/tools/tool.vue","webpack:///./src/core/components/modals/prompt.vue?0a11","webpack:///./src/core/components/modals/prompt.vue?36e2","webpack:///./src/game/ui/initiative.vue?36c8","webpack:///./src/game/ui/selection/selection_info.vue","webpack:///./src/game/store.ts","webpack:///./src/core/components/modals/confirm.vue?a22f","webpack:///./src/game/comm/conversion/aura.ts","webpack:///./src/assetManager/contextMenu.vue?1e9a","webpack:///./src/game/ui/note.vue","webpack:///./src/game/ui/initiative.vue","webpack:///./src/game/layers/utils.ts","webpack:///./src/game/ui/selection/edit_dialog.vue?3800","webpack:///./src/game/ui/tools/map.vue?7416","webpack:///./src/game/ui/tools/map.vue?9024","webpack:///./src/game/ui/selection/selection_info.vue?5d62","webpack:///./src/game/api/events.ts"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","installedChunks","push","Object","prototype","hasOwnProperty","call","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","app","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","boundingrect_1","shape_1","units_1","Text","Shape","[object Object]","position","text","font","angle","fillColour","strokeColour","uuid","super","this","type","assign","getBaseDict","points","refPoint","x","y","BoundingRect","ctx","draw","fillStyle","save","dest","g2l","translate","rotate","textAlign","getLines","map","line","fillText","restore","point","centerPoint","canvas","resizeDir","lines","lineHeight","widths","measureText","width","Math","max","split","allLines","maxWidth","targetLine","words","word","testLine","metrics","testWidth","__webpack_exports__","_shapecontext_vue_vue_type_template_id_7111f3f6_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_shapecontext_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","__WEBPACK_IMPORT_KEY__","_node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_3__","component","options","__file","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_App_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_App_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_prompt_vue_vue_type_style_index_0_id_0602c2e6_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_prompt_vue_vue_type_style_index_0_id_0602c2e6_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","tinycolor2_1","tslib_1","__importDefault","vue_1","vue_class_component_1","vue_color_1","vue_property_decorator_1","ColorPicker","default","display","left","top","transparent","$refs","chromePicker","val","rgba","a","setPosition","$nextTick","$children","$el","focus","newColor","toRgbString","$emit","color","rect","getBoundingClientRect","right","innerWidth","bottom","innerHeight","__decorate","Prop","String","components","chrome-picker","Chrome","_game_vue_vue_type_template_id_6d744362_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_game_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","_node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_4__","socket_io_client_1","createConnection","route","socket","io","opts","query","params","creator","room","connect","location","protocol","host","autoConnect","contextMenu_vue_1","confirm_vue_1","prompt_vue_1","socket_1","store_1","utils_1","AssetManager","path","draggingSelection","folders","assetStore","files","selected","idMap","currentFolder","root","parentFolder","parent","undefined","firstSelectedFile","sel","file_hash","nextFolder","pop","clearSelected","emit","prompt","inode","target","isFile","indexOf","delete","event","shiftKey","inodes","start","end","ctrlKey","file","dataTransfer","setData","dropEffect","includes","classList","contains","add","remove","moveInode","upload","document","getElementById","click","fls","CHUNK_SIZE","uuidv4","slices","ceil","size","fr","FileReader","readAsArrayBuffer","min","onload","e","directory","totalSlices","Prompt","ConfirmDialog","AssetContextMenu","to","from","next","disconnect","_asset_node_vue_vue_type_template_id_62c91cd3_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_asset_node_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_selectcontext_vue_vue_type_style_index_0_id_44a31e42_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_selectcontext_vue_vue_type_style_index_0_id_44a31e42_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","_login_vue_vue_type_template_id_6bbf3b79_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_login_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","manager_1","tds_1","triag_1","drawPolygon","polygon","colour","dl","layerManager","getLayer","lineJoin","beginPath","strokeStyle","random","moveTo","g2lx","g2ly","lineTo","closePath","stroke","drawPolygonL","xx","local","yy","I","J","drl","constrained","drawPolygonT","tds","clear","T","clearRect","ei","EdgeIterator","valid","collect","edge","first","vertices","ccw","second","cw","pos","triangles","isInfinite","po","arc","PI","fill","constraints","console","log","DP","DPL","DPT","render","_vm","_h","$createElement","_c","_self","attrs","visible","on","close","$event","scopedSlots","_u","fn","staticClass","draggable","dragstart","dragStart","dragend","dragEnd","_v","for","directives","rawName","expression","id","domProps","input","composing","update:color","borderColour","ref","height","submit","staticRenderFns","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_tool_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_tool_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default","tinycolor","__importStar","circle_1","CircularToken","Circle","center","radius","fromDict","textBaseline","xs","calcFontScale","g2lz","ys","transform","mostReadable","toHexString","gameStore","IS_DM","group","source","has_img","effects","index","Infinity","dragover","preventDefault","moveDrag","drop","stopPropagation","stopDrag","_l","dir","_s","multiple","hidden","change","title","createDirectory","prepareUpload","dblclick","changeDirectory","dragleave","leaveDrag","staticStyle","font-size","_e","class","inode-selected","select","contextmenu","cm","open","startDrag","src","geom_1","rect_1","text_1","AnnotationManager","shown","origin","GlobalPoint","annotationText","annotationRect","Rect","layer","hasLayer","warn","addShape","l2g","LocalPoint","getMaxWidth","getMaxHeight","w","zoomFactor","h","invalidate","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_colorpicker_vue_vue_type_style_index_0_id_b4f2c0b0_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_colorpicker_vue_vue_type_style_index_0_id_b4f2c0b0_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","_menu_vue_vue_type_template_id_21f210ea_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_menu_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","_contextmenu_vue_vue_type_template_id_256dde9c___WEBPACK_IMPORTED_MODULE_0__","_contextmenu_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_note_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_note_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_login_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_login_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","asset_1","circulartoken_1","line_1","multiline_1","createShapeFromDict","shape","dummy","UUIDMap","has","sh","type_","fill_colour","stroke_colour","circ","token","Line","x2","y2","line_width","multiline","MultiLine","asset","img","Image","startsWith","URL","pathname","Asset","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_confirm_vue_vue_type_style_index_0_id_1883e207_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_confirm_vue_vue_type_style_index_0_id_1883e207_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","aura_1","trackers","auras","owners","visionObstruction","movementObstruction","isToken","showHighlight","annotation","globalCompositeOperation","Map","skipLightUpdate","self","obstructionIndex","visionBlockers","changeBV","recalculateBV","forEach","au","ls","visionSources","findIndex","aura","visionSource","some","blocksMovement","movementblockers","ownedBy","ownedtokens","username","draw_operator","movement_obstruction","vision_obstruction","aurasToServer","is_token","JSON","stringify","aurasFromServer","parse","bbox","getBoundingBox","strokeRect","topLeft","dim","loc","innerRange","g2lr","gradient","createRadialGradient","tc","addColorStop","setAlpha","lastPath","sync","oldLayer","newLayer","shapes","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_prompt_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_prompt_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","note","mask","updateNote","$set","style","calcHeight","removeNote","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_modal_vue_vue_type_style_index_0_id_12ed61ba_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_modal_vue_vue_type_style_index_0_id_12ed61ba_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","selectcontext_vue_1","tool_vue_1","utils_2","utils_3","SelectOperations","SelectTool","showContextMenu","active","Noop","resizeDirection","deltaChanged","dragRay","Ray","Vector","selectionStartPoint","selectionHelper","mouse","getMouse","globalMouse","selectionStack","hit","selection","concat","corner","getCorner","getRef","Resize","Drag","localRefPoint","subtract","GroupSelect","endPoint","abs","og","direction","delta","multiply","ogDelta","calculateDelta","asDict","redraw","temporary","resize","bb","gm","inCorner","body","cursor","clearSelection","topRight","botLeft","useGrid","altKey","snapToGrid","resizeToGrid","$parent","shapecontext","selectcontext","SelectContext","done","ogSelBBox","newSelBBox","offset","refine","movementBlocker","blocker","blockerBBox","found","intersectsWithInner","ray","fromPoints","normalize","invDir","inverse","dirIsNegative","intersectP","bCenter","sCenter","ux","uy","dx","dot","dy","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_note_vue_vue_type_style_index_0_id_7a3669fd_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_note_vue_vue_type_style_index_0_id_7a3669fd_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","sendClientOptions","locationOptions","panX","panY","AssetNode","showImage","keys","filter","el","sort","alphSort","__files","b","toLowerCase","children","imageSource","querySelector","setDragImage","tabindex","blur","_t","vuex_module_decorators_1","AssetStore","VuexModule","Mutation","Module","dynamic","store","rootStore","namespaced","getModule","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_edit_dialog_vue_vue_type_style_index_0_id_078b3b76_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_edit_dialog_vue_vue_type_style_index_0_id_078b3b76_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_contextmenu_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_contextmenu_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","contextmenu_vue_1","ShapeContext","activeLayer","pageX","pageY","layers","selectable","playerEditable","moveLayer","getActiveLayer","moveShapeOrder","initiative","addInitiative","getInitiativeRepr","ContextMenu","openEditDialog","tracker","changeValue","maxvalue","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_map_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_map_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","layer_1","GridLayer","Layer","doClear","drawGrid","gs","gridSize","gridColour","lineWidth","vuex_1","use","Store","_colorpicker_vue_vue_type_template_id_b4f2c0b0_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_colorpicker_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","script","componentNormalizer","settings_1","FOWLayer","isVisionLayer","preFogShapes","idx","removeShape","Settings","skipLightFOW","originalOperation","dctx","drawAngleLines","drawFirstLightHit","fullFOW","lcenter","alm","light","find","auraLength","getUnitDistance","auraCircle","visibleInCanvas","lastArcAngle","Path2D","firstPoint","angleSteps","anglePoint","cos","sin","lightRay","hitResult","BV","intersect","fowLOS","drawImage","preShape","ogComposite","getFogColour","fillRect","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_load_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_load_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","pow","targetX","targetY","round","resizedir","diff","sqrt","baserect_1","MapTool","xCount","yCount","startPoint","clone","BaseRect","_load_vue_vue_type_template_id_ff095222___WEBPACK_IMPORTED_MODULE_0__","_load_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","_node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_2__","PanTool","panStart","distance","increasePanX","increasePanY","_selectcontext_vue_vue_type_template_id_44a31e42_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_selectcontext_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","main_1","replace","v","toString","capitalize","charAt","toUpperCase","getHTMLFont","element","parentElement","getComputedStyle","getPropertyValue","getHTMLTextWidth","fakeElement","createElement","appendChild","getContext","partition","arr","predicate","ret","Number","fontWidth","fixedEncodeURIComponent","str","encodeURIComponent","charCodeAt","OrderedMap","values","getComponent","activeComponent","_contextMenu_vue_vue_type_template_id_d4f084a4___WEBPACK_IMPORTED_MODULE_0__","_contextMenu_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","edgeInfo","va","vb","ec","EdgeCirculator","indv","indexV","ri","infinite","vi","orient","orientation","Sign","COLLINEAR","collinearBetween","q","cPQ","cQR","compare","EQUAL","SMALLER","LARGER","px","py","qx","qy","rx","ry","pqx","pqy","prx","pry","det","determinant","maxX","maxY","aprX","aprY","ZERO","eps","EPSILON","POSITIVE","NEGATIVE","a00","a01","a10","a11","hasInexactNegativeOrientation","sideOfOrientedCircle","perturb","sideOfOrientedCircleP","Error","p0","p1","p2","os","getOrientedSide","ON_ORIENTED_BOUNDARY","reverse","ON_NEGATIVE_SIDE","xyEqual","xySmaller","xyCompare","qpx","qpy","rpx","rpy","tpx","tpy","tqx","tqy","rqx","rqy","maxx","maxy","arpx","arpy","atqx","atqy","atpx","atpy","arqx","arqy","ON_POSITIVE_SIDE","segSegDoIntersectCrossing","p3","p4","LEFT_TURN","RIGHT_TURN","segSegDoIntersectContained","intersection","pa","pb","pc","pd","getIntersectionType","intersectionType","IntersectionType","POINT","NO_INTERSECTION","getLine","doIntersect","l1","l2","info","getIntersectionTypeLine","la","lb","denom","nom1","nom2","A1","A2","B1","B2","grid-column","updateShape","grid-column-start","checked","setToken","Array","isArray","_i","$$a","$$el","$$c","$$v","$$i","setVisionBlocker","setMovementBlocker","owner","placeholder","updateOwner","removeOwner","modifiers","number","_n","$forceUpdate","opacity","removeTracker","updateAuraColour","updateAuraVisionSource","removeAura","updateAnnotation","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_asset_node_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_asset_node_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","getLayers","background-color","setLayer","moveToBack","moveToFront","getInitiativeWord","Modal","positioned","offsetX","offsetY","screenX","screenY","dragging","updatePosition","container","offsetWidth","offsetHeight","clientX","clientY","parseInt","Boolean","destination","href","setRoot","folder","child","set","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_tools_vue_vue_type_style_index_0_id_1fee50f5_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_tools_vue_vue_type_style_index_0_id_1fee50f5_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_game_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_game_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default","_points","minx","miny","lineCap","currentTarget","closePicker","z-index","updateColor","_draw_vue_vue_type_template_id_7abc7fe9_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_draw_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","opposite","fowColour","fowOpacity","colorpicker_vue_1","modal_vue_1","CreateTokenModal","updatePreview","newValue","oldValue","unitSize","Watch","color-picker","computed","mapState","NoteDialog","textarea","scrollHeight","then","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_initiative_vue_vue_type_style_index_0_id_ccaf03d6_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_initiative_vue_vue_type_style_index_0_id_ccaf03d6_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","DrawTool","brushHelper","shapeSelect","modeSelect","modes","brushSize","helperSize","onModeChange","fowLayer","normalLayer","setupBrush","onDeselect","onSelect","axios_1","vue_router_1","manager_vue_1","login_vue_1","logout_1","load_vue_1","main_vue_1","game_vue_1","invitation_1","router","base","routes","redirect","meta","auth","template","beforeEach","coreStore","initialized","matched","record","authenticated","response","setAuthenticated","setUsername","setInitialized","catch","error","Tool","detailRight","mid","detailArrow","$on","tool","onMouseDown","onMouseUp","onMouseMove","onContextMenu","--detailRight","--detailArrow","option-selected","max-width","_tools_vue_vue_type_template_id_1fee50f5_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_tools_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_tool_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_tool_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","topleft","CDT","TDS","insert","insertConstraintV","stack","markConstraint","intersectionInfo","findIntersectedFaces","triangulateHole","intersectedFaces","listAB","listBA","edges","triangulateHole2","propagatingFlipE","triangulateHalfHole","fl","neighbours","deleteTriangle","conflictBoundaries","iN","iT","iC","current","n1","n2","ind","ind1","ind2","mirrorIndex","v0","v1","v2","newlf","createTriangle","isConstrained","triangle","vaa","vbb","aa","lfc","LineFaceCirculator","lf","rf","indexT","unshift","previousFace","currentVertex","i1","i2","vcc","vdd","pi","removeConstrainedEdge","dimension","indf","locateInfo","locate","iLocate","insertb","lt","li","flipAround","propagatingFlip","depth","isFlipable","maxDepth","ni","flip","e1","e2","eni","eI","edgeSet","lessEdge","indn","ed","tt","ii","u","t1","t2","t3","i3","t4","i4","insertInConstrainedEdge","LocateType","EDGE","insertc","updateConstraintsIncident","VERTEX","clearConstraintsIncident","updateConstraintsOpposite","c1","c2","fc","FaceCirculator","cwi","ccwi","insertFirst","finiteVertex","insertSecond","OUTSIDE_AFFINE_HULL","insertOutsideAffineHull","OUTSIDE_CONVEX_HULL","insertOutsideConvexHull","insertInEdge","FACE","insertInFace","insertDimUp","_infinite","conform","finiteEdge","COUNTERCLOCKWISE","insertOutsideConvexHull2","ccwlist","cwlist","prev","th","marchLocate1D","marchLocate2D","ff","iv","pqt","Triangle","leftFirst","o0","o1","o2","sum","nTurns","settings","locations","rm-list-dm","_m","enter","rm","transition","settingsClick","overflow-y","overflow-x","assets","createNote","openNote","notes","step","readonly","invitationCode","rulerColour","changeVisionMode","text-decoration","changeLocation","createLocation","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_draw_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_draw_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","LayerManager","interval","drawLoop","requestAnimationFrame","addLayer","selectedLayer","globalAlpha","selectLayer","getSelection","image","getData","l2gx","l2gy","l2gz","lm","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_initiative_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_initiative_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","_createtoken_modal_vue_vue_type_template_id_66ccc134_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_createtoken_modal_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","BoundingNode","nPrimitives","LeafNode","firstPrimOffset","InteriorNode","union","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_createtoken_modal_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_createtoken_modal_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","event_bus_1","onKeyUp","HTMLInputElement","HTMLTextAreaElement","selectTool","EventBus","onKeyDown","keyCode","hasSelection","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_manager_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_manager_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default","shapecontext_vue_1","createtoken_modal_vue_1","draw_vue_1","map_vue_1","pan_1","select_vue_1","manager_2","ruler_1","Tools","currentTool","tools","dmTools","currentToolComponent","tagName","targetTool","button","buttons","annotations","gameManager","annotationManager","setActiveText","select-tool","pan-tool","draw-tool","ruler-tool","RulerTool","map-tool","shape-menu","createtoken-dialog","watch","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_selection_info_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_selection_info_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_modal_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_modal_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_contextmenu_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_contextmenu_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_selection_info_vue_vue_type_style_index_0_id_32cec914_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_selection_info_vue_vue_type_style_index_0_id_32cec914_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","question","answer","resolve","reject","Promise","toggle","mouseover","hash","mouseout","message","refInFor","tool-selected","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_menu_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_menu_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","botRight","vector","other","xmin","xmax","ymin","ymax","botright","dirIsNeg","txmin","getDiagCorner","txmax","tymin","tymax","tMax","sw","owned","joined","createRoom","newSessionName","tag","getPointDistance","Point","vec","scale","maxT","vue_slider_component_1","lodash_1","initiative_vue_1","menu_vue_1","note_vue_1","selection_info_vue_1","tools_vue_1","keyboard_1","mouse_1","Game","ready","manager","updateZoom","newZoomValue","zoomLocation","addEventListener","setWidth","setHeight","throttle","scrollZoom","mousedown","mouseup","mousemove","mouseleave","confirm","dropAsset","tool-bar","selection-info","prompt-dialog","confirm-dialog","menu-bar","initiative-dialog","zoom-slider","note-dialog","obj","z","l2gr","asset_node_vue_1","MenuBar","setUseGrid","setFullFOW","setFOWOpacity","setLineOfSight","setUnitSize","setGridSize","setGridColour","setFOWColour","setRulerColour","nextElementSibling","newNote","setVisionMode","asset-node","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_colorpicker_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_colorpicker_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","bringPlayers","createToken","showInitiative","_INFINITE_VERTEX","LineFaceState","newPoint","INFINITE","vertex","Vertex","_point","_ri","Edge","_es","associatedEdge","increment","tr","UNDEFINED","_tr","ic","vt","vr","pqr","VERTEX_VERTEX","VERTEX_EDGE","EDGE_VERTEX","EDGE_EDGE","createVertex","addVertex","infiniteVertex","n0","trig","t0","i0","setAdjacency","deleteList","copy","neighbour","lfit","reorient","vCW","vCCW","tri","bl","bli","vv","g","node_1","BoundingVolume","totalNodes","buildData","orderedPrims","nodes","_a","recursiveBuild","compact","node","createLeaf","centroidBbox","getMaxExtent","pMid","partitionedData","flattened","stopOnFirstHit","tMin","todoOffset","nodeNum","todo","secondChildOffset","flatten","myOffset","secondOffset","primitivesOffset","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_shapecontext_vue_vue_type_style_index_0_id_7111f3f6_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_shapecontext_vue_vue_type_style_index_0_id_7111f3f6_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_menu_vue_vue_type_style_index_0_id_21f210ea_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_menu_vue_vue_type_style_index_0_id_21f210ea_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","annotation_1","GameManager","selectedTool","oldShape","redrawInitiative","checkVisionSources","setMovementBlock","setIsToken","move","localPos","fakeSetData","disabled","$store","state","game","updateOrder","model","callback","actor","flex-direction","align-items","initiative-selected","currentActor","mouseenter","toggleHighlight","lazy","notAllowed","owns","syncInitiative","createEffect","getDefaultEffect","toggleOption","removeInitiative","effect","updateEffect","turns","roundCounter","setRound","setTurn","nextTurn","LoadComponent","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_game_vue_vue_type_style_index_1_id_6d744362_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_game_vue_vue_type_style_index_1_id_6d744362_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","registerHooks","Dashboard","vm","err","post","$router","_confirm_vue_vue_type_template_id_1883e207_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_confirm_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_shapecontext_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_shapecontext_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_manager_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_manager_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_main_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_main_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_selectcontext_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_selectcontext_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","te_1","FOWPlayersLayer","skipPlayerFOW","drctx","maxLength","tokenId","visionMode","computeVisibility","selectionColor","selectionWidth","invalidateLight","serverShape","lsI","lbI","mbI","anI","annotationIndex","ownedIndex","ogOP","drawAuras","destinationIndex","oldIdx","sign","deltaY","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_asset_node_vue_vue_type_style_index_0_id_62c91cd3_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_asset_node_vue_vue_type_style_index_0_id_62c91cd3_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","topright","botleft","coreVisible","mx","my","_select_vue_vue_type_template_id_0ed49b21___WEBPACK_IMPORTED_MODULE_0__","_select_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","_main_vue_vue_type_template_id_61eb1455_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_main_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","createtokendialog","Logout","CoreStore","init","App_vue_1","router_1","config","productionTip","devtools","performance","$mount","props","Initiative","code","sessionUrl","_prompt_vue_vue_type_template_id_0602c2e6_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_prompt_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_draw_vue_vue_type_style_index_0_id_7abc7fe9_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_draw_vue_vue_type_style_index_0_id_7abc7fe9_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","draw_1","pa_1","it","drawt","Q","rawOutput","PA_CDT","expandEdge","fh","nfh","nIndex","rIndex","lIndex","nvh","rvh","lvh","re","le","ro","lo","raySegIntersection","CLOCKWISE","denominator","ua","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_login_vue_vue_type_style_index_0_id_6bbf3b79_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_login_vue_vue_type_style_index_0_id_6bbf3b79_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","_edit_dialog_vue_vue_type_template_id_078b3b76_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_edit_dialog_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","tempFill","Login","password","$route","statusText","span","modal-mask","dialog-mask","dragOver","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_game_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_game_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","ruler","diffsign","xdiff","ydiff","label","atan2","xmid","ymid","_modal_vue_vue_type_template_id_12ed61ba_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_modal_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","cdt_1","triangulate","partial","cdt","insertConstraint","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_createtoken_modal_vue_vue_type_style_index_0_id_66ccc134_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_createtoken_modal_vue_vue_type_style_index_0_id_66ccc134_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_main_vue_vue_type_style_index_0_id_61eb1455_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_main_vue_vue_type_style_index_0_id_61eb1455_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","focusin","focusout","login","required","visibility","register","EditDialog","addEmpty","hadAnnotation","an","ownerIndex","layer-selected","dot-width","dot-height","tooltip-dir","tooltip","formatter","toFixed","slider-style","border-radius","bg-style","box-shadow","process-style","yes","no","ok","_map_vue_vue_type_template_id_f93438ce___WEBPACK_IMPORTED_MODULE_0__","_map_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","rename","deny","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_select_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_select_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","_manager_vue_vue_type_template_id_d1ce9748___WEBPACK_IMPORTED_MODULE_0__","_manager_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_tools_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_tools_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","_tool_vue_vue_type_template_id_1e034b42___WEBPACK_IMPORTED_MODULE_0__","_tool_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","keyup","_k","vuedraggable_1","getActor","$off","actorId","order","show","option","effectIndex","syncEffect","_selection_info_vue_vue_type_template_id_32cec914_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_selection_info_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","bvh_1","GameStore","selectedLayerIndex","boardInitialized","roomName","roomCreator","locationName","freeze","isDM","success","tries","oldLoc","newLoc","getGridLayer","increase","unit_size","gridLayer","use_grid","full_fow","fow_opacity","fow_los","actualNote","context","commit","Action","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_confirm_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_confirm_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","vision_source","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_contextMenu_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_contextMenu_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","_note_vue_vue_type_template_id_7a3669fd_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_note_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","_initiative_vue_vue_type_template_id_ccaf03d6_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_initiative_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","fow_1","fowplayers_1","grid_1","createLayer","layerInfo","zIndex","player_editable","setShapes","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_edit_dialog_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_edit_dialog_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","edit_dialog_vue_1","SelectionInfo","editDialog","ogValue","isNaN","edit-dialog","setRoomName","setRoomCreator","setInvitationCode","setDM","grid_colour","fow_colour","ruler_colour","setPanX","pan_x","setPanY","pan_y","setZoomFactor","zoom_factor","active_layer","setLocationName","setCenterPosition","setAssets","locationInfo","setLocations","innerHTML","resetLayerInfo","reset","setBoardInitialized","realShape"],"mappings":"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","file":"static/js/app.e427aa98.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import { GlobalPoint, LocalPoint } from \"@/game/geom\";\nimport { BoundingRect } from \"@/game/shapes/boundingrect\";\nimport { Shape } from \"@/game/shapes/shape\";\nimport { g2l } from \"@/game/units\";\n\nexport class Text extends Shape {\n    type = \"text\";\n    text: string;\n    font: string;\n    angle: number;\n    constructor(\n        position: GlobalPoint,\n        text: string,\n        font: string,\n        angle?: number,\n        fillColour?: string,\n        strokeColour?: string,\n        uuid?: string,\n    ) {\n        super(position, fillColour, strokeColour, uuid);\n        this.text = text;\n        this.font = font;\n        this.angle = angle || 0;\n    }\n    asDict() {\n        return Object.assign(this.getBaseDict(), {\n            text: this.text,\n            font: this.font,\n            angle: this.angle,\n        });\n    }\n    get points() {\n        return [[this.refPoint.x, this.refPoint.y]];\n    }\n    getBoundingBox(): BoundingRect {\n        return new BoundingRect(this.refPoint, 5, 5); // TODO: fix this bounding box\n    }\n    draw(ctx: CanvasRenderingContext2D) {\n        super.draw(ctx);\n        ctx.font = this.font;\n        ctx.fillStyle = this.fillColour;\n        ctx.save();\n        const dest = g2l(this.refPoint);\n        ctx.translate(dest.x, dest.y);\n        ctx.rotate(this.angle);\n        ctx.textAlign = \"center\";\n        this.getLines(ctx).map(line => ctx.fillText(line.text, line.x, line.y));\n        ctx.restore();\n    }\n    contains(point: GlobalPoint): boolean {\n        return false; // TODO\n    }\n\n    center(): GlobalPoint;\n    center(centerPoint: GlobalPoint): void;\n    center(centerPoint?: GlobalPoint): GlobalPoint | void {} // TODO\n    getCorner(point: GlobalPoint): string | undefined {\n        return \"\";\n    } // TODO\n    visibleInCanvas(canvas: HTMLCanvasElement): boolean {\n        return true;\n    } // TODO\n    snapToGrid(): void {}\n    resizeToGrid(): void {}\n    resize(resizeDir: string, point: LocalPoint): void {}\n\n    getMaxHeight(ctx: CanvasRenderingContext2D) {\n        const lines = this.getLines(ctx);\n        const lineHeight = 30;\n        return lineHeight * lines.length;\n    }\n\n    getMaxWidth(ctx: CanvasRenderingContext2D) {\n        const lines = this.getLines(ctx);\n        const widths = lines.map(line => ctx.measureText(line.text).width);\n        return Math.max(...widths);\n    }\n\n    private getLines(ctx: CanvasRenderingContext2D) {\n        const lines = this.text.split(\"\\n\");\n        const allLines: { text: string; x: number; y: number }[] = [];\n        const maxWidth = ctx.canvas.width;\n        const lineHeight = 30;\n        const x = 0; // this.refPoint.x;\n        let y = 0; // this.refPoint.y;\n\n        for (const line of lines) {\n            let targetLine = \"\";\n            const words = line.split(\" \");\n            for (const word of words) {\n                const testLine = targetLine + word + \" \";\n                const metrics = ctx.measureText(testLine);\n                const testWidth = metrics.width;\n                if (testWidth > maxWidth) {\n                    ctx.fillText(targetLine, x, y);\n                    allLines.push({ text: targetLine, x, y });\n                    targetLine = word + \" \";\n                    y += lineHeight;\n                } else {\n                    targetLine = testLine;\n                }\n            }\n            allLines.push({ text: targetLine, x, y });\n            y += lineHeight;\n        }\n        return allLines;\n    }\n}\n","import { render, staticRenderFns } from \"./shapecontext.vue?vue&type=template&id=7111f3f6&scoped=true&\"\nimport script from \"./shapecontext.vue?vue&type=script&lang=ts&\"\nexport * from \"./shapecontext.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./shapecontext.vue?vue&type=style&index=0&id=7111f3f6&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7111f3f6\",\n  null\n  \n)\n\ncomponent.options.__file = \"shapecontext.vue\"\nexport default component.exports","import mod from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./prompt.vue?vue&type=style&index=0&id=0602c2e6&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./prompt.vue?vue&type=style&index=0&id=0602c2e6&scoped=true&lang=css&\"","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport tinycolor from \"tinycolor2\";\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\n\nimport { Chrome } from \"vue-color\";\nimport { Prop } from \"vue-property-decorator\";\n\n@Component<ColorPicker>({\n    components: {\n        \"chrome-picker\": Chrome,\n    },\n})\nexport default class ColorPicker extends Vue {\n    @Prop(String) color!: string;\n\n    display = false;\n    left = 0;\n    top = 0;\n    transparent = false;\n\n    mounted() {\n        this.transparent = (<any>this.$refs.chromePicker).val.rgba.a === 0;\n        this.setPosition();\n    }\n\n    open() {\n        if (this.display) return; // click on the picker itself\n        this.setPosition();\n        this.display = true;\n        this.$nextTick(() => this.$children[0].$el.focus());\n    }\n    updateColor(value: { rgba: { r: number; g: number; b: number; a: number } }) {\n        this.transparent = value.rgba.a === 0;\n        const newColor = tinycolor(value.rgba).toRgbString();\n        this.$emit(\"update:color\", newColor);\n        this.$emit(\"input\", newColor);\n    }\n    closePicker() {\n        this.display = false;\n        this.$emit(\"change\", this.color);\n    }\n    setPosition() {\n        const rect = this.$el.getBoundingClientRect();\n        // 224 is the width of the picker, 242 the height\n        if (rect.right + 224 > window.innerWidth) this.left = rect.left - 224;\n        else this.left = rect.right;\n        if (rect.bottom + 242 > window.innerHeight) this.top = rect.top - 242;\n        else this.top = rect.bottom;\n    }\n}\n","import { render, staticRenderFns } from \"./game.vue?vue&type=template&id=6d744362&scoped=true&\"\nimport script from \"./game.vue?vue&type=script&lang=ts&\"\nexport * from \"./game.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./game.vue?vue&type=style&index=0&lang=css&\"\nimport style1 from \"./game.vue?vue&type=style&index=1&id=6d744362&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6d744362\",\n  null\n  \n)\n\ncomponent.options.__file = \"game.vue\"\nexport default component.exports","import io from \"socket.io-client\";\nimport { Route } from \"vue-router\";\n\nexport const socket = io(location.protocol + \"//\" + location.host + \"/planarally\", { autoConnect: false });\n\nexport function createConnection(route: Route) {\n    socket.io.opts.query = `user=${route.params.creator}&room=${route.params.room}`;\n    socket.connect();\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\n\nimport AssetContextMenu from \"@/assetManager/contextMenu.vue\";\nimport ConfirmDialog from \"@/core/components/modals/confirm.vue\";\nimport Prompt from \"@/core/components/modals/prompt.vue\";\n\nimport { socket } from \"@/assetManager/socket\";\nimport { assetStore } from \"@/assetManager/store\";\nimport { Asset } from \"@/core/comm/types\";\nimport { uuidv4 } from \"@/core/utils\";\n\n@Component({\n    components: {\n        Prompt,\n        ConfirmDialog,\n        AssetContextMenu,\n    },\n    beforeRouteEnter(to, from, next) {\n        socket.connect();\n        next();\n    },\n    beforeRouteLeave(to, from, next) {\n        socket.disconnect();\n        next();\n    },\n})\nexport default class AssetManager extends Vue {\n    path: number[] = [];\n    draggingSelection = false;\n\n    get folders(): number[] {\n        return assetStore.folders;\n    }\n\n    get files(): number[] {\n        return assetStore.files;\n    }\n\n    get selected(): number[] {\n        return assetStore.selected;\n    }\n\n    get idMap() {\n        return assetStore.idMap;\n    }\n\n    get currentFolder(): number {\n        if (this.path.length) return this.path[this.path.length - 1];\n        return assetStore.root;\n    }\n    get parentFolder(): number {\n        let parent = this.path[this.path.length - 2];\n        if (parent === undefined) parent = assetStore.root;\n        return parent;\n    }\n    get firstSelectedFile(): Asset | null {\n        for (const sel of assetStore.selected) {\n            if (assetStore.idMap.get(sel)!.file_hash) {\n                return assetStore.idMap.get(sel)!;\n            }\n        }\n        return null;\n    }\n    changeDirectory(nextFolder: number) {\n        if (nextFolder < 0) this.path.pop();\n        else this.path.push(nextFolder);\n        assetStore.clearSelected();\n        socket.emit(\"Folder.Get\", this.currentFolder);\n    }\n    createDirectory() {\n        const name = window.prompt(\"New folder name\");\n        if (name !== null) {\n            socket.emit(\"Folder.Create\", { name, parent: this.currentFolder });\n        }\n    }\n    moveInode(inode: number, target: number) {\n        if (assetStore.isFile(inode)) assetStore.files.splice(assetStore.files.indexOf(inode), 1);\n        else assetStore.folders.splice(assetStore.folders.indexOf(inode), 1);\n        assetStore.idMap.delete(inode);\n        socket.emit(\"Inode.Move\", { inode, target });\n    }\n    select(event: MouseEvent, inode: number) {\n        if (event.shiftKey && assetStore.selected.length > 0) {\n            const inodes = [...assetStore.files, ...assetStore.folders];\n            const start = inodes.indexOf(assetStore.selected[assetStore.selected.length - 1]);\n            const end = inodes.indexOf(inode);\n            for (let i = start; i !== end; start < end ? i++ : i--) assetStore.selected.push(inodes[i]);\n            assetStore.selected.push(inodes[end]);\n        } else {\n            if (!event.ctrlKey) {\n                assetStore.clearSelected();\n            }\n            assetStore.selected.push(inode);\n        }\n    }\n    startDrag(event: DragEvent, file: number) {\n        if (event.dataTransfer === null) return;\n        event.dataTransfer.setData(\"Hack\", \"ittyHack\");\n        event.dataTransfer.dropEffect = \"move\";\n        if (!assetStore.selected.includes(file)) assetStore.selected.push(file);\n        this.draggingSelection = true;\n    }\n    moveDrag(event: DragEvent) {\n        if ((<HTMLElement>event.target).classList.contains(\"folder\"))\n            (<HTMLElement>event.target).classList.add(\"inode-selected\");\n    }\n    leaveDrag(event: DragEvent) {\n        if ((<HTMLElement>event.target).classList.contains(\"folder\"))\n            (<HTMLElement>event.target).classList.remove(\"inode-selected\");\n    }\n    stopDrag(event: DragEvent, target: number) {\n        (<HTMLElement>event.target).classList.remove(\"inode-selected\");\n        if (this.draggingSelection) {\n            if (\n                (target === assetStore.root || assetStore.folders.includes(target)) &&\n                !assetStore.selected.includes(target)\n            ) {\n                for (const inode of assetStore.selected) {\n                    this.moveInode(inode, target);\n                }\n            }\n            assetStore.clearSelected();\n        } else if (event.dataTransfer && event.dataTransfer.files.length > 0) {\n            this.upload(event.dataTransfer.files, target);\n        }\n        this.draggingSelection = false;\n    }\n    prepareUpload() {\n        document.getElementById(\"files\")!.click();\n    }\n    upload(fls?: FileList, target?: number) {\n        const files = (<HTMLInputElement>document.getElementById(\"files\")!).files;\n        if (fls === undefined) {\n            if (files) fls = files;\n            else return;\n        }\n        if (target === undefined) target = this.currentFolder;\n        const CHUNK_SIZE = 100000;\n        for (const file of fls) {\n            const uuid = uuidv4();\n            const slices = Math.ceil(file.size / CHUNK_SIZE);\n            for (let slice = 0; slice < slices; slice++) {\n                const fr = new FileReader();\n                fr.readAsArrayBuffer(\n                    file.slice(\n                        slice * CHUNK_SIZE,\n                        slice * CHUNK_SIZE + Math.min(CHUNK_SIZE, file.size - slice * CHUNK_SIZE),\n                    ),\n                );\n                fr.onload = e => {\n                    socket.emit(\"Asset.Upload\", {\n                        name: file.name,\n                        directory: target,\n                        data: fr.result,\n                        slice,\n                        totalSlices: slices,\n                        uuid,\n                    });\n                };\n            }\n        }\n    }\n}\n","import { render, staticRenderFns } from \"./asset_node.vue?vue&type=template&id=62c91cd3&scoped=true&\"\nimport script from \"./asset_node.vue?vue&type=script&lang=ts&\"\nexport * from \"./asset_node.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./asset_node.vue?vue&type=style&index=0&id=62c91cd3&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"62c91cd3\",\n  null\n  \n)\n\ncomponent.options.__file = \"asset_node.vue\"\nexport default component.exports","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./selectcontext.vue?vue&type=style&index=0&id=44a31e42&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./selectcontext.vue?vue&type=style&index=0&id=44a31e42&scoped=true&lang=css&\"","import { render, staticRenderFns } from \"./login.vue?vue&type=template&id=6bbf3b79&scoped=true&\"\nimport script from \"./login.vue?vue&type=script&lang=ts&\"\nexport * from \"./login.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./login.vue?vue&type=style&index=0&id=6bbf3b79&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6bbf3b79\",\n  null\n  \n)\n\ncomponent.options.__file = \"login.vue\"\nexport default component.exports","import { layerManager } from \"@/game/layers/manager\";\nimport { g2lx, g2ly } from \"@/game/units\";\nimport { EdgeIterator, TDS } from \"./tds\";\nimport { ccw, cw } from \"./triag\";\n\nexport function drawPolygon(polygon: number[][], colour?: string) {\n    const dl = layerManager.getLayer(\"draw\");\n    if (dl === undefined) return;\n    const ctx = dl.ctx;\n    ctx.lineJoin = \"round\";\n    // ctx.clearRect(0, 0, window.innerWidth, window.innerHeight);\n    ctx.lineJoin = \"round\";\n    ctx.beginPath();\n    ctx.strokeStyle =\n        colour === undefined ? `rgb(${Math.random() * 255}, ${Math.random() * 255}, ${Math.random() * 255})` : colour;\n    ctx.moveTo(g2lx(polygon[0][0]), g2ly(polygon[0][1]));\n    for (const point of polygon) {\n        ctx.lineTo(g2lx(point[0]), g2ly(point[1]));\n    }\n    ctx.closePath();\n    ctx.stroke();\n}\n\nexport function drawPolygonL(polygon: number[][], colour?: string) {\n    const dl = layerManager.getLayer(\"draw\");\n    if (dl === undefined) return;\n    const ctx = dl.ctx;\n    ctx.lineJoin = \"round\";\n    // ctx.clearRect(0, 0, window.innerWidth, window.innerHeight);\n    ctx.lineJoin = \"round\";\n    ctx.beginPath();\n    ctx.strokeStyle =\n        colour === undefined ? `rgb(${Math.random() * 255}, ${Math.random() * 255}, ${Math.random() * 255})` : colour;\n    ctx.moveTo(polygon[0][0], polygon[0][1]);\n    for (const point of polygon) {\n        ctx.lineTo(point[0], point[1]);\n    }\n    ctx.closePath();\n    ctx.stroke();\n}\n\nfunction x(xx: number, local: boolean) {\n    if (local) return xx;\n    else return g2lx(xx);\n}\n\nfunction y(yy: number, local: boolean) {\n    if (local) return yy;\n    else return g2ly(yy);\n}\n\nlet I = 0;\nlet J = 0;\n\nfunction drl(ctx: CanvasRenderingContext2D, from: number[], to: number[], constrained: boolean, local: boolean) {\n    // J++;\n    // if (constrained) {\n    //     I++;\n    //     console.log(\"*\", from, to);\n    // } else {\n    //     console.log(\" \", from, to);\n    // }\n    ctx.beginPath();\n    ctx.strokeStyle = constrained ? \"rgba(255, 0, 0, 0.30)\" : \"rgba(0, 0, 0, 0.30)\";\n    ctx.moveTo(x(from[0], local), y(from[1], local));\n    ctx.lineTo(x(to[0], local), y(to[1], local));\n    ctx.closePath();\n    ctx.stroke();\n}\n\nfunction drawPolygonT(tds: TDS, local = true, clear = true) {\n    I = 0;\n    J = 0;\n    let T = 0;\n    const dl = layerManager.getLayer(\"draw\");\n    if (dl === undefined) return;\n    const ctx = dl.ctx;\n    if (clear) ctx.clearRect(0, 0, 2000, 1000);\n    ctx.lineJoin = \"round\";\n    // ctx.clearRect(0, 0, window.innerWidth, window.innerHeight);\n    ctx.lineJoin = \"round\";\n    const ei = new EdgeIterator(tds);\n    while (ei.valid) {\n        ei.next();\n        ei.collect();\n    }\n    ei.collect();\n    do {\n        const fromP = ei.edge.first!.vertices[ccw(ei.edge.second)]!.point!;\n        const toP = ei.edge.first!.vertices[cw(ei.edge.second)]!.point!;\n        // if (fromP[0] === -Infinity || toP[0] === -Infinity) {\n        //     ei.next();\n        //     continue;\n        // }\n        J++;\n        // if (ei.edge.first!.constraints[ei.edge.second]) {\n        //     I++;\n        //     console.log(`Edge: (*) ${fromP} > ${toP}`);\n        // } else console.log(`Edge: ${fromP} > ${toP}`);\n        do {\n            ei.next();\n            ei.collect();\n        } while (ei.valid);\n    } while (ei.pos !== null);\n    for (const t of tds.triangles) {\n        if (t.isInfinite()) continue;\n        T++;\n        const po = [];\n        ctx.fillStyle = \"red\";\n        if (t.vertices[0] !== undefined) {\n            po.push(t.vertices[0]!.point);\n            ctx.beginPath();\n            ctx.arc(x(t.vertices[0]!.point![0], local), y(t.vertices[0]!.point![1], local), 5, 0, 2 * Math.PI);\n            ctx.closePath();\n            ctx.fill();\n        }\n        if (t.vertices[1] !== undefined) {\n            po.push(t.vertices[1]!.point);\n            ctx.arc(x(t.vertices[1]!.point![0], local), y(t.vertices[1]!.point![1], local), 5, 0, 2 * Math.PI);\n            ctx.closePath();\n            ctx.fill();\n        }\n        if (t.vertices[2] !== undefined) {\n            po.push(t.vertices[2]!.point);\n            ctx.arc(x(t.vertices[2]!.point![0], local), y(t.vertices[2]!.point![1], local), 5, 0, 2 * Math.PI);\n            ctx.closePath();\n            ctx.fill();\n        }\n        // console.log(\"[T] \", ...po, t.constraints);\n\n        ctx.moveTo(x(t.vertices[0]!.point![0], local), y(t.vertices[0]!.point![1], local));\n        if (t.vertices[0] !== undefined && t.vertices[1] !== undefined)\n            drl(ctx, t.vertices[0]!.point!, t.vertices[1]!.point!, t.constraints[2], local);\n        if (t.vertices[1] !== undefined && t.vertices[2] !== undefined)\n            drl(ctx, t.vertices[1]!.point!, t.vertices[2]!.point!, t.constraints[0], local);\n        if (t.vertices[2] !== undefined && t.vertices[0] !== undefined)\n            drl(ctx, t.vertices[2]!.point!, t.vertices[0]!.point!, t.constraints[1], local);\n    }\n    console.log(`Edges: ${I}/${J}`);\n    console.log(`Faces: ${T}`);\n}\n\n(<any>window).DP = drawPolygon;\n(<any>window).DPL = drawPolygonL;\n(<any>window).DPT = drawPolygonT;\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('modal',{attrs:{\"visible\":_vm.visible},on:{\"close\":function($event){_vm.visible = false}},scopedSlots:_vm._u([{key:\"header\",fn:function(m){return _c('div',{staticClass:\"modal-header\",attrs:{\"draggable\":\"true\"},on:{\"dragstart\":m.dragStart,\"dragend\":m.dragEnd}},[_vm._v(\"Create basic token\")])}}])},[_c('div',{staticClass:\"modal-body\"},[_c('label',{attrs:{\"for\":\"createtokendialog-text\"}},[_vm._v(\"Text\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.text),expression:\"text\"}],attrs:{\"type\":\"text\",\"id\":\"createtokendialog-name\"},domProps:{\"value\":(_vm.text)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.text=$event.target.value}}}),_c('label',[_vm._v(\"Colours\")]),_c('div',{staticClass:\"colours\"},[_c('span',[_vm._v(\"Fill:\")]),_c('color-picker',{attrs:{\"color\":_vm.fillColour},on:{\"update:color\":function($event){_vm.fillColour=$event}}}),_c('span',[_vm._v(\"Border:\")]),_c('color-picker',{attrs:{\"color\":_vm.borderColour},on:{\"update:color\":function($event){_vm.borderColour=$event}}})],1),_c('canvas',{ref:\"canvas\",attrs:{\"width\":\"100px\",\"height\":\"100px\"}})]),_c('div',{staticClass:\"modal-footer\"},[_c('button',{on:{\"click\":_vm.submit}},[_vm._v(\"Submit\")])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"74f43d04-vue-loader-template\\\"}!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./createtoken_modal.vue?vue&type=template&id=66ccc134&scoped=true&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tool.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tool.vue?vue&type=style&index=0&lang=css&\"","import * as tinycolor from \"tinycolor2\";\n\nimport { calcFontScale } from \"@/core/utils\";\nimport { InitiativeData } from \"@/game/comm/types/general\";\nimport { ServerCircularToken } from \"@/game/comm/types/shapes\";\nimport { GlobalPoint } from \"@/game/geom\";\nimport { Circle } from \"@/game/shapes/circle\";\nimport { gameStore } from \"@/game/store\";\nimport { g2l, g2lz } from \"@/game/units\";\n\nexport class CircularToken extends Circle {\n    type = \"circulartoken\";\n    text: string;\n    font: string;\n    constructor(\n        center: GlobalPoint,\n        r: number,\n        text: string,\n        font: string,\n        fillColour?: string,\n        strokeColour?: string,\n        uuid?: string,\n    ) {\n        super(center, r, fillColour, strokeColour, uuid);\n        this.text = text;\n        this.font = font;\n    }\n    asDict(): ServerCircularToken {\n        return Object.assign(this.getBaseDict(), {\n            radius: this.r,\n            text: this.text,\n            font: this.font,\n        });\n    }\n    fromDict(data: ServerCircularToken) {\n        super.fromDict(data);\n        this.r = data.radius;\n        this.text = data.text;\n        this.font = data.font;\n    }\n    draw(ctx: CanvasRenderingContext2D) {\n        super.draw(ctx);\n        ctx.font = this.font;\n        ctx.save();\n        const dest = g2l(this.center());\n        ctx.textAlign = \"center\";\n        ctx.textBaseline = \"middle\";\n        const xs = calcFontScale(ctx, this.text, g2lz(this.r), g2lz(this.r));\n        const ys = 0;\n        ctx.transform(xs, ys, -ys, xs, dest.x, dest.y);\n        ctx.fillStyle = tinycolor.mostReadable(this.fillColour, [\"#000\", \"#fff\"]).toHexString();\n        ctx.fillText(this.text, 0, 0);\n        ctx.restore();\n    }\n    getInitiativeRepr(): InitiativeData {\n        return {\n            uuid: this.uuid,\n            visible: !gameStore.IS_DM,\n            group: false,\n            source: this.name === \"\" || this.name === \"Unknown shape\" ? this.text : this.name,\n            has_img: false,\n            effects: [],\n            index: Infinity,\n        };\n    }\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"AssetManager\"}},[_c('div',{attrs:{\"id\":\"titlebar\"}},[_vm._v(\"Asset Manager\")]),_c('div',{attrs:{\"id\":\"main\"}},[_c('div',{attrs:{\"id\":\"assets\"},on:{\"dragover\":function($event){$event.preventDefault();return _vm.moveDrag($event)},\"drop\":function($event){$event.preventDefault();$event.stopPropagation();_vm.stopDrag($event, _vm.currentFolder)}}},[_c('div',{attrs:{\"id\":\"breadcrumbs\"}},[_c('div',[_vm._v(\"/\")]),_vm._l((_vm.path),function(dir){return _c('div',{key:dir},[_vm._v(_vm._s(_vm.idMap.get(dir).name))])})],2),_c('div',{attrs:{\"id\":\"actionbar\"}},[_c('input',{attrs:{\"id\":\"files\",\"type\":\"file\",\"multiple\":\"\",\"hidden\":\"\"},on:{\"change\":function($event){_vm.upload()}}}),_c('div',{attrs:{\"title\":\"Create folder\"},on:{\"click\":_vm.createDirectory}},[_c('i',{staticClass:\"fas fa-plus-square\"})]),_c('div',{attrs:{\"title\":\"Upload files\"},on:{\"click\":_vm.prepareUpload}},[_c('i',{staticClass:\"fas fa-upload\"})])]),_c('div',{attrs:{\"id\":\"explorer\"}},[(_vm.path.length)?_c('div',{staticClass:\"inode folder\",on:{\"dblclick\":function($event){_vm.changeDirectory(-1)},\"dragover\":function($event){$event.preventDefault();return _vm.moveDrag($event)},\"dragleave\":function($event){$event.preventDefault();return _vm.leaveDrag($event)},\"drop\":function($event){$event.preventDefault();$event.stopPropagation();_vm.stopDrag($event, _vm.parentFolder)}}},[_c('i',{staticClass:\"fas fa-folder\",staticStyle:{\"font-size\":\"50px\"}}),_c('div',{staticClass:\"title\"},[_vm._v(\"..\")])]):_vm._e(),_vm._l((_vm.folders),function(key){return _c('div',{key:key,staticClass:\"inode folder\",class:{'inode-selected': _vm.selected.includes(key)},attrs:{\"draggable\":\"true\"},on:{\"click\":function($event){_vm.select($event, key)},\"dblclick\":function($event){_vm.changeDirectory(key)},\"contextmenu\":function($event){$event.preventDefault();_vm.$refs.cm.open($event, key)},\"dragstart\":function($event){_vm.startDrag($event, key)},\"dragover\":function($event){$event.preventDefault();return _vm.moveDrag($event)},\"dragleave\":function($event){$event.preventDefault();return _vm.leaveDrag($event)},\"drop\":function($event){$event.preventDefault();$event.stopPropagation();_vm.stopDrag($event, key)}}},[_c('i',{staticClass:\"fas fa-folder\",staticStyle:{\"font-size\":\"50px\"}}),_c('div',{staticClass:\"title\"},[_vm._v(_vm._s(_vm.idMap.get(key).name))])])}),_vm._l((_vm.files),function(file){return _c('div',{key:file,staticClass:\"inode file\",class:{'inode-selected': _vm.selected.includes(file)},attrs:{\"draggable\":\"true\"},on:{\"click\":function($event){_vm.select($event, file)},\"contextmenu\":function($event){$event.preventDefault();_vm.$refs.cm.open($event, file)},\"dragstart\":function($event){_vm.startDrag($event, file)}}},[_c('img',{attrs:{\"src\":'/static/assets/' + _vm.idMap.get(file).file_hash,\"width\":\"50\"}}),_c('div',{staticClass:\"title\"},[_vm._v(_vm._s(_vm.idMap.get(file).name))])])})],2)]),(_vm.firstSelectedFile)?_c('div',{attrs:{\"id\":\"asset-details\"}},[_c('div',{attrs:{\"id\":\"asset-detail-title\"}},[_vm._v(_vm._s(_vm.firstSelectedFile.name))]),_c('img',{attrs:{\"src\":'/static/assets/' + _vm.firstSelectedFile.file_hash}})]):_vm._e()]),_c('AssetContextMenu',{ref:\"cm\"}),_c('Prompt',{ref:\"prompt\"}),_c('ConfirmDialog',{ref:\"confirm\"})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"74f43d04-vue-loader-template\\\"}!../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./manager.vue?vue&type=template&id=d1ce9748&\"","import { GlobalPoint, LocalPoint } from \"@/game/geom\";\nimport { Layer } from \"@/game/layers/layer\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { Rect } from \"@/game/shapes/rect\";\nimport { Text } from \"@/game/shapes/text\";\nimport { gameStore } from \"@/game/store\";\nimport { l2g } from \"@/game/units\";\n\nexport class AnnotationManager {\n    annotationText: Text;\n    annotationRect: Rect;\n    layer: Layer | undefined;\n    shown: boolean = false;\n\n    constructor() {\n        const origin = new GlobalPoint(0, 0);\n        this.annotationText = new Text(origin, \"\", \"bold 20px serif\", 0, \"rgba(230, 230, 230, 1)\");\n        this.annotationRect = new Rect(origin, 0, 0, \"rgba(0, 0, 0, 0.6)\");\n    }\n\n    setActiveText(text: string) {\n        if (this.layer === undefined) {\n            if (layerManager.hasLayer(\"draw\")) {\n                this.layer = layerManager.getLayer(\"draw\")!;\n                this.layer.addShape(this.annotationRect, false);\n                this.layer.addShape(this.annotationText, false);\n            } else {\n                console.warn(\"There is no draw layer to draw annotations on!\");\n                return;\n            }\n        }\n        this.shown = text !== \"\";\n        this.annotationText.refPoint = l2g(new LocalPoint(this.layer.canvas.width / 2, 50));\n        this.annotationText.text = text;\n        const width = this.shown ? this.annotationText.getMaxWidth(this.layer.ctx) + 10 : 0;\n        const height = this.shown ? this.annotationText.getMaxHeight(this.layer.ctx) + 10 : 0;\n        this.annotationRect.refPoint = l2g(new LocalPoint(this.layer.canvas.width / 2 - width / 2, 30));\n        this.annotationRect.w = width / gameStore.zoomFactor;\n        this.annotationRect.h = height / gameStore.zoomFactor;\n        this.layer.invalidate(true);\n    }\n}\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./colorpicker.vue?vue&type=style&index=0&id=b4f2c0b0&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./colorpicker.vue?vue&type=style&index=0&id=b4f2c0b0&scoped=true&lang=css&\"","import { render, staticRenderFns } from \"./menu.vue?vue&type=template&id=21f210ea&scoped=true&\"\nimport script from \"./menu.vue?vue&type=script&lang=ts&\"\nexport * from \"./menu.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./menu.vue?vue&type=style&index=0&id=21f210ea&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"21f210ea\",\n  null\n  \n)\n\ncomponent.options.__file = \"menu.vue\"\nexport default component.exports","import { render, staticRenderFns } from \"./contextmenu.vue?vue&type=template&id=256dde9c&\"\nimport script from \"./contextmenu.vue?vue&type=script&lang=ts&\"\nexport * from \"./contextmenu.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./contextmenu.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"contextmenu.vue\"\nexport default component.exports","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./note.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./note.vue?vue&type=script&lang=ts&\"","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--12-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./login.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--12-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./login.vue?vue&type=script&lang=ts&\"","import {\n    ServerAsset,\n    ServerCircle,\n    ServerCircularToken,\n    ServerLine,\n    ServerMultiLine,\n    ServerRect,\n    ServerShape,\n    ServerText,\n} from \"@/game/comm/types/shapes\";\nimport { GlobalPoint } from \"@/game/geom\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { Asset } from \"@/game/shapes/asset\";\nimport { Circle } from \"@/game/shapes/circle\";\nimport { CircularToken } from \"@/game/shapes/circulartoken\";\nimport { Line } from \"@/game/shapes/line\";\nimport { MultiLine } from \"@/game/shapes/multiline\";\nimport { Rect } from \"@/game/shapes/rect\";\nimport { Shape } from \"@/game/shapes/shape\";\nimport { Text } from \"@/game/shapes/text\";\n\nexport function createShapeFromDict(shape: ServerShape, dummy?: boolean) {\n    // TODO: is this dummy stuff actually needed, do we ever want to return the local shape?\n    if (dummy === undefined) dummy = false;\n    if (!dummy && layerManager.UUIDMap.has(shape.uuid)) return layerManager.UUIDMap.get(shape.uuid);\n\n    let sh: Shape;\n\n    // A fromJSON and toJSON on Shape would be cleaner but ts does not allow for static abstracts so yeah.\n\n    // Shape Type specifics\n\n    const refPoint = new GlobalPoint(shape.x, shape.y);\n    if (shape.type_ === \"rect\") {\n        const rect = <ServerRect>shape;\n        sh = new Rect(refPoint, rect.width, rect.height, rect.fill_colour, rect.stroke_colour, rect.uuid);\n    } else if (shape.type_ === \"circle\") {\n        const circ = <ServerCircle>shape;\n        sh = new Circle(refPoint, circ.radius, circ.fill_colour, circ.stroke_colour, circ.uuid);\n    } else if (shape.type_ === \"circulartoken\") {\n        const token = <ServerCircularToken>shape;\n        sh = new CircularToken(\n            refPoint,\n            token.radius,\n            token.text,\n            token.font,\n            token.fill_colour,\n            token.stroke_colour,\n            token.uuid,\n        );\n    } else if (shape.type_ === \"line\") {\n        const line = <ServerLine>shape;\n        sh = new Line(refPoint, new GlobalPoint(line.x2, line.y2), line.line_width, line.stroke_colour, line.uuid);\n    } else if (shape.type_ === \"multiline\") {\n        const multiline = <ServerMultiLine>shape;\n        sh = new MultiLine(\n            refPoint,\n            multiline.points.map(p => new GlobalPoint(p.x, p.y)),\n            multiline.line_width,\n            multiline.stroke_colour,\n            multiline.uuid,\n        );\n    } else if (shape.type_ === \"text\") {\n        const text = <ServerText>shape;\n        sh = new Text(refPoint, text.text, text.font, text.angle, text.fill_colour, text.stroke_colour, text.uuid);\n    } else if (shape.type_ === \"assetrect\") {\n        const asset = <ServerAsset>shape;\n        const img = new Image(asset.width, asset.height);\n        if (asset.src.startsWith(\"http\")) img.src = new URL(asset.src).pathname;\n        else img.src = asset.src;\n        sh = new Asset(img, refPoint, asset.width, asset.height, asset.uuid);\n        img.onload = () => {\n            layerManager.getLayer(shape.layer)!.invalidate(false);\n        };\n    } else {\n        return undefined;\n    }\n    sh.fromDict(shape);\n    return sh;\n}\n","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./confirm.vue?vue&type=style&index=0&id=1883e207&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./confirm.vue?vue&type=style&index=0&id=1883e207&scoped=true&lang=css&\"","import tinycolor from \"tinycolor2\";\n\nimport { uuidv4 } from \"@/core/utils\";\nimport { socket } from \"@/game/api/socket\";\nimport { aurasFromServer, aurasToServer } from \"@/game/comm/conversion/aura\";\nimport { InitiativeData } from \"@/game/comm/types/general\";\nimport { ServerShape } from \"@/game/comm/types/shapes\";\nimport { GlobalPoint, LocalPoint } from \"@/game/geom\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { BoundingRect } from \"@/game/shapes/boundingrect\";\nimport { gameStore } from \"@/game/store\";\nimport { g2l, g2lr, g2lx, g2ly, g2lz } from \"@/game/units\";\n\nexport abstract class Shape {\n    // Used to create class instance from server shape data\n    abstract type: string;\n    // The unique ID of this shape\n    uuid: string;\n    // The layer the shape is currently on\n    layer!: string;\n\n    // A reference point regarding that specific shape's structure\n    refPoint: GlobalPoint;\n\n    // Fill colour of the shape\n    fillColour: string = \"#000\";\n    strokeColour: string = \"rgba(0,0,0,0)\";\n    // The optional name associated with the shape\n    name = \"Unknown shape\";\n\n    // Associated trackers/auras/owners\n    trackers: Tracker[] = [];\n    auras: Aura[] = [];\n    owners: string[] = [];\n\n    // Block light sources\n    visionObstruction = false;\n    // Prevent shapes from overlapping with this shape\n    movementObstruction = false;\n    // Does this shape represent a playable token\n    isToken = false;\n    // Show a highlight box\n    showHighlight = false;\n\n    // Mouseover annotation\n    annotation: string = \"\";\n\n    // Draw modus to use\n    globalCompositeOperation: string = \"source-over\";\n\n    // Additional options for specialized uses\n    options: Map<string, any> = new Map();\n\n    constructor(refPoint: GlobalPoint, fillColour?: string, strokeColour?: string, uuid?: string) {\n        this.refPoint = refPoint;\n        this.uuid = uuid || uuidv4();\n        if (fillColour !== undefined) this.fillColour = fillColour;\n        if (strokeColour !== undefined) this.strokeColour = strokeColour;\n    }\n\n    abstract getBoundingBox(): BoundingRect;\n\n    // If inWorldCoord is\n    abstract contains(point: GlobalPoint): boolean;\n\n    abstract center(): GlobalPoint;\n    abstract center(centerPoint: GlobalPoint): void;\n    abstract getCorner(point: GlobalPoint): string | undefined;\n    visibleInCanvas(canvas: HTMLCanvasElement): boolean {\n        // for (const aura of this.auras) {\n        //     if (aura.value > 0) {\n        //         const auraCircle = new Circle(this.center(), aura.value);\n        //         if (auraCircle.visibleInCanvas(canvas)) return true;\n        //     }\n        // }\n        return false;\n    }\n\n    // Code to snap a shape to the grid\n    // This is shape dependent as the shape refPoints are shape specific in\n    abstract snapToGrid(): void;\n    abstract resizeToGrid(): void;\n    abstract resize(resizeDir: string, point: LocalPoint): void;\n\n    abstract get points(): number[][];\n\n    invalidate(skipLightUpdate: boolean) {\n        const l = layerManager.getLayer(this.layer);\n        if (l) l.invalidate(skipLightUpdate);\n    }\n\n    checkVisionSources() {\n        const self = this;\n        const obstructionIndex = gameStore.visionBlockers.indexOf(this.uuid);\n        let changeBV = false;\n        if (this.visionObstruction && obstructionIndex === -1) {\n            gameStore.visionBlockers.push(this.uuid);\n            changeBV = true;\n        } else if (!this.visionObstruction && obstructionIndex >= 0) {\n            gameStore.visionBlockers.splice(obstructionIndex, 1);\n            changeBV = true;\n        }\n        if (changeBV) gameStore.recalculateBV();\n\n        // Check if the visionsource auras are in the gameManager\n        this.auras.forEach(au => {\n            const ls = gameStore.visionSources;\n            const i = ls.findIndex(o => o.aura === au.uuid);\n            if (au.visionSource && i === -1) {\n                ls.push({ shape: self.uuid, aura: au.uuid });\n            } else if (!au.visionSource && i >= 0) {\n                ls.splice(i, 1);\n            }\n        });\n        // Check if anything in the gameManager referencing this shape is in fact still a visionsource\n        for (let i = gameStore.visionSources.length - 1; i >= 0; i--) {\n            const ls = gameStore.visionSources[i];\n            if (ls.shape === self.uuid) {\n                if (!self.auras.some(a => a.uuid === ls.aura && a.visionSource)) gameStore.visionSources.splice(i, 1);\n            }\n        }\n    }\n\n    setMovementBlock(blocksMovement: boolean) {\n        this.movementObstruction = blocksMovement || false;\n        const obstructionIndex = gameStore.movementblockers.indexOf(this.uuid);\n        if (this.movementObstruction && obstructionIndex === -1) gameStore.movementblockers.push(this.uuid);\n        else if (!this.movementObstruction && obstructionIndex >= 0)\n            gameStore.movementblockers.splice(obstructionIndex, 1);\n    }\n\n    setIsToken(isToken: boolean) {\n        this.isToken = isToken;\n        if (this.ownedBy()) {\n            const i = gameStore.ownedtokens.indexOf(this.uuid);\n            if (this.isToken && i === -1) gameStore.ownedtokens.push(this.uuid);\n            else if (!this.isToken && i >= 0) gameStore.ownedtokens.splice(i, 1);\n        }\n    }\n\n    ownedBy(username?: string) {\n        if (username === undefined) username = gameStore.username;\n        return gameStore.IS_DM || this.owners.includes(username);\n    }\n\n    abstract asDict(): ServerShape;\n    getBaseDict(): ServerShape {\n        return {\n            type_: this.type,\n            uuid: this.uuid,\n            x: this.refPoint.x,\n            y: this.refPoint.y,\n            layer: this.layer,\n            draw_operator: this.globalCompositeOperation,\n            movement_obstruction: this.movementObstruction,\n            vision_obstruction: this.visionObstruction,\n            auras: aurasToServer(this.auras),\n            trackers: this.trackers,\n            owners: this.owners,\n            fill_colour: this.fillColour,\n            stroke_colour: this.strokeColour,\n            name: this.name,\n            annotation: this.annotation,\n            is_token: this.isToken,\n            options: JSON.stringify([...this.options]),\n        };\n    }\n    fromDict(data: ServerShape) {\n        this.layer = data.layer;\n        this.globalCompositeOperation = data.draw_operator;\n        this.movementObstruction = data.movement_obstruction;\n        this.visionObstruction = data.vision_obstruction;\n        this.auras = aurasFromServer(data.auras);\n        this.trackers = data.trackers;\n        this.owners = data.owners;\n        this.isToken = data.is_token;\n        if (data.annotation) this.annotation = data.annotation;\n        if (data.name) this.name = data.name;\n        if (data.options) this.options = new Map(JSON.parse(data.options));\n    }\n\n    draw(ctx: CanvasRenderingContext2D) {\n        if (this.globalCompositeOperation !== undefined) ctx.globalCompositeOperation = this.globalCompositeOperation;\n        else ctx.globalCompositeOperation = \"source-over\";\n        if (this.showHighlight) {\n            const bbox = this.getBoundingBox();\n            ctx.strokeStyle = \"red\";\n            ctx.strokeRect(g2lx(bbox.topLeft.x) - 5, g2ly(bbox.topLeft.y) - 5, g2lz(bbox.w) + 10, g2lz(bbox.h) + 10);\n        }\n    }\n\n    drawAuras(ctx: CanvasRenderingContext2D) {\n        for (const aura of this.auras) {\n            if (aura.value === 0 && aura.dim === 0) return;\n            ctx.beginPath();\n\n            const loc = g2l(this.center());\n            const innerRange = g2lr(aura.value + aura.dim);\n\n            if (aura.dim === 0) ctx.fillStyle = aura.colour;\n            else {\n                const gradient = ctx.createRadialGradient(\n                    loc.x,\n                    loc.y,\n                    g2lr(aura.value),\n                    loc.x,\n                    loc.y,\n                    g2lr(aura.value + aura.dim),\n                );\n                const tc = tinycolor(aura.colour);\n                ctx.fillStyle = gradient;\n                gradient.addColorStop(0, aura.colour);\n                gradient.addColorStop(1, tc.setAlpha(0).toRgbString());\n            }\n            if (!aura.visionSource || aura.lastPath === undefined) {\n                ctx.arc(loc.x, loc.y, innerRange, 0, 2 * Math.PI);\n                ctx.fill();\n            } else {\n                try {\n                    ctx.fill(aura.lastPath);\n                } catch (e) {\n                    ctx.arc(loc.x, loc.y, innerRange, 0, 2 * Math.PI);\n                    ctx.fill();\n                    console.warn(e);\n                }\n            }\n        }\n    }\n\n    getInitiativeRepr(): InitiativeData {\n        return {\n            uuid: this.uuid,\n            visible: !gameStore.IS_DM,\n            group: false,\n            source: this.name,\n            has_img: false,\n            effects: [],\n            index: Infinity,\n        };\n    }\n\n    moveLayer(layer: string, sync: boolean) {\n        const oldLayer = layerManager.getLayer(this.layer);\n        const newLayer = layerManager.getLayer(layer);\n        if (oldLayer === undefined || newLayer === undefined) return;\n        this.layer = layer;\n        // Update layer shapes\n        oldLayer.shapes.splice(oldLayer.shapes.indexOf(this), 1);\n        newLayer.shapes.push(this);\n        // Revalidate layers  (light should at most be redone once)\n        oldLayer.invalidate(true);\n        newLayer.invalidate(false);\n        // Sync!\n        if (sync) socket.emit(\"Shape.Layer.Change\", { uuid: this.uuid, layer });\n    }\n}\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./prompt.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./prompt.vue?vue&type=script&lang=ts&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.note !== null)?_c('modal',{attrs:{\"visible\":_vm.visible,\"mask\":false},on:{\"close\":function($event){_vm.visible = false}},scopedSlots:_vm._u([{key:\"header\",fn:function(m){return _c('div',{staticClass:\"modal-header\",attrs:{\"draggable\":\"true\"},on:{\"dragstart\":m.dragStart,\"dragend\":m.dragEnd}},[_c('span',{on:{\"click\":function($event){_vm.$refs.title.select()}}},[_c('i',{staticClass:\"fas fa-pencil-alt\",staticStyle:{\"font-size\":\"15px\"}})]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.note.title),expression:\"note.title\"}],ref:\"title\",domProps:{\"value\":(_vm.note.title)},on:{\"change\":_vm.updateNote,\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.note, \"title\", $event.target.value)}}}),_c('div',{staticClass:\"header-close\",on:{\"click\":function($event){_vm.visible = false}}},[_c('i',{staticClass:\"far fa-window-close\"})])])}}])},[_c('div',{staticClass:\"modal-body\"},[_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.note.text),expression:\"note.text\"}],ref:\"textarea\",style:({'height': _vm.calcHeight()}),domProps:{\"value\":(_vm.note.text)},on:{\"change\":_vm.updateNote,\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.note, \"text\", $event.target.value)}}})]),_c('div',{staticClass:\"modal-footer\"},[_c('button',{on:{\"click\":_vm.removeNote}},[_c('i',{staticClass:\"far fa-trash-alt\"}),_vm._v(\" Remove\\n    \")])])]):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"74f43d04-vue-loader-template\\\"}!../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./note.vue?vue&type=template&id=7a3669fd&scoped=true&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./modal.vue?vue&type=style&index=0&id=12ed61ba&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./modal.vue?vue&type=style&index=0&id=12ed61ba&scoped=true&lang=css&\"","\n\n\n\n\nimport SelectContext from \"@/game/ui/tools/selectcontext.vue\";\nimport Tool from \"@/game/ui/tools/tool.vue\";\nimport SelectionInfo from \"../selection/selection_info.vue\";\n\nimport { getRef } from \"@/core/utils\";\nimport { socket } from \"@/game/api/socket\";\nimport { GlobalPoint, LocalPoint, Ray, Vector } from \"@/game/geom\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { Rect } from \"@/game/shapes/rect\";\nimport { gameStore } from \"@/game/store\";\nimport { calculateDelta } from \"@/game/ui/tools/utils\";\nimport { g2l, g2lx, g2ly, l2g } from \"@/game/units\";\nimport { getMouse } from \"@/game/utils\";\nimport Component from \"vue-class-component\";\n\nexport enum SelectOperations {\n    Noop,\n    Resize,\n    Drag,\n    GroupSelect,\n}\n\nconst start = new GlobalPoint(-1000, -1000);\n\n@Component({\n    components: {\n        SelectContext,\n    },\n})\nexport default class SelectTool extends Tool {\n    name = \"Select\";\n    showContextMenu = false;\n    active = false;\n\n    mode = SelectOperations.Noop;\n    resizeDirection = \"\";\n    deltaChanged = false;\n    // Because we never drag from the asset's (0, 0) coord and want a smoother drag experience\n    // we keep track of the actual offset within the asset.\n    dragRay = new Ray<LocalPoint>(new LocalPoint(0, 0), new Vector(0, 0));\n    selectionStartPoint = start;\n    selectionHelper = new Rect(start, 0, 0);\n    created() {\n        this.selectionHelper.globalCompositeOperation = \"source-over\";\n    }\n    onMouseDown(event: MouseEvent) {\n        const layer = layerManager.getLayer();\n        if (layer === undefined) {\n            console.log(\"No active layer!\");\n            return;\n        }\n\n        if (!this.selectionHelper.owners.includes(gameStore.username)) {\n            this.selectionHelper.owners.push(gameStore.username);\n        }\n\n        const mouse = getMouse(event);\n        const globalMouse = l2g(mouse);\n\n        let hit = false;\n        // The selectionStack allows for lower positioned objects that are selected to have precedence during overlap.\n        let selectionStack;\n        if (!layer.selection.length) selectionStack = layer.shapes;\n        else selectionStack = layer.shapes.concat(layer.selection);\n        for (let i = selectionStack.length - 1; i >= 0; i--) {\n            const shape = selectionStack[i];\n\n            if (!shape.ownedBy()) continue;\n\n            const corner = shape.getBoundingBox().getCorner(globalMouse);\n\n            // Resize case, a corner is selected\n            if (corner !== undefined) {\n                layer.selection = [shape];\n                getRef<SelectionInfo>(\"selectionInfo\").shape = shape;\n                this.mode = SelectOperations.Resize;\n                this.resizeDirection = corner;\n                layer.invalidate(true);\n                hit = true;\n                break;\n\n                // Drag case, a shape is selected\n            } else if (shape.contains(globalMouse)) {\n                const selection = shape;\n                if (layer.selection.indexOf(selection) === -1) {\n                    layer.selection = [selection];\n                    getRef<SelectionInfo>(\"selectionInfo\").shape = selection;\n                }\n                this.mode = SelectOperations.Drag;\n                const localRefPoint = g2l(selection.refPoint);\n                this.dragRay = new Ray<LocalPoint>(localRefPoint, mouse.subtract(localRefPoint));\n                layer.invalidate(true);\n                hit = true;\n                break;\n            }\n        }\n\n        // GroupSelect case, draw a selection box to select multiple shapes\n        if (!hit) {\n            this.mode = SelectOperations.GroupSelect;\n            for (const selection of layer.selection) getRef<SelectionInfo>(\"selectionInfo\").shape = selection;\n\n            this.selectionStartPoint = globalMouse;\n\n            this.selectionHelper.refPoint = this.selectionStartPoint;\n            this.selectionHelper.w = 0;\n            this.selectionHelper.h = 0;\n\n            layer.selection = [this.selectionHelper];\n            layer.invalidate(true);\n        }\n        this.active = true;\n    }\n    onMouseMove(event: MouseEvent) {\n        // if (!this.active) return;   we require mousemove for the resize cursor\n        const layer = layerManager.getLayer();\n        if (layer === undefined) {\n            console.log(\"No active layer!\");\n            return;\n        }\n        const mouse = getMouse(event);\n        const globalMouse = l2g(mouse);\n        this.deltaChanged = false;\n\n        if (this.mode === SelectOperations.GroupSelect) {\n            // Currently draw on active layer\n            const endPoint = globalMouse;\n\n            this.selectionHelper.w = Math.abs(endPoint.x - this.selectionStartPoint.x);\n            this.selectionHelper.h = Math.abs(endPoint.y - this.selectionStartPoint.y);\n            this.selectionHelper.refPoint = new GlobalPoint(\n                Math.min(this.selectionStartPoint.x, endPoint.x),\n                Math.min(this.selectionStartPoint.y, endPoint.y),\n            );\n            layer.invalidate(true);\n        } else if (layer.selection.length) {\n            const og = g2l(layer.selection[layer.selection.length - 1].refPoint);\n            const origin = og.add(this.dragRay.direction);\n            let delta = mouse.subtract(origin).multiply(1 / gameStore.zoomFactor);\n            const ogDelta = delta;\n            if (this.mode === SelectOperations.Drag) {\n                // If we are on the tokens layer do a movement block check.\n                if (layer.name === \"tokens\" && !(event.shiftKey && gameStore.IS_DM)) {\n                    for (const sel of layer.selection) {\n                        if (sel.uuid === this.selectionHelper.uuid) continue; // the selection helper should not be treated as a real shape.\n                        delta = calculateDelta(delta, sel);\n                        if (delta !== ogDelta) this.deltaChanged = true;\n                    }\n                }\n                // Actually apply the delta on all shapes\n                for (const sel of layer.selection) {\n                    sel.refPoint = sel.refPoint.add(delta);\n                    if (sel !== this.selectionHelper) {\n                        if (sel.visionObstruction) gameStore.recalculateBV(true);\n                        socket.emit(\"Shape.Update\", { shape: sel.asDict(), redraw: true, temporary: true });\n                    }\n                }\n                layer.invalidate(false);\n            } else if (this.mode === SelectOperations.Resize) {\n                for (const sel of layer.selection) {\n                    sel.resize(this.resizeDirection, mouse);\n                    if (sel !== this.selectionHelper) {\n                        if (sel.visionObstruction) gameStore.recalculateBV(true);\n                        socket.emit(\"Shape.Update\", { shape: sel.asDict(), redraw: true, temporary: true });\n                    }\n                    layer.invalidate(false);\n                }\n            } else {\n                for (const sel of layer.selection) {\n                    const bb = sel.getBoundingBox();\n                    const gm = globalMouse;\n                    if (bb.inCorner(gm, \"nw\")) {\n                        document.body.style.cursor = \"nw-resize\";\n                    } else if (bb.inCorner(gm, \"ne\")) {\n                        document.body.style.cursor = \"ne-resize\";\n                    } else if (bb.inCorner(gm, \"se\")) {\n                        document.body.style.cursor = \"se-resize\";\n                    } else if (bb.inCorner(gm, \"sw\")) {\n                        document.body.style.cursor = \"sw-resize\";\n                    } else {\n                        document.body.style.cursor = \"default\";\n                    }\n                }\n            }\n        } else {\n            document.body.style.cursor = \"default\";\n        }\n    }\n    onMouseUp(e: MouseEvent): void {\n        if (!this.active) return;\n        if (layerManager.getLayer() === undefined) {\n            console.log(\"No active layer!\");\n            return;\n        }\n        const layer = layerManager.getLayer()!;\n\n        if (this.mode === SelectOperations.GroupSelect) {\n            layer.clearSelection();\n            layer.shapes.forEach(shape => {\n                if (shape === this.selectionHelper) return;\n                const bbox = shape.getBoundingBox();\n                if (!shape.ownedBy()) return;\n                if (\n                    this.selectionHelper!.refPoint.x <= bbox.topRight.x &&\n                    this.selectionHelper!.refPoint.x + this.selectionHelper!.w >= bbox.topLeft.x &&\n                    this.selectionHelper!.refPoint.y <= bbox.botLeft.y &&\n                    this.selectionHelper!.refPoint.y + this.selectionHelper!.h >= bbox.topLeft.y\n                ) {\n                    layer.selection.push(shape);\n                }\n            });\n\n            // Push the selection helper as the last element of the selection\n            // This makes sure that it will be the first one to be hit in the hit detection onMouseDown\n            if (layer.selection.length > 0) layer.selection.push(this.selectionHelper);\n\n            layer.invalidate(true);\n        } else if (layer.selection.length) {\n            layer.selection.forEach(sel => {\n                if (this.mode === SelectOperations.Drag) {\n                    if (\n                        this.dragRay.origin!.x === g2lx(sel.refPoint.x) &&\n                        this.dragRay.origin!.y === g2ly(sel.refPoint.y)\n                    )\n                        return;\n\n                    if (gameStore.useGrid && !e.altKey && !this.deltaChanged) {\n                        sel.snapToGrid();\n                    }\n\n                    if (sel !== this.selectionHelper) {\n                        if (sel.visionObstruction) gameStore.recalculateBV();\n                        socket.emit(\"Shape.Update\", { shape: sel.asDict(), redraw: true, temporary: false });\n                    }\n                    layer.invalidate(false);\n                }\n                if (this.mode === SelectOperations.Resize) {\n                    if (gameStore.useGrid && !e.altKey) {\n                        sel.resizeToGrid();\n                    }\n                    if (sel !== this.selectionHelper) {\n                        if (sel.visionObstruction) gameStore.recalculateBV();\n                        socket.emit(\"Shape.Update\", { shape: sel.asDict(), redraw: true, temporary: false });\n                    }\n                    layer.invalidate(false);\n                }\n            });\n        }\n        this.mode = SelectOperations.Noop;\n        this.active = false;\n    }\n    onContextMenu(event: MouseEvent) {\n        if (layerManager.getLayer() === undefined) {\n            console.log(\"No active layer!\");\n            return;\n        }\n        const layer = layerManager.getLayer()!;\n        const mouse = getMouse(event);\n        const globalMouse = l2g(mouse);\n\n        for (const shape of layer.selection) {\n            if (shape.contains(globalMouse)) {\n                layer.selection = [shape];\n                getRef<SelectionInfo>(\"selectionInfo\").shape = shape;\n                layer.invalidate(true);\n                (<any>this.$parent.$refs.shapecontext).open(event, shape);\n                return;\n            }\n        }\n        (<any>this.$refs.selectcontext).open(event);\n    }\n}\n","import { Ray, Vector } from \"@/game/geom\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { Shape } from \"@/game/shapes/shape\";\nimport { gameStore } from \"@/game/store\";\n\n// First go through each shape in the selection and see if the delta has to be truncated due to movement blockers\n\n// This is definitely super convoluted and inefficient but I was tired and really wanted the smooth wall sliding collision stuff to work\n// And it does now, so hey \\_()_/\nexport function calculateDelta(delta: Vector, sel: Shape, done?: string[]) {\n    if (done === undefined) done = [];\n    const ogSelBBox = sel.getBoundingBox();\n    const newSelBBox = ogSelBBox.offset(delta);\n    let refine = false;\n    for (const movementBlocker of gameStore.movementblockers) {\n        if (done.includes(movementBlocker)) continue;\n        const blocker = layerManager.UUIDMap.get(movementBlocker)!;\n        const blockerBBox = blocker.getBoundingBox();\n        let found = blockerBBox.intersectsWithInner(newSelBBox);\n        if (!found) {\n            // This is an edge case, precalculating the rays is not worth in this case.\n            const ray = Ray.fromPoints(ogSelBBox.topLeft.add(delta.normalize()), newSelBBox.topLeft);\n            const invDir = ray.direction.inverse();\n            const dirIsNegative = [invDir.x < 0, invDir.y < 0];\n            found = blockerBBox.intersectP(ray, invDir, dirIsNegative).hit;\n        }\n        // Check if the bounding box of our destination would intersect with the bounding box of the movementblocker\n        if (found) {\n            const bCenter = blockerBBox.center();\n            const sCenter = ogSelBBox.center();\n\n            const d = sCenter.subtract(bCenter);\n            const ux = new Vector(1, 0);\n            const uy = new Vector(0, 1);\n            let dx = d.dot(ux);\n            let dy = d.dot(uy);\n            if (dx > blockerBBox.w / 2) dx = blockerBBox.w / 2;\n            if (dx < -blockerBBox.w / 2) dx = -blockerBBox.w / 2;\n            if (dy > blockerBBox.h / 2) dy = blockerBBox.h / 2;\n            if (dy < -blockerBBox.h / 2) dy = -blockerBBox.h / 2;\n\n            // Closest point / intersection point between the two bboxes.  Not the delta intersect!\n            const p = bCenter.add(ux.multiply(dx)).add(uy.multiply(dy));\n\n            if (p.x === ogSelBBox.topLeft.x || p.x === ogSelBBox.topRight.x) delta = new Vector(0, delta.y);\n            else if (p.y === ogSelBBox.topLeft.y || p.y === ogSelBBox.botLeft.y) delta = new Vector(delta.x, 0);\n            else {\n                if (p.x < ogSelBBox.topLeft.x) delta = new Vector(p.x - ogSelBBox.topLeft.x, delta.y);\n                else if (p.x > ogSelBBox.topRight.x) delta = new Vector(p.x - ogSelBBox.topRight.x, delta.y);\n                else if (p.y < ogSelBBox.topLeft.y) delta = new Vector(delta.x, p.y - ogSelBBox.topLeft.y);\n                else if (p.y > ogSelBBox.botLeft.y) delta = new Vector(delta.x, p.y - ogSelBBox.botLeft.y);\n            }\n            refine = true;\n            done.push(movementBlocker);\n            break;\n        }\n    }\n    if (refine) delta = calculateDelta(delta, sel, done);\n    return delta;\n}\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./note.vue?vue&type=style&index=0&id=7a3669fd&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./note.vue?vue&type=style&index=0&id=7a3669fd&scoped=true&lang=css&\"","import { socket } from \"@/game/api/socket\";\nimport { gameStore } from \"@/game/store\";\n\nexport function sendClientOptions() {\n    socket.emit(\"Client.Options.Set\", {\n        locationOptions: {\n            panX: gameStore.panX,\n            panY: gameStore.panY,\n            zoomFactor: gameStore.zoomFactor,\n        },\n    });\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\nimport { Prop } from \"vue-property-decorator\";\n\nimport { AssetFile, AssetList } from \"@/core/comm/types\";\nimport { alphSort } from \"@/core/utils\";\n\n@Component({\n    name: \"asset-node\",\n})\nexport default class AssetNode extends Vue {\n    @Prop() asset!: AssetList;\n\n    showImage = null;\n    get folders(): string[] {\n        return Object.keys(this.asset)\n            .filter(el => ![\"__files\"].includes(el))\n            .sort(alphSort);\n    }\n\n    get files(): AssetFile[] {\n        if (this.asset.__files)\n            return (<AssetFile[]>this.asset.__files)\n                .concat()\n                .sort((a, b) => (a.name.toLowerCase() > b.name.toLowerCase() ? 1 : -1));\n        return [];\n    }\n\n    toggle(event: { target: HTMLElement }) {\n        // tslint:disable-next-line:prefer-for-of\n        for (let i = 0; i < event.target.children.length; i++) {\n            const el = <HTMLElement>event.target.children[i];\n            el.style.display = el.style.display === \"\" ? \"block\" : \"\";\n        }\n    }\n\n    dragStart(event: DragEvent, imageSource: string) {\n        if (event === null || event.dataTransfer === null) return;\n        const img = (<HTMLElement>event.target).querySelector(\".preview\")!;\n        event.dataTransfer.setDragImage(img, 0, 0);\n        event.dataTransfer.setData(\"text/plain\", imageSource);\n    }\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.visible)?_c('div',{staticClass:\"ContextMenu\",style:({left:_vm.left, top:_vm.top}),attrs:{\"tabindex\":\"-1\"},on:{\"blur\":function($event){_vm.$emit('close')}}},[_c('ul',[_vm._t(\"default\")],2)]):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"74f43d04-vue-loader-template\\\"}!../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./contextmenu.vue?vue&type=template&id=256dde9c&\"","// import Vuex from \"vuex\";\nimport { getModule, Module, Mutation, VuexModule } from \"vuex-module-decorators\";\n\nimport { Asset } from \"@/core/comm/types\";\nimport { rootStore } from \"@/store\";\n\nexport interface AssetState {\n    root: number;\n    files: number[];\n    folders: number[];\n    idMap: Map<number, Asset>;\n    selected: number[];\n}\n\n@Module({ dynamic: true, store: rootStore, name: \"assets\", namespaced: true })\nclass AssetStore extends VuexModule {\n    root = -1;\n    files: number[] = [];\n    folders: number[] = [];\n    idMap: Map<number, Asset> = new Map();\n    selected: number[] = [];\n\n    @Mutation\n    clear() {\n        this.folders = [];\n        this.files = [];\n    }\n\n    @Mutation\n    clearSelected() {\n        this.selected = [];\n    }\n\n    @Mutation\n    setRoot(root: number) {\n        this.root = root;\n    }\n\n    @Mutation\n    isFile(inode: number): boolean {\n        return this.files.includes(inode);\n    }\n}\n\nexport const assetStore = getModule(AssetStore);\n","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./edit_dialog.vue?vue&type=style&index=0&id=078b3b76&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./edit_dialog.vue?vue&type=style&index=0&id=078b3b76&scoped=true&lang=css&\"","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./contextmenu.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./contextmenu.vue?vue&type=script&lang=ts&\"","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\n\nimport ContextMenu from \"@/core/components/contextmenu.vue\";\nimport Initiative from \"@/game/ui/initiative.vue\";\n\nimport { getRef } from \"@/core/utils\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { Shape } from \"@/game/shapes/shape\";\nimport { gameStore } from \"@/game/store\";\n\n@Component({\n    components: {\n        ContextMenu,\n    },\n})\nexport default class ShapeContext extends Vue {\n    visible = false;\n    x = 0;\n    y = 0;\n    shape: Shape | null = null;\n    get activeLayer(): string {\n        const layer = layerManager.getLayer();\n        return layer === undefined ? \"\" : layer.name;\n    }\n    open(event: MouseEvent, shape: Shape) {\n        this.visible = true;\n        this.x = event.pageX;\n        this.y = event.pageY;\n        this.shape = shape;\n        this.$nextTick(() => this.$children[0].$el.focus());\n    }\n    close() {\n        this.visible = false;\n        this.shape = null;\n    }\n    getLayers() {\n        return layerManager.layers.filter(l => l.selectable && (gameStore.IS_DM || l.playerEditable));\n    }\n    getActiveLayer() {\n        return layerManager.getLayer();\n    }\n    getInitiativeWord() {\n        if (this.shape === null) return \"\";\n        return getRef<Initiative>(\"initiative\").contains(this.shape.uuid) ? \"Show\" : \"Add\";\n    }\n    setLayer(newLayer: string) {\n        if (this.shape === null) return;\n        this.shape.moveLayer(newLayer, true);\n        this.close();\n    }\n    moveToBack() {\n        if (this.shape === null) return;\n        const layer = this.getActiveLayer()!;\n        layer.moveShapeOrder(this.shape, 0, true);\n        this.close();\n    }\n    moveToFront() {\n        if (this.shape === null) return;\n        const layer = this.getActiveLayer()!;\n        layer.moveShapeOrder(this.shape, layer.shapes.length - 1, true);\n        this.close();\n    }\n    addInitiative() {\n        if (this.shape === null) return;\n        const initiative = getRef<Initiative>(\"initiative\");\n        if (!initiative.contains(this.shape.uuid)) initiative.addInitiative(this.shape.getInitiativeRepr());\n        initiative.visible = true;\n        this.close();\n    }\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.shape !== null)?_c('div',[_c('div',{attrs:{\"id\":\"selection-menu\"}},[_c('div',{attrs:{\"id\":\"selection-edit-button\"},on:{\"click\":_vm.openEditDialog}},[_c('i',{staticClass:\"fas fa-edit\"})]),_c('div',{attrs:{\"id\":\"selection-name\"}},[_vm._v(_vm._s(_vm.shape.name))]),_c('div',{attrs:{\"id\":\"selection-trackers\"}},[_vm._l((_vm.shape.trackers),function(tracker){return (tracker.name !== '' || tracker.value !== 0)?[_c('div',{key:'name-' + tracker.uuid},[_vm._v(_vm._s(tracker.name))]),_c('div',{key:'value-' + tracker.uuid,staticClass:\"selection-tracker-value\",on:{\"click\":function($event){_vm.changeValue(tracker, false)}}},[(tracker.maxvalue === 0)?[_vm._v(_vm._s(tracker.value))]:[_vm._v(_vm._s(tracker.value)+\" / \"+_vm._s(tracker.maxvalue))]],2)]:_vm._e()})],2),_c('div',{attrs:{\"id\":\"selection-auras\"}},[_vm._l((_vm.shape.auras),function(aura){return (aura.name !== '' || aura.value !== 0)?[_c('div',{key:'name-' + aura.uuid},[_vm._v(_vm._s(aura.name))]),_c('div',{key:'value-' + aura.uuid,staticClass:\"selection-tracker-value\",on:{\"click\":function($event){_vm.changeValue(aura, true)}}},[(aura.dim === 0)?[_vm._v(_vm._s(aura.value))]:[_vm._v(_vm._s(aura.value)+\" / \"+_vm._s(aura.dim))]],2)]:_vm._e()})],2)]),_c('edit-dialog',{ref:\"editDialog\",attrs:{\"shape\":_vm.shape}})],1):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"74f43d04-vue-loader-template\\\"}!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./selection_info.vue?vue&type=template&id=32cec914&scoped=true&\"","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./map.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./map.vue?vue&type=script&lang=ts&\"","import { Layer } from \"@/game/layers/layer\";\nimport { gameStore } from \"@/game/store\";\n\nexport class GridLayer extends Layer {\n    invalidate(): void {\n        this.valid = false;\n    }\n    draw(doClear?: boolean): void {\n        if (!this.valid) {\n            this.drawGrid();\n        }\n    }\n    drawGrid(): void {\n        const ctx = this.ctx;\n        this.clear();\n        ctx.beginPath();\n\n        const gs = gameStore.gridSize;\n\n        for (let i = 0; i < this.width; i += gs * gameStore.zoomFactor) {\n            ctx.moveTo(i + (gameStore.panX % gs) * gameStore.zoomFactor, 0);\n            ctx.lineTo(i + (gameStore.panX % gs) * gameStore.zoomFactor, this.height);\n            ctx.moveTo(0, i + (gameStore.panY % gs) * gameStore.zoomFactor);\n            ctx.lineTo(this.width, i + (gameStore.panY % gs) * gameStore.zoomFactor);\n        }\n\n        ctx.strokeStyle = gameStore.gridColour;\n        ctx.lineWidth = 1;\n        ctx.stroke();\n        this.valid = true;\n    }\n}\n","import Vue from \"vue\";\nimport Vuex from \"vuex\";\n\nimport { AssetState } from \"@/assetManager/store\";\nimport { CoreState } from \"@/core/store\";\nimport { GameState } from \"@/game/store\";\n\nVue.use(Vuex);\n\nexport interface RootState {\n    assets: AssetState;\n    core: CoreState;\n    game: GameState;\n}\n\nexport const rootStore = new Vuex.Store<RootState>({});\n","import { render, staticRenderFns } from \"./colorpicker.vue?vue&type=template&id=b4f2c0b0&scoped=true&\"\nimport script from \"./colorpicker.vue?vue&type=script&lang=ts&\"\nexport * from \"./colorpicker.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./colorpicker.vue?vue&type=style&index=0&id=b4f2c0b0&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"b4f2c0b0\",\n  null\n  \n)\n\ncomponent.options.__file = \"colorpicker.vue\"\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('router-view',{ref:\"activeComponent\"})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=196415f0&\"\nvar script = {}\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"App.vue\"\nexport default component.exports","import { GlobalPoint, Ray } from \"@/game/geom\";\nimport { Layer } from \"@/game/layers/layer\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { Settings } from \"@/game/settings\";\nimport { Circle } from \"@/game/shapes/circle\";\nimport { Shape } from \"@/game/shapes/shape\";\nimport { gameStore } from \"@/game/store\";\nimport { g2l, g2lr, g2lx, g2ly, g2lz, getUnitDistance } from \"@/game/units\";\nimport { getFogColour } from \"@/game/utils\";\n\nexport class FOWLayer extends Layer {\n    isVisionLayer: boolean = true;\n    preFogShapes: Shape[] = [];\n\n    addShape(shape: Shape, sync: boolean, temporary?: boolean): void {\n        super.addShape(shape, sync, temporary);\n        if (shape.options.has(\"preFogShape\") && shape.options.get(\"preFogShape\")) {\n            this.preFogShapes.push(shape);\n        }\n    }\n\n    removeShape(shape: Shape, sync: boolean, temporary?: boolean) {\n        if (shape.options.has(\"preFogShape\") && shape.options.get(\"preFogShape\")) {\n            const idx = this.preFogShapes.findIndex(s => s.uuid === shape.uuid);\n            this.preFogShapes.splice(idx, 1);\n        }\n        super.removeShape(shape, sync, temporary);\n    }\n\n    draw(): void {\n        if (!this.valid) {\n            const ctx = this.ctx;\n\n            if (Settings.skipLightFOW) {\n                ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n                this.valid = true;\n                return;\n            }\n\n            const originalOperation = ctx.globalCompositeOperation;\n            ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n\n            ctx.fillStyle = \"rgba(0, 0, 0, 1)\";\n\n            const dctx = layerManager.getLayer(\"draw\")!.ctx;\n            if (Settings.drawAngleLines || Settings.drawFirstLightHit) {\n                dctx.clearRect(0, 0, dctx.canvas.width, dctx.canvas.height);\n            }\n\n            // At all times provide a minimal vision range to prevent losing your tokens in fog.\n            if (gameStore.fullFOW && layerManager.hasLayer(\"tokens\")) {\n                layerManager.getLayer(\"tokens\")!.shapes.forEach(sh => {\n                    if (!sh.ownedBy() || !sh.isToken) return;\n                    const bb = sh.getBoundingBox();\n                    const lcenter = g2l(sh.center());\n                    const alm = 0.8 * g2lz(bb.w);\n                    ctx.beginPath();\n                    ctx.arc(lcenter.x, lcenter.y, alm, 0, 2 * Math.PI);\n                    const gradient = ctx.createRadialGradient(lcenter.x, lcenter.y, alm / 2, lcenter.x, lcenter.y, alm);\n                    gradient.addColorStop(0, \"rgba(0, 0, 0, 1)\");\n                    gradient.addColorStop(1, \"rgba(0, 0, 0, 0)\");\n                    ctx.fillStyle = gradient;\n                    ctx.fill();\n                });\n            }\n\n            // First cut out all the light sources\n            for (const light of gameStore.visionSources) {\n                const shape = layerManager.UUIDMap.get(light.shape);\n                if (shape === undefined) continue;\n                const aura = shape.auras.find(a => a.uuid === light.aura);\n                if (aura === undefined) continue;\n\n                const auraLength = getUnitDistance(aura.value + aura.dim);\n                const center = shape.center();\n                const lcenter = g2l(center);\n\n                const auraCircle = new Circle(center, auraLength);\n                if (!auraCircle.visibleInCanvas(ctx.canvas)) continue;\n\n                let lastArcAngle = -1;\n\n                const path = new Path2D();\n                path.moveTo(lcenter.x, lcenter.y);\n                let firstPoint: GlobalPoint;\n\n                for (let angle = 0; angle < 2 * Math.PI; angle += (Settings.angleSteps / 180) * Math.PI) {\n                    const anglePoint = new GlobalPoint(\n                        center.x + auraLength * Math.cos(angle),\n                        center.y + auraLength * Math.sin(angle),\n                    );\n                    if (Settings.drawAngleLines) {\n                        dctx!.beginPath();\n                        dctx!.moveTo(g2lx(center.x), g2ly(center.y));\n                        dctx!.lineTo(g2lx(anglePoint.x), g2ly(anglePoint.y));\n                        dctx!.stroke();\n                    }\n\n                    // Check if there is a hit with one of the nearby light blockers.\n                    const lightRay = Ray.fromPoints(center, anglePoint);\n                    const hitResult = gameStore.BV.intersect(lightRay);\n\n                    if (angle === 0) firstPoint = hitResult.hit ? hitResult.intersect : anglePoint;\n\n                    // We can move on to the next angle if nothing was hit.\n                    if (!hitResult.hit) {\n                        // If an earlier hit caused the aura to leave the arc, we need to go back to the arc\n                        if (lastArcAngle === -1) {\n                            // Set the start of a new arc beginning at the current angle\n                            lastArcAngle = angle;\n                            // Draw a line from the last non arc location back to the arc\n                            const dest = g2l(anglePoint);\n                            ctx.lineTo(dest.x, dest.y);\n                        }\n                        continue;\n                    }\n                    // If hit , first finish any ongoing arc, then move to the intersection point\n                    if (lastArcAngle !== -1) {\n                        path.arc(lcenter.x, lcenter.y, g2lr(aura.value + aura.dim), lastArcAngle, angle);\n                        lastArcAngle = -1;\n                    }\n                    path.lineTo(g2lx(hitResult.intersect.x), g2ly(hitResult.intersect.y));\n                }\n\n                // Finish the final arc.\n                if (lastArcAngle === -1) path.lineTo(g2lx(firstPoint!.x), g2ly(firstPoint!.y));\n                else path.arc(lcenter.x, lcenter.y, g2lr(aura.value + aura.dim), lastArcAngle, 2 * Math.PI);\n\n                if (gameStore.fullFOW) {\n                    if (aura.dim > 0) {\n                        // Fill the light aura with a radial dropoff towards the outside.\n                        const gradient = ctx.createRadialGradient(\n                            lcenter.x,\n                            lcenter.y,\n                            g2lr(aura.value),\n                            lcenter.x,\n                            lcenter.y,\n                            g2lr(aura.value + aura.dim),\n                        );\n                        gradient.addColorStop(0, \"rgba(0, 0, 0, 1)\");\n                        gradient.addColorStop(1, \"rgba(0, 0, 0, 0)\");\n                        ctx.fillStyle = gradient;\n                    } else {\n                        ctx.fillStyle = \"rgba(0, 0, 0, 1)\";\n                    }\n                    ctx.fill(path);\n                }\n\n                aura.lastPath = path;\n            }\n\n            // At the DM Side due to opacity of the two fow layers, it looks strange if we just render them on top of eachother like players.\n            if (gameStore.fowLOS) {\n                ctx.globalCompositeOperation = \"source-in\";\n                ctx.drawImage(layerManager.getLayer(\"fow-players\")!.canvas, 0, 0);\n            }\n\n            for (const preShape of this.preFogShapes) {\n                if (!preShape.visibleInCanvas(this.canvas)) continue;\n                const ogComposite = preShape.globalCompositeOperation;\n                if (!gameStore.fullFOW) {\n                    if (preShape.globalCompositeOperation === \"source-over\")\n                        preShape.globalCompositeOperation = \"destination-out\";\n                    else if (preShape.globalCompositeOperation === \"destination-out\")\n                        preShape.globalCompositeOperation = \"source-over\";\n                }\n                preShape.draw(ctx);\n                preShape.globalCompositeOperation = ogComposite;\n            }\n\n            if (gameStore.fullFOW) {\n                ctx.globalCompositeOperation = \"source-out\";\n                ctx.fillStyle = getFogColour();\n                ctx.fillRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n            }\n\n            super.draw(false);\n\n            ctx.globalCompositeOperation = originalOperation;\n        }\n    }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./load.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./load.vue?vue&type=script&lang=ts&\"","import { ServerCircle } from \"@/game/comm/types/shapes\";\nimport { GlobalPoint, LocalPoint, Vector } from \"@/game/geom\";\nimport { BoundingRect } from \"@/game/shapes/boundingrect\";\nimport { Shape } from \"@/game/shapes/shape\";\nimport { gameStore } from \"@/game/store\";\nimport { calculateDelta } from \"@/game/ui/tools/utils\";\nimport { g2l, g2lz, l2g } from \"@/game/units\";\nimport { getFogColour } from \"@/game/utils\";\n\nexport class Circle extends Shape {\n    type = \"circle\";\n    r: number;\n    constructor(center: GlobalPoint, r: number, fillColour?: string, strokeColour?: string, uuid?: string) {\n        super(center, fillColour, strokeColour, uuid);\n        this.r = r || 1;\n    }\n    asDict(): ServerCircle {\n        // const base = <ServerCircle>this.getBaseDict();\n        // base.r = this.r;\n        // base.border = this.border;\n        // return base;\n        return Object.assign(this.getBaseDict(), {\n            radius: this.r,\n        });\n    }\n    fromDict(data: ServerCircle) {\n        super.fromDict(data);\n        this.r = data.radius;\n    }\n    getBoundingBox(): BoundingRect {\n        return new BoundingRect(\n            new GlobalPoint(this.refPoint.x - this.r, this.refPoint.y - this.r),\n            this.r * 2,\n            this.r * 2,\n        );\n    }\n\n    get points() {\n        return this.getBoundingBox().points;\n    }\n\n    draw(ctx: CanvasRenderingContext2D) {\n        super.draw(ctx);\n        ctx.beginPath();\n        if (this.fillColour === \"fog\") ctx.fillStyle = getFogColour();\n        else ctx.fillStyle = this.fillColour;\n        const loc = g2l(this.refPoint);\n        ctx.arc(loc.x, loc.y, g2lz(this.r), 0, 2 * Math.PI);\n        ctx.fill();\n        if (this.strokeColour !== \"rgba(0, 0, 0, 0)\") {\n            ctx.beginPath();\n            ctx.lineWidth = g2lz(5);\n            ctx.strokeStyle = this.strokeColour;\n            ctx.arc(loc.x, loc.y, g2lz(this.r), 0, 2 * Math.PI);\n            ctx.stroke();\n        }\n    }\n    contains(point: GlobalPoint): boolean {\n        return (point.x - this.refPoint.x) ** 2 + (point.y - this.refPoint.y) ** 2 < this.r ** 2;\n    }\n    inCorner(point: GlobalPoint, corner: string) {\n        return false; // TODO\n    }\n    getCorner(point: GlobalPoint) {\n        if (this.inCorner(point, \"ne\")) return \"ne\";\n        else if (this.inCorner(point, \"nw\")) return \"nw\";\n        else if (this.inCorner(point, \"se\")) return \"se\";\n        else if (this.inCorner(point, \"sw\")) return \"sw\";\n    }\n    center(): GlobalPoint;\n    center(centerPoint: GlobalPoint): void;\n    center(centerPoint?: GlobalPoint): GlobalPoint | void {\n        if (centerPoint === undefined) return this.refPoint;\n        this.refPoint = centerPoint;\n    }\n    visibleInCanvas(canvas: HTMLCanvasElement): boolean {\n        return true;\n    } // TODO\n    snapToGrid() {\n        const gs = gameStore.gridSize;\n        let targetX;\n        let targetY;\n        if (((2 * this.r) / gs) % 2 === 0) {\n            targetX = Math.round(this.refPoint.x / gs) * gs;\n        } else {\n            targetX = Math.round((this.refPoint.x - gs / 2) / gs) * gs + this.r;\n        }\n        if (((2 * this.r) / gs) % 2 === 0) {\n            targetY = Math.round(this.refPoint.y / gs) * gs;\n        } else {\n            targetY = Math.round((this.refPoint.y - gs / 2) / gs) * gs + this.r;\n        }\n        const delta = calculateDelta(new Vector(targetX - this.refPoint.x, targetY - this.refPoint.y), this);\n        this.refPoint = this.refPoint.add(delta);\n        this.invalidate(false);\n    }\n    resizeToGrid() {\n        const gs = gameStore.gridSize;\n        this.r = Math.max(Math.round(this.r / gs) * gs, gs / 2);\n        this.invalidate(false);\n    }\n    resize(resizedir: string, point: LocalPoint) {\n        const z = gameStore.zoomFactor;\n        const diff = l2g(point).subtract(this.refPoint);\n        this.r = Math.sqrt(Math.pow(diff.length(), 2) / 2);\n    }\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Tool from \"@/game/ui/tools/tool.vue\";\n\nimport { GlobalPoint } from \"@/game/geom\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { BaseRect } from \"@/game/shapes/baserect\";\nimport { Rect } from \"@/game/shapes/rect\";\nimport { gameStore } from \"@/game/store\";\nimport { l2g } from \"@/game/units\";\nimport { getMouse } from \"@/game/utils\";\nimport Component from \"vue-class-component\";\n\n@Component\nexport default class MapTool extends Tool {\n    name = \"Map\";\n    active = false;\n    xCount = 3;\n    yCount = 3;\n    startPoint: GlobalPoint | null = null;\n    rect: Rect | null = null;\n\n    onMouseDown(event: MouseEvent) {\n        const layer = layerManager.getLayer();\n        if (layer === undefined) {\n            console.log(\"No active layer!\");\n            return;\n        }\n        this.active = true;\n\n        this.startPoint = l2g(getMouse(event));\n        this.rect = new Rect(this.startPoint.clone(), 0, 0, \"rgba(0,0,0,0)\", \"black\");\n        layer.addShape(this.rect, false, false);\n    }\n    onMouseMove(event: MouseEvent) {\n        if (!this.active || this.rect === null || this.startPoint === null) return;\n        const layer = layerManager.getLayer();\n        if (layer === undefined) {\n            console.log(\"No active layer!\");\n            return;\n        }\n\n        const endPoint = l2g(getMouse(event));\n\n        this.rect.w = Math.abs(endPoint.x - this.startPoint.x);\n        this.rect.h = Math.abs(endPoint.y - this.startPoint.y);\n        this.rect.refPoint.x = Math.min(this.startPoint.x, endPoint.x);\n        this.rect.refPoint.y = Math.min(this.startPoint.y, endPoint.y);\n        layer.invalidate(false);\n    }\n    onMouseUp(event: MouseEvent) {\n        if (!this.active || this.rect === null) return;\n        const layer = layerManager.getLayer();\n        if (layer === undefined) {\n            console.log(\"No active layer!\");\n            return;\n        }\n        this.active = false;\n\n        if (layer.selection.length !== 1) {\n            layer.removeShape(this.rect, false, false);\n            return;\n        }\n\n        const w = this.rect.w;\n        const h = this.rect.h;\n        const sel = layer.selection[0];\n\n        if (sel instanceof BaseRect) {\n            sel.w *= (this.xCount * gameStore.gridSize) / w;\n            sel.h *= (this.yCount * gameStore.gridSize) / h;\n        }\n\n        layer.removeShape(this.rect, false, false);\n    }\n}\n","import { render, staticRenderFns } from \"./load.vue?vue&type=template&id=ff095222&\"\nimport script from \"./load.vue?vue&type=script&lang=ts&\"\nexport * from \"./load.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"load.vue\"\nexport default component.exports","import Tool from \"@/game/ui/tools/tool.vue\";\n\nimport { sendClientOptions } from \"@/game/api/utils\";\nimport { LocalPoint } from \"@/game/geom\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { gameStore } from \"@/game/store\";\nimport { getMouse } from \"@/game/utils\";\nimport Component from \"vue-class-component\";\n\n@Component\nexport default class PanTool extends Tool {\n    name = \"Pan\";\n    panStart = new LocalPoint(0, 0);\n    active = false;\n\n    onMouseDown(event: MouseEvent) {\n        this.panStart = getMouse(event);\n        this.active = true;\n    }\n    onMouseMove(event: MouseEvent) {\n        if (!this.active) return;\n        const mouse = getMouse(event);\n        const distance = mouse.subtract(this.panStart).multiply(1 / gameStore.zoomFactor);\n        gameStore.increasePanX(Math.round(distance.x));\n        gameStore.increasePanY(Math.round(distance.y));\n        this.panStart = mouse;\n        layerManager.invalidate();\n    }\n    onMouseUp(event: MouseEvent) {\n        this.active = false;\n        sendClientOptions();\n    }\n}\n","import { render, staticRenderFns } from \"./selectcontext.vue?vue&type=template&id=44a31e42&scoped=true&\"\nimport script from \"./selectcontext.vue?vue&type=script&lang=ts&\"\nexport * from \"./selectcontext.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./selectcontext.vue?vue&type=style&index=0&id=44a31e42&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"44a31e42\",\n  null\n  \n)\n\ncomponent.options.__file = \"selectcontext.vue\"\nexport default component.exports","import Vue from \"vue\";\n\nimport { app } from \"@/main\";\n\n// Reference: https://stackoverflow.com/questions/105034/create-guid-uuid-in-javascript\nexport function uuidv4() {\n    return \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g, c => {\n        const r = (Math.random() * 16) | 0;\n        const v = c === \"x\" ? r : (r & 0x3) | 0x8;\n        return v.toString(16);\n    });\n}\n\nexport function capitalize(text: string) {\n    return text.charAt(0).toUpperCase() + text.slice(1);\n}\n\nexport function alphSort(a: string, b: string) {\n    if (a.toLowerCase() < b.toLowerCase()) return -1;\n    else return 1;\n}\n\nexport function getHTMLFont(element: HTMLElement) {\n    let font = element.style.font;\n    while (font === null && element.parentElement !== null) {\n        element = element.parentElement;\n        font = element.style.font;\n    }\n    if (font === null) font = window.getComputedStyle(document.body).getPropertyValue(\"font\");\n    return font;\n}\n\nexport function getHTMLTextWidth(text: string, font: string): number {\n    let fakeElement = <HTMLCanvasElement>document.getElementById(\"emptycanvas\");\n    if (fakeElement === null) {\n        fakeElement = document.createElement(\"canvas\");\n        fakeElement.id = \"emptycanvas\";\n        fakeElement.style.display = \"\";\n        document.body.appendChild(fakeElement);\n    }\n    const ctx = fakeElement.getContext(\"2d\")!;\n    ctx.font = font;\n    return Math.ceil(ctx.measureText(text).width);\n}\n\nexport function partition<T>(arr: T[], predicate: (n: T) => boolean) {\n    const ret: T[][] = [[], []];\n    arr.forEach(n => (predicate(n) ? ret[1].push(n) : ret[0].push(n)));\n    return ret;\n}\n\nexport function calcFontScale(ctx: CanvasRenderingContext2D, text: string, width: number, height: number) {\n    const points = Number(ctx.font.split(\"px\")[0]) * 0.2;\n    const fontWidth = ctx.measureText(text).width;\n    return Math.min(width / fontWidth, height / points);\n}\n\nexport function fixedEncodeURIComponent(str: string) {\n    return encodeURIComponent(str).replace(/[!'()*]/g, c => {\n        return \"%\" + c.charCodeAt(0).toString(16);\n    });\n}\n\nexport class OrderedMap<K, V> {\n    keys: K[] = [];\n    values: V[] = [];\n\n    get length() {\n        return this.keys.length;\n    }\n\n    get(key: K) {\n        return this.values[this.keys.indexOf(key)];\n    }\n    getIndexValue(idx: number) {\n        return this.values[idx];\n    }\n    getIndexKey(idx: number) {\n        return this.keys[idx];\n    }\n    set(key: K, value: V) {\n        this.keys.push(key);\n        this.values.push(value);\n    }\n    has(key: K) {\n        return this.indexOf(key) >= 0;\n    }\n    indexOf(element: K) {\n        return this.keys.indexOf(element);\n    }\n    remove(element: K) {\n        const idx = this.indexOf(element);\n        this.keys.splice(idx, 1);\n        this.values.splice(idx, 1);\n    }\n}\n\nexport function getComponent<T extends Vue>(): T {\n    return <T>app.$children[0].$refs.activeComponent;\n}\n\nexport function getRef<T extends Vue>(ref: string): T {\n    const active = <Vue>app.$children[0].$refs.activeComponent;\n    return <T>active.$refs[ref];\n}\n","import { render, staticRenderFns } from \"./contextMenu.vue?vue&type=template&id=d4f084a4&\"\nimport script from \"./contextMenu.vue?vue&type=script&lang=ts&\"\nexport * from \"./contextMenu.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"contextMenu.vue\"\nexport default component.exports","import { EdgeCirculator, Point, Sign, Triangle, Vertex } from \"./tds\";\n\ntype Line = number[];\n\nexport function cw(index: number) {\n    return (index + 2) % 3;\n}\n\nexport function ccw(index: number) {\n    return (index + 1) % 3;\n}\n\nexport function edgeInfo(va: Vertex, vb: Vertex) {\n    const ec = new EdgeCirculator(va, null);\n    if (ec.valid) {\n        do {\n            const indv = 3 - ec.t!.indexV(va) - ec.ri;\n            const v = ec.t!.vertices[indv]!;\n            if (!v.infinite) {\n                if (v === vb) {\n                    return { includes: true, vi: vb, fr: ec.t!, i: ec.ri };\n                } else {\n                    const orient = orientation(va.point!, vb.point!, v.point!);\n                    if (orient === Sign.COLLINEAR && collinearBetween(va.point!, v.point!, vb.point!)) {\n                        return { includes: true, vi: v, fr: ec.t!, i: ec.ri };\n                    }\n                }\n            }\n        } while (ec.next());\n    }\n    return { includes: false };\n}\n\nexport function collinearBetween(p: Point, q: Point, r: Point): boolean {\n    let cPQ: Sign;\n    let cQR: Sign;\n    if (compare(0, p, r) === Sign.EQUAL) {\n        cPQ = compare(1, p, q);\n        cQR = compare(1, q, r);\n    } else {\n        cPQ = compare(0, p, q);\n        cQR = compare(0, q, r);\n    }\n    return (cPQ === Sign.SMALLER && cQR === Sign.SMALLER) || (cPQ === Sign.LARGER && cQR === Sign.LARGER);\n}\n\nfunction compare(index: number, a: Point, b: Point): Sign {\n    if (a[index] < b[index]) return Sign.SMALLER;\n    if (a[index] > b[index]) return Sign.LARGER;\n    return Sign.EQUAL;\n}\n\nexport function orientation(p: Point, q: Point, r: Point) {\n    const px = p[0];\n    const py = p[1];\n    const qx = q[0];\n    const qy = q[1];\n    const rx = r[0];\n    const ry = r[1];\n    const pqx = qx - px;\n    const pqy = qy - py;\n    const prx = rx - px;\n    const pry = ry - py;\n    const det = determinant(pqx, pqy, prx, pry);\n    let maxX = Math.abs(pqx);\n    let maxY = Math.abs(pqy);\n    const aprX = Math.abs(prx);\n    const aprY = Math.abs(pry);\n    if (maxX < aprX) maxX = aprX;\n    if (maxY < aprY) maxY = aprY;\n    if (maxX > maxY) [maxX, maxY] = [maxY, maxX];\n    // underflow proection in eps computation?? Math.sqrt(Number.MIN_VALUE, Number.EPSILON)\n    if (maxX < 2e-162 && maxX === 0) {\n        return Sign.ZERO;\n    }\n    // overflow protection in det computation\n    if (maxY < 1e153) {\n        const eps = Number.EPSILON * maxX * maxY;\n        if (det > eps) return Sign.POSITIVE;\n        if (det < -eps) return Sign.NEGATIVE;\n    }\n    return Sign.ZERO;\n}\n\nexport function determinant(a00: number, a01: number, a10: number, a11: number) {\n    return a00 * a11 - a01 * a10;\n}\n\nexport function hasInexactNegativeOrientation(p: Point, q: Point, r: Point) {\n    return determinant(q[0] - p[0], q[1] - p[1], r[0] - p[0], r[1] - p[1]) < 0;\n}\n\nexport function sideOfOrientedCircle(t: Triangle, p: Point, perturb: boolean): Sign {\n    if (!t.isInfinite())\n        return sideOfOrientedCircleP(t.vertices[0]!.point!, t.vertices[1]!.point!, t.vertices[2]!.point!, p, perturb);\n    throw new Error(\"SSS\");\n}\n\nfunction sideOfOrientedCircleP(p0: Point, p1: Point, p2: Point, p: Point, perturb: boolean): Sign {\n    const os = getOrientedSide(p0, p1, p2, p);\n    if (os !== Sign.ON_ORIENTED_BOUNDARY || !perturb) return os;\n    const points = [p0, p1, p2, p];\n    points.sort((a, b) => a[0] - b[0] || a[1] - b[1]);\n    for (const point of points.reverse()) {\n        if (point === p) return Sign.ON_NEGATIVE_SIDE;\n        let o = orientation(p0, p1, p);\n        if (point === p2 && o !== Sign.COLLINEAR) return o;\n        o = orientation(p0, p, p2);\n        if (point === p1 && o !== Sign.COLLINEAR) return o;\n        o = orientation(p, p1, p2);\n        if (point === p0 && o !== Sign.COLLINEAR) return o;\n    }\n    return Sign.ON_NEGATIVE_SIDE;\n}\n\nexport function xyEqual(p: Point, q: Point) {\n    return p[0] === q[0] && p[1] === q[1];\n}\n\nexport function xySmaller(p: Point, q: Point) {\n    return p[0] <= q[0] && p[1] <= q[1];\n}\n\nexport function xyCompare(p: Point, q: Point) {\n    if (xySmaller(p, q)) return Sign.SMALLER;\n    if (xyEqual(p, q)) return Sign.EQUAL;\n    return Sign.LARGER;\n}\n\nfunction getOrientedSide(p: Point, q: Point, r: Point, t: Point): Sign {\n    const qpx = q[0] - p[0];\n    const qpy = q[1] - p[1];\n    const rpx = r[0] - p[0];\n    const rpy = r[1] - p[1];\n    const tpx = t[0] - p[0];\n    const tpy = t[1] - p[1];\n    const tqx = t[0] - q[0];\n    const tqy = t[1] - q[1];\n    const rqx = r[0] - q[0];\n    const rqy = r[1] - q[1];\n\n    const det = determinant(qpx * tpy - qpy * tpx, tpx * tqx + tpy * tqy, qpx * rpy - qpy * rpx, rpx * rqx + rpy * rqy);\n    let maxx = Math.abs(qpx);\n    let maxy = Math.abs(qpy);\n    const arpx = Math.abs(rpx);\n    const arpy = Math.abs(rpy);\n    const atqx = Math.abs(tqx);\n    const atqy = Math.abs(tqy);\n    const atpx = Math.abs(tpx);\n    const atpy = Math.abs(tpy);\n    const arqx = Math.abs(rqx);\n    const arqy = Math.abs(rqy);\n\n    if (maxx < arpx) maxx = arpx;\n    if (maxx < atpx) maxx = atpx;\n    if (maxx < atqx) maxx = atqx;\n    if (maxx < arqx) maxx = arqx;\n\n    if (maxy < arpy) maxy = arpy;\n    if (maxy < atpy) maxy = atpy;\n    if (maxy < atqy) maxy = atqy;\n    if (maxy < arqy) maxy = arqy;\n\n    if (maxx > maxy) [maxx, maxy] = [maxy, maxx];\n\n    if (maxx < 1e-73 && maxx === 0) return Sign.ON_ORIENTED_BOUNDARY;\n    // sqrt(sqrt(max_double/16\n    else if (maxy < 1e76) {\n        const eps = Number.EPSILON * maxx * maxy * (maxy * maxy);\n        if (det > eps) return Sign.ON_POSITIVE_SIDE;\n        if (det < -eps) return Sign.ON_NEGATIVE_SIDE;\n    }\n\n    return Sign.ZERO;\n}\n\nfunction segSegDoIntersectCrossing(p1: Point, p2: Point, p3: Point, p4: Point): boolean {\n    switch (orientation(p1, p2, p3)) {\n        case Sign.LEFT_TURN:\n            return orientation(p3, p4, p2) !== Sign.RIGHT_TURN;\n        case Sign.RIGHT_TURN:\n            return orientation(p3, p4, p2) !== Sign.LEFT_TURN;\n        case Sign.COLLINEAR:\n            return true;\n    }\n}\n\nfunction segSegDoIntersectContained(p1: Point, p2: Point, p3: Point, p4: Point): boolean {\n    switch (orientation(p1, p2, p3)) {\n        case Sign.LEFT_TURN:\n            return orientation(p1, p2, p4) !== Sign.LEFT_TURN;\n        case Sign.RIGHT_TURN:\n            return orientation(p1, p2, p4) !== Sign.RIGHT_TURN;\n        case Sign.COLLINEAR:\n            return true;\n    }\n}\n\nexport function intersection(pa: Point, pb: Point, pc: Point, pd: Point) {\n    const i = getIntersectionType(pa, pb, pc, pd);\n    switch (i.intersectionType) {\n        case IntersectionType.POINT:\n            return i.point!;\n        case IntersectionType.NO_INTERSECTION:\n            return null;\n    }\n    throw new Error(\"sdfgighowen\");\n}\n\nenum IntersectionType {\n    NO_INTERSECTION,\n    POINT,\n    SEGMENT,\n}\n\nfunction getLine(p0: Point, p1: Point): Line {\n    if (p0[0] === p1[0]) return [1, 0, -p0[0]];\n    if (p0[1] === p1[1]) return [0, 1, -p0[1]];\n    const x = p1[0] - p0[0];\n    const y = p1[1] - p0[1];\n    return [-y, x, -x + y];\n}\n\nfunction getIntersectionType(pa: Point, pb: Point, pc: Point, pd: Point) {\n    if (!doIntersect(pa, pb, pc, pd)) return { intersectionType: IntersectionType.NO_INTERSECTION, point: null };\n    const l1 = getLine(pa, pb);\n    const l2 = getLine(pc, pd);\n    const info = getIntersectionTypeLine(l1, l2);\n    switch (info.intersectionType) {\n        case IntersectionType.POINT: {\n            return info;\n        }\n    }\n    throw new Error(\"gzseuihgpib\");\n}\n\nfunction getIntersectionTypeLine(la: Line, lb: Line) {\n    const denom = la[0] * lb[1] - lb[0] * la[1];\n    const nom1 = la[1] * lb[2] - lb[1] * la[2];\n    const nom2 = lb[0] * la[2] - la[0] * lb[2];\n    return {\n        intersectionType: IntersectionType.POINT,\n        point: [nom1 / denom, nom2 / denom],\n    };\n}\n\nfunction doIntersect(A1: Point, A2: Point, B1: Point, B2: Point): boolean {\n    if (xySmaller(A1, A2)) {\n        if (xySmaller(B1, B2)) {\n            if (xySmaller(A2, B1) || xySmaller(B2, A1)) return false;\n        } else {\n            if (xySmaller(A2, B2) || xySmaller(B1, A1)) return false;\n        }\n    } else {\n        if (xySmaller(B1, B2)) {\n            if (xySmaller(A1, B1) || xySmaller(B2, A2)) return false;\n        } else {\n            if (xySmaller(A1, B2) || xySmaller(B1, A2)) return false;\n        }\n    }\n    if (xySmaller(A1, A2)) {\n        if (xySmaller(B1, B2)) {\n            switch (xyCompare(A1, B1)) {\n                case Sign.SMALLER: {\n                    switch (xyCompare(A2, B1)) {\n                        case Sign.SMALLER:\n                            return false;\n                        case Sign.EQUAL:\n                            return true;\n                        default: {\n                            switch (xyCompare(A2, B2)) {\n                                case Sign.SMALLER:\n                                    return segSegDoIntersectCrossing(A1, A2, B1, B2);\n                                case Sign.EQUAL:\n                                    return true;\n                                default:\n                                    return segSegDoIntersectContained(A1, A2, B1, B2);\n                            }\n                        }\n                    }\n                }\n                case Sign.EQUAL:\n                    return true;\n                default:\n                    switch (xyCompare(B2, A1)) {\n                        case Sign.SMALLER:\n                            return false;\n                        case Sign.EQUAL:\n                            return true;\n                        default: {\n                            switch (xyCompare(B2, A2)) {\n                                case Sign.SMALLER:\n                                    return segSegDoIntersectCrossing(B1, B2, A1, A2);\n                                case Sign.EQUAL:\n                                    return true;\n                                default:\n                                    return segSegDoIntersectContained(B1, B2, A1, A2);\n                            }\n                        }\n                    }\n            }\n        } else {\n            switch (xyCompare(A1, B2)) {\n                case Sign.SMALLER: {\n                    switch (xyCompare(A2, B2)) {\n                        case Sign.SMALLER:\n                            return false;\n                        case Sign.EQUAL:\n                            return true;\n                        default: {\n                            switch (xyCompare(A2, B1)) {\n                                case Sign.SMALLER:\n                                    return segSegDoIntersectCrossing(A1, A2, B2, B1);\n                                case Sign.EQUAL:\n                                    return true;\n                                default:\n                                    return segSegDoIntersectContained(A1, A2, B2, B1);\n                            }\n                        }\n                    }\n                }\n                case Sign.EQUAL:\n                    return true;\n                default:\n                    switch (xyCompare(B1, A1)) {\n                        case Sign.SMALLER:\n                            return false;\n                        case Sign.EQUAL:\n                            return true;\n                        default: {\n                            switch (xyCompare(B1, A2)) {\n                                case Sign.SMALLER:\n                                    return segSegDoIntersectCrossing(B2, B1, A1, A2);\n                                case Sign.EQUAL:\n                                    return true;\n                                default:\n                                    return segSegDoIntersectContained(B2, B1, A1, A2);\n                            }\n                        }\n                    }\n            }\n        }\n    } else {\n        if (xySmaller(B1, B2)) {\n            switch (xyCompare(A2, B1)) {\n                case Sign.SMALLER: {\n                    switch (xyCompare(A1, B1)) {\n                        case Sign.SMALLER:\n                            return false;\n                        case Sign.EQUAL:\n                            return true;\n                        default: {\n                            switch (xyCompare(A1, B2)) {\n                                case Sign.SMALLER:\n                                    return segSegDoIntersectCrossing(A2, A1, B1, B2);\n                                case Sign.EQUAL:\n                                    return true;\n                                default:\n                                    return segSegDoIntersectContained(A2, A1, B1, B2);\n                            }\n                        }\n                    }\n                }\n                case Sign.EQUAL:\n                    return true;\n                default:\n                    switch (xyCompare(B2, A2)) {\n                        case Sign.SMALLER:\n                            return false;\n                        case Sign.EQUAL:\n                            return true;\n                        default: {\n                            switch (xyCompare(B2, A1)) {\n                                case Sign.SMALLER:\n                                    return segSegDoIntersectCrossing(B1, B2, A2, A1);\n                                case Sign.EQUAL:\n                                    return true;\n                                default:\n                                    return segSegDoIntersectContained(B1, B2, A2, A1);\n                            }\n                        }\n                    }\n            }\n        } else {\n            switch (xyCompare(A2, B2)) {\n                case Sign.SMALLER: {\n                    switch (xyCompare(A1, B2)) {\n                        case Sign.SMALLER:\n                            return false;\n                        case Sign.EQUAL:\n                            return true;\n                        default: {\n                            switch (xyCompare(A1, B1)) {\n                                case Sign.SMALLER:\n                                    return segSegDoIntersectCrossing(A2, A1, B2, B1);\n                                case Sign.EQUAL:\n                                    return true;\n                                default:\n                                    return segSegDoIntersectContained(A2, A1, B2, B1);\n                            }\n                        }\n                    }\n                }\n                case Sign.EQUAL:\n                    return true;\n                default:\n                    switch (xyCompare(B1, A2)) {\n                        case Sign.SMALLER:\n                            return false;\n                        case Sign.EQUAL:\n                            return true;\n                        default: {\n                            switch (xyCompare(B1, A1)) {\n                                case Sign.SMALLER:\n                                    return segSegDoIntersectCrossing(B2, B1, A2, A1);\n                                case Sign.EQUAL:\n                                    return true;\n                                default:\n                                    return segSegDoIntersectContained(B2, B1, A2, A1);\n                            }\n                        }\n                    }\n            }\n        }\n    }\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('Modal',{attrs:{\"visible\":_vm.visible,\"mask\":false},on:{\"close\":function($event){_vm.visible = false}},scopedSlots:_vm._u([{key:\"header\",fn:function(m){return _c('div',{staticClass:\"modal-header\",attrs:{\"draggable\":\"true\"},on:{\"dragstart\":m.dragStart,\"dragend\":m.dragEnd}},[_c('div',[_vm._v(\"Edit asset\")]),_c('div',{staticClass:\"header-close\",on:{\"click\":function($event){_vm.visible = false}}},[_c('i',{staticClass:\"far fa-window-close\"})])])}}])},[_c('div',{staticClass:\"modal-body\"},[_c('label',{attrs:{\"for\":\"shapeselectiondialog-name\"}},[_vm._v(\"Name\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.shape.name),expression:\"shape.name\"}],staticStyle:{\"grid-column\":\"numerator / end\"},attrs:{\"type\":\"text\",\"id\":\"shapeselectiondialog-name\"},domProps:{\"value\":(_vm.shape.name)},on:{\"change\":function($event){_vm.updateShape(false)},\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.shape, \"name\", $event.target.value)}}}),_c('label',{attrs:{\"for\":\"shapeselectiondialog-istoken\"}},[_vm._v(\"Is a token\")]),_c('input',{staticStyle:{\"grid-column-start\":\"remove\",\"width\":\"15px\",\"height\":\"15px\"},attrs:{\"type\":\"checkbox\",\"id\":\"shapeselectiondialog-istoken\"},domProps:{\"checked\":_vm.shape.isToken},on:{\"click\":_vm.setToken}}),_c('label',{attrs:{\"for\":\"shapeselectiondialog-visionblocker\"}},[_vm._v(\"Blocks vision/light\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.shape.visionObstruction),expression:\"shape.visionObstruction\"}],staticStyle:{\"grid-column-start\":\"remove\",\"width\":\"15px\",\"height\":\"15px\"},attrs:{\"type\":\"checkbox\",\"id\":\"shapeselectiondialog-visionblocker\"},domProps:{\"checked\":Array.isArray(_vm.shape.visionObstruction)?_vm._i(_vm.shape.visionObstruction,null)>-1:(_vm.shape.visionObstruction)},on:{\"change\":[function($event){var $$a=_vm.shape.visionObstruction,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.$set(_vm.shape, \"visionObstruction\", $$a.concat([$$v])))}else{$$i>-1&&(_vm.$set(_vm.shape, \"visionObstruction\", $$a.slice(0,$$i).concat($$a.slice($$i+1))))}}else{_vm.$set(_vm.shape, \"visionObstruction\", $$c)}},_vm.setVisionBlocker]}}),_c('label',{attrs:{\"for\":\"shapeselectiondialog-moveblocker\"}},[_vm._v(\"Blocks movement\")]),_c('input',{staticStyle:{\"grid-column-start\":\"remove\",\"width\":\"15px\",\"height\":\"15px\"},attrs:{\"type\":\"checkbox\",\"id\":\"shapeselectiondialog-moveblocker\"},domProps:{\"checked\":_vm.shape.movementObstruction},on:{\"click\":_vm.setMovementBlocker}}),_c('div',{staticClass:\"spanrow header\"},[_vm._v(\"Access\")]),_vm._l((_vm.shape.owners),function(owner){return [_c('input',{key:owner,staticStyle:{\"grid-column-start\":\"name\"},attrs:{\"type\":\"text\",\"placeholder\":\"name\"},domProps:{\"value\":owner},on:{\"change\":function($event){_vm.updateOwner($event, owner)}}}),(owner !== '')?_c('div',{key:'remove-' + owner,staticStyle:{\"grid-column-start\":\"remove\"},on:{\"click\":function($event){_vm.removeOwner(owner)}}},[_c('i',{staticClass:\"fas fa-trash-alt\"})]):_vm._e()]}),_c('div',{staticClass:\"spanrow header\"},[_vm._v(\"Trackers\")]),_vm._l((_vm.shape.trackers),function(tracker){return [_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(tracker.name),expression:\"tracker.name\"}],key:'name-'+tracker.uuid,staticStyle:{\"grid-column-start\":\"name\"},attrs:{\"type\":\"text\",\"placeholder\":\"name\"},domProps:{\"value\":(tracker.name)},on:{\"change\":function($event){_vm.updateShape(false);},\"input\":function($event){if($event.target.composing){ return; }_vm.$set(tracker, \"name\", $event.target.value)}}}),_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(tracker.value),expression:\"tracker.value\",modifiers:{\"number\":true}}],key:'value-'+tracker.uuid,attrs:{\"type\":\"text\",\"title\":\"Current value\"},domProps:{\"value\":(tracker.value)},on:{\"change\":function($event){_vm.updateShape(false)},\"input\":function($event){if($event.target.composing){ return; }_vm.$set(tracker, \"value\", _vm._n($event.target.value))},\"blur\":function($event){_vm.$forceUpdate()}}}),_c('span',{key:'fspan-'+tracker.uuid},[_vm._v(\"/\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(tracker.maxvalue),expression:\"tracker.maxvalue\",modifiers:{\"number\":true}}],key:'maxvalue-'+tracker.uuid,attrs:{\"type\":\"text\",\"title\":\"Current value\"},domProps:{\"value\":(tracker.maxvalue)},on:{\"change\":function($event){_vm.updateShape(false)},\"input\":function($event){if($event.target.composing){ return; }_vm.$set(tracker, \"maxvalue\", _vm._n($event.target.value))},\"blur\":function($event){_vm.$forceUpdate()}}}),_c('span',{key:'sspan-'+tracker.uuid}),_c('div',{key:'visibility-'+tracker.uuid,style:({opacity: tracker.visible ? 1.0 : 0.3}),on:{\"click\":function($event){tracker.visible = !tracker.visible;_vm.updateShape(false)}}},[_c('i',{staticClass:\"fas fa-eye\"})]),_c('span',{key:'tspan-'+tracker.uuid}),(tracker.name !== '' || tracker.value !== 0)?_c('div',{key:'remove-'+tracker.uuid,on:{\"click\":function($event){_vm.removeTracker(tracker.uuid)}}},[_c('i',{staticClass:\"fas fa-trash-alt\"})]):_vm._e()]}),_c('div',{staticClass:\"spanrow header\"},[_vm._v(\"Auras\")]),_vm._l((_vm.shape.auras),function(aura){return [_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(aura.name),expression:\"aura.name\"}],key:'name-'+aura.uuid,staticStyle:{\"grid-column-start\":\"name\"},attrs:{\"type\":\"text\",\"placeholder\":\"name\"},domProps:{\"value\":(aura.name)},on:{\"change\":function($event){_vm.updateShape(false)},\"input\":function($event){if($event.target.composing){ return; }_vm.$set(aura, \"name\", $event.target.value)}}}),_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(aura.value),expression:\"aura.value\",modifiers:{\"number\":true}}],key:'value-'+aura.uuid,attrs:{\"type\":\"text\",\"title\":\"Current value\"},domProps:{\"value\":(aura.value)},on:{\"change\":function($event){_vm.updateShape(true)},\"input\":function($event){if($event.target.composing){ return; }_vm.$set(aura, \"value\", _vm._n($event.target.value))},\"blur\":function($event){_vm.$forceUpdate()}}}),_c('span',{key:'fspan-'+aura.uuid},[_vm._v(\"/\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(aura.dim),expression:\"aura.dim\",modifiers:{\"number\":true}}],key:'dimvalue-'+aura.uuid,attrs:{\"type\":\"text\",\"title\":\"Dim value\"},domProps:{\"value\":(aura.dim)},on:{\"change\":function($event){_vm.updateShape(true)},\"input\":function($event){if($event.target.composing){ return; }_vm.$set(aura, \"dim\", _vm._n($event.target.value))},\"blur\":function($event){_vm.$forceUpdate()}}}),_c('color-picker',{key:'colour-'+aura.uuid,attrs:{\"color\":aura.colour},on:{\"update:color\":function($event){_vm.$set(aura, \"colour\", $event)},\"input\":function($event){_vm.updateAuraColour(aura, $event)},\"change\":function($event){_vm.updateShape(true)}}}),_c('div',{key:'visibility-'+aura.uuid,style:({opacity: aura.visible ? 1.0 : 0.3}),on:{\"click\":function($event){aura.visible = !aura.visible;_vm.updateShape(true)}}},[_c('i',{staticClass:\"fas fa-eye\"})]),_c('div',{key:'visionsource-'+aura.uuid,style:({opacity: aura.visionSource ? 1.0 : 0.3}),on:{\"click\":function($event){_vm.updateAuraVisionSource(aura)}}},[_c('i',{staticClass:\"fas fa-lightbulb\"})]),(aura.name !== '' || aura.value !== 0)?_c('div',{key:'remove-'+aura.uuid,on:{\"click\":function($event){_vm.removeAura(aura.uuid)}}},[_c('i',{staticClass:\"fas fa-trash-alt\"})]):_vm._e()]}),_c('div',{staticClass:\"spanrow header\"},[_vm._v(\"Annotation\")]),_c('textarea',{staticClass:\"spanrow\",domProps:{\"value\":_vm.shape.annotation},on:{\"change\":_vm.updateAnnotation}})],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"74f43d04-vue-loader-template\\\"}!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./edit_dialog.vue?vue&type=template&id=078b3b76&scoped=true&\"","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./asset_node.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./asset_node.vue?vue&type=script&lang=ts&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.getActiveLayer() !== undefined)?_c('ContextMenu',{attrs:{\"visible\":_vm.visible,\"left\":_vm.x + 'px',\"top\":_vm.y + 'px'},on:{\"close\":_vm.close}},[(_vm.getLayers().length > 1)?_c('li',[_vm._v(\"Layer\\n    \"),_c('ul',_vm._l((_vm.getLayers()),function(layer){return _c('li',{key:layer.name,style:([_vm.getActiveLayer().name === layer.name ? {'background-color':'#82c8a0'}: {}]),on:{\"click\":function($event){_vm.setLayer(layer.name)}}},[_vm._v(_vm._s(layer.name))])}))]):_vm._e(),_c('li',{on:{\"click\":_vm.moveToBack}},[_vm._v(\"Move to back\")]),_c('li',{on:{\"click\":_vm.moveToFront}},[_vm._v(\"Move to front\")]),_c('li',{on:{\"click\":_vm.addInitiative}},[_vm._v(_vm._s(_vm.getInitiativeWord())+\" initiative\")])]):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"74f43d04-vue-loader-template\\\"}!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./shapecontext.vue?vue&type=template&id=7111f3f6&scoped=true&\"","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\nimport { Prop } from \"vue-property-decorator\";\n\n@Component\nexport default class Modal extends Vue {\n    @Prop(Boolean) visible!: boolean;\n    @Prop({ type: Boolean, default: true }) mask!: boolean;\n\n    $refs!: {\n        container: HTMLElement;\n    };\n\n    positioned = false;\n    offsetX = 0;\n    offsetY = 0;\n    screenX = 0;\n    screenY = 0;\n    dragging = false;\n\n    // Example of mounted required: opening note\n    mounted() {\n        this.updatePosition();\n    }\n    // Example of updated required: opening initiative\n    updated() {\n        this.updatePosition();\n    }\n\n    close(event: MouseEvent) {\n        this.$emit(\"close\");\n    }\n    updatePosition() {\n        if (!this.positioned) {\n            const container = <any>this.$refs.container;\n            if (container.offsetWidth === 0 && container.offsetHeight === 0) return;\n            this.$refs.container.style.left = (window.innerWidth - container.offsetWidth) / 2 + \"px\";\n            this.$refs.container.style.top = (window.innerHeight - container.offsetHeight) / 2 + \"px\";\n            this.positioned = true;\n        }\n    }\n    dragStart(event: DragEvent) {\n        if (event === null || event.dataTransfer === null) return;\n        event.dataTransfer.setData(\"Hack\", \"\");\n        // Because the drag event is happening on the header, we have to change the drag image\n        // in order to give the impression that the entire modal is dragged.\n        event.dataTransfer.setDragImage(<Element>this.$refs.container, event.offsetX, event.offsetY);\n        this.offsetX = event.offsetX;\n        this.offsetY = event.offsetY;\n        this.screenX = event.screenX;\n        this.screenY = event.screenY;\n        this.dragging = true;\n    }\n    dragEnd(event: DragEvent) {\n        this.dragging = false;\n        let left = event.clientX - this.offsetX;\n        let top = event.clientY - this.offsetY;\n        if (event.clientX === 0 && event.clientY === 0 && event.pageX === 0 && event.pageY === 0) {\n            left = parseInt(this.$refs.container.style.left!, 10) - (this.screenX - event.screenX);\n            top = parseInt(this.$refs.container.style.top!, 10) - (this.screenY - event.screenY);\n        }\n        if (left < 0) left = 0;\n        if (left > window.innerWidth - 100) left = window.innerWidth - 100;\n        if (top < 0) top = 0;\n        if (top > window.innerHeight - 100) top = window.innerHeight - 100;\n        this.$refs.container.style.left = left + \"px\";\n        this.$refs.container.style.top = top + \"px\";\n        this.$refs.container.style.display = \"block\";\n    }\n    dragOver(event: DragEvent) {\n        if (this.dragging) this.$refs.container.style.display = \"none\";\n    }\n}\n","import io from \"socket.io-client\";\n\nimport { Asset } from \"@/core/comm/types\";\nimport { assetStore } from \"./store\";\n\nexport const socket = io(location.protocol + \"//\" + location.host + \"/pa_assetmgmt\", { autoConnect: false });\n\n// export const socket = io.connect(location.protocol + \"//\" + location.host + \"/pa_assetmgmt\");\nsocket.on(\"connect\", () => {\n    console.log(\"Connected\");\n});\nsocket.on(\"disconnect\", () => {\n    console.log(\"Disconnected\");\n});\nsocket.on(\"redirect\", (destination: string) => {\n    console.log(\"redirecting\");\n    window.location.href = destination;\n});\nsocket.on(\"Folder.Root.Set\", (root: number) => {\n    assetStore.setRoot(root);\n});\nsocket.on(\"Folder.Set\", (folder: Asset) => {\n    assetStore.clear();\n    if (folder.children) {\n        for (const child of folder.children) {\n            assetStore.idMap.set(child.id, child);\n            if (child.file_hash) {\n                assetStore.files.push(child.id);\n            } else {\n                assetStore.folders.push(child.id);\n            }\n        }\n    }\n});\nsocket.on(\"Folder.Create\", (folder: Asset) => {\n    assetStore.folders.push(folder.id);\n    assetStore.idMap.set(folder.id, folder);\n});\nsocket.on(\"Asset.Upload.Finish\", (asset: Asset) => {\n    assetStore.idMap.set(asset.id, asset);\n    assetStore.files.push(asset.id);\n});\n","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tools.vue?vue&type=style&index=0&id=1fee50f5&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tools.vue?vue&type=style&index=0&id=1fee50f5&scoped=true&lang=css&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./game.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./game.vue?vue&type=style&index=0&lang=css&\"","import { GlobalPoint, LocalPoint } from \"@/game/geom\";\nimport { BoundingRect } from \"@/game/shapes/boundingrect\";\nimport { Shape } from \"@/game/shapes/shape\";\nimport { g2lx, g2ly, g2lz } from \"@/game/units\";\nimport { getFogColour } from \"@/game/utils\";\n\nexport class MultiLine extends Shape {\n    type = \"multiline\";\n    _points: GlobalPoint[] = [];\n    lineWidth: number;\n    constructor(\n        startPoint: GlobalPoint,\n        points?: GlobalPoint[],\n        lineWidth?: number,\n        strokeColour?: string,\n        uuid?: string,\n    ) {\n        super(startPoint, \"rgba(0, 0, 0, 0)\", strokeColour || \"#000\", uuid);\n        this._points = points || [];\n        this.lineWidth = lineWidth || 3;\n    }\n    asDict() {\n        return Object.assign(this.getBaseDict(), {\n            line_width: this.lineWidth,\n            points: this._points.map(p => ({ x: p.x, y: p.y })),\n        });\n    }\n    get points() {\n        return this._points.map(point => [point.x, point.y]);\n    }\n    getBoundingBox(): BoundingRect {\n        let minx: number = this.refPoint.x;\n        let maxx: number = this.refPoint.y;\n        let miny: number = this.refPoint.x;\n        let maxy: number = this.refPoint.y;\n        for (const p of this._points) {\n            if (p.x < minx) minx = p.x;\n            if (p.x > maxx) maxx = p.x;\n            if (p.y < miny) miny = p.y;\n            if (p.y > maxy) maxy = p.y;\n        }\n        return new BoundingRect(new GlobalPoint(minx, miny), maxx - minx, maxy - miny);\n    }\n    draw(ctx: CanvasRenderingContext2D) {\n        super.draw(ctx);\n        ctx.beginPath();\n        ctx.lineCap = \"round\";\n        ctx.lineJoin = \"round\";\n        ctx.moveTo(g2lx(this.refPoint.x), g2ly(this.refPoint.y));\n        for (const p of this._points) ctx.lineTo(g2lx(p.x), g2ly(p.y));\n        if (this.strokeColour === \"fog\") ctx.strokeStyle = getFogColour();\n        else ctx.strokeStyle = this.strokeColour;\n        ctx.lineWidth = g2lz(this.lineWidth);\n        ctx.stroke();\n    }\n    contains(point: GlobalPoint): boolean {\n        return this._points.includes(point);\n    }\n\n    center(): GlobalPoint;\n    center(centerPoint: GlobalPoint): void;\n    center(centerPoint?: GlobalPoint): GlobalPoint | void {} // TODO\n    getCorner(point: GlobalPoint): string | undefined {\n        return \"\";\n    } // TODO\n    visibleInCanvas(canvas: HTMLCanvasElement): boolean {\n        return true;\n    } // TODO\n    snapToGrid(): void {}\n    resizeToGrid(): void {}\n    resize(resizeDir: string, point: LocalPoint): void {}\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"outer\",on:{\"click\":function($event){if($event.target !== $event.currentTarget){ return null; }return _vm.open($event)}}},[_c('div',{staticClass:\"current-color\",style:(_vm.transparent ? 'background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAIAAADZF8uwAAAAGUlEQVQYV2M4gwH+YwCGIasIUwhT25BVBADtzYNYrHvv4gAAAABJRU5ErkJggg==)' : 'background-color:' + _vm.color),on:{\"click\":function($event){if($event.target !== $event.currentTarget){ return null; }return _vm.open($event)}}}),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.display),expression:\"display\"}],staticClass:\"mask\",on:{\"click\":function($event){if($event.target !== $event.currentTarget){ return null; }return _vm.closePicker($event)}}}),_c('chrome-picker',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.display),expression:\"display\"}],ref:\"chromePicker\",style:({position: 'fixed', left:_vm.left + 'px', top:_vm.top + 'px', 'z-index': 9999}),attrs:{\"value\":_vm.color,\"tabindex\":\"-1\"},on:{\"input\":_vm.updateColor}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"74f43d04-vue-loader-template\\\"}!../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./colorpicker.vue?vue&type=template&id=b4f2c0b0&scoped=true&\"","import { render, staticRenderFns } from \"./draw.vue?vue&type=template&id=7abc7fe9&scoped=true&\"\nimport script from \"./draw.vue?vue&type=script&lang=ts&\"\nexport * from \"./draw.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./draw.vue?vue&type=style&index=0&id=7abc7fe9&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7abc7fe9\",\n  null\n  \n)\n\ncomponent.options.__file = \"draw.vue\"\nexport default component.exports","import tinycolor from \"tinycolor2\";\n\nimport { LocalPoint } from \"@/game/geom\";\nimport { gameStore } from \"@/game/store\";\n\nexport function getMouse(e: MouseEvent): LocalPoint {\n    return new LocalPoint(e.pageX, e.pageY);\n}\n\nexport function getFogColour(opposite: boolean = false): string {\n    const tc = tinycolor(gameStore.fowColour);\n    if (gameStore.IS_DM) tc.setAlpha(opposite ? 1 : gameStore.fowOpacity);\n    else tc.setAlpha(1);\n    return tc.toRgbString();\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport * as tinycolor from \"tinycolor2\";\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\n\nimport { mapState } from \"vuex\";\n\nimport ColorPicker from \"@/core/components/colorpicker.vue\";\nimport Modal from \"@/core/components/modals/modal.vue\";\n\nimport { calcFontScale } from \"@/core/utils\";\nimport { LocalPoint } from \"@/game/geom\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { CircularToken } from \"@/game/shapes/circulartoken\";\nimport { gameStore } from \"@/game/store\";\nimport { getUnitDistance, l2g } from \"@/game/units\";\nimport { Watch } from \"vue-property-decorator\";\n\n@Component({\n    components: {\n        Modal,\n        \"color-picker\": ColorPicker,\n    },\n    computed: {\n        ...mapState(\"game\", [\"unitSize\"]),\n    },\n})\nexport default class CreateTokenModal extends Vue {\n    x = 0;\n    y = 0;\n    visible = false;\n    text = \"X\";\n    fillColour = \"rgba(255, 255, 255, 1)\";\n    borderColour = \"rgba(0, 0, 0, 1)\";\n\n    mounted() {\n        this.updatePreview();\n    }\n\n    @Watch(\"text\")\n    onTextChange(newValue: string, oldValue: string) {\n        this.updatePreview();\n    }\n    @Watch(\"fillColour\")\n    onFillChange(newValue: string, oldValue: string) {\n        this.updatePreview();\n    }\n    @Watch(\"borderColour\")\n    onBorderChange(newValue: string, oldValue: string) {\n        this.updatePreview();\n    }\n\n    open(x: number, y: number) {\n        this.visible = true;\n        this.x = x;\n        this.y = y;\n    }\n    submit() {\n        const layer = layerManager.getLayer();\n        if (layer === undefined) return;\n        const token = new CircularToken(\n            l2g(new LocalPoint(this.x, this.y)),\n            getUnitDistance(gameStore.unitSize / 2),\n            this.text,\n            \"10px serif\",\n            this.fillColour,\n            this.borderColour,\n        );\n        token.owners.push(gameStore.username);\n        layer.addShape(token, true);\n        layer.invalidate(false);\n        this.visible = false;\n    }\n    updatePreview() {\n        const ctx = (<HTMLCanvasElement>this.$refs.canvas).getContext(\"2d\")!;\n        ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n        ctx.beginPath();\n        const dest = { x: ctx.canvas.width / 2, y: ctx.canvas.height / 2 };\n        const r = Math.min(dest.x, dest.y) * 0.9;\n\n        ctx.fillStyle = this.fillColour;\n\n        ctx.arc(dest.x, dest.y, r, 0, 2 * Math.PI);\n        ctx.fill();\n        if (this.borderColour !== \"rgba(0, 0, 0, 0)\") {\n            ctx.beginPath();\n            ctx.lineWidth = 5;\n            ctx.strokeStyle = this.borderColour;\n            ctx.arc(dest.x, dest.y, r, 0, 2 * Math.PI);\n            ctx.stroke();\n        }\n        ctx.save();\n        ctx.textAlign = \"center\";\n        ctx.textBaseline = \"middle\";\n        const xs = calcFontScale(ctx, this.text, r, r);\n        const ys = 0;\n        ctx.transform(xs, ys, -ys, xs, dest.x, dest.y);\n        ctx.fillStyle = tinycolor.mostReadable(this.fillColour, [\"#000\", \"#fff\"]).toHexString();\n        ctx.fillText(this.text, 0, 0);\n        ctx.restore();\n    }\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\n\nimport ConfirmDialog from \"@/core/components/modals/confirm.vue\";\nimport Modal from \"@/core/components/modals/modal.vue\";\n\nimport { getRef } from \"@/core/utils\";\nimport { Note } from \"@/game/comm/types/general\";\nimport { gameStore } from \"@/game/store\";\n\n@Component({\n    components: {\n        Modal,\n    },\n})\nexport default class NoteDialog extends Vue {\n    visible = false;\n    note: Note | null = null;\n\n    open(note: Note) {\n        this.visible = true;\n        this.note = note;\n    }\n    calcHeight() {\n        if (this.$refs.textarea) {\n            const el = <HTMLElement>this.$refs.textarea;\n            el.style.height = \"auto\";\n            el.style.height = el.scrollHeight + \"px\";\n            // Using the return value without the above did not achieve what I want, so hey /shrug\n            return el.scrollHeight + \"px\";\n        }\n        return \"100px\";\n    }\n    updateNote() {\n        if (this.note) gameStore.updateNote({ note: this.note, sync: true });\n    }\n    removeNote() {\n        getRef<ConfirmDialog>(\"confirm\")\n            .open(\"Are you sure you wish to remove this?\")\n            .then(\n                (result: boolean) => {\n                    if (result && this.note) {\n                        gameStore.removeNote({ note: this.note, sync: true });\n                        this.visible = false;\n                    }\n                },\n                () => {},\n            );\n    }\n}\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./initiative.vue?vue&type=style&index=0&id=ccaf03d6&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./initiative.vue?vue&type=style&index=0&id=ccaf03d6&scoped=true&lang=css&\"","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Component from \"vue-class-component\";\n\nimport { Watch } from \"vue-property-decorator\";\n\nimport ColorPicker from \"@/core/components/colorpicker.vue\";\nimport Tool from \"@/game/ui/tools/tool.vue\";\n\nimport { socket } from \"@/game/api/socket\";\nimport { GlobalPoint } from \"@/game/geom\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { Circle } from \"@/game/shapes/circle\";\nimport { MultiLine } from \"@/game/shapes/multiline\";\nimport { Rect } from \"@/game/shapes/rect\";\nimport { Shape } from \"@/game/shapes/shape\";\nimport { gameStore } from \"@/game/store\";\nimport { getUnitDistance, l2g } from \"@/game/units\";\nimport { getMouse } from \"@/game/utils\";\n\n@Component({\n    components: {\n        \"color-picker\": ColorPicker,\n    },\n})\nexport default class DrawTool extends Tool {\n    name = \"Draw\";\n    active = false;\n\n    startPoint: GlobalPoint | null = null;\n    shape: Shape | null = null;\n    brushHelper: Circle | null = null;\n\n    fillColour = \"rgba(0, 0, 0, 1)\";\n    borderColour = \"rgba(255, 255, 255, 0)\";\n\n    shapeSelect = \"square\";\n    shapes = [\"square\", \"circle\", \"paint-brush\"];\n    modeSelect = \"normal\";\n    modes = [\"normal\", \"reveal\", \"hide\"];\n\n    brushSize = getUnitDistance(gameStore.unitSize);\n\n    get helperSize(): number {\n        if (this.shapeSelect === \"paint-brush\") return this.brushSize / 2;\n        return getUnitDistance(this.unitSize) / 8;\n    }\n    get IS_DM(): boolean {\n        return gameStore.IS_DM;\n    }\n    get unitSize(): number {\n        return gameStore.unitSize;\n    }\n    get useGrid(): boolean {\n        return gameStore.useGrid;\n    }\n\n    @Watch(\"fillColour\")\n    onFillChange() {\n        if (this.brushHelper) this.brushHelper.fillColour = this.fillColour;\n    }\n\n    @Watch(\"modeSelect\")\n    onModeUpdate(newValue: string, oldValue: string) {\n        this.onModeChange(newValue, oldValue);\n    }\n\n    setupBrush() {\n        if (this.brushHelper === null) return;\n        if (this.modeSelect === \"reveal\" || this.modeSelect === \"hide\") {\n            this.brushHelper.options.set(\"preFogShape\", true);\n            this.brushHelper.options.set(\"skipDraw\", true);\n            this.brushHelper.fillColour = \"rgba(0, 0, 0, 1)\";\n\n            if (this.modeSelect === \"reveal\") this.brushHelper.globalCompositeOperation = \"source-over\";\n            else if (this.modeSelect === \"hide\") this.brushHelper.globalCompositeOperation = \"destination-out\";\n        } else {\n            this.brushHelper.options.delete(\"preFogShape\");\n            this.brushHelper.options.delete(\"skipDraw\");\n            this.brushHelper.globalCompositeOperation = \"source-over\";\n            this.brushHelper.fillColour = this.fillColour;\n        }\n    }\n    onModeChange(newValue: string, oldValue: string) {\n        if (this.brushHelper === null) return;\n\n        const fowLayer = layerManager.getLayer(\"fow\");\n        const normalLayer = layerManager.getLayer();\n        if (fowLayer === undefined || normalLayer === undefined) return;\n\n        this.setupBrush();\n\n        if (newValue !== \"normal\" && oldValue === \"normal\") {\n            normalLayer.removeShape(this.brushHelper, false);\n            fowLayer.addShape(this.brushHelper, false);\n        } else if (newValue === \"normal\" && oldValue !== \"normal\") {\n            normalLayer.addShape(this.brushHelper, false);\n            fowLayer.removeShape(this.brushHelper, false);\n        }\n    }\n    getLayer() {\n        if (this.modeSelect === \"normal\") return layerManager.getLayer();\n        return layerManager.getLayer(\"fow\");\n    }\n    onMouseDown(event: MouseEvent) {\n        const layer = this.getLayer();\n        if (layer === undefined) {\n            console.log(\"No active layer!\");\n            return;\n        }\n        this.active = true;\n        this.startPoint = l2g(getMouse(event));\n        if (this.shapeSelect === \"square\")\n            this.shape = new Rect(this.startPoint.clone(), 0, 0, this.fillColour, this.borderColour);\n        else if (this.shapeSelect === \"circle\")\n            this.shape = new Circle(this.startPoint.clone(), this.helperSize, this.fillColour, this.borderColour);\n        else if (this.shapeSelect === \"paint-brush\") {\n            this.shape = new MultiLine(this.startPoint.clone(), [], this.brushSize);\n            this.shape.fillColour = this.fillColour;\n        } else return;\n\n        if (this.modeSelect !== \"normal\") {\n            this.shape.options.set(\"preFogShape\", true);\n            this.shape.options.set(\"skipDraw\", true);\n            this.shape.fillColour = \"rgba(0, 0, 0, 1)\";\n        }\n        if (this.modeSelect === \"reveal\") this.shape.globalCompositeOperation = \"source-over\";\n        else if (this.modeSelect === \"hide\") this.shape.globalCompositeOperation = \"destination-out\";\n\n        this.shape.owners.push(gameStore.username);\n        if (layer.name === \"fow\" && this.modeSelect === \"normal\") {\n            this.shape.visionObstruction = true;\n            this.shape.movementObstruction = true;\n        }\n        gameStore.visionBlockers.push(this.shape.uuid);\n        layer.addShape(this.shape, true, false);\n\n        // Push brushhelper to back\n        this.onDeselect();\n        this.onSelect();\n    }\n    onMouseMove(event: MouseEvent) {\n        const endPoint = l2g(getMouse(event));\n        const layer = this.getLayer();\n        if (layer === undefined) {\n            console.log(\"No active layer!\");\n            return;\n        }\n\n        if (this.brushHelper !== null) {\n            this.brushHelper.r = this.helperSize;\n            this.brushHelper.refPoint = endPoint;\n            if (!this.active) layer.invalidate(false);\n        }\n\n        if (!this.active || this.startPoint === null || this.shape === null) return;\n\n        if (this.shapeSelect === \"square\") {\n            (<Rect>this.shape).w = Math.abs(endPoint.x - this.startPoint.x);\n            (<Rect>this.shape).h = Math.abs(endPoint.y - this.startPoint.y);\n            this.shape.refPoint.x = Math.min(this.startPoint.x, endPoint.x);\n            this.shape.refPoint.y = Math.min(this.startPoint.y, endPoint.y);\n        } else if (this.shapeSelect === \"circle\") {\n            (<Circle>this.shape).r = endPoint.subtract(this.startPoint).length();\n        } else if (this.shapeSelect === \"paint-brush\") {\n            (<MultiLine>this.shape)._points.push(endPoint);\n        }\n        socket.emit(\"Shape.Update\", { shape: this.shape!.asDict(), redraw: true, temporary: true });\n        if (this.shape.visionObstruction) gameStore.recalculateBV(true);\n        layer.invalidate(false);\n    }\n    onMouseUp(event: MouseEvent) {\n        if (!this.active || this.shape === null) return;\n        if (!event.altKey && this.useGrid) {\n            this.shape.resizeToGrid();\n        }\n        if (this.shape.visionObstruction) gameStore.recalculateBV();\n        socket.emit(\"Shape.Update\", { shape: this.shape!.asDict(), redraw: true, temporary: false });\n        this.active = false;\n    }\n    onSelect() {\n        const layer = this.getLayer();\n        if (layer === undefined) return;\n        this.brushHelper = new Circle(new GlobalPoint(-1000, -1000), this.brushSize / 2, this.fillColour);\n        this.setupBrush();\n        layer.addShape(this.brushHelper, false); // during mode change the shape is already added\n    }\n    onDeselect() {\n        const layer = this.getLayer();\n        if (this.brushHelper !== null && layer !== undefined) layer.removeShape(this.brushHelper, false);\n    }\n}\n","import { GlobalPoint, LocalPoint } from \"@/game/geom\";\nimport { BoundingRect } from \"@/game/shapes/boundingrect\";\nimport { Shape } from \"@/game/shapes/shape\";\nimport { g2lx, g2ly } from \"@/game/units\";\n\nexport class Line extends Shape {\n    type = \"line\";\n    endPoint: GlobalPoint;\n    lineWidth: number;\n    constructor(\n        startPoint: GlobalPoint,\n        endPoint: GlobalPoint,\n        lineWidth?: number,\n        strokeColour?: string,\n        uuid?: string,\n    ) {\n        super(startPoint, \"rgba(0, 0, 0, 0)\", strokeColour || \"#000\", uuid);\n        this.endPoint = endPoint;\n        this.lineWidth = lineWidth === undefined ? 1 : lineWidth;\n    }\n    asDict() {\n        return Object.assign(this.getBaseDict(), {\n            x2: this.endPoint.x,\n            y2: this.endPoint.y,\n            line_width: this.lineWidth,\n        });\n    }\n    get points() {\n        return [[this.refPoint.x, this.refPoint.y], [this.endPoint.x, this.endPoint.y]];\n    }\n    getBoundingBox(): BoundingRect {\n        return new BoundingRect(\n            new GlobalPoint(Math.min(this.refPoint.x, this.endPoint.x), Math.min(this.refPoint.x, this.endPoint.y)),\n            Math.abs(this.refPoint.x - this.endPoint.x),\n            Math.abs(this.refPoint.y - this.endPoint.y),\n        );\n    }\n    draw(ctx: CanvasRenderingContext2D) {\n        super.draw(ctx);\n        ctx.strokeStyle = this.strokeColour;\n        ctx.beginPath();\n        ctx.moveTo(g2lx(this.refPoint.x), g2ly(this.refPoint.y));\n        ctx.lineTo(g2lx(this.endPoint.x), g2ly(this.endPoint.y));\n        ctx.lineWidth = this.lineWidth;\n        ctx.stroke();\n    }\n    contains(point: GlobalPoint): boolean {\n        return false; // TODO\n    }\n\n    center(): GlobalPoint;\n    center(centerPoint: GlobalPoint): void;\n    center(centerPoint?: GlobalPoint): GlobalPoint | void {} // TODO\n    getCorner(point: GlobalPoint): string | undefined {\n        return \"\";\n    } // TODO\n    visibleInCanvas(canvas: HTMLCanvasElement): boolean {\n        return true;\n    } // TODO\n    snapToGrid(): void {}\n    resizeToGrid(): void {}\n    resize(resizeDir: string, point: LocalPoint): void {}\n}\n","// import \"./class-component-hooks\";\n\nimport axios, { AxiosResponse } from \"axios\";\nimport Vue from \"vue\";\nimport Router from \"vue-router\";\n\nVue.use(Router);\n\nimport AssetManager from \"@/assetManager/manager.vue\";\nimport Login from \"@/auth/login.vue\";\nimport Logout from \"@/auth/logout\";\nimport LoadComponent from \"@/core/components/load.vue\";\nimport Dashboard from \"@/dashboard/main.vue\";\nimport Game from \"@/game/game.vue\";\nimport Invitation from \"@/invitation/invitation\";\n\nimport { coreStore } from \"@/core/store\";\n// import { AssetManager } from \"./assetManager/assets\";\n// const AssetManager = () => import(\"./assetManager/assets\").then(m => m.AssetManager);\n\nexport const router = new Router({\n    mode: \"history\",\n    base: process.env.BASE_URL,\n    routes: [\n        {\n            path: \"/\",\n            redirect: \"/dashboard\",\n        },\n        {\n            path: \"/_load\",\n            name: \"load\",\n            component: LoadComponent,\n        },\n        {\n            path: \"/assets\",\n            component: AssetManager,\n            meta: {\n                auth: true,\n            },\n        },\n        {\n            path: \"/auth\",\n            component: { template: \"<router-view></router-view>\" },\n            children: [{ path: \"login\", component: Login }, { path: \"logout\", component: Logout }],\n        },\n        {\n            path: \"/invite/:code\",\n            component: Invitation,\n            meta: {\n                auth: true,\n            },\n        },\n        {\n            path: \"/dashboard\",\n            component: Dashboard,\n            meta: {\n                auth: true,\n            },\n        },\n        {\n            path: \"/game/:creator/:room\",\n            component: Game,\n            meta: {\n                auth: true,\n            },\n        },\n    ],\n});\n\nrouter.beforeEach((to, from, next) => {\n    if (!coreStore.initialized && to.path !== \"/_load\") {\n        next({ path: \"/_load\" });\n        axios\n            .get(\"/api/auth\")\n            .then((response: AxiosResponse) => {\n                if (response.data.auth) {\n                    coreStore.setAuthenticated(true);\n                    coreStore.setUsername(response.data.username);\n                }\n                coreStore.setInitialized(true);\n                router.push(to.path);\n            })\n            .catch(() => {\n                console.error(\"Authentication check could not be fulfilled.\");\n            });\n    } else if (to.matched.some(record => record.meta.auth) && !coreStore.authenticated) {\n        next({ path: \"/auth/login\", query: { redirect: to.path } });\n    } else {\n        next();\n    }\n});\n","\n\n\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\n\n@Component\nexport default class Tool extends Vue {\n    name = \"\";\n    selected = false;\n    active = false;\n    get detailRight(): string {\n        const rect = (<any>this.$parent.$refs[this.name + \"-selector\"])[0].getBoundingClientRect();\n        const mid = rect.left + rect.width / 2;\n\n        return `${window.innerWidth - Math.min(window.innerWidth - 25, mid + 75)}px`;\n    }\n    get detailArrow(): string {\n        const rect = (<any>this.$parent.$refs[this.name + \"-selector\"])[0].getBoundingClientRect();\n        const mid = rect.left + rect.width / 2;\n        const right = Math.min(window.innerWidth - 25, mid + 75);\n        return `${right - mid - 14}px`; // border width\n    }\n    created() {\n        this.$parent.$on(\"mousedown\", (event: MouseEvent, tool: string) => {\n            if (tool === this.name) this.onMouseDown(event);\n        });\n        this.$parent.$on(\"mouseup\", (event: MouseEvent, tool: string) => {\n            if (tool === this.name) this.onMouseUp(event);\n        });\n        this.$parent.$on(\"mousemove\", (event: MouseEvent, tool: string) => {\n            if (tool === this.name) this.onMouseMove(event);\n        });\n        this.$parent.$on(\"contextmenu\", (event: MouseEvent, tool: string) => {\n            if (tool === this.name) this.onContextMenu(event);\n        });\n        this.$parent.$on(\"tools-select-change\", (newValue: string, oldValue: string) => {\n            if (oldValue === this.name) {\n                this.selected = false;\n                this.onDeselect();\n            } else if (newValue === this.name) {\n                this.selected = true;\n                this.onSelect();\n            }\n        });\n    }\n    onSelect() {}\n    onDeselect() {}\n    onMouseDown(event: MouseEvent) {}\n    onMouseUp(event: MouseEvent) {}\n    onMouseMove(event: MouseEvent) {}\n    onContextMenu(event: MouseEvent) {}\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.selected)?_c('div',{staticClass:\"tool-detail\",style:({'--detailRight': _vm.detailRight, '--detailArrow': _vm.detailArrow})},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.IS_DM),expression:\"IS_DM\"}]},[_vm._v(\"Mode\")]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.IS_DM),expression:\"IS_DM\"}],staticClass:\"selectgroup\"},_vm._l((_vm.modes),function(mode){return _c('div',{key:mode,staticClass:\"option\",class:{'option-selected': _vm.modeSelect === mode},on:{\"click\":function($event){_vm.modeSelect = mode}}},[_vm._v(_vm._s(mode))])})),_c('div',[_vm._v(\"Shape\")]),_c('div',{staticClass:\"selectgroup\"},_vm._l((_vm.shapes),function(shape){return _c('div',{key:shape,staticClass:\"option\",class:{'option-selected': _vm.shapeSelect === shape},on:{\"click\":function($event){_vm.shapeSelect = shape}}},[_c('i',{staticClass:\"fas\",class:'fa-' + shape})])})),_c('div',[_vm._v(\"Colours\")]),_c('div',{staticClass:\"selectgroup\"},[_c('color-picker',{staticClass:\"option\",attrs:{\"color\":_vm.fillColour},on:{\"update:color\":function($event){_vm.fillColour=$event}}}),_c('color-picker',{staticClass:\"option\",attrs:{\"color\":_vm.borderColour},on:{\"update:color\":function($event){_vm.borderColour=$event}}})],1),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.shapeSelect === 'paint-brush'),expression:\"shapeSelect === 'paint-brush'\"}]},[_vm._v(\"Brush size\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.brushSize),expression:\"brushSize\"},{name:\"show\",rawName:\"v-show\",value:(_vm.shapeSelect === 'paint-brush'),expression:\"shapeSelect === 'paint-brush'\"}],staticStyle:{\"max-width\":\"100px\"},attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.brushSize)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.brushSize=$event.target.value}}})]):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"74f43d04-vue-loader-template\\\"}!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./draw.vue?vue&type=template&id=7abc7fe9&scoped=true&\"","import { render, staticRenderFns } from \"./tools.vue?vue&type=template&id=1fee50f5&scoped=true&\"\nimport script from \"./tools.vue?vue&type=script&lang=ts&\"\nexport * from \"./tools.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./tools.vue?vue&type=style&index=0&id=1fee50f5&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1fee50f5\",\n  null\n  \n)\n\ncomponent.options.__file = \"tools.vue\"\nexport default component.exports","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tool.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tool.vue?vue&type=script&lang=ts&\"","import { InitiativeData } from \"@/game/comm/types/general\";\nimport { ServerAsset } from \"@/game/comm/types/shapes\";\nimport { GlobalPoint } from \"@/game/geom\";\nimport { BaseRect } from \"@/game/shapes/baserect\";\nimport { gameStore } from \"@/game/store\";\nimport { g2lx, g2ly, g2lz } from \"@/game/units\";\n\nexport class Asset extends BaseRect {\n    type = \"assetrect\";\n    img: HTMLImageElement;\n    src: string = \"\";\n    constructor(img: HTMLImageElement, topleft: GlobalPoint, w: number, h: number, uuid?: string) {\n        super(topleft, w, h);\n        if (uuid !== undefined) this.uuid = uuid;\n        this.img = img;\n    }\n    asDict() {\n        return Object.assign(this.getBaseDict(), {\n            src: this.src,\n        });\n    }\n    fromDict(data: ServerAsset) {\n        super.fromDict(data);\n        this.src = data.src;\n    }\n    draw(ctx: CanvasRenderingContext2D) {\n        super.draw(ctx);\n        try {\n            ctx.drawImage(this.img, g2lx(this.refPoint.x), g2ly(this.refPoint.y), g2lz(this.w), g2lz(this.h));\n        } catch (error) {\n            console.warn(`Shape ${this.uuid} could not load the image ${this.src}`);\n        }\n    }\n    getInitiativeRepr(): InitiativeData {\n        return {\n            uuid: this.uuid,\n            visible: !gameStore.IS_DM,\n            group: false,\n            source: this.src,\n            has_img: true,\n            effects: [],\n            index: Infinity,\n        };\n    }\n}\n","import {\n    EdgeCirculator,\n    FaceCirculator,\n    LineFaceCirculator,\n    LocateType,\n    Point,\n    Sign,\n    TDS,\n    Triangle,\n    Vertex,\n} from \"./tds\";\nimport {\n    ccw,\n    collinearBetween,\n    cw,\n    edgeInfo,\n    hasInexactNegativeOrientation,\n    intersection,\n    orientation,\n    sideOfOrientedCircle,\n    xyEqual,\n} from \"./triag\";\n\nexport type Edge = [Triangle, number];\n\nexport class CDT {\n    tds: TDS;\n    constructor() {\n        this.tds = new TDS();\n        (<any>window).TDS = this.tds;\n    }\n    insertConstraint(a: Point, b: Point) {\n        const va = this.insert(a);\n        const vb = this.insert(b);\n        if (va !== vb) this.insertConstraintV(va, vb);\n    }\n\n    insertConstraintV(va: Vertex, vb: Vertex) {\n        const stack = [[va, vb]];\n        while (stack.length > 0) {\n            const v = stack.pop()!;\n            const info = edgeInfo(v[0], v[1]);\n            if (info.includes) {\n                this.markConstraint(info.fr!, info.i!);\n                if (info.vi! !== v[1]) {\n                    stack.push([info.vi!, v[1]]);\n                }\n                continue;\n            }\n            const intersectionInfo = this.findIntersectedFaces(v[0], v[1]);\n            if (intersectionInfo.found) {\n                if (intersectionInfo.vi !== v[0] && intersectionInfo.vi !== v[1]) {\n                    stack.push([v[0], intersectionInfo.vi]);\n                    stack.push([intersectionInfo.vi, v[1]]);\n                } else {\n                    stack.push(v);\n                }\n                continue;\n            }\n            this.triangulateHole(intersectionInfo.intersectedFaces, intersectionInfo.listAB, intersectionInfo.listBA);\n            if (intersectionInfo.vi !== v[1]) {\n                stack.push([intersectionInfo.vi, v[1]]);\n            }\n        }\n    }\n\n    triangulateHole(intersectedFaces: Triangle[], listAB: Edge[], listBA: Edge[]) {\n        const edges: Edge[] = [];\n        this.triangulateHole2(intersectedFaces, listAB, listBA, edges);\n        this.propagatingFlipE(edges);\n    }\n\n    triangulateHole2(intersectedFaces: Triangle[], listAB: Edge[], listBA: Edge[], edges: Edge[]) {\n        if (listAB.length > 0) {\n            this.triangulateHalfHole(listAB, edges);\n            this.triangulateHalfHole(listBA, edges);\n            const fl = listAB[0][0];\n            const fr = listBA[0][0];\n            fl.neighbours[2] = fr;\n            fr.neighbours[2] = fl;\n            fl.constraints[2] = true;\n            fr.constraints[2] = true;\n\n            while (intersectedFaces.length > 0) {\n                this.tds.deleteTriangle(intersectedFaces.shift()!);\n            }\n        }\n    }\n\n    triangulateHalfHole(conflictBoundaries: Edge[], edges: Edge[]) {\n        let iC = 0;\n        let iN: number;\n        let iT: number;\n        const current = () => conflictBoundaries[iC];\n        const next = () => conflictBoundaries[iN];\n        const tempo = () => conflictBoundaries[iT];\n\n        const va = current()[0].vertices[ccw(current()[1])]!;\n        iN = iC;\n        ++iN;\n\n        let n: Triangle;\n        let n1: Triangle;\n        let n2: Triangle;\n        let ind: number;\n        let ind1: number;\n        let ind2: number;\n        do {\n            n1 = current()[0];\n            ind1 = current()[1];\n            if (n1.neighbours[ind1] !== null) {\n                n = n1.neighbours[ind1]!;\n                ind = cw(n.indexV(n1.vertices[cw(ind1)]!));\n                n1 = n.neighbours[ind]!;\n                ind1 = this.tds.mirrorIndex(n, ind);\n            }\n            n2 = next()[0];\n            ind2 = next()[1];\n            if (n2.neighbours[ind2] !== null) {\n                n = n2.neighbours[ind2]!;\n                ind = cw(n.indexV(n2.vertices[cw(ind2)]!));\n                n2 = n.neighbours[ind]!;\n                ind2 = this.tds.mirrorIndex(n, ind);\n            }\n            const v0 = n1.vertices[ccw(ind1)]!;\n            const v1 = n1.vertices[cw(ind1)]!;\n            const v2 = n2.vertices[cw(ind2)]!;\n            const orient = orientation(v0.point!, v1.point!, v2.point!);\n            switch (orient) {\n                case Sign.RIGHT_TURN: {\n                    const newlf = this.tds.createTriangle(v0, v2, v1, null, null, null);\n                    edges.push([newlf, 2]);\n                    newlf.neighbours[1] = n1;\n                    newlf.neighbours[0] = n2;\n                    n1.neighbours[ind1] = newlf;\n                    n2.neighbours[ind2] = newlf;\n                    if (n1.isConstrained(ind1)) newlf.constraints[1] = true;\n                    if (n2.isConstrained(ind2)) newlf.constraints[0] = true;\n                    v0.triangle = newlf;\n                    v1.triangle = newlf;\n                    v2.triangle = newlf;\n                    iT = iC + 1;\n                    conflictBoundaries.splice(iC, 0, [newlf, 2]);\n                    conflictBoundaries.splice(Math.max(iT, iN), 1);\n                    conflictBoundaries.splice(Math.min(iT, iN), 1);\n                    iN = iC;\n                    if (v0 !== va) --iC;\n                    else ++iN;\n                    break;\n                }\n                case Sign.LEFT_TURN:\n                case Sign.COLLINEAR: {\n                    ++iC;\n                    ++iN;\n                    break;\n                }\n            }\n        } while (iN < conflictBoundaries.length);\n    }\n\n    findIntersectedFaces(vaa: Vertex, vbb: Vertex) {\n        const aa = vaa.point!;\n        const bb = vbb.point!;\n        const listAB: Edge[] = [];\n        const listBA: Edge[] = [];\n        const intersectedFaces: Triangle[] = [];\n        const lfc = new LineFaceCirculator(vaa, this, bb);\n        let ind = lfc.pos!.indexV(vaa);\n        let vi: Vertex;\n        if (lfc.pos!.isConstrained(ind)) {\n            vi = this.intersect(lfc.pos!, ind, vaa, vbb);\n            return { found: true, vi, listAB, listBA, intersectedFaces };\n        }\n        let lf = lfc.pos!.neighbours[ccw(ind)]!;\n        let rf = lfc.pos!.neighbours[cw(ind)]!;\n        listAB.push([lf, lf.indexT(lfc.pos!)]);\n        listBA.unshift([rf, rf.indexT(lfc.pos!)]);\n        intersectedFaces.unshift(lfc.pos!);\n        let previousFace = lfc.pos!;\n        lfc.next();\n        ind = lfc.pos!.indexT(previousFace);\n        let currentVertex = lfc.pos!.vertices[ind]!;\n        let done = false;\n        while (currentVertex !== vbb && !done) {\n            let i1: number;\n            let i2: number;\n            const orient = orientation(aa, bb, currentVertex.point!);\n            switch (orient) {\n                case Sign.COLLINEAR: {\n                    done = true;\n                    break;\n                }\n                case Sign.LEFT_TURN:\n                case Sign.RIGHT_TURN: {\n                    if (orient === Sign.LEFT_TURN) {\n                        i1 = ccw(ind);\n                        i2 = cw(ind);\n                    } else {\n                        i1 = cw(ind);\n                        i2 = ccw(ind);\n                    }\n                    if (lfc.pos!.isConstrained(i1)) {\n                        vi = this.intersect(lfc.pos!, i1, vaa, vbb);\n                        return { found: true, vi, listAB, listBA, intersectedFaces };\n                    } else {\n                        lf = lfc.pos!.neighbours[i2]!;\n                        intersectedFaces.unshift(lfc.pos!);\n                        if (orient === Sign.LEFT_TURN) listAB.push([lf, lf.indexT(lfc.pos!)]);\n                        else listBA.unshift([lf, lf.indexT(lfc.pos!)]);\n                        previousFace = lfc.pos!;\n                        lfc.next();\n                        ind = lfc.pos!.indexT(previousFace);\n                        currentVertex = lfc.pos!.vertices[ind]!;\n                    }\n                    break;\n                }\n            }\n        }\n        vi = currentVertex;\n        intersectedFaces.unshift(lfc.pos!);\n        lf = lfc.pos!.neighbours[cw(ind)]!;\n        listAB.push([lf, lf.indexT(lfc.pos!)]);\n        rf = lfc.pos!.neighbours[ccw(ind)]!;\n        listBA.unshift([rf, rf.indexT(lfc.pos!)]);\n        return { found: false, vi, listAB, listBA, intersectedFaces };\n    }\n\n    intersect(t: Triangle, i: number, vaa: Vertex, vbb: Vertex): Vertex {\n        const vcc = t.vertices[cw(i)]!;\n        const vdd = t.vertices[ccw(i)]!;\n        const pa = vaa.point!;\n        const pb = vbb.point!;\n        const pc = vcc.point!;\n        const pd = vdd.point!;\n        const pi = intersection(pa, pb, pc, pd);\n        let vi: Vertex;\n        if (pi === null) throw new Error(\"what\");\n        else {\n            this.removeConstrainedEdge(t, i);\n            vi = this.insert(pi, t);\n        }\n\n        if (vi !== vcc && vi !== vdd) {\n            this.insertConstraintV(vcc, vi);\n            this.insertConstraintV(vi, vdd);\n        } else {\n            this.insertConstraintV(vcc, vdd);\n        }\n        return vi;\n    }\n\n    removeConstrainedEdge(t: Triangle, i: number) {\n        t.constraints[i] = false;\n        if (this.tds.dimension === 2) t.neighbours[i]!.constraints[this.tds.mirrorIndex(t, i)] = false;\n    }\n\n    updateConstraintsOpposite(v: Vertex) {\n        let t = v.triangle!;\n        const start = t;\n        let indf: number;\n        do {\n            indf = t.indexV(v);\n            if (t.neighbours[indf]!.constraints[this.tds.mirrorIndex(t, indf)]) t.constraints[indf] = true;\n            else t.constraints[indf] = false;\n            t = t.neighbours[ccw(indf)]!;\n        } while (t !== start);\n    }\n\n    markConstraint(t: Triangle, i: number) {\n        if (this.tds.dimension === 1) t.constraints[2] = true;\n        else {\n            t.constraints[i] = true;\n            t.neighbours[i]!.constraints[this.tds.mirrorIndex(t, i)] = true;\n        }\n    }\n\n    insert(p: Point, start: Triangle | null = null) {\n        const locateInfo = this.locate(p, this.iLocate(p, start));\n        const va = this.insertb(p, locateInfo.loc, locateInfo.lt, locateInfo.li);\n        this.flipAround(va);\n        return va;\n    }\n\n    flipAround(v: Vertex) {\n        if (this.tds.dimension <= 1) return;\n        let t = v.triangle!;\n        let i: number;\n        let next: Triangle;\n        const start = t;\n        do {\n            i = t.indexV(v);\n            next = t.neighbours[ccw(i)]!;\n            this.propagatingFlip(t, i);\n            t = next;\n        } while (next !== start);\n    }\n\n    propagatingFlip(t: Triangle, i: number, depth = 0) {\n        if (!this.isFlipable(t, i)) return;\n        const maxDepth = 100;\n        if (depth === maxDepth) {\n            throw new Error(\"maxde\");\n            return;\n        }\n        const ni = t.neighbours[i]!;\n        this.flip(t, i);\n        this.propagatingFlip(t, i, depth + 1);\n        i = ni.indexV(t.vertices[i]!);\n        this.propagatingFlip(ni, i, depth + 1);\n    }\n\n    lessEdge(e1: Edge, e2: Edge) {\n        const ind1 = e1[1];\n        const ind2 = e2[1];\n        /* return( (&(*e1.first) < &(*e2.first))\n         || ( (&(*e1.first) == &(*e2.first)) && (ind1 < ind2)));*/\n        // TODO: This is not proper.\n        // console.error(\"This has to be done correctly\");\n        return ind1 < ind2;\n    }\n\n    propagatingFlipE(edges: Edge[]) {\n        let eI = 0;\n        let t: Triangle;\n        let i: number;\n        let eni: Edge;\n        const edgeSet: Edge[] = [];\n        while (eI < edges.length) {\n            t = edges[eI][0];\n            i = edges[eI][1];\n            if (this.isFlipable(t, i)) {\n                eni = [t.neighbours[i]!, this.tds.mirrorIndex(t, i)];\n                if (this.lessEdge(edges[eI], eni)) edgeSet.push(edges[eI]);\n                else edgeSet.push(eni);\n            }\n            ++eI;\n        }\n        let indf: number;\n        let ni: Triangle;\n        let indn: number;\n        let ei: Edge;\n        const e: (Edge | null)[] = [null, null, null, null];\n        while (edgeSet.length > 0) {\n            t = edgeSet[0][0];\n            indf = edgeSet[0][1];\n            ni = t.neighbours[indf]!;\n            indn = this.tds.mirrorIndex(t, indf);\n            ei = [t, indf];\n            edgeSet.splice(edgeSet.findIndex(ed => ed[0] === ei[0] && ed[1] === ei[1]), 1);\n            e[0] = [t, cw(indf)];\n            e[1] = [t, ccw(indf)];\n            e[2] = [ni, cw(indn)];\n            e[3] = [ni, ccw(indn)];\n\n            for (const edge of e) {\n                const tt = edge![0];\n                const ii = edge![1];\n                if (this.isFlipable(tt, ii)) {\n                    eni = [tt.neighbours[ii]!, this.tds.mirrorIndex(tt, ii)];\n                    if (this.lessEdge(edge!, eni)) edgeSet.push(edge!);\n                    else edgeSet.push(eni);\n                }\n            }\n        }\n    }\n\n    flip(t: Triangle, i: number) {\n        const u = t.neighbours[i]!;\n        const j = this.tds.mirrorIndex(t, i);\n        const t1 = t.neighbours[cw(i)]!;\n        const i1 = this.tds.mirrorIndex(t, cw(i));\n        const t2 = t.neighbours[ccw(i)]!;\n        const i2 = this.tds.mirrorIndex(t, ccw(i));\n        const t3 = u.neighbours[cw(j)]!;\n        const i3 = this.tds.mirrorIndex(u, cw(j));\n        const t4 = u.neighbours[ccw(j)]!;\n        const i4 = this.tds.mirrorIndex(u, ccw(j));\n        this.tds.flip(t, i);\n        t.constraints[t.indexT(u)] = false;\n        u.constraints[u.indexT(t)] = false;\n        t1.neighbours[i1]!.constraints[this.tds.mirrorIndex(t1, i1)] = t1.constraints[i1];\n        t2.neighbours[i2]!.constraints[this.tds.mirrorIndex(t2, i2)] = t2.constraints[i2];\n        t3.neighbours[i3]!.constraints[this.tds.mirrorIndex(t3, i3)] = t3.constraints[i3];\n        t4.neighbours[i4]!.constraints[this.tds.mirrorIndex(t4, i4)] = t4.constraints[i4];\n    }\n\n    isFlipable(t: Triangle, i: number, perturb = true) {\n        const ni = t.neighbours[i]!;\n        if (t.isInfinite() || ni.isInfinite()) return false;\n        if (t.constraints[i]) return false;\n        return sideOfOrientedCircle(ni, t.vertices[i]!.point!, perturb) === Sign.ON_POSITIVE_SIDE;\n    }\n\n    insertb(a: Point, loc: Triangle | null, lt: LocateType, li: number): Vertex {\n        let insertInConstrainedEdge = false;\n        let v1: Vertex;\n        let v2: Vertex;\n        if (lt === LocateType.EDGE && loc!.isConstrained(li)) {\n            insertInConstrainedEdge = true;\n            v1 = loc!.vertices[ccw(li)]!;\n            v2 = loc!.vertices[cw(li)]!;\n        }\n        const va = this.insertc(a, loc, lt, li);\n        if (insertInConstrainedEdge) this.updateConstraintsIncident(va, v1!, v2!);\n        else if (lt !== LocateType.VERTEX) this.clearConstraintsIncident(va);\n        if (this.tds.dimension === 2) this.updateConstraintsOpposite(va);\n        return va;\n    }\n\n    updateConstraintsIncident(va: Vertex, c1: Vertex, c2: Vertex) {\n        if (this.tds.dimension === 0) return;\n        if (this.tds.dimension === 1) {\n            const ec = new EdgeCirculator(va, null);\n            do {\n                ec.t!.constraints[2] = true;\n            } while (ec.next());\n        } else {\n            const fc = new FaceCirculator(va, null);\n            do {\n                const indf = fc.t!.indexV(va);\n                const cwi = cw(indf);\n                const ccwi = ccw(indf);\n                if (fc.t!.vertices[cwi] === c1 || fc.t!.vertices[cwi] === c2) {\n                    fc.t!.constraints[ccwi] = true;\n                    fc.t!.constraints[cwi] = false;\n                } else {\n                    fc.t!.constraints[ccwi] = false;\n                    fc.t!.constraints[cwi] = true;\n                }\n            } while (fc.next());\n        }\n    }\n\n    clearConstraintsIncident(v: Vertex) {\n        const ec = new EdgeCirculator(v, null);\n        if (ec.valid) {\n            do {\n                const t = ec.t!;\n                const indf = ec.ri;\n                t.constraints[indf] = false;\n                if (this.tds.dimension === 2) t.neighbours[indf]!.constraints[this.tds.mirrorIndex(t, indf)] = false;\n            } while (ec.next());\n        }\n    }\n\n    insertc(p: Point, loc: Triangle | null, lt: LocateType, li: number): Vertex {\n        if (this.tds.vertices.length === 1) {\n            return this.insertFirst(p);\n        } else if (this.tds.vertices.length === 2) {\n            if (lt === LocateType.VERTEX) return this.tds.finiteVertex;\n            else return this.insertSecond(p);\n        }\n        switch (lt) {\n            case LocateType.VERTEX: {\n                return loc!.vertices[li]!;\n            }\n            case LocateType.OUTSIDE_AFFINE_HULL: {\n                return this.insertOutsideAffineHull(p);\n            }\n            case LocateType.OUTSIDE_CONVEX_HULL: {\n                return this.insertOutsideConvexHull(p, loc!);\n            }\n            case LocateType.EDGE: {\n                return this.insertInEdge(p, loc!, li);\n            }\n            case LocateType.FACE: {\n                return this.insertInFace(p, loc!);\n            }\n        }\n        throw new Error(\"qwe\");\n        return new Vertex();\n    }\n\n    insertInEdge(p: Point, loc: Triangle, li: number): Vertex {\n        const v = this.tds.insertInEdge(loc, li);\n        v.point = p;\n        return v;\n    }\n\n    insertInFace(p: Point, loc: Triangle): Vertex {\n        const v = this.tds.insertInFace(loc);\n        v.point = p;\n        return v;\n    }\n\n    insertFirst(p: Point): Vertex {\n        const v = this.tds.insertDimUp();\n        v.point = p;\n        return v;\n    }\n\n    insertSecond(p: Point): Vertex {\n        const v = this.tds.insertDimUp(this.tds._infinite, true);\n        v.point = p;\n        return v;\n    }\n\n    insertOutsideAffineHull(p: Point): Vertex {\n        let conform = false;\n        if (this.tds.dimension === 1) {\n            const t = this.tds.finiteEdge.first!;\n            const orient = orientation(t.vertices[0]!.point!, t.vertices[1]!.point!, p);\n            conform = orient === Sign.COUNTERCLOCKWISE;\n        }\n        const v = this.tds.insertDimUp(this.tds._infinite, conform);\n        v.point = p;\n        return v;\n    }\n\n    insertOutsideConvexHull(p: Point, t: Triangle): Vertex {\n        let v: Vertex;\n        if (this.tds.dimension === 1) {\n            throw new Error(\"sdfasdasd\");\n        } else {\n            v = this.insertOutsideConvexHull2(p, t);\n        }\n        v.point = p;\n        return v;\n    }\n\n    insertOutsideConvexHull2(p: Point, t: Triangle): Vertex {\n        let li = t.indexV(this.tds._infinite);\n        const ccwlist: Triangle[] = [];\n        const cwlist: Triangle[] = [];\n        let fc = new FaceCirculator(this.tds._infinite, t);\n        let done = false;\n        while (!done) {\n            fc.prev();\n            li = fc.t!.indexV(this.tds._infinite);\n            const q = fc.t!.vertices[ccw(li)]!.point!;\n            const r = fc.t!.vertices[cw(li)]!.point!;\n            if (orientation(p, q, r) === Sign.LEFT_TURN) ccwlist.push(fc.t!);\n            else done = true;\n        }\n        fc = new FaceCirculator(this.tds._infinite, t);\n        done = false;\n        while (!done) {\n            fc.next();\n            li = fc.t!.indexV(this.tds._infinite);\n            const q = fc.t!.vertices[ccw(li)]!.point!;\n            const r = fc.t!.vertices[cw(li)]!.point!;\n            if (orientation(p, q, r) === Sign.LEFT_TURN) cwlist.push(fc.t!);\n            else done = true;\n        }\n        const v = this.tds.insertInFace(t);\n        v.point = p;\n        let th;\n        while (ccwlist.length > 0) {\n            th = ccwlist[0];\n            li = ccw(th.indexV(this.tds._infinite));\n            this.tds.flip(th, li);\n            ccwlist.shift();\n        }\n        while (cwlist.length > 0) {\n            th = cwlist[0];\n            li = cw(th.indexV(this.tds._infinite));\n            this.tds.flip(th, li);\n            cwlist.shift();\n        }\n        fc = new FaceCirculator(v, null);\n        while (!fc.t!.isInfinite()) fc.next();\n        this.tds._infinite.triangle = fc.t!;\n        return v;\n    }\n\n    locate(p: Point, start: Triangle | null) {\n        let lt = 0;\n        let li = 0;\n        if (this.tds.dimension < 0) {\n            lt = LocateType.OUTSIDE_AFFINE_HULL;\n            li = 4;\n            return { loc: null, lt, li };\n        } else if (this.tds.dimension === 0) {\n            if (xyEqual(p, this.tds.finiteVertex.triangle!.vertices[0]!.point!)) {\n                lt = LocateType.VERTEX;\n            } else {\n                lt = LocateType.OUTSIDE_AFFINE_HULL;\n            }\n            li = 4;\n            return { loc: null, lt, li };\n        } else if (this.tds.dimension === 1) {\n            return this.marchLocate1D(p);\n        }\n        if (start === null) {\n            const t = this.tds._infinite.triangle!;\n            start = t.neighbours[t.indexV(this.tds._infinite)]!;\n        } else if (start.isInfinite()) {\n            start = start.neighbours[start.indexV(this.tds._infinite)]!;\n        }\n        return this.marchLocate2D(start, p);\n    }\n\n    marchLocate1D(p: Point) {\n        const ff = this.tds._infinite.triangle!;\n        const iv = ff.indexV(this.tds._infinite);\n        const t = ff.neighbours[iv]!;\n        const pqt = orientation(t.vertices[0]!.point!, t.vertices[1]!.point!, p);\n        if (pqt === Sign.RIGHT_TURN || pqt === Sign.LEFT_TURN) {\n            return { loc: new Triangle(), lt: LocateType.OUTSIDE_AFFINE_HULL, li: 4 };\n        }\n        const i = t.indexT(ff);\n        if (collinearBetween(p, t.vertices[1 - i]!.point!, t.vertices[i]!.point!))\n            return { loc: ff, lt: LocateType.OUTSIDE_CONVEX_HULL, li: iv };\n\n        if (xyEqual(p, t.vertices[1 - i]!.point!)) return { loc: t, lt: LocateType.VERTEX, li: 1 - i };\n        throw new Error(\"sdfsdf\");\n    }\n\n    marchLocate2D(c: Triangle, p: Point) {\n        let prev = null;\n        let first = true;\n        let lt: LocateType | undefined;\n        let li: number | undefined;\n        while (true) {\n            if (c.isInfinite()) {\n                return { loc: c, lt: LocateType.OUTSIDE_CONVEX_HULL, li: c.indexV(this.tds._infinite) };\n            }\n            const leftFirst = Math.round(Math.random());\n            const p0 = c.vertices[0]!.point!;\n            const p1 = c.vertices[1]!.point!;\n            const p2 = c.vertices[2]!.point!;\n            let o0: Sign;\n            let o1: Sign;\n            let o2: Sign;\n            if (first) {\n                prev = c;\n                first = false;\n                o0 = orientation(p0, p1, p);\n                if (o0 === Sign.NEGATIVE) {\n                    c = c.neighbours[2]!;\n                    continue;\n                }\n                o1 = orientation(p1, p2, p);\n                if (o1 === Sign.NEGATIVE) {\n                    c = c.neighbours[0]!;\n                    continue;\n                }\n                o2 = orientation(p2, p0, p);\n                if (o2 === Sign.NEGATIVE) {\n                    c = c.neighbours[1]!;\n                    continue;\n                }\n            } else if (leftFirst) {\n                if (c.neighbours[0]! === prev) {\n                    prev = c;\n                    o0 = orientation(p0, p1, p);\n                    if (o0 === Sign.NEGATIVE) {\n                        c = c.neighbours[2]!;\n                        continue;\n                    }\n                    o2 = orientation(p2, p0, p);\n                    if (o2 === Sign.NEGATIVE) {\n                        c = c.neighbours[1]!;\n                        continue;\n                    }\n                    o1 = Sign.POSITIVE;\n                } else if (c.neighbours[1]! === prev) {\n                    prev = c;\n                    o1 = orientation(p1, p2, p);\n                    if (o1 === Sign.NEGATIVE) {\n                        c = c.neighbours[0]!;\n                        continue;\n                    }\n                    o0 = orientation(p0, p1, p);\n                    if (o0 === Sign.NEGATIVE) {\n                        c = c.neighbours[2]!;\n                        continue;\n                    }\n                    o2 = Sign.POSITIVE;\n                } else {\n                    prev = c;\n                    o2 = orientation(p2, p0, p);\n                    if (o2 === Sign.NEGATIVE) {\n                        c = c.neighbours[1]!;\n                        continue;\n                    }\n                    o1 = orientation(p1, p2, p);\n                    if (o1 === Sign.NEGATIVE) {\n                        c = c.neighbours[0]!;\n                        continue;\n                    }\n                    o0 = Sign.POSITIVE;\n                }\n            } else {\n                if (c.neighbours[0] === prev) {\n                    prev = c;\n                    o2 = orientation(p2, p0, p);\n                    if (o2 === Sign.NEGATIVE) {\n                        c = c.neighbours[1]!;\n                        continue;\n                    }\n                    o0 = orientation(p0, p1, p);\n                    if (o0 === Sign.NEGATIVE) {\n                        c = c.neighbours[2]!;\n                        continue;\n                    }\n                    o1 = Sign.POSITIVE;\n                } else if (c.neighbours[1] === prev) {\n                    prev = c;\n                    o0 = orientation(p0, p1, p);\n                    if (o0 === Sign.NEGATIVE) {\n                        c = c.neighbours[2]!;\n                        continue;\n                    }\n                    o1 = orientation(p1, p2, p);\n                    if (o1 === Sign.NEGATIVE) {\n                        c = c.neighbours[0]!;\n                        continue;\n                    }\n                    o2 = Sign.POSITIVE;\n                } else {\n                    prev = c;\n                    o1 = orientation(p1, p2, p);\n                    if (o1 === Sign.NEGATIVE) {\n                        c = c.neighbours[0]!;\n                        continue;\n                    }\n                    o2 = orientation(p2, p0, p);\n                    if (o2 === Sign.NEGATIVE) {\n                        c = c.neighbours[1]!;\n                        continue;\n                    }\n                    o0 = Sign.POSITIVE;\n                }\n            }\n            const sum =\n                (o0 === Sign.COLLINEAR ? 1 : 0) + (o1 === Sign.COLLINEAR ? 1 : 0) + (o2 === Sign.COLLINEAR ? 1 : 0);\n            switch (sum) {\n                case 0: {\n                    lt = LocateType.FACE;\n                    li = 4;\n                    break;\n                }\n                case 1: {\n                    lt = LocateType.EDGE;\n                    li = o0 === Sign.COLLINEAR ? 2 : o1 === Sign.COLLINEAR ? 0 : 1;\n                    break;\n                }\n                case 2: {\n                    lt = LocateType.VERTEX;\n                    li = o0 !== Sign.COLLINEAR ? 2 : o1 !== Sign.COLLINEAR ? 0 : 1;\n                    break;\n                }\n            }\n            if (lt === undefined || li === undefined) throw new Error(\"ert\");\n            return { loc: c, lt, li };\n        }\n    }\n\n    iLocate(p: Point, start: Triangle | null) {\n        if (this.tds.dimension < 2) return start;\n        if (start === null) {\n            const t = this.tds._infinite.triangle!;\n            start = t.neighbours[t.indexV(this.tds._infinite)];\n        } else if (start.isInfinite()) {\n            start = start.neighbours[start.indexV(this.tds._infinite)];\n        }\n        let prev = null;\n        let c = start!;\n        let first = true;\n        let nTurns = 2500;\n        while (true) {\n            if (!nTurns--) return c;\n            if (c.isInfinite()) return c;\n            const p0 = c.vertices[0]!.point!;\n            const p1 = c.vertices[1]!.point!;\n            const p2 = c.vertices[2]!.point!;\n            if (first) {\n                prev = c;\n                first = false;\n                if (hasInexactNegativeOrientation(p0, p1, p)) {\n                    c = c.neighbours[2]!;\n                    continue;\n                }\n                if (hasInexactNegativeOrientation(p1, p2, p)) {\n                    c = c.neighbours[0]!;\n                    continue;\n                }\n                if (hasInexactNegativeOrientation(p2, p0, p)) {\n                    c = c.neighbours[1]!;\n                    continue;\n                }\n            } else {\n                if (c.neighbours[0] === prev) {\n                    prev = c;\n                    if (hasInexactNegativeOrientation(p0, p1, p)) {\n                        c = c.neighbours[2]!;\n                        continue;\n                    }\n                    if (hasInexactNegativeOrientation(p2, p0, p)) {\n                        c = c.neighbours[1]!;\n                        continue;\n                    }\n                } else if (c.neighbours[1] === prev) {\n                    prev = c;\n                    if (hasInexactNegativeOrientation(p0, p1, p)) {\n                        c = c.neighbours[2]!;\n                        continue;\n                    }\n                    if (hasInexactNegativeOrientation(p1, p2, p)) {\n                        c = c.neighbours[0]!;\n                        continue;\n                    }\n                } else {\n                    prev = c;\n                    if (hasInexactNegativeOrientation(p2, p0, p)) {\n                        c = c.neighbours[1]!;\n                        continue;\n                    }\n                    if (hasInexactNegativeOrientation(p1, p2, p)) {\n                        c = c.neighbours[0]!;\n                        continue;\n                    }\n                }\n            }\n            break;\n        }\n        return c;\n    }\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"menuContainer\"}},[_c('div',{ref:\"rm\",style:({\n              left: _vm.visible.settings ? '200px' : '0',\n              top: _vm.visible.locations ? '100px' : '0'\n          }),attrs:{\"id\":\"radialmenu\"}},[_c('div',{staticClass:\"rm-wrapper\"},[_c('div',{staticClass:\"rm-toggler\"},[_c('ul',{staticClass:\"rm-list\",class:{ 'rm-list-dm': _vm.IS_DM }},[(_vm.IS_DM)?_c('li',{staticClass:\"rm-item\",attrs:{\"id\":\"rm-locations\"},on:{\"click\":function($event){_vm.visible.locations = !_vm.visible.locations}}},[_vm._m(0)]):_vm._e(),_c('li',{staticClass:\"rm-item\",attrs:{\"id\":\"rm-settings\"},on:{\"click\":function($event){_vm.visible.settings = !_vm.visible.settings}}},[_vm._m(1)])])]),_vm._m(2)])]),_c('transition',{attrs:{\"name\":\"settings\"},on:{\"enter\":function($event){_vm.$refs.rm.style.transition = 'left 500ms'}}},[(_vm.visible.settings)?_c('div',{ref:\"settings\",attrs:{\"id\":\"menu\"},on:{\"click\":_vm.settingsClick}},[_c('div',{staticStyle:{\"width\":\"200px\",\"height\":\"90%\",\"overflow-y\":\"auto\",\"overflow-x\":\"hidden\"}},[(_vm.IS_DM)?[_c('button',{staticClass:\"accordion\"},[_vm._v(\"Assets\")]),_c('div',{staticClass:\"accordion-panel\"},[_c('a',{staticClass:\"actionButton\",attrs:{\"href\":\"/assets\",\"target\":\"blank\",\"title\":\"Open asset manager\"}},[_c('i',{staticClass:\"fas fa-external-link-alt\"})]),_c('div',{staticClass:\"directory\",attrs:{\"id\":\"menu-tokens\"}},[_c('asset-node',{attrs:{\"asset\":_vm.assets}}),(!_vm.assets)?_c('div',[_vm._v(\"No assets\")]):_vm._e()],1)]),_c('button',{staticClass:\"accordion\"},[_vm._v(\"Notes\")]),_c('div',{staticClass:\"accordion-panel\"},[_c('div',{staticClass:\"accordion-subpanel\",attrs:{\"id\":\"menu-notes\"}},[_c('a',{staticClass:\"actionButton\",on:{\"click\":_vm.createNote}},[_c('i',{staticClass:\"far fa-plus-square\"})]),_vm._l((_vm.notes),function(note){return _c('div',{key:note.uuid,staticStyle:{\"cursor\":\"pointer\"},on:{\"click\":function($event){_vm.openNote(note)}}},[_vm._v(_vm._s(note.title || \"[?]\"))])}),(!_vm.notes.length)?_c('div',[_vm._v(\"No notes\")]):_vm._e()],2)]),_c('button',{staticClass:\"accordion\"},[_vm._v(\"DM Options\")]),_c('div',{staticClass:\"accordion-panel\"},[_c('div',{staticClass:\"accordion-subpanel\"},[_c('label',{attrs:{\"for\":\"useGridInput\"}},[_vm._v(\"Use grid:\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.useGrid),expression:\"useGrid\"}],attrs:{\"id\":\"useGridInput\",\"type\":\"checkbox\",\"checked\":\"checked\"},domProps:{\"checked\":Array.isArray(_vm.useGrid)?_vm._i(_vm.useGrid,null)>-1:(_vm.useGrid)},on:{\"change\":function($event){var $$a=_vm.useGrid,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.useGrid=$$a.concat([$$v]))}else{$$i>-1&&(_vm.useGrid=$$a.slice(0,$$i).concat($$a.slice($$i+1)))}}else{_vm.useGrid=$$c}}}}),_c('label',{attrs:{\"for\":\"useFOWInput\"}},[_vm._v(\"Fill entire canvas with FOW:\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.fullFOW),expression:\"fullFOW\"}],attrs:{\"id\":\"useFOWInput\",\"type\":\"checkbox\"},domProps:{\"checked\":Array.isArray(_vm.fullFOW)?_vm._i(_vm.fullFOW,null)>-1:(_vm.fullFOW)},on:{\"change\":function($event){var $$a=_vm.fullFOW,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.fullFOW=$$a.concat([$$v]))}else{$$i>-1&&(_vm.fullFOW=$$a.slice(0,$$i).concat($$a.slice($$i+1)))}}else{_vm.fullFOW=$$c}}}}),_c('label',{attrs:{\"for\":\"fowOpacity\"}},[_vm._v(\"FOW opacity:\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.fowOpacity),expression:\"fowOpacity\",modifiers:{\"number\":true}}],attrs:{\"id\":\"fowOpacity\",\"type\":\"number\",\"min\":\"0\",\"max\":\"1\",\"step\":\"0.1\"},domProps:{\"value\":(_vm.fowOpacity)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.fowOpacity=_vm._n($event.target.value)},\"blur\":function($event){_vm.$forceUpdate()}}}),_c('label',{attrs:{\"for\":\"fowLOS\"}},[_vm._v(\"Only show lights in LoS:\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.fowLOS),expression:\"fowLOS\"}],attrs:{\"id\":\"fowLOS\",\"type\":\"checkbox\"},domProps:{\"checked\":Array.isArray(_vm.fowLOS)?_vm._i(_vm.fowLOS,null)>-1:(_vm.fowLOS)},on:{\"change\":function($event){var $$a=_vm.fowLOS,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.fowLOS=$$a.concat([$$v]))}else{$$i>-1&&(_vm.fowLOS=$$a.slice(0,$$i).concat($$a.slice($$i+1)))}}else{_vm.fowLOS=$$c}}}}),_c('label',{attrs:{\"for\":\"unitSizeInput\"}},[_vm._v(\"Unit Size (in ft.):\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.unitSize),expression:\"unitSize\",modifiers:{\"number\":true}}],attrs:{\"id\":\"unitSizeInput\",\"type\":\"number\"},domProps:{\"value\":(_vm.unitSize)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.unitSize=_vm._n($event.target.value)},\"blur\":function($event){_vm.$forceUpdate()}}}),_c('label',{attrs:{\"for\":\"gridSizeInput\"}},[_vm._v(\"Grid Size (in pixels):\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.gridSize),expression:\"gridSize\",modifiers:{\"number\":true}}],attrs:{\"id\":\"gridSizeInput\",\"type\":\"number\",\"min\":\"0\"},domProps:{\"value\":(_vm.gridSize)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.gridSize=_vm._n($event.target.value)},\"blur\":function($event){_vm.$forceUpdate()}}}),_c('label',{attrs:{\"for\":\"invitation\"}},[_vm._v(\"Invitation Code:\")]),_c('input',{attrs:{\"id\":\"invitation\",\"type\":\"text\",\"readonly\":\"readonly\"},domProps:{\"value\":_vm.invitationCode}})])])]:_vm._e(),_c('button',{staticClass:\"accordion\"},[_vm._v(\"Client Options\")]),_c('div',{staticClass:\"accordion-panel\"},[_c('div',{staticClass:\"accordion-subpanel\"},[_c('label',{attrs:{\"for\":\"gridColour\"}},[_vm._v(\"Grid Colour:\")]),_c('color-picker',{attrs:{\"id\":\"gridColour\",\"color\":_vm.gridColour},on:{\"update:color\":function($event){_vm.gridColour=$event}}}),_c('label',{attrs:{\"for\":\"fowColour\"}},[_vm._v(\"FOW Colour:\")]),_c('color-picker',{attrs:{\"id\":\"fowColour\",\"color\":_vm.fowColour},on:{\"update:color\":function($event){_vm.fowColour=$event}}}),_c('label',{attrs:{\"for\":\"rulerColour\"}},[_vm._v(\"Ruler Colour:\")]),_c('color-picker',{attrs:{\"id\":\"rulerColour\",\"color\":_vm.rulerColour},on:{\"update:color\":function($event){_vm.rulerColour=$event}}}),_c('label',{attrs:{\"for\":\"visionMode\"}},[_vm._v(\"Vision Mode:\")]),_c('select',{attrs:{\"id\":\"visionMode\"},on:{\"change\":_vm.changeVisionMode}},[_c('option',[_vm._v(\"BVH\")]),_c('option',[_vm._v(\"Triangle\")])])],1)])],2),_c('router-link',{staticClass:\"accordion\",staticStyle:{\"text-decoration\":\"none\",\"display\":\"inline-block\",\"position\":\"absolute\",\"bottom\":\"0\"},attrs:{\"to\":\"/dashboard\"}},[_vm._v(\"Exit\")])],1):_vm._e()]),_c('transition',{attrs:{\"name\":\"locations\"},on:{\"enter\":function($event){_vm.$refs.rm.style.transition = 'top 500ms'}}},[(_vm.IS_DM && _vm.visible.locations)?_c('div',{attrs:{\"id\":\"locations-menu\"}},[_c('div',[_vm._l((_vm.locations),function(location){return _c('div',{key:location,on:{\"click\":function($event){_vm.changeLocation(location)}}},[_vm._v(_vm._s(location))])}),_c('div',{on:{\"click\":_vm.createLocation}},[_c('i',{staticClass:\"fas fa-plus\"})])],2)]):_vm._e()]),_c('img',{attrs:{\"id\":\"dragImage\"}})],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('a',{attrs:{\"href\":\"#\"}},[_c('i',{staticClass:\"far fa-compass\"})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('a',{attrs:{\"href\":\"#\"}},[_c('i',{staticClass:\"fas fa-cog\"})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',{staticClass:\"rm-topper\"},[_c('i',{staticClass:\"icon-share-alt\"})])}]\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"74f43d04-vue-loader-template\\\"}!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./menu.vue?vue&type=template&id=21f210ea&scoped=true&\"","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./draw.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./draw.vue?vue&type=script&lang=ts&\"","import { GlobalPoint } from \"@/game/geom\";\nimport { GridLayer } from \"@/game/layers/grid\";\nimport { Layer } from \"@/game/layers/layer\";\nimport { Asset } from \"@/game/shapes/asset\";\nimport { Shape } from \"@/game/shapes/shape\";\nimport { gameStore } from \"@/game/store\";\nimport { l2gx, l2gy, l2gz } from \"@/game/units\";\n\nclass LayerManager {\n    layers: Layer[] = [];\n    width = window.innerWidth;\n    height = window.innerHeight;\n\n    UUIDMap: Map<string, Shape> = new Map();\n\n    // Refresh interval and redraw setter.\n    interval = 30;\n\n    constructor() {\n        requestAnimationFrame(this.drawLoop);\n    }\n\n    reset() {\n        this.layers = [];\n        this.UUIDMap = new Map();\n    }\n\n    drawLoop = () => {\n        for (let i = this.layers.length - 1; i >= 0; i--) {\n            this.layers[i].draw();\n        }\n        requestAnimationFrame(this.drawLoop);\n    };\n\n    setWidth(width: number): void {\n        this.width = width;\n        for (const layer of this.layers) {\n            layer.canvas.width = width;\n            layer.width = width;\n        }\n    }\n\n    setHeight(height: number): void {\n        this.height = height;\n        for (const layer of this.layers) {\n            layer.canvas.height = height;\n            layer.height = height;\n        }\n    }\n\n    addLayer(layer: Layer): void {\n        this.layers.push(layer);\n        if (!gameStore.IS_DM && !layer.playerEditable) return;\n        if (layer.selectable) gameStore.addLayer(layer.name);\n    }\n\n    hasLayer(name: string): boolean {\n        return this.layers.some(l => l.name === name);\n    }\n\n    getLayer(name?: string) {\n        name = name === undefined ? gameStore.selectedLayer : name;\n        for (const layer of this.layers) {\n            if (layer.name === name) return layer;\n        }\n    }\n\n    selectLayer(name: string, sync: boolean = true): void {\n        let found = false;\n        for (const layer of this.layers) {\n            if (!layer.selectable) continue;\n            if (found && layer.name !== \"fow\") layer.ctx.globalAlpha = 0.3;\n            else layer.ctx.globalAlpha = 1.0;\n\n            if (name === layer.name) {\n                gameStore.selectLayer({ name, sync });\n                found = true;\n            }\n\n            layer.clearSelection();\n            layer.invalidate(true);\n        }\n    }\n\n    getGridLayer(): GridLayer | undefined {\n        return <GridLayer>this.getLayer(\"grid\");\n    }\n\n    hasSelection() {\n        const selection = this.getSelection();\n        return selection !== undefined && selection.length > 0;\n    }\n\n    // THIS INCLUDES POTENTIALLY THE SelectTool.SelectionHelper !!!\n    getSelection() {\n        const layer = this.getLayer();\n        if (layer === undefined) return undefined;\n        return layer.selection;\n    }\n\n    invalidate(): void {\n        for (let i = this.layers.length - 1; i >= 0; i--) {\n            this.layers[i].invalidate(true);\n        }\n    }\n\n    invalidateLight() {\n        for (let i = this.layers.length - 1; i >= 0; i--)\n            if (this.layers[i].isVisionLayer) this.layers[i].invalidate(true);\n    }\n\n    dropAsset(event: DragEvent) {\n        const layer = this.getLayer();\n        if (layer === undefined || event === null || event.dataTransfer === null) return;\n        const image = document.createElement(\"img\");\n        image.src = event.dataTransfer.getData(\"text/plain\");\n        const asset = new Asset(\n            image,\n            new GlobalPoint(l2gx(event.clientX), l2gy(event.clientY)),\n            l2gz(image.width),\n            l2gz(image.height),\n        );\n        asset.src = new URL(image.src).pathname;\n\n        if (gameStore.useGrid) {\n            const gs = gameStore.gridSize;\n            asset.refPoint.x = Math.round(asset.refPoint.x / gs) * gs;\n            asset.refPoint.y = Math.round(asset.refPoint.y / gs) * gs;\n            asset.w = Math.max(Math.round(asset.w / gs) * gs, gs);\n            asset.h = Math.max(Math.round(asset.h / gs) * gs, gs);\n        }\n\n        layer.addShape(asset, true);\n    }\n}\n\nexport const layerManager = new LayerManager();\n(<any>window).lm = layerManager;\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./initiative.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./initiative.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./createtoken_modal.vue?vue&type=template&id=66ccc134&scoped=true&\"\nimport script from \"./createtoken_modal.vue?vue&type=script&lang=ts&\"\nexport * from \"./createtoken_modal.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./createtoken_modal.vue?vue&type=style&index=0&id=66ccc134&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"66ccc134\",\n  null\n  \n)\n\ncomponent.options.__file = \"createtoken_modal.vue\"\nexport default component.exports","import { BoundingRect } from \"@/game/shapes/boundingrect\";\n\nexport class BoundingNode {\n    bbox: BoundingRect;\n    nPrimitives: number;\n    children: BoundingNode[] = [];\n    constructor(nPrimitives: number, bbox: BoundingRect) {\n        this.nPrimitives = nPrimitives;\n        this.bbox = bbox;\n    }\n}\n\nexport class LeafNode extends BoundingNode {\n    firstPrimOffset: number;\n    constructor(first: number, n: number, bbox: BoundingRect) {\n        super(n, bbox);\n        this.firstPrimOffset = first;\n    }\n}\n\nexport class InteriorNode extends BoundingNode {\n    dimension: number;\n    constructor(dimension: number, c1: BoundingNode, c2: BoundingNode) {\n        super(0, c1.bbox.union(c2.bbox));\n        this.dimension = dimension;\n        this.children.push(c1);\n        this.children.push(c2);\n    }\n}\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./createtoken_modal.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./createtoken_modal.vue?vue&type=script&lang=ts&\"","import Tools from \"../ui/tools/tools.vue\";\n\nimport { getRef } from \"@/core/utils\";\nimport { socket } from \"@/game/api/socket\";\nimport { sendClientOptions } from \"@/game/api/utils\";\nimport { EventBus } from \"@/game/event-bus\";\nimport { Vector } from \"@/game/geom\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { gameStore } from \"@/game/store\";\nimport { calculateDelta } from \"@/game/ui/tools/utils\";\n\nexport function onKeyUp(event: KeyboardEvent) {\n    if (event.target instanceof HTMLInputElement || event.target instanceof HTMLTextAreaElement) {\n    } else {\n        if (event.key === \"Delete\" || event.key === \"Del\" || event.key === \"Backspace\") {\n            if (layerManager.getLayer === undefined) {\n                console.log(\"No active layer selected for delete operation\");\n                return;\n            }\n            const l = layerManager.getLayer()!;\n            for (let i = l.selection.length - 1; i >= 0; i--) {\n                const sel = l.selection[i];\n                if ((<any>getRef<Tools>(\"tools\").$refs.selectTool).selectionHelper.uuid === sel.uuid) {\n                    l.selection.splice(i, 1);\n                    continue;\n                }\n                l.removeShape(sel, true, false);\n                EventBus.$emit(\"SelectionInfo.Shape.Set\", null);\n                EventBus.$emit(\"Initiative.Remove\", sel.uuid);\n            }\n        }\n    }\n}\n\nexport function onKeyDown(event: KeyboardEvent) {\n    if (event.target instanceof HTMLInputElement || event.target instanceof HTMLTextAreaElement) {\n        if (event.keyCode === 65 && event.ctrlKey) event.target!.select();\n    } else {\n        if (event.keyCode >= 37 && event.keyCode <= 40) {\n            // todo: this should already be rounded\n            const gridSize = Math.round(gameStore.gridSize);\n            let offsetX = gridSize * (event.keyCode % 2);\n            let offsetY = gridSize * (event.keyCode % 2 ? 0 : 1);\n            if (layerManager.hasSelection()) {\n                const selection = layerManager.getSelection()!;\n                offsetX *= event.keyCode <= 38 ? -1 : 1;\n                offsetY *= event.keyCode <= 38 ? -1 : 1;\n                let delta = new Vector(offsetX, offsetY);\n                if (!event.shiftKey || !gameStore.IS_DM) {\n                    // First check for collisions.  Using the smooth wall slide collision check used on mouse move is overkill here.\n                    for (const sel of selection) delta = calculateDelta(delta, sel);\n                }\n                for (const sel of selection) {\n                    sel.refPoint.x += delta.x;\n                    sel.refPoint.y += delta.y;\n                    if (sel.refPoint.x % gridSize !== 0 || sel.refPoint.y % gridSize !== 0) sel.snapToGrid();\n                    socket.emit(\"Shape.Position.Update\", { shape: sel.asDict(), redraw: true, temporary: false });\n                }\n                layerManager.getLayer()!.invalidate(false);\n            } else {\n                // The pan offsets should be in the opposite direction to give the correct feel.\n                gameStore.increasePanX(offsetX * (event.keyCode <= 38 ? 1 : -1));\n                gameStore.increasePanY(offsetY * (event.keyCode <= 38 ? 1 : -1));\n                layerManager.invalidate();\n                sendClientOptions();\n            }\n        } else if (event.keyCode === 68) {\n            const layer = layerManager.getLayer();\n            if (layer) {\n                layer.clearSelection();\n                layer.invalidate(true);\n            }\n        }\n    }\n}\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./manager.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./manager.vue?vue&type=style&index=0&lang=css&\"","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\n\nimport ShapeContext from \"@/game/ui/selection/shapecontext.vue\";\nimport CreateTokenModal from \"@/game/ui/tools/createtoken_modal.vue\";\nimport DrawTool from \"@/game/ui/tools/draw.vue\";\nimport MapTool from \"@/game/ui/tools/map.vue\";\nimport PanTool from \"@/game/ui/tools/pan\";\nimport SelectTool from \"@/game/ui/tools/select.vue\";\n\nimport { layerManager } from \"@/game/layers/manager\";\nimport { gameManager } from \"@/game/manager\";\nimport { gameStore } from \"@/game/store\";\nimport { RulerTool } from \"@/game/ui/tools/ruler\";\nimport { l2g } from \"@/game/units\";\nimport { getMouse } from \"@/game/utils\";\nimport Component from \"vue-class-component\";\n\n@Component({\n    components: {\n        \"select-tool\": SelectTool,\n        \"pan-tool\": PanTool,\n        \"draw-tool\": DrawTool,\n        \"ruler-tool\": RulerTool,\n        \"map-tool\": MapTool,\n        \"shape-menu\": ShapeContext,\n        \"createtoken-dialog\": CreateTokenModal,\n    },\n    watch: {\n        currentTool(newValue, oldValue) {\n            this.$emit(\"tools-select-change\", newValue, oldValue);\n        },\n    },\n})\nexport default class Tools extends Vue {\n    $refs!: {\n        selectTool: InstanceType<typeof SelectTool>;\n    };\n\n    currentTool = \"Select\";\n    tools = [\"Select\", \"Pan\", \"Draw\", \"Ruler\", \"Map\"];\n    dmTools = [\"Map\"];\n\n    get IS_DM(): boolean {\n        return gameStore.IS_DM;\n    }\n\n    get currentToolComponent(): string {\n        return `${this.currentTool.toLowerCase()}-tool`;\n    }\n\n    mousedown(event: MouseEvent) {\n        if ((<HTMLElement>event.target).tagName !== \"CANVAS\") return;\n\n        let targetTool = this.currentTool;\n        if (event.button === 1) {\n            targetTool = \"Pan\";\n        } else if (event.button !== 0) {\n            return;\n        }\n\n        this.$emit(\"mousedown\", event, targetTool);\n    }\n    mouseup(event: MouseEvent) {\n        if ((<HTMLElement>event.target).tagName !== \"CANVAS\") return;\n\n        let targetTool = this.currentTool;\n        if (event.button === 1) {\n            targetTool = \"Pan\";\n        } else if (event.button !== 0) {\n            return;\n        }\n\n        this.$emit(\"mouseup\", event, targetTool);\n    }\n    mousemove(event: MouseEvent) {\n        if ((<HTMLElement>event.target).tagName !== \"CANVAS\") return;\n\n        let targetTool = this.currentTool;\n        if ((event.buttons & 4) !== 0) {\n            targetTool = \"Pan\";\n        } else if ((event.button & 1) > 1) {\n            return;\n        }\n\n        this.$emit(\"mousemove\", event, targetTool);\n\n        // Annotation hover\n        let found = false;\n        for (const uuid of gameStore.annotations) {\n            if (layerManager.UUIDMap.has(uuid) && layerManager.hasLayer(\"draw\")) {\n                const shape = layerManager.UUIDMap.get(uuid)!;\n                if (shape.contains(l2g(getMouse(event)))) {\n                    found = true;\n                    gameManager.annotationManager.setActiveText(shape.annotation);\n                }\n            }\n        }\n        if (!found && gameManager.annotationManager.shown) {\n            gameManager.annotationManager.setActiveText(\"\");\n        }\n    }\n    mouseleave(event: MouseEvent) {\n        // When leaving the window while a mouse is pressed down, act as if it was released\n        if ((event.buttons & 1) !== 0) {\n            this.$emit(\"mouseup\", event, this.currentTool);\n        }\n    }\n    contextmenu(event: MouseEvent) {\n        if ((<HTMLElement>event.target).tagName !== \"CANVAS\") return;\n        if (event.button !== 2 || (<HTMLElement>event.target).tagName !== \"CANVAS\") return;\n        this.$emit(\"contextmenu\", event, this.currentTool);\n    }\n}\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./selection_info.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./selection_info.vue?vue&type=script&lang=ts&\"","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./modal.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./modal.vue?vue&type=script&lang=ts&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./contextmenu.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./contextmenu.vue?vue&type=style&index=0&lang=css&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./selection_info.vue?vue&type=style&index=0&id=32cec914&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./selection_info.vue?vue&type=style&index=0&id=32cec914&scoped=true&lang=css&\"","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\n\nimport Modal from \"@/core/components/modals/modal.vue\";\n\n@Component({\n    components: {\n        Modal,\n    },\n})\nexport default class Prompt extends Vue {\n    $refs!: {\n        answer: HTMLElement;\n    };\n\n    visible = false;\n    question = \"\";\n    answer = \"\";\n    title = \"\";\n\n    resolve = (value: string) => {};\n    reject = () => {};\n\n    submit() {\n        this.resolve(this.answer);\n        this.close();\n    }\n    close() {\n        this.reject();\n        this.visible = false;\n        this.question = \"\";\n        this.answer = \"\";\n        this.title = \"\";\n    }\n    prompt(question: string, title: string): Promise<string> {\n        this.question = question;\n        this.title = title;\n        this.visible = true;\n        this.$nextTick(() => {\n            this.$refs.answer.focus();\n        });\n        return new Promise((resolve, reject) => {\n            this.resolve = resolve;\n            this.reject = reject;\n        });\n    }\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ul',[_vm._l((_vm.folders),function(folder){return _c('li',{key:folder,staticClass:\"folder\",on:{\"click\":function($event){$event.stopPropagation();return _vm.toggle($event)}}},[_vm._v(\"\\n    \"+_vm._s(folder)+\"\\n    \"),_c('asset-node',{attrs:{\"asset\":_vm.asset[folder]}})],1)}),_vm._l((_vm.files),function(file){return _c('li',{key:file.name,staticClass:\"file draggable token\",attrs:{\"draggable\":\"true\"},on:{\"mouseover\":function($event){_vm.showImage = file.hash},\"mouseout\":function($event){_vm.showImage = null},\"dragstart\":function($event){_vm.dragStart($event, '/static/assets/' + file.hash)}}},[_vm._v(\"\\n    \"+_vm._s(file.name)+\"\\n    \"),(_vm.showImage == file.hash)?_c('div',{staticClass:\"preview\"},[_c('img',{staticClass:\"asset-preview-image\",attrs:{\"src\":'/static/assets/' + file.hash}})]):_vm._e()])})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"74f43d04-vue-loader-template\\\"}!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./asset_node.vue?vue&type=template&id=62c91cd3&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_vm._v(_vm._s(_vm.message))])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"74f43d04-vue-loader-template\\\"}!../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./load.vue?vue&type=template&id=ff095222&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{attrs:{\"id\":\"toolselect\"}},[_c('ul',_vm._l((_vm.tools),function(tool){return (!_vm.dmTools.includes(tool) || _vm.IS_DM)?_c('li',{key:tool,ref:tool + '-selector',refInFor:true,class:{'tool-selected': _vm.currentTool === tool},on:{\"click\":function($event){_vm.currentTool = tool}}},[_c('a',{attrs:{\"href\":\"#\"}},[_vm._v(_vm._s(tool))])]):_vm._e()}))]),_c('div',[[_c('select-tool',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.currentTool === 'Select'),expression:\"currentTool === 'Select'\"}],ref:\"selectTool\"}),_c('pan-tool',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.currentTool === 'Pan'),expression:\"currentTool === 'Pan'\"}]}),_c('keep-alive',[_c('draw-tool',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.currentTool === 'Draw'),expression:\"currentTool === 'Draw'\"}]})],1),_c('ruler-tool',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.currentTool === 'Ruler'),expression:\"currentTool === 'Ruler'\"}]}),_c('map-tool',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.currentTool === 'Map'),expression:\"currentTool === 'Map'\"}]}),_c('shape-menu',{ref:\"shapecontext\"}),_c('createtoken-dialog',{ref:\"createtokendialog\"})]],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"74f43d04-vue-loader-template\\\"}!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tools.vue?vue&type=template&id=1fee50f5&scoped=true&\"","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./menu.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./menu.vue?vue&type=script&lang=ts&\"","import { GlobalPoint, Point, Ray, Vector } from \"@/game/geom\";\n\nexport class BoundingRect {\n    readonly w: number;\n    readonly h: number;\n    readonly topLeft: GlobalPoint;\n    readonly topRight: GlobalPoint;\n    readonly botRight: GlobalPoint;\n    readonly botLeft: GlobalPoint;\n\n    constructor(topleft: GlobalPoint, w: number, h: number) {\n        this.w = w;\n        this.h = h;\n        this.topLeft = topleft;\n        this.topRight = new GlobalPoint(topleft.x + w, topleft.y);\n        this.botRight = new GlobalPoint(topleft.x + w, topleft.y + h);\n        this.botLeft = new GlobalPoint(topleft.x, topleft.y + h);\n    }\n\n    contains(point: GlobalPoint): boolean {\n        return (\n            this.topLeft.x <= point.x &&\n            this.topRight.x >= point.x &&\n            this.topLeft.y <= point.y &&\n            this.botLeft.y >= point.y\n        );\n    }\n\n    get points() {\n        if (this.w === 0 || this.h === 0) return [[this.topLeft.x, this.topLeft.y]];\n        return [\n            [this.topLeft.x, this.topLeft.y],\n            [this.botLeft.x, this.botLeft.y],\n            [this.botRight.x, this.botRight.y],\n            [this.topRight.x, this.topRight.y],\n        ];\n    }\n\n    offset(vector: Vector): BoundingRect {\n        return new BoundingRect(this.topLeft.add(vector), this.w, this.h);\n    }\n\n    union(other: BoundingRect): BoundingRect {\n        const xmin = Math.min(this.topLeft.x, other.topLeft.x);\n        const xmax = Math.max(this.topRight.x, other.topRight.x);\n        const ymin = Math.min(this.topLeft.y, other.topLeft.y);\n        const ymax = Math.max(this.botLeft.y, other.botLeft.y);\n        return new BoundingRect(new GlobalPoint(xmin, ymin), xmax - xmin, ymax - ymin);\n    }\n\n    getDiagCorner(botright: boolean) {\n        return botright ? this.botRight : this.topLeft;\n    }\n\n    intersectsWith(other: BoundingRect): boolean {\n        return !(\n            other.topLeft.x > this.topRight.x ||\n            other.topRight.x < this.topLeft.x ||\n            other.topLeft.y > this.botLeft.y ||\n            other.botLeft.y < this.topLeft.y\n        );\n    }\n\n    intersectsWithInner(other: BoundingRect): boolean {\n        return !(\n            other.topLeft.x >= this.topRight.x ||\n            other.topRight.x <= this.topLeft.x ||\n            other.topLeft.y >= this.botLeft.y ||\n            other.botLeft.y <= this.topLeft.y\n        );\n    }\n\n    intersectP(ray: Ray<Point>, invDir: Vector, dirIsNeg: boolean[]) {\n        let txmin = invDir.x * (this.getDiagCorner(dirIsNeg[0]).x - ray.origin!.x);\n        let txmax = invDir.x * (this.getDiagCorner(!dirIsNeg[0]).x - ray.origin!.x);\n        const tymin = invDir.y * (this.getDiagCorner(dirIsNeg[1]).y - ray.origin!.y);\n        const tymax = invDir.y * (this.getDiagCorner(!dirIsNeg[1]).y - ray.origin!.y);\n        if (txmin > tymax || tymin > txmax) return { hit: false, min: txmin, max: txmax };\n        if (tymin > txmin) txmin = tymin;\n        if (tymax < txmax) txmax = tymax;\n        return { hit: txmin < ray.tMax! && txmax > 0, min: txmin, max: txmax };\n    }\n\n    center(): GlobalPoint;\n    center(centerPoint: GlobalPoint): void;\n    center(centerPoint?: GlobalPoint): GlobalPoint | void {\n        if (centerPoint === undefined) return this.topLeft.add(new Vector(this.w / 2, this.h / 2));\n        this.topLeft.x = centerPoint.x - this.w / 2;\n        this.topLeft.y = centerPoint.y - this.h / 2;\n    }\n    inCorner(point: GlobalPoint, corner: string) {\n        const sw = Math.min(6, this.w / 2) / 2;\n        switch (corner) {\n            case \"ne\":\n                return (\n                    this.topRight.x - sw <= point.x &&\n                    point.x <= this.topRight.x + sw &&\n                    this.topLeft.y - sw <= point.y &&\n                    point.y <= this.topLeft.y + sw\n                );\n            case \"nw\":\n                return (\n                    this.topLeft.x - sw <= point.x &&\n                    point.x <= this.topLeft.x + sw &&\n                    this.topLeft.y - sw <= point.y &&\n                    point.y <= this.topLeft.y + sw\n                );\n            case \"sw\":\n                return (\n                    this.topLeft.x - sw <= point.x &&\n                    point.x <= this.topLeft.x + sw &&\n                    this.botLeft.y - sw <= point.y &&\n                    point.y <= this.botLeft.y + sw\n                );\n            case \"se\":\n                return (\n                    this.topRight.x - sw <= point.x &&\n                    point.x <= this.topRight.x + sw &&\n                    this.botLeft.y - sw <= point.y &&\n                    point.y <= this.botLeft.y + sw\n                );\n            default:\n                return false;\n        }\n    }\n    getCorner(point: GlobalPoint): string | undefined {\n        if (this.inCorner(point, \"ne\")) return \"ne\";\n        else if (this.inCorner(point, \"nw\")) return \"nw\";\n        else if (this.inCorner(point, \"se\")) return \"se\";\n        else if (this.inCorner(point, \"sw\")) return \"sw\";\n    }\n\n    getMaxExtent() {\n        return this.w > this.h ? 0 : 1;\n    }\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"formcontainer\"}},[(_vm.owned || _vm.joined)?_c('form',[_c('fieldset',[_c('legend',{staticClass:\"legend\"},[_vm._v(\"Your sessions\")]),_c('div',{staticClass:\"input\"},[_vm._l((_vm.owned),function(room,i){return _c('router-link',{key:'o-'+i,attrs:{\"to\":'/game/' + room[1] + '/' + room[0]}},[_vm._v(_vm._s(room[0]))])}),_vm._l((_vm.joined),function(room,i){return _c('router-link',{key:'j-'+i,attrs:{\"to\":'/game/' + room[1] + '/' + room[0]}},[_vm._v(_vm._s(room[1])+\"/\"+_vm._s(room[0]))])})],2),(_vm.owned.length === 0)?_c('div',{staticClass:\"input\"},[_vm._v(\"No active sessions\")]):_vm._e()])]):_vm._e(),_vm._m(0),_c('form',{on:{\"submit\":function($event){$event.preventDefault();return _vm.createRoom($event)}}},[_c('fieldset',[(!_vm.owned && !_vm.joined)?_c('legend',{staticClass:\"legend\"},[_vm._v(\"Create a session\")]):_c('div',{staticClass:\"input\"},[_vm._v(\"Create a new session\")]),_c('div',{staticClass:\"input\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.newSessionName),expression:\"newSessionName\"}],attrs:{\"type\":\"text\",\"name\":\"room_name\",\"placeholder\":\"Session Name\"},domProps:{\"value\":(_vm.newSessionName)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.newSessionName=$event.target.value}}}),_vm._m(1)]),_vm._m(2)])]),_c('div',{attrs:{\"id\":\"account-options\"}},[_c('form',{on:{\"submit\":function($event){$event.preventDefault();}}},[_c('router-link',{staticClass:\"submit\",attrs:{\"tag\":\"button\",\"title\":\"Account Settings\",\"to\":\"/account\"}},[_c('i',{staticClass:\"fas fa-cog\"})])],1),_c('form',{on:{\"submit\":function($event){$event.preventDefault();}}},[_c('router-link',{staticClass:\"submit\",attrs:{\"tag\":\"button\",\"title\":\"Logout\",\"to\":\"/auth/logout\"}},[_c('i',{staticClass:\"fas fa-sign-out-alt\"})])],1)])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('h4',[_c('span',[_vm._v(\"OR\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',[_c('i',{staticClass:\"fab fa-d-and-d\"})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('button',{staticClass:\"submit\",attrs:{\"type\":\"submit\",\"title\":\"Create\"}},[_c('i',{staticClass:\"fas fa-arrow-right\"})])}]\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"74f43d04-vue-loader-template\\\"}!../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./main.vue?vue&type=template&id=61eb1455&scoped=true&\"","/*\nThis module defines some Point classes.\nA strong focus is made to ensure that at no time a global and a local point are mixed up with each other.\nAt first glance this adds weird looking hacks as ts does not support nominal typing.\n*/\n\nexport function getPointDistance(p1: Point, p2: Point) {\n    const a = p1.x - p2.x;\n    const b = p1.y - p2.y;\n    return Math.sqrt(a * a + b * b);\n}\n\nexport class Point {\n    x: number;\n    y: number;\n    constructor(x: number, y: number) {\n        this.x = x;\n        this.y = y;\n    }\n    add(vec: Vector) {\n        return new Point(this.x + vec.x, this.y + vec.y);\n    }\n    subtract(other: Point) {\n        return new Vector(this.x - other.x, this.y - other.y);\n    }\n    clone(): Point {\n        return new Point(this.x, this.y);\n    }\n    get(dimension: 0 | 1) {\n        if (dimension === 0) return this.x;\n        return this.y;\n    }\n}\nexport class GlobalPoint extends Point {\n    // This is to differentiate with LocalPoint, is actually never used\n    // We do ! to prevent errors that it never gets initialized\n    // tslint:disable-next-line:variable-name\n    _GlobalPoint!: string;\n    add(vec: Vector): GlobalPoint {\n        return <GlobalPoint>super.add(vec);\n    }\n    subtract(other: GlobalPoint): Vector {\n        return super.subtract(other);\n    }\n    clone(): GlobalPoint {\n        return <GlobalPoint>super.clone();\n    }\n}\n\nexport class LocalPoint extends Point {\n    // This is to differentiate with GlobalPoint, is actually never used\n    // We do ! to prevent errors that it never gets initialized\n    // tslint:disable-next-line:variable-name\n    _LocalPoint!: string;\n    add(vec: Vector): LocalPoint {\n        return <LocalPoint>super.add(vec);\n    }\n    subtract(other: LocalPoint): Vector {\n        return super.subtract(other);\n    }\n    clone(): LocalPoint {\n        return <LocalPoint>super.clone();\n    }\n}\n\nexport class Vector {\n    readonly x: number;\n    readonly y: number;\n    constructor(x: number, y: number) {\n        this.x = x;\n        this.y = y;\n    }\n    dot(other: Vector) {\n        return this.x * other.x + this.y * other.y;\n    }\n    inverse() {\n        return new Vector(1 / this.x, 1 / this.y);\n    }\n    length() {\n        return Math.sqrt(Math.pow(this.x, 2) + Math.pow(this.y, 2));\n    }\n    normalize() {\n        const l = this.length();\n        return new Vector(this.x / l, this.y / l);\n    }\n    reverse() {\n        return new Vector(-this.x, -this.y);\n    }\n    multiply(scale: number) {\n        return new Vector(this.x * scale, this.y * scale);\n    }\n}\n\nexport class Ray<T extends Point> {\n    readonly direction: Vector;\n    readonly origin: T;\n    tMax: number;\n    constructor(origin: T, direction: Vector, tMax?: number) {\n        this.direction = direction;\n        this.origin = origin;\n        if (tMax === undefined) tMax = Infinity;\n        this.tMax = tMax;\n    }\n    static fromPoints<T extends Point>(p1: T, p2: T): Ray<T> {\n        const vec = new Vector(p2.x - p1.x, p2.y - p1.y);\n        let maxT;\n        if (Math.abs(vec.x) > 0.01) maxT = (p2.x - p1.x) / vec.x;\n        else maxT = (p2.y - p1.y) / vec.y;\n        return new Ray(p1, vec, maxT);\n    }\n    get(t: number): T {\n        return <T>new Point(this.origin.x + t * this.direction.x, this.origin.y + t * this.direction.y);\n    }\n    getDistance(t1: number, t2: number) {\n        return Math.sqrt(Math.pow(t2 - t1, 2) * (Math.pow(this.direction.x, 2) + Math.pow(this.direction.y, 2)));\n    }\n    getT(t1: number, distance: number) {\n        return t1 + Math.sqrt(Math.pow(distance, 2) / (Math.pow(this.direction.x, 2) + Math.pow(this.direction.y, 2)));\n    }\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\nimport vueSlider from \"vue-slider-component\";\n\nimport \"@/game/api/events\";\n\nimport { throttle } from \"lodash\";\nimport { mapGetters, mapState } from \"vuex\";\n\nimport ConfirmDialog from \"@/core/components/modals/confirm.vue\";\nimport Prompt from \"@/core/components/modals/prompt.vue\";\nimport Initiative from \"@/game/ui/initiative.vue\";\nimport MenuBar from \"@/game/ui/menu/menu.vue\";\nimport NoteDialog from \"@/game/ui/note.vue\";\nimport SelectionInfo from \"@/game/ui/selection/selection_info.vue\";\nimport Tools from \"@/game/ui/tools/tools.vue\";\n\nimport { createConnection, socket } from \"@/game/api/socket\";\nimport { onKeyDown, onKeyUp } from \"@/game/events/keyboard\";\nimport { scrollZoom } from \"@/game/events/mouse\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { gameStore } from \"@/game/store\";\nimport { l2g } from \"@/game/units\";\nimport { LocalPoint } from \"./geom\";\n\n@Component({\n    components: {\n        \"tool-bar\": Tools,\n        \"selection-info\": SelectionInfo,\n        \"prompt-dialog\": Prompt,\n        \"confirm-dialog\": ConfirmDialog,\n        \"menu-bar\": MenuBar,\n        \"initiative-dialog\": Initiative,\n        \"zoom-slider\": vueSlider,\n        \"note-dialog\": NoteDialog,\n    },\n    beforeRouteEnter(to, from, next) {\n        createConnection(to);\n        next();\n    },\n    beforeRouteLeave(to, from, next) {\n        socket.disconnect();\n        next();\n    },\n})\nexport default class Game extends Vue {\n    $refs!: {\n        confirm: InstanceType<typeof ConfirmDialog>;\n        tools: InstanceType<typeof Tools>;\n    };\n\n    ready = {\n        manager: false,\n        tools: false,\n    };\n\n    get IS_DM(): boolean {\n        return gameStore.IS_DM;\n    }\n\n    get layers(): string[] {\n        return gameStore.layers;\n    }\n\n    get selectedLayer(): string {\n        return gameStore.selectedLayer;\n    }\n\n    get zoomFactor(): number {\n        return gameStore.zoomFactor;\n    }\n\n    set zoomFactor(value: number) {\n        gameStore.updateZoom({\n            newZoomValue: value,\n            zoomLocation: l2g(new LocalPoint(window.innerWidth / 2, window.innerHeight / 2)),\n        });\n    }\n\n    mounted() {\n        window.addEventListener(\"resize\", () => {\n            layerManager.setWidth(window.innerWidth);\n            layerManager.setHeight(window.innerHeight);\n            layerManager.invalidate();\n        });\n        window.addEventListener(\"wheel\", throttle(scrollZoom));\n        window.addEventListener(\"keyup\", onKeyUp);\n        window.addEventListener(\"keydown\", onKeyDown);\n        // // prevent double clicking text selection\n        window.addEventListener(\"selectstart\", e => {\n            e.preventDefault();\n            return false;\n        });\n        this.ready.manager = true;\n    }\n\n    mousedown(event: MouseEvent) {\n        this.$refs.tools.mousedown(event);\n    }\n    mouseup(event: MouseEvent) {\n        this.$refs.tools.mouseup(event);\n    }\n    mousemove(event: MouseEvent) {\n        this.$refs.tools.mousemove(event);\n    }\n    mouseleave(event: MouseEvent) {\n        this.$refs.tools.mouseleave(event);\n    }\n    contextmenu(event: MouseEvent) {\n        this.$refs.tools.contextmenu(event);\n    }\n    selectLayer(layer: string) {\n        layerManager.selectLayer(layer);\n    }\n    drop(event: DragEvent) {\n        if (event === null || event.dataTransfer === null) return;\n        if (event.dataTransfer.files.length > 0) {\n            this.$refs.confirm\n                .open(\"Uploading files should be done through the asset manager.\", \"Ok\", \"\")\n                .then(() => {}, () => {});\n        } else if (event.dataTransfer.getData(\"text/plain\") === \"\") {\n            return;\n        } else {\n            layerManager.dropAsset(event);\n        }\n    }\n}\n","import { GlobalPoint, LocalPoint, Ray } from \"@/game/geom\";\nimport { gameStore } from \"@/game/store\";\n\nexport function g2l(obj: GlobalPoint): LocalPoint {\n    const z = gameStore.zoomFactor;\n    const panX = gameStore.panX;\n    const panY = gameStore.panY;\n    return new LocalPoint((obj.x + panX) * z, (obj.y + panY) * z);\n}\n\nexport function g2lx(x: number) {\n    return g2l(new GlobalPoint(x, 0)).x;\n}\n\nexport function g2ly(y: number) {\n    return g2l(new GlobalPoint(0, y)).y;\n}\n\nexport function g2lz(z: number) {\n    return z * gameStore.zoomFactor;\n}\n\nexport function getUnitDistance(r: number) {\n    return (r / gameStore.unitSize) * gameStore.gridSize;\n}\n\nexport function g2lr(r: number) {\n    return g2lz(getUnitDistance(r));\n}\n\nexport function l2g(obj: LocalPoint): GlobalPoint;\nexport function l2g(obj: Ray<LocalPoint>): Ray<GlobalPoint>;\nexport function l2g(obj: LocalPoint | Ray<LocalPoint>): GlobalPoint | Ray<GlobalPoint> {\n    const z = gameStore.zoomFactor;\n    const panX = gameStore.panX;\n    const panY = gameStore.panY;\n    if (obj instanceof LocalPoint) {\n        return new GlobalPoint(obj.x / z - panX, obj.y / z - panY);\n    } else {\n        return new Ray<GlobalPoint>(l2g(obj.origin), obj.direction.multiply(1 / z), obj.tMax);\n    }\n}\n\nexport function l2gx(x: number) {\n    return l2g(new LocalPoint(x, 0)).x;\n}\n\nexport function l2gy(y: number) {\n    return l2g(new LocalPoint(0, y)).y;\n}\n\nexport function l2gz(z: number) {\n    return z / gameStore.zoomFactor;\n}\n\nexport function l2gr(r: number) {\n    return l2gz(getUnitDistance(r));\n}\n\n(<any>window).g2lx = g2lx;\n(<any>window).g2ly = g2ly;\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\n\nimport { mapState } from \"vuex\";\n\nimport ColorPicker from \"@/core/components/colorpicker.vue\";\nimport Prompt from \"@/core/components/modals/prompt.vue\";\nimport AssetNode from \"@/game/ui/menu/asset_node.vue\";\nimport NoteDialog from \"@/game/ui/note.vue\";\n\nimport { getRef, uuidv4 } from \"@/core/utils\";\nimport { socket } from \"@/game/api/socket\";\nimport { Note } from \"@/game/comm/types/general\";\nimport { gameStore } from \"@/game/store\";\nimport { layerManager } from \"@/game/layers/manager\";\n\n@Component({\n    components: {\n        \"color-picker\": ColorPicker,\n        \"asset-node\": AssetNode,\n    },\n    computed: {\n        ...mapState(\"game\", [\"invitationCode\", \"IS_DM\", \"locations\", \"assets\", \"notes\"]),\n    },\n})\nexport default class MenuBar extends Vue {\n    visible = {\n        settings: false,\n        locations: false,\n    };\n\n    get useGrid(): boolean {\n        return gameStore.useGrid;\n    }\n    set useGrid(value: boolean) {\n        gameStore.setUseGrid({ useGrid: value, sync: true });\n    }\n    get fullFOW(): boolean {\n        return gameStore.fullFOW;\n    }\n    set fullFOW(value: boolean) {\n        gameStore.setFullFOW({ fullFOW: value, sync: true });\n    }\n    get fowOpacity(): number {\n        return gameStore.fowOpacity;\n    }\n    set fowOpacity(value: number) {\n        if (typeof value !== \"number\") return;\n        gameStore.setFOWOpacity({ fowOpacity: value, sync: true });\n    }\n    get fowLOS(): boolean {\n        return gameStore.fowLOS;\n    }\n    set fowLOS(value: boolean) {\n        gameStore.setLineOfSight({ fowLOS: value, sync: true });\n    }\n    get unitSize(): number {\n        return gameStore.unitSize;\n    }\n    set unitSize(value: number) {\n        if (typeof value !== \"number\") return;\n        gameStore.setUnitSize({ unitSize: value, sync: true });\n    }\n    get gridSize(): number {\n        return gameStore.gridSize;\n    }\n    set gridSize(value: number) {\n        if (typeof value !== \"number\") return;\n        gameStore.setGridSize({ gridSize: value, sync: true });\n    }\n    get gridColour(): string {\n        return gameStore.gridColour;\n    }\n    set gridColour(value: string) {\n        gameStore.setGridColour({ colour: value, sync: true });\n    }\n    get fowColour(): string {\n        return gameStore.fowColour;\n    }\n    set fowColour(value: string) {\n        gameStore.setFOWColour({ colour: value, sync: true });\n    }\n    get rulerColour(): string {\n        return gameStore.rulerColour;\n    }\n    set rulerColour(value: string) {\n        gameStore.setRulerColour({ colour: value, sync: true });\n    }\n    settingsClick(event: { target: HTMLElement }) {\n        if (event.target.classList.contains(\"accordion\")) {\n            event.target.classList.toggle(\"accordion-active\");\n            const next = <HTMLElement>event.target.nextElementSibling;\n            if (next !== null) next.style.display = next.style.display === \"\" ? \"block\" : \"\";\n        }\n    }\n    changeLocation(name: string) {\n        socket.emit(\"Location.Change\", name);\n    }\n    createLocation() {\n        getRef<Prompt>(\"prompt\")\n            .prompt(`New location name:`, `Create new location`)\n            .then(\n                (value: string) => {\n                    socket.emit(\"Location.New\", value);\n                },\n                () => {},\n            );\n    }\n    createNote() {\n        const note = { title: \"New note\", text: \"\", uuid: uuidv4() };\n        gameStore.newNote({ note, sync: true });\n        this.openNote(note);\n    }\n    openNote(note: Note) {\n        getRef<NoteDialog>(\"note\").open(note);\n    }\n    changeVisionMode(event: { target: HTMLSelectElement }) {\n        const value = event.target.value.toLowerCase();\n        if (value !== \"bvh\" && value !== \"triangle\") return;\n        gameStore.setVisionMode(value);\n        gameStore.recalculateBV();\n        layerManager.invalidate();\n    }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./colorpicker.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./colorpicker.vue?vue&type=script&lang=ts&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ContextMenu',{attrs:{\"visible\":_vm.visible,\"left\":_vm.x + 'px',\"top\":_vm.y + 'px'},on:{\"close\":_vm.close}},[(_vm.IS_DM)?_c('li',{on:{\"click\":_vm.bringPlayers}},[_vm._v(\"Bring players\")]):_vm._e(),_c('li',{on:{\"click\":_vm.createToken}},[_vm._v(\"Create basic token\")]),_c('li',{on:{\"click\":_vm.showInitiative}},[_vm._v(\"Show initiative\")])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"74f43d04-vue-loader-template\\\"}!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./selectcontext.vue?vue&type=template&id=44a31e42&scoped=true&\"","import { uuidv4 } from \"@/core/utils\";\nimport { CDT } from \"./cdt\";\nimport { ccw, cw, orientation } from \"./triag\";\n\nexport type Point = number[];\n\nexport const INFINITE = -7e310;\n\nlet _INFINITE_VERTEX: Vertex;\n\nexport enum Sign {\n    NEGATIVE = -1,\n    ZERO = 0,\n    POSITIVE = 1,\n\n    RIGHT_TURN = -1,\n    LEFT_TURN = 1,\n\n    SMALLER = -1,\n    EQUAL = 0,\n    LARGER = 1,\n\n    CLOCKWISE = -1,\n    COUNTERCLOCKWISE = 1,\n\n    COLLINEAR = 0,\n    COPLANAR = 0,\n    DEGENERATE = 0,\n\n    ON_NEGATIVE_SIDE = -1,\n    ON_ORIENTED_BOUNDARY = 0,\n    ON_POSITIVE_SIDE = 1,\n}\n\nenum LineFaceState {\n    UNDEFINED = -1,\n    VERTEX_VERTEX = 0,\n    VERTEX_EDGE = 1,\n    EDGE_VERTEX = 2,\n    EDGE_EDGE = 3,\n}\n\nfunction newPoint(): Point {\n    return [INFINITE, INFINITE];\n}\n\nexport class Triangle {\n    vertices: (Vertex | null)[] = [];\n    neighbours: (Triangle | null)[] = [null, null, null];\n    constraints = [false, false, false];\n    uuid = uuidv4();\n\n    constructor(...vertices: (Vertex | null)[]) {\n        this.vertices = vertices;\n    }\n\n    from(t: Triangle): this {\n        this.vertices = t.vertices.slice(0, t.vertices.length);\n        this.neighbours = t.neighbours.slice(0, t.neighbours.length);\n        this.constraints = t.constraints.slice(0, t.constraints.length);\n        return this;\n    }\n\n    get dimension() {\n        return this.vertices.length - 1;\n    }\n\n    addVertex(vertex: Vertex) {\n        if (vertex === undefined) {\n            console.log(\"UNDEFINED HIERE\");\n        }\n        this.vertices.push(vertex);\n        vertex.triangle = this;\n    }\n\n    isConstrained(index: number): boolean {\n        return this.constraints[index];\n    }\n\n    reorient() {\n        // If certain indices do not exist yet thay will append faulty undefined's, thus we slice them\n        this.vertices = [this.vertices[1], this.vertices[0], this.vertices[2]].slice(0, this.vertices.length);\n        this.neighbours = [this.neighbours[1], this.neighbours[0], this.neighbours[2]];\n        this.constraints = [this.constraints[1], this.constraints[0], this.constraints[2]];\n    }\n\n    indexV(v: Vertex): number {\n        return this.vertices.indexOf(v);\n    }\n\n    indexT(t: Triangle): number {\n        return this.neighbours.indexOf(t);\n    }\n\n    isInfinite(index?: number): boolean {\n        if (index === undefined) {\n            return this.vertices.includes(_INFINITE_VERTEX);\n        } else {\n            return this.vertices[ccw(index)]!.infinite || this.vertices[cw(index)]!.infinite;\n        }\n    }\n}\n\nexport class Vertex {\n    infinite = false;\n    private _point: Point | undefined;\n    triangle: Triangle | undefined;\n    uuid = uuidv4();\n\n    constructor(point?: Point) {\n        this._point = point;\n    }\n\n    get point(): Point | undefined {\n        return this._point;\n    }\n\n    set point(point: Point | undefined) {\n        this._point = point;\n        this.infinite = false;\n    }\n}\n\nexport class EdgeCirculator {\n    ri: number;\n    v: Vertex | null;\n    t: Triangle | null;\n    _ri: number;\n    _v: Vertex | null;\n    _t: Triangle | null;\n\n    constructor(v: Vertex | null, t: Triangle | null) {\n        this.v = v;\n        this.t = t;\n        if (v === null) {\n            this.t = null;\n        } else if (t === null) {\n            this.t = v.triangle!;\n        }\n        if (this.t == null || this.t.dimension < 1) {\n            this.ri = 0;\n            this.v = null;\n            this.t = null;\n        } else {\n            const i = this.t.indexV(v!);\n            if (this.t.dimension === 2) this.ri = ccw(i);\n            else this.ri = 2;\n        }\n        this._ri = this.ri;\n        this._v = this.v;\n        this._t = this.t;\n    }\n\n    get valid() {\n        return this.t !== null && this.v !== null;\n    }\n\n    next(): boolean {\n        let i = this.t!.indexV(this.v!);\n        if (this.t!.dimension === 1) {\n            this.t = this.t!.neighbours[i === 0 ? 1 : 0];\n        } else {\n            this.t = this.t!.neighbours[ccw(i)];\n            i = this.t!.indexV(this.v!);\n            this.ri = ccw(i);\n        }\n        return this.ri !== this._ri || this.v !== this._v || this.t !== this._t;\n    }\n}\n\nexport class EdgeIterator {\n    private i = 0;\n    pos: Triangle | null;\n    edge: Edge = new Edge();\n    tds: TDS;\n    _es = 0;\n    constructor(tds: TDS) {\n        this.tds = tds;\n        this.edge.second = 0;\n        if (tds.dimension <= 0) {\n            this.pos = null;\n            return;\n        }\n        this.pos = tds.triangles[0];\n        if (tds.dimension === 1) this.edge.second = 2;\n        while (this.pos !== null && !this.associatedEdge()) {\n            throw new Error(\"[poi\");\n        }\n\n        if (tds.dimension === 1) this._es = 2;\n    }\n\n    get valid(): boolean {\n        return (this.pos !== null || this._es !== this.edge.second) && this.pos!.isInfinite(this.edge.second);\n    }\n\n    next() {\n        do {\n            this.increment();\n        } while (this.pos !== null && !this.associatedEdge());\n    }\n\n    collect(): Edge {\n        this.edge.first = this.pos;\n        return this.edge;\n    }\n\n    associatedEdge(): boolean {\n        if (this.tds.dimension === 1) return true;\n        return (\n            this.tds.triangles.indexOf(this.pos!) < this.tds.triangles.indexOf(this.pos!.neighbours[this.edge.second]!)\n        );\n    }\n\n    increment() {\n        if (this.tds.dimension === 1) {\n            this.i++;\n            if (this.tds.triangles.length <= this.i) this.pos = null;\n            else this.pos = this.tds.triangles[this.i];\n        } else if (this.edge.second === 2) {\n            this.edge.second = 0;\n            this.i++;\n            if (this.tds.triangles.length <= this.i) this.pos = null;\n            else this.pos = this.tds.triangles[this.i];\n        } else {\n            this.edge.second++;\n        }\n    }\n}\n\nexport class FaceCirculator {\n    v: Vertex | null;\n    t: Triangle | null;\n    _v: Vertex | null;\n    _t: Triangle | null;\n\n    constructor(v: Vertex | null, t: Triangle | null) {\n        this.v = v;\n        this.t = t;\n        if (v === null) {\n            this.t = null;\n        } else if (t === null) {\n            this.t = v.triangle!;\n        }\n        if (this.t == null || this.t.dimension < 2) {\n            this.v = null;\n            this.t = null;\n        }\n        this._v = this.v;\n        this._t = this.t;\n    }\n\n    get valid() {\n        return this.t !== null && this.v !== null;\n    }\n\n    prev() {\n        const i = this.t!.indexV(this.v!);\n        this.t = this.t!.neighbours[cw(i)];\n    }\n\n    next(): boolean {\n        const i = this.t!.indexV(this.v!);\n        this.t = this.t!.neighbours[ccw(i)];\n        return this.v !== this._v || this.t !== this._t;\n    }\n}\n\nexport class LineFaceCirculator {\n    private i = 0;\n    pos: Triangle | null = null;\n    _tr: CDT;\n    s: LineFaceState = LineFaceState.UNDEFINED;\n    p: Point;\n    q: Point;\n\n    constructor(v: Vertex, tr: CDT, dir: Point) {\n        this._tr = tr;\n        this.p = v.point!;\n        this.q = dir;\n\n        const fc = new FaceCirculator(v, null);\n        let ic = fc.t!.indexV(v);\n        let vt = fc.t!.vertices[cw(ic)]!;\n        while (v === _INFINITE_VERTEX || orientation(this.p, this.q, vt.point!) !== Sign.LEFT_TURN) {\n            fc.next();\n            ic = fc.t!.indexV(v);\n            vt = fc.t!.vertices[cw(ic)]!;\n            if (!fc.valid) {\n                return;\n            }\n        }\n\n        let vr = fc.t!.vertices[ccw(ic)]!;\n        let pqr: Sign = Sign.RIGHT_TURN;\n        // tslint:disable:no-conditional-assignment\n        while (vr !== _INFINITE_VERTEX && (pqr = orientation(this.p, this.q, vr.point!)) === Sign.LEFT_TURN) {\n            fc.prev();\n            ic = fc.t!.indexV(v);\n            vr = fc.t!.vertices[ccw(ic)]!;\n        }\n\n        ic = fc.t!.indexV(v);\n        vt = fc.t!.vertices[cw(ic)]!;\n\n        if (vr === _INFINITE_VERTEX) {\n            fc.prev();\n            ic = fc.t!.indexV(v);\n            vr = fc.t!.vertices[ccw(ic)]!;\n            pqr = orientation(this.p, this.q, vr.point!);\n            switch (pqr) {\n                case Sign.RIGHT_TURN:\n                case Sign.COLLINEAR: {\n                    fc.next();\n                    ic = fc.t!.indexV(_INFINITE_VERTEX);\n                    this.pos = fc.t!;\n                    this.s = LineFaceState.VERTEX_VERTEX;\n                    this.i = ic;\n                    break;\n                }\n                case Sign.LEFT_TURN: {\n                    break;\n                }\n            }\n        } else if (pqr === Sign.COLLINEAR) {\n            this.pos = fc.t!;\n            this.s = LineFaceState.VERTEX_VERTEX;\n            this.i = ccw(ic);\n        } else {\n            this.pos = fc.t!;\n            this.s = LineFaceState.VERTEX_EDGE;\n            this.i = ic;\n        }\n    }\n\n    next() {\n        this.increment();\n    }\n\n    increment() {\n        let o: Sign;\n        if (this.s === LineFaceState.VERTEX_VERTEX || this.s === LineFaceState.EDGE_VERTEX) {\n            do {\n                const n = this.pos!.neighbours[cw(this.i)]!;\n                this.i = n.indexT(this.pos!);\n                this.pos = n;\n                if (this.pos!.vertices[this.i] === _INFINITE_VERTEX) {\n                    o = Sign.COLLINEAR;\n                    this.i = cw(this.i);\n                    break;\n                }\n                o = orientation(this.p, this.q, this.pos!.vertices[this.i]!.point!);\n                this.i = cw(this.i);\n            } while (o === Sign.LEFT_TURN);\n            if (o === Sign.COLLINEAR) {\n                this.s = LineFaceState.VERTEX_VERTEX;\n                this.i = ccw(this.i);\n            } else {\n                this.s = LineFaceState.VERTEX_EDGE;\n            }\n        } else {\n            const n = this.pos!.neighbours[this.i]!;\n            const ni = n.indexT(this.pos!);\n            this.pos = n;\n            o =\n                this.pos!.vertices[ni]! === _INFINITE_VERTEX\n                    ? Sign.COLLINEAR\n                    : orientation(this.p, this.q, this.pos!.vertices[ni]!.point!);\n            switch (o) {\n                case Sign.LEFT_TURN: {\n                    this.s = LineFaceState.EDGE_EDGE;\n                    this.i = ccw(ni);\n                    break;\n                }\n                case Sign.RIGHT_TURN: {\n                    this.s = LineFaceState.EDGE_EDGE;\n                    this.i = cw(ni);\n                    break;\n                }\n                default: {\n                    this.s = LineFaceState.EDGE_VERTEX;\n                    this.i = ni;\n                }\n            }\n        }\n    }\n}\n\nclass Edge {\n    first: Triangle | null = null;\n    second: number = 0;\n}\n\nexport enum LocateType {\n    VERTEX,\n    EDGE,\n    FACE,\n    OUTSIDE_CONVEX_HULL,\n    OUTSIDE_AFFINE_HULL,\n}\n\nexport class TDS {\n    dimension = -1;\n    vertices: Vertex[] = [];\n    triangles: Triangle[] = [];\n    _infinite: Vertex;\n\n    constructor() {\n        this._infinite = this.createVertex();\n        _INFINITE_VERTEX = this._infinite;\n        const t = new Triangle();\n        t.addVertex(this._infinite);\n        this.triangles.push(t);\n    }\n\n    createVertex(): Vertex {\n        const v = this.infiniteVertex;\n        if (v === undefined) {\n            console.log(\"UNDEFINED HIERE\");\n        }\n        this.vertices.push(v);\n        return v;\n    }\n\n    createTriangle(\n        v0: Vertex | null,\n        v1: Vertex | null,\n        v2: Vertex | null,\n        n0: Triangle | null,\n        n1: Triangle | null,\n        n2: Triangle | null,\n    ) {\n        const t = new Triangle(v0, v1, v2);\n        t.neighbours[0] = n0;\n        t.neighbours[1] = n1;\n        t.neighbours[2] = n2;\n        this.triangles.push(t);\n        return t;\n    }\n\n    deleteTriangle(trig: Triangle) {\n        this.triangles = this.triangles.filter(t => t !== trig);\n    }\n\n    setAdjacency(t0: Triangle, i0: number, t1: Triangle, i1: number) {\n        t0.neighbours[i0] = t1;\n        t1.neighbours[i1] = t0;\n    }\n\n    get finiteVertex(): Vertex {\n        return this.vertices[1];\n    }\n\n    get infiniteVertex(): Vertex {\n        const v = new Vertex(newPoint());\n        v.infinite = true;\n        return v;\n    }\n\n    get finiteEdge(): Edge {\n        if (this.dimension < 1) throw new Error(\"aspo\");\n        const ei = new EdgeIterator(this);\n        while (ei.valid) ei.next();\n        return ei.collect();\n    }\n\n    insertDimUp(w: Vertex = new Vertex(), orient: boolean = true): Vertex {\n        const v = this.createVertex();\n        this.dimension++;\n        let t1: Triangle;\n        let t2: Triangle;\n        switch (this.dimension) {\n            case 0: {\n                t1 = this.triangles[0];\n                t2 = new Triangle(v);\n                this.triangles.push(t2);\n                this.setAdjacency(t1, 0, t2, 0);\n                v.triangle = t2;\n                break;\n            }\n            case 1:\n            case 2: {\n                const deleteList: Triangle[] = [];\n                const triangles = this.triangles.slice(0, this.triangles.length);\n                for (const trig of triangles) {\n                    const copy = new Triangle().from(trig);\n                    this.triangles.push(copy);\n                    trig.vertices[this.dimension] = v;\n                    copy.vertices[this.dimension] = w;\n                    this.setAdjacency(trig, this.dimension, copy, this.dimension);\n                    if (trig.vertices.includes(w)) deleteList.push(copy);\n                }\n                for (const trig of triangles) {\n                    const neighbour = trig.neighbours[this.dimension];\n                    for (let j = 0; j < this.dimension; ++j) {\n                        neighbour!.neighbours[j] = trig.neighbours[j]!.neighbours[this.dimension];\n                    }\n                }\n\n                let lfit = 0;\n                if (this.dimension === 1) {\n                    if (orient) {\n                        triangles[lfit].reorient();\n                        lfit++;\n                        triangles[lfit].neighbours[1]!.reorient();\n                    } else {\n                        triangles[lfit].neighbours[1]!.reorient();\n                        lfit++;\n                        triangles[lfit].reorient();\n                    }\n                } else {\n                    for (const trig of triangles) {\n                        if (orient) trig.neighbours[2]!.reorient();\n                        else trig.reorient();\n                    }\n                }\n\n                for (const trig of deleteList) {\n                    let j = 1;\n                    if (trig.vertices[0] === w) j = 0;\n                    t1 = trig.neighbours[this.dimension]!;\n                    const i1 = this.mirrorIndex(trig, this.dimension);\n                    t2 = trig.neighbours[j]!;\n                    const i2 = this.mirrorIndex(trig, j);\n                    this.setAdjacency(t1, i1, t2, i2);\n                    this.deleteTriangle(trig);\n                }\n                v.triangle = triangles[0];\n                break;\n            }\n            default: {\n                throw new Error(\"Dimension unknown\");\n            }\n        }\n        return v;\n    }\n\n    mirrorIndex(t: Triangle, i: number): number {\n        if (t.dimension === 1) {\n            const j = t.neighbours[i]!.indexV(t.vertices[i === 0 ? 1 : 0]!);\n            return j === 0 ? 1 : 0;\n        }\n        return ccw(t.neighbours[i]!.indexV(t.vertices[ccw(i)]!));\n    }\n\n    insertInFace(t: Triangle) {\n        const v = this.createVertex();\n        const v0 = t.vertices[0]!;\n        const v1 = t.vertices[1]!;\n        const v2 = t.vertices[2]!;\n        const n1 = t.neighbours[1]!;\n        const n2 = t.neighbours[2]!;\n        const t1 = this.createTriangle(v0, v, v2, t, n1, null);\n        const t2 = this.createTriangle(v0, v1, v, t, null, n2);\n        this.setAdjacency(t1, 2, t2, 1);\n        if (n1 !== null) {\n            const i1 = this.mirrorIndex(t, 1);\n            n1.neighbours[i1] = t1;\n        }\n        if (n2 !== null) {\n            const i2 = this.mirrorIndex(t, 2);\n            n2.neighbours[i2] = t2;\n        }\n        t.vertices[0] = v;\n        t.neighbours[1] = t1;\n        t.neighbours[2] = t2;\n        if (v0.triangle === t) v0.triangle = t2;\n        v.triangle = t;\n        return v;\n    }\n\n    flip(t: Triangle, i: number) {\n        const n = t.neighbours[i]!;\n        const ni = this.mirrorIndex(t, i);\n        const vCW = t.vertices[cw(i)]!;\n        const vCCW = t.vertices[ccw(i)]!;\n        const tr = t.neighbours[ccw(i)]!;\n        const tri = this.mirrorIndex(t, ccw(i));\n        const bl = n.neighbours[ccw(ni)]!;\n        const bli = this.mirrorIndex(n, ccw(ni));\n\n        t.vertices[cw(i)] = n.vertices[ni]!;\n        n.vertices[cw(ni)] = t.vertices[i]!;\n\n        this.setAdjacency(t, i, bl, bli);\n        this.setAdjacency(t, ccw(i), n, ccw(ni));\n        this.setAdjacency(n, ni, tr, tri);\n\n        if (vCW.triangle! === t) vCW.triangle = n;\n        if (vCCW.triangle! === n) vCCW.triangle = t;\n    }\n\n    insertInEdge(t: Triangle, i: number) {\n        let v: Vertex;\n        if (this.dimension === 1) {\n            v = this.createVertex();\n            const ff = t.neighbours[0]!;\n            const vv = t.vertices[1]!;\n            const g = this.createTriangle(v, vv, null, ff, t, null);\n            t.vertices[1] = v;\n            t.neighbours[0] = g;\n            ff.neighbours[1] = g;\n            v.triangle = g;\n            vv.triangle = ff;\n        } else {\n            const n = t.neighbours[i]!;\n            const ni = this.mirrorIndex(t, i);\n            v = this.insertInFace(t);\n            this.flip(n, ni);\n        }\n        return v;\n    }\n}\n","import { partition } from \"@/core/utils\";\nimport { GlobalPoint, Ray } from \"@/game/geom\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { BoundingRect } from \"@/game/shapes/boundingrect\";\nimport { gameStore } from \"@/game/store\";\nimport { g2lx, g2ly, g2lz } from \"@/game/units\";\nimport { BoundingNode, InteriorNode, LeafNode } from \"@/game/visibility/bvh/node\";\n\ninterface BuildInfo {\n    index: number;\n    bbox: BoundingRect;\n    center: BoundingRect;\n}\ninterface LinearBHVNode {\n    bbox: BoundingRect;\n    nPrimitives: number;\n}\ninterface LinearLeafNode extends LinearBHVNode {\n    primitivesOffset: number;\n}\ninterface LinearInternalNode extends LinearBHVNode {\n    secondChildOffset: number;\n    dimension: number;\n}\n\nexport class BoundingVolume {\n    totalNodes = 0;\n    buildData: BuildInfo[] = [];\n    shapes: string[];\n    orderedPrims: string[] = [];\n    root: BoundingNode | null;\n    nodes: LinearBHVNode[] = [];\n\n    offset = 0;\n\n    constructor(shapes: string[]) {\n        this.shapes = shapes;\n        if (this.shapes.length === 0) {\n            this.root = null;\n            this.nodes = [];\n            return;\n        }\n        for (let i = 0; i < shapes.length; i++) {\n            const shape = layerManager.UUIDMap.get(shapes[i])!;\n            try {\n                this.buildData.push({\n                    index: i,\n                    bbox: shape.getBoundingBox(),\n                    center: new BoundingRect(shape.center(), 0, 0),\n                });\n            } catch {\n                console.warn(`Shape ${shape.type} - ${shape.uuid} cannot be used for vision blocking !!!`);\n                shape.visionObstruction = false;\n                gameStore.visionBlockers.splice(i, 1);\n                throw new Error();\n            }\n        }\n        this.root = this.recursiveBuild(0, shapes.length);\n        this.compact();\n    }\n\n    draw() {\n        const ctx = layerManager.getLayer(\"draw\")!.ctx;\n        for (const node of this.nodes) {\n            const b = node.bbox;\n            ctx.strokeRect(g2lx(b.topLeft.x), g2ly(b.topLeft.y), g2lz(b.w), g2lz(b.h));\n        }\n    }\n\n    recursiveBuild(start: number, end: number): BoundingNode {\n        this.totalNodes++;\n        let bbox = this.buildData[start].bbox;\n        for (let i = start + 1; i < end; i++) bbox = bbox.union(this.buildData[i].bbox);\n        const nPrimitives = end - start;\n        if (nPrimitives === 1) {\n            return this.createLeaf(start, end, nPrimitives, bbox);\n        } else {\n            let centroidBbox = this.buildData[start].center;\n            for (let i = start; i < end; i++) centroidBbox = centroidBbox.union(this.buildData[i].center);\n            const dimension = centroidBbox.getMaxExtent();\n            if (centroidBbox.botRight.get(dimension) === centroidBbox.topLeft.get(dimension)) {\n                return this.createLeaf(start, end, nPrimitives, bbox);\n            }\n            // Use shitty Middle thingy until an introselect js algo is added\n            const pMid = 0.5 * (centroidBbox.topLeft.get(dimension) + centroidBbox.botRight.get(dimension));\n            const partitionedData = partition(\n                this.buildData.slice(start, end),\n                (n: BuildInfo) => n.center.center().get(dimension) < pMid,\n            );\n            const flattened = (<BuildInfo[]>[]).concat.apply([], partitionedData);\n            if (partitionedData[0].length === 0 || partitionedData[1].length === 0) console.log(\"EMPTY\");\n            this.buildData.splice(start, flattened.length, ...flattened);\n            const mid = partitionedData[0].length + start;\n            return new InteriorNode(dimension, this.recursiveBuild(start, mid), this.recursiveBuild(mid, end));\n        }\n    }\n\n    intersect(ray: Ray<GlobalPoint>, stopOnFirstHit?: boolean) {\n        if (this.nodes.length === 0) return { hit: false, intersect: ray.get(0), tMin: 0, tMax: ray.tMax };\n        if (stopOnFirstHit === undefined) stopOnFirstHit = false;\n        // Initialize return values\n        let hit = false;\n        let tMin = 0;\n        let tMax = ray.tMax;\n\n        // Initialize work variables\n        let todoOffset = 0;\n        let nodeNum = 0;\n        const todo: number[] = [];\n\n        // Precalculate intersection vectors\n        const invDir = ray.direction.inverse();\n        const dirIsNegative = [invDir.x < 0, invDir.y < 0];\n\n        while (true) {\n            const node = this.nodes[nodeNum];\n\n            const i = node.bbox.intersectP(ray, invDir, dirIsNegative);\n            if (i.hit) {\n                if (node.nPrimitives > 0) {\n                    // TODO: nPrimitives is currently always 1 , this could be generalised\n                    // for (let i=0; i < node.nPrimitives; i++) {\n                    //     if (this.shapes[(<LinearLeafNode>node).primitivesOffset + i])\n                    // }\n                    hit = true;\n                    tMin = ray.tMax = i.min;\n                    tMax = i.max;\n                    if (todoOffset === 0 || stopOnFirstHit) break;\n                    nodeNum = todo[--todoOffset];\n                } else {\n                    if (dirIsNegative[(<LinearInternalNode>node).dimension]) {\n                        todo[todoOffset++] = nodeNum + 1;\n                        nodeNum = (<LinearInternalNode>node).secondChildOffset;\n                    } else {\n                        todo[todoOffset++] = (<LinearInternalNode>node).secondChildOffset;\n                        nodeNum++;\n                    }\n                }\n            } else {\n                if (todoOffset === 0) break;\n                nodeNum = todo[--todoOffset];\n            }\n        }\n        return { hit, intersect: ray.get(tMin), tMin, tMax };\n    }\n\n    private compact() {\n        this.offset = 0;\n        if (this.root !== null) this.flatten(this.root);\n    }\n\n    private flatten(node: BoundingNode) {\n        const index = this.offset;\n        const myOffset = this.offset++;\n        if (node.nPrimitives === 0) {\n            this.flatten(node.children[0]);\n            const secondOffset = this.flatten(node.children[1]);\n            this.nodes[index] = <LinearInternalNode>{\n                bbox: node.bbox,\n                dimension: (<InteriorNode>node).dimension,\n                nPrimitives: 0,\n                secondChildOffset: secondOffset,\n            };\n        } else {\n            this.nodes[index] = <LinearLeafNode>{\n                bbox: node.bbox,\n                primitivesOffset: (<LeafNode>node).firstPrimOffset,\n                nPrimitives: node.nPrimitives,\n            };\n        }\n        return myOffset;\n    }\n\n    private createLeaf(start: number, end: number, nPrimitives: number, bbox: BoundingRect) {\n        const size = this.orderedPrims.length;\n        for (let i = start; i < end; i++) this.orderedPrims.push(this.shapes[this.buildData[i].index]);\n        return new LeafNode(size, nPrimitives, bbox);\n    }\n}\n","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./shapecontext.vue?vue&type=style&index=0&id=7111f3f6&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./shapecontext.vue?vue&type=style&index=0&id=7111f3f6&scoped=true&lang=css&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./menu.vue?vue&type=style&index=0&id=21f210ea&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./menu.vue?vue&type=style&index=0&id=21f210ea&scoped=true&lang=css&\"","import Initiative from \"./ui/initiative.vue\";\n\nimport { getRef } from \"@/core/utils\";\nimport { sendClientOptions } from \"@/game/api/utils\";\nimport { ServerShape } from \"@/game/comm/types/shapes\";\nimport { GlobalPoint } from \"@/game/geom\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { createShapeFromDict } from \"@/game/shapes/utils\";\nimport { gameStore } from \"@/game/store\";\nimport { AnnotationManager } from \"@/game/ui/annotation\";\nimport { g2l } from \"@/game/units\";\n\nexport class GameManager {\n    selectedTool: number = 0;\n\n    annotationManager = new AnnotationManager();\n\n    addShape(shape: ServerShape): void {\n        if (!layerManager.hasLayer(shape.layer)) {\n            console.log(`Shape with unknown layer ${shape.layer} could not be added`);\n            return;\n        }\n        const layer = layerManager.getLayer(shape.layer)!;\n        const sh = createShapeFromDict(shape);\n        if (sh === undefined) {\n            console.log(`Shape with unknown type ${shape.type_} could not be added`);\n            return;\n        }\n        layer.addShape(sh, false);\n        layer.invalidate(false);\n    }\n\n    updateShape(data: { shape: ServerShape; redraw: boolean; move: boolean }): void {\n        if (!layerManager.hasLayer(data.shape.layer)) {\n            console.log(`Shape with unknown layer ${data.shape.layer} could not be added`);\n            return;\n        }\n        const sh = createShapeFromDict(data.shape, true);\n        if (sh === undefined) {\n            console.log(`Shape with unknown type ${data.shape.type_} could not be added`);\n            return;\n        }\n        const oldShape = layerManager.UUIDMap.get(data.shape.uuid);\n        if (oldShape === undefined) {\n            console.log(`Shape with unknown id could not be updated`);\n            return;\n        }\n        const redrawInitiative = sh.owners !== oldShape.owners;\n        const shape = Object.assign(oldShape, sh);\n        shape.checkVisionSources();\n        shape.setMovementBlock(shape.movementObstruction);\n        shape.setIsToken(shape.isToken);\n        if (data.move && shape.visionObstruction) gameStore.recalculateBV();\n        if (data.redraw) layerManager.getLayer(data.shape.layer)!.invalidate(false);\n        if (redrawInitiative) getRef<Initiative>(\"initiative\").$forceUpdate();\n    }\n\n    setCenterPosition(position: GlobalPoint) {\n        const localPos = g2l(position);\n        gameStore.increasePanX((window.innerWidth / 2 - localPos.x) / gameStore.zoomFactor);\n        gameStore.increasePanY((window.innerHeight / 2 - localPos.y) / gameStore.zoomFactor);\n        layerManager.invalidate();\n        sendClientOptions();\n    }\n}\n\nexport const gameManager = new GameManager();\n(<any>window).gameManager = gameManager;\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('modal',{attrs:{\"visible\":_vm.visible,\"mask\":false},on:{\"close\":function($event){_vm.visible = false}},scopedSlots:_vm._u([{key:\"header\",fn:function(m){return _c('div',{staticClass:\"modal-header\",attrs:{\"draggable\":\"true\"},on:{\"dragstart\":m.dragStart,\"dragend\":m.dragEnd}},[_c('div',[_vm._v(\"Initiative\")]),_c('div',{staticClass:\"header-close\",on:{\"click\":function($event){_vm.visible = false}}},[_c('i',{staticClass:\"far fa-window-close\"})])])}}])},[_c('div',{staticClass:\"modal-body\"},[_c('draggable',{attrs:{\"id\":\"initiative-list\",\"options\":{setData: _vm.fakeSetData, disabled: !_vm.$store.state.game.IS_DM}},on:{\"change\":_vm.updateOrder},model:{value:(_vm.data),callback:function ($$v) {_vm.data=$$v},expression:\"data\"}},[_vm._l((_vm.data),function(actor){return [_c('div',{key:actor.uuid,staticStyle:{\"display\":\"flex\",\"flex-direction\":\"column\",\"align-items\":\"flex-end\"}},[_c('div',{staticClass:\"initiative-actor\",class:{'initiative-selected': _vm.currentActor === actor.uuid},style:({'cursor': _vm.$store.state.game.IS_DM && 'move'}),on:{\"mouseenter\":function($event){_vm.toggleHighlight(actor, true)},\"mouseleave\":function($event){_vm.toggleHighlight(actor, false)}}},[(actor.has_img)?[_c('img',{attrs:{\"src\":actor.source,\"width\":\"30px\",\"height\":\"30px\"}})]:[_c('span',{staticStyle:{\"width\":\"auto\"}},[_vm._v(_vm._s(actor.source))])],_c('input',{directives:[{name:\"model\",rawName:\"v-model.lazy.number\",value:(actor.initiative),expression:\"actor.initiative\",modifiers:{\"lazy\":true,\"number\":true}}],class:{'notAllowed': !_vm.owns(actor)},attrs:{\"type\":\"text\",\"placeholder\":\"value\",\"disabled\":!_vm.owns(actor)},domProps:{\"value\":(actor.initiative)},on:{\"change\":[function($event){_vm.$set(actor, \"initiative\", _vm._n($event.target.value))},function($event){_vm.syncInitiative(actor)}],\"blur\":function($event){_vm.$forceUpdate()}}}),_c('div',{staticClass:\"initiative-effects-icon\",class:{'notAllowed': !_vm.owns(actor)},staticStyle:{\"opacity\":\"0.6\"},on:{\"click\":function($event){_vm.createEffect(actor, _vm.getDefaultEffect(), true)}}},[_c('i',{staticClass:\"fas fa-stopwatch\"}),(actor.effects)?[_vm._v(_vm._s(actor.effects.length))]:[_vm._v(\"0\")]],2),_c('div',{class:{'notAllowed': !_vm.owns(actor)},style:({'opacity': actor.visible ? '1.0' : '0.3'}),on:{\"click\":function($event){_vm.toggleOption(actor, 'visible')}}},[_c('i',{staticClass:\"fas fa-eye\"})]),_c('div',{class:{'notAllowed': !_vm.owns(actor)},style:({'opacity': actor.group ? '1.0' : '0.3'}),on:{\"click\":function($event){_vm.toggleOption(actor, 'group')}}},[_c('i',{staticClass:\"fas fa-users\"})]),_c('div',{class:{'notAllowed': !_vm.owns(actor)},style:({'opacity': _vm.owns(actor) ? '1.0' : '0.3'}),on:{\"click\":function($event){_vm.removeInitiative(actor.uuid, true, true)}}},[_c('i',{staticClass:\"fas fa-trash-alt\"})])],2),(actor.effects)?_c('div',{staticClass:\"initiative-effect\"},_vm._l((actor.effects),function(effect){return _c('div',{key:effect.uuid},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(effect.name),expression:\"effect.name\"}],attrs:{\"type\":\"text\",\"size\":effect.name.length || 1},domProps:{\"value\":(effect.name)},on:{\"change\":function($event){_vm.updateEffect(actor.uuid, effect, true)},\"input\":function($event){if($event.target.composing){ return; }_vm.$set(effect, \"name\", $event.target.value)}}}),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(effect.turns),expression:\"effect.turns\"}],attrs:{\"type\":\"text\",\"size\":effect.turns.toString().length || 1},domProps:{\"value\":(effect.turns)},on:{\"change\":function($event){_vm.updateEffect(actor.uuid, effect, true)},\"input\":function($event){if($event.target.composing){ return; }_vm.$set(effect, \"turns\", $event.target.value)}}})])})):_vm._e()])]})],2),_c('div',{attrs:{\"id\":\"initiative-bar\"}},[_c('div',{attrs:{\"id\":\"initiative-round\"}},[_vm._v(\"Round \"+_vm._s(_vm.roundCounter))]),_c('div',{staticStyle:{\"display\":\"flex\"}}),_c('div',{staticClass:\"initiative-bar-button\",class:{'notAllowed': !_vm.$store.state.game.IS_DM},on:{\"click\":function($event){_vm.setRound(0, true); _vm.setTurn(_vm.data[0].uuid, true)}}},[_c('i',{staticClass:\"fas fa-sync-alt\"})]),_c('div',{staticClass:\"initiative-bar-button\",class:{'notAllowed': !_vm.$store.state.game.IS_DM},on:{\"click\":_vm.nextTurn}},[_c('i',{staticClass:\"fas fa-chevron-right\"})])])],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"74f43d04-vue-loader-template\\\"}!../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./initiative.vue?vue&type=template&id=ccaf03d6&scoped=true&\"","\n\n\n\n\n\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\n\n@Component\nexport default class LoadComponent extends Vue {\n    message = \"Loading...\";\n}\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./game.vue?vue&type=style&index=1&id=6d744362&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./game.vue?vue&type=style&index=1&id=6d744362&scoped=true&lang=css&\"","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport axios, { AxiosError, AxiosResponse } from \"axios\";\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\nimport { Route } from \"vue-router\";\n\nimport { coreStore } from \"@/core/store\";\n\nComponent.registerHooks([\"beforeRouteEnter\"]);\n\n@Component\nexport default class Dashboard extends Vue {\n    owned = [];\n    joined = [];\n    error = \"\";\n\n    newSessionName = \"\";\n\n    beforeRouteEnter(to: Route, from: Route, next: ({}) => {}) {\n        axios\n            .get(\"/api/rooms\")\n            .then((response: AxiosResponse) => {\n                next((vm: this) => {\n                    vm.owned = response.data.owned;\n                    vm.joined = response.data.joined;\n                });\n            })\n            .catch((err: AxiosError) => {\n                next((vm: this) => {\n                    vm.error = err.message;\n                });\n            });\n    }\n\n    createRoom(event: Event) {\n        axios\n            .post(\"/api/rooms\", {\n                name: this.newSessionName,\n            })\n            .then((response: AxiosResponse) => {\n                this.$router.push(`/game/${coreStore.username}/${this.newSessionName}`);\n            })\n            .catch((err: AxiosError) => {\n                this.error = err.message;\n            });\n    }\n}\n","import { render, staticRenderFns } from \"./confirm.vue?vue&type=template&id=1883e207&scoped=true&\"\nimport script from \"./confirm.vue?vue&type=script&lang=ts&\"\nexport * from \"./confirm.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./confirm.vue?vue&type=style&index=0&id=1883e207&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1883e207\",\n  null\n  \n)\n\ncomponent.options.__file = \"confirm.vue\"\nexport default component.exports","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./shapecontext.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./shapecontext.vue?vue&type=script&lang=ts&\"","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--12-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./manager.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--12-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./manager.vue?vue&type=script&lang=ts&\"","import Vue from \"vue\";\nexport const EventBus = new Vue();\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--12-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./main.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--12-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./main.vue?vue&type=script&lang=ts&\"","import { GlobalPoint } from \"@/game/geom\";\nimport { BaseRect } from \"@/game/shapes/baserect\";\nimport { gameStore } from \"@/game/store\";\nimport { g2l } from \"@/game/units\";\nimport { getFogColour } from \"@/game/utils\";\n\nexport class Rect extends BaseRect {\n    type = \"rect\";\n    constructor(topleft: GlobalPoint, w: number, h: number, fillColour?: string, strokeColour?: string, uuid?: string) {\n        super(topleft, w, h, fillColour, strokeColour, uuid);\n    }\n    asDict() {\n        return super.getBaseDict();\n    }\n    draw(ctx: CanvasRenderingContext2D) {\n        super.draw(ctx);\n        if (this.fillColour === \"fog\") ctx.fillStyle = getFogColour();\n        else ctx.fillStyle = this.fillColour;\n        const z = gameStore.zoomFactor;\n        const loc = g2l(this.refPoint);\n        ctx.fillRect(loc.x, loc.y, this.w * z, this.h * z);\n        if (this.strokeColour !== \"rgba(0, 0, 0, 0)\") {\n            ctx.strokeStyle = this.strokeColour;\n            ctx.lineWidth = 5;\n            ctx.strokeRect(loc.x, loc.y, this.w * z, this.h * z);\n        }\n    }\n}\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./selectcontext.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./selectcontext.vue?vue&type=script&lang=ts&\"","import { Ray, Vector } from \"@/game/geom\";\nimport { Layer } from \"@/game/layers/layer\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { Settings } from \"@/game/settings\";\nimport { gameStore } from \"@/game/store\";\nimport { g2l, g2lx, g2ly } from \"@/game/units\";\nimport { computeVisibility } from \"../visibility/te/te\";\n\nexport class FOWPlayersLayer extends Layer {\n    isVisionLayer: boolean = true;\n\n    draw(): void {\n        if (!this.valid) {\n            // console.time(\"VI\");\n            const ctx = this.ctx;\n\n            if (!gameStore.fowLOS || Settings.skipPlayerFOW) {\n                ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n                this.valid = true;\n                return;\n            }\n\n            ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n\n            const drctx = layerManager.getLayer(\"draw\")!.ctx;\n            drctx.clearRect(0, 0, window.innerWidth, window.innerHeight);\n\n            const originalOperation = ctx.globalCompositeOperation;\n\n            ctx.fillStyle = \"rgba(0, 0, 0, 1)\";\n\n            // For the DM this is done at the end of this function.  TODO: why the split up ???\n            // This was done in commit be1e65cff1e7369375fe11cfa1643fab1d11beab.\n            if (!gameStore.IS_DM) super.draw(!gameStore.fullFOW);\n\n            // Then cut out all the player vision auras\n            const maxLength = ctx.canvas.width + ctx.canvas.height;\n\n            for (const tokenId of gameStore.ownedtokens) {\n                const token = layerManager.UUIDMap.get(tokenId);\n                if (token === undefined) continue;\n                if (gameStore.visionMode === \"bvh\") {\n                    ctx.beginPath();\n                    let lastArcAngle = -1;\n                    const center = token.center();\n                    const lcenter = g2l(center);\n\n                    for (let angle = 0; angle < 2 * Math.PI; angle += (Settings.angleSteps / 2 / 180) * Math.PI) {\n                        const cos = Math.cos(angle);\n                        const sin = Math.sin(angle);\n                        // Check if there is a hit with one of the nearby light blockers.\n                        const lightRay = new Ray(center, new Vector(cos, sin));\n                        const hitResult = gameStore.BV.intersect(lightRay);\n\n                        // We can move on to the next angle if nothing was hit.\n                        if (!hitResult.hit) {\n                            // If an earlier hit caused the aura to leave the arc, we need to go back to the arc\n                            if (lastArcAngle === -1) {\n                                // Draw a line from the last non arc location back to the arc\n                                ctx.lineTo(lcenter.x + maxLength * cos, lcenter.y + maxLength * sin);\n                                // Set the start of a new arc beginning at the current angle\n                                lastArcAngle = angle;\n                            }\n                            continue;\n                        }\n                        // If hit , first finish any ongoing arc, then move to the intersection point\n                        if (lastArcAngle !== -1) {\n                            ctx.arc(lcenter.x, lcenter.y, maxLength, lastArcAngle, angle);\n                            lastArcAngle = -1;\n                        }\n                        ctx.lineTo(g2lx(hitResult.intersect.x), g2ly(hitResult.intersect.y));\n                    }\n\n                    // Finish the final arc.\n                    if (lastArcAngle !== -1) ctx.arc(lcenter.x, lcenter.y, maxLength, lastArcAngle, 2 * Math.PI);\n                    else ctx.closePath();\n                    ctx.fill();\n                } else {\n                    try {\n                        const polygon = computeVisibility(token.center());\n                        ctx.beginPath();\n                        ctx.moveTo(g2lx(polygon[0][0]), g2ly(polygon[0][1]));\n                        for (const point of polygon) ctx.lineTo(g2lx(point[0]), g2ly(point[1]));\n                        ctx.closePath();\n                        ctx.fill();\n                    } catch {}\n                }\n            }\n\n            // For the players this is done at the beginning of this function.  TODO: why the split up ???\n            // This was done in commit be1e65cff1e7369375fe11cfa1643fab1d11beab.\n            if (gameStore.IS_DM) super.draw(!gameStore.fullFOW);\n\n            ctx.globalCompositeOperation = originalOperation;\n            // console.timeEnd(\"VI\");\n        }\n    }\n}\n","import { socket } from \"@/game/api/socket\";\nimport { ServerShape } from \"@/game/comm/types/shapes\";\nimport { EventBus } from \"@/game/event-bus\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { Shape } from \"@/game/shapes/shape\";\nimport { createShapeFromDict } from \"@/game/shapes/utils\";\nimport { gameStore } from \"@/game/store\";\nimport { g2lx, g2ly } from \"@/game/units\";\n\nexport class Layer {\n    name: string;\n    width: number;\n    height: number;\n    canvas: HTMLCanvasElement;\n    ctx: CanvasRenderingContext2D;\n\n    selectable: boolean = false;\n    playerEditable: boolean = false;\n    isVisionLayer: boolean = false;\n\n    // When set to false, the layer will be redrawn on the next tick\n    valid: boolean = false;\n    // The collection of shapes that this layer contains.\n    // These are ordered on a depth basis.\n    shapes: Shape[] = [];\n\n    // Collection of shapes that are currently selected\n    selection: Shape[] = [];\n\n    // Extra selection highlighting settings\n    selectionColor = \"#CC0000\";\n    selectionWidth = 2;\n\n    constructor(canvas: HTMLCanvasElement, name: string) {\n        this.canvas = canvas;\n        this.name = name;\n        this.width = canvas.width;\n        this.height = canvas.height;\n        this.ctx = canvas.getContext(\"2d\")!;\n    }\n\n    invalidate(skipLightUpdate: boolean): void {\n        this.valid = false;\n        if (!skipLightUpdate) {\n            layerManager.invalidateLight();\n        }\n    }\n\n    addShape(shape: Shape, sync: boolean, temporary?: boolean): void {\n        if (temporary === undefined) temporary = false;\n        shape.layer = this.name;\n        this.shapes.push(shape);\n        layerManager.UUIDMap.set(shape.uuid, shape);\n        shape.checkVisionSources();\n        shape.setMovementBlock(shape.movementObstruction);\n        if (shape.ownedBy(gameStore.username) && shape.isToken) gameStore.ownedtokens.push(shape.uuid);\n        if (shape.annotation.length) gameStore.annotations.push(shape.uuid);\n        if (sync) socket.emit(\"Shape.Add\", { shape: shape.asDict(), temporary });\n        this.invalidate(!sync);\n    }\n\n    setShapes(shapes: ServerShape[]): void {\n        for (const serverShape of shapes) {\n            const shape = createShapeFromDict(serverShape);\n            if (shape === undefined) {\n                console.log(`Shape with unknown type ${serverShape.type_} could not be added`);\n                return;\n            }\n            this.addShape(shape, false, false);\n        }\n        this.clearSelection(); // TODO: Fix keeping selection on those items that are not moved.\n        this.invalidate(false);\n    }\n\n    removeShape(shape: Shape, sync: boolean, temporary?: boolean) {\n        if (temporary === undefined) temporary = false;\n        this.shapes.splice(this.shapes.indexOf(shape), 1);\n\n        if (sync) socket.emit(\"Shape.Remove\", { shape, temporary });\n        const lsI = gameStore.visionSources.findIndex(ls => ls.shape === shape.uuid);\n        const lbI = gameStore.visionBlockers.findIndex(ls => ls === shape.uuid);\n\n        const mbI = gameStore.movementblockers.findIndex(ls => ls === shape.uuid);\n        const anI = gameStore.annotations.findIndex(ls => ls === shape.uuid);\n        if (lsI >= 0) gameStore.visionSources.splice(lsI, 1);\n        if (lbI >= 0) gameStore.visionBlockers.splice(lbI, 1);\n        if (mbI >= 0) gameStore.movementblockers.splice(mbI, 1);\n        if (anI >= 0) gameStore.annotations.splice(anI, 1);\n\n        const annotationIndex = gameStore.annotations.indexOf(shape.uuid);\n        if (annotationIndex >= 0) gameStore.annotations.splice(annotationIndex, 1);\n\n        const ownedIndex = gameStore.ownedtokens.indexOf(shape.uuid);\n        if (ownedIndex >= 0) gameStore.ownedtokens.splice(ownedIndex, 1);\n\n        layerManager.UUIDMap.delete(shape.uuid);\n\n        const index = this.selection.indexOf(shape);\n        if (index >= 0) this.selection.splice(index, 1);\n        if (lbI >= 0) gameStore.recalculateBV();\n        this.invalidate(!sync);\n    }\n\n    clear(): void {\n        this.ctx.clearRect(0, 0, this.width, this.height);\n    }\n\n    clearSelection(): void {\n        this.selection = [];\n        EventBus.$emit(\"SelectionInfo.Shape.Set\", null);\n    }\n\n    draw(doClear?: boolean): void {\n        if (!this.valid) {\n            const ctx = this.ctx;\n            const ogOP = ctx.globalCompositeOperation;\n            doClear = doClear === undefined ? true : doClear;\n\n            if (doClear) this.clear();\n\n            const state = this;\n\n            // We iteratre twice over all shapes\n            // First to draw the auras and a second time to draw the shapes themselves\n            // Otherwise auras from one shape could be overlapping another shape itself.\n\n            this.shapes.forEach(shape => {\n                if (shape.options.has(\"skipDraw\") && shape.options.get(\"skipDraw\")) return;\n                if (layerManager.getLayer() === undefined) return;\n                if (!shape.visibleInCanvas(state.canvas)) return;\n                if (state.name === \"fow\" && shape.visionObstruction && layerManager.getLayer()!.name !== state.name)\n                    return;\n                shape.drawAuras(ctx);\n            });\n            this.shapes.forEach(shape => {\n                if (shape.options.has(\"skipDraw\") && shape.options.get(\"skipDraw\")) return;\n                if (layerManager.getLayer() === undefined) return;\n                if (!shape.visibleInCanvas(state.canvas)) return;\n                if (state.name === \"fow\" && shape.visionObstruction && layerManager.getLayer()!.name !== state.name)\n                    return;\n                shape.draw(ctx);\n            });\n\n            if (this.selection != null) {\n                ctx.fillStyle = this.selectionColor;\n                ctx.strokeStyle = this.selectionColor;\n                ctx.lineWidth = this.selectionWidth;\n                const z = gameStore.zoomFactor;\n                this.selection.forEach(sel => {\n                    ctx.globalCompositeOperation = sel.globalCompositeOperation;\n                    const bb = sel.getBoundingBox();\n                    // TODO: REFACTOR THIS TO Shape.drawSelection(ctx);\n                    ctx.strokeRect(g2lx(bb.topLeft.x), g2ly(bb.topLeft.y), bb.w * z, bb.h * z);\n\n                    const sw = Math.min(6, bb.w / 2);\n\n                    // topright\n                    ctx.fillRect(g2lx(bb.topRight.x - sw / 2), g2ly(bb.topLeft.y - sw / 2), sw * z, sw * z);\n                    // topleft\n                    ctx.fillRect(g2lx(bb.topLeft.x - sw / 2), g2ly(bb.topLeft.y - sw / 2), sw * z, sw * z);\n                    // botright\n                    ctx.fillRect(g2lx(bb.topRight.x - sw / 2), g2ly(bb.botLeft.y - sw / 2), sw * z, sw * z);\n                    // botleft\n                    ctx.fillRect(g2lx(bb.topLeft.x - sw / 2), g2ly(bb.botLeft.y - sw / 2), sw * z, sw * z);\n                });\n            }\n            ctx.globalCompositeOperation = ogOP;\n            this.valid = true;\n        }\n    }\n\n    moveShapeOrder(shape: Shape, destinationIndex: number, sync: boolean): void {\n        const oldIdx = this.shapes.indexOf(shape);\n        if (oldIdx === destinationIndex) return;\n        this.shapes.splice(oldIdx, 1);\n        this.shapes.splice(destinationIndex, 0, shape);\n        if (sync) socket.emit(\"Shape.Order.Set\", { shape: shape.asDict(), index: destinationIndex });\n        this.invalidate(true);\n    }\n\n    onShapeMove(shape: Shape): void {\n        shape.checkVisionSources();\n        if (shape.visionObstruction) gameStore.recalculateBV();\n        this.invalidate(false);\n    }\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('SelectContext',{ref:\"selectcontext\"})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"74f43d04-vue-loader-template\\\"}!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./select.vue?vue&type=template&id=0ed49b21&\"","import { gameStore } from \"@/game/store\";\nimport { l2g } from \"@/game/units\";\nimport { getMouse } from \"@/game/utils\";\n\nexport function scrollZoom(e: WheelEvent) {\n    if (!e.target || !(<HTMLElement>e.target).tagName || (<HTMLElement>e.target).tagName !== \"CANVAS\") return;\n    let delta: number;\n    delta = Math.sign(e.deltaY) * -1;\n    gameStore.updateZoom({ newZoomValue: gameStore.zoomFactor + 0.1 * delta, zoomLocation: l2g(getMouse(e)) });\n}\n","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./asset_node.vue?vue&type=style&index=0&id=62c91cd3&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./asset_node.vue?vue&type=style&index=0&id=62c91cd3&scoped=true&lang=css&\"","import { GlobalPoint, LocalPoint, Vector } from \"@/game/geom\";\nimport { BoundingRect } from \"@/game/shapes/boundingrect\";\nimport { Shape } from \"@/game/shapes/shape\";\nimport { gameStore } from \"@/game/store\";\nimport { calculateDelta } from \"@/game/ui/tools/utils\";\nimport { g2lx, g2ly, l2g, l2gx, l2gy } from \"@/game/units\";\n\nexport abstract class BaseRect extends Shape {\n    w: number;\n    h: number;\n    constructor(topleft: GlobalPoint, w: number, h: number, fillColour?: string, strokeColour?: string, uuid?: string) {\n        super(topleft, fillColour, strokeColour, uuid);\n        this.w = w;\n        this.h = h;\n    }\n    getBaseDict() {\n        return Object.assign(super.getBaseDict(), {\n            width: this.w,\n            height: this.h,\n        });\n    }\n    getBoundingBox() {\n        return new BoundingRect(this.refPoint, this.w, this.h);\n    }\n\n    get points() {\n        if (this.w === 0 || this.h === 0) return [[this.refPoint.x, this.refPoint.y]];\n        // note to self: topright and botleft are swapped because I'm retarded.\n        const topright = this.refPoint.add(new Vector(0, this.h));\n        const botright = this.refPoint.add(new Vector(this.w, this.h));\n        const botleft = this.refPoint.add(new Vector(this.w, 0));\n        return [\n            [this.refPoint.x, this.refPoint.y],\n            [topright.x, topright.y],\n            [botright.x, botright.y],\n            [botleft.x, botleft.y],\n        ];\n    }\n\n    contains(point: GlobalPoint): boolean {\n        return (\n            this.refPoint.x <= point.x &&\n            this.refPoint.x + this.w >= point.x &&\n            this.refPoint.y <= point.y &&\n            this.refPoint.y + this.h >= point.y\n        );\n    }\n    inCorner(point: GlobalPoint, corner: string) {\n        switch (corner) {\n            case \"ne\":\n                return (\n                    this.refPoint.x + this.w - 3 <= point.x &&\n                    point.x <= this.refPoint.x + this.w + 3 &&\n                    this.refPoint.y - 3 <= point.y &&\n                    point.y <= this.refPoint.y + 3\n                );\n            case \"nw\":\n                return (\n                    this.refPoint.x - 3 <= point.x &&\n                    point.x <= this.refPoint.x + 3 &&\n                    this.refPoint.y - 3 <= point.y &&\n                    point.y <= this.refPoint.y + 3\n                );\n            case \"sw\":\n                return (\n                    this.refPoint.x - 3 <= point.x &&\n                    point.x <= this.refPoint.x + 3 &&\n                    this.refPoint.y + this.h - 3 <= point.y &&\n                    point.y <= this.refPoint.y + this.h + 3\n                );\n            case \"se\":\n                return (\n                    this.refPoint.x + this.w - 3 <= point.x &&\n                    point.x <= this.refPoint.x + this.w + 3 &&\n                    this.refPoint.y + this.h - 3 <= point.y &&\n                    point.y <= this.refPoint.y + this.h + 3\n                );\n            default:\n                return false;\n        }\n    }\n    getCorner(point: GlobalPoint): string | undefined {\n        if (this.inCorner(point, \"ne\")) return \"ne\";\n        else if (this.inCorner(point, \"nw\")) return \"nw\";\n        else if (this.inCorner(point, \"se\")) return \"se\";\n        else if (this.inCorner(point, \"sw\")) return \"sw\";\n    }\n    center(): GlobalPoint;\n    center(centerPoint: GlobalPoint): void;\n    center(centerPoint?: GlobalPoint): GlobalPoint | void {\n        if (centerPoint === undefined) return this.refPoint.add(new Vector(this.w / 2, this.h / 2));\n        this.refPoint.x = centerPoint.x - this.w / 2;\n        this.refPoint.y = centerPoint.y - this.h / 2;\n    }\n\n    visibleInCanvas(canvas: HTMLCanvasElement): boolean {\n        if (super.visibleInCanvas(canvas)) return true;\n        const coreVisible = !(\n            g2lx(this.refPoint.x) > canvas.width ||\n            g2ly(this.refPoint.y) > canvas.height ||\n            g2lx(this.refPoint.x + this.w) < 0 ||\n            g2ly(this.refPoint.y + this.h) < 0\n        );\n        if (coreVisible) return true;\n        return false;\n    }\n    snapToGrid() {\n        const gs = gameStore.gridSize;\n        const center = this.center();\n        const mx = center.x;\n        const my = center.y;\n\n        let targetX;\n        let targetY;\n\n        if ((this.w / gs) % 2 === 0) {\n            targetX = Math.round(mx / gs) * gs - this.w / 2;\n        } else {\n            targetX = (Math.round((mx + gs / 2) / gs) - 1 / 2) * gs - this.w / 2;\n        }\n        if ((this.h / gs) % 2 === 0) {\n            targetY = Math.round(my / gs) * gs - this.h / 2;\n        } else {\n            targetY = (Math.round((my + gs / 2) / gs) - 1 / 2) * gs - this.h / 2;\n        }\n\n        const delta = calculateDelta(new Vector(targetX - this.refPoint.x, targetY - this.refPoint.y), this);\n        this.refPoint = this.refPoint.add(delta);\n\n        this.invalidate(false);\n    }\n    resizeToGrid() {\n        const gs = gameStore.gridSize;\n        this.refPoint.x = Math.round(this.refPoint.x / gs) * gs;\n        this.refPoint.y = Math.round(this.refPoint.y / gs) * gs;\n        this.w = Math.max(Math.round(this.w / gs) * gs, gs);\n        this.h = Math.max(Math.round(this.h / gs) * gs, gs);\n        this.invalidate(false);\n    }\n    resize(resizedir: string, point: LocalPoint) {\n        const z = gameStore.zoomFactor;\n        if (resizedir === \"nw\") {\n            this.w = g2lx(this.refPoint.x) + this.w * z - point.x;\n            this.h = g2ly(this.refPoint.y) + this.h * z - point.y;\n            this.refPoint = l2g(point);\n        } else if (resizedir === \"ne\") {\n            this.w = point.x - g2lx(this.refPoint.x);\n            this.h = g2ly(this.refPoint.y) + this.h * z - point.y;\n            this.refPoint.y = l2gy(point.y);\n        } else if (resizedir === \"se\") {\n            this.w = point.x - g2lx(this.refPoint.x);\n            this.h = point.y - g2ly(this.refPoint.y);\n        } else if (resizedir === \"sw\") {\n            this.w = g2lx(this.refPoint.x) + this.w * z - point.x;\n            this.h = point.y - g2ly(this.refPoint.y);\n            this.refPoint.x = l2gx(point.x);\n        }\n        this.w /= z;\n        this.h /= z;\n\n        if (this.w < 0) {\n            this.refPoint.x += this.w;\n            this.w = Math.abs(this.w);\n        }\n        if (this.h < 0) {\n            this.refPoint.y += this.h;\n            this.h = Math.abs(this.h);\n        }\n    }\n}\n","import { render, staticRenderFns } from \"./select.vue?vue&type=template&id=0ed49b21&\"\nimport script from \"./select.vue?vue&type=script&lang=ts&\"\nexport * from \"./select.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"select.vue\"\nexport default component.exports","import { render, staticRenderFns } from \"./main.vue?vue&type=template&id=61eb1455&scoped=true&\"\nimport script from \"./main.vue?vue&type=script&lang=ts&\"\nexport * from \"./main.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./main.vue?vue&type=style&index=0&id=61eb1455&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"61eb1455\",\n  null\n  \n)\n\ncomponent.options.__file = \"main.vue\"\nexport default component.exports","\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\n\nimport ContextMenu from \"@/core/components/contextmenu.vue\";\n\nimport { socket } from \"@/game/api/socket\";\nimport { EventBus } from \"@/game/event-bus\";\nimport { gameStore } from \"@/game/store\";\nimport { l2gx, l2gy } from \"@/game/units\";\n\n@Component({\n    components: {\n        ContextMenu,\n    },\n})\nexport default class SelectContext extends Vue {\n    visible = false;\n    x = 0;\n    y = 0;\n\n    get IS_DM(): boolean {\n        return gameStore.IS_DM;\n    }\n\n    open(event: MouseEvent) {\n        this.visible = true;\n        this.x = event.pageX;\n        this.y = event.pageY;\n        this.$nextTick(() => this.$children[0].$el.focus());\n    }\n    close() {\n        this.visible = false;\n    }\n    bringPlayers() {\n        if (!gameStore.IS_DM) return;\n        socket.emit(\"Players.Bring\", { x: l2gx(this.x), y: l2gy(this.y) });\n        this.close();\n    }\n    createToken() {\n        (<any>this.$parent.$parent.$refs.createtokendialog).open(this.x, this.y);\n        this.close();\n    }\n    showInitiative() {\n        EventBus.$emit(\"Initiative.Show\");\n        this.close();\n    }\n}\n","import Axios from \"axios\";\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\nimport { Route } from \"vue-router\";\n\nimport { coreStore } from \"@/core/store\";\n\n@Component({ template: \"\" })\nexport default class Logout extends Vue {\n    beforeRouteEnter(to: Route, from: Route, next: ({}) => {}) {\n        Axios.post(\"/api/logout\").then(() => {\n            coreStore.setAuthenticated(false);\n            coreStore.setUsername(\"\");\n            next({ path: \"/auth/login\" });\n        });\n    }\n}\n","import { getModule, Module, Mutation, VuexModule } from \"vuex-module-decorators\";\n\nimport { rootStore } from \"@/store\";\n\nexport interface CoreState {\n    authenticated: boolean;\n    initialized: boolean;\n}\n\n@Module({ dynamic: true, store: rootStore, name: \"core\" })\nclass CoreStore extends VuexModule {\n    authenticated = false;\n    initialized = false;\n    username = \"\";\n\n    @Mutation\n    setAuthenticated(auth: boolean) {\n        this.authenticated = auth;\n    }\n\n    @Mutation\n    setInitialized(init: boolean) {\n        this.initialized = init;\n    }\n\n    @Mutation\n    setUsername(username: string) {\n        this.username = username;\n    }\n}\n\nexport const coreStore = getModule(CoreStore);\n","import Vue from \"vue\";\n\nimport App from \"@/App.vue\";\nimport { router } from \"@/router\";\nimport { rootStore } from \"@/store\";\n\nVue.config.productionTip = false;\nVue.config.devtools = true;\nVue.config.performance = true;\n\nexport const app = new Vue({\n    router,\n    store: rootStore,\n    render: h => h(App),\n}).$mount(\"#app\");\n\n(<any>window).app = app;\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\n\n@Component({\n    props: [\"visible\", \"left\", \"top\"],\n})\nexport default class ContextMenu extends Vue {}\n","import Axios, { AxiosError, AxiosResponse } from \"axios\";\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\nimport { Route } from \"vue-router\";\n\n@Component({ template: \"\" })\nexport default class Initiative extends Vue {\n    beforeRouteEnter(to: Route, from: Route, next: ({}) => {}) {\n        Axios.post(\"/api/invite\", {\n            code: to.params.code,\n        })\n            .then((response: AxiosResponse) => {\n                next({ path: response.data.sessionUrl });\n            })\n            .catch((error: AxiosError) => {\n                console.error(\"Invitation code could not be redeemed\");\n                next({ path: \"/dashboard\" });\n            });\n    }\n}\n","import { render, staticRenderFns } from \"./prompt.vue?vue&type=template&id=0602c2e6&scoped=true&\"\nimport script from \"./prompt.vue?vue&type=script&lang=ts&\"\nexport * from \"./prompt.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./prompt.vue?vue&type=style&index=0&id=0602c2e6&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0602c2e6\",\n  null\n  \n)\n\ncomponent.options.__file = \"prompt.vue\"\nexport default component.exports","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./draw.vue?vue&type=style&index=0&id=7abc7fe9&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./draw.vue?vue&type=style&index=0&id=7abc7fe9&scoped=true&lang=css&\"","import { GlobalPoint } from \"@/game/geom\";\n\nimport { Edge } from \"./cdt\";\nimport { drawPolygon } from \"./draw\";\nimport { PA_CDT } from \"./pa\";\nimport { Point, Sign, Triangle } from \"./tds\";\nimport { ccw, cw, orientation } from \"./triag\";\n\nexport function computeVisibility(q: GlobalPoint, it = 0, drawt = false): number[][] {\n    // console.time(\"CV\");\n    const Q: Point = [q.x, q.y];\n    const rawOutput: number[][] = [];\n    const triangle = PA_CDT.locate(Q, null).loc;\n    if (triangle === null) {\n        console.error(\"Triangle not found\");\n        return [];\n    }\n    // triangle.fill();\n    rawOutput.push(triangle.vertices[1]!.point!);\n    if (!triangle.isConstrained(0))\n        expandEdge(Q, triangle.vertices[2]!.point!, triangle.vertices[1]!.point!, triangle, 0, rawOutput);\n    rawOutput.push(triangle.vertices[2]!.point!);\n    if (!triangle.isConstrained(1))\n        expandEdge(Q, triangle.vertices[0]!.point!, triangle.vertices[2]!.point!, triangle, 1, rawOutput);\n    rawOutput.push(triangle.vertices[0]!.point!);\n    if (!triangle.isConstrained(2))\n        expandEdge(Q, triangle.vertices[1]!.point!, triangle.vertices[0]!.point!, triangle, 2, rawOutput);\n    // console.timeEnd(\"CV\");\n\n    if (drawt) drawPolygon(rawOutput, \"red\");\n\n    return rawOutput;\n}\n\nfunction expandEdge(\n    q: Point,\n    left: number[],\n    right: number[],\n    fh: Triangle,\n    index: number,\n    rawOutput: number[][],\n): void {\n    // fh.edge(index).draw();\n    const nfh = fh.neighbours[index]!;\n    // nfh.fill(\"rgba(255, 0, 0, 0.25)\");\n    const nIndex = nfh.indexT(fh);\n    const rIndex = ccw(nIndex);\n    const lIndex = cw(nIndex);\n    const nvh = nfh.vertices[nIndex]!;\n    const rvh = nfh.vertices[lIndex]!;\n    const lvh = nfh.vertices[rIndex]!;\n\n    const re: Edge = [nfh, rIndex];\n    const le: Edge = [nfh, lIndex];\n\n    const ro = orientation(q, right, nvh.point!);\n    const lo = orientation(q, left, nvh.point!);\n\n    // const ctx = layerManager.getLayer(\"draw\")!.ctx;\n    // ctx.beginPath();\n    // ctx.strokeStyle = \"red\";\n    // ctx.lineJoin = \"round\";\n    // ctx.moveTo(g2lx(q.x), g2ly(q.y));\n    // ctx.lineTo(g2lx(left[0]), g2ly(left[1]));\n    // ctx.moveTo(g2lx(q.x), g2ly(q.y));\n    // ctx.lineTo(g2lx(nvh[0]), g2ly(nvh[1]));\n    // ctx.strokeStyle = \"blue\";\n    // ctx.moveTo(g2lx(q.x), g2ly(q.y));\n    // ctx.lineTo(g2lx(right[0]), g2ly(right[1]));\n    // ctx.moveTo(g2lx(q.x), g2ly(q.y));\n    // ctx.lineTo(g2lx(nvh[0]), g2ly(nvh[1]));\n    // ctx.closePath();\n    // ctx.stroke();\n\n    // Right edge is seen if the new vertex is ccw of the right ray\n    if (ro === Sign.COUNTERCLOCKWISE) {\n        if (re[0].isConstrained(re[1])) {\n            // See if current right ray is rvh\n            if (right !== rvh.point!) rawOutput.push(raySegIntersection(q, right, nvh.point!, rvh.point!));\n            if (lo === Sign.COUNTERCLOCKWISE) rawOutput.push(raySegIntersection(q, left, nvh.point!, rvh.point!));\n        } else {\n            if (lo === Sign.COUNTERCLOCKWISE) return expandEdge(q, left, right, nfh, rIndex, rawOutput);\n            else expandEdge(q, nvh.point!, right, nfh, rIndex, rawOutput);\n        }\n    }\n\n    if (ro !== Sign.CLOCKWISE && lo !== Sign.COUNTERCLOCKWISE) {\n        rawOutput.push(nvh.point!);\n    }\n\n    if (lo === Sign.CLOCKWISE) {\n        if (le[0].isConstrained(le[1])) {\n            if (ro === Sign.CLOCKWISE) {\n                rawOutput.push(raySegIntersection(q, right, nvh.point!, lvh.point!));\n            }\n            if (left !== lvh.point!) {\n                rawOutput.push(raySegIntersection(q, left, nvh.point!, lvh.point!));\n            }\n            return;\n        } else {\n            if (ro === Sign.CLOCKWISE) {\n                return expandEdge(q, left, right, nfh, lIndex, rawOutput);\n            } else {\n                return expandEdge(q, left, nvh.point!, nfh, lIndex, rawOutput);\n            }\n        }\n    }\n}\n\nfunction raySegIntersection(q: Point, b: Point, s: Point, t: Point) {\n    const denominator = (t[1] - s[1]) * (b[0] - q[0]) - (t[0] - s[0]) * (b[1] - q[1]);\n    const ua = ((t[0] - s[0]) * (q[1] - s[1]) - (t[1] - s[1]) * (q[0] - s[0])) / denominator;\n    // const ub = ((b[0] - q.x) * (q.y - s[1]) - (b[1] - q.y) * (q.x - s[0])) / denominator;\n    const x = q[0] + ua * (b[0] - q[0]);\n    const y = q[1] + ua * (b[1] - q[1]);\n\n    return [x, y];\n}\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./login.vue?vue&type=style&index=0&id=6bbf3b79&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./login.vue?vue&type=style&index=0&id=6bbf3b79&scoped=true&lang=css&\"","import { render, staticRenderFns } from \"./edit_dialog.vue?vue&type=template&id=078b3b76&scoped=true&\"\nimport script from \"./edit_dialog.vue?vue&type=script&lang=ts&\"\nexport * from \"./edit_dialog.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./edit_dialog.vue?vue&type=style&index=0&id=078b3b76&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"078b3b76\",\n  null\n  \n)\n\ncomponent.options.__file = \"edit_dialog.vue\"\nexport default component.exports","export class Settings {\n    static angleSteps = 4;\n    static drawAngleLines = false;\n    static drawFirstLightHit = false;\n    static skipPlayerFOW = false;\n    static skipLightFOW = false;\n\n    static tempFill: string = \"fog\";\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport axios, { AxiosError, AxiosResponse } from \"axios\";\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\n\nimport { coreStore } from \"@/core/store\";\n\n@Component\nexport default class Login extends Vue {\n    username = \"\";\n    password = \"\";\n    error = \"\";\n\n    login() {\n        axios\n            .post(\"/api/login\", {\n                username: this.username,\n                password: this.password,\n            })\n            .then((response: AxiosResponse) => {\n                coreStore.setUsername(this.username);\n                coreStore.setAuthenticated(true);\n                this.$router.push(<string>this.$route.query.redirect || \"/\");\n            })\n            .catch((error: AxiosError) => {\n                if (error.response) this.error = error.response.statusText;\n                else this.error = \"Unknown error occured\";\n            });\n    }\n\n    register() {\n        axios\n            .post(\"/api/register\", {\n                username: this.username,\n                password: this.password,\n            })\n            .then((response: AxiosResponse) => {\n                coreStore.setUsername(this.username);\n                coreStore.setAuthenticated(true);\n                this.$router.push(<string>this.$route.query.redirect || \"/\");\n            })\n            .catch((error: AxiosError) => {\n                if (error.response) this.error = error.response.statusText;\n                else this.error = \"Unknown error occured\";\n            });\n    }\n\n    focusin(event: { target?: { nextElementSibling?: HTMLElement } }) {\n        if (event.target && event.target.nextElementSibling) {\n            const span = event.target.nextElementSibling;\n            span.style.opacity = \"0\";\n        }\n    }\n\n    focusout(event: { target?: { nextElementSibling?: HTMLElement } }) {\n        if (event.target && event.target.nextElementSibling) {\n            const span = event.target.nextElementSibling;\n            span.style.opacity = \"1\";\n        }\n    }\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c(\"div\")}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"74f43d04-vue-loader-template\\\"}!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tool.vue?vue&type=template&id=1e034b42&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('transition',{attrs:{\"name\":\"modal\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.visible),expression:\"visible\"}],staticClass:\"mask\",class:{'modal-mask': _vm.mask, 'dialog-mask': !_vm.mask},on:{\"click\":_vm.close,\"dragover\":function($event){$event.preventDefault();return _vm.dragOver($event)}}},[_c('div',{ref:\"container\",staticClass:\"modal-container\",on:{\"click\":function($event){$event.stopPropagation();}}},[_vm._t(\"header\",null,{dragStart:_vm.dragStart,dragEnd:_vm.dragEnd}),_vm._t(\"default\")],2)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"74f43d04-vue-loader-template\\\"}!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./modal.vue?vue&type=template&id=12ed61ba&scoped=true&\"","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--12-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./game.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--12-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./game.vue?vue&type=script&lang=ts&\"","import Component from \"vue-class-component\";\n\nimport Tool from \"@/game/ui/tools/tool.vue\";\n\nimport { socket } from \"@/game/api/socket\";\nimport { GlobalPoint } from \"@/game/geom\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { Line } from \"@/game/shapes/line\";\nimport { Text } from \"@/game/shapes/text\";\nimport { gameStore } from \"@/game/store\";\nimport { l2g } from \"@/game/units\";\nimport { getMouse } from \"@/game/utils\";\n\n@Component\nexport class RulerTool extends Tool {\n    name = \"Ruler\";\n    active = false;\n    startPoint: GlobalPoint | null = null;\n    ruler: Line | null = null;\n    text: Text | null = null;\n    onMouseDown(event: MouseEvent) {\n        const layer = layerManager.getLayer(\"draw\");\n        if (layer === undefined) {\n            console.log(\"No draw layer!\");\n            return;\n        }\n        this.active = true;\n        this.startPoint = l2g(getMouse(event));\n        this.ruler = new Line(this.startPoint, this.startPoint, 3, gameStore.rulerColour);\n        this.text = new Text(this.startPoint.clone(), \"\", \"bold 20px serif\");\n        this.ruler.owners.push(gameStore.username);\n        this.text.owners.push(gameStore.username);\n        layer.addShape(this.ruler, true, true);\n        layer.addShape(this.text, true, true);\n    }\n    onMouseMove(event: MouseEvent) {\n        if (!this.active || this.ruler === null || this.startPoint === null || this.text === null) return;\n\n        const layer = layerManager.getLayer(\"draw\");\n        if (layer === undefined) {\n            console.log(\"No draw layer!\");\n            return;\n        }\n        const endPoint = l2g(getMouse(event));\n\n        this.ruler.endPoint = endPoint;\n        socket.emit(\"Shape.Update\", { shape: this.ruler!.asDict(), redraw: true, temporary: true });\n\n        const diffsign = Math.sign(endPoint.x - this.startPoint.x) * Math.sign(endPoint.y - this.startPoint.y);\n        const xdiff = Math.abs(endPoint.x - this.startPoint.x);\n        const ydiff = Math.abs(endPoint.y - this.startPoint.y);\n        const label =\n            Math.round((Math.sqrt(xdiff ** 2 + ydiff ** 2) * gameStore.unitSize) / gameStore.gridSize) + \" ft\";\n        const angle = Math.atan2(diffsign * ydiff, xdiff);\n        const xmid = Math.min(this.startPoint.x, endPoint.x) + xdiff / 2;\n        const ymid = Math.min(this.startPoint.y, endPoint.y) + ydiff / 2;\n        this.text.refPoint.x = xmid;\n        this.text.refPoint.y = ymid;\n        this.text.text = label;\n        this.text.angle = angle;\n        socket.emit(\"Shape.Update\", { shape: this.text.asDict(), redraw: true, temporary: true });\n        layer.invalidate(true);\n    }\n    onMouseUp(event: MouseEvent) {\n        if (!this.active || this.ruler === null || this.startPoint === null || this.text === null) return;\n\n        const layer = layerManager.getLayer(\"draw\");\n        if (layer === undefined) {\n            console.log(\"No active layer!\");\n            return;\n        }\n        this.active = false;\n\n        layer.removeShape(this.ruler, true, true);\n        layer.removeShape(this.text, true, true);\n        layer.invalidate(true);\n        this.ruler = this.startPoint = this.text = null;\n    }\n}\n","import { render, staticRenderFns } from \"./modal.vue?vue&type=template&id=12ed61ba&scoped=true&\"\nimport script from \"./modal.vue?vue&type=script&lang=ts&\"\nexport * from \"./modal.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./modal.vue?vue&type=style&index=0&id=12ed61ba&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"12ed61ba\",\n  null\n  \n)\n\ncomponent.options.__file = \"modal.vue\"\nexport default component.exports","import { layerManager } from \"@/game/layers/manager\";\nimport { gameStore } from \"@/game/store\";\n\nimport { CDT } from \"./cdt\";\n\nexport let PA_CDT = new CDT();\n\nexport function triangulate(partial: boolean = false) {\n    const cdt = new CDT();\n    for (const sh of gameStore.visionBlockers) {\n        const shape = layerManager.UUIDMap.get(sh)!;\n        if (partial && !shape.visibleInCanvas(layerManager.getLayer()!.canvas)) continue;\n        for (let i = 0; i < shape.points.length; i++) {\n            cdt.insertConstraint(shape.points[i], shape.points[(i + 1) % shape.points.length]);\n        }\n    }\n    PA_CDT = cdt;\n    (<any>window).CDT = PA_CDT;\n}\n","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./createtoken_modal.vue?vue&type=style&index=0&id=66ccc134&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./createtoken_modal.vue?vue&type=style&index=0&id=66ccc134&scoped=true&lang=css&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./main.vue?vue&type=style&index=0&id=61eb1455&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./main.vue?vue&type=style&index=0&id=61eb1455&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('form',{on:{\"focusin\":_vm.focusin,\"focusout\":_vm.focusout,\"submit\":function($event){$event.preventDefault();return _vm.login($event)}}},[_c('fieldset',[_c('legend',{staticClass:\"legend\"},[_vm._v(\"PlanarAlly\")]),_c('div',{staticClass:\"input\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.username),expression:\"username\"}],attrs:{\"type\":\"text\",\"name\":\"username\",\"placeholder\":\"Username\",\"required\":\"\"},domProps:{\"value\":(_vm.username)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.username=$event.target.value}}}),_vm._m(0)]),_c('div',{staticClass:\"input\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.password),expression:\"password\"}],attrs:{\"type\":\"password\",\"name\":\"password\",\"placeholder\":\"Password\",\"required\":\"\"},domProps:{\"value\":(_vm.password)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.password=$event.target.value}}}),_vm._m(1)]),_c('div',{staticStyle:{\"display\":\"flex\"}},[_c('button',{staticStyle:{\"visibility\":\"hidden\",\"display\":\"none\"},attrs:{\"type\":\"submit\",\"name\":\"login\"}}),_c('button',{staticClass:\"submit\",attrs:{\"type\":\"button\",\"name\":\"register\",\"title\":\"Register\"},on:{\"click\":_vm.register}},[_c('i',{staticClass:\"fas fa-plus\"})]),_vm._m(2)])]),(_vm.error)?_c('div',{staticClass:\"feedback\"},[_c('p',{staticClass:\"error\"},[_c('strong',[_vm._v(\"Error:\")]),_vm._v(\"\\n      \"+_vm._s(_vm.error)+\"\\n    \")])]):_vm._e()])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',[_c('i',{staticClass:\"fas fa-user-circle\"})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',[_c('i',{staticClass:\"fas fa-lock\"})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('button',{staticClass:\"submit\",attrs:{\"type\":\"submit\",\"name\":\"login\",\"title\":\"Login\"}},[_c('i',{staticClass:\"fas fa-arrow-right\"})])}]\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"74f43d04-vue-loader-template\\\"}!../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./login.vue?vue&type=template&id=6bbf3b79&scoped=true&\"","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\n\nimport ColorPicker from \"@/core/components/colorpicker.vue\";\nimport Modal from \"@/core/components/modals/modal.vue\";\n\nimport { uuidv4 } from \"@/core/utils\";\nimport { socket } from \"@/game/api/socket\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { Shape } from \"@/game/shapes/shape\";\nimport { gameStore } from \"@/game/store\";\nimport { Prop } from \"vue-property-decorator\";\n\n@Component({\n    components: {\n        Modal,\n        \"color-picker\": ColorPicker,\n    },\n})\nexport default class EditDialog extends Vue {\n    @Prop() shape!: Shape;\n\n    visible = false;\n    updated() {\n        this.addEmpty();\n    }\n    addEmpty() {\n        if (this.shape.owners[this.shape.owners.length - 1] !== \"\") this.shape.owners.push(\"\");\n        if (\n            !this.shape.trackers.length ||\n            this.shape.trackers[this.shape.trackers.length - 1].name !== \"\" ||\n            this.shape.trackers[this.shape.trackers.length - 1].value !== 0\n        )\n            this.shape.trackers.push({ uuid: uuidv4(), name: \"\", value: 0, maxvalue: 0, visible: false });\n        if (\n            !this.shape.auras.length ||\n            this.shape.auras[this.shape.auras.length - 1].name !== \"\" ||\n            this.shape.auras[this.shape.auras.length - 1].value !== 0\n        )\n            this.shape.auras.push({\n                uuid: uuidv4(),\n                name: \"\",\n                value: 0,\n                dim: 0,\n                visionSource: false,\n                colour: \"rgba(0,0,0,0)\",\n                visible: false,\n            });\n    }\n    updateShape(redraw: boolean) {\n        socket.emit(\"Shape.Update\", { shape: this.shape.asDict(), redraw, temporary: false });\n        if (redraw) layerManager.invalidate();\n        this.addEmpty();\n    }\n    setToken(event: { target: HTMLInputElement }) {\n        this.shape.setIsToken(event.target.checked);\n        this.updateShape(true);\n    }\n    setVisionBlocker(event: { target: HTMLInputElement }) {\n        this.shape.checkVisionSources();\n        this.updateShape(true);\n    }\n    setMovementBlocker(event: { target: HTMLInputElement }) {\n        this.shape.setMovementBlock(event.target.checked);\n        this.updateShape(false);\n    }\n    updateAnnotation(event: { target: HTMLInputElement }) {\n        const hadAnnotation = this.shape.annotation !== \"\";\n        this.shape.annotation = event.target.value;\n        if (this.shape.annotation !== \"\" && !hadAnnotation) {\n            gameStore.annotations.push(this.shape.uuid);\n            if (layerManager.hasLayer(\"draw\")) layerManager.getLayer(\"draw\")!.invalidate(true);\n        } else if (this.shape.annotation === \"\" && hadAnnotation) {\n            gameStore.annotations.splice(gameStore.annotations.findIndex(an => an === this.shape.uuid));\n            if (layerManager.hasLayer(\"draw\")) layerManager.getLayer(\"draw\")!.invalidate(true);\n        }\n        this.updateShape(false);\n    }\n    updateOwner(event: { target: HTMLInputElement }, oldValue: string) {\n        const ownerIndex = this.shape.owners.findIndex(o => o === oldValue);\n        if (ownerIndex >= 0) this.shape.owners.splice(ownerIndex, 1, event.target.value);\n        else this.shape.owners.push(event.target.value);\n        this.updateShape(gameStore.fowLOS);\n    }\n    removeOwner(value: string) {\n        const ownerIndex = this.shape.owners.findIndex(o => o === value);\n        this.shape.owners.splice(ownerIndex, 1);\n        this.updateShape(gameStore.fowLOS);\n    }\n    removeTracker(uuid: string) {\n        this.shape.trackers = this.shape.trackers.filter(tr => tr.uuid !== uuid);\n        this.updateShape(false);\n    }\n    removeAura(uuid: string) {\n        this.shape.auras = this.shape.auras.filter(au => au.uuid !== uuid);\n        this.shape.checkVisionSources();\n        this.updateShape(true);\n    }\n    updateAuraVisionSource(aura: Aura) {\n        aura.visionSource = !aura.visionSource;\n        const i = gameStore.visionSources.findIndex(ls => ls.aura === aura.uuid);\n        if (aura.visionSource && i === -1) gameStore.visionSources.push({ shape: this.shape.uuid, aura: aura.uuid });\n        else if (!aura.visionSource && i >= 0) gameStore.visionSources.splice(i, 1);\n        // aura.lastPath = undefined;\n        layerManager.invalidateLight();\n        this.updateShape(true);\n    }\n    updateAuraColour(aura: Aura, colour: string) {\n        const layer = layerManager.getLayer(this.shape.layer);\n        if (layer === undefined) return;\n        layer.invalidate(!aura.visionSource);\n    }\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"main\"},on:{\"mouseleave\":_vm.mouseleave}},[_c('menu-bar'),_c('div',{attrs:{\"id\":\"board\"}},[(_vm.ready.manager)?[_c('tool-bar',{ref:\"tools\"})]:_vm._e(),_c('div',{attrs:{\"id\":\"layers\"},on:{\"mousedown\":_vm.mousedown,\"mouseup\":_vm.mouseup,\"mousemove\":_vm.mousemove,\"contextmenu\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.contextmenu($event)},\"dragover\":function($event){$event.preventDefault();},\"drop\":_vm.drop}}),(_vm.layers.length > 1)?_c('div',{attrs:{\"id\":\"layerselect\"}},[_c('ul',_vm._l((_vm.layers),function(layer){return _c('li',{key:layer.name,class:{ 'layer-selected': layer === _vm.selectedLayer },on:{\"click\":function($event){_vm.selectLayer(layer)}}},[_c('a',{attrs:{\"href\":\"#\"}},[_vm._v(_vm._s(layer))])])}))]):_vm._e()],2),_c('selection-info',{ref:\"selectionInfo\"}),_c('initiative-dialog',{ref:\"initiative\",attrs:{\"id\":\"initiativedialog\"}}),_c('note-dialog',{ref:\"note\"}),_c('zoom-slider',{attrs:{\"id\":\"zoomer\",\"height\":6,\"width\":200,\"min\":0.01,\"max\":5.0,\"interval\":0.1,\"dot-width\":8,\"dot-height\":20,\"tooltip-dir\":'bottom',\"tooltip\":'hover',\"formatter\":_vm.zoomFactor.toFixed(1),\"slider-style\":{'border-radius': '15%'},\"bg-style\":{'background-color': '#fff', 'box-shadow': '0.5px 0.5px 3px 1px rgba(0, 0, 0, .36)'},\"process-style\":{'background-color': '#fff'}},model:{value:(_vm.zoomFactor),callback:function ($$v) {_vm.zoomFactor=$$v},expression:\"zoomFactor\"}}),_c('prompt-dialog',{ref:\"prompt\"}),_c('confirm-dialog',{ref:\"confirm\"})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"74f43d04-vue-loader-template\\\"}!../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./game.vue?vue&type=template&id=6d744362&scoped=true&\"","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\n\nimport Modal from \"@/core/components/modals/modal.vue\";\n\n@Component({\n    components: {\n        Modal,\n    },\n})\nexport default class ConfirmDialog extends Vue {\n    $refs!: {\n        confirm: HTMLButtonElement;\n    };\n\n    visible = false;\n    yes = \"Yes\";\n    no = \"No\";\n    title = \"\";\n\n    resolve = (ok: boolean) => {};\n    reject = () => {};\n\n    confirm() {\n        this.resolve(true);\n        this.close();\n    }\n    deny() {\n        this.resolve(false);\n        this.close();\n    }\n    close() {\n        this.reject();\n        this.visible = false;\n        this.title = \"\";\n    }\n    open(title: string, yes = \"yes\", no = \"no\"): Promise<boolean> {\n        this.yes = yes;\n        this.no = no;\n        this.title = title;\n\n        this.visible = true;\n        this.$nextTick(() => {\n            this.$refs.confirm.focus();\n        });\n\n        return new Promise((resolve, reject) => {\n            this.resolve = resolve;\n            this.reject = reject;\n        });\n    }\n}\n","import { render, staticRenderFns } from \"./map.vue?vue&type=template&id=f93438ce&\"\nimport script from \"./map.vue?vue&type=script&lang=ts&\"\nexport * from \"./map.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"map.vue\"\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ContextMenu',{attrs:{\"visible\":_vm.visible,\"left\":_vm.left + 'px',\"top\":_vm.top + 'px'},on:{\"close\":_vm.close}},[_c('li',{on:{\"click\":_vm.rename}},[_vm._v(\"Rename\")]),_c('li',{on:{\"click\":_vm.remove}},[_vm._v(\"Remove\")])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"74f43d04-vue-loader-template\\\"}!../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./contextMenu.vue?vue&type=template&id=d4f084a4&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('modal',{attrs:{\"visible\":_vm.visible},on:{\"close\":_vm.close},scopedSlots:_vm._u([{key:\"header\",fn:function(m){return _c('div',{staticClass:\"modal-header\",attrs:{\"draggable\":\"true\"},on:{\"dragstart\":m.dragStart,\"dragend\":m.dragEnd}},[_vm._v(_vm._s(_vm.title))])}}])},[_c('div',{staticClass:\"modal-body\"},[_c('button',{ref:\"confirm\",on:{\"click\":_vm.confirm}},[_vm._v(_vm._s(_vm.yes))]),(!!_vm.no)?_c('button',{on:{\"click\":_vm.deny}},[_vm._v(_vm._s(_vm.no))]):_vm._e()])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"74f43d04-vue-loader-template\\\"}!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./confirm.vue?vue&type=template&id=1883e207&scoped=true&\"","\n\n\n\n\n\n\n\nimport Vue from \"vue\";\n\nimport Component from \"vue-class-component\";\n\nimport AssetManager from \"@/assetManager/manager.vue\";\nimport ContextMenu from \"@/core/components/contextmenu.vue\";\nimport ConfirmDialog from \"@/core/components/modals/confirm.vue\";\nimport Prompt from \"@/core/components/modals/prompt.vue\";\n\nimport { socket } from \"@/assetManager/socket\";\nimport { assetStore } from \"@/assetManager/store\";\nimport { getComponent, getRef } from \"@/core/utils\";\n\n@Component({\n    components: {\n        ContextMenu,\n    },\n})\nexport default class AssetContextMenu extends Vue {\n    visible = false;\n    left = 0;\n    top = 0;\n    open(event: MouseEvent, inode: number) {\n        if (!assetStore.selected.includes(inode)) getComponent<any>().select(event, inode);\n\n        this.visible = true;\n        this.left = event.pageX;\n        this.top = event.pageY;\n        this.$nextTick(() => {\n            this.$children[0].$el.focus();\n        });\n    }\n    close() {\n        this.visible = false;\n    }\n    rename() {\n        if (assetStore.selected.length !== 1) return;\n        const asset = assetStore.idMap.get(assetStore.selected[0])!;\n\n        getRef<Prompt>(\"prompt\")\n            .prompt(\"New name:\", `Renaming ${asset.name}`)\n            .then(\n                (name: string) => {\n                    socket.emit(\"Asset.Rename\", {\n                        asset: asset.id,\n                        name,\n                    });\n                    asset.name = name;\n                    getComponent().$forceUpdate();\n                },\n                () => {},\n            );\n        this.close();\n    }\n    remove() {\n        if (assetStore.selected.length === 0) return;\n        getRef<ConfirmDialog>(\"confirm\")\n            .open(\"Are you sure you wish to remove this?\")\n            .then(\n                (result: boolean) => {\n                    if (result) {\n                        for (const sel of assetStore.selected) {\n                            socket.emit(\"Asset.Remove\", sel);\n                            if (assetStore.isFile(sel)) assetStore.files.splice(assetStore.files.indexOf(sel), 1);\n                            else assetStore.folders.splice(assetStore.folders.indexOf(sel), 1);\n                        }\n                        assetStore.selected = [];\n                    }\n                },\n                () => {},\n            );\n        this.close();\n    }\n}\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./select.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./select.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./manager.vue?vue&type=template&id=d1ce9748&\"\nimport script from \"./manager.vue?vue&type=script&lang=ts&\"\nexport * from \"./manager.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./manager.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"manager.vue\"\nexport default component.exports","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tools.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tools.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./tool.vue?vue&type=template&id=1e034b42&\"\nimport script from \"./tool.vue?vue&type=script&lang=ts&\"\nexport * from \"./tool.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./tool.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"tool.vue\"\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('Modal',{attrs:{\"visible\":_vm.visible},on:{\"close\":_vm.close},scopedSlots:_vm._u([{key:\"header\",fn:function(m){return _c('div',{staticClass:\"modal-header\",attrs:{\"draggable\":\"true\"},on:{\"dragstart\":m.dragStart,\"dragend\":m.dragEnd}},[_vm._v(_vm._s(_vm.title))])}}])},[_c('div',{staticClass:\"modal-body\"},[_vm._v(\"\\n    \"+_vm._s(_vm.question)+\"\\n    \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.answer),expression:\"answer\"}],ref:\"answer\",attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.answer)},on:{\"keyup\":function($event){if(!('button' in $event)&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.submit($event)},\"input\":function($event){if($event.target.composing){ return; }_vm.answer=$event.target.value}}})]),_c('div',{staticClass:\"modal-footer\"},[_c('button',{on:{\"click\":_vm.submit}},[_vm._v(\"Submit\")])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"74f43d04-vue-loader-template\\\"}!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./prompt.vue?vue&type=template&id=0602c2e6&scoped=true&\"","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\nimport draggable from \"vuedraggable\";\nVue.component(\"draggable\", draggable);\n\nimport Modal from \"@/core/components/modals/modal.vue\";\n\nimport { uuidv4 } from \"@/core/utils\";\nimport { socket } from \"@/game/api/socket\";\nimport { InitiativeData, InitiativeEffect } from \"@/game/comm/types/general\";\nimport { EventBus } from \"@/game/event-bus\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { gameStore } from \"@/game/store\";\n\n@Component({\n    components: {\n        Modal,\n        draggable,\n    },\n})\nexport default class Initiative extends Vue {\n    visible = false;\n    data: InitiativeData[] = [];\n    currentActor: string | null = null;\n    roundCounter = 0;\n\n    mounted() {\n        EventBus.$on(\"Initiative.Clear\", this.clear);\n        EventBus.$on(\"Initiative.Remove\", (data: string) => this.removeInitiative(data));\n        EventBus.$on(\"Initiative.Show\", () => (this.visible = true));\n\n        socket.on(\"Initiative.Set\", (data: InitiativeData[]) => {\n            this.data = data;\n        });\n        socket.on(\"Initiative.Turn.Update\", (data: string) => this.setTurn(data, false));\n        socket.on(\"Initiative.Round.Update\", (data: number) => this.setRound(data, false));\n        socket.on(\"Initiative.Effect.New\", (data: { actor: string; effect: InitiativeEffect }) => {\n            const actor = this.getActor(data.actor);\n            if (actor === undefined) return;\n            this.createEffect(actor, data.effect, false);\n        });\n        socket.on(\"Initiative.Effect.Update\", (data: { actor: string; effect: InitiativeEffect }) =>\n            this.updateEffect(data.actor, data.effect, false),\n        );\n    }\n\n    beforeDestroy() {\n        EventBus.$off();\n    }\n\n    // Utilities\n    clear() {\n        this.data = [];\n        this.currentActor = null;\n    }\n    getActor(actorId: string) {\n        return this.data.find(a => a.uuid === actorId);\n    }\n    contains(uuid: string) {\n        return this.data.some(d => d.uuid === uuid);\n    }\n    owns(actor: InitiativeData): boolean {\n        if (gameStore.IS_DM) return true;\n        const shape = layerManager.UUIDMap.get(actor.uuid);\n        // Shapes that are unknown to this client are hidden from this client but owned by other clients\n        if (shape === undefined) return false;\n        return shape.owners.includes(gameStore.username);\n    }\n    getDefaultEffect() {\n        return { uuid: uuidv4(), name: \"New Effect\", turns: 10 };\n    }\n    fakeSetData(dataTransfer: DataTransfer) {\n        dataTransfer.setData(\"Hack\", \"\");\n    }\n    syncInitiative(data: InitiativeData | { uuid: string }) {\n        socket.emit(\"Initiative.Update\", data);\n    }\n    // Events\n    addInitiative(data: InitiativeData) {\n        const d = this.data.findIndex(a => a.uuid === data.uuid);\n        if (d >= 0) return;\n        if (data.initiative === undefined) data.initiative = 0;\n        this.syncInitiative(data);\n    }\n    removeInitiative(uuid: string) {\n        const d = this.data.findIndex(a => a.uuid === uuid);\n        if (d < 0 || this.data[d].group) return;\n        this.syncInitiative({ uuid });\n        // Remove highlight\n        const shape = layerManager.UUIDMap.get(uuid);\n        if (shape === undefined) return;\n        if (shape.showHighlight) {\n            shape.showHighlight = false;\n            layerManager.getLayer(shape.layer)!.invalidate(true);\n        }\n    }\n    updateOrder() {\n        if (!gameStore.IS_DM) return;\n        socket.emit(\"Initiative.Set\", this.data.map(d => d.uuid));\n    }\n    setTurn(actorId: string | null, sync: boolean) {\n        if (!gameStore.IS_DM && sync) return;\n        this.currentActor = actorId;\n        const actor = this.data.find(a => a.uuid === actorId);\n        if (actor === undefined) return;\n        if (actor.effects) {\n            for (let e = actor.effects.length - 1; e >= 0; e--) {\n                if (actor.effects[e].turns <= 0) actor.effects.splice(e, 1);\n                else actor.effects[e].turns--;\n            }\n        }\n        if (sync) socket.emit(\"Initiative.Turn.Update\", actorId);\n    }\n    setRound(round: number, sync: boolean) {\n        if (!gameStore.IS_DM && sync) return;\n        this.roundCounter = round;\n        if (sync) socket.emit(\"Initiative.Round.Update\", round);\n    }\n    nextTurn() {\n        if (!gameStore.IS_DM) return;\n        const order = this.data;\n        const next = order[(order.findIndex(a => a.uuid === this.currentActor) + 1) % order.length];\n        if (this.data[0].uuid === next.uuid) this.setRound(this.roundCounter + 1, true);\n        this.setTurn(next.uuid, true);\n    }\n    toggleHighlight(actor: InitiativeData, show: boolean) {\n        const shape = layerManager.UUIDMap.get(actor.uuid);\n        if (shape === undefined) return;\n        shape.showHighlight = show;\n        layerManager.getLayer(shape.layer)!.invalidate(true);\n    }\n    toggleOption(actor: InitiativeData, option: \"visible\" | \"group\") {\n        if (!this.owns(actor)) return;\n        actor[option] = !actor[option];\n        this.syncInitiative(actor);\n    }\n    createEffect(actor: InitiativeData, effect: InitiativeEffect, sync: boolean) {\n        if (!this.owns(actor)) return;\n        actor.effects.push(effect);\n        if (sync) socket.emit(\"Initiative.Effect.New\", { actor: actor.uuid, effect });\n    }\n    syncEffect(actor: InitiativeData, effect: InitiativeEffect) {\n        if (!this.owns(actor)) return;\n        socket.emit(\"Initiative.Effect.Update\", { actor: actor.uuid, effect });\n    }\n    updateEffect(actorId: string, effect: InitiativeEffect, sync: boolean) {\n        const actor = this.data.find(a => a.uuid === actorId);\n        if (actor === undefined) return;\n        const effectIndex = actor.effects.findIndex(e => e.uuid === effect.uuid);\n        if (effectIndex === undefined) return;\n        actor.effects[effectIndex] = effect;\n        if (sync) this.syncEffect(actor, effect);\n        else this.$forceUpdate();\n    }\n}\n","import { render, staticRenderFns } from \"./selection_info.vue?vue&type=template&id=32cec914&scoped=true&\"\nimport script from \"./selection_info.vue?vue&type=script&lang=ts&\"\nexport * from \"./selection_info.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./selection_info.vue?vue&type=style&index=0&id=32cec914&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"32cec914\",\n  null\n  \n)\n\ncomponent.options.__file = \"selection_info.vue\"\nexport default component.exports","// import Vuex from \"vuex\";\nimport { Action, getModule, Module, Mutation, VuexModule } from \"vuex-module-decorators\";\n\nimport { AssetList } from \"@/core/comm/types\";\nimport { socket } from \"@/game/api/socket\";\nimport { sendClientOptions } from \"@/game/api/utils\";\nimport { Note } from \"@/game/comm/types/general\";\nimport { GlobalPoint } from \"@/game/geom\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { g2l, l2g } from \"@/game/units\";\nimport { BoundingVolume } from \"@/game/visibility/bvh/bvh\";\nimport { rootStore } from \"@/store\";\nimport { triangulate } from \"./visibility/te/pa\";\n\nexport interface GameState {\n    boardInitialized: boolean;\n}\n\n@Module({ dynamic: true, store: rootStore, name: \"game\", namespaced: true })\nclass GameStore extends VuexModule {\n    // This is a limited view of selectable layers that is used to generate the layer selection UI and ability to switch layers\n    // See the layerManager for proper layer management tools\n    layers: string[] = [];\n    selectedLayerIndex = -1;\n    boardInitialized = false;\n\n    locations: string[] = [];\n\n    assets: AssetList = {};\n\n    notes: Note[] = [];\n\n    IS_DM = false;\n    gridSize = 50;\n    username = \"\";\n    roomName = \"\";\n    roomCreator = \"\";\n    invitationCode = \"\";\n\n    gridColour = \"rgba(0, 0, 0, 1)\";\n    fowColour = \"rgba(0, 0, 0, 1)\";\n    rulerColour = \"rgba(255, 0, 0, 1)\";\n    panX = 0;\n    panY = 0;\n    zoomFactor = 1;\n\n    unitSize = 5;\n    useGrid = true;\n    fullFOW = false;\n    fowOpacity = 0.3;\n    fowLOS = false;\n    locationName = \"\";\n\n    visionSources: { shape: string; aura: string }[] = [];\n    visionBlockers: string[] = [];\n    annotations: string[] = [];\n    movementblockers: string[] = [];\n    ownedtokens: string[] = [];\n\n    BV = Object.freeze(new BoundingVolume([]));\n\n    visionMode: \"bvh\" | \"triangle\" = \"bvh\";\n\n    get selectedLayer() {\n        return this.layers[this.selectedLayerIndex];\n    }\n\n    @Mutation\n    setVisionMode(visionMode: \"bvh\" | \"triangle\") {\n        this.visionMode = visionMode;\n    }\n\n    @Mutation\n    setBoardInitialized(boardInitialized: boolean) {\n        this.boardInitialized = boardInitialized;\n    }\n\n    @Mutation\n    setDM(isDM: boolean) {\n        this.IS_DM = isDM;\n    }\n\n    @Mutation\n    setUsername(username: string) {\n        this.username = username;\n    }\n\n    @Mutation\n    setRoomName(name: string) {\n        this.roomName = name;\n    }\n\n    @Mutation\n    setRoomCreator(name: string) {\n        this.roomCreator = name;\n    }\n\n    @Mutation\n    setInvitationCode(code: string) {\n        this.invitationCode = code;\n    }\n\n    @Mutation\n    addLayer(name: string) {\n        this.layers.push(name);\n        if (this.selectedLayerIndex === -1) this.selectedLayerIndex = this.layers.indexOf(name);\n    }\n\n    @Mutation\n    selectLayer(data: { name: string; sync: boolean }) {\n        const index = this.layers.indexOf(data.name);\n        if (index >= 0) this.selectedLayerIndex = index;\n        if (data.sync) socket.emit(\"Client.ActiveLayer.Set\", data.name);\n    }\n\n    @Mutation\n    newNote(data: { note: Note; sync: boolean }) {\n        this.notes.push(data.note);\n        if (data.sync) socket.emit(\"Note.New\", data.note);\n    }\n\n    @Mutation\n    setAssets(assets: AssetList) {\n        this.assets = assets;\n    }\n\n    @Mutation\n    setLocations(locations: string[]) {\n        this.locations = locations;\n    }\n\n    @Mutation\n    resetLayerInfo() {\n        this.layers = [];\n        this.selectedLayerIndex = -1;\n    }\n\n    @Mutation\n    recalculateBV(partial = false) {\n        // TODO: This needs to be cleaned up..\n        if (this.boardInitialized) {\n            if (this.visionMode === \"triangle\") triangulate(partial);\n            else {\n                let success = false;\n                let tries = 0;\n                while (!success) {\n                    success = true;\n                    try {\n                        this.BV = Object.freeze(new BoundingVolume(this.visionBlockers));\n                    } catch (error) {\n                        success = false;\n                        tries++;\n                        if (tries > 10) {\n                            console.error(error);\n                            return;\n                        }\n                    }\n                }\n            }\n        }\n    }\n\n    @Mutation\n    updateZoom(data: { newZoomValue: number; zoomLocation: GlobalPoint }) {\n        if (data.newZoomValue === this.zoomFactor) return;\n        if (data.newZoomValue < 0.1) data.newZoomValue = 0.01;\n        if (data.newZoomValue > 5) data.newZoomValue = 5;\n\n        const oldLoc = g2l(data.zoomLocation);\n\n        this.zoomFactor = data.newZoomValue;\n\n        const newLoc = l2g(oldLoc);\n\n        // Change the pan settings to keep the zoomLocation in the same exact location before and after the zoom.\n        const diff = newLoc.subtract(data.zoomLocation);\n        this.panX += diff.x;\n        this.panY += diff.y;\n\n        layerManager.invalidate();\n        sendClientOptions();\n    }\n\n    @Mutation\n    setGridColour(data: { colour: string; sync: boolean }) {\n        this.gridColour = data.colour;\n        layerManager.getGridLayer()!.drawGrid();\n        if (data.sync) socket.emit(\"Client.Options.Set\", { gridColour: data.colour });\n    }\n\n    @Mutation\n    setFOWColour(data: { colour: string; sync: boolean }) {\n        this.fowColour = data.colour;\n        layerManager.invalidate();\n        if (data.sync) socket.emit(\"Client.Options.Set\", { fowColour: data.colour });\n    }\n\n    @Mutation\n    setRulerColour(data: { colour: string; sync: boolean }) {\n        this.rulerColour = data.colour;\n        if (data.sync) socket.emit(\"Client.Options.Set\", { rulerColour: data.colour });\n    }\n\n    @Mutation\n    setPanX(x: number) {\n        this.panX = x;\n    }\n\n    @Mutation\n    setPanY(y: number) {\n        this.panY = y;\n    }\n\n    @Mutation\n    setZoomFactor(zoomFactor: number) {\n        this.zoomFactor = zoomFactor;\n    }\n\n    @Mutation\n    increasePanX(increase: number) {\n        this.panX += increase;\n    }\n\n    @Mutation\n    increasePanY(increase: number) {\n        this.panY += increase;\n    }\n\n    @Mutation\n    setUnitSize(data: { unitSize: number; sync: boolean }) {\n        if (this.unitSize !== data.unitSize && data.unitSize > 0 && data.unitSize < Infinity) {\n            this.unitSize = data.unitSize;\n            layerManager.invalidate();\n            if (data.sync) socket.emit(\"Location.Options.Set\", { unit_size: data.unitSize });\n        }\n    }\n\n    @Mutation\n    setUseGrid(data: { useGrid: boolean; sync: boolean }) {\n        if (this.useGrid !== data.useGrid) {\n            this.useGrid = data.useGrid;\n            const gridLayer = layerManager.getGridLayer()!;\n            if (data.useGrid) gridLayer.canvas.style.display = \"block\";\n            else gridLayer.canvas.style.display = \"none\";\n            if (data.sync) socket.emit(\"Location.Options.Set\", { use_grid: data.useGrid });\n        }\n    }\n\n    @Mutation\n    setGridSize(data: { gridSize: number; sync: boolean }): void {\n        if (this.gridSize !== data.gridSize && data.gridSize > 0) {\n            this.gridSize = data.gridSize;\n            const gridLayer = layerManager.getGridLayer();\n            if (gridLayer !== undefined) gridLayer.drawGrid();\n            if (data.sync) socket.emit(\"Gridsize.Set\", data.gridSize);\n        }\n    }\n\n    @Mutation\n    setFullFOW(data: { fullFOW: boolean; sync: boolean }) {\n        if (this.fullFOW !== data.fullFOW) {\n            this.fullFOW = data.fullFOW;\n            layerManager.invalidateLight();\n            if (data.sync) socket.emit(\"Location.Options.Set\", { full_fow: data.fullFOW });\n        }\n    }\n\n    @Mutation\n    setFOWOpacity(data: { fowOpacity: number; sync: boolean }) {\n        this.fowOpacity = data.fowOpacity;\n        layerManager.invalidateLight();\n        if (data.sync) socket.emit(\"Location.Options.Set\", { fow_opacity: data.fowOpacity });\n    }\n\n    @Mutation\n    setLineOfSight(data: { fowLOS: boolean; sync: boolean }) {\n        if (this.fowLOS !== data.fowLOS) {\n            this.fowLOS = data.fowLOS;\n            layerManager.invalidate();\n            if (data.sync) socket.emit(\"Location.Options.Set\", { fow_los: data.fowLOS });\n        }\n    }\n\n    @Mutation\n    setLocationName(name: string) {\n        this.locationName = name;\n    }\n\n    @Mutation\n    updateNote(data: { note: Note; sync: boolean }) {\n        const actualNote = this.notes.find(n => n.uuid === data.note.uuid);\n        if (actualNote === undefined) return;\n        actualNote.title = data.note.title;\n        actualNote.text = data.note.text;\n        if (data.sync) socket.emit(\"Note.Update\", actualNote);\n    }\n\n    @Mutation\n    removeNote(data: { note: Note; sync: boolean }) {\n        this.notes = this.notes.filter(n => n.uuid !== data.note.uuid);\n        if (data.sync) socket.emit(\"Note.Remove\", data.note.uuid);\n    }\n\n    @Action\n    clear() {\n        (<any>this.context.state).visionSources = [];\n        (<any>this.context.state).visionBlockers = [];\n        (<any>this.context.state).ownedtokens = [];\n        (<any>this.context.state).annotations = [];\n        (<any>this.context.state).movementblockers = [];\n        this.context.commit(\"recalculateBV\");\n    }\n}\n\nexport const gameStore = getModule(GameStore);\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./confirm.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./confirm.vue?vue&type=script&lang=ts&\"","import { ServerAura } from \"@/game/comm/types/shapes\";\n\nexport const aurasFromServer = (auras: ServerAura[]): Aura[] => {\n    const result = [];\n    for (const aura of auras) {\n        result.push({\n            uuid: aura.uuid,\n            visionSource: aura.vision_source,\n            visible: aura.visible,\n            name: aura.name,\n            value: aura.value,\n            dim: aura.dim,\n            colour: aura.colour,\n        });\n    }\n    return result;\n};\n\nexport const aurasToServer = (auras: Aura[]): ServerAura[] => {\n    const result = [];\n    for (const aura of auras) {\n        result.push({\n            uuid: aura.uuid,\n            vision_source: aura.visionSource,\n            visible: aura.visible,\n            name: aura.name,\n            value: aura.value,\n            dim: aura.dim,\n            colour: aura.colour,\n        });\n    }\n    return result;\n};\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--12-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./contextMenu.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--12-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./contextMenu.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./note.vue?vue&type=template&id=7a3669fd&scoped=true&\"\nimport script from \"./note.vue?vue&type=script&lang=ts&\"\nexport * from \"./note.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./note.vue?vue&type=style&index=0&id=7a3669fd&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7a3669fd\",\n  null\n  \n)\n\ncomponent.options.__file = \"note.vue\"\nexport default component.exports","import { render, staticRenderFns } from \"./initiative.vue?vue&type=template&id=ccaf03d6&scoped=true&\"\nimport script from \"./initiative.vue?vue&type=script&lang=ts&\"\nexport * from \"./initiative.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./initiative.vue?vue&type=style&index=0&id=ccaf03d6&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"ccaf03d6\",\n  null\n  \n)\n\ncomponent.options.__file = \"initiative.vue\"\nexport default component.exports","import { ServerLayer } from \"@/game/comm/types/general\";\nimport { FOWLayer } from \"@/game/layers/fow\";\nimport { FOWPlayersLayer } from \"@/game/layers/fowplayers\";\nimport { GridLayer } from \"@/game/layers/grid\";\nimport { Layer } from \"@/game/layers/layer\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { gameStore } from \"@/game/store\";\n\nexport function createLayer(layerInfo: ServerLayer) {\n    // Create canvas element\n    const canvas = document.createElement(\"canvas\");\n    canvas.style.zIndex = layerManager.layers.length.toString();\n    canvas.width = window.innerWidth;\n    canvas.height = window.innerHeight;\n\n    // Create the Layer instance\n    let layer: Layer;\n    if (layerInfo.type_ === \"grid\") layer = new GridLayer(canvas, layerInfo.name);\n    else if (layerInfo.type_ === \"fow\") layer = new FOWLayer(canvas, layerInfo.name);\n    else if (layerInfo.type_ === \"fow-players\") layer = new FOWPlayersLayer(canvas, layerInfo.name);\n    else layer = new Layer(canvas, layerInfo.name);\n    layer.selectable = layerInfo.selectable;\n    layer.playerEditable = layerInfo.player_editable;\n    layerManager.addLayer(layer);\n\n    // Add the element to the DOM\n    const layers = document.getElementById(\"layers\");\n    if (layers === null) {\n        console.warn(\"Layers div is missing, this will prevent the main game board from loading!\");\n        return;\n    }\n    if (layerInfo.name !== \"fow-players\") layers.appendChild(canvas);\n\n    if (layerInfo.type_ === \"grid\" && layerInfo.size) gameStore.setGridSize({ gridSize: layerInfo.size, sync: false });\n    // Load layer shapes\n    layer.setShapes(layerInfo.shapes);\n}\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./edit_dialog.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./edit_dialog.vue?vue&type=script&lang=ts&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.selected)?_c('div',{staticClass:\"tool-detail\",style:({'--detailRight': _vm.detailRight, '--detailArrow': _vm.detailArrow})},[_c('div',[_vm._v(\"#X\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.xCount),expression:\"xCount\"}],attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.xCount)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.xCount=$event.target.value}}}),_c('div',[_vm._v(\"#Y\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.yCount),expression:\"yCount\"}],attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.yCount)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.yCount=$event.target.value}}})]):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"74f43d04-vue-loader-template\\\"}!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./map.vue?vue&type=template&id=f93438ce&\"","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\n\nimport Prompt from \"@/core/components/modals/prompt.vue\";\nimport EditDialog from \"@/game/ui/selection/edit_dialog.vue\";\n\nimport { getRef } from \"@/core/utils\";\nimport { socket } from \"@/game/api/socket\";\nimport { EventBus } from \"@/game/event-bus\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { Shape } from \"@/game/shapes/shape\";\n\n@Component({\n    components: {\n        \"edit-dialog\": EditDialog,\n    },\n})\nexport default class SelectionInfo extends Vue {\n    shape: Shape | null = null;\n\n    mounted() {\n        EventBus.$on(\"SelectionInfo.Shape.Set\", (shape: Shape | null) => {\n            this.shape = shape;\n        });\n    }\n\n    beforeDestroy() {\n        EventBus.$off();\n    }\n\n    openEditDialog() {\n        (<any>this.$refs.editDialog).visible = true;\n    }\n    changeValue(object: Tracker | Aura, redraw: boolean) {\n        if (this.shape === null) return;\n        getRef<Prompt>(\"prompt\")\n            .prompt(`New  ${object.name} value:`, `Updating ${object.name}`)\n            .then(\n                (value: string) => {\n                    if (this.shape === null) return;\n                    const ogValue = object.value;\n                    if (value[0] === \"+\" || value[0] === \"-\") object.value += parseInt(value, 10);\n                    else object.value = parseInt(value, 10);\n                    if (isNaN(object.value)) object.value = ogValue;\n                    socket.emit(\"Shape.Update\", { shape: this.shape.asDict(), redraw, temporary: false });\n                    if (redraw) layerManager.invalidate();\n                },\n                () => {},\n            );\n    }\n}\n","import { AssetList } from \"@/core/comm/types\";\nimport { socket } from \"@/game/api/socket\";\nimport { BoardInfo, Note, ServerClient, ServerLocation } from \"@/game/comm/types/general\";\nimport { ServerShape } from \"@/game/comm/types/shapes\";\nimport { EventBus } from \"@/game/event-bus\";\nimport { GlobalPoint } from \"@/game/geom\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { createLayer } from \"@/game/layers/utils\";\nimport { gameManager } from \"@/game/manager\";\nimport { gameStore } from \"@/game/store\";\nimport { router } from \"@/router\";\n\nsocket.on(\"connect\", () => {\n    console.log(\"Connected\");\n});\nsocket.on(\"disconnect\", () => {\n    console.log(\"Disconnected\");\n});\nsocket.on(\"connect_error\", (error: any) => {\n    console.error(\"Could not connect to game session.\");\n    router.push(\"/dashboard\");\n});\nsocket.on(\"error\", (error: any) => {\n    console.error(\"Game session does not exist.\");\n    router.push(\"/dashboard\");\n});\nsocket.on(\"redirect\", (destination: string) => {\n    console.log(\"redirecting\");\n    router.push(destination);\n});\nsocket.on(\"Room.Info.Set\", (data: { name: string; creator: string; invitationCode: string }) => {\n    gameStore.setRoomName(data.name);\n    gameStore.setRoomCreator(data.creator);\n    gameStore.setInvitationCode(data.invitationCode);\n});\nsocket.on(\"Username.Set\", (username: string) => {\n    gameStore.setUsername(username);\n    gameStore.setDM(username === window.location.pathname.split(\"/\")[2]);\n});\nsocket.on(\"Client.Options.Set\", (options: ServerClient) => {\n    gameStore.setGridColour({ colour: options.grid_colour, sync: false });\n    gameStore.setFOWColour({ colour: options.fow_colour, sync: false });\n    gameStore.setRulerColour({ colour: options.ruler_colour, sync: false });\n    gameStore.setPanX(options.pan_x);\n    gameStore.setPanY(options.pan_y);\n    gameStore.setZoomFactor(options.zoom_factor);\n    if (options.active_layer) layerManager.selectLayer(options.active_layer, false);\n    if (layerManager.getGridLayer() !== undefined) layerManager.getGridLayer()!.invalidate();\n});\nsocket.on(\"Location.Set\", (data: Partial<ServerLocation>) => {\n    if (data.name !== undefined) gameStore.setLocationName(data.name);\n    if (data.unit_size !== undefined) gameStore.setUnitSize({ unitSize: data.unit_size, sync: false });\n    if (data.use_grid !== undefined) gameStore.setUseGrid({ useGrid: data.use_grid, sync: false });\n    if (data.full_fow !== undefined) gameStore.setFullFOW({ fullFOW: data.full_fow, sync: false });\n    if (data.fow_opacity !== undefined) gameStore.setFOWOpacity({ fowOpacity: data.fow_opacity, sync: false });\n    if (data.fow_los !== undefined) gameStore.setLineOfSight({ fowLOS: data.fow_los, sync: false });\n});\nsocket.on(\"Position.Set\", (data: { x: number; y: number }) => {\n    gameManager.setCenterPosition(new GlobalPoint(data.x, data.y));\n});\nsocket.on(\"Notes.Set\", (notes: Note[]) => {\n    for (const note of notes) gameStore.newNote({ note, sync: false });\n});\nsocket.on(\"Asset.List.Set\", (assets: AssetList) => {\n    gameStore.setAssets(assets);\n});\nsocket.on(\"Board.Set\", (locationInfo: BoardInfo) => {\n    gameStore.clear();\n    gameStore.setLocations(locationInfo.locations);\n    document.getElementById(\"layers\")!.innerHTML = \"\";\n    gameStore.resetLayerInfo();\n    layerManager.reset();\n    for (const layer of locationInfo.layers) createLayer(layer);\n    // Force the correct opacity render on other layers.\n    layerManager.selectLayer(layerManager.getLayer()!.name, false);\n    EventBus.$emit(\"Initiative.Clear\");\n    gameStore.setBoardInitialized(true);\n    gameStore.recalculateBV();\n});\nsocket.on(\"Gridsize.Set\", (gridSize: number) => {\n    gameStore.setGridSize({ gridSize, sync: false });\n});\nsocket.on(\"Shape.Add\", (shape: ServerShape) => {\n    gameManager.addShape(shape);\n});\nsocket.on(\"Shape.Remove\", (shape: ServerShape) => {\n    if (!layerManager.UUIDMap.has(shape.uuid)) {\n        console.log(`Attempted to remove an unknown shape`);\n        return;\n    }\n    if (!layerManager.hasLayer(shape.layer)) {\n        console.log(`Attempted to remove shape from an unknown layer ${shape.layer}`);\n        return;\n    }\n    const layer = layerManager.getLayer(shape.layer)!;\n    layer.removeShape(layerManager.UUIDMap.get(shape.uuid)!, false);\n    layer.invalidate(false);\n});\nsocket.on(\"Shape.Order.Set\", (data: { shape: ServerShape; index: number }) => {\n    if (!layerManager.UUIDMap.has(data.shape.uuid)) {\n        console.log(`Attempted to move the shape order of an unknown shape`);\n        return;\n    }\n    if (!layerManager.hasLayer(data.shape.layer)) {\n        console.log(`Attempted to remove shape from an unknown layer ${data.shape.layer}`);\n        return;\n    }\n    const shape = layerManager.UUIDMap.get(data.shape.uuid)!;\n    const layer = layerManager.getLayer(shape.layer)!;\n    layer.moveShapeOrder(shape, data.index, false);\n});\nsocket.on(\"Shape.Layer.Change\", (data: { uuid: string; layer: string }) => {\n    const shape = layerManager.UUIDMap.get(data.uuid);\n    if (shape === undefined) return;\n    shape.moveLayer(data.layer, false);\n});\nsocket.on(\"Shape.Update\", (data: { shape: ServerShape; redraw: boolean; move: boolean }) => {\n    gameManager.updateShape(data);\n});\nsocket.on(\"Temp.Clear\", (shapes: ServerShape[]) => {\n    shapes.forEach(shape => {\n        if (!layerManager.UUIDMap.has(shape.uuid)) {\n            console.log(\"Attempted to remove an unknown temporary shape\");\n            return;\n        }\n        if (!layerManager.hasLayer(shape.layer)) {\n            console.log(`Attempted to remove shape from an unknown layer ${shape.layer}`);\n            return;\n        }\n        const realShape = layerManager.UUIDMap.get(shape.uuid)!;\n        layerManager.getLayer(shape.layer)!.removeShape(realShape, false);\n    });\n});\n"],"sourceRoot":""}