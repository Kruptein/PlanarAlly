{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/game/shapes/text.ts","webpack:///./src/game/ui/selection/selection_info.vue?cd1b","webpack:///./src/game/ui/selection/shapecontext.vue","webpack:///./src/App.vue?5b85","webpack:///./src/core/components/modals/prompt.vue?d33d","webpack:///./src/core/components/colorpicker.vue?4d88","webpack:///./src/game/game.vue","webpack:///./src/game/api/socket.ts","webpack:///./src/assetManager/manager.vue?5633","webpack:///./src/game/ui/menu/asset_node.vue","webpack:///./src/game/ui/tools/selectcontext.vue?02dc","webpack:///./src/auth/login.vue","webpack:///./src/game/visibility/te/draw.ts","webpack:///./src/game/ui/tools/tool.vue?5b17","webpack:///./src/game/shapes/circulartoken.ts","webpack:///./src/game/ui/annotation.ts","webpack:///./src/game/ui/menu/menu.vue","webpack:///./src/game/ui/tools/filter.vue?7ac6","webpack:///./src/game/ui/tools/filter.vue?84d4","webpack:///./src/core/components/contextmenu.vue","webpack:///./src/game/ui/note.vue?49b7","webpack:///./src/auth/login.vue?c159","webpack:///./src/game/shapes/utils.ts","webpack:///./src/core/components/modals/confirm.vue?e6fb","webpack:///./src/game/ui/tools/select.vue?aed4","webpack:///./src/game/ui/tools/select.vue?29b9","webpack:///./src/game/shapes/shape.ts","webpack:///./src/core/components/modals/prompt.vue?d457","webpack:///./src/game/ui/note.vue?a34d","webpack:///./src/game/ui/note.vue?23aa","webpack:///./src/core/components/modals/modal.vue?33b9","webpack:///./src/game/ui/tools/select.vue?49f9","webpack:///./src/game/ui/tools/utils.ts","webpack:///./src/game/ui/note.vue?a508","webpack:///./src/game/ui/labels.vue?15af","webpack:///./src/game/api/utils.ts","webpack:///./src/game/ui/menu/asset_node.vue?f519","webpack:///./src/core/components/contextmenu.vue?f03a","webpack:///./src/core/components/contextmenu.vue?7efa","webpack:///./src/assetManager/store.ts","webpack:///./src/core/components/contextmenu.vue?50e1","webpack:///./src/game/ui/selection/shapecontext.vue?1cf6","webpack:///./src/game/ui/tools/map.vue?284a","webpack:///./src/game/layers/grid.ts","webpack:///./src/store.ts","webpack:///./src/core/components/colorpicker.vue","webpack:///./src/auth/login.vue?3521","webpack:///./src/App.vue?2e53","webpack:///./src/App.vue","webpack:///./src/game/game.vue?b3a0","webpack:///./src/game/game.vue?f5c6","webpack:///./src/game/layers/fow.ts","webpack:///./src/core/components/load.vue?18c2","webpack:///./src/game/ui/menu/menu.vue?002b","webpack:///./src/game/ui/menu/menu.vue?9e9a","webpack:///./src/game/shapes/circle.ts","webpack:///./src/game/ui/tools/map.vue?a3ab","webpack:///./src/core/components/load.vue","webpack:///./src/game/ui/tools/pan.ts","webpack:///./src/game/ui/tools/selectcontext.vue","webpack:///./src/core/utils.ts","webpack:///./src/assetManager/contextMenu.vue","webpack:///./src/game/visibility/te/triag.ts","webpack:///./src/game/ui/menu/asset_node.vue?1f27","webpack:///./src/core/components/modals/modal.vue?44ae","webpack:///./src/assetManager/socket.ts","webpack:///./src/game/ui/tools/filter.vue?ee60","webpack:///./src/game/game.vue?5550","webpack:///./src/game/shapes/multiline.ts","webpack:///./src/game/ui/tools/draw.vue","webpack:///./src/game/ui/initiative.vue?497e","webpack:///./src/game/ui/initiative.vue?527e","webpack:///./src/game/utils.ts","webpack:///./src/game/ui/tools/createtoken_modal.vue?d0df","webpack:///./src/game/ui/note.vue?f9bd","webpack:///./src/game/ui/tools/draw.vue?b96d","webpack:///./src/game/shapes/line.ts","webpack:///./src/router.ts","webpack:///./src/game/ui/tools/tool.vue?d136","webpack:///./src/game/ui/tools/tools.vue","webpack:///./src/game/ui/tools/tool.vue?8ce3","webpack:///./src/game/shapes/asset.ts","webpack:///./src/game/visibility/te/cdt.ts","webpack:///./src/game/ui/tools/draw.vue?1261","webpack:///./src/game/layers/manager.ts","webpack:///./src/game/ui/initiative.vue?c7e1","webpack:///./src/game/ui/tools/createtoken_modal.vue","webpack:///./src/game/visibility/bvh/node.ts","webpack:///./src/game/ui/tools/createtoken_modal.vue?f918","webpack:///./src/game/events/keyboard.ts","webpack:///./src/assetManager/manager.vue?433f","webpack:///./src/game/ui/selection/shapecontext.vue?17f5","webpack:///./src/game/ui/tools/tools.vue?25b2","webpack:///./src/game/ui/selection/selection_info.vue?2310","webpack:///./src/core/components/modals/modal.vue?09d2","webpack:///./src/core/components/contextmenu.vue?a0a2","webpack:///./src/game/ui/tools/filter.vue?d533","webpack:///./src/core/components/modals/prompt.vue?4e1b","webpack:///./src/core/components/load.vue?4ab2","webpack:///./src/core/components/load.vue?0f87","webpack:///./src/game/ui/menu/menu.vue?8b23","webpack:///./src/game/shapes/boundingrect.ts","webpack:///./src/dashboard/main.vue?5e14","webpack:///./src/dashboard/main.vue?94d1","webpack:///./src/game/geom.ts","webpack:///./src/game/ui/menu/asset_node.vue?c55a","webpack:///./src/game/ui/menu/asset_node.vue?3fe9","webpack:///./src/game/game.vue?5592","webpack:///./src/game/units.ts","webpack:///./src/game/ui/menu/menu.vue?ae57","webpack:///./src/core/components/colorpicker.vue?1682","webpack:///./src/game/ui/tools/selectcontext.vue?0020","webpack:///./src/game/ui/tools/selectcontext.vue?758c","webpack:///./src/game/visibility/te/tds.ts","webpack:///./src/game/visibility/bvh/bvh.ts","webpack:///./src/game/manager.ts","webpack:///./src/game/ui/menu/asset_node.vue?0d0e","webpack:///./src/core/components/load.vue?8cd0","webpack:///./src/game/ui/selection/selection_info.vue?7cd0","webpack:///./src/game/ui/selection/selection_info.vue?4f48","webpack:///./src/game/ui/selection/shapecontext.vue?4b66","webpack:///./src/game/ui/selection/shapecontext.vue?0558","webpack:///./src/game/ui/selection/edit_dialog.vue?71ee","webpack:///./src/game/ui/selection/edit_dialog.vue?279c","webpack:///./src/dashboard/main.vue?3f72","webpack:///./src/core/components/modals/confirm.vue","webpack:///./src/game/ui/tools/tools.vue?c704","webpack:///./src/game/ui/selection/shapecontext.vue?aac0","webpack:///./src/assetManager/contextMenu.vue?c131","webpack:///./src/assetManager/contextMenu.vue?a185","webpack:///./src/game/ui/tools/draw.vue?60f4","webpack:///./src/assetManager/manager.vue?a11e","webpack:///./src/game/ui/labels.vue?8bbc","webpack:///./src/game/event-bus.ts","webpack:///./src/dashboard/main.vue?d5a9","webpack:///./src/game/shapes/rect.ts","webpack:///./src/game/game.vue?b235","webpack:///./src/game/ui/tools/filter.vue?b0f4","webpack:///./src/game/ui/tools/selectcontext.vue?6f66","webpack:///./src/game/layers/fowplayers.ts","webpack:///./src/game/layers/layer.ts","webpack:///./src/game/events/mouse.ts","webpack:///./src/game/ui/tools/filter.vue","webpack:///./src/game/ui/menu/menu.vue?904d","webpack:///./src/game/shapes/baserect.ts","webpack:///./src/game/ui/tools/select.vue","webpack:///./src/dashboard/main.vue","webpack:///./src/game/ui/tools/createtoken_modal.vue?6f0b","webpack:///./src/assetManager/manager.vue?765a","webpack:///./src/assetManager/manager.vue?a045","webpack:///./src/game/ui/tools/selectcontext.vue?d61f","webpack:///./src/auth/logout.ts","webpack:///./src/game/ui/labels.vue?564d","webpack:///./src/game/ui/labels.vue?e8aa","webpack:///./src/core/store.ts","webpack:///./src/main.ts","webpack:///./src/core/components/contextmenu.vue?f402","webpack:///./src/invitation/invitation.ts","webpack:///./src/core/components/modals/prompt.vue","webpack:///./src/game/visibility/te/te.ts","webpack:///./src/game/ui/tools/map.vue?f96f","webpack:///./src/game/ui/tools/map.vue?7f60","webpack:///./src/game/ui/selection/edit_dialog.vue","webpack:///./src/game/settings.ts","webpack:///./src/auth/login.vue?283c","webpack:///./src/game/ui/tools/createtoken_modal.vue?e7b2","webpack:///./src/game/ui/tools/createtoken_modal.vue?5fcc","webpack:///./src/game/ui/tools/tool.vue?6323","webpack:///./src/game/ui/tools/tool.vue?f5ba","webpack:///./src/core/components/modals/modal.vue?1854","webpack:///./src/core/components/modals/modal.vue?e329","webpack:///./src/game/game.vue?d01c","webpack:///./src/game/ui/tools/ruler.ts","webpack:///./src/core/components/modals/modal.vue","webpack:///./src/game/visibility/te/pa.ts","webpack:///./src/dashboard/main.vue?1359","webpack:///./src/game/ui/selection/edit_dialog.vue?9a84","webpack:///./src/core/components/modals/confirm.vue?f9ee","webpack:///./src/game/ui/initiative.vue?59ac","webpack:///./src/game/ui/tools/map.vue","webpack:///./src/core/components/modals/confirm.vue?e141","webpack:///./src/core/components/modals/confirm.vue?be48","webpack:///./src/assetManager/contextMenu.vue?1b1b","webpack:///./src/game/ui/tools/select.vue?b7fd","webpack:///./src/game/ui/labels.vue?8d8f","webpack:///./src/game/shapes/polygon.ts","webpack:///./src/game/ui/tools/draw.vue?1866","webpack:///./src/game/ui/tools/draw.vue?03b4","webpack:///./src/core/components/colorpicker.vue?0fbc","webpack:///./src/core/components/colorpicker.vue?fb27","webpack:///./src/assetManager/manager.vue","webpack:///./src/game/ui/tools/tools.vue?fa4a","webpack:///./src/game/ui/tools/tool.vue","webpack:///./src/core/components/modals/prompt.vue?0a11","webpack:///./src/core/components/modals/prompt.vue?36e2","webpack:///./src/game/ui/initiative.vue?36c8","webpack:///./src/game/ui/selection/selection_info.vue","webpack:///./src/game/store.ts","webpack:///./src/core/components/colorpicker.vue?4d99","webpack:///./src/core/components/modals/confirm.vue?a22f","webpack:///./src/game/comm/conversion/aura.ts","webpack:///./src/game/ui/tools/tools.vue?47aa","webpack:///./src/game/ui/tools/tools.vue?e95e","webpack:///./src/assetManager/contextMenu.vue?1e9a","webpack:///./src/game/ui/note.vue","webpack:///./src/game/ui/initiative.vue","webpack:///./src/game/ui/selection/edit_dialog.vue?52d8","webpack:///./src/game/layers/utils.ts","webpack:///./src/game/ui/labels.vue","webpack:///./src/game/ui/selection/edit_dialog.vue?3800","webpack:///./src/auth/login.vue?e4a1","webpack:///./src/auth/login.vue?8f9e","webpack:///./src/game/ui/selection/selection_info.vue?5d62","webpack:///./src/game/api/events.ts"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","installedChunks","push","Object","prototype","hasOwnProperty","call","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","app","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","boundingrect_1","shape_1","units_1","Text","Shape","[object Object]","position","text","font","angle","fillColour","strokeColour","uuid","super","this","type","assign","getBaseDict","points","refPoint","x","y","BoundingRect","ctx","draw","fillStyle","save","dest","g2l","translate","rotate","textAlign","getLines","map","line","fillText","restore","point","centerPoint","canvas","getBoundingBox","visibleInCanvas","resizePoint","lines","lineHeight","widths","measureText","width","Math","max","split","allLines","maxWidth","targetLine","words","word","testLine","metrics","testWidth","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_selection_info_vue_vue_type_style_index_0_id_674cf937_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_selection_info_vue_vue_type_style_index_0_id_674cf937_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","__webpack_exports__","_shapecontext_vue_vue_type_template_id_759e5a8a_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_shapecontext_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","__WEBPACK_IMPORT_KEY__","_node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_3__","component","options","__file","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_App_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_App_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_prompt_vue_vue_type_style_index_0_id_0602c2e6_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_prompt_vue_vue_type_style_index_0_id_0602c2e6_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","tinycolor2_1","tslib_1","__importDefault","vue_1","vue_class_component_1","vue_color_1","vue_property_decorator_1","ColorPicker","default","display","left","top","transparent","$refs","chromePicker","val","rgba","a","setPosition","disabled","$nextTick","$children","$el","focus","newColor","toRgbString","$emit","color","rect","getBoundingClientRect","right","innerWidth","bottom","innerHeight","__decorate","Prop","String","Boolean","components","chrome-picker","Chrome","_game_vue_vue_type_template_id_05b88da7_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_game_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","_node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_4__","socket_io_client_1","createConnection","route","socket","io","opts","query","params","creator","room","connect","location","protocol","host","autoConnect","contextMenu_vue_1","confirm_vue_1","prompt_vue_1","socket_1","store_1","utils_1","AssetManager","path","draggingSelection","folders","assetStore","files","selected","idMap","currentFolder","root","parentFolder","parent","undefined","firstSelectedFile","sel","file_hash","nextFolder","pop","clearSelected","emit","prompt","inode","target","includes","indexOf","delete","event","shiftKey","inodes","start","end","ctrlKey","file","dataTransfer","setData","dropEffect","classList","contains","add","remove","moveInode","upload","document","getElementById","click","fls","CHUNK_SIZE","uuidv4","slices","ceil","size","fr","FileReader","readAsArrayBuffer","min","onload","e","directory","totalSlices","Prompt","ConfirmDialog","AssetContextMenu","to","from","next","disconnect","_asset_node_vue_vue_type_template_id_6d718094_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_asset_node_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_selectcontext_vue_vue_type_style_index_0_id_44a31e42_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_selectcontext_vue_vue_type_style_index_0_id_44a31e42_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","_login_vue_vue_type_template_id_bc30fc14_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_login_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","manager_1","tds_1","triag_1","drawPolygon","polygon","colour","dl","layerManager","getLayer","lineJoin","beginPath","strokeStyle","random","moveTo","g2lx","g2ly","lineTo","closePath","stroke","drawPolygonL","xx","local","yy","I","J","drl","constrained","drawPolygonT","tds","clear","logs","T","clearRect","ei","EdgeIterator","valid","collect","fromP","edge","first","vertices","ccw","second","toP","cw","Infinity","constraints","console","log","pos","triangles","isInfinite","po","arc","PI","fill","DP","DPL","DPT","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_tool_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_tool_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default","tinycolor","__importStar","circle_1","CircularToken","Circle","center","radius","fromDict","textBaseline","xs","calcFontScale","g2lz","ys","transform","mostReadable","toHexString","visible","gameStore","IS_DM","group","source","has_img","effects","index","geom_1","rect_1","text_1","AnnotationManager","shown","origin","GlobalPoint","annotationText","annotationRect","Rect","layer","hasLayer","warn","addShape","l2g","LocalPoint","getMaxWidth","height","getMaxHeight","w","zoomFactor","h","invalidate","_menu_vue_vue_type_template_id_aaf3f05e_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_menu_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","render","_vm","_h","$createElement","_c","_self","staticClass","style","--detailRight","detailRight","--detailArrow","detailArrow","class","$store","state","game","filterNoLabel","on","toggleUnlabeled","_v","_l","labels","ref","label","isFilter","_s","$event","toggleFilter","join","_e","staticRenderFns","_contextmenu_vue_vue_type_template_id_256dde9c___WEBPACK_IMPORTED_MODULE_0__","_contextmenu_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_note_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_note_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_login_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_login_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","asset_1","circulartoken_1","line_1","multiline_1","polygon_1","createShapeFromDict","shape","sh","type_","fill_colour","stroke_colour","circ","token","Line","x2","y2","line_width","multiline","MultiLine","Polygon","v","asset","img","Image","src","startsWith","URL","pathname","Asset","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_confirm_vue_vue_type_style_index_0_id_1883e207_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_confirm_vue_vue_type_style_index_0_id_1883e207_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","aura_1","nameVisible","trackers","auras","_owners","visionObstruction","movementObstruction","isToken","showHighlight","annotation","globalCompositeOperation","Map","_refPoint","delta","idx","entries","abs","prev","fromArray","vec","subtract","mid","multiply","normalize","skipLightUpdate","recalculate","self","obstructionIndex","visionBlockers","update","recalculateVision","forEach","au","ls","visionSources","findIndex","aura","visionSource","some","blocksMovement","movementblockers","recalculateMovement","ownedBy","ownedtokens","draw_operator","movement_obstruction","vision_obstruction","aurasToServer","owners","name_visible","is_token","JSON","stringify","aurasFromServer","parse","bbox","strokeRect","topLeft","dim","loc","innerRange","g2lr","gradient","createRadialGradient","tc","addColorStop","setAlpha","lastPath","sync","oldLayer","newLayer","shapes","freeze","username","owner","oldValue","newValue","ownerIndex","addOwner","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_prompt_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_prompt_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","note","attrs","mask","close","scopedSlots","_u","fn","draggable","dragstart","dragStart","dragend","dragEnd","title","select","staticStyle","font-size","directives","rawName","expression","domProps","change","updateNote","input","composing","$set","calcHeight","removeNote","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_modal_vue_vue_type_style_index_0_id_12ed61ba_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_modal_vue_vue_type_style_index_0_id_12ed61ba_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","selectcontext_vue_1","tool_vue_1","utils_2","utils_3","SelectOperations","SelectTool","showContextMenu","active","Noop","deltaChanged","dragRay","Ray","Vector","selectionStartPoint","selectionHelper","mouse","getMouse","globalMouse","selectionStack","hit","selection","concat","getPointIndex","l2gz","getRef","Resize","Drag","localRefPoint","GroupSelect","endPoint","og","direction","ogDelta","calculateDelta","asDict","redraw","temporary","resize","updateCursor","body","cursor","clearSelection","topRight","botLeft","useGrid","altKey","snapToGrid","resizeToGrid","$parent","shapecontext","open","selectcontext","getPointOrientation","SelectContext","pa_1","done","visionMode","ogSelBBox","newSelBBox","offset","refine","movementBlocker","blocker","UUIDMap","blockerBBox","found","intersectsWithInner","ray","fromPoints","invDir","inverse","dirIsNegative","intersectP","bCenter","sCenter","ux","uy","dx","dot","dy","centerTriangle","PA_CDT","movement","locate","asArray","lt","triangle","checkTriangle","skip","endpoint","neighbours","_cw","_ccw","ix","intersection","isConstrained","orientation","Sign","LEFT_TURN","ZERO","newDelta","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_note_vue_vue_type_style_index_0_id_7a3669fd_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_note_vue_vue_type_style_index_0_id_7a3669fd_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_labels_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_labels_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","sendClientOptions","locationOptions","panX","panY","AssetNode","showImage","keys","filter","el","sort","alphSort","__files","b","toLowerCase","children","imageSource","querySelector","setDragImage","tabindex","blur","_t","vuex_module_decorators_1","AssetStore","VuexModule","Mutation","Module","dynamic","store","rootStore","namespaced","getModule","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_contextmenu_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_contextmenu_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","contextmenu_vue_1","event_bus_1","ShapeContext","activeLayer","pageX","pageY","layers","selectable","playerEditable","moveLayer","getActiveLayer","moveShapeOrder","initiative","addInitiative","getInitiativeRepr","EventBus","ContextMenu","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_map_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_map_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","layer_1","GridLayer","Layer","doClear","drawGrid","gs","gridSize","gridColour","lineWidth","vuex_1","use","Store","_colorpicker_vue_vue_type_template_id_d32461a4_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_colorpicker_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_login_vue_vue_type_style_index_0_id_bc30fc14_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_login_vue_vue_type_style_index_0_id_bc30fc14_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","id","script","componentNormalizer","mouseleave","wheel","zoom","ready","mousedown","mouseup","mousemove","contextmenu","preventDefault","stopPropagation","dragover","drop","showUI","layer-selected","selectedLayer","selectLayer","href","interval","dot-width","dot-height","tooltip-dir","tooltip","formatter","zoomDisplay","toFixed","slider-style","border-radius","bg-style","background-color","box-shadow","process-style","model","callback","$$v","settings_1","te_1","FOWLayer","isVisionLayer","preFogShapes","virtualCanvas","createElement","vCtx","getContext","has","removeShape","Settings","skipLightFOW","originalOperation","dctx","drawAngleLines","drawFirstLightHit","fullFOW","bb","lcenter","alm","light","find","auraLength","getUnitDistance","auraCircle","lastArcAngle","Path2D","firstPoint","angleSteps","anglePoint","cos","sin","lightRay","hitResult","BV","intersect","computeVisibility","drawImage","fowLOS","preShape","ogComposite","getFogColour","fillRect","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_load_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_load_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","settings","locations","rm-list-dm","_m","enter","rm","transition","settingsClick","overflow-y","overflow-x","assets","createNote","openNote","notes","for","checked","Array","isArray","_i","$$a","$$el","$$c","$$i","modifiers","number","step","fowOpacity","_n","$forceUpdate","unitSize","changeVisionMode","lazy","visionRangeMin","visionRangeMax","readonly","invitationCode","update:color","fowColour","rulerColour","text-decoration","changeLocation","createLocation","pow","targetX","targetY","round","diff","sqrt","baserect_1","MapTool","xCount","yCount","startPoint","clone","BaseRect","_load_vue_vue_type_template_id_ff095222___WEBPACK_IMPORTED_MODULE_0__","_load_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","_node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_2__","PanTool","panStart","distance","increasePanX","increasePanY","_selectcontext_vue_vue_type_template_id_44a31e42_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_selectcontext_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","main_1","replace","toString","capitalize","charAt","toUpperCase","getHTMLFont","element","parentElement","getComputedStyle","getPropertyValue","getHTMLTextWidth","fakeElement","appendChild","partition","arr","predicate","ret","Number","fontWidth","fixedEncodeURIComponent","str","encodeURIComponent","charCodeAt","OrderedMap","values","getComponent","activeComponent","_contextMenu_vue_vue_type_template_id_606797b4___WEBPACK_IMPORTED_MODULE_0__","_contextMenu_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","edgeInfo","va","vb","ec","EdgeCirculator","indv","indexV","ri","infinite","vi","orient","COLLINEAR","collinearBetween","q","cPQ","cQR","compare","EQUAL","SMALLER","LARGER","px","py","qx","qy","rx","ry","pqx","pqy","prx","pry","det","determinant","maxX","maxY","aprX","aprY","eps","EPSILON","POSITIVE","NEGATIVE","a00","a01","a10","a11","hasInexactNegativeOrientation","sideOfOrientedCircle","perturb","sideOfOrientedCircleP","Error","p0","p1","p2","os","getOrientedSide","ON_ORIENTED_BOUNDARY","reverse","ON_NEGATIVE_SIDE","xyEqual","xySmaller","xyCompare","qpx","qpy","rpx","rpy","tpx","tpy","tqx","tqy","rqx","rqy","maxx","maxy","arpx","arpy","atqx","atqy","atpx","atpy","arqx","arqy","ON_POSITIVE_SIDE","segSegDoIntersectCrossing","p3","p4","RIGHT_TURN","segSegDoIntersectContained","pa","pb","pc","pd","getIntersectionType","intersectionType","IntersectionType","POINT","NO_INTERSECTION","getLine","doIntersect","l1","l2","info","getIntersectionTypeLine","la","lb","denom","nom1","nom2","A1","A2","B1","B2","nextUp","MAX_VALUE","MIN_VALUE","ulp","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_asset_node_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_asset_node_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","Modal","positioned","offsetX","offsetY","screenX","screenY","dragging","updatePosition","container","offsetWidth","offsetHeight","clientX","clientY","parseInt","destination","setRoot","folder","child","set","FilterTool","labelFilters","toggleUnlabeledFilter","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_game_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_game_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default","_points","minx","miny","lineCap","_draw_vue_vue_type_template_id_639cd890_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_draw_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","fakeSetData","updateOrder","actor","flex-direction","align-items","initiative-selected","currentActor","mouseenter","toggleHighlight","notAllowed","owns","placeholder","syncInitiative","opacity","createEffect","getDefaultEffect","toggleOption","removeInitiative","effect","updateEffect","turns","roundCounter","setRound","updateTurn","nextTurn","opposite","zoomValue","exp","colorpicker_vue_1","modal_vue_1","CreateTokenModal","borderColour","updatePreview","Watch","color-picker","computed","mapState","NoteDialog","textarea","scrollHeight","then","DrawTool","brushHelper","ruler","shapeSelect","modeSelect","modes","brushSize","helperSize","onModeChange","fowLayer","normalLayer","setupBrush","_vertices","pushBrushBack","lastPoint","finaliseShape","axios_1","vue_router_1","manager_vue_1","login_vue_1","logout_1","load_vue_1","main_vue_1","game_vue_1","invitation_1","router","base","routes","redirect","meta","auth","template","beforeEach","coreStore","initialized","matched","record","authenticated","response","setAuthenticated","setUsername","setInitialized","catch","error","Tool","$on","tool","onMouseDown","onMouseUp","onMouseMove","onContextMenu","onDeselect","onSelect","_tools_vue_vue_type_template_id_cf33581e_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_tools_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_tool_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_tool_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","topleft","CDT","TDS","insert","insertConstraintV","stack","markConstraint","intersectionInfo","findIntersectedFaces","triangulateHole","intersectedFaces","listAB","listBA","edges","triangulateHole2","propagatingFlipE","triangulateHalfHole","fl","deleteTriangle","conflictBoundaries","iN","iT","iC","current","n1","n2","ind","ind1","ind2","mirrorIndex","v0","v1","v2","newlf","createTriangle","vaa","vbb","aa","lfc","LineFaceCirculator","lf","rf","indexT","unshift","previousFace","currentVertex","i1","i2","vcc","vdd","pi","BoundingBox","dilate","overlaps","removeConstrainedEdge","dimension","indf","locateInfo","iLocate","insertb","li","flipAround","propagatingFlip","depth","isFlipable","maxDepth","ni","flip","e1","e2","uid","eni","eI","edgeSet","lessEdge","indn","ed","tt","ii","u","t1","t2","t3","i3","t4","i4","insertInConstrainedEdge","LocateType","EDGE","insertc","updateConstraintsIncident","VERTEX","clearConstraintsIncident","updateConstraintsOpposite","c1","c2","fc","FaceCirculator","cwi","ccwi","insertFirst","finiteVertex","insertSecond","OUTSIDE_AFFINE_HULL","insertOutsideAffineHull","OUTSIDE_CONVEX_HULL","insertOutsideConvexHull","insertInEdge","FACE","insertInFace","insertDimUp","_infinite","conform","finiteEdge","COUNTERCLOCKWISE","insertOutsideConvexHull2","ccwlist","cwlist","th","marchLocate1D","marchLocate2D","ff","iv","pqt","Triangle","leftFirst","o0","o1","o2","sum","nTurns","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_draw_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_draw_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","LayerManager","drawLoop","requestAnimationFrame","addLayer","globalAlpha","getSelection","image","getData","l2gx","l2gy","lm","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_initiative_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_initiative_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","_createtoken_modal_vue_vue_type_template_id_73816298_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_createtoken_modal_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","BoundingNode","nPrimitives","LeafNode","firstPrimOffset","InteriorNode","union","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_createtoken_modal_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_createtoken_modal_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","utils_4","onKeyUp","HTMLInputElement","HTMLTextAreaElement","selectTool","onKeyDown","keyCode","hasSelection","toggleUI","clipboard","setClipboard","clip","oldTrackers","tracker","newTracker","oldAuras","newAura","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_manager_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_manager_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_shapecontext_vue_vue_type_style_index_0_id_759e5a8a_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_shapecontext_vue_vue_type_style_index_0_id_759e5a8a_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","shapecontext_vue_1","createtoken_modal_vue_1","draw_vue_1","filter_vue_1","map_vue_1","pan_1","select_vue_1","manager_2","ruler_1","Tools","currentTool","tools","dmTools","currentToolComponent","visibleTools","tagName","targetTool","button","buttons","annotations","gameManager","annotationManager","setActiveText","select-tool","pan-tool","draw-tool","ruler-tool","RulerTool","map-tool","filter-tool","shape-menu","createtoken-dialog","watch","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_selection_info_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_selection_info_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_modal_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_modal_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_contextmenu_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_contextmenu_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_filter_vue_vue_type_style_index_0_id_4c62cd6c_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_filter_vue_vue_type_style_index_0_id_4c62cd6c_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","question","answer","resolve","reject","Promise","message","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_menu_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_menu_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","botRight","vector","other","xmin","xmax","ymin","ymax","botright","dirIsNeg","txmin","getDiagCorner","txmax","tymin","tymax","tMax","coreVisible","owned","joined","submit","createRoom","newSessionName","tag","getPointDistance","Point","scale","atan2","maxT","toggle","mouseover","hash","mouseout","vue_slider_component_1","lodash_1","initiative_vue_1","labels_vue_1","menu_vue_1","note_vue_1","selection_info_vue_1","tools_vue_1","keyboard_1","mouse_1","Game","manager","updateZoom","newZoomDisplay","zoomLocation","addEventListener","resizeWindow","removeEventListener","throttle","scrollZoom","setWidth","setHeight","confirm","dropAsset","tool-bar","selection-info","prompt-dialog","confirm-dialog","menu-bar","initiative-dialog","zoom-slider","note-dialog","label-dialog","obj","z","l2gr","asset_node_vue_1","MenuBar","setUseGrid","setFullFOW","setFOWOpacity","setLineOfSight","setUnitSize","setGridSize","setGridColour","setFOWColour","setRulerColour","setVisionRangeMin","setVisionRangeMax","nextElementSibling","newNote","setVisionMode","asset-node","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_colorpicker_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_colorpicker_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","bringPlayers","createToken","showInitiative","_INFINITE_VERTEX","LineFaceState","newPoint","INFINITE","_counter","vertex","A","sign","Vertex","_point","_ri","Edge","_es","associatedEdge","increment","tr","dir","UNDEFINED","_tr","ic","vt","vr","pqr","VERTEX_VERTEX","VERTEX_EDGE","EDGE_VERTEX","EDGE_EDGE","createVertex","addVertex","infiniteVertex","n0","trig","t0","i0","setAdjacency","deleteList","copy","neighbour","lfit","reorient","vCW","vCCW","tri","bl","bli","vv","g","x1","y1","dist","node_1","BoundingVolume","totalNodes","buildData","orderedPrims","nodes","recursiveBuild","compact","node","createLeaf","centroidBbox","getMaxExtent","pMid","partitionedData","flattened","stopOnFirstHit","tMin","todoOffset","nodeNum","todo","secondChildOffset","flatten","myOffset","secondOffset","primitivesOffset","annotation_1","GameManager","selectedTool","oldShape","redrawInitiative","checkVisionSources","setMovementBlock","setIsToken","localPos","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_asset_node_vue_vue_type_style_index_0_id_6d718094_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_asset_node_vue_vue_type_style_index_0_id_6d718094_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","LoadComponent","openEditDialog","changeValue","maxvalue","getLayers","setLayer","moveToBack","moveToFront","getInitiativeWord","grid-column","updateShape","grid-column-start","setToken","setVisionBlocker","setMovementBlocker","updateOwner","gridColumnStart","removeOwner","removeTracker","updateAuraColour","updateAuraVisionSource","removeAura","removeLabel","openLabelManager","updateAnnotation","registerHooks","Dashboard","vm","err","post","$router","_confirm_vue_vue_type_template_id_1883e207_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_confirm_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_tools_vue_vue_type_style_index_0_id_cf33581e_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_tools_vue_vue_type_style_index_0_id_cf33581e_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_shapecontext_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_shapecontext_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","rename","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_draw_vue_vue_type_style_index_0_id_639cd890_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_draw_vue_vue_type_style_index_0_id_639cd890_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_manager_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_manager_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_labels_vue_vue_type_style_index_0_id_7893fe7e_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_labels_vue_vue_type_style_index_0_id_7893fe7e_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_main_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_main_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_game_vue_vue_type_style_index_1_id_05b88da7_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_game_vue_vue_type_style_index_1_id_05b88da7_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_filter_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_filter_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_selectcontext_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_selectcontext_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","FOWPlayersLayer","skipPlayerFOW","maxLength","tokenId","_a","selectionColor","selectionWidth","invalidateLight","serverShape","lsI","lbI","mbI","anI","annotationIndex","ownedIndex","ogOP","drawAuras","every","destinationIndex","oldIdx","deltaY","_filter_vue_vue_type_template_id_4c62cd6c_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_filter_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_menu_vue_vue_type_style_index_0_id_aaf3f05e_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_menu_vue_vue_type_style_index_0_id_aaf3f05e_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","topright","botleft","mx","my","_select_vue_vue_type_template_id_048b3482___WEBPACK_IMPORTED_MODULE_0__","_select_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","_main_vue_vue_type_template_id_61eb1455_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_main_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_createtoken_modal_vue_vue_type_style_index_0_id_73816298_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_createtoken_modal_vue_vue_type_style_index_0_id_73816298_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","moveDrag","stopDrag","multiple","hidden","createDirectory","prepareUpload","dblclick","changeDirectory","dragleave","leaveDrag","inode-selected","cm","startDrag","createtokendialog","Logout","selectLabel","lower-opacity","toggleVisibility","deleteLabel","trim","newCategory","newName","addLabel","CoreStore","init","App_vue_1","router_1","config","productionTip","devtools","performance","$mount","props","Initiative","code","sessionUrl","_prompt_vue_vue_type_template_id_0602c2e6_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_prompt_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","draw_1","drawt","drawTEContour","Q","rawOutput","expandEdge","fh","nfh","nIndex","rIndex","lIndex","nvh","rvh","lvh","re","le","ro","lo","raySegIntersection","CLOCKWISE","denominator","ua","_edit_dialog_vue_vue_type_template_id_431ad764_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_edit_dialog_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","tempFill","Login","password","$route","statusText","span","modal-mask","dialog-mask","dragOver","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_game_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_game_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","diffsign","xdiff","ydiff","xmid","ymid","_modal_vue_vue_type_template_id_12ed61ba_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_modal_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","cdt_1","triangulate","partial","cdt","insertConstraint","vision","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_main_vue_vue_type_style_index_0_id_61eb1455_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_main_vue_vue_type_style_index_0_id_61eb1455_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","EditDialog","$off","addEmpty","hadAnnotation","an","yes","no","ok","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_initiative_vue_vue_type_style_index_0_id_af4dc61a_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_initiative_vue_vue_type_style_index_0_id_af4dc61a_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","_map_vue_vue_type_template_id_2104f147___WEBPACK_IMPORTED_MODULE_0__","_map_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","deny","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_select_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_select_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","LabelManager","user","option-selected","max-width","currentTarget","closePicker","z-index","updateColor","_manager_vue_vue_type_template_id_5b0def98___WEBPACK_IMPORTED_MODULE_0__","_manager_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_tools_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_tools_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","_tool_vue_vue_type_template_id_1e034b42___WEBPACK_IMPORTED_MODULE_0__","_tool_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","keyup","_k","vuedraggable_1","setTurn","getActor","actorId","order","show","option","effectIndex","syncEffect","_selection_info_vue_vue_type_template_id_674cf937_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_selection_info_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","bvh_1","GameStore","selectedLayerIndex","boardInitialized","roomName","roomCreator","locationName","vision_mode","updatedLayers","Set","isDM","oldLoc","newLoc","getGridLayer","increase","unit_size","gridLayer","use_grid","vision_min_range","vision_max_range","full_fow","fow_opacity","fow_los","actualNote","context","commit","Action","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_colorpicker_vue_vue_type_style_index_0_id_d32461a4_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_colorpicker_vue_vue_type_style_index_0_id_d32461a4_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_confirm_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_confirm_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","vision_source","refInFor","tool-selected","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_contextMenu_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_contextMenu_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","_note_vue_vue_type_template_id_7a3669fd_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_note_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","_initiative_vue_vue_type_template_id_af4dc61a_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_initiative_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_edit_dialog_vue_vue_type_style_index_0_id_431ad764_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_edit_dialog_vue_vue_type_style_index_0_id_431ad764_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","fow_1","fowplayers_1","grid_1","createLayer","layerInfo","zIndex","player_editable","setShapes","_labels_vue_vue_type_template_id_7893fe7e_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_labels_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_edit_dialog_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_edit_dialog_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","focusin","focusout","login","autocomplete","required","visibility","register","edit_dialog_vue_1","SelectionInfo","editDialog","ogValue","isNaN","edit-dialog","setRoomName","setRoomCreator","setInvitationCode","setDM","grid_colour","fow_colour","ruler_colour","setPanX","pan_x","setPanY","pan_y","setZoomDisplay","zoom_factor","active_layer","setLocationName","setCenterPosition","setAssets","locationInfo","setLocations","innerHTML","resetLayerInfo","reset","setBoardInitialized","realShape","setLabels","setLabelVisibility"],"mappings":"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","file":"static/js/app.fb94f74e.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import { GlobalPoint, LocalPoint } from \"@/game/geom\";\nimport { BoundingRect } from \"@/game/shapes/boundingrect\";\nimport { Shape } from \"@/game/shapes/shape\";\nimport { g2l } from \"@/game/units\";\n\nexport class Text extends Shape {\n    type = \"text\";\n    text: string;\n    font: string;\n    angle: number;\n    constructor(\n        position: GlobalPoint,\n        text: string,\n        font: string,\n        angle?: number,\n        fillColour?: string,\n        strokeColour?: string,\n        uuid?: string,\n    ) {\n        super(position, fillColour, strokeColour, uuid);\n        this.text = text;\n        this.font = font;\n        this.angle = angle || 0;\n    }\n    asDict() {\n        return Object.assign(this.getBaseDict(), {\n            text: this.text,\n            font: this.font,\n            angle: this.angle,\n        });\n    }\n    get points() {\n        return [[this.refPoint.x, this.refPoint.y]];\n    }\n    getBoundingBox(): BoundingRect {\n        return new BoundingRect(this.refPoint, 5, 5); // TODO: fix this bounding box\n    }\n    draw(ctx: CanvasRenderingContext2D) {\n        super.draw(ctx);\n        ctx.font = this.font;\n        ctx.fillStyle = this.fillColour;\n        ctx.save();\n        const dest = g2l(this.refPoint);\n        ctx.translate(dest.x, dest.y);\n        ctx.rotate(this.angle);\n        ctx.textAlign = \"center\";\n        this.getLines(ctx).map(line => ctx.fillText(line.text, line.x, line.y));\n        ctx.restore();\n    }\n    contains(point: GlobalPoint): boolean {\n        return false; // TODO\n    }\n\n    center(): GlobalPoint;\n    center(centerPoint: GlobalPoint): void;\n    center(centerPoint?: GlobalPoint): GlobalPoint | void {} // TODO\n    visibleInCanvas(canvas: HTMLCanvasElement): boolean {\n        return this.getBoundingBox().visibleInCanvas(canvas);\n    } // TODO\n    snapToGrid(): void {}\n    resizeToGrid(): void {}\n    resize(resizePoint: number, point: LocalPoint): void {}\n\n    getMaxHeight(ctx: CanvasRenderingContext2D) {\n        const lines = this.getLines(ctx);\n        const lineHeight = 30;\n        return lineHeight * lines.length;\n    }\n\n    getMaxWidth(ctx: CanvasRenderingContext2D) {\n        const lines = this.getLines(ctx);\n        const widths = lines.map(line => ctx.measureText(line.text).width);\n        return Math.max(...widths);\n    }\n\n    private getLines(ctx: CanvasRenderingContext2D) {\n        const lines = this.text.split(\"\\n\");\n        const allLines: { text: string; x: number; y: number }[] = [];\n        const maxWidth = ctx.canvas.width;\n        const lineHeight = 30;\n        const x = 0; // this.refPoint.x;\n        let y = 0; // this.refPoint.y;\n\n        for (const line of lines) {\n            let targetLine = \"\";\n            const words = line.split(\" \");\n            for (const word of words) {\n                const testLine = targetLine + word + \" \";\n                const metrics = ctx.measureText(testLine);\n                const testWidth = metrics.width;\n                if (testWidth > maxWidth) {\n                    ctx.fillText(targetLine, x, y);\n                    allLines.push({ text: targetLine, x, y });\n                    targetLine = word + \" \";\n                    y += lineHeight;\n                } else {\n                    targetLine = testLine;\n                }\n            }\n            allLines.push({ text: targetLine, x, y });\n            y += lineHeight;\n        }\n        return allLines;\n    }\n}\n","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./selection_info.vue?vue&type=style&index=0&id=674cf937&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./selection_info.vue?vue&type=style&index=0&id=674cf937&scoped=true&lang=css&\"","import { render, staticRenderFns } from \"./shapecontext.vue?vue&type=template&id=759e5a8a&scoped=true&\"\nimport script from \"./shapecontext.vue?vue&type=script&lang=ts&\"\nexport * from \"./shapecontext.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./shapecontext.vue?vue&type=style&index=0&id=759e5a8a&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"759e5a8a\",\n  null\n  \n)\n\ncomponent.options.__file = \"shapecontext.vue\"\nexport default component.exports","import mod from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./prompt.vue?vue&type=style&index=0&id=0602c2e6&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./prompt.vue?vue&type=style&index=0&id=0602c2e6&scoped=true&lang=css&\"","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport tinycolor from \"tinycolor2\";\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\n\nimport { Chrome } from \"vue-color\";\nimport { Prop } from \"vue-property-decorator\";\n\n@Component<ColorPicker>({\n    components: {\n        \"chrome-picker\": Chrome,\n    },\n})\nexport default class ColorPicker extends Vue {\n    @Prop(String) color!: string;\n    @Prop(Boolean) disabled!: boolean;\n\n    display = false;\n    left = 0;\n    top = 0;\n    transparent = false;\n\n    mounted() {\n        this.transparent = (<any>this.$refs.chromePicker).val.rgba.a === 0;\n        this.setPosition();\n    }\n\n    open() {\n        if (this.display || this.disabled) return; // click on the picker itself\n        this.setPosition();\n        this.display = true;\n        this.$nextTick(() => this.$children[0].$el.focus());\n    }\n    updateColor(value: { rgba: { r: number; g: number; b: number; a: number } }) {\n        this.transparent = value.rgba.a === 0;\n        const newColor = tinycolor(value.rgba).toRgbString();\n        this.$emit(\"update:color\", newColor);\n        this.$emit(\"input\", newColor);\n    }\n    closePicker() {\n        this.display = false;\n        this.$emit(\"change\", this.color);\n    }\n    setPosition() {\n        const rect = this.$el.getBoundingClientRect();\n        // 224 is the width of the picker, 242 the height\n        if (rect.right + 224 > window.innerWidth) this.left = rect.left - 224;\n        else this.left = rect.right;\n        if (rect.bottom + 242 > window.innerHeight) this.top = rect.top - 242;\n        else this.top = rect.bottom;\n    }\n}\n","import { render, staticRenderFns } from \"./game.vue?vue&type=template&id=05b88da7&scoped=true&\"\nimport script from \"./game.vue?vue&type=script&lang=ts&\"\nexport * from \"./game.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./game.vue?vue&type=style&index=0&lang=css&\"\nimport style1 from \"./game.vue?vue&type=style&index=1&id=05b88da7&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"05b88da7\",\n  null\n  \n)\n\ncomponent.options.__file = \"game.vue\"\nexport default component.exports","import io from \"socket.io-client\";\nimport { Route } from \"vue-router\";\n\nexport const socket = io(location.protocol + \"//\" + location.host + \"/planarally\", { autoConnect: false });\n\nexport function createConnection(route: Route) {\n    socket.io.opts.query = `user=${route.params.creator}&room=${route.params.room}`;\n    socket.connect();\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\n\nimport AssetContextMenu from \"@/assetManager/contextMenu.vue\";\nimport ConfirmDialog from \"@/core/components/modals/confirm.vue\";\nimport Prompt from \"@/core/components/modals/prompt.vue\";\n\nimport { socket } from \"@/assetManager/socket\";\nimport { assetStore } from \"@/assetManager/store\";\nimport { Asset } from \"@/core/comm/types\";\nimport { uuidv4 } from \"@/core/utils\";\n\n@Component({\n    components: {\n        Prompt,\n        ConfirmDialog,\n        AssetContextMenu,\n    },\n    beforeRouteEnter(to, from, next) {\n        socket.connect();\n        next();\n    },\n    beforeRouteLeave(to, from, next) {\n        socket.disconnect();\n        next();\n    },\n})\nexport default class AssetManager extends Vue {\n    path: number[] = [];\n    draggingSelection = false;\n\n    get folders(): number[] {\n        return assetStore.folders;\n    }\n\n    get files(): number[] {\n        return assetStore.files;\n    }\n\n    get selected(): number[] {\n        return assetStore.selected;\n    }\n\n    get idMap() {\n        return assetStore.idMap;\n    }\n\n    get currentFolder(): number {\n        if (this.path.length) return this.path[this.path.length - 1];\n        return assetStore.root;\n    }\n    get parentFolder(): number {\n        let parent = this.path[this.path.length - 2];\n        if (parent === undefined) parent = assetStore.root;\n        return parent;\n    }\n    get firstSelectedFile(): Asset | null {\n        for (const sel of assetStore.selected) {\n            if (assetStore.idMap.get(sel)!.file_hash) {\n                return assetStore.idMap.get(sel)!;\n            }\n        }\n        return null;\n    }\n    changeDirectory(nextFolder: number) {\n        if (nextFolder < 0) this.path.pop();\n        else this.path.push(nextFolder);\n        assetStore.clearSelected();\n        socket.emit(\"Folder.Get\", this.currentFolder);\n    }\n    createDirectory() {\n        const name = window.prompt(\"New folder name\");\n        if (name !== null) {\n            socket.emit(\"Folder.Create\", { name, parent: this.currentFolder });\n        }\n    }\n    moveInode(inode: number, target: number) {\n        if (assetStore.files.includes(inode)) assetStore.files.splice(assetStore.files.indexOf(inode), 1);\n        else assetStore.folders.splice(assetStore.folders.indexOf(inode), 1);\n        assetStore.idMap.delete(inode);\n        socket.emit(\"Inode.Move\", { inode, target });\n    }\n    select(event: MouseEvent, inode: number) {\n        if (event.shiftKey && assetStore.selected.length > 0) {\n            const inodes = [...assetStore.files, ...assetStore.folders];\n            const start = inodes.indexOf(assetStore.selected[assetStore.selected.length - 1]);\n            const end = inodes.indexOf(inode);\n            for (let i = start; i !== end; start < end ? i++ : i--) {\n                if (i === start) continue;\n                assetStore.selected.push(inodes[i]);\n            }\n            assetStore.selected.push(inodes[end]);\n        } else {\n            if (!event.ctrlKey) {\n                assetStore.clearSelected();\n            }\n            assetStore.selected.push(inode);\n        }\n    }\n    startDrag(event: DragEvent, file: number) {\n        if (event.dataTransfer === null) return;\n        event.dataTransfer.setData(\"Hack\", \"ittyHack\");\n        event.dataTransfer.dropEffect = \"move\";\n        if (!assetStore.selected.includes(file)) assetStore.selected.push(file);\n        this.draggingSelection = true;\n    }\n    moveDrag(event: DragEvent) {\n        if ((<HTMLElement>event.target).classList.contains(\"folder\"))\n            (<HTMLElement>event.target).classList.add(\"inode-selected\");\n    }\n    leaveDrag(event: DragEvent) {\n        if ((<HTMLElement>event.target).classList.contains(\"folder\"))\n            (<HTMLElement>event.target).classList.remove(\"inode-selected\");\n    }\n    stopDrag(event: DragEvent, target: number) {\n        (<HTMLElement>event.target).classList.remove(\"inode-selected\");\n        if (this.draggingSelection) {\n            if (\n                (target === assetStore.root || assetStore.folders.includes(target)) &&\n                !assetStore.selected.includes(target)\n            ) {\n                for (const inode of assetStore.selected) {\n                    this.moveInode(inode, target);\n                }\n            }\n            assetStore.clearSelected();\n        } else if (event.dataTransfer && event.dataTransfer.files.length > 0) {\n            this.upload(event.dataTransfer.files, target);\n        }\n        this.draggingSelection = false;\n    }\n    prepareUpload() {\n        document.getElementById(\"files\")!.click();\n    }\n    upload(fls?: FileList, target?: number) {\n        const files = (<HTMLInputElement>document.getElementById(\"files\")!).files;\n        if (fls === undefined) {\n            if (files) fls = files;\n            else return;\n        }\n        if (target === undefined) target = this.currentFolder;\n        const CHUNK_SIZE = 100000;\n        for (const file of fls) {\n            const uuid = uuidv4();\n            const slices = Math.ceil(file.size / CHUNK_SIZE);\n            for (let slice = 0; slice < slices; slice++) {\n                const fr = new FileReader();\n                fr.readAsArrayBuffer(\n                    file.slice(\n                        slice * CHUNK_SIZE,\n                        slice * CHUNK_SIZE + Math.min(CHUNK_SIZE, file.size - slice * CHUNK_SIZE),\n                    ),\n                );\n                fr.onload = e => {\n                    socket.emit(\"Asset.Upload\", {\n                        name: file.name,\n                        directory: target,\n                        data: fr.result,\n                        slice,\n                        totalSlices: slices,\n                        uuid,\n                    });\n                };\n            }\n        }\n    }\n}\n","import { render, staticRenderFns } from \"./asset_node.vue?vue&type=template&id=6d718094&scoped=true&\"\nimport script from \"./asset_node.vue?vue&type=script&lang=ts&\"\nexport * from \"./asset_node.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./asset_node.vue?vue&type=style&index=0&id=6d718094&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6d718094\",\n  null\n  \n)\n\ncomponent.options.__file = \"asset_node.vue\"\nexport default component.exports","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./selectcontext.vue?vue&type=style&index=0&id=44a31e42&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./selectcontext.vue?vue&type=style&index=0&id=44a31e42&scoped=true&lang=css&\"","import { render, staticRenderFns } from \"./login.vue?vue&type=template&id=bc30fc14&scoped=true&\"\nimport script from \"./login.vue?vue&type=script&lang=ts&\"\nexport * from \"./login.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./login.vue?vue&type=style&index=0&id=bc30fc14&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"bc30fc14\",\n  null\n  \n)\n\ncomponent.options.__file = \"login.vue\"\nexport default component.exports","import { layerManager } from \"@/game/layers/manager\";\nimport { g2lx, g2ly } from \"@/game/units\";\nimport { EdgeIterator, TDS } from \"./tds\";\nimport { ccw, cw } from \"./triag\";\n\nexport function drawPolygon(polygon: number[][], colour?: string) {\n    const dl = layerManager.getLayer(\"draw\");\n    if (dl === undefined) return;\n    const ctx = dl.ctx;\n    ctx.lineJoin = \"round\";\n    // ctx.clearRect(0, 0, window.innerWidth, window.innerHeight);\n    ctx.lineJoin = \"round\";\n    ctx.beginPath();\n    ctx.strokeStyle =\n        colour === undefined ? `rgb(${Math.random() * 255}, ${Math.random() * 255}, ${Math.random() * 255})` : colour;\n    ctx.moveTo(g2lx(polygon[0][0]), g2ly(polygon[0][1]));\n    for (const point of polygon) {\n        ctx.lineTo(g2lx(point[0]), g2ly(point[1]));\n    }\n    ctx.closePath();\n    ctx.stroke();\n}\n\nexport function drawPolygonL(polygon: number[][], colour?: string) {\n    const dl = layerManager.getLayer(\"draw\");\n    if (dl === undefined) return;\n    const ctx = dl.ctx;\n    ctx.lineJoin = \"round\";\n    // ctx.clearRect(0, 0, window.innerWidth, window.innerHeight);\n    ctx.lineJoin = \"round\";\n    ctx.beginPath();\n    ctx.strokeStyle =\n        colour === undefined ? `rgb(${Math.random() * 255}, ${Math.random() * 255}, ${Math.random() * 255})` : colour;\n    ctx.moveTo(polygon[0][0], polygon[0][1]);\n    for (const point of polygon) {\n        ctx.lineTo(point[0], point[1]);\n    }\n    ctx.closePath();\n    ctx.stroke();\n}\n\nfunction x(xx: number, local: boolean) {\n    if (local) return xx;\n    else return g2lx(xx);\n}\n\nfunction y(yy: number, local: boolean) {\n    if (local) return yy;\n    else return g2ly(yy);\n}\n\nlet I = 0;\nlet J = 0;\n\nfunction drl(ctx: CanvasRenderingContext2D, from: number[], to: number[], constrained: boolean, local: boolean) {\n    // J++;\n    // if (constrained) {\n    //     I++;\n    //     console.log(\"*\", from, to);\n    // } else {\n    //     console.log(\" \", from, to);\n    // }\n    ctx.beginPath();\n    ctx.strokeStyle = constrained ? \"rgba(255, 0, 0, 0.30)\" : \"rgba(0, 0, 0, 0.30)\";\n    ctx.moveTo(x(from[0], local), y(from[1], local));\n    ctx.lineTo(x(to[0], local), y(to[1], local));\n    ctx.closePath();\n    ctx.stroke();\n}\n\nfunction drawPolygonT(tds: TDS, local = true, clear = true, logs: 0 | 1 | 2 = 0) {\n    I = 0;\n    J = 0;\n    let T = 0;\n    const dl = layerManager.getLayer(\"draw\");\n    if (dl === undefined) return;\n    const ctx = dl.ctx;\n    if (clear) ctx.clearRect(0, 0, 2000, 1000);\n    ctx.lineJoin = \"round\";\n    // ctx.clearRect(0, 0, window.innerWidth, window.innerHeight);\n    ctx.lineJoin = \"round\";\n    const ei = new EdgeIterator(tds);\n    while (ei.valid) {\n        ei.next();\n        ei.collect();\n    }\n    ei.collect();\n    do {\n        const fromP = ei.edge.first!.vertices[ccw(ei.edge.second)]!.point!;\n        const toP = ei.edge.first!.vertices[cw(ei.edge.second)]!.point!;\n        if (logs > 0) {\n            if (fromP[0] === -Infinity || toP[0] === -Infinity) {\n                ei.next();\n                continue;\n            }\n            J++;\n            if (ei.edge.first!.constraints[ei.edge.second]) {\n                I++;\n                if (logs === 2) console.log(`Edge: (*) ${fromP} > ${toP}`);\n            } else if (logs === 2) console.log(`Edge: ${fromP} > ${toP}`);\n        }\n        do {\n            ei.next();\n            ei.collect();\n        } while (ei.valid);\n    } while (ei.pos !== null);\n    for (const t of tds.triangles) {\n        if (t.isInfinite()) continue;\n        T++;\n        const po = [];\n        ctx.fillStyle = \"red\";\n        if (t.vertices[0] !== undefined) {\n            po.push(t.vertices[0]!.point);\n            ctx.beginPath();\n            ctx.arc(x(t.vertices[0]!.point![0], local), y(t.vertices[0]!.point![1], local), 5, 0, 2 * Math.PI);\n            ctx.closePath();\n            ctx.fill();\n        }\n        if (t.vertices[1] !== undefined) {\n            po.push(t.vertices[1]!.point);\n            ctx.arc(x(t.vertices[1]!.point![0], local), y(t.vertices[1]!.point![1], local), 5, 0, 2 * Math.PI);\n            ctx.closePath();\n            ctx.fill();\n        }\n        if (t.vertices[2] !== undefined) {\n            po.push(t.vertices[2]!.point);\n            ctx.arc(x(t.vertices[2]!.point![0], local), y(t.vertices[2]!.point![1], local), 5, 0, 2 * Math.PI);\n            ctx.closePath();\n            ctx.fill();\n        }\n        if (logs === 2) console.log(\"[T] \", ...po, t.constraints);\n\n        ctx.moveTo(x(t.vertices[0]!.point![0], local), y(t.vertices[0]!.point![1], local));\n        if (t.vertices[0] !== undefined && t.vertices[1] !== undefined)\n            drl(ctx, t.vertices[0]!.point!, t.vertices[1]!.point!, t.constraints[2], local);\n        if (t.vertices[1] !== undefined && t.vertices[2] !== undefined)\n            drl(ctx, t.vertices[1]!.point!, t.vertices[2]!.point!, t.constraints[0], local);\n        if (t.vertices[2] !== undefined && t.vertices[0] !== undefined)\n            drl(ctx, t.vertices[2]!.point!, t.vertices[0]!.point!, t.constraints[1], local);\n    }\n    if (logs > 0) {\n        console.log(`Edges: ${I}/${J}`);\n        console.log(`Faces: ${T}`);\n    }\n}\n\n(<any>window).DP = drawPolygon;\n(<any>window).DPL = drawPolygonL;\n(<any>window).DPT = drawPolygonT;\n","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tool.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tool.vue?vue&type=style&index=0&lang=css&\"","import * as tinycolor from \"tinycolor2\";\n\nimport { calcFontScale } from \"@/core/utils\";\nimport { InitiativeData } from \"@/game/comm/types/general\";\nimport { ServerCircularToken } from \"@/game/comm/types/shapes\";\nimport { GlobalPoint } from \"@/game/geom\";\nimport { Circle } from \"@/game/shapes/circle\";\nimport { gameStore } from \"@/game/store\";\nimport { g2l, g2lz } from \"@/game/units\";\n\nexport class CircularToken extends Circle {\n    type = \"circulartoken\";\n    text: string;\n    font: string;\n    constructor(\n        center: GlobalPoint,\n        r: number,\n        text: string,\n        font: string,\n        fillColour?: string,\n        strokeColour?: string,\n        uuid?: string,\n    ) {\n        super(center, r, fillColour, strokeColour, uuid);\n        this.text = text;\n        this.font = font;\n    }\n    asDict(): ServerCircularToken {\n        return Object.assign(this.getBaseDict(), {\n            radius: this.r,\n            text: this.text,\n            font: this.font,\n        });\n    }\n    fromDict(data: ServerCircularToken) {\n        super.fromDict(data);\n        this.r = data.radius;\n        this.text = data.text;\n        this.font = data.font;\n    }\n    draw(ctx: CanvasRenderingContext2D) {\n        super.draw(ctx);\n        ctx.font = this.font;\n        ctx.save();\n        const dest = g2l(this.center());\n        ctx.textAlign = \"center\";\n        ctx.textBaseline = \"middle\";\n        const xs = calcFontScale(ctx, this.text, g2lz(this.r), g2lz(this.r));\n        const ys = 0;\n        ctx.transform(xs, ys, -ys, xs, dest.x, dest.y);\n        ctx.fillStyle = tinycolor.mostReadable(this.fillColour, [\"#000\", \"#fff\"]).toHexString();\n        ctx.fillText(this.text, 0, 0);\n        ctx.restore();\n    }\n    getInitiativeRepr(): InitiativeData {\n        return {\n            uuid: this.uuid,\n            visible: !gameStore.IS_DM,\n            group: false,\n            source: this.name === \"\" || this.name === \"Unknown shape\" ? this.text : this.name,\n            has_img: false,\n            effects: [],\n            index: Infinity,\n        };\n    }\n}\n","import { GlobalPoint, LocalPoint } from \"@/game/geom\";\nimport { Layer } from \"@/game/layers/layer\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { Rect } from \"@/game/shapes/rect\";\nimport { Text } from \"@/game/shapes/text\";\nimport { gameStore } from \"@/game/store\";\nimport { l2g } from \"@/game/units\";\n\nexport class AnnotationManager {\n    annotationText: Text;\n    annotationRect: Rect;\n    layer: Layer | undefined;\n    shown: boolean = false;\n\n    constructor() {\n        const origin = new GlobalPoint(0, 0);\n        this.annotationText = new Text(origin, \"\", \"bold 20px serif\", 0, \"rgba(230, 230, 230, 1)\");\n        this.annotationRect = new Rect(origin, 0, 0, \"rgba(0, 0, 0, 0.6)\");\n    }\n\n    setActiveText(text: string) {\n        if (this.layer === undefined) {\n            if (layerManager.hasLayer(\"draw\")) {\n                this.layer = layerManager.getLayer(\"draw\")!;\n                this.layer.addShape(this.annotationRect, false);\n                this.layer.addShape(this.annotationText, false);\n            } else {\n                console.warn(\"There is no draw layer to draw annotations on!\");\n                return;\n            }\n        }\n        this.shown = text !== \"\";\n        this.annotationText.refPoint = l2g(new LocalPoint(this.layer.canvas.width / 2, 50));\n        this.annotationText.text = text;\n        const width = this.shown ? this.annotationText.getMaxWidth(this.layer.ctx) + 10 : 0;\n        const height = this.shown ? this.annotationText.getMaxHeight(this.layer.ctx) + 10 : 0;\n        this.annotationRect.refPoint = l2g(new LocalPoint(this.layer.canvas.width / 2 - width / 2, 30));\n        this.annotationRect.w = width / gameStore.zoomFactor;\n        this.annotationRect.h = height / gameStore.zoomFactor;\n        this.layer.invalidate(true);\n    }\n}\n","import { render, staticRenderFns } from \"./menu.vue?vue&type=template&id=aaf3f05e&scoped=true&\"\nimport script from \"./menu.vue?vue&type=script&lang=ts&\"\nexport * from \"./menu.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./menu.vue?vue&type=style&index=0&id=aaf3f05e&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"aaf3f05e\",\n  null\n  \n)\n\ncomponent.options.__file = \"menu.vue\"\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.selected)?_c('div',{staticClass:\"tool-detail\",style:({'--detailRight': _vm.detailRight, '--detailArrow': _vm.detailArrow})},[_c('div',{staticClass:\"label\",class:{disabled: _vm.$store.state.game.filterNoLabel}},[_c('div',{staticClass:\"label-main\",on:{\"click\":_vm.toggleUnlabeled}},[_vm._v(\"Unlabeled\")])]),_vm._l((_vm.labels()),function(ref){\nvar uuid = ref[0];\nvar label = ref[1];\nreturn [_c('div',{key:uuid,staticClass:\"label\",class:{disabled: _vm.isFilter(uuid)}},[(label.name[0] !== ':')?[_c('div',{staticClass:\"label-user\"},[_vm._v(_vm._s(label.name.split(\":\")[0]))]),_c('div',{staticClass:\"label-main\",on:{\"click\":function($event){_vm.toggleFilter(uuid)}}},[_vm._v(_vm._s(label.name.split(\":\").splice(1).join(\":\")))])]:_vm._e(),(label.name[0] === ':')?[_c('div',{staticClass:\"label-main\",on:{\"click\":function($event){_vm.toggleFilter(uuid)}}},[_vm._v(_vm._s(label.name.slice(1)))])]:_vm._e()],2)]})],2):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"74f43d04-vue-loader-template\\\"}!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./filter.vue?vue&type=template&id=4c62cd6c&scoped=true&\"","import { render, staticRenderFns } from \"./contextmenu.vue?vue&type=template&id=256dde9c&\"\nimport script from \"./contextmenu.vue?vue&type=script&lang=ts&\"\nexport * from \"./contextmenu.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./contextmenu.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"contextmenu.vue\"\nexport default component.exports","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./note.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./note.vue?vue&type=script&lang=ts&\"","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--12-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./login.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--12-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./login.vue?vue&type=script&lang=ts&\"","import {\n    ServerAsset,\n    ServerCircle,\n    ServerCircularToken,\n    ServerLine,\n    ServerMultiLine,\n    ServerPolygon,\n    ServerRect,\n    ServerShape,\n    ServerText,\n} from \"@/game/comm/types/shapes\";\nimport { GlobalPoint } from \"@/game/geom\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { Asset } from \"@/game/shapes/asset\";\nimport { Circle } from \"@/game/shapes/circle\";\nimport { CircularToken } from \"@/game/shapes/circulartoken\";\nimport { Line } from \"@/game/shapes/line\";\nimport { MultiLine } from \"@/game/shapes/multiline\";\nimport { Rect } from \"@/game/shapes/rect\";\nimport { Shape } from \"@/game/shapes/shape\";\nimport { Text } from \"@/game/shapes/text\";\nimport { Polygon } from \"./polygon\";\n\nexport function createShapeFromDict(shape: ServerShape) {\n    let sh: Shape;\n\n    // A fromJSON and toJSON on Shape would be cleaner but ts does not allow for static abstracts so yeah.\n\n    // Shape Type specifics\n\n    const refPoint = new GlobalPoint(shape.x, shape.y);\n    if (shape.type_ === \"rect\") {\n        const rect = <ServerRect>shape;\n        sh = new Rect(refPoint, rect.width, rect.height, rect.fill_colour, rect.stroke_colour, rect.uuid);\n    } else if (shape.type_ === \"circle\") {\n        const circ = <ServerCircle>shape;\n        sh = new Circle(refPoint, circ.radius, circ.fill_colour, circ.stroke_colour, circ.uuid);\n    } else if (shape.type_ === \"circulartoken\") {\n        const token = <ServerCircularToken>shape;\n        sh = new CircularToken(\n            refPoint,\n            token.radius,\n            token.text,\n            token.font,\n            token.fill_colour,\n            token.stroke_colour,\n            token.uuid,\n        );\n    } else if (shape.type_ === \"line\") {\n        const line = <ServerLine>shape;\n        sh = new Line(refPoint, new GlobalPoint(line.x2, line.y2), line.line_width, line.stroke_colour, line.uuid);\n    } else if (shape.type_ === \"multiline\") {\n        const multiline = <ServerMultiLine>shape;\n        sh = new MultiLine(\n            refPoint,\n            multiline.points.map(p => new GlobalPoint(p.x, p.y)),\n            multiline.line_width,\n            multiline.stroke_colour,\n            multiline.uuid,\n        );\n    } else if (shape.type_ === \"polygon\") {\n        const polygon = <ServerPolygon>shape;\n        sh = new Polygon(\n            refPoint,\n            polygon.vertices.map(v => new GlobalPoint(v.x, v.y)),\n            polygon.fill_colour,\n            polygon.stroke_colour,\n            polygon.uuid,\n        );\n    } else if (shape.type_ === \"text\") {\n        const text = <ServerText>shape;\n        sh = new Text(refPoint, text.text, text.font, text.angle, text.fill_colour, text.stroke_colour, text.uuid);\n    } else if (shape.type_ === \"assetrect\") {\n        const asset = <ServerAsset>shape;\n        const img = new Image(asset.width, asset.height);\n        if (asset.src.startsWith(\"http\")) img.src = new URL(asset.src).pathname;\n        else img.src = asset.src;\n        sh = new Asset(img, refPoint, asset.width, asset.height, asset.uuid);\n        img.onload = () => {\n            layerManager.getLayer(shape.layer)!.invalidate(false);\n        };\n    } else {\n        return undefined;\n    }\n    sh.fromDict(shape);\n    return sh;\n}\n","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./confirm.vue?vue&type=style&index=0&id=1883e207&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./confirm.vue?vue&type=style&index=0&id=1883e207&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('SelectContext',{ref:\"selectcontext\"})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"74f43d04-vue-loader-template\\\"}!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./select.vue?vue&type=template&id=048b3482&\"","import tinycolor from \"tinycolor2\";\n\nimport { uuidv4 } from \"@/core/utils\";\nimport { socket } from \"@/game/api/socket\";\nimport { aurasFromServer, aurasToServer } from \"@/game/comm/conversion/aura\";\nimport { InitiativeData } from \"@/game/comm/types/general\";\nimport { ServerShape } from \"@/game/comm/types/shapes\";\nimport { GlobalPoint, LocalPoint, Vector } from \"@/game/geom\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { BoundingRect } from \"@/game/shapes/boundingrect\";\nimport { gameStore } from \"@/game/store\";\nimport { g2l, g2lr, g2lx, g2ly, g2lz } from \"@/game/units\";\n\nexport abstract class Shape {\n    // Used to create class instance from server shape data\n    abstract readonly type: string;\n    // The unique ID of this shape\n    readonly uuid: string;\n    // The layer the shape is currently on\n    layer!: string;\n\n    // A reference point regarding that specific shape's structure\n    protected _refPoint: GlobalPoint;\n\n    // Fill colour of the shape\n    fillColour: string = \"#000\";\n    strokeColour: string = \"rgba(0,0,0,0)\";\n    // The optional name associated with the shape\n    name = \"Unknown shape\";\n    nameVisible = true;\n\n    // Associated trackers/auras/owners\n    trackers: Tracker[] = [];\n    auras: Aura[] = [];\n    labels: Label[] = [];\n    protected _owners: string[] = [];\n\n    // Block light sources\n    visionObstruction = false;\n    // Prevent shapes from overlapping with this shape\n    movementObstruction = false;\n    // Does this shape represent a playable token\n    isToken = false;\n    // Show a highlight box\n    showHighlight = false;\n\n    // Mouseover annotation\n    annotation: string = \"\";\n\n    // Draw modus to use\n    globalCompositeOperation: string = \"source-over\";\n\n    // Additional options for specialized uses\n    options: Map<string, any> = new Map();\n\n    constructor(refPoint: GlobalPoint, fillColour?: string, strokeColour?: string, uuid?: string) {\n        this._refPoint = refPoint;\n        this.uuid = uuid || uuidv4();\n        if (fillColour !== undefined) this.fillColour = fillColour;\n        if (strokeColour !== undefined) this.strokeColour = strokeColour;\n    }\n\n    get refPoint() {\n        return this._refPoint;\n    }\n    set refPoint(point: GlobalPoint) {\n        this._refPoint = point;\n    }\n\n    abstract getBoundingBox(): BoundingRect;\n\n    // If inWorldCoord is\n    abstract contains(point: GlobalPoint): boolean;\n\n    abstract center(): GlobalPoint;\n    abstract center(centerPoint: GlobalPoint): void;\n    visibleInCanvas(canvas: HTMLCanvasElement): boolean {\n        // for (const aura of this.auras) {\n        //     if (aura.value > 0) {\n        //         const auraCircle = new Circle(this.center(), aura.value);\n        //         if (auraCircle.visibleInCanvas(canvas)) return true;\n        //     }\n        // }\n        return false;\n    }\n\n    // Code to snap a shape to the grid\n    // This is shape dependent as the shape refPoints are shape specific in\n    abstract snapToGrid(): void;\n    abstract resizeToGrid(): void;\n    abstract resize(resizePoint: number, point: LocalPoint): void;\n\n    abstract get points(): number[][];\n\n    getPointIndex(p: GlobalPoint, delta = 0): number {\n        for (const [idx, point] of this.points.entries()) {\n            if (Math.abs(p.x - point[0]) <= delta && Math.abs(p.y - point[1]) <= delta) return idx;\n        }\n        return -1;\n    }\n\n    getPointOrientation(i: number): Vector {\n        const prev = GlobalPoint.fromArray(this.points[(this.points.length + i - 1) % this.points.length]);\n        const point = GlobalPoint.fromArray(this.points[i]);\n        const next = GlobalPoint.fromArray(this.points[(i + 1) % this.points.length]);\n        const vec = next.subtract(prev);\n        const mid = prev.add(vec.multiply(0.5));\n        return point.subtract(mid).normalize();\n    }\n\n    invalidate(skipLightUpdate: boolean) {\n        const l = layerManager.getLayer(this.layer);\n        if (l) l.invalidate(skipLightUpdate);\n    }\n\n    checkVisionSources(recalculate = true) {\n        const self = this;\n        const obstructionIndex = gameStore.visionBlockers.indexOf(this.uuid);\n        let update = false;\n        if (this.visionObstruction && obstructionIndex === -1) {\n            gameStore.visionBlockers.push(this.uuid);\n            update = true;\n        } else if (!this.visionObstruction && obstructionIndex >= 0) {\n            gameStore.visionBlockers.splice(obstructionIndex, 1);\n            update = true;\n        }\n        if (update && recalculate) gameStore.recalculateVision();\n\n        // Check if the visionsource auras are in the gameManager\n        this.auras.forEach(au => {\n            const ls = gameStore.visionSources;\n            const i = ls.findIndex(o => o.aura === au.uuid);\n            if (au.visionSource && i === -1) {\n                ls.push({ shape: self.uuid, aura: au.uuid });\n            } else if (!au.visionSource && i >= 0) {\n                ls.splice(i, 1);\n            }\n        });\n        // Check if anything in the gameManager referencing this shape is in fact still a visionsource\n        for (let i = gameStore.visionSources.length - 1; i >= 0; i--) {\n            const ls = gameStore.visionSources[i];\n            if (ls.shape === self.uuid) {\n                if (!self.auras.some(a => a.uuid === ls.aura && a.visionSource)) gameStore.visionSources.splice(i, 1);\n            }\n        }\n    }\n\n    setMovementBlock(blocksMovement: boolean, recalculate = true) {\n        this.movementObstruction = blocksMovement || false;\n        const obstructionIndex = gameStore.movementblockers.indexOf(this.uuid);\n        let update = false;\n        if (this.movementObstruction && obstructionIndex === -1) {\n            gameStore.movementblockers.push(this.uuid);\n            update = true;\n        } else if (!this.movementObstruction && obstructionIndex >= 0) {\n            gameStore.movementblockers.splice(obstructionIndex, 1);\n            update = true;\n        }\n        if (update && recalculate) gameStore.recalculateMovement();\n    }\n\n    setIsToken(isToken: boolean) {\n        this.isToken = isToken;\n        if (this.ownedBy()) {\n            const i = gameStore.ownedtokens.indexOf(this.uuid);\n            if (this.isToken && i === -1) gameStore.ownedtokens.push(this.uuid);\n            else if (!this.isToken && i >= 0) gameStore.ownedtokens.splice(i, 1);\n        }\n    }\n\n    abstract asDict(): ServerShape;\n    getBaseDict(): ServerShape {\n        return {\n            type_: this.type,\n            uuid: this.uuid,\n            x: this.refPoint.x,\n            y: this.refPoint.y,\n            layer: this.layer,\n            draw_operator: this.globalCompositeOperation,\n            movement_obstruction: this.movementObstruction,\n            vision_obstruction: this.visionObstruction,\n            auras: aurasToServer(this.auras),\n            trackers: this.trackers,\n            labels: this.labels,\n            owners: this._owners,\n            fill_colour: this.fillColour,\n            stroke_colour: this.strokeColour,\n            name: this.name,\n            name_visible: this.nameVisible,\n            annotation: this.annotation,\n            is_token: this.isToken,\n            options: JSON.stringify([...this.options]),\n        };\n    }\n    fromDict(data: ServerShape) {\n        this.layer = data.layer;\n        this.globalCompositeOperation = data.draw_operator;\n        this.movementObstruction = data.movement_obstruction;\n        this.visionObstruction = data.vision_obstruction;\n        this.auras = aurasFromServer(data.auras);\n        this.trackers = data.trackers;\n        this.labels = data.labels;\n        this._owners = data.owners;\n        this.isToken = data.is_token;\n        this.nameVisible = data.name_visible;\n        if (data.annotation) this.annotation = data.annotation;\n        if (data.name) this.name = data.name;\n        if (data.options) this.options = new Map(JSON.parse(data.options));\n    }\n\n    draw(ctx: CanvasRenderingContext2D) {\n        if (this.globalCompositeOperation !== undefined) ctx.globalCompositeOperation = this.globalCompositeOperation;\n        else ctx.globalCompositeOperation = \"source-over\";\n        if (this.showHighlight) {\n            const bbox = this.getBoundingBox();\n            ctx.strokeStyle = \"red\";\n            ctx.strokeRect(g2lx(bbox.topLeft.x) - 5, g2ly(bbox.topLeft.y) - 5, g2lz(bbox.w) + 10, g2lz(bbox.h) + 10);\n        }\n    }\n\n    drawAuras(ctx: CanvasRenderingContext2D) {\n        for (const aura of this.auras) {\n            if (aura.value === 0 && aura.dim === 0) return;\n            ctx.beginPath();\n\n            const loc = g2l(this.center());\n            const innerRange = g2lr(aura.value + aura.dim);\n\n            if (aura.dim === 0) ctx.fillStyle = aura.colour;\n            else {\n                const gradient = ctx.createRadialGradient(\n                    loc.x,\n                    loc.y,\n                    g2lr(aura.value),\n                    loc.x,\n                    loc.y,\n                    g2lr(aura.value + aura.dim),\n                );\n                const tc = tinycolor(aura.colour);\n                ctx.fillStyle = gradient;\n                gradient.addColorStop(0, aura.colour);\n                gradient.addColorStop(1, tc.setAlpha(0).toRgbString());\n            }\n            if (!aura.visionSource || aura.lastPath === undefined) {\n                ctx.arc(loc.x, loc.y, innerRange, 0, 2 * Math.PI);\n                ctx.fill();\n            } else {\n                try {\n                    ctx.fill(aura.lastPath);\n                } catch (e) {\n                    ctx.arc(loc.x, loc.y, innerRange, 0, 2 * Math.PI);\n                    ctx.fill();\n                    console.warn(e);\n                }\n            }\n        }\n    }\n\n    getInitiativeRepr(): InitiativeData {\n        return {\n            uuid: this.uuid,\n            visible: !gameStore.IS_DM,\n            group: false,\n            source: this.name,\n            has_img: false,\n            effects: [],\n            index: Infinity,\n        };\n    }\n\n    moveLayer(layer: string, sync: boolean) {\n        const oldLayer = layerManager.getLayer(this.layer);\n        const newLayer = layerManager.getLayer(layer);\n        if (oldLayer === undefined || newLayer === undefined) return;\n        this.layer = layer;\n        // Update layer shapes\n        oldLayer.shapes.splice(oldLayer.shapes.indexOf(this), 1);\n        newLayer.shapes.push(this);\n        // Revalidate layers  (light should at most be redone once)\n        oldLayer.invalidate(true);\n        newLayer.invalidate(false);\n        // Sync!\n        if (sync) socket.emit(\"Shape.Layer.Change\", { uuid: this.uuid, layer });\n    }\n\n    get owners() {\n        return Object.freeze(this._owners.slice());\n    }\n\n    ownedBy(username?: string) {\n        if (username === undefined) username = gameStore.username;\n        return gameStore.IS_DM || this._owners.includes(username);\n    }\n\n    addOwner(owner: string) {\n        if (!this._owners.includes(owner)) this._owners.push(owner);\n    }\n\n    updateOwner(oldValue: string, newValue: string) {\n        const ownerIndex = this._owners.findIndex(o => o === oldValue);\n        if (ownerIndex >= 0) this._owners.splice(ownerIndex, 1, newValue);\n        else this.addOwner(newValue);\n    }\n\n    removeOwner(owner: string) {\n        const ownerIndex = this._owners.findIndex(o => o === owner);\n        this._owners.splice(ownerIndex, 1);\n    }\n}\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./prompt.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./prompt.vue?vue&type=script&lang=ts&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.note !== null)?_c('modal',{attrs:{\"visible\":_vm.visible,\"mask\":false},on:{\"close\":function($event){_vm.visible = false}},scopedSlots:_vm._u([{key:\"header\",fn:function(m){return _c('div',{staticClass:\"modal-header\",attrs:{\"draggable\":\"true\"},on:{\"dragstart\":m.dragStart,\"dragend\":m.dragEnd}},[_c('span',{on:{\"click\":function($event){_vm.$refs.title.select()}}},[_c('i',{staticClass:\"fas fa-pencil-alt\",staticStyle:{\"font-size\":\"15px\"}})]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.note.title),expression:\"note.title\"}],ref:\"title\",domProps:{\"value\":(_vm.note.title)},on:{\"change\":_vm.updateNote,\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.note, \"title\", $event.target.value)}}}),_c('div',{staticClass:\"header-close\",on:{\"click\":function($event){_vm.visible = false}}},[_c('i',{staticClass:\"far fa-window-close\"})])])}}])},[_c('div',{staticClass:\"modal-body\"},[_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.note.text),expression:\"note.text\"}],ref:\"textarea\",style:({'height': _vm.calcHeight()}),domProps:{\"value\":(_vm.note.text)},on:{\"change\":_vm.updateNote,\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.note, \"text\", $event.target.value)}}})]),_c('div',{staticClass:\"modal-footer\"},[_c('button',{on:{\"click\":_vm.removeNote}},[_c('i',{staticClass:\"far fa-trash-alt\"}),_vm._v(\" Remove\\n    \")])])]):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"74f43d04-vue-loader-template\\\"}!../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./note.vue?vue&type=template&id=7a3669fd&scoped=true&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./modal.vue?vue&type=style&index=0&id=12ed61ba&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./modal.vue?vue&type=style&index=0&id=12ed61ba&scoped=true&lang=css&\"","\n\n\n\n\nimport Component from \"vue-class-component\";\n\nimport SelectContext from \"@/game/ui/tools/selectcontext.vue\";\nimport Tool from \"@/game/ui/tools/tool.vue\";\nimport SelectionInfo from \"../selection/selection_info.vue\";\n\nimport { getRef } from \"@/core/utils\";\nimport { socket } from \"@/game/api/socket\";\nimport { GlobalPoint, LocalPoint, Ray, Vector } from \"@/game/geom\";\nimport { Layer } from \"@/game/layers/layer\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { Rect } from \"@/game/shapes/rect\";\nimport { gameStore } from \"@/game/store\";\nimport { calculateDelta } from \"@/game/ui/tools/utils\";\nimport { g2l, g2lr, g2lx, g2ly, g2lz, l2g, l2gz } from \"@/game/units\";\nimport { getMouse } from \"@/game/utils\";\n\nexport enum SelectOperations {\n    Noop,\n    Resize,\n    Drag,\n    GroupSelect,\n}\n\nconst start = new GlobalPoint(-1000, -1000);\n\n@Component({\n    components: {\n        SelectContext,\n    },\n})\nexport default class SelectTool extends Tool {\n    name = \"Select\";\n    showContextMenu = false;\n    active = false;\n\n    mode = SelectOperations.Noop;\n    resizePoint = 0;\n    deltaChanged = false;\n    // Because we never drag from the asset's (0, 0) coord and want a smoother drag experience\n    // we keep track of the actual offset within the asset.\n    dragRay = new Ray<LocalPoint>(new LocalPoint(0, 0), new Vector(0, 0));\n    selectionStartPoint = start;\n    selectionHelper = new Rect(start, 0, 0);\n    created() {\n        this.selectionHelper.globalCompositeOperation = \"source-over\";\n    }\n    onMouseDown(event: MouseEvent) {\n        const layer = layerManager.getLayer();\n        if (layer === undefined) {\n            console.log(\"No active layer!\");\n            return;\n        }\n\n        if (!this.selectionHelper.owners.includes(gameStore.username)) {\n            this.selectionHelper.addOwner(gameStore.username);\n        }\n\n        const mouse = getMouse(event);\n        const globalMouse = l2g(mouse);\n\n        let hit = false;\n        // The selectionStack allows for lower positioned objects that are selected to have precedence during overlap.\n        let selectionStack;\n        if (!layer.selection.length) selectionStack = layer.shapes;\n        else selectionStack = layer.shapes.concat(layer.selection);\n        for (let i = selectionStack.length - 1; i >= 0; i--) {\n            const shape = selectionStack[i];\n\n            this.resizePoint = shape.getPointIndex(globalMouse, l2gz(3));\n\n            // Resize case, a corner is selected\n            if (this.resizePoint >= 0) {\n                layer.selection = [shape];\n                getRef<SelectionInfo>(\"selectionInfo\").shape = shape;\n                this.mode = SelectOperations.Resize;\n                layer.invalidate(true);\n                hit = true;\n                break;\n\n                // Drag case, a shape is selected\n            } else if (shape.contains(globalMouse)) {\n                const selection = shape;\n                if (layer.selection.indexOf(selection) === -1) {\n                    layer.selection = [selection];\n                    getRef<SelectionInfo>(\"selectionInfo\").shape = selection;\n                }\n                this.mode = SelectOperations.Drag;\n                const localRefPoint = g2l(selection.refPoint);\n                this.dragRay = new Ray<LocalPoint>(localRefPoint, mouse.subtract(localRefPoint));\n                layer.invalidate(true);\n                hit = true;\n                break;\n            }\n        }\n\n        // GroupSelect case, draw a selection box to select multiple shapes\n        if (!hit) {\n            this.mode = SelectOperations.GroupSelect;\n            for (const selection of layer.selection) getRef<SelectionInfo>(\"selectionInfo\").shape = selection;\n\n            this.selectionStartPoint = globalMouse;\n\n            this.selectionHelper.refPoint = this.selectionStartPoint;\n            this.selectionHelper.w = 0;\n            this.selectionHelper.h = 0;\n\n            layer.selection = [this.selectionHelper];\n            layer.invalidate(true);\n        }\n        this.active = true;\n    }\n    onMouseMove(event: MouseEvent) {\n        // if (!this.active) return;   we require mousemove for the resize cursor\n        const layer = layerManager.getLayer();\n        if (layer === undefined) {\n            console.log(\"No active layer!\");\n            return;\n        }\n        const mouse = getMouse(event);\n        const globalMouse = l2g(mouse);\n        this.deltaChanged = false;\n\n        if (this.mode === SelectOperations.GroupSelect) {\n            // Currently draw on active layer\n            const endPoint = globalMouse;\n\n            this.selectionHelper.w = Math.abs(endPoint.x - this.selectionStartPoint.x);\n            this.selectionHelper.h = Math.abs(endPoint.y - this.selectionStartPoint.y);\n            this.selectionHelper.refPoint = new GlobalPoint(\n                Math.min(this.selectionStartPoint.x, endPoint.x),\n                Math.min(this.selectionStartPoint.y, endPoint.y),\n            );\n            layer.invalidate(true);\n        } else if (layer.selection.length) {\n            const og = g2l(layer.selection[layer.selection.length - 1].refPoint);\n            const origin = og.add(this.dragRay.direction);\n            let delta = mouse.subtract(origin).multiply(1 / gameStore.zoomFactor);\n            const ogDelta = delta;\n            if (this.mode === SelectOperations.Drag) {\n                // If we are on the tokens layer do a movement block check.\n                if (layer.name === \"tokens\" && !(event.shiftKey && gameStore.IS_DM)) {\n                    for (const sel of layer.selection) {\n                        if (!sel.ownedBy()) continue;\n                        if (sel.uuid === this.selectionHelper.uuid) continue; // the selection helper should not be treated as a real shape.\n                        delta = calculateDelta(delta, sel);\n                        if (delta !== ogDelta) this.deltaChanged = true;\n                    }\n                }\n                // Actually apply the delta on all shapes\n                for (const sel of layer.selection) {\n                    if (!sel.ownedBy()) continue;\n                    sel.refPoint = sel.refPoint.add(delta);\n                    if (sel !== this.selectionHelper) {\n                        if (sel.visionObstruction) gameStore.recalculateVision(true);\n                        socket.emit(\"Shape.Update\", { shape: sel.asDict(), redraw: true, temporary: true });\n                    }\n                }\n                layer.invalidate(false);\n            } else if (this.mode === SelectOperations.Resize) {\n                for (const sel of layer.selection) {\n                    if (!sel.ownedBy()) continue;\n                    sel.resize(this.resizePoint, mouse);\n                    if (sel !== this.selectionHelper) {\n                        if (sel.visionObstruction) gameStore.recalculateVision(true);\n                        socket.emit(\"Shape.Update\", { shape: sel.asDict(), redraw: true, temporary: true });\n                    }\n                    layer.invalidate(false);\n                    this.updateCursor(layer, globalMouse);\n                }\n            } else {\n                this.updateCursor(layer, globalMouse);\n            }\n        } else {\n            document.body.style.cursor = \"default\";\n        }\n    }\n    onMouseUp(e: MouseEvent): void {\n        if (!this.active) return;\n        if (layerManager.getLayer() === undefined) {\n            console.log(\"No active layer!\");\n            return;\n        }\n        const layer = layerManager.getLayer()!;\n\n        if (this.mode === SelectOperations.GroupSelect) {\n            layer.clearSelection();\n            layer.shapes.forEach(shape => {\n                if (!shape.ownedBy()) return;\n                if (shape === this.selectionHelper) return;\n                const bbox = shape.getBoundingBox();\n                if (!shape.ownedBy()) return;\n                if (\n                    this.selectionHelper!.refPoint.x <= bbox.topRight.x &&\n                    this.selectionHelper!.refPoint.x + this.selectionHelper!.w >= bbox.topLeft.x &&\n                    this.selectionHelper!.refPoint.y <= bbox.botLeft.y &&\n                    this.selectionHelper!.refPoint.y + this.selectionHelper!.h >= bbox.topLeft.y\n                ) {\n                    layer.selection.push(shape);\n                }\n            });\n\n            // Push the selection helper as the last element of the selection\n            // This makes sure that it will be the first one to be hit in the hit detection onMouseDown\n            if (layer.selection.length > 0) layer.selection.push(this.selectionHelper);\n\n            layer.invalidate(true);\n        } else if (layer.selection.length) {\n            layer.selection.forEach(sel => {\n                if (!sel.ownedBy()) return;\n                if (this.mode === SelectOperations.Drag) {\n                    if (\n                        this.dragRay.origin!.x === g2lx(sel.refPoint.x) &&\n                        this.dragRay.origin!.y === g2ly(sel.refPoint.y)\n                    )\n                        return;\n\n                    if (gameStore.useGrid && !e.altKey && !this.deltaChanged) {\n                        sel.snapToGrid();\n                    }\n\n                    if (sel !== this.selectionHelper) {\n                        if (sel.visionObstruction) gameStore.recalculateVision();\n                        if (sel.movementObstruction) gameStore.recalculateMovement();\n                        socket.emit(\"Shape.Update\", { shape: sel.asDict(), redraw: true, temporary: false });\n                    }\n                    layer.invalidate(false);\n                }\n                if (this.mode === SelectOperations.Resize) {\n                    if (gameStore.useGrid && !e.altKey) {\n                        sel.resizeToGrid();\n                    }\n                    if (sel !== this.selectionHelper) {\n                        if (sel.visionObstruction) gameStore.recalculateVision();\n                        if (sel.movementObstruction) gameStore.recalculateMovement();\n                        socket.emit(\"Shape.Update\", { shape: sel.asDict(), redraw: true, temporary: false });\n                    }\n                    layer.invalidate(false);\n                }\n            });\n        }\n        this.mode = SelectOperations.Noop;\n        this.active = false;\n    }\n    onContextMenu(event: MouseEvent) {\n        if (layerManager.getLayer() === undefined) {\n            console.log(\"No active layer!\");\n            return;\n        }\n        const layer = layerManager.getLayer()!;\n        const mouse = getMouse(event);\n        const globalMouse = l2g(mouse);\n\n        for (const shape of layer.selection) {\n            if (shape.contains(globalMouse) && shape !== this.selectionHelper) {\n                layer.selection = [shape];\n                getRef<SelectionInfo>(\"selectionInfo\").shape = shape;\n                layer.invalidate(true);\n                (<any>this.$parent.$refs.shapecontext).open(event, shape);\n                return;\n            }\n        }\n        (<any>this.$refs.selectcontext).open(event);\n    }\n    updateCursor(layer: Layer, globalMouse: GlobalPoint) {\n        for (const sel of layer.selection) {\n            const resizePoint = sel.getPointIndex(globalMouse, l2gz(3));\n            if (resizePoint < 0) document.body.style.cursor = \"default\";\n            else {\n                let angle = sel.getPointOrientation(resizePoint).angle();\n                if (angle < 0) angle += 360;\n                const d = 45 / 2;\n                if (angle >= 315 + d || angle < d || (angle >= 135 + d && angle < 225 - d))\n                    document.body.style.cursor = \"ew-resize\";\n                if ((angle >= 45 + d && angle < 135 - d) || (angle >= 225 + d && angle < 315 - d))\n                    document.body.style.cursor = \"ns-resize\";\n                if ((angle >= d && angle < 90 - d) || (angle >= 180 + d && angle < 270 - d))\n                    document.body.style.cursor = \"nwse-resize\";\n                if ((angle >= 90 + d && angle < 180 - d) || (angle >= 270 + d && angle < 360 - d))\n                    document.body.style.cursor = \"nesw-resize\";\n            }\n        }\n    }\n}\n","import { GlobalPoint, Ray, Vector } from \"@/game/geom\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { Shape } from \"@/game/shapes/shape\";\nimport { gameStore } from \"@/game/store\";\nimport { PA_CDT } from \"@/game/visibility/te/pa\";\nimport { Point, Sign, Triangle } from \"@/game/visibility/te/tds\";\nimport { ccw, cw, intersection, orientation } from \"@/game/visibility/te/triag\";\n\n// First go through each shape in the selection and see if the delta has to be truncated due to movement blockers\n\n// This is definitely super convoluted and inefficient but I was tired and really wanted the smooth wall sliding collision stuff to work\n// And it does now, so hey \\_()_/\nexport function calculateDelta(delta: Vector, sel: Shape, done?: string[]) {\n    if (delta.x === 0 && delta.y === 0) return delta;\n    if (gameStore.visionMode === \"bvh\") {\n        if (done === undefined) done = [];\n        const ogSelBBox = sel.getBoundingBox();\n        const newSelBBox = ogSelBBox.offset(delta);\n        let refine = false;\n        for (const movementBlocker of gameStore.movementblockers) {\n            if (done.includes(movementBlocker)) continue;\n            const blocker = layerManager.UUIDMap.get(movementBlocker)!;\n            const blockerBBox = blocker.getBoundingBox();\n            let found = blockerBBox.intersectsWithInner(newSelBBox);\n            if (!found) {\n                // This is an edge case, precalculating the rays is not worth in this case.\n                const ray = Ray.fromPoints(ogSelBBox.topLeft.add(delta.normalize()), newSelBBox.topLeft);\n                const invDir = ray.direction.inverse();\n                const dirIsNegative = [invDir.x < 0, invDir.y < 0];\n                found = blockerBBox.intersectP(ray, invDir, dirIsNegative).hit;\n            }\n            // Check if the bounding box of our destination would intersect with the bounding box of the movementblocker\n            if (found) {\n                const bCenter = blockerBBox.center();\n                const sCenter = ogSelBBox.center();\n\n                const d = sCenter.subtract(bCenter);\n                const ux = new Vector(1, 0);\n                const uy = new Vector(0, 1);\n                let dx = d.dot(ux);\n                let dy = d.dot(uy);\n                if (dx > blockerBBox.w / 2) dx = blockerBBox.w / 2;\n                if (dx < -blockerBBox.w / 2) dx = -blockerBBox.w / 2;\n                if (dy > blockerBBox.h / 2) dy = blockerBBox.h / 2;\n                if (dy < -blockerBBox.h / 2) dy = -blockerBBox.h / 2;\n\n                // Closest point / intersection point between the two bboxes.  Not the delta intersect!\n                const p = bCenter.add(ux.multiply(dx)).add(uy.multiply(dy));\n\n                if (p.x === ogSelBBox.topLeft.x || p.x === ogSelBBox.topRight.x) delta = new Vector(0, delta.y);\n                else if (p.y === ogSelBBox.topLeft.y || p.y === ogSelBBox.botLeft.y) delta = new Vector(delta.x, 0);\n                else {\n                    if (p.x < ogSelBBox.topLeft.x) delta = new Vector(p.x - ogSelBBox.topLeft.x, delta.y);\n                    else if (p.x > ogSelBBox.topRight.x) delta = new Vector(p.x - ogSelBBox.topRight.x, delta.y);\n                    else if (p.y < ogSelBBox.topLeft.y) delta = new Vector(delta.x, p.y - ogSelBBox.topLeft.y);\n                    else if (p.y > ogSelBBox.botLeft.y) delta = new Vector(delta.x, p.y - ogSelBBox.botLeft.y);\n                }\n                refine = true;\n                done.push(movementBlocker);\n                break;\n            }\n        }\n        if (refine) delta = calculateDelta(delta, sel, done);\n        return delta;\n    } else {\n        const centerTriangle = PA_CDT.movement.locate(sel.center().asArray(), null).loc;\n        for (const point of sel.points) {\n            const lt = PA_CDT.movement.locate(point, centerTriangle);\n            const triangle = lt.loc;\n            if (triangle === null) continue;\n            delta = checkTriangle(point, triangle, delta);\n        }\n        return delta;\n    }\n}\n\nfunction checkTriangle(point: Point, triangle: Triangle, delta: Vector, skip: Triangle[] = []): Vector {\n    const p = new GlobalPoint(point[0], point[1]);\n    const endpoint = p.add(delta).asArray();\n    if (triangle.contains(endpoint)) return delta;\n    skip.push(triangle);\n\n    for (let i = 0; i < 3; i++) {\n        if (skip.includes(triangle.neighbours[i]!)) continue;\n\n        const _cw = triangle.vertices[cw(i)]!.point!;\n        const _ccw = triangle.vertices[ccw(i)]!.point!;\n        const ix = intersection(point, endpoint, _cw, _ccw);\n\n        if (ix === null) continue;\n\n        if (!triangle.isConstrained(i)) return checkTriangle(point, triangle.neighbours[i]!, delta, skip);\n\n        if (ix[0] === p.x && ix[1] === p.y) {\n            const OR = orientation;\n            const o = orientation(point, endpoint, _ccw);\n            // Remember: canvas y axis is inverted\n            if (o === Sign.LEFT_TURN) continue;\n            if (o === Sign.ZERO) continue;\n        }\n        let newDelta = new GlobalPoint(ix[0], ix[1]).subtract(p).multiply(0.8);\n        if (newDelta.length() < 1) newDelta = new Vector(0, 0);\n        if (newDelta.length() < delta.length()) delta = newDelta;\n    }\n    return delta;\n}\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./note.vue?vue&type=style&index=0&id=7a3669fd&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./note.vue?vue&type=style&index=0&id=7a3669fd&scoped=true&lang=css&\"","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./labels.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./labels.vue?vue&type=script&lang=ts&\"","import { socket } from \"@/game/api/socket\";\nimport { gameStore } from \"@/game/store\";\n\nexport function sendClientOptions() {\n    socket.emit(\"Client.Options.Set\", {\n        locationOptions: {\n            panX: gameStore.panX,\n            panY: gameStore.panY,\n            zoomFactor: gameStore.zoomFactor,\n        },\n    });\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\nimport { Prop } from \"vue-property-decorator\";\n\nimport { AssetFile, AssetList } from \"@/core/comm/types\";\nimport { alphSort } from \"@/core/utils\";\n\n@Component({\n    name: \"asset-node\",\n})\nexport default class AssetNode extends Vue {\n    @Prop() asset!: AssetList;\n\n    showImage = null;\n    get folders(): string[] {\n        return Object.keys(this.asset)\n            .filter(el => ![\"__files\"].includes(el))\n            .sort(alphSort);\n    }\n\n    get files(): AssetFile[] {\n        if (this.asset.__files)\n            return (<AssetFile[]>this.asset.__files)\n                .concat()\n                .sort((a, b) => (a.name.toLowerCase() > b.name.toLowerCase() ? 1 : -1));\n        return [];\n    }\n\n    toggle(event: { target: HTMLElement }) {\n        // tslint:disable-next-line:prefer-for-of\n        for (let i = 0; i < event.target.children.length; i++) {\n            const el = <HTMLElement>event.target.children[i];\n            el.style.display = el.style.display === \"\" ? \"block\" : \"\";\n        }\n    }\n\n    dragStart(event: DragEvent, imageSource: string) {\n        this.showImage = null;\n        if (event === null || event.dataTransfer === null) return;\n        const img = (<HTMLElement>event.target).querySelector(\".preview\")!;\n        event.dataTransfer.setDragImage(img, 0, 0);\n        event.dataTransfer.setData(\"text/plain\", imageSource);\n    }\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.visible)?_c('div',{staticClass:\"ContextMenu\",style:({left:_vm.left, top:_vm.top}),attrs:{\"tabindex\":\"-1\"},on:{\"blur\":function($event){_vm.$emit('close')}}},[_c('ul',[_vm._t(\"default\")],2)]):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"74f43d04-vue-loader-template\\\"}!../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./contextmenu.vue?vue&type=template&id=256dde9c&\"","// import Vuex from \"vuex\";\nimport { getModule, Module, Mutation, VuexModule } from \"vuex-module-decorators\";\n\nimport { Asset } from \"@/core/comm/types\";\nimport { rootStore } from \"@/store\";\n\nexport interface AssetState {\n    root: number;\n    files: number[];\n    folders: number[];\n    idMap: Map<number, Asset>;\n    selected: number[];\n}\n\n@Module({ dynamic: true, store: rootStore, name: \"assets\", namespaced: true })\nclass AssetStore extends VuexModule {\n    root = -1;\n    files: number[] = [];\n    folders: number[] = [];\n    idMap: Map<number, Asset> = new Map();\n    selected: number[] = [];\n\n    @Mutation\n    clear() {\n        this.folders = [];\n        this.files = [];\n    }\n\n    @Mutation\n    clearSelected() {\n        console.log(\"Cleared\");\n        this.selected = [];\n    }\n\n    @Mutation\n    setRoot(root: number) {\n        this.root = root;\n    }\n}\n\nexport const assetStore = getModule(AssetStore);\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./contextmenu.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./contextmenu.vue?vue&type=script&lang=ts&\"","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\n\nimport ContextMenu from \"@/core/components/contextmenu.vue\";\nimport Initiative from \"@/game/ui/initiative.vue\";\n\nimport { getRef } from \"@/core/utils\";\nimport { EventBus } from \"@/game/event-bus\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { Shape } from \"@/game/shapes/shape\";\nimport { gameStore } from \"@/game/store\";\n\n@Component({\n    components: {\n        ContextMenu,\n    },\n})\nexport default class ShapeContext extends Vue {\n    visible = false;\n    x = 0;\n    y = 0;\n    shape: Shape | null = null;\n    get activeLayer(): string {\n        const layer = layerManager.getLayer();\n        return layer === undefined ? \"\" : layer.name;\n    }\n    open(event: MouseEvent, shape: Shape) {\n        this.visible = true;\n        this.x = event.pageX;\n        this.y = event.pageY;\n        this.shape = shape;\n        this.$nextTick(() => this.$children[0].$el.focus());\n    }\n    close() {\n        this.visible = false;\n        this.shape = null;\n    }\n    getLayers() {\n        return layerManager.layers.filter(l => l.selectable && (gameStore.IS_DM || l.playerEditable));\n    }\n    getActiveLayer() {\n        return layerManager.getLayer();\n    }\n    getInitiativeWord() {\n        if (this.shape === null) return \"\";\n        return getRef<Initiative>(\"initiative\").contains(this.shape.uuid) ? \"Show\" : \"Add\";\n    }\n    setLayer(newLayer: string) {\n        if (this.shape === null) return;\n        this.shape.moveLayer(newLayer, true);\n        this.close();\n    }\n    moveToBack() {\n        if (this.shape === null) return;\n        const layer = this.getActiveLayer()!;\n        layer.moveShapeOrder(this.shape, 0, true);\n        this.close();\n    }\n    moveToFront() {\n        if (this.shape === null) return;\n        const layer = this.getActiveLayer()!;\n        layer.moveShapeOrder(this.shape, layer.shapes.length - 1, true);\n        this.close();\n    }\n    addInitiative() {\n        if (this.shape === null) return;\n        const initiative = getRef<Initiative>(\"initiative\");\n        if (!initiative.contains(this.shape.uuid)) initiative.addInitiative(this.shape.getInitiativeRepr());\n        initiative.visible = true;\n        this.close();\n    }\n    openEditDialog() {\n        EventBus.$emit(\"EditDialog.Open\", this.shape);\n        this.close();\n    }\n}\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./map.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./map.vue?vue&type=script&lang=ts&\"","import { Layer } from \"@/game/layers/layer\";\nimport { gameStore } from \"@/game/store\";\n\nexport class GridLayer extends Layer {\n    invalidate(): void {\n        this.valid = false;\n    }\n    draw(doClear?: boolean): void {\n        if (!this.valid) {\n            this.drawGrid();\n        }\n    }\n    drawGrid(): void {\n        const ctx = this.ctx;\n        this.clear();\n        ctx.beginPath();\n\n        const gs = gameStore.gridSize;\n\n        for (let i = 0; i < this.width; i += gs * gameStore.zoomFactor) {\n            ctx.moveTo(i + (gameStore.panX % gs) * gameStore.zoomFactor, 0);\n            ctx.lineTo(i + (gameStore.panX % gs) * gameStore.zoomFactor, this.height);\n            ctx.moveTo(0, i + (gameStore.panY % gs) * gameStore.zoomFactor);\n            ctx.lineTo(this.width, i + (gameStore.panY % gs) * gameStore.zoomFactor);\n        }\n\n        ctx.strokeStyle = gameStore.gridColour;\n        ctx.lineWidth = 1;\n        ctx.stroke();\n        this.valid = true;\n    }\n}\n","import Vue from \"vue\";\nimport Vuex from \"vuex\";\n\nimport { AssetState } from \"@/assetManager/store\";\nimport { CoreState } from \"@/core/store\";\nimport { GameState } from \"@/game/store\";\n\nVue.use(Vuex);\n\nexport interface RootState {\n    assets: AssetState;\n    core: CoreState;\n    game: GameState;\n}\n\nexport const rootStore = new Vuex.Store<RootState>({});\n","import { render, staticRenderFns } from \"./colorpicker.vue?vue&type=template&id=d32461a4&scoped=true&\"\nimport script from \"./colorpicker.vue?vue&type=script&lang=ts&\"\nexport * from \"./colorpicker.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./colorpicker.vue?vue&type=style&index=0&id=d32461a4&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"d32461a4\",\n  null\n  \n)\n\ncomponent.options.__file = \"colorpicker.vue\"\nexport default component.exports","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./login.vue?vue&type=style&index=0&id=bc30fc14&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./login.vue?vue&type=style&index=0&id=bc30fc14&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('router-view',{ref:\"activeComponent\"})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=196415f0&\"\nvar script = {}\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"App.vue\"\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"main\"},on:{\"mouseleave\":_vm.mouseleave,\"wheel\":_vm.zoom}},[(_vm.showUI)?_c('menu-bar'):_vm._e(),_c('div',{attrs:{\"id\":\"board\"}},[(_vm.ready.manager)?[_c('tool-bar',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showUI),expression:\"showUI\"}],ref:\"tools\"})]:_vm._e(),_c('div',{attrs:{\"id\":\"layers\"},on:{\"mousedown\":_vm.mousedown,\"mouseup\":_vm.mouseup,\"mousemove\":_vm.mousemove,\"contextmenu\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.contextmenu($event)},\"dragover\":function($event){$event.preventDefault();},\"drop\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.drop($event)}}}),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showUI && _vm.layers.length>1),expression:\"showUI && layers.length>1\"}],attrs:{\"id\":\"layerselect\"}},[_c('ul',_vm._l((_vm.layers),function(layer){return _c('li',{key:layer.name,class:{ 'layer-selected': layer === _vm.selectedLayer },on:{\"mousedown\":function($event){_vm.selectLayer(layer)}}},[_c('a',{attrs:{\"href\":\"#\"}},[_vm._v(_vm._s(layer))])])}))])],2),_c('selection-info',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showUI),expression:\"showUI\"}],ref:\"selectionInfo\"}),_c('initiative-dialog',{ref:\"initiative\",attrs:{\"id\":\"initiativedialog\"}}),_c('note-dialog',{ref:\"note\"}),_c('label-dialog',{ref:\"labels\"}),_c('zoom-slider',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showUI),expression:\"showUI\"}],attrs:{\"id\":\"zoomer\",\"height\":6,\"width\":200,\"min\":0,\"max\":1,\"interval\":0.1,\"dot-width\":8,\"dot-height\":20,\"tooltip-dir\":'bottom',\"tooltip\":'hover',\"formatter\":_vm.zoomDisplay.toFixed(1),\"slider-style\":{'border-radius': '15%'},\"bg-style\":{'background-color': '#fff', 'box-shadow': '0.5px 0.5px 3px 1px rgba(0, 0, 0, .36)'},\"process-style\":{'background-color': '#fff'}},model:{value:(_vm.zoomDisplay),callback:function ($$v) {_vm.zoomDisplay=$$v},expression:\"zoomDisplay\"}}),_c('prompt-dialog',{ref:\"prompt\"}),_c('confirm-dialog',{ref:\"confirm\"})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"74f43d04-vue-loader-template\\\"}!../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./game.vue?vue&type=template&id=05b88da7&scoped=true&\"","import { GlobalPoint, Ray } from \"@/game/geom\";\nimport { Layer } from \"@/game/layers/layer\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { Settings } from \"@/game/settings\";\nimport { Circle } from \"@/game/shapes/circle\";\nimport { Shape } from \"@/game/shapes/shape\";\nimport { gameStore } from \"@/game/store\";\nimport { g2l, g2lr, g2lx, g2ly, g2lz, getUnitDistance } from \"@/game/units\";\nimport { getFogColour } from \"@/game/utils\";\nimport { computeVisibility } from \"../visibility/te/te\";\n\nexport class FOWLayer extends Layer {\n    isVisionLayer: boolean = true;\n    preFogShapes: Shape[] = [];\n    virtualCanvas: HTMLCanvasElement;\n    vCtx: CanvasRenderingContext2D;\n\n    constructor(canvas: HTMLCanvasElement, name: string) {\n        super(canvas, name);\n        this.virtualCanvas = document.createElement(\"canvas\");\n        this.virtualCanvas.width = window.innerWidth;\n        this.virtualCanvas.height = window.innerHeight;\n        this.vCtx = this.virtualCanvas.getContext(\"2d\")!;\n    }\n\n    addShape(shape: Shape, sync: boolean, temporary?: boolean, invalidate = true): void {\n        super.addShape(shape, sync, temporary, invalidate);\n        if (shape.options.has(\"preFogShape\") && shape.options.get(\"preFogShape\")) {\n            this.preFogShapes.push(shape);\n        }\n    }\n\n    removeShape(shape: Shape, sync: boolean, temporary?: boolean) {\n        if (shape.options.has(\"preFogShape\") && shape.options.get(\"preFogShape\")) {\n            const idx = this.preFogShapes.findIndex(s => s.uuid === shape.uuid);\n            this.preFogShapes.splice(idx, 1);\n        }\n        super.removeShape(shape, sync, temporary);\n    }\n\n    draw(): void {\n        if (!this.valid) {\n            const ctx = this.ctx;\n\n            if (Settings.skipLightFOW) {\n                ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n                this.valid = true;\n                return;\n            }\n\n            const originalOperation = ctx.globalCompositeOperation;\n            ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n\n            ctx.fillStyle = \"rgba(0, 0, 0, 1)\";\n\n            const dctx = layerManager.getLayer(\"draw\")!.ctx;\n            if (Settings.drawAngleLines || Settings.drawFirstLightHit) {\n                dctx.clearRect(0, 0, dctx.canvas.width, dctx.canvas.height);\n            }\n\n            // At all times provide a minimal vision range to prevent losing your tokens in fog.\n            if (gameStore.fullFOW && layerManager.hasLayer(\"tokens\")) {\n                layerManager.getLayer(\"tokens\")!.shapes.forEach(sh => {\n                    if (!sh.ownedBy() || !sh.isToken) return;\n                    const bb = sh.getBoundingBox();\n                    const lcenter = g2l(sh.center());\n                    const alm = 0.8 * g2lz(bb.w);\n                    ctx.beginPath();\n                    ctx.arc(lcenter.x, lcenter.y, alm, 0, 2 * Math.PI);\n                    const gradient = ctx.createRadialGradient(lcenter.x, lcenter.y, alm / 2, lcenter.x, lcenter.y, alm);\n                    gradient.addColorStop(0, \"rgba(0, 0, 0, 1)\");\n                    gradient.addColorStop(1, \"rgba(0, 0, 0, 0)\");\n                    ctx.fillStyle = gradient;\n                    ctx.fill();\n                });\n            }\n\n            this.vCtx.clearRect(0, 0, window.innerWidth, window.innerHeight);\n\n            // First cut out all the light sources\n            for (const light of gameStore.visionSources) {\n                const shape = layerManager.UUIDMap.get(light.shape);\n                if (shape === undefined) continue;\n                const aura = shape.auras.find(a => a.uuid === light.aura);\n                if (aura === undefined) continue;\n\n                const auraLength = getUnitDistance(aura.value + aura.dim);\n                const center = shape.center();\n                const lcenter = g2l(center);\n\n                const auraCircle = new Circle(center, auraLength);\n                if (!auraCircle.visibleInCanvas(ctx.canvas)) continue;\n\n                if (gameStore.visionMode === \"bvh\") {\n                    let lastArcAngle = -1;\n\n                    const path = new Path2D();\n                    path.moveTo(lcenter.x, lcenter.y);\n                    let firstPoint: GlobalPoint;\n\n                    for (let angle = 0; angle < 2 * Math.PI; angle += (Settings.angleSteps / 180) * Math.PI) {\n                        const anglePoint = new GlobalPoint(\n                            center.x + auraLength * Math.cos(angle),\n                            center.y + auraLength * Math.sin(angle),\n                        );\n                        if (Settings.drawAngleLines) {\n                            dctx!.beginPath();\n                            dctx!.moveTo(g2lx(center.x), g2ly(center.y));\n                            dctx!.lineTo(g2lx(anglePoint.x), g2ly(anglePoint.y));\n                            dctx!.stroke();\n                        }\n\n                        // Check if there is a hit with one of the nearby light blockers.\n                        const lightRay = Ray.fromPoints(center, anglePoint);\n                        const hitResult = gameStore.BV.intersect(lightRay);\n\n                        if (angle === 0) firstPoint = hitResult.hit ? hitResult.intersect : anglePoint;\n\n                        // We can move on to the next angle if nothing was hit.\n                        if (!hitResult.hit) {\n                            // If an earlier hit caused the aura to leave the arc, we need to go back to the arc\n                            if (lastArcAngle === -1) {\n                                // Set the start of a new arc beginning at the current angle\n                                lastArcAngle = angle;\n                                // Draw a line from the last non arc location back to the arc\n                                const dest = g2l(anglePoint);\n                                ctx.lineTo(dest.x, dest.y);\n                            }\n                            continue;\n                        }\n                        // If hit , first finish any ongoing arc, then move to the intersection point\n                        if (lastArcAngle !== -1) {\n                            path.arc(lcenter.x, lcenter.y, g2lr(aura.value + aura.dim), lastArcAngle, angle);\n                            lastArcAngle = -1;\n                        }\n                        path.lineTo(g2lx(hitResult.intersect.x), g2ly(hitResult.intersect.y));\n                    }\n                    // Finish the final arc.\n                    if (lastArcAngle === -1) path.lineTo(g2lx(firstPoint!.x), g2ly(firstPoint!.y));\n                    else path.arc(lcenter.x, lcenter.y, g2lr(aura.value + aura.dim), lastArcAngle, 2 * Math.PI);\n\n                    if (gameStore.fullFOW) {\n                        if (aura.dim > 0) {\n                            // Fill the light aura with a radial dropoff towards the outside.\n                            const gradient = ctx.createRadialGradient(\n                                lcenter.x,\n                                lcenter.y,\n                                g2lr(aura.value),\n                                lcenter.x,\n                                lcenter.y,\n                                g2lr(aura.value + aura.dim),\n                            );\n                            gradient.addColorStop(0, \"rgba(0, 0, 0, 1)\");\n                            gradient.addColorStop(1, \"rgba(0, 0, 0, 0)\");\n                            ctx.fillStyle = gradient;\n                        } else {\n                            ctx.fillStyle = \"rgba(0, 0, 0, 1)\";\n                        }\n                        ctx.fill(path);\n                    }\n\n                    aura.lastPath = path;\n                } else {\n                    this.vCtx.globalCompositeOperation = \"source-over\";\n                    this.vCtx.fillStyle = \"rgba(0, 0, 0, 1)\";\n                    const polygon = computeVisibility(center, \"vision\");\n                    this.vCtx.beginPath();\n                    this.vCtx.moveTo(g2lx(polygon[0][0]), g2ly(polygon[0][1]));\n                    for (const point of polygon) this.vCtx.lineTo(g2lx(point[0]), g2ly(point[1]));\n                    this.vCtx.closePath();\n                    this.vCtx.fill();\n                    if (aura.dim > 0) {\n                        // Fill the light aura with a radial dropoff towards the outside.\n                        const gradient = this.vCtx.createRadialGradient(\n                            lcenter.x,\n                            lcenter.y,\n                            g2lr(aura.value),\n                            lcenter.x,\n                            lcenter.y,\n                            g2lr(aura.value + aura.dim),\n                        );\n                        gradient.addColorStop(0, \"rgba(0, 0, 0, 1)\");\n                        gradient.addColorStop(1, \"rgba(0, 0, 0, 0)\");\n                        this.vCtx.fillStyle = gradient;\n                    } else {\n                        this.vCtx.fillStyle = \"rgba(0, 0, 0, 1)\";\n                    }\n                    this.vCtx.globalCompositeOperation = \"source-in\";\n                    this.vCtx.beginPath();\n                    this.vCtx.arc(lcenter.x, lcenter.y, g2lr(aura.value + aura.dim), 0, 2 * Math.PI);\n                    this.vCtx.fill();\n                    ctx.drawImage(this.virtualCanvas, 0, 0);\n                }\n            }\n\n            // At the DM Side due to opacity of the two fow layers, it looks strange if we just render them on top of eachother like players.\n            if (gameStore.fowLOS) {\n                ctx.globalCompositeOperation = \"source-in\";\n                ctx.drawImage(layerManager.getLayer(\"fow-players\")!.canvas, 0, 0);\n            }\n\n            for (const preShape of this.preFogShapes) {\n                if (!preShape.visibleInCanvas(this.canvas)) continue;\n                const ogComposite = preShape.globalCompositeOperation;\n                if (!gameStore.fullFOW) {\n                    if (preShape.globalCompositeOperation === \"source-over\")\n                        preShape.globalCompositeOperation = \"destination-out\";\n                    else if (preShape.globalCompositeOperation === \"destination-out\")\n                        preShape.globalCompositeOperation = \"source-over\";\n                }\n                preShape.draw(ctx);\n                preShape.globalCompositeOperation = ogComposite;\n            }\n\n            if (gameStore.fullFOW) {\n                ctx.globalCompositeOperation = \"source-out\";\n                ctx.fillStyle = getFogColour();\n                ctx.fillRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n            }\n\n            super.draw(false);\n\n            ctx.globalCompositeOperation = originalOperation;\n        }\n    }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./load.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./load.vue?vue&type=script&lang=ts&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"menuContainer\"}},[_c('div',{ref:\"rm\",style:({\n              left: _vm.visible.settings ? '200px' : '0',\n              top: _vm.visible.locations ? '100px' : '0'\n          }),attrs:{\"id\":\"radialmenu\"}},[_c('div',{staticClass:\"rm-wrapper\"},[_c('div',{staticClass:\"rm-toggler\"},[_c('ul',{staticClass:\"rm-list\",class:{ 'rm-list-dm': _vm.IS_DM }},[(_vm.IS_DM)?_c('li',{staticClass:\"rm-item\",attrs:{\"id\":\"rm-locations\"},on:{\"click\":function($event){_vm.visible.locations = !_vm.visible.locations}}},[_vm._m(0)]):_vm._e(),_c('li',{staticClass:\"rm-item\",attrs:{\"id\":\"rm-settings\"},on:{\"click\":function($event){_vm.visible.settings = !_vm.visible.settings}}},[_vm._m(1)])])]),_vm._m(2)])]),_c('transition',{attrs:{\"name\":\"settings\"},on:{\"enter\":function($event){_vm.$refs.rm.style.transition = 'left 500ms'}}},[(_vm.visible.settings)?_c('div',{ref:\"settings\",attrs:{\"id\":\"menu\"},on:{\"click\":_vm.settingsClick}},[_c('div',{staticStyle:{\"width\":\"200px\",\"height\":\"90%\",\"overflow-y\":\"auto\",\"overflow-x\":\"hidden\"}},[(_vm.IS_DM)?[_c('button',{staticClass:\"accordion\"},[_vm._v(\"Assets\")]),_c('div',{staticClass:\"accordion-panel\"},[_c('a',{staticClass:\"actionButton\",attrs:{\"href\":\"/assets\",\"target\":\"blank\",\"title\":\"Open asset manager\"}},[_c('i',{staticClass:\"fas fa-external-link-alt\"})]),_c('div',{staticClass:\"directory\",attrs:{\"id\":\"menu-tokens\"}},[_c('asset-node',{attrs:{\"asset\":_vm.assets}}),(!_vm.assets)?_c('div',[_vm._v(\"No assets\")]):_vm._e()],1)]),_c('button',{staticClass:\"accordion\"},[_vm._v(\"Notes\")]),_c('div',{staticClass:\"accordion-panel\"},[_c('div',{staticClass:\"accordion-subpanel\",attrs:{\"id\":\"menu-notes\"}},[_c('a',{staticClass:\"actionButton\",on:{\"click\":_vm.createNote}},[_c('i',{staticClass:\"far fa-plus-square\"})]),_vm._l((_vm.notes),function(note){return _c('div',{key:note.uuid,staticStyle:{\"cursor\":\"pointer\"},on:{\"click\":function($event){_vm.openNote(note)}}},[_vm._v(_vm._s(note.title || \"[?]\"))])}),(!_vm.notes.length)?_c('div',[_vm._v(\"No notes\")]):_vm._e()],2)]),_c('button',{staticClass:\"accordion\"},[_vm._v(\"DM Options\")]),_c('div',{staticClass:\"accordion-panel\"},[_c('div',{staticClass:\"accordion-subpanel\"},[_c('label',{attrs:{\"for\":\"useGridInput\"}},[_vm._v(\"Use grid:\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.useGrid),expression:\"useGrid\"}],attrs:{\"id\":\"useGridInput\",\"type\":\"checkbox\",\"checked\":\"checked\"},domProps:{\"checked\":Array.isArray(_vm.useGrid)?_vm._i(_vm.useGrid,null)>-1:(_vm.useGrid)},on:{\"change\":function($event){var $$a=_vm.useGrid,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.useGrid=$$a.concat([$$v]))}else{$$i>-1&&(_vm.useGrid=$$a.slice(0,$$i).concat($$a.slice($$i+1)))}}else{_vm.useGrid=$$c}}}}),_c('label',{attrs:{\"for\":\"useFOWInput\"}},[_vm._v(\"Fill entire canvas with FOW:\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.fullFOW),expression:\"fullFOW\"}],attrs:{\"id\":\"useFOWInput\",\"type\":\"checkbox\"},domProps:{\"checked\":Array.isArray(_vm.fullFOW)?_vm._i(_vm.fullFOW,null)>-1:(_vm.fullFOW)},on:{\"change\":function($event){var $$a=_vm.fullFOW,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.fullFOW=$$a.concat([$$v]))}else{$$i>-1&&(_vm.fullFOW=$$a.slice(0,$$i).concat($$a.slice($$i+1)))}}else{_vm.fullFOW=$$c}}}}),_c('label',{attrs:{\"for\":\"fowOpacity\"}},[_vm._v(\"FOW opacity:\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.fowOpacity),expression:\"fowOpacity\",modifiers:{\"number\":true}}],attrs:{\"id\":\"fowOpacity\",\"type\":\"number\",\"min\":\"0\",\"max\":\"1\",\"step\":\"0.1\"},domProps:{\"value\":(_vm.fowOpacity)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.fowOpacity=_vm._n($event.target.value)},\"blur\":function($event){_vm.$forceUpdate()}}}),_c('label',{attrs:{\"for\":\"fowLOS\"}},[_vm._v(\"Only show lights in LoS:\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.fowLOS),expression:\"fowLOS\"}],attrs:{\"id\":\"fowLOS\",\"type\":\"checkbox\"},domProps:{\"checked\":Array.isArray(_vm.fowLOS)?_vm._i(_vm.fowLOS,null)>-1:(_vm.fowLOS)},on:{\"change\":function($event){var $$a=_vm.fowLOS,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.fowLOS=$$a.concat([$$v]))}else{$$i>-1&&(_vm.fowLOS=$$a.slice(0,$$i).concat($$a.slice($$i+1)))}}else{_vm.fowLOS=$$c}}}}),_c('label',{attrs:{\"for\":\"unitSizeInput\"}},[_vm._v(\"Unit Size (in ft.):\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.unitSize),expression:\"unitSize\",modifiers:{\"number\":true}}],attrs:{\"id\":\"unitSizeInput\",\"type\":\"number\"},domProps:{\"value\":(_vm.unitSize)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.unitSize=_vm._n($event.target.value)},\"blur\":function($event){_vm.$forceUpdate()}}}),_c('label',{attrs:{\"for\":\"gridSizeInput\"}},[_vm._v(\"Grid Size (in pixels):\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.gridSize),expression:\"gridSize\",modifiers:{\"number\":true}}],attrs:{\"id\":\"gridSizeInput\",\"type\":\"number\",\"min\":\"0\"},domProps:{\"value\":(_vm.gridSize)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.gridSize=_vm._n($event.target.value)},\"blur\":function($event){_vm.$forceUpdate()}}}),_c('label',{attrs:{\"for\":\"visionMode\"}},[_vm._v(\"Vision Mode:\")]),_c('select',{attrs:{\"id\":\"visionMode\"},on:{\"change\":_vm.changeVisionMode}},[_c('option',{domProps:{\"selected\":_vm.$store.state.game.visionMode === 'bvh'}},[_vm._v(\"BVH\")]),_c('option',{domProps:{\"selected\":_vm.$store.state.game.visionMode === 'triangle'}},[_vm._v(\"Triangle\")])]),_c('label',{attrs:{\"for\":\"vmininp\"}},[_vm._v(\"Minimal full vision (ft):\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model.lazy.number\",value:(_vm.visionRangeMin),expression:\"visionRangeMin\",modifiers:{\"lazy\":true,\"number\":true}}],attrs:{\"id\":\"vmininp\",\"type\":\"number\",\"min\":\"0\"},domProps:{\"value\":(_vm.visionRangeMin)},on:{\"change\":function($event){_vm.visionRangeMin=_vm._n($event.target.value)},\"blur\":function($event){_vm.$forceUpdate()}}}),_c('label',{attrs:{\"for\":\"vmaxinp\"}},[_vm._v(\"Maximal vision (ft):\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model.lazy.number\",value:(_vm.visionRangeMax),expression:\"visionRangeMax\",modifiers:{\"lazy\":true,\"number\":true}}],attrs:{\"id\":\"vmaxinp\",\"type\":\"number\",\"min\":\"0\"},domProps:{\"value\":(_vm.visionRangeMax)},on:{\"change\":function($event){_vm.visionRangeMax=_vm._n($event.target.value)},\"blur\":function($event){_vm.$forceUpdate()}}}),_c('label',{attrs:{\"for\":\"invitation\"}},[_vm._v(\"Invitation Code:\")]),_c('input',{attrs:{\"id\":\"invitation\",\"type\":\"text\",\"readonly\":\"readonly\"},domProps:{\"value\":_vm.invitationCode}})])])]:_vm._e(),_c('button',{staticClass:\"accordion\"},[_vm._v(\"Client Options\")]),_c('div',{staticClass:\"accordion-panel\"},[_c('div',{staticClass:\"accordion-subpanel\"},[_c('label',{attrs:{\"for\":\"gridColour\"}},[_vm._v(\"Grid Colour:\")]),_c('color-picker',{attrs:{\"id\":\"gridColour\",\"color\":_vm.gridColour},on:{\"update:color\":function($event){_vm.gridColour=$event}}}),_c('label',{attrs:{\"for\":\"fowColour\"}},[_vm._v(\"FOW Colour:\")]),_c('color-picker',{attrs:{\"id\":\"fowColour\",\"color\":_vm.fowColour},on:{\"update:color\":function($event){_vm.fowColour=$event}}}),_c('label',{attrs:{\"for\":\"rulerColour\"}},[_vm._v(\"Ruler Colour:\")]),_c('color-picker',{attrs:{\"id\":\"rulerColour\",\"color\":_vm.rulerColour},on:{\"update:color\":function($event){_vm.rulerColour=$event}}})],1)])],2),_c('router-link',{staticClass:\"accordion\",staticStyle:{\"text-decoration\":\"none\",\"display\":\"inline-block\",\"position\":\"absolute\",\"bottom\":\"0\"},attrs:{\"to\":\"/dashboard\"}},[_vm._v(\"Exit\")])],1):_vm._e()]),_c('transition',{attrs:{\"name\":\"locations\"},on:{\"enter\":function($event){_vm.$refs.rm.style.transition = 'top 500ms'}}},[(_vm.IS_DM && _vm.visible.locations)?_c('div',{attrs:{\"id\":\"locations-menu\"}},[_c('div',[_vm._l((_vm.locations),function(location){return _c('div',{key:location,on:{\"click\":function($event){_vm.changeLocation(location)}}},[_vm._v(_vm._s(location))])}),_c('div',{on:{\"click\":_vm.createLocation}},[_c('i',{staticClass:\"fas fa-plus\"})])],2)]):_vm._e()]),_c('img',{attrs:{\"id\":\"dragImage\"}})],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('a',{attrs:{\"href\":\"#\"}},[_c('i',{staticClass:\"far fa-compass\"})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('a',{attrs:{\"href\":\"#\"}},[_c('i',{staticClass:\"fas fa-cog\"})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',{staticClass:\"rm-topper\"},[_c('i',{staticClass:\"icon-share-alt\"})])}]\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"74f43d04-vue-loader-template\\\"}!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./menu.vue?vue&type=template&id=aaf3f05e&scoped=true&\"","import { ServerCircle } from \"@/game/comm/types/shapes\";\nimport { GlobalPoint, LocalPoint, Vector } from \"@/game/geom\";\nimport { BoundingRect } from \"@/game/shapes/boundingrect\";\nimport { Shape } from \"@/game/shapes/shape\";\nimport { gameStore } from \"@/game/store\";\nimport { calculateDelta } from \"@/game/ui/tools/utils\";\nimport { g2l, g2lz, l2g } from \"@/game/units\";\nimport { getFogColour } from \"@/game/utils\";\n\nexport class Circle extends Shape {\n    type = \"circle\";\n    r: number;\n    constructor(center: GlobalPoint, r: number, fillColour?: string, strokeColour?: string, uuid?: string) {\n        super(center, fillColour, strokeColour, uuid);\n        this.r = r || 1;\n    }\n    asDict(): ServerCircle {\n        // const base = <ServerCircle>this.getBaseDict();\n        // base.r = this.r;\n        // base.border = this.border;\n        // return base;\n        return Object.assign(this.getBaseDict(), {\n            radius: this.r,\n        });\n    }\n    fromDict(data: ServerCircle) {\n        super.fromDict(data);\n        this.r = data.radius;\n    }\n    getBoundingBox(): BoundingRect {\n        return new BoundingRect(\n            new GlobalPoint(this.refPoint.x - this.r, this.refPoint.y - this.r),\n            this.r * 2,\n            this.r * 2,\n        );\n    }\n\n    get points() {\n        return this.getBoundingBox().points;\n    }\n\n    draw(ctx: CanvasRenderingContext2D) {\n        super.draw(ctx);\n        ctx.beginPath();\n        if (this.fillColour === \"fog\") ctx.fillStyle = getFogColour();\n        else ctx.fillStyle = this.fillColour;\n        const loc = g2l(this.refPoint);\n        ctx.arc(loc.x, loc.y, g2lz(this.r), 0, 2 * Math.PI);\n        ctx.fill();\n        if (this.strokeColour !== \"rgba(0, 0, 0, 0)\") {\n            ctx.beginPath();\n            ctx.lineWidth = g2lz(5);\n            ctx.strokeStyle = this.strokeColour;\n            ctx.arc(loc.x, loc.y, g2lz(this.r), 0, 2 * Math.PI);\n            ctx.stroke();\n        }\n    }\n    contains(point: GlobalPoint): boolean {\n        return (point.x - this.refPoint.x) ** 2 + (point.y - this.refPoint.y) ** 2 < this.r ** 2;\n    }\n    center(): GlobalPoint;\n    center(centerPoint: GlobalPoint): void;\n    center(centerPoint?: GlobalPoint): GlobalPoint | void {\n        if (centerPoint === undefined) return this.refPoint;\n        this.refPoint = centerPoint;\n    }\n    visibleInCanvas(canvas: HTMLCanvasElement): boolean {\n        return this.getBoundingBox().visibleInCanvas(canvas);\n    } // TODO\n    snapToGrid() {\n        const gs = gameStore.gridSize;\n        let targetX;\n        let targetY;\n        if (((2 * this.r) / gs) % 2 === 0) {\n            targetX = Math.round(this.refPoint.x / gs) * gs;\n        } else {\n            targetX = Math.round((this.refPoint.x - gs / 2) / gs) * gs + this.r;\n        }\n        if (((2 * this.r) / gs) % 2 === 0) {\n            targetY = Math.round(this.refPoint.y / gs) * gs;\n        } else {\n            targetY = Math.round((this.refPoint.y - gs / 2) / gs) * gs + this.r;\n        }\n        const delta = calculateDelta(new Vector(targetX - this.refPoint.x, targetY - this.refPoint.y), this);\n        this.refPoint = this.refPoint.add(delta);\n        this.invalidate(false);\n    }\n    resizeToGrid() {\n        const gs = gameStore.gridSize;\n        this.r = Math.max(Math.round(this.r / gs) * gs, gs / 2);\n        this.invalidate(false);\n    }\n    resize(resizePoint: number, point: LocalPoint) {\n        const z = gameStore.zoomFactor;\n        const diff = l2g(point).subtract(this.refPoint);\n        this.r = Math.sqrt(Math.pow(diff.length(), 2) / 2);\n    }\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Tool from \"@/game/ui/tools/tool.vue\";\n\nimport { GlobalPoint } from \"@/game/geom\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { BaseRect } from \"@/game/shapes/baserect\";\nimport { Rect } from \"@/game/shapes/rect\";\nimport { gameStore } from \"@/game/store\";\nimport { l2g } from \"@/game/units\";\nimport { getMouse } from \"@/game/utils\";\nimport Component from \"vue-class-component\";\n\n@Component\nexport default class MapTool extends Tool {\n    name = \"Map\";\n    active = false;\n    xCount = 3;\n    yCount = 3;\n    startPoint: GlobalPoint | null = null;\n    rect: Rect | null = null;\n\n    onMouseDown(event: MouseEvent) {\n        const layer = layerManager.getLayer();\n        if (layer === undefined) {\n            console.log(\"No active layer!\");\n            return;\n        }\n        this.active = true;\n\n        this.startPoint = l2g(getMouse(event));\n        this.rect = new Rect(this.startPoint.clone(), 0, 0, \"rgba(0,0,0,0)\", \"black\");\n        layer.addShape(this.rect, false, false);\n    }\n    onMouseMove(event: MouseEvent) {\n        if (!this.active || this.rect === null || this.startPoint === null) return;\n        const layer = layerManager.getLayer();\n        if (layer === undefined) {\n            console.log(\"No active layer!\");\n            return;\n        }\n\n        const endPoint = l2g(getMouse(event));\n\n        this.rect.w = Math.abs(endPoint.x - this.startPoint.x);\n        this.rect.h = Math.abs(endPoint.y - this.startPoint.y);\n        this.rect.refPoint = new GlobalPoint(\n            Math.min(this.startPoint.x, endPoint.x),\n            Math.min(this.startPoint.y, endPoint.y),\n        );\n        layer.invalidate(false);\n    }\n    onMouseUp(event: MouseEvent) {\n        if (!this.active || this.rect === null) return;\n        const layer = layerManager.getLayer();\n        if (layer === undefined) {\n            console.log(\"No active layer!\");\n            return;\n        }\n        this.active = false;\n\n        if (layer.selection.length !== 1) {\n            layer.removeShape(this.rect, false, false);\n            return;\n        }\n\n        const w = this.rect.w;\n        const h = this.rect.h;\n        const sel = layer.selection[0];\n\n        if (sel instanceof BaseRect) {\n            sel.w *= (this.xCount * gameStore.gridSize) / w;\n            sel.h *= (this.yCount * gameStore.gridSize) / h;\n        }\n\n        layer.removeShape(this.rect, false, false);\n    }\n}\n","import { render, staticRenderFns } from \"./load.vue?vue&type=template&id=ff095222&\"\nimport script from \"./load.vue?vue&type=script&lang=ts&\"\nexport * from \"./load.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"load.vue\"\nexport default component.exports","import Tool from \"@/game/ui/tools/tool.vue\";\n\nimport { sendClientOptions } from \"@/game/api/utils\";\nimport { LocalPoint } from \"@/game/geom\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { gameStore } from \"@/game/store\";\nimport { getMouse } from \"@/game/utils\";\nimport Component from \"vue-class-component\";\n\n@Component\nexport default class PanTool extends Tool {\n    name = \"Pan\";\n    panStart = new LocalPoint(0, 0);\n    active = false;\n\n    onMouseDown(event: MouseEvent) {\n        this.panStart = getMouse(event);\n        this.active = true;\n    }\n    onMouseMove(event: MouseEvent) {\n        if (!this.active) return;\n        const mouse = getMouse(event);\n        const distance = mouse.subtract(this.panStart).multiply(1 / gameStore.zoomFactor);\n        gameStore.increasePanX(Math.round(distance.x));\n        gameStore.increasePanY(Math.round(distance.y));\n        this.panStart = mouse;\n        layerManager.invalidate();\n    }\n    onMouseUp(event: MouseEvent) {\n        this.active = false;\n        sendClientOptions();\n    }\n}\n","import { render, staticRenderFns } from \"./selectcontext.vue?vue&type=template&id=44a31e42&scoped=true&\"\nimport script from \"./selectcontext.vue?vue&type=script&lang=ts&\"\nexport * from \"./selectcontext.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./selectcontext.vue?vue&type=style&index=0&id=44a31e42&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"44a31e42\",\n  null\n  \n)\n\ncomponent.options.__file = \"selectcontext.vue\"\nexport default component.exports","import Vue from \"vue\";\n\nimport { app } from \"@/main\";\n\n// Reference: https://stackoverflow.com/questions/105034/create-guid-uuid-in-javascript\nexport function uuidv4() {\n    return \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g, c => {\n        const r = (Math.random() * 16) | 0;\n        const v = c === \"x\" ? r : (r & 0x3) | 0x8;\n        return v.toString(16);\n    });\n}\n\nexport function capitalize(text: string) {\n    return text.charAt(0).toUpperCase() + text.slice(1);\n}\n\nexport function alphSort(a: string, b: string) {\n    if (a.toLowerCase() < b.toLowerCase()) return -1;\n    else return 1;\n}\n\nexport function getHTMLFont(element: HTMLElement) {\n    let font = element.style.font;\n    while (font === null && element.parentElement !== null) {\n        element = element.parentElement;\n        font = element.style.font;\n    }\n    if (font === null) font = window.getComputedStyle(document.body).getPropertyValue(\"font\");\n    return font;\n}\n\nexport function getHTMLTextWidth(text: string, font: string): number {\n    let fakeElement = <HTMLCanvasElement>document.getElementById(\"emptycanvas\");\n    if (fakeElement === null) {\n        fakeElement = document.createElement(\"canvas\");\n        fakeElement.id = \"emptycanvas\";\n        fakeElement.style.display = \"\";\n        document.body.appendChild(fakeElement);\n    }\n    const ctx = fakeElement.getContext(\"2d\")!;\n    ctx.font = font;\n    return Math.ceil(ctx.measureText(text).width);\n}\n\nexport function partition<T>(arr: T[], predicate: (n: T) => boolean) {\n    const ret: T[][] = [[], []];\n    arr.forEach(n => (predicate(n) ? ret[1].push(n) : ret[0].push(n)));\n    return ret;\n}\n\nexport function calcFontScale(ctx: CanvasRenderingContext2D, text: string, width: number, height: number) {\n    const points = Number(ctx.font.split(\"px\")[0]) * 0.2;\n    const fontWidth = ctx.measureText(text).width;\n    return Math.min(width / fontWidth, height / points);\n}\n\nexport function fixedEncodeURIComponent(str: string) {\n    return encodeURIComponent(str).replace(/[!'()*]/g, c => {\n        return \"%\" + c.charCodeAt(0).toString(16);\n    });\n}\n\nexport class OrderedMap<K, V> {\n    keys: K[] = [];\n    values: V[] = [];\n\n    get length() {\n        return this.keys.length;\n    }\n\n    get(key: K) {\n        return this.values[this.keys.indexOf(key)];\n    }\n    getIndexValue(idx: number) {\n        return this.values[idx];\n    }\n    getIndexKey(idx: number) {\n        return this.keys[idx];\n    }\n    set(key: K, value: V) {\n        this.keys.push(key);\n        this.values.push(value);\n    }\n    has(key: K) {\n        return this.indexOf(key) >= 0;\n    }\n    indexOf(element: K) {\n        return this.keys.indexOf(element);\n    }\n    remove(element: K) {\n        const idx = this.indexOf(element);\n        this.keys.splice(idx, 1);\n        this.values.splice(idx, 1);\n    }\n}\n\nexport function getComponent<T extends Vue>(): T {\n    return <T>app.$children[0].$refs.activeComponent;\n}\n\nexport function getRef<T extends Vue>(ref: string): T {\n    const active = <Vue>app.$children[0].$refs.activeComponent;\n    return <T>active.$refs[ref];\n}\n","import { render, staticRenderFns } from \"./contextMenu.vue?vue&type=template&id=606797b4&\"\nimport script from \"./contextMenu.vue?vue&type=script&lang=ts&\"\nexport * from \"./contextMenu.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"contextMenu.vue\"\nexport default component.exports","import { EdgeCirculator, Point, Sign, Triangle, Vertex } from \"./tds\";\n\ntype Line = number[];\n\nexport function cw(index: number) {\n    return (index + 2) % 3;\n}\n\nexport function ccw(index: number) {\n    return (index + 1) % 3;\n}\n\nexport function edgeInfo(va: Vertex, vb: Vertex) {\n    const ec = new EdgeCirculator(va, null);\n    if (ec.valid) {\n        do {\n            const indv = 3 - ec.t!.indexV(va) - ec.ri;\n            const v = ec.t!.vertices[indv]!;\n            if (!v.infinite) {\n                if (v === vb) {\n                    return { includes: true, vi: vb, fr: ec.t!, i: ec.ri };\n                } else {\n                    const orient = orientation(va.point!, vb.point!, v.point!);\n                    if (orient === Sign.COLLINEAR && collinearBetween(va.point!, v.point!, vb.point!)) {\n                        return { includes: true, vi: v, fr: ec.t!, i: ec.ri };\n                    }\n                }\n            }\n        } while (ec.next());\n    }\n    return { includes: false };\n}\n\nexport function collinearBetween(p: Point, q: Point, r: Point): boolean {\n    let cPQ: Sign;\n    let cQR: Sign;\n    if (compare(0, p, r) === Sign.EQUAL) {\n        cPQ = compare(1, p, q);\n        cQR = compare(1, q, r);\n    } else {\n        cPQ = compare(0, p, q);\n        cQR = compare(0, q, r);\n    }\n    return (cPQ === Sign.SMALLER && cQR === Sign.SMALLER) || (cPQ === Sign.LARGER && cQR === Sign.LARGER);\n}\n\nfunction compare(index: number, a: Point, b: Point): Sign {\n    if (a[index] < b[index]) return Sign.SMALLER;\n    if (a[index] > b[index]) return Sign.LARGER;\n    return Sign.EQUAL;\n}\n\nexport function orientation(p: Point, q: Point, r: Point) {\n    const px = p[0];\n    const py = p[1];\n    const qx = q[0];\n    const qy = q[1];\n    const rx = r[0];\n    const ry = r[1];\n    const pqx = qx - px;\n    const pqy = qy - py;\n    const prx = rx - px;\n    const pry = ry - py;\n    const det = determinant(pqx, pqy, prx, pry);\n    let maxX = Math.abs(pqx);\n    let maxY = Math.abs(pqy);\n    const aprX = Math.abs(prx);\n    const aprY = Math.abs(pry);\n    if (maxX < aprX) maxX = aprX;\n    if (maxY < aprY) maxY = aprY;\n    if (maxX > maxY) [maxX, maxY] = [maxY, maxX];\n    // underflow proection in eps computation?? Math.sqrt(Number.MIN_VALUE, Number.EPSILON)\n    if (maxX < 2e-162 && maxX === 0) {\n        return Sign.ZERO;\n    }\n    // overflow protection in det computation\n    if (maxY < 1e153) {\n        const eps = Number.EPSILON * maxX * maxY;\n        if (det > eps) return Sign.POSITIVE;\n        if (det < -eps) return Sign.NEGATIVE;\n    }\n    return Sign.ZERO;\n}\n\nexport function determinant(a00: number, a01: number, a10: number, a11: number) {\n    return a00 * a11 - a01 * a10;\n}\n\nexport function hasInexactNegativeOrientation(p: Point, q: Point, r: Point) {\n    return determinant(q[0] - p[0], q[1] - p[1], r[0] - p[0], r[1] - p[1]) < 0;\n}\n\nexport function sideOfOrientedCircle(t: Triangle, p: Point, perturb: boolean): Sign {\n    if (!t.isInfinite())\n        return sideOfOrientedCircleP(t.vertices[0]!.point!, t.vertices[1]!.point!, t.vertices[2]!.point!, p, perturb);\n    throw new Error(\"SSS\");\n}\n\nfunction sideOfOrientedCircleP(p0: Point, p1: Point, p2: Point, p: Point, perturb: boolean): Sign {\n    const os = getOrientedSide(p0, p1, p2, p);\n    if (os !== Sign.ON_ORIENTED_BOUNDARY || !perturb) return os;\n    const points = [p0, p1, p2, p];\n    points.sort((a, b) => a[0] - b[0] || a[1] - b[1]);\n    for (const point of points.reverse()) {\n        if (point === p) return Sign.ON_NEGATIVE_SIDE;\n        let o = orientation(p0, p1, p);\n        if (point === p2 && o !== Sign.COLLINEAR) return o;\n        o = orientation(p0, p, p2);\n        if (point === p1 && o !== Sign.COLLINEAR) return o;\n        o = orientation(p, p1, p2);\n        if (point === p0 && o !== Sign.COLLINEAR) return o;\n    }\n    return Sign.ON_NEGATIVE_SIDE;\n}\n\nexport function xyEqual(p: Point, q: Point) {\n    return p[0] === q[0] && p[1] === q[1];\n}\n\nexport function xySmaller(p: Point, q: Point) {\n    return p[0] < q[0] || (p[0] === q[0] && p[1] < q[1]);\n}\n\nexport function xyCompare(p: Point, q: Point) {\n    if (xySmaller(p, q)) return Sign.SMALLER;\n    if (xyEqual(p, q)) return Sign.EQUAL;\n    return Sign.LARGER;\n}\n\nfunction getOrientedSide(p: Point, q: Point, r: Point, t: Point): Sign {\n    const qpx = q[0] - p[0];\n    const qpy = q[1] - p[1];\n    const rpx = r[0] - p[0];\n    const rpy = r[1] - p[1];\n    const tpx = t[0] - p[0];\n    const tpy = t[1] - p[1];\n    const tqx = t[0] - q[0];\n    const tqy = t[1] - q[1];\n    const rqx = r[0] - q[0];\n    const rqy = r[1] - q[1];\n\n    const det = determinant(qpx * tpy - qpy * tpx, tpx * tqx + tpy * tqy, qpx * rpy - qpy * rpx, rpx * rqx + rpy * rqy);\n    let maxx = Math.abs(qpx);\n    let maxy = Math.abs(qpy);\n    const arpx = Math.abs(rpx);\n    const arpy = Math.abs(rpy);\n    const atqx = Math.abs(tqx);\n    const atqy = Math.abs(tqy);\n    const atpx = Math.abs(tpx);\n    const atpy = Math.abs(tpy);\n    const arqx = Math.abs(rqx);\n    const arqy = Math.abs(rqy);\n\n    if (maxx < arpx) maxx = arpx;\n    if (maxx < atpx) maxx = atpx;\n    if (maxx < atqx) maxx = atqx;\n    if (maxx < arqx) maxx = arqx;\n\n    if (maxy < arpy) maxy = arpy;\n    if (maxy < atpy) maxy = atpy;\n    if (maxy < atqy) maxy = atqy;\n    if (maxy < arqy) maxy = arqy;\n\n    if (maxx > maxy) [maxx, maxy] = [maxy, maxx];\n\n    if (maxx < 1e-73 && maxx === 0) return Sign.ON_ORIENTED_BOUNDARY;\n    // sqrt(sqrt(max_double/16\n    else if (maxy < 1e76) {\n        const eps = Number.EPSILON * maxx * maxy * (maxy * maxy);\n        if (det > eps) return Sign.ON_POSITIVE_SIDE;\n        if (det < -eps) return Sign.ON_NEGATIVE_SIDE;\n    }\n\n    return Sign.ZERO;\n}\n\nfunction segSegDoIntersectCrossing(p1: Point, p2: Point, p3: Point, p4: Point): boolean {\n    switch (orientation(p1, p2, p3)) {\n        case Sign.LEFT_TURN:\n            return orientation(p3, p4, p2) !== Sign.RIGHT_TURN;\n        case Sign.RIGHT_TURN:\n            return orientation(p3, p4, p2) !== Sign.LEFT_TURN;\n        case Sign.COLLINEAR:\n            return true;\n    }\n}\n\nfunction segSegDoIntersectContained(p1: Point, p2: Point, p3: Point, p4: Point): boolean {\n    switch (orientation(p1, p2, p3)) {\n        case Sign.LEFT_TURN:\n            return orientation(p1, p2, p4) !== Sign.LEFT_TURN;\n        case Sign.RIGHT_TURN:\n            return orientation(p1, p2, p4) !== Sign.RIGHT_TURN;\n        case Sign.COLLINEAR:\n            return true;\n    }\n}\n\nexport function intersection(pa: Point, pb: Point, pc: Point, pd: Point) {\n    const i = getIntersectionType(pa, pb, pc, pd);\n    switch (i.intersectionType) {\n        case IntersectionType.POINT:\n            return i.point!;\n        case IntersectionType.NO_INTERSECTION:\n            return null;\n    }\n    throw new Error(\"sdfgighowen\");\n}\n\nenum IntersectionType {\n    NO_INTERSECTION,\n    POINT,\n    SEGMENT,\n}\n\nfunction getLine(p0: Point, p1: Point): Line {\n    if (p0[0] === p1[0]) return [1, 0, -p0[0]];\n    if (p0[1] === p1[1]) return [0, 1, -p0[1]];\n    const x = p1[0] - p0[0];\n    const y = p1[1] - p0[1];\n    return [-y, x, -x * p0[1] + y * p0[0]];\n}\n\nfunction getIntersectionType(pa: Point, pb: Point, pc: Point, pd: Point) {\n    if (!doIntersect(pa, pb, pc, pd)) return { intersectionType: IntersectionType.NO_INTERSECTION, point: null };\n    const l1 = getLine(pa, pb);\n    const l2 = getLine(pc, pd);\n    const info = getIntersectionTypeLine(l1, l2);\n    switch (info.intersectionType) {\n        case IntersectionType.POINT: {\n            return info;\n        }\n    }\n    throw new Error(\"gzseuihgpib\");\n}\n\nfunction getIntersectionTypeLine(la: Line, lb: Line) {\n    const denom = la[0] * lb[1] - lb[0] * la[1];\n    const nom1 = la[1] * lb[2] - lb[1] * la[2];\n    const nom2 = lb[0] * la[2] - la[0] * lb[2];\n    return {\n        intersectionType: IntersectionType.POINT,\n        point: [nom1 / denom, nom2 / denom],\n    };\n}\n\nfunction doIntersect(A1: Point, A2: Point, B1: Point, B2: Point): boolean {\n    if (xySmaller(A1, A2)) {\n        if (xySmaller(B1, B2)) {\n            if (xySmaller(A2, B1) || xySmaller(B2, A1)) return false;\n        } else {\n            if (xySmaller(A2, B2) || xySmaller(B1, A1)) return false;\n        }\n    } else {\n        if (xySmaller(B1, B2)) {\n            if (xySmaller(A1, B1) || xySmaller(B2, A2)) return false;\n        } else {\n            if (xySmaller(A1, B2) || xySmaller(B1, A2)) return false;\n        }\n    }\n    if (xySmaller(A1, A2)) {\n        if (xySmaller(B1, B2)) {\n            switch (xyCompare(A1, B1)) {\n                case Sign.SMALLER: {\n                    switch (xyCompare(A2, B1)) {\n                        case Sign.SMALLER:\n                            return false;\n                        case Sign.EQUAL:\n                            return true;\n                        default: {\n                            switch (xyCompare(A2, B2)) {\n                                case Sign.SMALLER:\n                                    return segSegDoIntersectCrossing(A1, A2, B1, B2);\n                                case Sign.EQUAL:\n                                    return true;\n                                default:\n                                    return segSegDoIntersectContained(A1, A2, B1, B2);\n                            }\n                        }\n                    }\n                }\n                case Sign.EQUAL:\n                    return true;\n                default:\n                    switch (xyCompare(B2, A1)) {\n                        case Sign.SMALLER:\n                            return false;\n                        case Sign.EQUAL:\n                            return true;\n                        default: {\n                            switch (xyCompare(B2, A2)) {\n                                case Sign.SMALLER:\n                                    return segSegDoIntersectCrossing(B1, B2, A1, A2);\n                                case Sign.EQUAL:\n                                    return true;\n                                default:\n                                    return segSegDoIntersectContained(B1, B2, A1, A2);\n                            }\n                        }\n                    }\n            }\n        } else {\n            switch (xyCompare(A1, B2)) {\n                case Sign.SMALLER: {\n                    switch (xyCompare(A2, B2)) {\n                        case Sign.SMALLER:\n                            return false;\n                        case Sign.EQUAL:\n                            return true;\n                        default: {\n                            switch (xyCompare(A2, B1)) {\n                                case Sign.SMALLER:\n                                    return segSegDoIntersectCrossing(A1, A2, B2, B1);\n                                case Sign.EQUAL:\n                                    return true;\n                                default:\n                                    return segSegDoIntersectContained(A1, A2, B2, B1);\n                            }\n                        }\n                    }\n                }\n                case Sign.EQUAL:\n                    return true;\n                default:\n                    switch (xyCompare(B1, A1)) {\n                        case Sign.SMALLER:\n                            return false;\n                        case Sign.EQUAL:\n                            return true;\n                        default: {\n                            switch (xyCompare(B1, A2)) {\n                                case Sign.SMALLER:\n                                    return segSegDoIntersectCrossing(B2, B1, A1, A2);\n                                case Sign.EQUAL:\n                                    return true;\n                                default:\n                                    return segSegDoIntersectContained(B2, B1, A1, A2);\n                            }\n                        }\n                    }\n            }\n        }\n    } else {\n        if (xySmaller(B1, B2)) {\n            switch (xyCompare(A2, B1)) {\n                case Sign.SMALLER: {\n                    switch (xyCompare(A1, B1)) {\n                        case Sign.SMALLER:\n                            return false;\n                        case Sign.EQUAL:\n                            return true;\n                        default: {\n                            switch (xyCompare(A1, B2)) {\n                                case Sign.SMALLER:\n                                    return segSegDoIntersectCrossing(A2, A1, B1, B2);\n                                case Sign.EQUAL:\n                                    return true;\n                                default:\n                                    return segSegDoIntersectContained(A2, A1, B1, B2);\n                            }\n                        }\n                    }\n                }\n                case Sign.EQUAL:\n                    return true;\n                default:\n                    switch (xyCompare(B2, A2)) {\n                        case Sign.SMALLER:\n                            return false;\n                        case Sign.EQUAL:\n                            return true;\n                        default: {\n                            switch (xyCompare(B2, A1)) {\n                                case Sign.SMALLER:\n                                    return segSegDoIntersectCrossing(B1, B2, A2, A1);\n                                case Sign.EQUAL:\n                                    return true;\n                                default:\n                                    return segSegDoIntersectContained(B1, B2, A2, A1);\n                            }\n                        }\n                    }\n            }\n        } else {\n            switch (xyCompare(A2, B2)) {\n                case Sign.SMALLER: {\n                    switch (xyCompare(A1, B2)) {\n                        case Sign.SMALLER:\n                            return false;\n                        case Sign.EQUAL:\n                            return true;\n                        default: {\n                            switch (xyCompare(A1, B1)) {\n                                case Sign.SMALLER:\n                                    return segSegDoIntersectCrossing(A2, A1, B2, B1);\n                                case Sign.EQUAL:\n                                    return true;\n                                default:\n                                    return segSegDoIntersectContained(A2, A1, B2, B1);\n                            }\n                        }\n                    }\n                }\n                case Sign.EQUAL:\n                    return true;\n                default:\n                    switch (xyCompare(B1, A2)) {\n                        case Sign.SMALLER:\n                            return false;\n                        case Sign.EQUAL:\n                            return true;\n                        default: {\n                            switch (xyCompare(B1, A1)) {\n                                case Sign.SMALLER:\n                                    return segSegDoIntersectCrossing(B2, B1, A2, A1);\n                                case Sign.EQUAL:\n                                    return true;\n                                default:\n                                    return segSegDoIntersectContained(B2, B1, A2, A1);\n                            }\n                        }\n                    }\n            }\n        }\n    }\n}\n\nfunction nextUp(x: number) {\n    if (x !== x) {\n        return x;\n    }\n    if (x === -1 / 0) {\n        return -Number.MAX_VALUE;\n    }\n    if (x === +1 / 0) {\n        return +1 / 0;\n    }\n    if (x === +Number.MAX_VALUE) {\n        return +1 / 0;\n    }\n    let y = x * (x < 0 ? 1 - Number.EPSILON / 2 : 1 + Number.EPSILON);\n    if (y === x) {\n        y = Number.MIN_VALUE * Number.EPSILON > 0 ? x + Number.MIN_VALUE * Number.EPSILON : x + Number.MIN_VALUE;\n    }\n    if (y === +1 / 0) {\n        y = +Number.MAX_VALUE;\n    }\n    const b = x + (y - x) / 2;\n    if (x < b && b < y) {\n        y = b;\n    }\n    const c = (y + x) / 2;\n    if (x < c && c < y) {\n        y = c;\n    }\n    return y === 0 ? -0 : y;\n}\n\nexport function ulp(x: number) {\n    return x < 0 ? nextUp(x) - x : x + nextUp(-x);\n}\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./asset_node.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./asset_node.vue?vue&type=script&lang=ts&\"","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\nimport { Prop } from \"vue-property-decorator\";\n\n@Component\nexport default class Modal extends Vue {\n    @Prop(Boolean) visible!: boolean;\n    @Prop({ type: Boolean, default: true }) mask!: boolean;\n\n    $refs!: {\n        container: HTMLElement;\n    };\n\n    positioned = false;\n    offsetX = 0;\n    offsetY = 0;\n    screenX = 0;\n    screenY = 0;\n    dragging = false;\n\n    // Example of mounted required: opening note\n    mounted() {\n        this.updatePosition();\n    }\n    // Example of updated required: opening initiative\n    updated() {\n        this.updatePosition();\n    }\n\n    close(event: MouseEvent) {\n        this.$emit(\"close\");\n    }\n    updatePosition() {\n        if (!this.positioned) {\n            const container = <any>this.$refs.container;\n            if (container.offsetWidth === 0 && container.offsetHeight === 0) return;\n            this.$refs.container.style.left = (window.innerWidth - container.offsetWidth) / 2 + \"px\";\n            this.$refs.container.style.top = (window.innerHeight - container.offsetHeight) / 2 + \"px\";\n            this.positioned = true;\n        }\n    }\n    dragStart(event: DragEvent) {\n        if (event === null || event.dataTransfer === null) return;\n        event.dataTransfer.setData(\"Hack\", \"\");\n        // Because the drag event is happening on the header, we have to change the drag image\n        // in order to give the impression that the entire modal is dragged.\n        event.dataTransfer.setDragImage(<Element>this.$refs.container, event.offsetX, event.offsetY);\n        this.offsetX = event.offsetX;\n        this.offsetY = event.offsetY;\n        this.screenX = event.screenX;\n        this.screenY = event.screenY;\n        this.dragging = true;\n    }\n    dragEnd(event: DragEvent) {\n        this.dragging = false;\n        let left = event.clientX - this.offsetX;\n        let top = event.clientY - this.offsetY;\n        if (event.clientX === 0 && event.clientY === 0 && event.pageX === 0 && event.pageY === 0) {\n            left = parseInt(this.$refs.container.style.left!, 10) - (this.screenX - event.screenX);\n            top = parseInt(this.$refs.container.style.top!, 10) - (this.screenY - event.screenY);\n        }\n        if (left < 0) left = 0;\n        if (left > window.innerWidth - 100) left = window.innerWidth - 100;\n        if (top < 0) top = 0;\n        if (top > window.innerHeight - 100) top = window.innerHeight - 100;\n        this.$refs.container.style.left = left + \"px\";\n        this.$refs.container.style.top = top + \"px\";\n        this.$refs.container.style.display = \"block\";\n    }\n    dragOver(event: DragEvent) {\n        if (this.dragging) this.$refs.container.style.display = \"none\";\n    }\n}\n","import io from \"socket.io-client\";\n\nimport { Asset } from \"@/core/comm/types\";\nimport { assetStore } from \"./store\";\n\nexport const socket = io(location.protocol + \"//\" + location.host + \"/pa_assetmgmt\", { autoConnect: false });\n\n// export const socket = io.connect(location.protocol + \"//\" + location.host + \"/pa_assetmgmt\");\nsocket.on(\"connect\", () => {\n    console.log(\"Connected\");\n});\nsocket.on(\"disconnect\", () => {\n    console.log(\"Disconnected\");\n});\nsocket.on(\"redirect\", (destination: string) => {\n    console.log(\"redirecting\");\n    window.location.href = destination;\n});\nsocket.on(\"Folder.Root.Set\", (root: number) => {\n    assetStore.setRoot(root);\n});\nsocket.on(\"Folder.Set\", (folder: Asset) => {\n    assetStore.clear();\n    if (folder.children) {\n        for (const child of folder.children) {\n            assetStore.idMap.set(child.id, child);\n            if (child.file_hash) {\n                assetStore.files.push(child.id);\n            } else {\n                assetStore.folders.push(child.id);\n            }\n        }\n    }\n});\nsocket.on(\"Folder.Create\", (folder: Asset) => {\n    assetStore.folders.push(folder.id);\n    assetStore.idMap.set(folder.id, folder);\n});\nsocket.on(\"Asset.Upload.Finish\", (asset: Asset) => {\n    assetStore.idMap.set(asset.id, asset);\n    assetStore.files.push(asset.id);\n});\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Component from \"vue-class-component\";\n\nimport Tool from \"@/game/ui/tools/tool.vue\";\n\nimport { layerManager } from '@/game/layers/manager';\nimport { gameStore } from '@/game/store';\n\n\n@Component({})\nexport default class FilterTool extends Tool {\n    name = \"Filter\";\n    active = false;\n\n    isFilter(uuid: string): boolean {\n        return gameStore.labelFilters.includes(uuid);\n    }\n\n    // Cannot be a computed value due to Map reactivity limits\n    labels() {\n        const labels = [];\n        for (const label of gameStore.labels.values()) labels.push(...Array.from(label));\n        return labels;\n    }\n\n    toggleFilter(uuid: string) {\n        const i = gameStore.labelFilters.indexOf(uuid);\n        if (i >= 0) gameStore.labelFilters.splice(i, 1);\n        else gameStore.labelFilters.push(uuid);\n        layerManager.invalidate();\n    }\n\n    toggleUnlabeled() {\n        gameStore.toggleUnlabeledFilter();\n        layerManager.invalidate();\n    }\n\n}\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./game.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./game.vue?vue&type=style&index=0&lang=css&\"","import { GlobalPoint, LocalPoint } from \"@/game/geom\";\nimport { BoundingRect } from \"@/game/shapes/boundingrect\";\nimport { Shape } from \"@/game/shapes/shape\";\nimport { g2lx, g2ly, g2lz, l2g } from \"@/game/units\";\nimport { getFogColour } from \"@/game/utils\";\nimport { ServerMultiLine } from \"../comm/types/shapes\";\n\nexport class MultiLine extends Shape {\n    type = \"multiline\";\n    _points: GlobalPoint[] = [];\n    lineWidth: number;\n    constructor(\n        startPoint: GlobalPoint,\n        points?: GlobalPoint[],\n        lineWidth?: number,\n        strokeColour?: string,\n        uuid?: string,\n    ) {\n        super(startPoint, \"rgba(0, 0, 0, 0)\", strokeColour || \"#000\", uuid);\n        this._points = points || [];\n        this.lineWidth = lineWidth || 3;\n    }\n\n    get refPoint() {\n        return this._refPoint;\n    }\n    set refPoint(point: GlobalPoint) {\n        const delta = point.subtract(this._refPoint);\n        this._refPoint = point;\n        for (let i = 0; i < this._points.length; i++) this._points[i] = this._points[i].add(delta);\n    }\n\n    asDict() {\n        return Object.assign(this.getBaseDict(), {\n            line_width: this.lineWidth,\n            points: this._points.map(p => ({ x: p.x, y: p.y })),\n        });\n    }\n    fromDict(data: ServerMultiLine) {\n        super.fromDict(data);\n        this._points = data.points.map(p => new GlobalPoint(p.x, p.y));\n    }\n    get points() {\n        return this._points.map(point => [point.x, point.y]);\n    }\n    getBoundingBox(): BoundingRect {\n        let minx: number = this.refPoint.x;\n        let maxx: number = this.refPoint.x;\n        let miny: number = this.refPoint.y;\n        let maxy: number = this.refPoint.y;\n        for (const p of this._points) {\n            if (p.x < minx) minx = p.x;\n            if (p.x > maxx) maxx = p.x;\n            if (p.y < miny) miny = p.y;\n            if (p.y > maxy) maxy = p.y;\n        }\n        return new BoundingRect(new GlobalPoint(minx, miny), maxx - minx, maxy - miny);\n    }\n    draw(ctx: CanvasRenderingContext2D) {\n        super.draw(ctx);\n        ctx.beginPath();\n        ctx.lineCap = \"round\";\n        ctx.lineJoin = \"round\";\n        ctx.moveTo(g2lx(this.refPoint.x), g2ly(this.refPoint.y));\n        for (const p of this._points) ctx.lineTo(g2lx(p.x), g2ly(p.y));\n        if (this.strokeColour === \"fog\") ctx.strokeStyle = getFogColour();\n        else ctx.strokeStyle = this.strokeColour;\n        ctx.lineWidth = g2lz(this.lineWidth);\n        ctx.stroke();\n    }\n    contains(point: GlobalPoint): boolean {\n        return this.getBoundingBox().contains(point);\n    }\n\n    center(): GlobalPoint;\n    center(centerPoint: GlobalPoint): void;\n    center(centerPoint?: GlobalPoint): GlobalPoint | void {\n        return this.getBoundingBox().center();\n    }\n    visibleInCanvas(canvas: HTMLCanvasElement): boolean {\n        return this.getBoundingBox().visibleInCanvas(canvas);\n    } // TODO\n    snapToGrid(): void {}\n    resizeToGrid(): void {}\n    resize(resizePoint: number, point: LocalPoint): void {\n        if (resizePoint === 0) this._refPoint = l2g(point);\n        else this._points[resizePoint - 1] = l2g(point);\n    }\n}\n","import { render, staticRenderFns } from \"./draw.vue?vue&type=template&id=639cd890&scoped=true&\"\nimport script from \"./draw.vue?vue&type=script&lang=ts&\"\nexport * from \"./draw.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./draw.vue?vue&type=style&index=0&id=639cd890&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"639cd890\",\n  null\n  \n)\n\ncomponent.options.__file = \"draw.vue\"\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('modal',{attrs:{\"visible\":_vm.visible,\"mask\":false},on:{\"close\":function($event){_vm.visible = false}},scopedSlots:_vm._u([{key:\"header\",fn:function(m){return _c('div',{staticClass:\"modal-header\",attrs:{\"draggable\":\"true\"},on:{\"dragstart\":m.dragStart,\"dragend\":m.dragEnd}},[_c('div',[_vm._v(\"Initiative\")]),_c('div',{staticClass:\"header-close\",on:{\"click\":function($event){_vm.visible = false}}},[_c('i',{staticClass:\"far fa-window-close\"})])])}}])},[_c('div',{staticClass:\"modal-body\"},[_c('draggable',{attrs:{\"id\":\"initiative-list\",\"options\":{setData: _vm.fakeSetData, disabled: !_vm.$store.state.game.IS_DM}},on:{\"change\":_vm.updateOrder},model:{value:(_vm.data),callback:function ($$v) {_vm.data=$$v},expression:\"data\"}},[_vm._l((_vm.data),function(actor){return [_c('div',{key:actor.uuid,staticStyle:{\"display\":\"flex\",\"flex-direction\":\"column\",\"align-items\":\"flex-end\"}},[_c('div',{staticClass:\"initiative-actor\",class:{'initiative-selected': _vm.currentActor === actor.uuid},style:({'cursor': _vm.$store.state.game.IS_DM && 'move'}),on:{\"mouseenter\":function($event){_vm.toggleHighlight(actor, true)},\"mouseleave\":function($event){_vm.toggleHighlight(actor, false)}}},[(actor.has_img)?[_c('img',{attrs:{\"src\":actor.source,\"width\":\"30px\",\"height\":\"30px\"}})]:[_c('span',{staticStyle:{\"width\":\"auto\"}},[_vm._v(_vm._s(actor.source))])],_c('input',{directives:[{name:\"model\",rawName:\"v-model.lazy.number\",value:(actor.initiative),expression:\"actor.initiative\",modifiers:{\"lazy\":true,\"number\":true}}],class:{'notAllowed': !_vm.owns(actor)},attrs:{\"type\":\"text\",\"placeholder\":\"value\",\"disabled\":!_vm.owns(actor)},domProps:{\"value\":(actor.initiative)},on:{\"change\":[function($event){_vm.$set(actor, \"initiative\", _vm._n($event.target.value))},function($event){_vm.syncInitiative(actor)}],\"blur\":function($event){_vm.$forceUpdate()}}}),_c('div',{staticClass:\"initiative-effects-icon\",class:{'notAllowed': !_vm.owns(actor)},staticStyle:{\"opacity\":\"0.6\"},on:{\"click\":function($event){_vm.createEffect(actor, _vm.getDefaultEffect(), true)}}},[_c('i',{staticClass:\"fas fa-stopwatch\"}),(actor.effects)?[_vm._v(_vm._s(actor.effects.length))]:[_vm._v(\"0\")]],2),_c('div',{class:{'notAllowed': !_vm.owns(actor)},style:({'opacity': actor.visible ? '1.0' : '0.3'}),on:{\"click\":function($event){_vm.toggleOption(actor, 'visible')}}},[_c('i',{staticClass:\"fas fa-eye\"})]),_c('div',{class:{'notAllowed': !_vm.owns(actor)},style:({'opacity': actor.group ? '1.0' : '0.3'}),on:{\"click\":function($event){_vm.toggleOption(actor, 'group')}}},[_c('i',{staticClass:\"fas fa-users\"})]),_c('div',{class:{'notAllowed': !_vm.owns(actor)},style:({'opacity': _vm.owns(actor) ? '1.0' : '0.3'}),on:{\"click\":function($event){_vm.removeInitiative(actor.uuid, true, true)}}},[_c('i',{staticClass:\"fas fa-trash-alt\"})])],2),(actor.effects)?_c('div',{staticClass:\"initiative-effect\"},_vm._l((actor.effects),function(effect){return _c('div',{key:effect.uuid},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(effect.name),expression:\"effect.name\"}],attrs:{\"type\":\"text\",\"size\":effect.name.length || 1},domProps:{\"value\":(effect.name)},on:{\"change\":function($event){_vm.updateEffect(actor.uuid, effect, true)},\"input\":function($event){if($event.target.composing){ return; }_vm.$set(effect, \"name\", $event.target.value)}}}),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(effect.turns),expression:\"effect.turns\"}],attrs:{\"type\":\"text\",\"size\":effect.turns.toString().length || 1},domProps:{\"value\":(effect.turns)},on:{\"change\":function($event){_vm.updateEffect(actor.uuid, effect, true)},\"input\":function($event){if($event.target.composing){ return; }_vm.$set(effect, \"turns\", $event.target.value)}}})])})):_vm._e()])]})],2),_c('div',{attrs:{\"id\":\"initiative-bar\"}},[_c('div',{attrs:{\"id\":\"initiative-round\"}},[_vm._v(\"Round \"+_vm._s(_vm.roundCounter))]),_c('div',{staticStyle:{\"display\":\"flex\"}}),_c('div',{staticClass:\"initiative-bar-button\",class:{'notAllowed': !_vm.$store.state.game.IS_DM},on:{\"click\":function($event){_vm.setRound(0, true); _vm.updateTurn(_vm.data[0].uuid, true)}}},[_c('i',{staticClass:\"fas fa-sync-alt\"})]),_c('div',{staticClass:\"initiative-bar-button\",class:{'notAllowed': !_vm.$store.state.game.IS_DM},on:{\"click\":_vm.nextTurn}},[_c('i',{staticClass:\"fas fa-chevron-right\"})])])],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"74f43d04-vue-loader-template\\\"}!../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./initiative.vue?vue&type=template&id=af4dc61a&scoped=true&\"","import tinycolor from \"tinycolor2\";\n\nimport { LocalPoint } from \"@/game/geom\";\nimport { gameStore } from \"@/game/store\";\n\nexport function getMouse(e: MouseEvent): LocalPoint {\n    return new LocalPoint(e.pageX, e.pageY);\n}\n\nexport function getFogColour(opposite: boolean = false): string {\n    const tc = tinycolor(gameStore.fowColour);\n    if (gameStore.IS_DM) tc.setAlpha(opposite ? 1 : gameStore.fowOpacity);\n    else tc.setAlpha(1);\n    return tc.toRgbString();\n}\n\nexport function zoomValue(display: number) {\n    // Powercurve 0.2/3/10\n    // Based on https://stackoverflow.com/a/17102320\n    return 1 / (-5 / 3 + (28 / 15) * Math.exp(1.83 * display));\n}\n\nexport function zoomDisplay(value: number) {\n    return Math.log((1 / value + 5 / 3) * (15 / 28)) / 1.83;\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport * as tinycolor from \"tinycolor2\";\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\n\nimport { mapState } from \"vuex\";\n\nimport ColorPicker from \"@/core/components/colorpicker.vue\";\nimport Modal from \"@/core/components/modals/modal.vue\";\n\nimport { calcFontScale } from \"@/core/utils\";\nimport { LocalPoint } from \"@/game/geom\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { CircularToken } from \"@/game/shapes/circulartoken\";\nimport { gameStore } from \"@/game/store\";\nimport { getUnitDistance, l2g } from \"@/game/units\";\nimport { Watch } from \"vue-property-decorator\";\n\n@Component({\n    components: {\n        Modal,\n        \"color-picker\": ColorPicker,\n    },\n    computed: {\n        ...mapState(\"game\", [\"unitSize\"]),\n    },\n})\nexport default class CreateTokenModal extends Vue {\n    x = 0;\n    y = 0;\n    visible = false;\n    text = \"X\";\n    fillColour = \"rgba(255, 255, 255, 1)\";\n    borderColour = \"rgba(0, 0, 0, 1)\";\n\n    mounted() {\n        this.updatePreview();\n    }\n\n    @Watch(\"text\")\n    onTextChange(newValue: string, oldValue: string) {\n        this.updatePreview();\n    }\n    @Watch(\"fillColour\")\n    onFillChange(newValue: string, oldValue: string) {\n        this.updatePreview();\n    }\n    @Watch(\"borderColour\")\n    onBorderChange(newValue: string, oldValue: string) {\n        this.updatePreview();\n    }\n\n    open(x: number, y: number) {\n        this.visible = true;\n        this.x = x;\n        this.y = y;\n    }\n    submit() {\n        const layer = layerManager.getLayer();\n        if (layer === undefined) return;\n        const token = new CircularToken(\n            l2g(new LocalPoint(this.x, this.y)),\n            getUnitDistance(gameStore.unitSize / 2),\n            this.text,\n            \"10px serif\",\n            this.fillColour,\n            this.borderColour,\n        );\n        token.addOwner(gameStore.username);\n        layer.addShape(token, true);\n        layer.invalidate(false);\n        this.visible = false;\n    }\n    updatePreview() {\n        const ctx = (<HTMLCanvasElement>this.$refs.canvas).getContext(\"2d\")!;\n        ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n        ctx.beginPath();\n        const dest = { x: ctx.canvas.width / 2, y: ctx.canvas.height / 2 };\n        const r = Math.min(dest.x, dest.y) * 0.9;\n\n        ctx.fillStyle = this.fillColour;\n\n        ctx.arc(dest.x, dest.y, r, 0, 2 * Math.PI);\n        ctx.fill();\n        if (this.borderColour !== \"rgba(0, 0, 0, 0)\") {\n            ctx.beginPath();\n            ctx.lineWidth = 5;\n            ctx.strokeStyle = this.borderColour;\n            ctx.arc(dest.x, dest.y, r, 0, 2 * Math.PI);\n            ctx.stroke();\n        }\n        ctx.save();\n        ctx.textAlign = \"center\";\n        ctx.textBaseline = \"middle\";\n        const xs = calcFontScale(ctx, this.text, r, r);\n        const ys = 0;\n        ctx.transform(xs, ys, -ys, xs, dest.x, dest.y);\n        ctx.fillStyle = tinycolor.mostReadable(this.fillColour, [\"#000\", \"#fff\"]).toHexString();\n        ctx.fillText(this.text, 0, 0);\n        ctx.restore();\n    }\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\n\nimport ConfirmDialog from \"@/core/components/modals/confirm.vue\";\nimport Modal from \"@/core/components/modals/modal.vue\";\n\nimport { getRef } from \"@/core/utils\";\nimport { Note } from \"@/game/comm/types/general\";\nimport { gameStore } from \"@/game/store\";\n\n@Component({\n    components: {\n        Modal,\n    },\n})\nexport default class NoteDialog extends Vue {\n    visible = false;\n    note: Note | null = null;\n\n    open(note: Note) {\n        this.visible = true;\n        this.note = note;\n    }\n    calcHeight() {\n        if (this.$refs.textarea) {\n            const el = <HTMLElement>this.$refs.textarea;\n            el.style.height = \"auto\";\n            el.style.height = el.scrollHeight + \"px\";\n            // Using the return value without the above did not achieve what I want, so hey /shrug\n            return el.scrollHeight + \"px\";\n        }\n        return \"100px\";\n    }\n    updateNote() {\n        if (this.note) gameStore.updateNote({ note: this.note, sync: true });\n    }\n    removeNote() {\n        getRef<ConfirmDialog>(\"confirm\")\n            .open(\"Are you sure you wish to remove this?\")\n            .then(\n                (result: boolean) => {\n                    if (result && this.note) {\n                        gameStore.removeNote({ note: this.note, sync: true });\n                        this.visible = false;\n                    }\n                },\n                () => {},\n            );\n    }\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Component from \"vue-class-component\";\n\nimport { Watch } from \"vue-property-decorator\";\n\nimport ColorPicker from \"@/core/components/colorpicker.vue\";\nimport Tool from \"@/game/ui/tools/tool.vue\";\n\nimport { socket } from \"@/game/api/socket\";\nimport { GlobalPoint } from \"@/game/geom\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { Circle } from \"@/game/shapes/circle\";\nimport { Line } from \"@/game/shapes/line\";\nimport { MultiLine } from \"@/game/shapes/multiline\";\nimport { Polygon } from \"@/game/shapes/polygon\";\nimport { Rect } from \"@/game/shapes/rect\";\nimport { Shape } from \"@/game/shapes/shape\";\nimport { gameStore } from \"@/game/store\";\nimport { getUnitDistance, l2g } from \"@/game/units\";\nimport { getMouse } from \"@/game/utils\";\n\n@Component({\n    components: {\n        \"color-picker\": ColorPicker,\n    },\n})\nexport default class DrawTool extends Tool {\n    name = \"Draw\";\n    active = false;\n\n    startPoint: GlobalPoint | null = null;\n    shape: Shape | null = null;\n    brushHelper: Circle | null = null;\n    ruler: Line | null = null;\n\n    fillColour = \"rgba(0, 0, 0, 1)\";\n    borderColour = \"rgba(255, 255, 255, 0)\";\n\n    shapeSelect = \"square\";\n    shapes = [\"square\", \"circle\", \"draw-polygon\", \"paint-brush\"];\n    modeSelect = \"normal\";\n    modes = [\"normal\", \"reveal\", \"hide\"];\n\n    brushSize = getUnitDistance(gameStore.unitSize);\n\n    get helperSize(): number {\n        if (this.shapeSelect === \"paint-brush\") return this.brushSize / 2;\n        return getUnitDistance(this.unitSize) / 8;\n    }\n    get IS_DM(): boolean {\n        return gameStore.IS_DM;\n    }\n    get unitSize(): number {\n        return gameStore.unitSize;\n    }\n    get useGrid(): boolean {\n        return gameStore.useGrid;\n    }\n\n    @Watch(\"fillColour\")\n    onFillChange() {\n        if (this.brushHelper) this.brushHelper.fillColour = this.fillColour;\n    }\n\n    @Watch(\"modeSelect\")\n    onModeUpdate(newValue: string, oldValue: string) {\n        this.onModeChange(newValue, oldValue);\n    }\n\n    setupBrush() {\n        if (this.brushHelper === null) return;\n        if (this.modeSelect === \"reveal\" || this.modeSelect === \"hide\") {\n            this.brushHelper.options.set(\"preFogShape\", true);\n            this.brushHelper.options.set(\"skipDraw\", true);\n            this.brushHelper.fillColour = \"rgba(0, 0, 0, 1)\";\n\n            if (this.modeSelect === \"reveal\") this.brushHelper.globalCompositeOperation = \"source-over\";\n            else if (this.modeSelect === \"hide\") this.brushHelper.globalCompositeOperation = \"destination-out\";\n        } else {\n            this.brushHelper.options.delete(\"preFogShape\");\n            this.brushHelper.options.delete(\"skipDraw\");\n            this.brushHelper.globalCompositeOperation = \"source-over\";\n            this.brushHelper.fillColour = this.fillColour;\n        }\n    }\n    onModeChange(newValue: string, oldValue: string) {\n        if (this.brushHelper === null) return;\n\n        const fowLayer = layerManager.getLayer(\"fow\");\n        const normalLayer = layerManager.getLayer();\n        if (fowLayer === undefined || normalLayer === undefined) return;\n\n        this.setupBrush();\n\n        if (newValue !== \"normal\" && oldValue === \"normal\") {\n            normalLayer.removeShape(this.brushHelper, false);\n            fowLayer.addShape(this.brushHelper, false);\n        } else if (newValue === \"normal\" && oldValue !== \"normal\") {\n            normalLayer.addShape(this.brushHelper, false);\n            fowLayer.removeShape(this.brushHelper, false);\n        }\n    }\n    getLayer() {\n        if (this.modeSelect === \"normal\") return layerManager.getLayer();\n        return layerManager.getLayer(\"fow\");\n    }\n    onMouseDown(event: MouseEvent) {\n        const layer = this.getLayer();\n        if (layer === undefined) {\n            console.log(\"No active layer!\");\n            return;\n        }\n        if (!this.active) {\n            this.startPoint = l2g(getMouse(event));\n            this.active = true;\n            switch (this.shapeSelect) {\n                case \"square\": {\n                    this.shape = new Rect(this.startPoint.clone(), 0, 0, this.fillColour, this.borderColour);\n                    break;\n                }\n                case \"circle\": {\n                    this.shape = new Circle(\n                        this.startPoint.clone(),\n                        this.helperSize,\n                        this.fillColour,\n                        this.borderColour,\n                    );\n                    break;\n                }\n                case \"paint-brush\": {\n                    this.shape = new MultiLine(this.startPoint.clone(), [], this.brushSize);\n                    this.shape.fillColour = this.fillColour;\n                    break;\n                }\n                case \"draw-polygon\": {\n                    this.shape = new Polygon(this.startPoint.clone(), [], this.fillColour, this.borderColour);\n                    break;\n                }\n                default:\n                    return;\n            }\n\n            if (this.modeSelect !== \"normal\") {\n                this.shape.options.set(\"preFogShape\", true);\n                this.shape.options.set(\"skipDraw\", true);\n                this.shape.fillColour = \"rgba(0, 0, 0, 1)\";\n            }\n            if (this.modeSelect === \"reveal\") this.shape.globalCompositeOperation = \"source-over\";\n            else if (this.modeSelect === \"hide\") this.shape.globalCompositeOperation = \"destination-out\";\n\n            this.shape.addOwner(gameStore.username);\n            if (layer.name === \"fow\" && this.modeSelect === \"normal\") {\n                this.shape.visionObstruction = true;\n                this.shape.movementObstruction = true;\n            }\n            layer.addShape(this.shape, true, false, false);\n\n            // Push brushhelper to back\n            this.pushBrushBack();\n        } else if (this.shape !== null && this.shape instanceof Polygon) {\n            // For polygon draw\n            this.shape._vertices.push(l2g(getMouse(event)));\n        }\n        if (this.shape !== null && this.shape instanceof Polygon) {\n            const lastPoint = l2g(getMouse(event));\n            if (this.ruler === null) {\n                this.ruler = new Line(lastPoint, lastPoint, 3, \"black\");\n                layer.addShape(this.ruler, false);\n            } else {\n                this.ruler.refPoint = lastPoint;\n                this.ruler.endPoint = lastPoint;\n            }\n            if (this.shape.visionObstruction) gameStore.recalculateVision(true);\n            layer.invalidate(false);\n            socket.emit(\"Shape.Update\", { shape: this.shape!.asDict(), redraw: true, temporary: true });\n        }\n    }\n    onMouseMove(event: MouseEvent) {\n        const endPoint = l2g(getMouse(event));\n        const layer = this.getLayer();\n        if (layer === undefined) {\n            console.log(\"No active layer!\");\n            return;\n        }\n\n        if (this.brushHelper !== null) {\n            this.brushHelper.r = this.helperSize;\n            this.brushHelper.refPoint = endPoint;\n            if (!this.active) layer.invalidate(false);\n        }\n\n        if (!this.active || this.startPoint === null || this.shape === null) return;\n\n        switch (this.shapeSelect) {\n            case \"square\": {\n                (<Rect>this.shape).w = Math.abs(endPoint.x - this.startPoint.x);\n                (<Rect>this.shape).h = Math.abs(endPoint.y - this.startPoint.y);\n                this.shape.refPoint = new GlobalPoint(\n                    Math.min(this.startPoint.x, endPoint.x),\n                    Math.min(this.startPoint.y, endPoint.y),\n                );\n                break;\n            }\n            case \"circle\": {\n                (<Circle>this.shape).r = endPoint.subtract(this.startPoint).length();\n                break;\n            }\n            case \"paint-brush\": {\n                (<MultiLine>this.shape)._points.push(endPoint);\n                break;\n            }\n            case \"draw-polygon\": {\n                this.ruler!.endPoint = endPoint;\n                break;\n            }\n        }\n\n        if (!(this.shape instanceof Polygon)) {\n            socket.emit(\"Shape.Update\", { shape: this.shape!.asDict(), redraw: true, temporary: true });\n            if (this.shape.visionObstruction) gameStore.recalculateVision(true);\n        }\n        layer.invalidate(false);\n    }\n    onMouseUp(event: MouseEvent) {\n        if (!this.active || this.shape === null || this.shape instanceof Polygon) return;\n        if (!event.altKey && this.useGrid) {\n            this.shape.resizeToGrid();\n        }\n        this.finaliseShape();\n    }\n    onContextMenu(event: MouseEvent) {\n        if (!this.active || this.shape === null || !(this.shape instanceof Polygon)) return;\n        const layer = this.getLayer();\n        if (layer === undefined) {\n            console.log(\"No active layer!\");\n            return;\n        }\n        layer.removeShape(this.ruler!, false);\n        this.ruler = null;\n        this.finaliseShape();\n    }\n\n    private finaliseShape() {\n        if (this.shape === null) return;\n        if (this.shape.visionObstruction) gameStore.recalculateVision();\n        if (this.shape.movementObstruction) gameStore.recalculateMovement();\n        socket.emit(\"Shape.Update\", { shape: this.shape!.asDict(), redraw: true, temporary: false });\n        this.active = false;\n    }\n\n    onSelect() {\n        const layer = this.getLayer();\n        if (layer === undefined) return;\n        this.brushHelper = new Circle(new GlobalPoint(-1000, -1000), this.brushSize / 2, this.fillColour);\n        this.setupBrush();\n        layer.addShape(this.brushHelper, false); // during mode change the shape is already added\n    }\n    onDeselect() {\n        const layer = this.getLayer();\n        if (this.brushHelper !== null && layer !== undefined) layer.removeShape(this.brushHelper, false);\n        if (this.active && layer !== undefined && this.shape !== null) {\n            layer.removeShape(this.shape, true, false);\n            this.shape = null;\n            this.active = false;\n            layer.invalidate(false);\n        }\n    }\n\n    private pushBrushBack() {\n        const layer = this.getLayer();\n        if (layer === undefined) {\n            console.log(\"No active layer!\");\n            return;\n        }\n        if (this.brushHelper !== null) layer.removeShape(this.brushHelper, false);\n        this.brushHelper = new Circle(new GlobalPoint(-1000, -1000), this.brushSize / 2, this.fillColour);\n        this.setupBrush();\n        layer.addShape(this.brushHelper, false); // during mode change the shape is already added\n    }\n}\n","import { GlobalPoint, LocalPoint } from \"@/game/geom\";\nimport { BoundingRect } from \"@/game/shapes/boundingrect\";\nimport { Shape } from \"@/game/shapes/shape\";\nimport { g2lx, g2ly, l2g } from \"@/game/units\";\n\nexport class Line extends Shape {\n    type = \"line\";\n    endPoint: GlobalPoint;\n    lineWidth: number;\n    constructor(\n        startPoint: GlobalPoint,\n        endPoint: GlobalPoint,\n        lineWidth?: number,\n        strokeColour?: string,\n        uuid?: string,\n    ) {\n        super(startPoint, \"rgba(0, 0, 0, 0)\", strokeColour || \"#000\", uuid);\n        this.endPoint = endPoint;\n        this.lineWidth = lineWidth === undefined ? 1 : lineWidth;\n    }\n    asDict() {\n        return Object.assign(this.getBaseDict(), {\n            x2: this.endPoint.x,\n            y2: this.endPoint.y,\n            line_width: this.lineWidth,\n        });\n    }\n    get points() {\n        return [[this.refPoint.x, this.refPoint.y], [this.endPoint.x, this.endPoint.y]];\n    }\n    getBoundingBox(): BoundingRect {\n        return new BoundingRect(\n            new GlobalPoint(Math.min(this.refPoint.x, this.endPoint.x), Math.min(this.refPoint.y, this.endPoint.y)),\n            Math.abs(this.refPoint.x - this.endPoint.x),\n            Math.abs(this.refPoint.y - this.endPoint.y),\n        );\n    }\n    draw(ctx: CanvasRenderingContext2D) {\n        super.draw(ctx);\n        ctx.strokeStyle = this.strokeColour;\n        ctx.beginPath();\n        ctx.moveTo(g2lx(this.refPoint.x), g2ly(this.refPoint.y));\n        ctx.lineTo(g2lx(this.endPoint.x), g2ly(this.endPoint.y));\n        ctx.lineWidth = this.lineWidth;\n        ctx.stroke();\n    }\n    contains(point: GlobalPoint): boolean {\n        return false; // TODO\n    }\n\n    center(): GlobalPoint;\n    center(centerPoint: GlobalPoint): void;\n    center(centerPoint?: GlobalPoint): GlobalPoint | void {} // TODO\n    visibleInCanvas(canvas: HTMLCanvasElement): boolean {\n        return this.getBoundingBox().visibleInCanvas(canvas);\n    } // TODO\n    snapToGrid(): void {}\n    resizeToGrid(): void {}\n    resize(resizePoint: number, point: LocalPoint): void {\n        if (resizePoint === 0) this.refPoint = l2g(point);\n        else this.endPoint = l2g(point);\n    }\n}\n","// import \"./class-component-hooks\";\n\nimport axios, { AxiosResponse } from \"axios\";\nimport Vue from \"vue\";\nimport Router from \"vue-router\";\n\nVue.use(Router);\n\nimport AssetManager from \"@/assetManager/manager.vue\";\nimport Login from \"@/auth/login.vue\";\nimport Logout from \"@/auth/logout\";\nimport LoadComponent from \"@/core/components/load.vue\";\nimport Dashboard from \"@/dashboard/main.vue\";\nimport Game from \"@/game/game.vue\";\nimport Invitation from \"@/invitation/invitation\";\n\nimport { coreStore } from \"@/core/store\";\n// import { AssetManager } from \"./assetManager/assets\";\n// const AssetManager = () => import(\"./assetManager/assets\").then(m => m.AssetManager);\n\nexport const router = new Router({\n    mode: \"history\",\n    base: process.env.BASE_URL,\n    routes: [\n        {\n            path: \"/\",\n            redirect: \"/dashboard\",\n        },\n        {\n            path: \"/_load\",\n            name: \"load\",\n            component: LoadComponent,\n        },\n        {\n            path: \"/assets\",\n            component: AssetManager,\n            meta: {\n                auth: true,\n            },\n        },\n        {\n            path: \"/auth\",\n            component: { template: \"<router-view></router-view>\" },\n            children: [{ path: \"login\", component: Login }, { path: \"logout\", component: Logout }],\n        },\n        {\n            path: \"/invite/:code\",\n            component: Invitation,\n            meta: {\n                auth: true,\n            },\n        },\n        {\n            path: \"/dashboard\",\n            component: Dashboard,\n            meta: {\n                auth: true,\n            },\n        },\n        {\n            path: \"/game/:creator/:room\",\n            component: Game,\n            meta: {\n                auth: true,\n            },\n        },\n    ],\n});\n\nrouter.beforeEach((to, from, next) => {\n    if (!coreStore.initialized && to.path !== \"/_load\") {\n        next({ path: \"/_load\" });\n        axios\n            .get(\"/api/auth\")\n            .then((response: AxiosResponse) => {\n                if (response.data.auth) {\n                    coreStore.setAuthenticated(true);\n                    coreStore.setUsername(response.data.username);\n                }\n                coreStore.setInitialized(true);\n                router.push(to.path);\n            })\n            .catch(() => {\n                console.error(\"Authentication check could not be fulfilled.\");\n            });\n    } else if (to.matched.some(record => record.meta.auth) && !coreStore.authenticated) {\n        next({ path: \"/auth/login\", query: { redirect: to.path } });\n    } else {\n        next();\n    }\n});\n","\n\n\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\n\n@Component\nexport default class Tool extends Vue {\n    name = \"\";\n    selected = false;\n    active = false;\n    get detailRight(): string {\n        const rect = (<any>this.$parent.$refs[this.name + \"-selector\"])[0].getBoundingClientRect();\n        const mid = rect.left + rect.width / 2;\n\n        return `${window.innerWidth - Math.min(window.innerWidth - 25, mid + 75)}px`;\n    }\n    get detailArrow(): string {\n        const rect = (<any>this.$parent.$refs[this.name + \"-selector\"])[0].getBoundingClientRect();\n        const mid = rect.left + rect.width / 2;\n        const right = Math.min(window.innerWidth - 25, mid + 75);\n        return `${right - mid - 14}px`; // border width\n    }\n    created() {\n        this.$parent.$on(\"mousedown\", (event: MouseEvent, tool: string) => {\n            if (tool === this.name) this.onMouseDown(event);\n        });\n        this.$parent.$on(\"mouseup\", (event: MouseEvent, tool: string) => {\n            if (tool === this.name) this.onMouseUp(event);\n        });\n        this.$parent.$on(\"mousemove\", (event: MouseEvent, tool: string) => {\n            if (tool === this.name) this.onMouseMove(event);\n        });\n        this.$parent.$on(\"contextmenu\", (event: MouseEvent, tool: string) => {\n            if (tool === this.name) this.onContextMenu(event);\n        });\n        this.$parent.$on(\"tools-select-change\", (newValue: string, oldValue: string) => {\n            if (oldValue === this.name) {\n                this.selected = false;\n                this.onDeselect();\n            } else if (newValue === this.name) {\n                this.selected = true;\n                this.onSelect();\n            }\n        });\n    }\n    onSelect() {}\n    onDeselect() {}\n    onMouseDown(event: MouseEvent) {}\n    onMouseUp(event: MouseEvent) {}\n    onMouseMove(event: MouseEvent) {}\n    onContextMenu(event: MouseEvent) {}\n}\n","import { render, staticRenderFns } from \"./tools.vue?vue&type=template&id=cf33581e&scoped=true&\"\nimport script from \"./tools.vue?vue&type=script&lang=ts&\"\nexport * from \"./tools.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./tools.vue?vue&type=style&index=0&id=cf33581e&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"cf33581e\",\n  null\n  \n)\n\ncomponent.options.__file = \"tools.vue\"\nexport default component.exports","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tool.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tool.vue?vue&type=script&lang=ts&\"","import { InitiativeData } from \"@/game/comm/types/general\";\nimport { ServerAsset } from \"@/game/comm/types/shapes\";\nimport { GlobalPoint } from \"@/game/geom\";\nimport { BaseRect } from \"@/game/shapes/baserect\";\nimport { gameStore } from \"@/game/store\";\nimport { g2lx, g2ly, g2lz } from \"@/game/units\";\n\nexport class Asset extends BaseRect {\n    type = \"assetrect\";\n    img: HTMLImageElement;\n    src: string = \"\";\n    constructor(img: HTMLImageElement, topleft: GlobalPoint, w: number, h: number, uuid?: string) {\n        super(topleft, w, h, undefined, undefined, uuid);\n        this.img = img;\n    }\n    asDict() {\n        return Object.assign(this.getBaseDict(), {\n            src: this.src,\n        });\n    }\n    fromDict(data: ServerAsset) {\n        super.fromDict(data);\n        this.src = data.src;\n    }\n    draw(ctx: CanvasRenderingContext2D) {\n        super.draw(ctx);\n        try {\n            ctx.drawImage(this.img, g2lx(this.refPoint.x), g2ly(this.refPoint.y), g2lz(this.w), g2lz(this.h));\n        } catch (error) {\n            console.warn(`Shape ${this.uuid} could not load the image ${this.src}`);\n        }\n    }\n    getInitiativeRepr(): InitiativeData {\n        return {\n            uuid: this.uuid,\n            visible: !gameStore.IS_DM,\n            group: false,\n            source: this.src,\n            has_img: true,\n            effects: [],\n            index: Infinity,\n        };\n    }\n}\n","import {\n    BoundingBox,\n    EdgeCirculator,\n    FaceCirculator,\n    LineFaceCirculator,\n    LocateType,\n    Point,\n    Sign,\n    TDS,\n    Triangle,\n    Vertex,\n} from \"./tds\";\nimport {\n    ccw,\n    collinearBetween,\n    cw,\n    edgeInfo,\n    hasInexactNegativeOrientation,\n    intersection,\n    orientation,\n    sideOfOrientedCircle,\n    xyEqual,\n} from \"./triag\";\n\nexport type Edge = [Triangle, number];\n\nexport class CDT {\n    tds: TDS;\n    constructor() {\n        this.tds = new TDS();\n    }\n    insertConstraint(a: Point, b: Point) {\n        const va = this.insert(a);\n        const vb = this.insert(b);\n        if (va !== vb) this.insertConstraintV(va, vb);\n    }\n\n    insertConstraintV(va: Vertex, vb: Vertex) {\n        const stack = [[va, vb]];\n        while (stack.length > 0) {\n            const v = stack.pop()!;\n            const info = edgeInfo(v[0], v[1]);\n            if (info.includes) {\n                this.markConstraint(info.fr!, info.i!);\n                if (info.vi! !== v[1]) {\n                    stack.push([info.vi!, v[1]]);\n                }\n                continue;\n            }\n            const intersectionInfo = this.findIntersectedFaces(v[0], v[1]);\n            if (intersectionInfo.found) {\n                if (intersectionInfo.vi !== v[0] && intersectionInfo.vi !== v[1]) {\n                    stack.push([v[0], intersectionInfo.vi]);\n                    stack.push([intersectionInfo.vi, v[1]]);\n                } else {\n                    stack.push(v);\n                }\n                continue;\n            }\n            this.triangulateHole(intersectionInfo.intersectedFaces, intersectionInfo.listAB, intersectionInfo.listBA);\n            if (intersectionInfo.vi !== v[1]) {\n                stack.push([intersectionInfo.vi, v[1]]);\n            }\n        }\n    }\n\n    triangulateHole(intersectedFaces: Triangle[], listAB: Edge[], listBA: Edge[]) {\n        const edges: Edge[] = [];\n        this.triangulateHole2(intersectedFaces, listAB, listBA, edges);\n        this.propagatingFlipE(edges);\n    }\n\n    triangulateHole2(intersectedFaces: Triangle[], listAB: Edge[], listBA: Edge[], edges: Edge[]) {\n        if (listAB.length > 0) {\n            this.triangulateHalfHole(listAB, edges);\n            this.triangulateHalfHole(listBA, edges);\n            const fl = listAB[0][0];\n            const fr = listBA[0][0];\n            fl.neighbours[2] = fr;\n            fr.neighbours[2] = fl;\n            fl.constraints[2] = true;\n            fr.constraints[2] = true;\n\n            while (intersectedFaces.length > 0) {\n                this.tds.deleteTriangle(intersectedFaces.shift()!);\n            }\n        }\n    }\n\n    triangulateHalfHole(conflictBoundaries: Edge[], edges: Edge[]) {\n        let iC = 0;\n        let iN: number;\n        let iT: number;\n        const current = () => conflictBoundaries[iC];\n        const next = () => conflictBoundaries[iN];\n        const tempo = () => conflictBoundaries[iT];\n\n        const va = current()[0].vertices[ccw(current()[1])]!;\n        iN = iC;\n        ++iN;\n\n        let n: Triangle;\n        let n1: Triangle;\n        let n2: Triangle;\n        let ind: number;\n        let ind1: number;\n        let ind2: number;\n        do {\n            n1 = current()[0];\n            ind1 = current()[1];\n            if (n1.neighbours[ind1] !== null) {\n                n = n1.neighbours[ind1]!;\n                ind = cw(n.indexV(n1.vertices[cw(ind1)]!));\n                n1 = n.neighbours[ind]!;\n                ind1 = this.tds.mirrorIndex(n, ind);\n            }\n            n2 = next()[0];\n            ind2 = next()[1];\n            if (n2.neighbours[ind2] !== null) {\n                n = n2.neighbours[ind2]!;\n                ind = cw(n.indexV(n2.vertices[cw(ind2)]!));\n                n2 = n.neighbours[ind]!;\n                ind2 = this.tds.mirrorIndex(n, ind);\n            }\n            const v0 = n1.vertices[ccw(ind1)]!;\n            const v1 = n1.vertices[cw(ind1)]!;\n            const v2 = n2.vertices[cw(ind2)]!;\n            const orient = orientation(v0.point!, v1.point!, v2.point!);\n            switch (orient) {\n                case Sign.RIGHT_TURN: {\n                    const newlf = this.tds.createTriangle(v0, v2, v1, null, null, null);\n                    edges.push([newlf, 2]);\n                    newlf.neighbours[1] = n1;\n                    newlf.neighbours[0] = n2;\n                    n1.neighbours[ind1] = newlf;\n                    n2.neighbours[ind2] = newlf;\n                    if (n1.isConstrained(ind1)) newlf.constraints[1] = true;\n                    if (n2.isConstrained(ind2)) newlf.constraints[0] = true;\n                    v0.triangle = newlf;\n                    v1.triangle = newlf;\n                    v2.triangle = newlf;\n                    iT = iC + 1;\n                    conflictBoundaries.splice(iC, 0, [newlf, 2]);\n                    conflictBoundaries.splice(Math.max(iT, iN), 1);\n                    conflictBoundaries.splice(Math.min(iT, iN), 1);\n                    iN = iC;\n                    if (v0 !== va) --iC;\n                    else ++iN;\n                    break;\n                }\n                case Sign.LEFT_TURN:\n                case Sign.COLLINEAR: {\n                    ++iC;\n                    ++iN;\n                    break;\n                }\n            }\n        } while (iN < conflictBoundaries.length);\n    }\n\n    findIntersectedFaces(vaa: Vertex, vbb: Vertex) {\n        const aa = vaa.point!;\n        const bb = vbb.point!;\n        const listAB: Edge[] = [];\n        const listBA: Edge[] = [];\n        const intersectedFaces: Triangle[] = [];\n        const lfc = new LineFaceCirculator(vaa, this, bb);\n        let ind = lfc.pos!.indexV(vaa);\n        let vi: Vertex;\n        if (lfc.pos!.isConstrained(ind)) {\n            vi = this.intersect(lfc.pos!, ind, vaa, vbb);\n            return { found: true, vi, listAB, listBA, intersectedFaces };\n        }\n        let lf = lfc.pos!.neighbours[ccw(ind)]!;\n        let rf = lfc.pos!.neighbours[cw(ind)]!;\n        listAB.push([lf, lf.indexT(lfc.pos!)]);\n        listBA.unshift([rf, rf.indexT(lfc.pos!)]);\n        intersectedFaces.unshift(lfc.pos!);\n        let previousFace = lfc.pos!;\n        lfc.next();\n        ind = lfc.pos!.indexT(previousFace);\n        let currentVertex = lfc.pos!.vertices[ind]!;\n        let done = false;\n        while (currentVertex !== vbb && !done) {\n            let i1: number;\n            let i2: number;\n            const orient = orientation(aa, bb, currentVertex.point!);\n            switch (orient) {\n                case Sign.COLLINEAR: {\n                    done = true;\n                    break;\n                }\n                case Sign.LEFT_TURN:\n                case Sign.RIGHT_TURN: {\n                    if (orient === Sign.LEFT_TURN) {\n                        i1 = ccw(ind);\n                        i2 = cw(ind);\n                    } else {\n                        i1 = cw(ind);\n                        i2 = ccw(ind);\n                    }\n                    if (lfc.pos!.isConstrained(i1)) {\n                        vi = this.intersect(lfc.pos!, i1, vaa, vbb);\n                        return { found: true, vi, listAB, listBA, intersectedFaces };\n                    } else {\n                        lf = lfc.pos!.neighbours[i2]!;\n                        intersectedFaces.unshift(lfc.pos!);\n                        if (orient === Sign.LEFT_TURN) listAB.push([lf, lf.indexT(lfc.pos!)]);\n                        else listBA.unshift([lf, lf.indexT(lfc.pos!)]);\n                        previousFace = lfc.pos!;\n                        lfc.next();\n                        ind = lfc.pos!.indexT(previousFace);\n                        currentVertex = lfc.pos!.vertices[ind]!;\n                    }\n                    break;\n                }\n            }\n        }\n        vi = currentVertex;\n        intersectedFaces.unshift(lfc.pos!);\n        lf = lfc.pos!.neighbours[cw(ind)]!;\n        listAB.push([lf, lf.indexT(lfc.pos!)]);\n        rf = lfc.pos!.neighbours[ccw(ind)]!;\n        listBA.unshift([rf, rf.indexT(lfc.pos!)]);\n        return { found: false, vi, listAB, listBA, intersectedFaces };\n    }\n\n    intersect(t: Triangle, i: number, vaa: Vertex, vbb: Vertex): Vertex {\n        const vcc = t.vertices[cw(i)]!;\n        const vdd = t.vertices[ccw(i)]!;\n        const pa = vaa.point!;\n        const pb = vbb.point!;\n        const pc = vcc.point!;\n        const pd = vdd.point!;\n        let pi = intersection(pa, pb, pc, pd);\n        if (pi !== pa && pi !== pb && pi !== pc && pi !== pd) {\n            const bbox = new BoundingBox(pi!);\n            bbox.dilate(4);\n            if (bbox.overlaps(new BoundingBox(pa))) pi = pa;\n            if (bbox.overlaps(new BoundingBox(pb))) pi = pb;\n            if (bbox.overlaps(new BoundingBox(pc))) pi = pc;\n            if (bbox.overlaps(new BoundingBox(pd))) pi = pd;\n        }\n        let vi: Vertex;\n        if (pi === null) throw new Error(\"what\");\n        else {\n            this.removeConstrainedEdge(t, i);\n            vi = this.insert(pi, t);\n        }\n\n        if (vi !== vcc && vi !== vdd) {\n            this.insertConstraintV(vcc, vi);\n            this.insertConstraintV(vi, vdd);\n        } else {\n            this.insertConstraintV(vcc, vdd);\n        }\n        return vi;\n    }\n\n    removeConstrainedEdge(t: Triangle, i: number) {\n        t.constraints[i] = false;\n        if (this.tds.dimension === 2) t.neighbours[i]!.constraints[this.tds.mirrorIndex(t, i)] = false;\n    }\n\n    updateConstraintsOpposite(v: Vertex) {\n        let t = v.triangle!;\n        const start = t;\n        let indf: number;\n        do {\n            indf = t.indexV(v);\n            if (t.neighbours[indf]!.constraints[this.tds.mirrorIndex(t, indf)]) t.constraints[indf] = true;\n            else t.constraints[indf] = false;\n            t = t.neighbours[ccw(indf)]!;\n        } while (t !== start);\n    }\n\n    markConstraint(t: Triangle, i: number) {\n        if (this.tds.dimension === 1) t.constraints[2] = true;\n        else {\n            t.constraints[i] = true;\n            t.neighbours[i]!.constraints[this.tds.mirrorIndex(t, i)] = true;\n        }\n    }\n\n    insert(p: Point, start: Triangle | null = null) {\n        const locateInfo = this.locate(p, this.iLocate(p, start));\n        const va = this.insertb(p, locateInfo.loc, locateInfo.lt, locateInfo.li);\n        this.flipAround(va);\n        return va;\n    }\n\n    flipAround(v: Vertex) {\n        if (this.tds.dimension <= 1) return;\n        let t = v.triangle!;\n        let i: number;\n        let next: Triangle;\n        const start = t;\n        do {\n            i = t.indexV(v);\n            next = t.neighbours[ccw(i)]!;\n            this.propagatingFlip(t, i);\n            t = next;\n        } while (next !== start);\n    }\n\n    propagatingFlip(t: Triangle, i: number, depth = 0) {\n        if (!this.isFlipable(t, i)) return;\n        const maxDepth = 100;\n        if (depth === maxDepth) {\n            throw new Error(\"maxde\");\n            return;\n        }\n        const ni = t.neighbours[i]!;\n        this.flip(t, i);\n        this.propagatingFlip(t, i, depth + 1);\n        i = ni.indexV(t.vertices[i]!);\n        this.propagatingFlip(ni, i, depth + 1);\n    }\n\n    lessEdge(e1: Edge, e2: Edge) {\n        const ind1 = e1[1];\n        const ind2 = e2[1];\n        return e1[0].uid < e2[0].uid || (e1[0].uid === e2[0].uid && ind1 < ind2);\n    }\n\n    propagatingFlipE(edges: Edge[]) {\n        let eI = 0;\n        let t: Triangle;\n        let i: number;\n        let eni: Edge;\n        const edgeSet: Edge[] = [];\n        while (eI < edges.length) {\n            t = edges[eI][0];\n            i = edges[eI][1];\n            if (this.isFlipable(t, i)) {\n                eni = [t.neighbours[i]!, this.tds.mirrorIndex(t, i)];\n                if (this.lessEdge(edges[eI], eni)) edgeSet.push(edges[eI]);\n                else edgeSet.push(eni);\n            }\n            ++eI;\n        }\n        let indf: number;\n        let ni: Triangle;\n        let indn: number;\n        let ei: Edge;\n        const e: (Edge | null)[] = [null, null, null, null];\n        while (edgeSet.length > 0) {\n            t = edgeSet[0][0];\n            indf = edgeSet[0][1];\n            ni = t.neighbours[indf]!;\n            indn = this.tds.mirrorIndex(t, indf);\n            ei = [t, indf];\n            edgeSet.splice(edgeSet.findIndex(ed => ed[0] === ei[0] && ed[1] === ei[1]), 1);\n            e[0] = [t, cw(indf)];\n            e[1] = [t, ccw(indf)];\n            e[2] = [ni, cw(indn)];\n            e[3] = [ni, ccw(indn)];\n\n            for (const edge of e) {\n                const tt = edge![0];\n                const ii = edge![1];\n                eni = [tt.neighbours[ii]!, this.tds.mirrorIndex(tt, ii)];\n                if (this.lessEdge(edge!, eni))\n                    edgeSet.splice(edgeSet.findIndex(ed => ed[0] === edge![0] && ed[1] === edge![1]), 1);\n                else edgeSet.splice(edgeSet.findIndex(ed => ed[0] === eni[0] && ed[1] === eni[1]), 1);\n            }\n\n            this.flip(t, indf);\n\n            for (const edge of e) {\n                const tt = edge![0];\n                const ii = edge![1];\n                if (this.isFlipable(tt, ii)) {\n                    eni = [tt.neighbours[ii]!, this.tds.mirrorIndex(tt, ii)];\n                    if (this.lessEdge(edge!, eni)) edgeSet.push(edge!);\n                    else edgeSet.push(eni);\n                }\n            }\n        }\n    }\n\n    flip(t: Triangle, i: number) {\n        const u = t.neighbours[i]!;\n        const j = this.tds.mirrorIndex(t, i);\n        const t1 = t.neighbours[cw(i)]!;\n        const i1 = this.tds.mirrorIndex(t, cw(i));\n        const t2 = t.neighbours[ccw(i)]!;\n        const i2 = this.tds.mirrorIndex(t, ccw(i));\n        const t3 = u.neighbours[cw(j)]!;\n        const i3 = this.tds.mirrorIndex(u, cw(j));\n        const t4 = u.neighbours[ccw(j)]!;\n        const i4 = this.tds.mirrorIndex(u, ccw(j));\n        this.tds.flip(t, i);\n        t.constraints[t.indexT(u)] = false;\n        u.constraints[u.indexT(t)] = false;\n        t1.neighbours[i1]!.constraints[this.tds.mirrorIndex(t1, i1)] = t1.constraints[i1];\n        t2.neighbours[i2]!.constraints[this.tds.mirrorIndex(t2, i2)] = t2.constraints[i2];\n        t3.neighbours[i3]!.constraints[this.tds.mirrorIndex(t3, i3)] = t3.constraints[i3];\n        t4.neighbours[i4]!.constraints[this.tds.mirrorIndex(t4, i4)] = t4.constraints[i4];\n    }\n\n    isFlipable(t: Triangle, i: number, perturb = true) {\n        const ni = t.neighbours[i]!;\n        if (t.isInfinite() || ni.isInfinite()) return false;\n        if (t.constraints[i]) return false;\n        return sideOfOrientedCircle(ni, t.vertices[i]!.point!, perturb) === Sign.ON_POSITIVE_SIDE;\n    }\n\n    insertb(a: Point, loc: Triangle | null, lt: LocateType, li: number): Vertex {\n        let insertInConstrainedEdge = false;\n        let v1: Vertex;\n        let v2: Vertex;\n        if (lt === LocateType.EDGE && loc!.isConstrained(li)) {\n            insertInConstrainedEdge = true;\n            v1 = loc!.vertices[ccw(li)]!;\n            v2 = loc!.vertices[cw(li)]!;\n        }\n        const va = this.insertc(a, loc, lt, li);\n        if (insertInConstrainedEdge) this.updateConstraintsIncident(va, v1!, v2!);\n        else if (lt !== LocateType.VERTEX) this.clearConstraintsIncident(va);\n        if (this.tds.dimension === 2) this.updateConstraintsOpposite(va);\n        return va;\n    }\n\n    updateConstraintsIncident(va: Vertex, c1: Vertex, c2: Vertex) {\n        if (this.tds.dimension === 0) return;\n        if (this.tds.dimension === 1) {\n            const ec = new EdgeCirculator(va, null);\n            do {\n                ec.t!.constraints[2] = true;\n            } while (ec.next());\n        } else {\n            const fc = new FaceCirculator(va, null);\n            do {\n                const indf = fc.t!.indexV(va);\n                const cwi = cw(indf);\n                const ccwi = ccw(indf);\n                if (fc.t!.vertices[cwi] === c1 || fc.t!.vertices[cwi] === c2) {\n                    fc.t!.constraints[ccwi] = true;\n                    fc.t!.constraints[cwi] = false;\n                } else {\n                    fc.t!.constraints[ccwi] = false;\n                    fc.t!.constraints[cwi] = true;\n                }\n            } while (fc.next());\n        }\n    }\n\n    clearConstraintsIncident(v: Vertex) {\n        const ec = new EdgeCirculator(v, null);\n        if (ec.valid) {\n            do {\n                const t = ec.t!;\n                const indf = ec.ri;\n                t.constraints[indf] = false;\n                if (this.tds.dimension === 2) t.neighbours[indf]!.constraints[this.tds.mirrorIndex(t, indf)] = false;\n            } while (ec.next());\n        }\n    }\n\n    insertc(p: Point, loc: Triangle | null, lt: LocateType, li: number): Vertex {\n        if (this.tds.vertices.length === 1) {\n            return this.insertFirst(p);\n        } else if (this.tds.vertices.length === 2) {\n            if (lt === LocateType.VERTEX) return this.tds.finiteVertex;\n            else return this.insertSecond(p);\n        }\n        switch (lt) {\n            case LocateType.VERTEX: {\n                return loc!.vertices[li]!;\n            }\n            case LocateType.OUTSIDE_AFFINE_HULL: {\n                return this.insertOutsideAffineHull(p);\n            }\n            case LocateType.OUTSIDE_CONVEX_HULL: {\n                return this.insertOutsideConvexHull(p, loc!);\n            }\n            case LocateType.EDGE: {\n                return this.insertInEdge(p, loc!, li);\n            }\n            case LocateType.FACE: {\n                return this.insertInFace(p, loc!);\n            }\n        }\n        throw new Error(\"qwe\");\n        return new Vertex();\n    }\n\n    insertInEdge(p: Point, loc: Triangle, li: number): Vertex {\n        const v = this.tds.insertInEdge(loc, li);\n        v.point = p;\n        return v;\n    }\n\n    insertInFace(p: Point, loc: Triangle): Vertex {\n        const v = this.tds.insertInFace(loc);\n        v.point = p;\n        return v;\n    }\n\n    insertFirst(p: Point): Vertex {\n        const v = this.tds.insertDimUp();\n        v.point = p;\n        return v;\n    }\n\n    insertSecond(p: Point): Vertex {\n        const v = this.tds.insertDimUp(this.tds._infinite, true);\n        v.point = p;\n        return v;\n    }\n\n    insertOutsideAffineHull(p: Point): Vertex {\n        let conform = false;\n        if (this.tds.dimension === 1) {\n            const t = this.tds.finiteEdge.first!;\n            const orient = orientation(t.vertices[0]!.point!, t.vertices[1]!.point!, p);\n            conform = orient === Sign.COUNTERCLOCKWISE;\n        }\n        const v = this.tds.insertDimUp(this.tds._infinite, conform);\n        v.point = p;\n        return v;\n    }\n\n    insertOutsideConvexHull(p: Point, t: Triangle): Vertex {\n        let v: Vertex;\n        if (this.tds.dimension === 1) {\n            throw new Error(\"sdfasdasd\");\n        } else {\n            v = this.insertOutsideConvexHull2(p, t);\n        }\n        v.point = p;\n        return v;\n    }\n\n    insertOutsideConvexHull2(p: Point, t: Triangle): Vertex {\n        let li = t.indexV(this.tds._infinite);\n        const ccwlist: Triangle[] = [];\n        const cwlist: Triangle[] = [];\n        let fc = new FaceCirculator(this.tds._infinite, t);\n        let done = false;\n        while (!done) {\n            fc.prev();\n            li = fc.t!.indexV(this.tds._infinite);\n            const q = fc.t!.vertices[ccw(li)]!.point!;\n            const r = fc.t!.vertices[cw(li)]!.point!;\n            if (orientation(p, q, r) === Sign.LEFT_TURN) ccwlist.push(fc.t!);\n            else done = true;\n        }\n        fc = new FaceCirculator(this.tds._infinite, t);\n        done = false;\n        while (!done) {\n            fc.next();\n            li = fc.t!.indexV(this.tds._infinite);\n            const q = fc.t!.vertices[ccw(li)]!.point!;\n            const r = fc.t!.vertices[cw(li)]!.point!;\n            if (orientation(p, q, r) === Sign.LEFT_TURN) cwlist.push(fc.t!);\n            else done = true;\n        }\n        const v = this.tds.insertInFace(t);\n        v.point = p;\n        let th;\n        while (ccwlist.length > 0) {\n            th = ccwlist[0];\n            li = ccw(th.indexV(this.tds._infinite));\n            this.tds.flip(th, li);\n            ccwlist.shift();\n        }\n        while (cwlist.length > 0) {\n            th = cwlist[0];\n            li = cw(th.indexV(this.tds._infinite));\n            this.tds.flip(th, li);\n            cwlist.shift();\n        }\n        fc = new FaceCirculator(v, null);\n        while (!fc.t!.isInfinite()) fc.next();\n        this.tds._infinite.triangle = fc.t!;\n        return v;\n    }\n\n    locate(p: Point, start: Triangle | null) {\n        let lt = 0;\n        let li = 0;\n        if (this.tds.dimension < 0) {\n            lt = LocateType.OUTSIDE_AFFINE_HULL;\n            li = 4;\n            return { loc: null, lt, li };\n        } else if (this.tds.dimension === 0) {\n            if (xyEqual(p, this.tds.finiteVertex.triangle!.vertices[0]!.point!)) {\n                lt = LocateType.VERTEX;\n            } else {\n                lt = LocateType.OUTSIDE_AFFINE_HULL;\n            }\n            li = 4;\n            return { loc: null, lt, li };\n        } else if (this.tds.dimension === 1) {\n            return this.marchLocate1D(p);\n        }\n        if (start === null) {\n            const t = this.tds._infinite.triangle!;\n            start = t.neighbours[t.indexV(this.tds._infinite)]!;\n        } else if (start.isInfinite()) {\n            start = start.neighbours[start.indexV(this.tds._infinite)]!;\n        }\n        return this.marchLocate2D(start, p);\n    }\n\n    marchLocate1D(p: Point) {\n        const ff = this.tds._infinite.triangle!;\n        const iv = ff.indexV(this.tds._infinite);\n        const t = ff.neighbours[iv]!;\n        const pqt = orientation(t.vertices[0]!.point!, t.vertices[1]!.point!, p);\n        if (pqt === Sign.RIGHT_TURN || pqt === Sign.LEFT_TURN) {\n            return { loc: new Triangle(), lt: LocateType.OUTSIDE_AFFINE_HULL, li: 4 };\n        }\n        const i = t.indexT(ff);\n        if (collinearBetween(p, t.vertices[1 - i]!.point!, t.vertices[i]!.point!))\n            return { loc: ff, lt: LocateType.OUTSIDE_CONVEX_HULL, li: iv };\n\n        if (xyEqual(p, t.vertices[1 - i]!.point!)) return { loc: t, lt: LocateType.VERTEX, li: 1 - i };\n        throw new Error(\"sdfsdf\");\n    }\n\n    marchLocate2D(c: Triangle, p: Point) {\n        let prev = null;\n        let first = true;\n        let lt: LocateType | undefined;\n        let li: number | undefined;\n        while (true) {\n            if (c.isInfinite()) {\n                return { loc: c, lt: LocateType.OUTSIDE_CONVEX_HULL, li: c.indexV(this.tds._infinite) };\n            }\n            const leftFirst = 0; // Math.round(Math.random());\n            const p0 = c.vertices[0]!.point!;\n            const p1 = c.vertices[1]!.point!;\n            const p2 = c.vertices[2]!.point!;\n            let o0: Sign;\n            let o1: Sign;\n            let o2: Sign;\n            if (first) {\n                prev = c;\n                first = false;\n                o0 = orientation(p0, p1, p);\n                if (o0 === Sign.NEGATIVE) {\n                    c = c.neighbours[2]!;\n                    continue;\n                }\n                o1 = orientation(p1, p2, p);\n                if (o1 === Sign.NEGATIVE) {\n                    c = c.neighbours[0]!;\n                    continue;\n                }\n                o2 = orientation(p2, p0, p);\n                if (o2 === Sign.NEGATIVE) {\n                    c = c.neighbours[1]!;\n                    continue;\n                }\n            } else if (leftFirst) {\n                if (c.neighbours[0]! === prev) {\n                    prev = c;\n                    o0 = orientation(p0, p1, p);\n                    if (o0 === Sign.NEGATIVE) {\n                        c = c.neighbours[2]!;\n                        continue;\n                    }\n                    o2 = orientation(p2, p0, p);\n                    if (o2 === Sign.NEGATIVE) {\n                        c = c.neighbours[1]!;\n                        continue;\n                    }\n                    o1 = Sign.POSITIVE;\n                } else if (c.neighbours[1]! === prev) {\n                    prev = c;\n                    o1 = orientation(p1, p2, p);\n                    if (o1 === Sign.NEGATIVE) {\n                        c = c.neighbours[0]!;\n                        continue;\n                    }\n                    o0 = orientation(p0, p1, p);\n                    if (o0 === Sign.NEGATIVE) {\n                        c = c.neighbours[2]!;\n                        continue;\n                    }\n                    o2 = Sign.POSITIVE;\n                } else {\n                    prev = c;\n                    o2 = orientation(p2, p0, p);\n                    if (o2 === Sign.NEGATIVE) {\n                        c = c.neighbours[1]!;\n                        continue;\n                    }\n                    o1 = orientation(p1, p2, p);\n                    if (o1 === Sign.NEGATIVE) {\n                        c = c.neighbours[0]!;\n                        continue;\n                    }\n                    o0 = Sign.POSITIVE;\n                }\n            } else {\n                if (c.neighbours[0] === prev) {\n                    prev = c;\n                    o2 = orientation(p2, p0, p);\n                    if (o2 === Sign.NEGATIVE) {\n                        c = c.neighbours[1]!;\n                        continue;\n                    }\n                    o0 = orientation(p0, p1, p);\n                    if (o0 === Sign.NEGATIVE) {\n                        c = c.neighbours[2]!;\n                        continue;\n                    }\n                    o1 = Sign.POSITIVE;\n                } else if (c.neighbours[1] === prev) {\n                    prev = c;\n                    o0 = orientation(p0, p1, p);\n                    if (o0 === Sign.NEGATIVE) {\n                        c = c.neighbours[2]!;\n                        continue;\n                    }\n                    o1 = orientation(p1, p2, p);\n                    if (o1 === Sign.NEGATIVE) {\n                        c = c.neighbours[0]!;\n                        continue;\n                    }\n                    o2 = Sign.POSITIVE;\n                } else {\n                    prev = c;\n                    o1 = orientation(p1, p2, p);\n                    if (o1 === Sign.NEGATIVE) {\n                        c = c.neighbours[0]!;\n                        continue;\n                    }\n                    o2 = orientation(p2, p0, p);\n                    if (o2 === Sign.NEGATIVE) {\n                        c = c.neighbours[1]!;\n                        continue;\n                    }\n                    o0 = Sign.POSITIVE;\n                }\n            }\n            const sum =\n                (o0 === Sign.COLLINEAR ? 1 : 0) + (o1 === Sign.COLLINEAR ? 1 : 0) + (o2 === Sign.COLLINEAR ? 1 : 0);\n            switch (sum) {\n                case 0: {\n                    lt = LocateType.FACE;\n                    li = 4;\n                    break;\n                }\n                case 1: {\n                    lt = LocateType.EDGE;\n                    li = o0 === Sign.COLLINEAR ? 2 : o1 === Sign.COLLINEAR ? 0 : 1;\n                    break;\n                }\n                case 2: {\n                    lt = LocateType.VERTEX;\n                    li = o0 !== Sign.COLLINEAR ? 2 : o1 !== Sign.COLLINEAR ? 0 : 1;\n                    break;\n                }\n            }\n            if (lt === undefined || li === undefined) throw new Error(\"ert\");\n            return { loc: c, lt, li };\n        }\n    }\n\n    iLocate(p: Point, start: Triangle | null) {\n        if (this.tds.dimension < 2) return start;\n        if (start === null) {\n            const t = this.tds._infinite.triangle!;\n            start = t.neighbours[t.indexV(this.tds._infinite)];\n        } else if (start.isInfinite()) {\n            start = start.neighbours[start.indexV(this.tds._infinite)];\n        }\n        let prev = null;\n        let c = start!;\n        let first = true;\n        let nTurns = 2500;\n        while (true) {\n            if (!nTurns--) return c;\n            if (c.isInfinite()) return c;\n            const p0 = c.vertices[0]!.point!;\n            const p1 = c.vertices[1]!.point!;\n            const p2 = c.vertices[2]!.point!;\n            if (first) {\n                prev = c;\n                first = false;\n                if (hasInexactNegativeOrientation(p0, p1, p)) {\n                    c = c.neighbours[2]!;\n                    continue;\n                }\n                if (hasInexactNegativeOrientation(p1, p2, p)) {\n                    c = c.neighbours[0]!;\n                    continue;\n                }\n                if (hasInexactNegativeOrientation(p2, p0, p)) {\n                    c = c.neighbours[1]!;\n                    continue;\n                }\n            } else {\n                if (c.neighbours[0] === prev) {\n                    prev = c;\n                    if (hasInexactNegativeOrientation(p0, p1, p)) {\n                        c = c.neighbours[2]!;\n                        continue;\n                    }\n                    if (hasInexactNegativeOrientation(p2, p0, p)) {\n                        c = c.neighbours[1]!;\n                        continue;\n                    }\n                } else if (c.neighbours[1] === prev) {\n                    prev = c;\n                    if (hasInexactNegativeOrientation(p0, p1, p)) {\n                        c = c.neighbours[2]!;\n                        continue;\n                    }\n                    if (hasInexactNegativeOrientation(p1, p2, p)) {\n                        c = c.neighbours[0]!;\n                        continue;\n                    }\n                } else {\n                    prev = c;\n                    if (hasInexactNegativeOrientation(p2, p0, p)) {\n                        c = c.neighbours[1]!;\n                        continue;\n                    }\n                    if (hasInexactNegativeOrientation(p1, p2, p)) {\n                        c = c.neighbours[0]!;\n                        continue;\n                    }\n                }\n            }\n            break;\n        }\n        return c;\n    }\n}\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./draw.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./draw.vue?vue&type=script&lang=ts&\"","import { GlobalPoint } from \"@/game/geom\";\nimport { GridLayer } from \"@/game/layers/grid\";\nimport { Layer } from \"@/game/layers/layer\";\nimport { Asset } from \"@/game/shapes/asset\";\nimport { Shape } from \"@/game/shapes/shape\";\nimport { gameStore } from \"@/game/store\";\nimport { l2gx, l2gy, l2gz } from \"@/game/units\";\n\nclass LayerManager {\n    layers: Layer[] = [];\n    width = window.innerWidth;\n    height = window.innerHeight;\n\n    UUIDMap: Map<string, Shape> = new Map();\n\n    // Refresh interval and redraw setter.\n    interval = 30;\n\n    constructor() {\n        requestAnimationFrame(this.drawLoop);\n    }\n\n    reset() {\n        this.layers = [];\n        this.UUIDMap = new Map();\n    }\n\n    drawLoop = () => {\n        for (let i = this.layers.length - 1; i >= 0; i--) {\n            this.layers[i].draw();\n        }\n        requestAnimationFrame(this.drawLoop);\n    };\n\n    setWidth(width: number): void {\n        this.width = width;\n        for (const layer of this.layers) {\n            layer.canvas.width = width;\n            layer.width = width;\n        }\n    }\n\n    setHeight(height: number): void {\n        this.height = height;\n        for (const layer of this.layers) {\n            layer.canvas.height = height;\n            layer.height = height;\n        }\n    }\n\n    addLayer(layer: Layer): void {\n        this.layers.push(layer);\n        if (!gameStore.IS_DM && !layer.playerEditable) return;\n        if (layer.selectable) gameStore.addLayer(layer.name);\n    }\n\n    hasLayer(name: string): boolean {\n        return this.layers.some(l => l.name === name);\n    }\n\n    getLayer(name?: string) {\n        name = name === undefined ? gameStore.selectedLayer : name;\n        for (const layer of this.layers) {\n            if (layer.name === name) return layer;\n        }\n    }\n\n    selectLayer(name: string, sync: boolean = true): void {\n        let found = false;\n        for (const layer of this.layers) {\n            if (!layer.selectable) continue;\n            if (found && layer.name !== \"fow\") layer.ctx.globalAlpha = 0.3;\n            else layer.ctx.globalAlpha = 1.0;\n\n            if (name === layer.name) {\n                gameStore.selectLayer({ name, sync });\n                found = true;\n            }\n\n            layer.clearSelection();\n            layer.invalidate(true);\n        }\n    }\n\n    getGridLayer(): GridLayer | undefined {\n        return <GridLayer>this.getLayer(\"grid\");\n    }\n\n    hasSelection() {\n        const selection = this.getSelection();\n        return selection !== undefined && selection.length > 0;\n    }\n\n    // THIS INCLUDES POTENTIALLY THE SelectTool.SelectionHelper !!!\n    getSelection() {\n        const layer = this.getLayer();\n        if (layer === undefined) return undefined;\n        return layer.selection;\n    }\n\n    invalidate(): void {\n        for (let i = this.layers.length - 1; i >= 0; i--) {\n            this.layers[i].invalidate(true);\n        }\n    }\n\n    invalidateLight() {\n        for (let i = this.layers.length - 1; i >= 0; i--)\n            if (this.layers[i].isVisionLayer) this.layers[i].invalidate(true);\n    }\n\n    dropAsset(event: DragEvent) {\n        const layer = this.getLayer();\n        if (layer === undefined || event === null || event.dataTransfer === null) return;\n        const image = document.createElement(\"img\");\n        image.src = event.dataTransfer.getData(\"text/plain\");\n        const asset = new Asset(\n            image,\n            new GlobalPoint(l2gx(event.clientX), l2gy(event.clientY)),\n            l2gz(image.width),\n            l2gz(image.height),\n        );\n        asset.src = new URL(image.src).pathname;\n\n        if (gameStore.useGrid) {\n            const gs = gameStore.gridSize;\n            asset.refPoint = new GlobalPoint(\n                Math.round(asset.refPoint.x / gs) * gs,\n                Math.round(asset.refPoint.y / gs) * gs,\n            );\n            asset.w = Math.max(Math.round(asset.w / gs) * gs, gs);\n            asset.h = Math.max(Math.round(asset.h / gs) * gs, gs);\n        }\n\n        layer.addShape(asset, true);\n    }\n}\n\nexport const layerManager = new LayerManager();\n(<any>window).lm = layerManager;\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./initiative.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./initiative.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./createtoken_modal.vue?vue&type=template&id=73816298&scoped=true&\"\nimport script from \"./createtoken_modal.vue?vue&type=script&lang=ts&\"\nexport * from \"./createtoken_modal.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./createtoken_modal.vue?vue&type=style&index=0&id=73816298&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"73816298\",\n  null\n  \n)\n\ncomponent.options.__file = \"createtoken_modal.vue\"\nexport default component.exports","import { BoundingRect } from \"@/game/shapes/boundingrect\";\n\nexport class BoundingNode {\n    bbox: BoundingRect;\n    nPrimitives: number;\n    children: BoundingNode[] = [];\n    constructor(nPrimitives: number, bbox: BoundingRect) {\n        this.nPrimitives = nPrimitives;\n        this.bbox = bbox;\n    }\n}\n\nexport class LeafNode extends BoundingNode {\n    firstPrimOffset: number;\n    constructor(first: number, n: number, bbox: BoundingRect) {\n        super(n, bbox);\n        this.firstPrimOffset = first;\n    }\n}\n\nexport class InteriorNode extends BoundingNode {\n    dimension: number;\n    constructor(dimension: number, c1: BoundingNode, c2: BoundingNode) {\n        super(0, c1.bbox.union(c2.bbox));\n        this.dimension = dimension;\n        this.children.push(c1);\n        this.children.push(c2);\n    }\n}\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./createtoken_modal.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./createtoken_modal.vue?vue&type=script&lang=ts&\"","import Tools from \"../ui/tools/tools.vue\";\n\nimport { getRef, uuidv4 } from \"@/core/utils\";\nimport { socket } from \"@/game/api/socket\";\nimport { sendClientOptions } from \"@/game/api/utils\";\nimport { EventBus } from \"@/game/event-bus\";\nimport { Vector } from \"@/game/geom\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { gameStore } from \"@/game/store\";\nimport { calculateDelta } from \"@/game/ui/tools/utils\";\nimport { ServerAura } from '../comm/types/shapes';\nimport { createShapeFromDict } from \"../shapes/utils\";\n\nexport function onKeyUp(event: KeyboardEvent) {\n    if (event.target instanceof HTMLInputElement || event.target instanceof HTMLTextAreaElement) {\n    } else {\n        if (event.key === \"Delete\" || event.key === \"Del\" || event.key === \"Backspace\") {\n            if (layerManager.getLayer === undefined) {\n                console.log(\"No active layer selected for delete operation\");\n                return;\n            }\n            const l = layerManager.getLayer()!;\n            for (let i = l.selection.length - 1; i >= 0; i--) {\n                const sel = l.selection[i];\n                if ((<any>getRef<Tools>(\"tools\").$refs.selectTool).selectionHelper.uuid === sel.uuid) {\n                    l.selection.splice(i, 1);\n                    continue;\n                }\n                l.removeShape(sel, true, false);\n                EventBus.$emit(\"SelectionInfo.Shape.Set\", null);\n                EventBus.$emit(\"Initiative.Remove\", sel.uuid);\n            }\n        }\n    }\n}\n\nexport function onKeyDown(event: KeyboardEvent) {\n    if (event.target instanceof HTMLInputElement || event.target instanceof HTMLTextAreaElement) {\n        if (event.keyCode === 65 && event.ctrlKey) event.target!.select();\n    } else {\n        if (event.keyCode >= 37 && event.keyCode <= 40) {\n            // todo: this should already be rounded\n            const gridSize = Math.round(gameStore.gridSize);\n            let offsetX = gridSize * (event.keyCode % 2);\n            let offsetY = gridSize * (event.keyCode % 2 ? 0 : 1);\n            if (layerManager.hasSelection()) {\n                const selection = layerManager.getSelection()!;\n                offsetX *= event.keyCode <= 38 ? -1 : 1;\n                offsetY *= event.keyCode <= 38 ? -1 : 1;\n                let delta = new Vector(offsetX, offsetY);\n                if (!event.shiftKey || !gameStore.IS_DM) {\n                    // First check for collisions.  Using the smooth wall slide collision check used on mouse move is overkill here.\n                    for (const sel of selection) {\n                        if ((<any>getRef<Tools>(\"tools\").$refs.selectTool).selectionHelper.uuid === sel.uuid) continue;\n                        delta = calculateDelta(delta, sel);\n                    }\n                }\n                for (const sel of selection) {\n                    if ((<any>getRef<Tools>(\"tools\").$refs.selectTool).selectionHelper.uuid === sel.uuid) continue;\n                    sel.refPoint = sel.refPoint.add(delta);\n                    // todo: Fix again\n                    // if (sel.refPoint.x % gridSize !== 0 || sel.refPoint.y % gridSize !== 0) sel.snapToGrid();\n                    socket.emit(\"Shape.Position.Update\", { shape: sel.asDict(), redraw: true, temporary: false });\n                }\n                gameStore.recalculateVision();\n                layerManager.getLayer()!.invalidate(false);\n            } else {\n                // The pan offsets should be in the opposite direction to give the correct feel.\n                gameStore.increasePanX(offsetX * (event.keyCode <= 38 ? 1 : -1));\n                gameStore.increasePanY(offsetY * (event.keyCode <= 38 ? 1 : -1));\n                layerManager.invalidate();\n                sendClientOptions();\n            }\n        } else if (event.keyCode === 68) {\n            const layer = layerManager.getLayer();\n            if (layer) {\n                layer.clearSelection();\n                layer.invalidate(true);\n            }\n        } else if (event.key === \"u\" && event.ctrlKey) {\n            event.preventDefault();\n            event.stopPropagation();\n            gameStore.toggleUI();\n        } else if (event.key === \"c\" && event.ctrlKey) {\n            const layer = layerManager.getLayer();\n            if (!layer) return;\n            if (!layer.selection) return;\n            const clipboard = [];\n            for (const shape of layer.selection) {\n                if ((<any>getRef<Tools>(\"tools\").$refs.selectTool).selectionHelper.uuid === shape.uuid) continue;\n                clipboard.push(shape.asDict());\n            }\n            gameStore.setClipboard(clipboard);\n        } else if (event.key === \"v\" && event.ctrlKey) {\n            const layer = layerManager.getLayer();\n            if (!layer) return;\n            if (!gameStore.clipboard) return;\n            layer.selection = [];\n            for (const clip of gameStore.clipboard) {\n                clip.x += 10;\n                clip.y += 10;\n                clip.uuid = uuidv4();\n                const oldTrackers = clip.trackers;\n                clip.trackers = [];\n                for (const tracker of oldTrackers) {\n                    const newTracker: Tracker = {\n                        ...tracker,\n                        uuid: uuidv4()\n                    }\n                    clip.trackers.push(newTracker);\n                }\n                const oldAuras = clip.auras;\n                clip.auras = [];\n                for (const aura of oldAuras) {\n                    const newAura: ServerAura = {\n                        ...aura,\n                        uuid: uuidv4()\n                    }\n                    clip.auras.push(newAura);\n                }\n                const shape = createShapeFromDict(clip);\n                if (shape === undefined) continue;\n                layer.addShape(shape, true);\n                layer.selection.push(shape);\n            }\n            if (layer.selection.length === 1) EventBus.$emit(\"SelectionInfo.Shape.Set\", layer.selection[0]);\n            else EventBus.$emit(\"SelectionInfo.Shape.Set\", null);\n            layer.invalidate(false);\n        }\n    }\n}\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./manager.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./manager.vue?vue&type=style&index=0&lang=css&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./shapecontext.vue?vue&type=style&index=0&id=759e5a8a&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./shapecontext.vue?vue&type=style&index=0&id=759e5a8a&scoped=true&lang=css&\"","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\n\nimport ShapeContext from \"@/game/ui/selection/shapecontext.vue\";\nimport CreateTokenModal from \"@/game/ui/tools/createtoken_modal.vue\";\nimport DrawTool from \"@/game/ui/tools/draw.vue\";\nimport FilterTool from \"@/game/ui/tools/filter.vue\";\nimport MapTool from \"@/game/ui/tools/map.vue\";\nimport PanTool from \"@/game/ui/tools/pan\";\nimport SelectTool from \"@/game/ui/tools/select.vue\";\n\nimport { layerManager } from \"@/game/layers/manager\";\nimport { gameManager } from \"@/game/manager\";\nimport { gameStore } from \"@/game/store\";\nimport { RulerTool } from \"@/game/ui/tools/ruler\";\nimport { l2g } from \"@/game/units\";\nimport { getMouse } from \"@/game/utils\";\nimport Component from \"vue-class-component\";\n\n@Component({\n    components: {\n        \"select-tool\": SelectTool,\n        \"pan-tool\": PanTool,\n        \"draw-tool\": DrawTool,\n        \"ruler-tool\": RulerTool,\n        \"map-tool\": MapTool,\n        \"filter-tool\": FilterTool,\n        \"shape-menu\": ShapeContext,\n        \"createtoken-dialog\": CreateTokenModal,\n    },\n    watch: {\n        currentTool(newValue, oldValue) {\n            this.$emit(\"tools-select-change\", newValue, oldValue);\n        },\n    },\n})\nexport default class Tools extends Vue {\n    $refs!: {\n        selectTool: InstanceType<typeof SelectTool>;\n    };\n\n    currentTool = \"Select\";\n    tools = [\"Select\", \"Pan\", \"Draw\", \"Ruler\", \"Map\", \"Filter\"];\n    dmTools = [\"Map\"];\n\n    get IS_DM(): boolean {\n        return gameStore.IS_DM;\n    }\n\n    get currentToolComponent(): string {\n        return `${this.currentTool.toLowerCase()}-tool`;\n    }\n\n    get visibleTools(): string[] {\n        return this.tools.filter(t => (!this.dmTools.includes(t) || this.IS_DM));\n    }\n\n    mousedown(event: MouseEvent) {\n        if ((<HTMLElement>event.target).tagName !== \"CANVAS\") return;\n\n        let targetTool = this.currentTool;\n        if (event.button === 1) {\n            targetTool = \"Pan\";\n        } else if (event.button !== 0) {\n            return;\n        }\n\n        this.$emit(\"mousedown\", event, targetTool);\n    }\n    mouseup(event: MouseEvent) {\n        if ((<HTMLElement>event.target).tagName !== \"CANVAS\") return;\n\n        let targetTool = this.currentTool;\n        if (event.button === 1) {\n            targetTool = \"Pan\";\n        } else if (event.button !== 0) {\n            return;\n        }\n\n        this.$emit(\"mouseup\", event, targetTool);\n    }\n    mousemove(event: MouseEvent) {\n        if ((<HTMLElement>event.target).tagName !== \"CANVAS\") return;\n\n        let targetTool = this.currentTool;\n        if ((event.buttons & 4) !== 0) {\n            targetTool = \"Pan\";\n        } else if ((event.button & 1) > 1) {\n            return;\n        }\n\n        this.$emit(\"mousemove\", event, targetTool);\n\n        // Annotation hover\n        let found = false;\n        for (const uuid of gameStore.annotations) {\n            if (layerManager.UUIDMap.has(uuid) && layerManager.hasLayer(\"draw\")) {\n                const shape = layerManager.UUIDMap.get(uuid)!;\n                if (shape.contains(l2g(getMouse(event)))) {\n                    found = true;\n                    gameManager.annotationManager.setActiveText(shape.annotation);\n                }\n            }\n        }\n        if (!found && gameManager.annotationManager.shown) {\n            gameManager.annotationManager.setActiveText(\"\");\n        }\n    }\n    mouseleave(event: MouseEvent) {\n        // When leaving the window while a mouse is pressed down, act as if it was released\n        if ((event.buttons & 1) !== 0) {\n            this.$emit(\"mouseup\", event, this.currentTool);\n        }\n    }\n    contextmenu(event: MouseEvent) {\n        if ((<HTMLElement>event.target).tagName !== \"CANVAS\") return;\n        if (event.button !== 2 || (<HTMLElement>event.target).tagName !== \"CANVAS\") return;\n        this.$emit(\"contextmenu\", event, this.currentTool);\n    }\n}\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./selection_info.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./selection_info.vue?vue&type=script&lang=ts&\"","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./modal.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./modal.vue?vue&type=script&lang=ts&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./contextmenu.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./contextmenu.vue?vue&type=style&index=0&lang=css&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./filter.vue?vue&type=style&index=0&id=4c62cd6c&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./filter.vue?vue&type=style&index=0&id=4c62cd6c&scoped=true&lang=css&\"","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\n\nimport Modal from \"@/core/components/modals/modal.vue\";\n\n@Component({\n    components: {\n        Modal,\n    },\n})\nexport default class Prompt extends Vue {\n    $refs!: {\n        answer: HTMLElement;\n    };\n\n    visible = false;\n    question = \"\";\n    answer = \"\";\n    title = \"\";\n\n    resolve = (value: string) => {};\n    reject = () => {};\n\n    submit() {\n        this.resolve(this.answer);\n        this.close();\n    }\n    close() {\n        this.reject();\n        this.visible = false;\n        this.question = \"\";\n        this.answer = \"\";\n        this.title = \"\";\n    }\n    prompt(question: string, title: string): Promise<string> {\n        this.question = question;\n        this.title = title;\n        this.visible = true;\n        this.$nextTick(() => {\n            this.$refs.answer.focus();\n        });\n        return new Promise((resolve, reject) => {\n            this.resolve = resolve;\n            this.reject = reject;\n        });\n    }\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_vm._v(_vm._s(_vm.message))])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"74f43d04-vue-loader-template\\\"}!../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./load.vue?vue&type=template&id=ff095222&\"","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./menu.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./menu.vue?vue&type=script&lang=ts&\"","import { GlobalPoint, Point, Ray, Vector } from \"@/game/geom\";\nimport { g2lx, g2ly } from \"../units\";\n\nexport class BoundingRect {\n    readonly w: number;\n    readonly h: number;\n    readonly topLeft: GlobalPoint;\n    readonly topRight: GlobalPoint;\n    readonly botRight: GlobalPoint;\n    readonly botLeft: GlobalPoint;\n\n    constructor(topleft: GlobalPoint, w: number, h: number) {\n        this.w = w;\n        this.h = h;\n        this.topLeft = topleft;\n        this.topRight = new GlobalPoint(topleft.x + w, topleft.y);\n        this.botRight = new GlobalPoint(topleft.x + w, topleft.y + h);\n        this.botLeft = new GlobalPoint(topleft.x, topleft.y + h);\n    }\n\n    contains(point: GlobalPoint): boolean {\n        return (\n            this.topLeft.x <= point.x &&\n            this.topRight.x >= point.x &&\n            this.topLeft.y <= point.y &&\n            this.botLeft.y >= point.y\n        );\n    }\n\n    get points() {\n        if (this.w === 0 || this.h === 0) return [[this.topLeft.x, this.topLeft.y]];\n        return [\n            [this.topLeft.x, this.topLeft.y],\n            [this.botLeft.x, this.botLeft.y],\n            [this.botRight.x, this.botRight.y],\n            [this.topRight.x, this.topRight.y],\n        ];\n    }\n\n    offset(vector: Vector): BoundingRect {\n        return new BoundingRect(this.topLeft.add(vector), this.w, this.h);\n    }\n\n    union(other: BoundingRect): BoundingRect {\n        const xmin = Math.min(this.topLeft.x, other.topLeft.x);\n        const xmax = Math.max(this.topRight.x, other.topRight.x);\n        const ymin = Math.min(this.topLeft.y, other.topLeft.y);\n        const ymax = Math.max(this.botLeft.y, other.botLeft.y);\n        return new BoundingRect(new GlobalPoint(xmin, ymin), xmax - xmin, ymax - ymin);\n    }\n\n    getDiagCorner(botright: boolean) {\n        return botright ? this.botRight : this.topLeft;\n    }\n\n    intersectsWith(other: BoundingRect): boolean {\n        return !(\n            other.topLeft.x > this.topRight.x ||\n            other.topRight.x < this.topLeft.x ||\n            other.topLeft.y > this.botLeft.y ||\n            other.botLeft.y < this.topLeft.y\n        );\n    }\n\n    intersectsWithInner(other: BoundingRect): boolean {\n        return !(\n            other.topLeft.x >= this.topRight.x ||\n            other.topRight.x <= this.topLeft.x ||\n            other.topLeft.y >= this.botLeft.y ||\n            other.botLeft.y <= this.topLeft.y\n        );\n    }\n\n    intersectP(ray: Ray<Point>, invDir: Vector, dirIsNeg: boolean[]) {\n        let txmin = invDir.x * (this.getDiagCorner(dirIsNeg[0]).x - ray.origin!.x);\n        let txmax = invDir.x * (this.getDiagCorner(!dirIsNeg[0]).x - ray.origin!.x);\n        const tymin = invDir.y * (this.getDiagCorner(dirIsNeg[1]).y - ray.origin!.y);\n        const tymax = invDir.y * (this.getDiagCorner(!dirIsNeg[1]).y - ray.origin!.y);\n        if (txmin > tymax || tymin > txmax) return { hit: false, min: txmin, max: txmax };\n        if (tymin > txmin) txmin = tymin;\n        if (tymax < txmax) txmax = tymax;\n        return { hit: txmin < ray.tMax! && txmax > 0, min: txmin, max: txmax };\n    }\n\n    center(): GlobalPoint {\n        return this.topLeft.add(new Vector(this.w / 2, this.h / 2));\n    }\n\n    getMaxExtent() {\n        return this.w > this.h ? 0 : 1;\n    }\n    visibleInCanvas(canvas: HTMLCanvasElement): boolean {\n        const coreVisible = !(\n            g2lx(this.topLeft.x) > canvas.width ||\n            g2ly(this.topLeft.y) > canvas.height ||\n            g2lx(this.topRight.x) < 0 ||\n            g2ly(this.botRight.y) < 0\n        );\n        if (coreVisible) return true;\n        return false;\n    }\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"formcontainer\"}},[(_vm.owned || _vm.joined)?_c('form',[_c('fieldset',[_c('legend',{staticClass:\"legend\"},[_vm._v(\"Your sessions\")]),_c('div',{staticClass:\"input\"},[_vm._l((_vm.owned),function(room,i){return _c('router-link',{key:'o-'+i,attrs:{\"to\":'/game/' + room[1] + '/' + room[0]}},[_vm._v(_vm._s(room[0]))])}),_vm._l((_vm.joined),function(room,i){return _c('router-link',{key:'j-'+i,attrs:{\"to\":'/game/' + room[1] + '/' + room[0]}},[_vm._v(_vm._s(room[1])+\"/\"+_vm._s(room[0]))])})],2),(_vm.owned.length === 0)?_c('div',{staticClass:\"input\"},[_vm._v(\"No active sessions\")]):_vm._e()])]):_vm._e(),_vm._m(0),_c('form',{on:{\"submit\":function($event){$event.preventDefault();return _vm.createRoom($event)}}},[_c('fieldset',[(!_vm.owned && !_vm.joined)?_c('legend',{staticClass:\"legend\"},[_vm._v(\"Create a session\")]):_c('div',{staticClass:\"input\"},[_vm._v(\"Create a new session\")]),_c('div',{staticClass:\"input\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.newSessionName),expression:\"newSessionName\"}],attrs:{\"type\":\"text\",\"name\":\"room_name\",\"placeholder\":\"Session Name\"},domProps:{\"value\":(_vm.newSessionName)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.newSessionName=$event.target.value}}}),_vm._m(1)]),_vm._m(2)])]),_c('div',{attrs:{\"id\":\"account-options\"}},[_c('form',{on:{\"submit\":function($event){$event.preventDefault();}}},[_c('router-link',{staticClass:\"submit\",attrs:{\"tag\":\"button\",\"title\":\"Account Settings\",\"to\":\"/account\"}},[_c('i',{staticClass:\"fas fa-cog\"})])],1),_c('form',{on:{\"submit\":function($event){$event.preventDefault();}}},[_c('router-link',{staticClass:\"submit\",attrs:{\"tag\":\"button\",\"title\":\"Logout\",\"to\":\"/auth/logout\"}},[_c('i',{staticClass:\"fas fa-sign-out-alt\"})])],1)])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('h4',[_c('span',[_vm._v(\"OR\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',[_c('i',{staticClass:\"fab fa-d-and-d\"})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('button',{staticClass:\"submit\",attrs:{\"type\":\"submit\",\"title\":\"Create\"}},[_c('i',{staticClass:\"fas fa-arrow-right\"})])}]\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"74f43d04-vue-loader-template\\\"}!../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./main.vue?vue&type=template&id=61eb1455&scoped=true&\"","/*\nThis module defines some Point classes.\nA strong focus is made to ensure that at no time a global and a local point are mixed up with each other.\nAt first glance this adds weird looking hacks as ts does not support nominal typing.\n*/\n\nexport function getPointDistance(p1: Point, p2: Point) {\n    const a = p1.x - p2.x;\n    const b = p1.y - p2.y;\n    return Math.sqrt(a * a + b * b);\n}\n\nexport class Point {\n    readonly x: number;\n    readonly y: number;\n    constructor(x: number, y: number) {\n        this.x = x;\n        this.y = y;\n    }\n    static fromArray(point: number[]) {\n        return new Point(point[0], point[1]);\n    }\n    add(vec: Vector) {\n        return new Point(this.x + vec.x, this.y + vec.y);\n    }\n    subtract(other: Point) {\n        return new Vector(this.x - other.x, this.y - other.y);\n    }\n    clone(): Point {\n        return new Point(this.x, this.y);\n    }\n    get(dimension: 0 | 1) {\n        if (dimension === 0) return this.x;\n        return this.y;\n    }\n    asArray(): number[] {\n        return [this.x, this.y];\n    }\n}\nexport class GlobalPoint extends Point {\n    // This is to differentiate with LocalPoint, is actually never used\n    // We do ! to prevent errors that it never gets initialized\n    // tslint:disable-next-line:variable-name\n    _GlobalPoint!: string;\n    add(vec: Vector): GlobalPoint {\n        return <GlobalPoint>super.add(vec);\n    }\n    subtract(other: GlobalPoint): Vector {\n        return super.subtract(other);\n    }\n    clone(): GlobalPoint {\n        return <GlobalPoint>super.clone();\n    }\n    static fromArray(point: number[]) {\n        return new GlobalPoint(point[0], point[1]);\n    }\n}\n\nexport class LocalPoint extends Point {\n    // This is to differentiate with GlobalPoint, is actually never used\n    // We do ! to prevent errors that it never gets initialized\n    // tslint:disable-next-line:variable-name\n    _LocalPoint!: string;\n    add(vec: Vector): LocalPoint {\n        return <LocalPoint>super.add(vec);\n    }\n    subtract(other: LocalPoint): Vector {\n        return super.subtract(other);\n    }\n    clone(): LocalPoint {\n        return <LocalPoint>super.clone();\n    }\n}\n\nexport class Vector {\n    readonly x: number;\n    readonly y: number;\n    constructor(x: number, y: number) {\n        this.x = x;\n        this.y = y;\n    }\n    dot(other: Vector): number {\n        return this.x * other.x + this.y * other.y;\n    }\n    inverse(): Vector {\n        return new Vector(this.x === 0 ? 0 : 1 / this.x, this.y === 0 ? 0 : 1 / this.y);\n    }\n    length(): number {\n        return Math.sqrt(Math.pow(this.x, 2) + Math.pow(this.y, 2));\n    }\n    normalize(): Vector {\n        const l = this.length();\n        return new Vector(this.x / l, this.y / l);\n    }\n    reverse(): Vector {\n        return new Vector(-this.x, -this.y);\n    }\n    multiply(scale: number): Vector {\n        return new Vector(this.x * scale, this.y * scale);\n    }\n    angle(): number {\n        return (Math.atan2(this.y, this.x) * 180) / Math.PI;\n    }\n}\n\nexport class Ray<T extends Point> {\n    readonly direction: Vector;\n    readonly origin: T;\n    tMax: number;\n    constructor(origin: T, direction: Vector, tMax?: number) {\n        this.direction = direction;\n        this.origin = origin;\n        if (tMax === undefined) tMax = Infinity;\n        this.tMax = tMax;\n    }\n    static fromPoints<T extends Point>(p1: T, p2: T): Ray<T> {\n        const vec = new Vector(p2.x - p1.x, p2.y - p1.y);\n        let maxT;\n        if (Math.abs(vec.x) > 0.01) maxT = (p2.x - p1.x) / vec.x;\n        else maxT = (p2.y - p1.y) / vec.y;\n        return new Ray(p1, vec, maxT);\n    }\n    get(t: number): T {\n        return <T>new Point(this.origin.x + t * this.direction.x, this.origin.y + t * this.direction.y);\n    }\n    getDistance(t1: number, t2: number) {\n        return Math.sqrt(Math.pow(t2 - t1, 2) * (Math.pow(this.direction.x, 2) + Math.pow(this.direction.y, 2)));\n    }\n    getT(t1: number, distance: number) {\n        return t1 + Math.sqrt(Math.pow(distance, 2) / (Math.pow(this.direction.x, 2) + Math.pow(this.direction.y, 2)));\n    }\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ul',[_vm._l((_vm.folders),function(folder){return _c('li',{key:folder,staticClass:\"folder\",on:{\"click\":function($event){$event.stopPropagation();return _vm.toggle($event)}}},[_vm._v(\"\\n        \"+_vm._s(folder)+\"\\n        \"),_c('asset-node',{attrs:{\"asset\":_vm.asset[folder]}})],1)}),_vm._l((_vm.files),function(file){return _c('li',{key:file.name,staticClass:\"file draggable token\",attrs:{\"draggable\":\"true\"},on:{\"mouseover\":function($event){_vm.showImage = file.hash},\"mouseout\":function($event){_vm.showImage = null},\"dragstart\":function($event){_vm.dragStart($event, '/static/assets/' + file.hash)}}},[_vm._v(\"\\n        \"+_vm._s(file.name)+\"\\n        \"),(_vm.showImage == file.hash)?_c('div',{staticClass:\"preview\"},[_c('img',{staticClass:\"asset-preview-image\",attrs:{\"src\":'/static/assets/' + file.hash}})]):_vm._e()])})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"74f43d04-vue-loader-template\\\"}!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./asset_node.vue?vue&type=template&id=6d718094&scoped=true&\"","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\nimport vueSlider from \"vue-slider-component\";\n\nimport \"@/game/api/events\";\n\nimport { throttle } from \"lodash\";\nimport { mapGetters, mapState } from \"vuex\";\n\nimport ConfirmDialog from \"@/core/components/modals/confirm.vue\";\nimport Prompt from \"@/core/components/modals/prompt.vue\";\nimport Initiative from \"@/game/ui/initiative.vue\";\nimport LabelManager from \"@/game/ui/labels.vue\";\nimport MenuBar from \"@/game/ui/menu/menu.vue\";\nimport NoteDialog from \"@/game/ui/note.vue\";\nimport SelectionInfo from \"@/game/ui/selection/selection_info.vue\";\nimport Tools from \"@/game/ui/tools/tools.vue\";\n\nimport { createConnection, socket } from \"@/game/api/socket\";\nimport { onKeyDown, onKeyUp } from \"@/game/events/keyboard\";\nimport { scrollZoom } from \"@/game/events/mouse\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { gameStore } from \"@/game/store\";\nimport { l2g } from \"@/game/units\";\nimport { LocalPoint } from \"./geom\";\n\n@Component({\n    components: {\n        \"tool-bar\": Tools,\n        \"selection-info\": SelectionInfo,\n        \"prompt-dialog\": Prompt,\n        \"confirm-dialog\": ConfirmDialog,\n        \"menu-bar\": MenuBar,\n        \"initiative-dialog\": Initiative,\n        \"zoom-slider\": vueSlider,\n        \"note-dialog\": NoteDialog,\n        \"label-dialog\": LabelManager,\n    },\n    beforeRouteEnter(to, from, next) {\n        createConnection(to);\n        next();\n    },\n    beforeRouteLeave(to, from, next) {\n        socket.disconnect();\n        next();\n    },\n})\nexport default class Game extends Vue {\n    $refs!: {\n        confirm: InstanceType<typeof ConfirmDialog>;\n        tools: InstanceType<typeof Tools>;\n    };\n\n    ready = {\n        manager: false,\n        tools: false,\n    };\n\n    get showUI(): boolean {\n        return gameStore.showUI;\n    }\n\n    get IS_DM(): boolean {\n        return gameStore.IS_DM;\n    }\n\n    get layers(): string[] {\n        return gameStore.layers;\n    }\n\n    get selectedLayer(): string {\n        return gameStore.selectedLayer;\n    }\n\n    get zoomDisplay(): number {\n        return gameStore.zoomDisplay;\n    }\n\n    set zoomDisplay(value: number) {\n        gameStore.updateZoom({\n            newZoomDisplay: value,\n            zoomLocation: l2g(new LocalPoint(window.innerWidth / 2, window.innerHeight / 2)),\n        });\n    }\n\n    mounted() {\n        window.addEventListener(\"resize\", this.resizeWindow);\n        window.addEventListener(\"keyup\", onKeyUp);\n        window.addEventListener(\"keydown\", onKeyDown);\n        this.ready.manager = true;\n    }\n\n    destroyed() {\n        window.removeEventListener(\"resize\", this.resizeWindow);\n        window.removeEventListener(\"keyup\", onKeyUp);\n        window.removeEventListener(\"keydown\", onKeyDown);\n        this.ready.manager = false;\n    }\n\n    // Window events\n\n    zoom(event: WheelEvent) {\n        throttle(scrollZoom)(event);\n    }\n\n    resizeWindow() {\n        layerManager.setWidth(window.innerWidth);\n        layerManager.setHeight(window.innerHeight);\n        layerManager.invalidate();\n    }\n\n    // Mouse events\n\n    mousedown(event: MouseEvent) {\n        this.$refs.tools.mousedown(event);\n    }\n    mouseup(event: MouseEvent) {\n        this.$refs.tools.mouseup(event);\n    }\n    mousemove(event: MouseEvent) {\n        this.$refs.tools.mousemove(event);\n    }\n    mouseleave(event: MouseEvent) {\n        this.$refs.tools.mouseleave(event);\n    }\n    contextmenu(event: MouseEvent) {\n        this.$refs.tools.contextmenu(event);\n    }\n    selectLayer(layer: string) {\n        layerManager.selectLayer(layer);\n    }\n    drop(event: DragEvent) {\n        if (event === null || event.dataTransfer === null) return;\n        if (event.dataTransfer.files.length > 0) {\n            this.$refs.confirm\n                .open(\"Uploading files should be done through the asset manager.\", \"Ok\", \"\")\n                .then(() => {}, () => {});\n        } else if (event.dataTransfer.getData(\"text/plain\") === \"\") {\n            return;\n        } else {\n            layerManager.dropAsset(event);\n        }\n    }\n}\n","import { GlobalPoint, LocalPoint, Ray } from \"@/game/geom\";\nimport { gameStore } from \"@/game/store\";\n\nexport function g2l(obj: GlobalPoint): LocalPoint {\n    const z = gameStore.zoomFactor;\n    const panX = gameStore.panX;\n    const panY = gameStore.panY;\n    return new LocalPoint((obj.x + panX) * z, (obj.y + panY) * z);\n}\n\nexport function g2lx(x: number) {\n    return g2l(new GlobalPoint(x, 0)).x;\n}\n\nexport function g2ly(y: number) {\n    return g2l(new GlobalPoint(0, y)).y;\n}\n\nexport function g2lz(z: number) {\n    return z * gameStore.zoomFactor;\n}\n\nexport function getUnitDistance(r: number) {\n    return (r / gameStore.unitSize) * gameStore.gridSize;\n}\n\nexport function g2lr(r: number) {\n    return g2lz(getUnitDistance(r));\n}\n\nexport function l2g(obj: LocalPoint): GlobalPoint;\nexport function l2g(obj: Ray<LocalPoint>): Ray<GlobalPoint>;\nexport function l2g(obj: LocalPoint | Ray<LocalPoint>): GlobalPoint | Ray<GlobalPoint> {\n    const z = gameStore.zoomFactor;\n    const panX = gameStore.panX;\n    const panY = gameStore.panY;\n    if (obj instanceof LocalPoint) {\n        return new GlobalPoint(obj.x / z - panX, obj.y / z - panY);\n    } else {\n        return new Ray<GlobalPoint>(l2g(obj.origin), obj.direction.multiply(1 / z), obj.tMax);\n    }\n}\n\nexport function l2gx(x: number) {\n    return l2g(new LocalPoint(x, 0)).x;\n}\n\nexport function l2gy(y: number) {\n    return l2g(new LocalPoint(0, y)).y;\n}\n\nexport function l2gz(z: number) {\n    return z / gameStore.zoomFactor;\n}\n\nexport function l2gr(r: number) {\n    return l2gz(getUnitDistance(r));\n}\n\n(<any>window).g2lx = g2lx;\n(<any>window).g2ly = g2ly;\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\n\nimport { mapState } from \"vuex\";\n\nimport ColorPicker from \"@/core/components/colorpicker.vue\";\nimport Prompt from \"@/core/components/modals/prompt.vue\";\nimport AssetNode from \"@/game/ui/menu/asset_node.vue\";\nimport NoteDialog from \"@/game/ui/note.vue\";\n\nimport { getRef, uuidv4 } from \"@/core/utils\";\nimport { socket } from \"@/game/api/socket\";\nimport { Note } from \"@/game/comm/types/general\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { gameStore } from \"@/game/store\";\n\n@Component({\n    components: {\n        \"color-picker\": ColorPicker,\n        \"asset-node\": AssetNode,\n    },\n    computed: {\n        ...mapState(\"game\", [\"invitationCode\", \"IS_DM\", \"locations\", \"assets\", \"notes\"]),\n    },\n})\nexport default class MenuBar extends Vue {\n    visible = {\n        settings: false,\n        locations: false,\n    };\n\n    get useGrid(): boolean {\n        return gameStore.useGrid;\n    }\n    set useGrid(value: boolean) {\n        gameStore.setUseGrid({ useGrid: value, sync: true });\n    }\n    get fullFOW(): boolean {\n        return gameStore.fullFOW;\n    }\n    set fullFOW(value: boolean) {\n        gameStore.setFullFOW({ fullFOW: value, sync: true });\n    }\n    get fowOpacity(): number {\n        return gameStore.fowOpacity;\n    }\n    set fowOpacity(value: number) {\n        if (typeof value !== \"number\") return;\n        gameStore.setFOWOpacity({ fowOpacity: value, sync: true });\n    }\n    get fowLOS(): boolean {\n        return gameStore.fowLOS;\n    }\n    set fowLOS(value: boolean) {\n        gameStore.setLineOfSight({ fowLOS: value, sync: true });\n    }\n    get unitSize(): number {\n        return gameStore.unitSize;\n    }\n    set unitSize(value: number) {\n        if (typeof value !== \"number\") return;\n        gameStore.setUnitSize({ unitSize: value, sync: true });\n    }\n    get gridSize(): number {\n        return gameStore.gridSize;\n    }\n    set gridSize(value: number) {\n        if (typeof value !== \"number\") return;\n        gameStore.setGridSize({ gridSize: value, sync: true });\n    }\n    get gridColour(): string {\n        return gameStore.gridColour;\n    }\n    set gridColour(value: string) {\n        gameStore.setGridColour({ colour: value, sync: true });\n    }\n    get fowColour(): string {\n        return gameStore.fowColour;\n    }\n    set fowColour(value: string) {\n        gameStore.setFOWColour({ colour: value, sync: true });\n    }\n    get rulerColour(): string {\n        return gameStore.rulerColour;\n    }\n    set rulerColour(value: string) {\n        gameStore.setRulerColour({ colour: value, sync: true });\n    }\n    get visionRangeMin(): number {\n        return gameStore.visionRangeMin;\n    }\n    set visionRangeMin(value: number) {\n        if (typeof value !== \"number\") return;\n        gameStore.setVisionRangeMin({ value, sync: true });\n    }\n    get visionRangeMax(): number {\n        return gameStore.visionRangeMax;\n    }\n    set visionRangeMax(value: number) {\n        if (typeof value !== \"number\") return;\n        gameStore.setVisionRangeMax({ value, sync: true });\n    }\n    settingsClick(event: { target: HTMLElement }) {\n        if (event.target.classList.contains(\"accordion\")) {\n            event.target.classList.toggle(\"accordion-active\");\n            const next = <HTMLElement>event.target.nextElementSibling;\n            if (next !== null) next.style.display = next.style.display === \"\" ? \"block\" : \"\";\n        }\n    }\n    changeLocation(name: string) {\n        socket.emit(\"Location.Change\", name);\n    }\n    createLocation() {\n        getRef<Prompt>(\"prompt\")\n            .prompt(`New location name:`, `Create new location`)\n            .then(\n                (value: string) => {\n                    socket.emit(\"Location.New\", value);\n                },\n                () => {},\n            );\n    }\n    createNote() {\n        const note = { title: \"New note\", text: \"\", uuid: uuidv4() };\n        gameStore.newNote({ note, sync: true });\n        this.openNote(note);\n    }\n    openNote(note: Note) {\n        getRef<NoteDialog>(\"note\").open(note);\n    }\n    changeVisionMode(event: { target: HTMLSelectElement }) {\n        const value = event.target.value.toLowerCase();\n        if (value !== \"bvh\" && value !== \"triangle\") return;\n        gameStore.setVisionMode({ mode: value, sync: true });\n        gameStore.recalculateVision();\n        gameStore.recalculateMovement();\n        layerManager.invalidate();\n    }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./colorpicker.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./colorpicker.vue?vue&type=script&lang=ts&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ContextMenu',{attrs:{\"visible\":_vm.visible,\"left\":_vm.x + 'px',\"top\":_vm.y + 'px'},on:{\"close\":_vm.close}},[(_vm.IS_DM)?_c('li',{on:{\"click\":_vm.bringPlayers}},[_vm._v(\"Bring players\")]):_vm._e(),_c('li',{on:{\"click\":_vm.createToken}},[_vm._v(\"Create basic token\")]),_c('li',{on:{\"click\":_vm.showInitiative}},[_vm._v(\"Show initiative\")])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"74f43d04-vue-loader-template\\\"}!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./selectcontext.vue?vue&type=template&id=44a31e42&scoped=true&\"","import { CDT } from \"./cdt\";\nimport { ccw, cw, orientation, ulp } from \"./triag\";\n\nexport type Point = number[];\n\nexport const INFINITE = -7e310;\n\nlet _INFINITE_VERTEX: Vertex;\n\nexport enum Sign {\n    NEGATIVE = -1,\n    ZERO = 0,\n    POSITIVE = 1,\n\n    RIGHT_TURN = -1,\n    LEFT_TURN = 1,\n\n    SMALLER = -1,\n    EQUAL = 0,\n    LARGER = 1,\n\n    CLOCKWISE = -1,\n    COUNTERCLOCKWISE = 1,\n\n    COLLINEAR = 0,\n    COPLANAR = 0,\n    DEGENERATE = 0,\n\n    ON_NEGATIVE_SIDE = -1,\n    ON_ORIENTED_BOUNDARY = 0,\n    ON_POSITIVE_SIDE = 1,\n}\n\nenum LineFaceState {\n    UNDEFINED = -1,\n    VERTEX_VERTEX = 0,\n    VERTEX_EDGE = 1,\n    EDGE_VERTEX = 2,\n    EDGE_EDGE = 3,\n}\n\nfunction newPoint(): Point {\n    return [INFINITE, INFINITE];\n}\n\nexport class Triangle {\n    vertices: (Vertex | null)[] = [];\n    neighbours: (Triangle | null)[] = [null, null, null];\n    constraints = [false, false, false];\n    static _counter = 0;\n    uid = Triangle._counter++;\n\n    constructor(...vertices: (Vertex | null)[]) {\n        this.vertices = vertices;\n    }\n\n    from(t: Triangle): this {\n        this.vertices = t.vertices.slice(0, t.vertices.length);\n        this.neighbours = t.neighbours.slice(0, t.neighbours.length);\n        this.constraints = t.constraints.slice(0, t.constraints.length);\n        return this;\n    }\n\n    get dimension() {\n        return this.vertices.length - 1;\n    }\n\n    addVertex(vertex: Vertex) {\n        if (vertex === undefined) {\n            console.log(\"UNDEFINED HIERE\");\n        }\n        this.vertices.push(vertex);\n        vertex.triangle = this;\n    }\n\n    isConstrained(index: number): boolean {\n        return this.constraints[index];\n    }\n\n    reorient() {\n        // If certain indices do not exist yet thay will append faulty undefined's, thus we slice them\n        this.vertices = [this.vertices[1], this.vertices[0], this.vertices[2]].slice(0, this.vertices.length);\n        this.neighbours = [this.neighbours[1], this.neighbours[0], this.neighbours[2]];\n        this.constraints = [this.constraints[1], this.constraints[0], this.constraints[2]];\n    }\n\n    indexV(v: Vertex): number {\n        return this.vertices.indexOf(v);\n    }\n\n    indexT(t: Triangle): number {\n        return this.neighbours.indexOf(t);\n    }\n\n    isInfinite(index?: number): boolean {\n        if (index === undefined) {\n            return this.vertices.includes(_INFINITE_VERTEX);\n        } else {\n            return this.vertices[ccw(index)]!.infinite || this.vertices[cw(index)]!.infinite;\n        }\n    }\n\n    contains(point: Point) {\n        const A =\n            -this.vertices[1]!.point![1] * this.vertices[2]!.point![0] +\n            this.vertices[0]!.point![1] * (-this.vertices[1]!.point![0] + this.vertices[2]!.point![0]) +\n            this.vertices[0]!.point![0] * (this.vertices[1]!.point![1] - this.vertices[2]!.point![1]) +\n            this.vertices[1]!.point![0] * this.vertices[2]!.point![1];\n        const sign = A < 0 ? -1 : 1;\n        const s =\n            (this.vertices[0]!.point![1] * this.vertices[2]!.point![0] -\n                this.vertices[0]!.point![0] * this.vertices[2]!.point![1] +\n                (this.vertices[2]!.point![1] - this.vertices[0]!.point![1]) * point[0] +\n                (this.vertices[0]!.point![0] - this.vertices[2]!.point![0]) * point[1]) *\n            sign;\n        if (s < 0) return false;\n        const t =\n            (this.vertices[0]!.point![0] * this.vertices[1]!.point![1] -\n                this.vertices[0]!.point![1] * this.vertices[1]!.point![0] +\n                (this.vertices[0]!.point![1] - this.vertices[1]!.point![1]) * point[0] +\n                (this.vertices[1]!.point![0] - this.vertices[0]!.point![0]) * point[1]) *\n            sign;\n\n        return t > 0 && s + t < A * sign;\n    }\n}\n\nexport class Vertex {\n    infinite = false;\n    private _point: Point | undefined;\n    triangle: Triangle | undefined;\n\n    constructor(point?: Point) {\n        this._point = point;\n    }\n\n    get point(): Point | undefined {\n        return this._point;\n    }\n\n    set point(point: Point | undefined) {\n        this._point = point;\n        this.infinite = false;\n    }\n}\n\nexport class EdgeCirculator {\n    ri: number;\n    v: Vertex | null;\n    t: Triangle | null;\n    _ri: number;\n    _v: Vertex | null;\n    _t: Triangle | null;\n\n    constructor(v: Vertex | null, t: Triangle | null) {\n        this.v = v;\n        this.t = t;\n        if (v === null) {\n            this.t = null;\n        } else if (t === null) {\n            this.t = v.triangle!;\n        }\n        if (this.t == null || this.t.dimension < 1) {\n            this.ri = 0;\n            this.v = null;\n            this.t = null;\n        } else {\n            const i = this.t.indexV(v!);\n            if (this.t.dimension === 2) this.ri = ccw(i);\n            else this.ri = 2;\n        }\n        this._ri = this.ri;\n        this._v = this.v;\n        this._t = this.t;\n    }\n\n    get valid() {\n        return this.t !== null && this.v !== null;\n    }\n\n    next(): boolean {\n        let i = this.t!.indexV(this.v!);\n        if (this.t!.dimension === 1) {\n            this.t = this.t!.neighbours[i === 0 ? 1 : 0];\n        } else {\n            this.t = this.t!.neighbours[ccw(i)];\n            i = this.t!.indexV(this.v!);\n            this.ri = ccw(i);\n        }\n        return this.ri !== this._ri || this.v !== this._v || this.t !== this._t;\n    }\n}\n\nexport class EdgeIterator {\n    private i = 0;\n    pos: Triangle | null;\n    edge: Edge = new Edge();\n    tds: TDS;\n    _es = 0;\n    constructor(tds: TDS) {\n        this.tds = tds;\n        this.edge.second = 0;\n        if (tds.dimension <= 0) {\n            this.pos = null;\n            return;\n        }\n        this.pos = tds.triangles[0];\n        if (tds.dimension === 1) this.edge.second = 2;\n        while (this.pos !== null && !this.associatedEdge()) {\n            throw new Error(\"[poi\");\n        }\n\n        if (tds.dimension === 1) this._es = 2;\n    }\n\n    get valid(): boolean {\n        return (this.pos !== null || this._es !== this.edge.second) && this.pos!.isInfinite(this.edge.second);\n    }\n\n    next() {\n        do {\n            this.increment();\n        } while (this.pos !== null && !this.associatedEdge());\n    }\n\n    collect(): Edge {\n        this.edge.first = this.pos;\n        return this.edge;\n    }\n\n    associatedEdge(): boolean {\n        if (this.tds.dimension === 1) return true;\n        return (\n            this.tds.triangles.indexOf(this.pos!) < this.tds.triangles.indexOf(this.pos!.neighbours[this.edge.second]!)\n        );\n    }\n\n    increment() {\n        if (this.tds.dimension === 1) {\n            this.i++;\n            if (this.tds.triangles.length <= this.i) this.pos = null;\n            else this.pos = this.tds.triangles[this.i];\n        } else if (this.edge.second === 2) {\n            this.edge.second = 0;\n            this.i++;\n            if (this.tds.triangles.length <= this.i) this.pos = null;\n            else this.pos = this.tds.triangles[this.i];\n        } else {\n            this.edge.second++;\n        }\n    }\n}\n\nexport class FaceCirculator {\n    v: Vertex | null;\n    t: Triangle | null;\n    _v: Vertex | null;\n    _t: Triangle | null;\n\n    constructor(v: Vertex | null, t: Triangle | null) {\n        this.v = v;\n        this.t = t;\n        if (v === null) {\n            this.t = null;\n        } else if (t === null) {\n            this.t = v.triangle!;\n        }\n        if (this.t == null || this.t.dimension < 2) {\n            this.v = null;\n            this.t = null;\n        }\n        this._v = this.v;\n        this._t = this.t;\n    }\n\n    get valid() {\n        return this.t !== null && this.v !== null;\n    }\n\n    prev() {\n        const i = this.t!.indexV(this.v!);\n        this.t = this.t!.neighbours[cw(i)];\n    }\n\n    next(): boolean {\n        const i = this.t!.indexV(this.v!);\n        this.t = this.t!.neighbours[ccw(i)];\n        return this.v !== this._v || this.t !== this._t;\n    }\n}\n\nexport class LineFaceCirculator {\n    private i = 0;\n    pos: Triangle | null = null;\n    _tr: CDT;\n    s: LineFaceState = LineFaceState.UNDEFINED;\n    p: Point;\n    q: Point;\n\n    constructor(v: Vertex, tr: CDT, dir: Point) {\n        this._tr = tr;\n        this.p = v.point!;\n        this.q = dir;\n\n        const fc = new FaceCirculator(v, null);\n        let ic = fc.t!.indexV(v);\n        let vt = fc.t!.vertices[cw(ic)]!;\n        while (v === _INFINITE_VERTEX || orientation(this.p, this.q, vt.point!) !== Sign.LEFT_TURN) {\n            fc.next();\n            ic = fc.t!.indexV(v);\n            vt = fc.t!.vertices[cw(ic)]!;\n            if (!fc.valid) {\n                return;\n            }\n        }\n\n        let vr = fc.t!.vertices[ccw(ic)]!;\n        let pqr: Sign = Sign.RIGHT_TURN;\n        // tslint:disable:no-conditional-assignment\n        while (vr !== _INFINITE_VERTEX && (pqr = orientation(this.p, this.q, vr.point!)) === Sign.LEFT_TURN) {\n            fc.prev();\n            ic = fc.t!.indexV(v);\n            vr = fc.t!.vertices[ccw(ic)]!;\n        }\n\n        ic = fc.t!.indexV(v);\n        vt = fc.t!.vertices[cw(ic)]!;\n\n        if (vr === _INFINITE_VERTEX) {\n            fc.prev();\n            ic = fc.t!.indexV(v);\n            vr = fc.t!.vertices[ccw(ic)]!;\n            pqr = orientation(this.p, this.q, vr.point!);\n            switch (pqr) {\n                case Sign.RIGHT_TURN:\n                case Sign.COLLINEAR: {\n                    fc.next();\n                    ic = fc.t!.indexV(_INFINITE_VERTEX);\n                    this.pos = fc.t!;\n                    this.s = LineFaceState.VERTEX_VERTEX;\n                    this.i = ic;\n                    break;\n                }\n                case Sign.LEFT_TURN: {\n                    break;\n                }\n            }\n        } else if (pqr === Sign.COLLINEAR) {\n            this.pos = fc.t!;\n            this.s = LineFaceState.VERTEX_VERTEX;\n            this.i = ccw(ic);\n        } else {\n            this.pos = fc.t!;\n            this.s = LineFaceState.VERTEX_EDGE;\n            this.i = ic;\n        }\n    }\n\n    next() {\n        this.increment();\n    }\n\n    increment() {\n        let o: Sign;\n        if (this.s === LineFaceState.VERTEX_VERTEX || this.s === LineFaceState.EDGE_VERTEX) {\n            do {\n                const n = this.pos!.neighbours[cw(this.i)]!;\n                this.i = n.indexT(this.pos!);\n                this.pos = n;\n                if (this.pos!.vertices[this.i] === _INFINITE_VERTEX) {\n                    o = Sign.COLLINEAR;\n                    this.i = cw(this.i);\n                    break;\n                }\n                o = orientation(this.p, this.q, this.pos!.vertices[this.i]!.point!);\n                this.i = cw(this.i);\n            } while (o === Sign.LEFT_TURN);\n            if (o === Sign.COLLINEAR) {\n                this.s = LineFaceState.VERTEX_VERTEX;\n                this.i = ccw(this.i);\n            } else {\n                this.s = LineFaceState.VERTEX_EDGE;\n            }\n        } else {\n            const n = this.pos!.neighbours[this.i]!;\n            const ni = n.indexT(this.pos!);\n            this.pos = n;\n            o =\n                this.pos!.vertices[ni]! === _INFINITE_VERTEX\n                    ? Sign.COLLINEAR\n                    : orientation(this.p, this.q, this.pos!.vertices[ni]!.point!);\n            switch (o) {\n                case Sign.LEFT_TURN: {\n                    this.s = LineFaceState.EDGE_EDGE;\n                    this.i = ccw(ni);\n                    break;\n                }\n                case Sign.RIGHT_TURN: {\n                    this.s = LineFaceState.EDGE_EDGE;\n                    this.i = cw(ni);\n                    break;\n                }\n                default: {\n                    this.s = LineFaceState.EDGE_VERTEX;\n                    this.i = ni;\n                }\n            }\n        }\n    }\n}\n\nclass Edge {\n    first: Triangle | null = null;\n    second: number = 0;\n}\n\nexport enum LocateType {\n    VERTEX,\n    EDGE,\n    FACE,\n    OUTSIDE_CONVEX_HULL,\n    OUTSIDE_AFFINE_HULL,\n}\n\nexport class TDS {\n    dimension = -1;\n    vertices: Vertex[] = [];\n    triangles: Triangle[] = [];\n    _infinite: Vertex;\n\n    constructor() {\n        this._infinite = this.createVertex();\n        _INFINITE_VERTEX = this._infinite;\n        const t = new Triangle();\n        t.addVertex(this._infinite);\n        this.triangles.push(t);\n    }\n\n    createVertex(): Vertex {\n        const v = this.infiniteVertex;\n        if (v === undefined) {\n            console.log(\"UNDEFINED HIERE\");\n        }\n        this.vertices.push(v);\n        return v;\n    }\n\n    createTriangle(\n        v0: Vertex | null,\n        v1: Vertex | null,\n        v2: Vertex | null,\n        n0: Triangle | null,\n        n1: Triangle | null,\n        n2: Triangle | null,\n    ) {\n        const t = new Triangle(v0, v1, v2);\n        t.neighbours[0] = n0;\n        t.neighbours[1] = n1;\n        t.neighbours[2] = n2;\n        this.triangles.push(t);\n        return t;\n    }\n\n    deleteTriangle(trig: Triangle) {\n        this.triangles = this.triangles.filter(t => t !== trig);\n    }\n\n    setAdjacency(t0: Triangle, i0: number, t1: Triangle, i1: number) {\n        t0.neighbours[i0] = t1;\n        t1.neighbours[i1] = t0;\n    }\n\n    get finiteVertex(): Vertex {\n        return this.vertices[1];\n    }\n\n    get infiniteVertex(): Vertex {\n        const v = new Vertex(newPoint());\n        v.infinite = true;\n        return v;\n    }\n\n    get finiteEdge(): Edge {\n        if (this.dimension < 1) throw new Error(\"aspo\");\n        const ei = new EdgeIterator(this);\n        while (ei.valid) ei.next();\n        return ei.collect();\n    }\n\n    insertDimUp(w: Vertex = new Vertex(), orient: boolean = true): Vertex {\n        const v = this.createVertex();\n        this.dimension++;\n        let t1: Triangle;\n        let t2: Triangle;\n        switch (this.dimension) {\n            case 0: {\n                t1 = this.triangles[0];\n                t2 = new Triangle(v);\n                this.triangles.push(t2);\n                this.setAdjacency(t1, 0, t2, 0);\n                v.triangle = t2;\n                break;\n            }\n            case 1:\n            case 2: {\n                const deleteList: Triangle[] = [];\n                const triangles = this.triangles.slice(0, this.triangles.length);\n                for (const trig of triangles) {\n                    const copy = new Triangle().from(trig);\n                    this.triangles.push(copy);\n                    trig.vertices[this.dimension] = v;\n                    copy.vertices[this.dimension] = w;\n                    this.setAdjacency(trig, this.dimension, copy, this.dimension);\n                    if (trig.vertices.includes(w)) deleteList.push(copy);\n                }\n                for (const trig of triangles) {\n                    const neighbour = trig.neighbours[this.dimension];\n                    for (let j = 0; j < this.dimension; ++j) {\n                        neighbour!.neighbours[j] = trig.neighbours[j]!.neighbours[this.dimension];\n                    }\n                }\n\n                let lfit = 0;\n                if (this.dimension === 1) {\n                    if (orient) {\n                        triangles[lfit].reorient();\n                        lfit++;\n                        triangles[lfit].neighbours[1]!.reorient();\n                    } else {\n                        triangles[lfit].neighbours[1]!.reorient();\n                        lfit++;\n                        triangles[lfit].reorient();\n                    }\n                } else {\n                    for (const trig of triangles) {\n                        if (orient) trig.neighbours[2]!.reorient();\n                        else trig.reorient();\n                    }\n                }\n\n                for (const trig of deleteList) {\n                    let j = 1;\n                    if (trig.vertices[0] === w) j = 0;\n                    t1 = trig.neighbours[this.dimension]!;\n                    const i1 = this.mirrorIndex(trig, this.dimension);\n                    t2 = trig.neighbours[j]!;\n                    const i2 = this.mirrorIndex(trig, j);\n                    this.setAdjacency(t1, i1, t2, i2);\n                    this.deleteTriangle(trig);\n                }\n                v.triangle = triangles[0];\n                break;\n            }\n            default: {\n                throw new Error(\"Dimension unknown\");\n            }\n        }\n        return v;\n    }\n\n    mirrorIndex(t: Triangle, i: number): number {\n        if (t.dimension === 1) {\n            const j = t.neighbours[i]!.indexV(t.vertices[i === 0 ? 1 : 0]!);\n            return j === 0 ? 1 : 0;\n        }\n        return ccw(t.neighbours[i]!.indexV(t.vertices[ccw(i)]!));\n    }\n\n    insertInFace(t: Triangle) {\n        const v = this.createVertex();\n        const v0 = t.vertices[0]!;\n        const v1 = t.vertices[1]!;\n        const v2 = t.vertices[2]!;\n        const n1 = t.neighbours[1]!;\n        const n2 = t.neighbours[2]!;\n        const t1 = this.createTriangle(v0, v, v2, t, n1, null);\n        const t2 = this.createTriangle(v0, v1, v, t, null, n2);\n        this.setAdjacency(t1, 2, t2, 1);\n        if (n1 !== null) {\n            const i1 = this.mirrorIndex(t, 1);\n            n1.neighbours[i1] = t1;\n        }\n        if (n2 !== null) {\n            const i2 = this.mirrorIndex(t, 2);\n            n2.neighbours[i2] = t2;\n        }\n        t.vertices[0] = v;\n        t.neighbours[1] = t1;\n        t.neighbours[2] = t2;\n        if (v0.triangle === t) v0.triangle = t2;\n        v.triangle = t;\n        return v;\n    }\n\n    flip(t: Triangle, i: number) {\n        const n = t.neighbours[i]!;\n        const ni = this.mirrorIndex(t, i);\n        const vCW = t.vertices[cw(i)]!;\n        const vCCW = t.vertices[ccw(i)]!;\n        const tr = t.neighbours[ccw(i)]!;\n        const tri = this.mirrorIndex(t, ccw(i));\n        const bl = n.neighbours[ccw(ni)]!;\n        const bli = this.mirrorIndex(n, ccw(ni));\n\n        t.vertices[cw(i)] = n.vertices[ni]!;\n        n.vertices[cw(ni)] = t.vertices[i]!;\n\n        this.setAdjacency(t, i, bl, bli);\n        this.setAdjacency(t, ccw(i), n, ccw(ni));\n        this.setAdjacency(n, ni, tr, tri);\n\n        if (vCW.triangle! === t) vCW.triangle = n;\n        if (vCCW.triangle! === n) vCCW.triangle = t;\n    }\n\n    insertInEdge(t: Triangle, i: number) {\n        let v: Vertex;\n        if (this.dimension === 1) {\n            v = this.createVertex();\n            const ff = t.neighbours[0]!;\n            const vv = t.vertices[1]!;\n            const g = this.createTriangle(v, vv, null, ff, t, null);\n            t.vertices[1] = v;\n            t.neighbours[0] = g;\n            ff.neighbours[1] = g;\n            v.triangle = g;\n            vv.triangle = ff;\n        } else {\n            const n = t.neighbours[i]!;\n            const ni = this.mirrorIndex(t, i);\n            v = this.insertInFace(t);\n            this.flip(n, ni);\n        }\n        return v;\n    }\n}\n\nexport class BoundingBox {\n    x1: number;\n    x2: number;\n    y1: number;\n    y2: number;\n    constructor(p: Point) {\n        this.x1 = p[0];\n        this.y1 = p[1];\n        this.x2 = p[0];\n        this.y2 = p[1];\n    }\n\n    dilate(dist: number) {\n        this.x1 -= dist * ulp(this.x1);\n        this.y1 -= dist * ulp(this.y1);\n        this.x2 += dist * ulp(this.x2);\n        this.y2 += dist * ulp(this.y2);\n    }\n\n    overlaps(other: BoundingBox): boolean {\n        if (this.x2 < other.x1 || other.x2 < this.x1) return false;\n        if (this.y2 < other.y1 || other.y2 < this.y1) return false;\n        return true;\n    }\n}\n","import { partition } from \"@/core/utils\";\nimport { GlobalPoint, Ray } from \"@/game/geom\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { BoundingRect } from \"@/game/shapes/boundingrect\";\nimport { gameStore } from \"@/game/store\";\nimport { g2lx, g2ly, g2lz } from \"@/game/units\";\nimport { BoundingNode, InteriorNode, LeafNode } from \"@/game/visibility/bvh/node\";\n\ninterface BuildInfo {\n    index: number;\n    bbox: BoundingRect;\n    center: BoundingRect;\n}\ninterface LinearBHVNode {\n    bbox: BoundingRect;\n    nPrimitives: number;\n}\ninterface LinearLeafNode extends LinearBHVNode {\n    primitivesOffset: number;\n}\ninterface LinearInternalNode extends LinearBHVNode {\n    secondChildOffset: number;\n    dimension: number;\n}\n\nexport class BoundingVolume {\n    totalNodes = 0;\n    buildData: BuildInfo[] = [];\n    shapes: string[];\n    orderedPrims: string[] = [];\n    root: BoundingNode | null;\n    nodes: LinearBHVNode[] = [];\n\n    offset = 0;\n\n    constructor(shapes: string[]) {\n        this.shapes = shapes;\n        if (this.shapes.length === 0) {\n            this.root = null;\n            this.nodes = [];\n            return;\n        }\n        for (let i = 0; i < shapes.length; i++) {\n            const shape = layerManager.UUIDMap.get(shapes[i])!;\n            this.buildData.push({\n                index: i,\n                bbox: shape.getBoundingBox(),\n                center: new BoundingRect(shape.center(), 0, 0),\n            });\n        }\n        this.root = this.recursiveBuild(0, shapes.length);\n        this.compact();\n    }\n\n    draw() {\n        const ctx = layerManager.getLayer(\"draw\")!.ctx;\n        for (const node of this.nodes) {\n            const b = node.bbox;\n            ctx.strokeRect(g2lx(b.topLeft.x), g2ly(b.topLeft.y), g2lz(b.w), g2lz(b.h));\n        }\n    }\n\n    recursiveBuild(start: number, end: number): BoundingNode {\n        this.totalNodes++;\n        let bbox = this.buildData[start].bbox;\n        for (let i = start + 1; i < end; i++) bbox = bbox.union(this.buildData[i].bbox);\n        const nPrimitives = end - start;\n        if (nPrimitives === 1) {\n            return this.createLeaf(start, end, nPrimitives, bbox);\n        } else {\n            let centroidBbox = this.buildData[start].center;\n            for (let i = start; i < end; i++) centroidBbox = centroidBbox.union(this.buildData[i].center);\n            const dimension = centroidBbox.getMaxExtent();\n            if (centroidBbox.botRight.get(dimension) === centroidBbox.topLeft.get(dimension)) {\n                return this.createLeaf(start, end, nPrimitives, bbox);\n            }\n            // Use shitty Middle thingy until an introselect js algo is added\n            const pMid = 0.5 * (centroidBbox.topLeft.get(dimension) + centroidBbox.botRight.get(dimension));\n            const partitionedData = partition(\n                this.buildData.slice(start, end),\n                (n: BuildInfo) => n.center.center().get(dimension) < pMid,\n            );\n            const flattened = (<BuildInfo[]>[]).concat.apply([], partitionedData);\n            if (partitionedData[0].length === 0 || partitionedData[1].length === 0) console.log(\"EMPTY\");\n            this.buildData.splice(start, flattened.length, ...flattened);\n            const mid = partitionedData[0].length + start;\n            return new InteriorNode(dimension, this.recursiveBuild(start, mid), this.recursiveBuild(mid, end));\n        }\n    }\n\n    intersect(ray: Ray<GlobalPoint>, stopOnFirstHit?: boolean) {\n        if (this.nodes.length === 0) return { hit: false, intersect: ray.get(0), tMin: 0, tMax: ray.tMax };\n        if (stopOnFirstHit === undefined) stopOnFirstHit = false;\n        // Initialize return values\n        let hit = false;\n        let tMin = 0;\n        let tMax = ray.tMax;\n\n        // Initialize work variables\n        let todoOffset = 0;\n        let nodeNum = 0;\n        const todo: number[] = [];\n\n        // Precalculate intersection vectors\n        const invDir = ray.direction.inverse();\n        const dirIsNegative = [invDir.x < 0, invDir.y < 0];\n\n        while (true) {\n            const node = this.nodes[nodeNum];\n\n            const i = node.bbox.intersectP(ray, invDir, dirIsNegative);\n            if (i.hit) {\n                if (node.nPrimitives > 0) {\n                    // TODO: nPrimitives is currently always 1 , this could be generalised\n                    // for (let i=0; i < node.nPrimitives; i++) {\n                    //     if (this.shapes[(<LinearLeafNode>node).primitivesOffset + i])\n                    // }\n                    hit = true;\n                    tMin = ray.tMax = i.min;\n                    tMax = i.max;\n                    if (todoOffset === 0 || stopOnFirstHit) break;\n                    nodeNum = todo[--todoOffset];\n                } else {\n                    if (dirIsNegative[(<LinearInternalNode>node).dimension]) {\n                        todo[todoOffset++] = nodeNum + 1;\n                        nodeNum = (<LinearInternalNode>node).secondChildOffset;\n                    } else {\n                        todo[todoOffset++] = (<LinearInternalNode>node).secondChildOffset;\n                        nodeNum++;\n                    }\n                }\n            } else {\n                if (todoOffset === 0) break;\n                nodeNum = todo[--todoOffset];\n            }\n        }\n        return { hit, intersect: ray.get(tMin), tMin, tMax };\n    }\n\n    private compact() {\n        this.offset = 0;\n        if (this.root !== null) this.flatten(this.root);\n    }\n\n    private flatten(node: BoundingNode) {\n        const index = this.offset;\n        const myOffset = this.offset++;\n        if (node.nPrimitives === 0) {\n            this.flatten(node.children[0]);\n            const secondOffset = this.flatten(node.children[1]);\n            this.nodes[index] = <LinearInternalNode>{\n                bbox: node.bbox,\n                dimension: (<InteriorNode>node).dimension,\n                nPrimitives: 0,\n                secondChildOffset: secondOffset,\n            };\n        } else {\n            this.nodes[index] = <LinearLeafNode>{\n                bbox: node.bbox,\n                primitivesOffset: (<LeafNode>node).firstPrimOffset,\n                nPrimitives: node.nPrimitives,\n            };\n        }\n        return myOffset;\n    }\n\n    private createLeaf(start: number, end: number, nPrimitives: number, bbox: BoundingRect) {\n        const size = this.orderedPrims.length;\n        for (let i = start; i < end; i++) this.orderedPrims.push(this.shapes[this.buildData[i].index]);\n        return new LeafNode(size, nPrimitives, bbox);\n    }\n}\n","import Initiative from \"./ui/initiative.vue\";\n\nimport { getRef } from \"@/core/utils\";\nimport { sendClientOptions } from \"@/game/api/utils\";\nimport { ServerShape } from \"@/game/comm/types/shapes\";\nimport { GlobalPoint } from \"@/game/geom\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { createShapeFromDict } from \"@/game/shapes/utils\";\nimport { gameStore } from \"@/game/store\";\nimport { AnnotationManager } from \"@/game/ui/annotation\";\nimport { g2l } from \"@/game/units\";\n\nexport class GameManager {\n    selectedTool: number = 0;\n\n    annotationManager = new AnnotationManager();\n\n    addShape(shape: ServerShape): void {\n        if (!layerManager.hasLayer(shape.layer)) {\n            console.log(`Shape with unknown layer ${shape.layer} could not be added`);\n            return;\n        }\n        const layer = layerManager.getLayer(shape.layer)!;\n        const sh = createShapeFromDict(shape);\n        if (sh === undefined) {\n            console.log(`Shape with unknown type ${shape.type_} could not be added`);\n            return;\n        }\n        layer.addShape(sh, false);\n        layer.invalidate(false);\n    }\n\n    updateShape(data: { shape: ServerShape; redraw: boolean; move: boolean }): void {\n        if (!layerManager.hasLayer(data.shape.layer)) {\n            console.log(`Shape with unknown layer ${data.shape.layer} could not be added`);\n            return;\n        }\n        const sh = createShapeFromDict(data.shape);\n        if (sh === undefined) {\n            console.log(`Shape with unknown type ${data.shape.type_} could not be added`);\n            return;\n        }\n        const oldShape = layerManager.UUIDMap.get(data.shape.uuid);\n        if (oldShape === undefined) {\n            console.log(`Shape with unknown id could not be updated`);\n            return;\n        }\n        const redrawInitiative = sh.owners !== oldShape.owners;\n        const shape = Object.assign(oldShape, sh);\n        shape.checkVisionSources();\n        shape.setMovementBlock(shape.movementObstruction);\n        shape.setIsToken(shape.isToken);\n        if (data.redraw) layerManager.getLayer(data.shape.layer)!.invalidate(false);\n        if (redrawInitiative) getRef<Initiative>(\"initiative\").$forceUpdate();\n    }\n\n    setCenterPosition(position: GlobalPoint) {\n        const localPos = g2l(position);\n        gameStore.increasePanX((window.innerWidth / 2 - localPos.x) / gameStore.zoomFactor);\n        gameStore.increasePanY((window.innerHeight / 2 - localPos.y) / gameStore.zoomFactor);\n        layerManager.invalidate();\n        sendClientOptions();\n    }\n}\n\nexport const gameManager = new GameManager();\n(<any>window).gameManager = gameManager;\n","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./asset_node.vue?vue&type=style&index=0&id=6d718094&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./asset_node.vue?vue&type=style&index=0&id=6d718094&scoped=true&lang=css&\"","\n\n\n\n\n\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\n\n@Component\nexport default class LoadComponent extends Vue {\n    message = \"Loading...\";\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.shape !== null)?_c('div',[_c('div',{attrs:{\"id\":\"selection-menu\"}},[_c('div',{attrs:{\"id\":\"selection-edit-button\"},on:{\"click\":_vm.openEditDialog}},[_c('i',{staticClass:\"fas fa-edit\"})]),_c('div',{attrs:{\"id\":\"selection-name\"}},[_vm._v(_vm._s(_vm.shape.name))]),_c('div',{attrs:{\"id\":\"selection-trackers\"}},[_vm._l((_vm.shape.trackers),function(tracker){return (tracker.name !== '' || tracker.value !== 0)?[_c('div',{key:'name-' + tracker.uuid},[_vm._v(_vm._s(tracker.name))]),_c('div',{key:'value-' + tracker.uuid,staticClass:\"selection-tracker-value\",on:{\"click\":function($event){_vm.changeValue(tracker, false)}}},[(tracker.maxvalue === 0)?[_vm._v(_vm._s(tracker.value))]:[_vm._v(_vm._s(tracker.value)+\" / \"+_vm._s(tracker.maxvalue))]],2)]:_vm._e()})],2),_c('div',{attrs:{\"id\":\"selection-auras\"}},[_vm._l((_vm.shape.auras),function(aura){return (aura.name !== '' || aura.value !== 0)?[_c('div',{key:'name-' + aura.uuid},[_vm._v(_vm._s(aura.name))]),_c('div',{key:'value-' + aura.uuid,staticClass:\"selection-tracker-value\",on:{\"click\":function($event){_vm.changeValue(aura, true)}}},[(aura.dim === 0)?[_vm._v(_vm._s(aura.value))]:[_vm._v(_vm._s(aura.value)+\" / \"+_vm._s(aura.dim))]],2)]:_vm._e()})],2)]),_c('edit-dialog',{ref:\"editDialog\",attrs:{\"shape\":_vm.shape}})],1):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"74f43d04-vue-loader-template\\\"}!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./selection_info.vue?vue&type=template&id=674cf937&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.getActiveLayer() !== undefined)?_c('ContextMenu',{attrs:{\"visible\":_vm.visible,\"left\":_vm.x + 'px',\"top\":_vm.y + 'px'},on:{\"close\":_vm.close}},[(_vm.getLayers().length > 1)?_c('li',[_vm._v(\"Layer\\n        \"),_c('ul',_vm._l((_vm.getLayers()),function(layer){return _c('li',{key:layer.name,style:([_vm.getActiveLayer().name === layer.name ? {'background-color':'#82c8a0'}: {}]),on:{\"click\":function($event){_vm.setLayer(layer.name)}}},[_vm._v(_vm._s(layer.name))])}))]):_vm._e(),_c('li',{on:{\"click\":_vm.moveToBack}},[_vm._v(\"Move to back\")]),_c('li',{on:{\"click\":_vm.moveToFront}},[_vm._v(\"Move to front\")]),_c('li',{on:{\"click\":_vm.addInitiative}},[_vm._v(_vm._s(_vm.getInitiativeWord())+\" initiative\")]),_c('li',{on:{\"click\":_vm.openEditDialog}},[_vm._v(\"Show properties\")])]):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"74f43d04-vue-loader-template\\\"}!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./shapecontext.vue?vue&type=template&id=759e5a8a&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('Modal',{attrs:{\"visible\":_vm.visible,\"mask\":false},on:{\"close\":function($event){_vm.visible = false}},scopedSlots:_vm._u([{key:\"header\",fn:function(m){return _c('div',{staticClass:\"modal-header\",attrs:{\"draggable\":\"true\"},on:{\"dragstart\":m.dragStart,\"dragend\":m.dragEnd}},[_c('div',[_vm._v(\"Edit asset\")]),_c('div',{staticClass:\"header-close\",on:{\"click\":function($event){_vm.visible = false}}},[_c('i',{staticClass:\"far fa-window-close\"})])])}}])},[_c('div',{staticClass:\"modal-body\"},[_c('div',{staticClass:\"grid\"},[_c('label',{attrs:{\"for\":\"shapeselectiondialog-name\"}},[_vm._v(\"Name\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.shape.name),expression:\"shape.name\"}],staticStyle:{\"grid-column\":\"numerator / remove\"},attrs:{\"type\":\"text\",\"id\":\"shapeselectiondialog-name\",\"disabled\":!_vm.owned},domProps:{\"value\":(_vm.shape.name)},on:{\"change\":function($event){_vm.updateShape(false)},\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.shape, \"name\", $event.target.value)}}}),_c('div',{style:({opacity: _vm.shape.nameVisible ? 1.0 : 0.3, textAlign: 'center'}),attrs:{\"disabled\":!_vm.owned},on:{\"click\":function($event){_vm.shape.nameVisible = !_vm.shape.nameVisible;_vm.updateShape(false)}}},[_c('i',{staticClass:\"fas fa-eye\"})]),_c('label',{attrs:{\"for\":\"shapeselectiondialog-istoken\"}},[_vm._v(\"Is a token\")]),_c('input',{staticClass:\"styled-checkbox\",staticStyle:{\"grid-column-start\":\"remove\"},attrs:{\"type\":\"checkbox\",\"id\":\"shapeselectiondialog-istoken\",\"disabled\":!_vm.owned},domProps:{\"checked\":_vm.shape.isToken},on:{\"click\":_vm.setToken}}),_c('label',{attrs:{\"for\":\"shapeselectiondialog-visionblocker\"}},[_vm._v(\"Blocks vision/light\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.shape.visionObstruction),expression:\"shape.visionObstruction\"}],staticStyle:{\"grid-column-start\":\"remove\"},attrs:{\"type\":\"checkbox\",\"id\":\"shapeselectiondialog-visionblocker\",\"disabled\":!_vm.owned},domProps:{\"checked\":Array.isArray(_vm.shape.visionObstruction)?_vm._i(_vm.shape.visionObstruction,null)>-1:(_vm.shape.visionObstruction)},on:{\"change\":[function($event){var $$a=_vm.shape.visionObstruction,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.$set(_vm.shape, \"visionObstruction\", $$a.concat([$$v])))}else{$$i>-1&&(_vm.$set(_vm.shape, \"visionObstruction\", $$a.slice(0,$$i).concat($$a.slice($$i+1))))}}else{_vm.$set(_vm.shape, \"visionObstruction\", $$c)}},_vm.setVisionBlocker]}}),_c('label',{attrs:{\"for\":\"shapeselectiondialog-moveblocker\"}},[_vm._v(\"Blocks movement\")]),_c('input',{staticStyle:{\"grid-column-start\":\"remove\"},attrs:{\"type\":\"checkbox\",\"id\":\"shapeselectiondialog-moveblocker\",\"disabled\":!_vm.owned},domProps:{\"checked\":_vm.shape.movementObstruction},on:{\"click\":_vm.setMovementBlocker}}),_c('label',{attrs:{\"for\":\"shapeselectiondialog-strokecolour\"}},[_vm._v(\"Border colour\")]),_c('color-picker',{staticStyle:{\"grid-column-start\":\"remove\"},attrs:{\"color\":_vm.shape.strokeColour,\"disabled\":!_vm.owned},on:{\"update:color\":function($event){_vm.$set(_vm.shape, \"strokeColour\", $event)},\"input\":function($event){_vm.updateShape(true, true)},\"change\":function($event){_vm.updateShape(true)}}}),_c('label',{attrs:{\"for\":\"shapeselectiondialog-fillcolour\"}},[_vm._v(\"Fill colour\")]),_c('color-picker',{staticStyle:{\"grid-column-start\":\"remove\"},attrs:{\"color\":_vm.shape.fillColour,\"disabled\":!_vm.owned},on:{\"update:color\":function($event){_vm.$set(_vm.shape, \"fillColour\", $event)},\"input\":function($event){_vm.updateShape(true, true)},\"change\":function($event){_vm.updateShape(true)}}}),_c('div',{staticClass:\"spanrow header\"},[_vm._v(\"Access\")]),_vm._l((_vm.shape.owners),function(owner){return [_c('input',{key:owner,staticStyle:{\"grid-column-start\":\"name\"},attrs:{\"type\":\"text\",\"placeholder\":\"name\",\"disabled\":!_vm.owned},domProps:{\"value\":owner},on:{\"change\":function($event){_vm.updateOwner($event, owner)}}}),(owner !== '')?_c('div',{key:'remove-' + owner,style:({opacity: _vm.owned ? 1.0 : 0.3, textAlign: 'center', gridColumnStart: 'remove'}),attrs:{\"disabled\":!_vm.owned},on:{\"click\":function($event){_vm.removeOwner(owner)}}},[_c('i',{staticClass:\"fas fa-trash-alt\"})]):_vm._e()]}),_c('div',{staticClass:\"spanrow header\"},[_vm._v(\"Trackers\")]),_vm._l((_vm.shape.trackers),function(tracker){return [_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(tracker.name),expression:\"tracker.name\"}],key:'name-'+tracker.uuid,staticStyle:{\"grid-column-start\":\"name\"},attrs:{\"type\":\"text\",\"placeholder\":\"name\",\"disabled\":!_vm.owned},domProps:{\"value\":(tracker.name)},on:{\"change\":function($event){_vm.updateShape(false);},\"input\":function($event){if($event.target.composing){ return; }_vm.$set(tracker, \"name\", $event.target.value)}}}),_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(tracker.value),expression:\"tracker.value\",modifiers:{\"number\":true}}],key:'value-'+tracker.uuid,attrs:{\"type\":\"text\",\"title\":\"Current value\",\"disabled\":!_vm.owned},domProps:{\"value\":(tracker.value)},on:{\"change\":function($event){_vm.updateShape(false)},\"input\":function($event){if($event.target.composing){ return; }_vm.$set(tracker, \"value\", _vm._n($event.target.value))},\"blur\":function($event){_vm.$forceUpdate()}}}),_c('span',{key:'fspan-'+tracker.uuid},[_vm._v(\"/\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(tracker.maxvalue),expression:\"tracker.maxvalue\",modifiers:{\"number\":true}}],key:'maxvalue-'+tracker.uuid,attrs:{\"type\":\"text\",\"title\":\"Current value\",\"disabled\":!_vm.owned},domProps:{\"value\":(tracker.maxvalue)},on:{\"change\":function($event){_vm.updateShape(false)},\"input\":function($event){if($event.target.composing){ return; }_vm.$set(tracker, \"maxvalue\", _vm._n($event.target.value))},\"blur\":function($event){_vm.$forceUpdate()}}}),_c('span',{key:'sspan-'+tracker.uuid}),_c('div',{key:'visibility-'+tracker.uuid,style:({opacity: tracker.visible ? 1.0 : 0.3, textAlign: 'center'}),attrs:{\"disabled\":!_vm.owned},on:{\"click\":function($event){tracker.visible = !tracker.visible;_vm.updateShape(false)}}},[_c('i',{staticClass:\"fas fa-eye\"})]),_c('span',{key:'tspan-'+tracker.uuid}),(tracker.name !== '' || tracker.value !== 0)?_c('div',{key:'remove-'+tracker.uuid,style:({opacity: _vm.owned ? 1.0 : 0.3, textAlign: 'center'}),attrs:{\"disabled\":!_vm.owned},on:{\"click\":function($event){_vm.removeTracker(tracker.uuid)}}},[_c('i',{staticClass:\"fas fa-trash-alt\"})]):_vm._e()]}),_c('div',{staticClass:\"spanrow header\"},[_vm._v(\"Auras\")]),_vm._l((_vm.shape.auras),function(aura){return [_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(aura.name),expression:\"aura.name\"}],key:'name-'+aura.uuid,staticStyle:{\"grid-column-start\":\"name\"},attrs:{\"type\":\"text\",\"placeholder\":\"name\",\"disabled\":!_vm.owned},domProps:{\"value\":(aura.name)},on:{\"change\":function($event){_vm.updateShape(false)},\"input\":function($event){if($event.target.composing){ return; }_vm.$set(aura, \"name\", $event.target.value)}}}),_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(aura.value),expression:\"aura.value\",modifiers:{\"number\":true}}],key:'value-'+aura.uuid,attrs:{\"type\":\"text\",\"title\":\"Current value\",\"disabled\":!_vm.owned},domProps:{\"value\":(aura.value)},on:{\"change\":function($event){_vm.updateShape(true)},\"input\":function($event){if($event.target.composing){ return; }_vm.$set(aura, \"value\", _vm._n($event.target.value))},\"blur\":function($event){_vm.$forceUpdate()}}}),_c('span',{key:'fspan-'+aura.uuid},[_vm._v(\"/\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(aura.dim),expression:\"aura.dim\",modifiers:{\"number\":true}}],key:'dimvalue-'+aura.uuid,attrs:{\"type\":\"text\",\"title\":\"Dim value\",\"disabled\":!_vm.owned},domProps:{\"value\":(aura.dim)},on:{\"change\":function($event){_vm.updateShape(true)},\"input\":function($event){if($event.target.composing){ return; }_vm.$set(aura, \"dim\", _vm._n($event.target.value))},\"blur\":function($event){_vm.$forceUpdate()}}}),_c('color-picker',{key:'colour-'+aura.uuid,attrs:{\"color\":aura.colour,\"disabled\":!_vm.owned},on:{\"update:color\":function($event){_vm.$set(aura, \"colour\", $event)},\"input\":function($event){_vm.updateAuraColour(aura, $event)},\"change\":function($event){_vm.updateShape(true)}}}),_c('div',{key:'visibility-'+aura.uuid,style:({opacity: aura.visible ? 1.0 : 0.3, textAlign: 'center'}),attrs:{\"disabled\":!_vm.owned},on:{\"click\":function($event){aura.visible = !aura.visible;_vm.updateShape(true)}}},[_c('i',{staticClass:\"fas fa-eye\"})]),_c('div',{key:'visionsource-'+aura.uuid,style:({opacity: aura.visionSource ? 1.0 : 0.3, textAlign: 'center'}),attrs:{\"disabled\":!_vm.owned},on:{\"click\":function($event){_vm.updateAuraVisionSource(aura)}}},[_c('i',{staticClass:\"fas fa-lightbulb\"})]),(aura.name !== '' || aura.value !== 0)?_c('div',{key:'remove-'+aura.uuid,style:({opacity: _vm.owned ? 1.0 : 0.3, textAlign: 'center'}),attrs:{\"disabled\":!_vm.owned},on:{\"click\":function($event){_vm.removeAura(aura.uuid)}}},[_c('i',{staticClass:\"fas fa-trash-alt\"})]):_vm._e()]}),_c('div',{staticClass:\"spanrow header\"},[_vm._v(\"Labels\")]),_c('div',{staticClass:\"spanrow\",attrs:{\"id\":\"labels\"}},[_vm._l((_vm.shape.labels),function(label){return _c('div',{key:label.uuid,staticClass:\"label\"},[(label.name[0] !== ':')?[_c('div',{staticClass:\"label-user\"},[_vm._v(_vm._s(label.name.split(\":\")[0]))]),_c('div',{staticClass:\"label-main\",on:{\"click\":function($event){_vm.removeLabel(label.uuid)}}},[_vm._v(_vm._s(label.name.split(\":\").splice(1).join(\":\")))])]:_vm._e(),(label.name[0] === ':')?[_c('div',{staticClass:\"label-main\",on:{\"click\":function($event){_vm.removeLabel(label.uuid)}}},[_vm._v(_vm._s(label.name.slice(1)))])]:_vm._e()],2)}),(_vm.owned)?_c('div',{staticClass:\"label\",attrs:{\"id\":\"label-add\"}},[_c('div',{staticClass:\"label-main\",on:{\"click\":_vm.openLabelManager}},[_vm._v(\"+\")])]):_vm._e()],2),_c('div',{staticClass:\"spanrow header\"},[_vm._v(\"Annotation\")]),_c('textarea',{staticClass:\"spanrow\",attrs:{\"disabled\":!_vm.owned},domProps:{\"value\":_vm.shape.annotation},on:{\"change\":_vm.updateAnnotation}})],2)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"74f43d04-vue-loader-template\\\"}!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./edit_dialog.vue?vue&type=template&id=431ad764&scoped=true&\"","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport axios, { AxiosError, AxiosResponse } from \"axios\";\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\nimport { Route } from \"vue-router\";\n\nimport { coreStore } from \"@/core/store\";\n\nComponent.registerHooks([\"beforeRouteEnter\"]);\n\n@Component\nexport default class Dashboard extends Vue {\n    owned = [];\n    joined = [];\n    error = \"\";\n\n    newSessionName = \"\";\n\n    beforeRouteEnter(to: Route, from: Route, next: ({}) => {}) {\n        axios\n            .get(\"/api/rooms\")\n            .then((response: AxiosResponse) => {\n                next((vm: this) => {\n                    vm.owned = response.data.owned;\n                    vm.joined = response.data.joined;\n                });\n            })\n            .catch((err: AxiosError) => {\n                next((vm: this) => {\n                    vm.error = err.message;\n                });\n            });\n    }\n\n    createRoom(event: Event) {\n        axios\n            .post(\"/api/rooms\", {\n                name: this.newSessionName,\n            })\n            .then((response: AxiosResponse) => {\n                this.$router.push(`/game/${coreStore.username}/${this.newSessionName}`);\n            })\n            .catch((err: AxiosError) => {\n                this.error = err.message;\n            });\n    }\n}\n","import { render, staticRenderFns } from \"./confirm.vue?vue&type=template&id=1883e207&scoped=true&\"\nimport script from \"./confirm.vue?vue&type=script&lang=ts&\"\nexport * from \"./confirm.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./confirm.vue?vue&type=style&index=0&id=1883e207&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1883e207\",\n  null\n  \n)\n\ncomponent.options.__file = \"confirm.vue\"\nexport default component.exports","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tools.vue?vue&type=style&index=0&id=cf33581e&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tools.vue?vue&type=style&index=0&id=cf33581e&scoped=true&lang=css&\"","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./shapecontext.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./shapecontext.vue?vue&type=script&lang=ts&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ContextMenu',{attrs:{\"visible\":_vm.visible,\"left\":_vm.left + 'px',\"top\":_vm.top + 'px'},on:{\"close\":_vm.close}},[_c('li',{on:{\"click\":_vm.rename}},[_vm._v(\"Rename\")]),_c('li',{on:{\"click\":_vm.remove}},[_vm._v(\"Remove\")])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"74f43d04-vue-loader-template\\\"}!../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./contextMenu.vue?vue&type=template&id=606797b4&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./draw.vue?vue&type=style&index=0&id=639cd890&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./draw.vue?vue&type=style&index=0&id=639cd890&scoped=true&lang=css&\"","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--12-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./manager.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--12-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./manager.vue?vue&type=script&lang=ts&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./labels.vue?vue&type=style&index=0&id=7893fe7e&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./labels.vue?vue&type=style&index=0&id=7893fe7e&scoped=true&lang=css&\"","import Vue from \"vue\";\nexport const EventBus = new Vue();\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--12-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./main.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--12-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./main.vue?vue&type=script&lang=ts&\"","import { GlobalPoint } from \"@/game/geom\";\nimport { BaseRect } from \"@/game/shapes/baserect\";\nimport { gameStore } from \"@/game/store\";\nimport { g2l } from \"@/game/units\";\nimport { getFogColour } from \"@/game/utils\";\n\nexport class Rect extends BaseRect {\n    type = \"rect\";\n    constructor(topleft: GlobalPoint, w: number, h: number, fillColour?: string, strokeColour?: string, uuid?: string) {\n        super(topleft, w, h, fillColour, strokeColour, uuid);\n    }\n    asDict() {\n        return super.getBaseDict();\n    }\n    draw(ctx: CanvasRenderingContext2D) {\n        super.draw(ctx);\n        if (this.fillColour === \"fog\") ctx.fillStyle = getFogColour();\n        else ctx.fillStyle = this.fillColour;\n        const z = gameStore.zoomFactor;\n        const loc = g2l(this.refPoint);\n        ctx.fillRect(loc.x, loc.y, this.w * z, this.h * z);\n        if (this.strokeColour !== \"rgba(0, 0, 0, 0)\") {\n            ctx.strokeStyle = this.strokeColour;\n            ctx.lineWidth = 5;\n            ctx.strokeRect(loc.x, loc.y, this.w * z, this.h * z);\n        }\n    }\n}\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./game.vue?vue&type=style&index=1&id=05b88da7&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./game.vue?vue&type=style&index=1&id=05b88da7&scoped=true&lang=css&\"","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./filter.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./filter.vue?vue&type=script&lang=ts&\"","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./selectcontext.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./selectcontext.vue?vue&type=script&lang=ts&\"","import { Ray, Vector } from \"@/game/geom\";\nimport { Layer } from \"@/game/layers/layer\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { Settings } from \"@/game/settings\";\nimport { gameStore } from \"@/game/store\";\nimport { g2l, g2lr, g2lx, g2ly } from \"@/game/units\";\nimport { computeVisibility } from \"../visibility/te/te\";\n\nexport class FOWPlayersLayer extends Layer {\n    isVisionLayer: boolean = true;\n\n    draw(): void {\n        if (!this.valid) {\n            // console.time(\"VI\");\n            const ctx = this.ctx;\n\n            if (!gameStore.fowLOS || Settings.skipPlayerFOW) {\n                ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n                this.valid = true;\n                return;\n            }\n\n            ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n\n            const originalOperation = ctx.globalCompositeOperation;\n\n            ctx.fillStyle = \"rgba(0, 0, 0, 1)\";\n\n            // For the DM this is done at the end of this function.  TODO: why the split up ???\n            // This was done in commit be1e65cff1e7369375fe11cfa1643fab1d11beab.\n            if (!gameStore.IS_DM) super.draw(!gameStore.fullFOW);\n\n            // Then cut out all the player vision auras\n            const maxLength = ctx.canvas.width + ctx.canvas.height;\n\n            for (const tokenId of gameStore.ownedtokens) {\n                const token = layerManager.UUIDMap.get(tokenId);\n                if (token === undefined) continue;\n                const center = token.center();\n                const lcenter = g2l(center);\n                if (gameStore.visionMode === \"bvh\") {\n                    ctx.beginPath();\n                    let lastArcAngle = -1;\n\n                    for (let angle = 0; angle < 2 * Math.PI; angle += (Settings.angleSteps / 2 / 180) * Math.PI) {\n                        const cos = Math.cos(angle);\n                        const sin = Math.sin(angle);\n                        // Check if there is a hit with one of the nearby light blockers.\n                        const lightRay = new Ray(center, new Vector(cos, sin));\n                        const hitResult = gameStore.BV.intersect(lightRay);\n\n                        // We can move on to the next angle if nothing was hit.\n                        if (!hitResult.hit) {\n                            // If an earlier hit caused the aura to leave the arc, we need to go back to the arc\n                            if (lastArcAngle === -1) {\n                                // Draw a line from the last non arc location back to the arc\n                                ctx.lineTo(lcenter.x + maxLength * cos, lcenter.y + maxLength * sin);\n                                // Set the start of a new arc beginning at the current angle\n                                lastArcAngle = angle;\n                            }\n                            continue;\n                        }\n                        // If hit , first finish any ongoing arc, then move to the intersection point\n                        if (lastArcAngle !== -1) {\n                            ctx.arc(lcenter.x, lcenter.y, maxLength, lastArcAngle, angle);\n                            lastArcAngle = -1;\n                        }\n                        ctx.lineTo(g2lx(hitResult.intersect.x), g2ly(hitResult.intersect.y));\n                    }\n\n                    // Finish the final arc.\n                    if (lastArcAngle !== -1) ctx.arc(lcenter.x, lcenter.y, maxLength, lastArcAngle, 2 * Math.PI);\n                    else ctx.closePath();\n                    ctx.fill();\n                } else {\n                    if (true) {\n                        // Add a gradient vision dropoff\n                        const gradient = ctx.createRadialGradient(\n                            lcenter.x,\n                            lcenter.y,\n                            g2lr(gameStore.visionRangeMin),\n                            lcenter.x,\n                            lcenter.y,\n                            g2lr(gameStore.visionRangeMax),\n                        );\n                        gradient.addColorStop(0, \"rgba(0, 0, 0, 1)\");\n                        gradient.addColorStop(1, \"rgba(0, 0, 0, 0)\");\n                        ctx.fillStyle = gradient;\n                    } else {\n                        ctx.fillStyle = \"rgba(0, 0, 0, 1)\";\n                    }\n                    try {\n                        const polygon = computeVisibility(token.center(), \"vision\");\n                        ctx.beginPath();\n                        ctx.moveTo(g2lx(polygon[0][0]), g2ly(polygon[0][1]));\n                        for (const point of polygon) ctx.lineTo(g2lx(point[0]), g2ly(point[1]));\n                        ctx.closePath();\n                        ctx.fill();\n                    } catch {}\n                }\n            }\n\n            // For the players this is done at the beginning of this function.  TODO: why the split up ???\n            // This was done in commit be1e65cff1e7369375fe11cfa1643fab1d11beab.\n            if (gameStore.IS_DM) super.draw(!gameStore.fullFOW);\n\n            ctx.globalCompositeOperation = originalOperation;\n            // console.timeEnd(\"VI\");\n        }\n    }\n}\n","import { socket } from \"@/game/api/socket\";\nimport { ServerShape } from \"@/game/comm/types/shapes\";\nimport { EventBus } from \"@/game/event-bus\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { Shape } from \"@/game/shapes/shape\";\nimport { createShapeFromDict } from \"@/game/shapes/utils\";\nimport { gameStore } from \"@/game/store\";\nimport { g2lx, g2ly } from \"@/game/units\";\n\nexport class Layer {\n    name: string;\n    width: number;\n    height: number;\n    canvas: HTMLCanvasElement;\n    ctx: CanvasRenderingContext2D;\n\n    selectable: boolean = false;\n    playerEditable: boolean = false;\n    isVisionLayer: boolean = false;\n\n    // When set to false, the layer will be redrawn on the next tick\n    valid: boolean = false;\n    // The collection of shapes that this layer contains.\n    // These are ordered on a depth basis.\n    shapes: Shape[] = [];\n\n    // Collection of shapes that are currently selected\n    selection: Shape[] = [];\n\n    // Extra selection highlighting settings\n    selectionColor = \"#CC0000\";\n    selectionWidth = 2;\n\n    constructor(canvas: HTMLCanvasElement, name: string) {\n        this.canvas = canvas;\n        this.name = name;\n        this.width = canvas.width;\n        this.height = canvas.height;\n        this.ctx = canvas.getContext(\"2d\")!;\n    }\n\n    invalidate(skipLightUpdate: boolean): void {\n        this.valid = false;\n        if (!skipLightUpdate) {\n            layerManager.invalidateLight();\n        }\n    }\n\n    addShape(shape: Shape, sync: boolean, temporary?: boolean, invalidate = true): void {\n        if (temporary === undefined) temporary = false;\n        shape.layer = this.name;\n        this.shapes.push(shape);\n        layerManager.UUIDMap.set(shape.uuid, shape);\n        shape.checkVisionSources(invalidate);\n        shape.setMovementBlock(shape.movementObstruction, invalidate);\n        if (shape.ownedBy(gameStore.username) && shape.isToken) gameStore.ownedtokens.push(shape.uuid);\n        if (shape.annotation.length) gameStore.annotations.push(shape.uuid);\n        if (sync) socket.emit(\"Shape.Add\", { shape: shape.asDict(), temporary });\n        if (invalidate) this.invalidate(!sync);\n    }\n\n    setShapes(shapes: ServerShape[]): void {\n        for (const serverShape of shapes) {\n            const shape = createShapeFromDict(serverShape);\n            if (shape === undefined) {\n                console.log(`Shape with unknown type ${serverShape.type_} could not be added`);\n                return;\n            }\n            this.addShape(shape, false, false, false);\n        }\n        this.clearSelection(); // TODO: Fix keeping selection on those items that are not moved.\n        this.invalidate(false);\n    }\n\n    removeShape(shape: Shape, sync: boolean, temporary?: boolean) {\n        if (temporary === undefined) temporary = false;\n        this.shapes.splice(this.shapes.indexOf(shape), 1);\n\n        if (sync) socket.emit(\"Shape.Remove\", { shape: shape.asDict(), temporary });\n        const lsI = gameStore.visionSources.findIndex(ls => ls.shape === shape.uuid);\n        const lbI = gameStore.visionBlockers.findIndex(ls => ls === shape.uuid);\n\n        const mbI = gameStore.movementblockers.findIndex(ls => ls === shape.uuid);\n        const anI = gameStore.annotations.findIndex(ls => ls === shape.uuid);\n        if (lsI >= 0) gameStore.visionSources.splice(lsI, 1);\n        if (lbI >= 0) gameStore.visionBlockers.splice(lbI, 1);\n        if (mbI >= 0) gameStore.movementblockers.splice(mbI, 1);\n        if (anI >= 0) gameStore.annotations.splice(anI, 1);\n\n        const annotationIndex = gameStore.annotations.indexOf(shape.uuid);\n        if (annotationIndex >= 0) gameStore.annotations.splice(annotationIndex, 1);\n\n        const ownedIndex = gameStore.ownedtokens.indexOf(shape.uuid);\n        if (ownedIndex >= 0) gameStore.ownedtokens.splice(ownedIndex, 1);\n\n        layerManager.UUIDMap.delete(shape.uuid);\n\n        const index = this.selection.indexOf(shape);\n        if (index >= 0) this.selection.splice(index, 1);\n        if (lbI >= 0) gameStore.recalculateVision();\n        if (mbI >= 0) gameStore.recalculateMovement();\n        this.invalidate(!sync);\n    }\n\n    clear(): void {\n        this.ctx.clearRect(0, 0, this.width, this.height);\n    }\n\n    clearSelection(): void {\n        this.selection = [];\n        EventBus.$emit(\"SelectionInfo.Shape.Set\", null);\n    }\n\n    draw(doClear?: boolean): void {\n        if (!this.valid) {\n            const ctx = this.ctx;\n            const ogOP = ctx.globalCompositeOperation;\n            doClear = doClear === undefined ? true : doClear;\n\n            if (doClear) this.clear();\n\n            const state = this;\n\n            // We iteratre twice over all shapes\n            // First to draw the auras and a second time to draw the shapes themselves\n            // Otherwise auras from one shape could be overlapping another shape itself.\n\n            this.shapes.forEach(shape => {\n                if (shape.options.has(\"skipDraw\") && shape.options.get(\"skipDraw\")) return;\n                if (layerManager.getLayer() === undefined) return;\n                if (!shape.visibleInCanvas(state.canvas)) return;\n                if (state.name === \"fow\" && shape.visionObstruction && layerManager.getLayer()!.name !== state.name)\n                    return;\n                shape.drawAuras(ctx);\n            });\n            this.shapes.forEach(shape => {\n                if (shape.options.has(\"skipDraw\") && shape.options.get(\"skipDraw\")) return;\n                if (shape.labels.length === 0 && gameStore.filterNoLabel) return;\n                if (\n                    shape.labels.length &&\n                    shape.labels.every(l => gameStore.labelFilters.includes(l.uuid))\n                )\n                    return;\n                if (layerManager.getLayer() === undefined) return;\n                if (!shape.visibleInCanvas(state.canvas)) return;\n                if (state.name === \"fow\" && shape.visionObstruction && layerManager.getLayer()!.name !== state.name)\n                    return;\n                shape.draw(ctx);\n            });\n\n            if (this.selection != null) {\n                ctx.fillStyle = this.selectionColor;\n                ctx.strokeStyle = this.selectionColor;\n                ctx.lineWidth = this.selectionWidth;\n                const z = gameStore.zoomFactor;\n                this.selection.forEach(sel => {\n                    ctx.globalCompositeOperation = sel.globalCompositeOperation;\n                    const bb = sel.getBoundingBox();\n                    // TODO: REFACTOR THIS TO Shape.drawSelection(ctx);\n                    ctx.strokeRect(g2lx(bb.topLeft.x), g2ly(bb.topLeft.y), bb.w * z, bb.h * z);\n\n                    for (const p of sel.points) {\n                        ctx.beginPath();\n                        ctx.arc(g2lx(p[0]), g2ly(p[1]), 3, 0, 2 * Math.PI);\n                        ctx.fill();\n                    }\n                    ctx.beginPath();\n                    ctx.moveTo(g2lx(sel.points[0][0]), g2ly(sel.points[0][1]));\n                    for (let i = 1; i <= sel.points.length; i++) {\n                        const vertex = sel.points[i % sel.points.length];\n                        ctx.lineTo(g2lx(vertex[0]), g2ly(vertex[1]));\n                    }\n                    ctx.stroke();\n                });\n            }\n            ctx.globalCompositeOperation = ogOP;\n            this.valid = true;\n        }\n    }\n\n    moveShapeOrder(shape: Shape, destinationIndex: number, sync: boolean): void {\n        const oldIdx = this.shapes.indexOf(shape);\n        if (oldIdx === destinationIndex) return;\n        this.shapes.splice(oldIdx, 1);\n        this.shapes.splice(destinationIndex, 0, shape);\n        if (sync) socket.emit(\"Shape.Order.Set\", { shape: shape.asDict(), index: destinationIndex });\n        this.invalidate(true);\n    }\n}\n","import { gameStore } from \"@/game/store\";\nimport { l2g } from \"@/game/units\";\nimport { getMouse } from \"@/game/utils\";\n\nexport function scrollZoom(e: WheelEvent) {\n    if (!e.target || !(<HTMLElement>e.target).tagName || (<HTMLElement>e.target).tagName !== \"CANVAS\") return;\n    let delta: number;\n    delta = Math.sign(e.deltaY) * -1;\n    gameStore.updateZoom({ newZoomDisplay: gameStore.zoomDisplay - 0.1 * delta, zoomLocation: l2g(getMouse(e)) });\n}\n","import { render, staticRenderFns } from \"./filter.vue?vue&type=template&id=4c62cd6c&scoped=true&\"\nimport script from \"./filter.vue?vue&type=script&lang=ts&\"\nexport * from \"./filter.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./filter.vue?vue&type=style&index=0&id=4c62cd6c&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4c62cd6c\",\n  null\n  \n)\n\ncomponent.options.__file = \"filter.vue\"\nexport default component.exports","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./menu.vue?vue&type=style&index=0&id=aaf3f05e&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./menu.vue?vue&type=style&index=0&id=aaf3f05e&scoped=true&lang=css&\"","import { GlobalPoint, LocalPoint, Vector } from \"@/game/geom\";\nimport { BoundingRect } from \"@/game/shapes/boundingrect\";\nimport { Shape } from \"@/game/shapes/shape\";\nimport { gameStore } from \"@/game/store\";\nimport { calculateDelta } from \"@/game/ui/tools/utils\";\nimport { g2lx, g2ly, l2g, l2gx, l2gy } from \"@/game/units\";\n\nexport abstract class BaseRect extends Shape {\n    w: number;\n    h: number;\n    constructor(topleft: GlobalPoint, w: number, h: number, fillColour?: string, strokeColour?: string, uuid?: string) {\n        super(topleft, fillColour, strokeColour, uuid);\n        this.w = w;\n        this.h = h;\n    }\n    getBaseDict() {\n        return Object.assign(super.getBaseDict(), {\n            width: this.w,\n            height: this.h,\n        });\n    }\n    getBoundingBox() {\n        return new BoundingRect(this.refPoint, this.w, this.h);\n    }\n\n    get points() {\n        if (this.w === 0 || this.h === 0) return [[this.refPoint.x, this.refPoint.y]];\n        // note to self: topright and botleft are swapped because I'm retarded.\n        const topright = this.refPoint.add(new Vector(0, this.h));\n        const botright = this.refPoint.add(new Vector(this.w, this.h));\n        const botleft = this.refPoint.add(new Vector(this.w, 0));\n        return [\n            [this.refPoint.x, this.refPoint.y],\n            [topright.x, topright.y],\n            [botright.x, botright.y],\n            [botleft.x, botleft.y],\n        ];\n    }\n\n    contains(point: GlobalPoint): boolean {\n        return (\n            this.refPoint.x <= point.x &&\n            this.refPoint.x + this.w >= point.x &&\n            this.refPoint.y <= point.y &&\n            this.refPoint.y + this.h >= point.y\n        );\n    }\n    center(): GlobalPoint;\n    center(centerPoint: GlobalPoint): void;\n    center(centerPoint?: GlobalPoint): GlobalPoint | void {\n        if (centerPoint === undefined) return this.refPoint.add(new Vector(this.w / 2, this.h / 2));\n        this.refPoint = new GlobalPoint(centerPoint.x - this.w / 2, centerPoint.y - this.h / 2);\n    }\n\n    visibleInCanvas(canvas: HTMLCanvasElement): boolean {\n        if (super.visibleInCanvas(canvas)) return true;\n        const coreVisible = !(\n            g2lx(this.refPoint.x) > canvas.width ||\n            g2ly(this.refPoint.y) > canvas.height ||\n            g2lx(this.refPoint.x + this.w) < 0 ||\n            g2ly(this.refPoint.y + this.h) < 0\n        );\n        if (coreVisible) return true;\n        return false;\n    }\n    snapToGrid() {\n        const gs = gameStore.gridSize;\n        const center = this.center();\n        const mx = center.x;\n        const my = center.y;\n\n        let targetX;\n        let targetY;\n\n        if ((this.w / gs) % 2 === 0) {\n            targetX = Math.round(mx / gs) * gs - this.w / 2;\n        } else {\n            targetX = (Math.round((mx + gs / 2) / gs) - 1 / 2) * gs - this.w / 2;\n        }\n        if ((this.h / gs) % 2 === 0) {\n            targetY = Math.round(my / gs) * gs - this.h / 2;\n        } else {\n            targetY = (Math.round((my + gs / 2) / gs) - 1 / 2) * gs - this.h / 2;\n        }\n\n        const delta = calculateDelta(new Vector(targetX - this.refPoint.x, targetY - this.refPoint.y), this);\n        this.refPoint = this.refPoint.add(delta);\n\n        this.invalidate(false);\n    }\n    resizeToGrid() {\n        const gs = gameStore.gridSize;\n        this.refPoint = new GlobalPoint(Math.round(this.refPoint.x / gs) * gs, Math.round(this.refPoint.y / gs) * gs);\n        this.w = Math.max(Math.round(this.w / gs) * gs, gs);\n        this.h = Math.max(Math.round(this.h / gs) * gs, gs);\n        this.invalidate(false);\n    }\n    resize(resizePoint: number, point: LocalPoint) {\n        const z = gameStore.zoomFactor;\n        switch (resizePoint) {\n            case 0: {\n                this.w = g2lx(this.refPoint.x) + this.w * z - point.x;\n                this.h = g2ly(this.refPoint.y) + this.h * z - point.y;\n                this.refPoint = l2g(point);\n                break;\n            }\n            case 1: {\n                this.w = g2lx(this.refPoint.x) + this.w * z - point.x;\n                this.h = point.y - g2ly(this.refPoint.y);\n                this.refPoint = new GlobalPoint(l2gx(point.x), this.refPoint.y);\n                break;\n            }\n            case 2: {\n                this.w = point.x - g2lx(this.refPoint.x);\n                this.h = point.y - g2ly(this.refPoint.y);\n                break;\n            }\n            case 3: {\n                this.w = point.x - g2lx(this.refPoint.x);\n                this.h = g2ly(this.refPoint.y) + this.h * z - point.y;\n                this.refPoint = new GlobalPoint(this.refPoint.x, l2gy(point.y));\n                break;\n            }\n        }\n\n        this.w /= z;\n        this.h /= z;\n\n        if (this.w < 0) {\n            this.refPoint = this.refPoint.add(new Vector(this.w, 0));\n            this.w = Math.abs(this.w);\n        }\n        if (this.h < 0) {\n            this.refPoint = this.refPoint.add(new Vector(0, this.h));\n            this.h = Math.abs(this.h);\n        }\n    }\n}\n","import { render, staticRenderFns } from \"./select.vue?vue&type=template&id=048b3482&\"\nimport script from \"./select.vue?vue&type=script&lang=ts&\"\nexport * from \"./select.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"select.vue\"\nexport default component.exports","import { render, staticRenderFns } from \"./main.vue?vue&type=template&id=61eb1455&scoped=true&\"\nimport script from \"./main.vue?vue&type=script&lang=ts&\"\nexport * from \"./main.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./main.vue?vue&type=style&index=0&id=61eb1455&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"61eb1455\",\n  null\n  \n)\n\ncomponent.options.__file = \"main.vue\"\nexport default component.exports","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./createtoken_modal.vue?vue&type=style&index=0&id=73816298&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./createtoken_modal.vue?vue&type=style&index=0&id=73816298&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"AssetManager\"}},[_c('div',{attrs:{\"id\":\"titlebar\"}},[_vm._v(\"Asset Manager\")]),_c('div',{attrs:{\"id\":\"main\"}},[_c('div',{attrs:{\"id\":\"assets\"},on:{\"dragover\":function($event){$event.preventDefault();return _vm.moveDrag($event)},\"drop\":function($event){$event.preventDefault();$event.stopPropagation();_vm.stopDrag($event, _vm.currentFolder)}}},[_c('div',{attrs:{\"id\":\"breadcrumbs\"}},[_c('div',[_vm._v(\"/\")]),_vm._l((_vm.path),function(dir){return _c('div',{key:dir},[_vm._v(_vm._s(_vm.idMap.get(dir).name))])})],2),_c('div',{attrs:{\"id\":\"actionbar\"}},[_c('input',{attrs:{\"id\":\"files\",\"type\":\"file\",\"multiple\":\"\",\"hidden\":\"\"},on:{\"change\":function($event){_vm.upload()}}}),_c('div',{attrs:{\"title\":\"Create folder\"},on:{\"click\":_vm.createDirectory}},[_c('i',{staticClass:\"fas fa-plus-square\"})]),_c('div',{attrs:{\"title\":\"Upload files\"},on:{\"click\":_vm.prepareUpload}},[_c('i',{staticClass:\"fas fa-upload\"})])]),_c('div',{attrs:{\"id\":\"explorer\"}},[(_vm.path.length)?_c('div',{staticClass:\"inode folder\",on:{\"dblclick\":function($event){_vm.changeDirectory(-1)},\"dragover\":function($event){$event.preventDefault();return _vm.moveDrag($event)},\"dragleave\":function($event){$event.preventDefault();return _vm.leaveDrag($event)},\"drop\":function($event){$event.preventDefault();$event.stopPropagation();_vm.stopDrag($event, _vm.parentFolder)}}},[_c('i',{staticClass:\"fas fa-folder\",staticStyle:{\"font-size\":\"50px\"}}),_c('div',{staticClass:\"title\"},[_vm._v(\"..\")])]):_vm._e(),_vm._l((_vm.folders),function(key){return _c('div',{key:key,staticClass:\"inode folder\",class:{'inode-selected': _vm.selected.includes(key)},attrs:{\"draggable\":\"true\"},on:{\"click\":function($event){_vm.select($event, key)},\"dblclick\":function($event){_vm.changeDirectory(key)},\"contextmenu\":function($event){$event.preventDefault();_vm.$refs.cm.open($event, key)},\"dragstart\":function($event){_vm.startDrag($event, key)},\"dragover\":function($event){$event.preventDefault();return _vm.moveDrag($event)},\"dragleave\":function($event){$event.preventDefault();return _vm.leaveDrag($event)},\"drop\":function($event){$event.preventDefault();$event.stopPropagation();_vm.stopDrag($event, key)}}},[_c('i',{staticClass:\"fas fa-folder\",staticStyle:{\"font-size\":\"50px\"}}),_c('div',{staticClass:\"title\"},[_vm._v(_vm._s(_vm.idMap.get(key).name))])])}),_vm._l((_vm.files),function(file){return _c('div',{key:file,staticClass:\"inode file\",class:{'inode-selected': _vm.selected.includes(file)},attrs:{\"draggable\":\"true\"},on:{\"click\":function($event){_vm.select($event, file)},\"contextmenu\":function($event){$event.preventDefault();_vm.$refs.cm.open($event, file)},\"dragstart\":function($event){_vm.startDrag($event, file)}}},[_c('img',{attrs:{\"src\":'/static/assets/' + _vm.idMap.get(file).file_hash,\"width\":\"50\"}}),_c('div',{staticClass:\"title\"},[_vm._v(_vm._s(_vm.idMap.get(file).name))])])})],2)]),(_vm.firstSelectedFile)?_c('div',{attrs:{\"id\":\"asset-details\"}},[_c('div',{attrs:{\"id\":\"asset-detail-title\"}},[_vm._v(_vm._s(_vm.firstSelectedFile.name))]),_c('img',{attrs:{\"src\":'/static/assets/' + _vm.firstSelectedFile.file_hash}})]):_vm._e()]),_c('AssetContextMenu',{ref:\"cm\"}),_c('Prompt',{ref:\"prompt\"}),_c('ConfirmDialog',{ref:\"confirm\"})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"74f43d04-vue-loader-template\\\"}!../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./manager.vue?vue&type=template&id=5b0def98&\"","\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\n\nimport ContextMenu from \"@/core/components/contextmenu.vue\";\n\nimport { socket } from \"@/game/api/socket\";\nimport { EventBus } from \"@/game/event-bus\";\nimport { gameStore } from \"@/game/store\";\nimport { l2gx, l2gy } from \"@/game/units\";\n\n@Component({\n    components: {\n        ContextMenu,\n    },\n})\nexport default class SelectContext extends Vue {\n    visible = false;\n    x = 0;\n    y = 0;\n\n    get IS_DM(): boolean {\n        return gameStore.IS_DM;\n    }\n\n    open(event: MouseEvent) {\n        this.visible = true;\n        this.x = event.pageX;\n        this.y = event.pageY;\n        this.$nextTick(() => this.$children[0].$el.focus());\n    }\n    close() {\n        this.visible = false;\n    }\n    bringPlayers() {\n        if (!gameStore.IS_DM) return;\n        socket.emit(\"Players.Bring\", { x: l2gx(this.x), y: l2gy(this.y) });\n        this.close();\n    }\n    createToken() {\n        (<any>this.$parent.$parent.$refs.createtokendialog).open(this.x, this.y);\n        this.close();\n    }\n    showInitiative() {\n        EventBus.$emit(\"Initiative.Show\");\n        this.close();\n    }\n}\n","import Axios from \"axios\";\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\nimport { Route } from \"vue-router\";\n\nimport { coreStore } from \"@/core/store\";\n\nComponent.registerHooks([\"beforeRouteEnter\"]);\n\n@Component({})\nexport default class Logout extends Vue {\n    beforeRouteEnter(to: Route, from: Route, next: ({}) => {}) {\n        Axios.post(\"/api/logout\").then(() => {\n            coreStore.setAuthenticated(false);\n            coreStore.setUsername(\"\");\n            next({ path: \"/auth/login\" });\n        });\n    }\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('Modal',{attrs:{\"visible\":_vm.visible,\"mask\":false},on:{\"close\":function($event){_vm.visible = false}},scopedSlots:_vm._u([{key:\"header\",fn:function(m){return _c('div',{staticClass:\"modal-header\",attrs:{\"draggable\":\"true\"},on:{\"dragstart\":m.dragStart,\"dragend\":m.dragEnd}},[_c('div',[_vm._v(\"Label manager\")]),_c('div',{staticClass:\"header-close\",on:{\"click\":function($event){_vm.visible = false}}},[_c('i',{staticClass:\"far fa-window-close\"})])])}}])},[_c('div',{staticClass:\"modal-body\"},[_c('div',{attrs:{\"id\":\"grid\"}},[_c('div',{staticClass:\"header\"},[_c('abbr',{attrs:{\"title\":\"Category\"}},[_vm._v(\"Cat.\")])]),_c('div',{staticClass:\"header name\"},[_vm._v(\"Name\")]),_c('div',{staticClass:\"header\"},[_c('abbr',{attrs:{\"title\":\"Visible\"}},[_vm._v(\"Vis.\")])]),_c('div',{staticClass:\"header\"},[_c('abbr',{attrs:{\"title\":\"Delete\"}},[_vm._v(\"Del.\")])]),_c('div',{staticClass:\"separator spanrow\"}),_vm._l((_vm.labels()),function(ref){\nvar uuid = ref[0];\nvar label = ref[1];\nreturn [_c('div',{key:'row-'+uuid,staticClass:\"row\",on:{\"click\":function($event){_vm.selectLabel(uuid)}}},[(label.name[0] !== ':')?[_c('div',{key:'cat-'+uuid},[_vm._v(_vm._s(label.name.split(\":\")[0]))]),_c('div',{key:'name-'+uuid,staticClass:\"name\"},[_vm._v(_vm._s(label.name.split(\":\").splice(1).join(\":\")))])]:_vm._e(),(label.name[0] === ':')?[_c('div',{key:'cat-'+uuid}),_c('div',{key:'name-'+uuid,staticClass:\"name\"},[_vm._v(_vm._s(label.name.slice(1)))])]:_vm._e(),_c('div',{key:'visible-'+uuid,class:{'lower-opacity': !label.visible},style:({textAlign: 'center'}),on:{\"click\":function($event){$event.stopPropagation();_vm.toggleVisibility(label)}}},[_c('i',{staticClass:\"fas fa-eye\"})]),_c('div',{key:'delete-'+uuid,on:{\"click\":function($event){$event.stopPropagation();_vm.deleteLabel(uuid)}}},[_c('i',{staticClass:\"fas fa-trash-alt\"})])],2)]}),(_vm.labels.length === 0)?[_c('div',{attrs:{\"id\":\"no-labels\"}},[_vm._v(\"No labels exist yet\")])]:_vm._e(),_c('input',{directives:[{name:\"model\",rawName:\"v-model.trim\",value:(_vm.newCategory),expression:\"newCategory\",modifiers:{\"trim\":true}}],attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.newCategory)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.newCategory=$event.target.value.trim()},\"blur\":function($event){_vm.$forceUpdate()}}}),_c('input',{directives:[{name:\"model\",rawName:\"v-model.trim\",value:(_vm.newName),expression:\"newName\",modifiers:{\"trim\":true}}],attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.newName)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.newName=$event.target.value.trim()},\"blur\":function($event){_vm.$forceUpdate()}}}),_c('button',{attrs:{\"id\":\"addLabelButton\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.addLabel($event)}}},[_vm._v(\"Add\")])],2)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"74f43d04-vue-loader-template\\\"}!../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./labels.vue?vue&type=template&id=7893fe7e&scoped=true&\"","import { getModule, Module, Mutation, VuexModule } from \"vuex-module-decorators\";\n\nimport { rootStore } from \"@/store\";\n\nexport interface CoreState {\n    authenticated: boolean;\n    initialized: boolean;\n    username: string;\n}\n\n@Module({ dynamic: true, store: rootStore, name: \"core\" })\nclass CoreStore extends VuexModule implements CoreState {\n    authenticated = false;\n    initialized = false;\n    username = \"\";\n\n    @Mutation\n    setAuthenticated(auth: boolean) {\n        this.authenticated = auth;\n    }\n\n    @Mutation\n    setInitialized(init: boolean) {\n        this.initialized = init;\n    }\n\n    @Mutation\n    setUsername(username: string) {\n        this.username = username;\n    }\n}\n\nexport const coreStore = getModule(CoreStore);\n","import Vue from \"vue\";\n\nimport App from \"@/App.vue\";\nimport { router } from \"@/router\";\nimport { rootStore } from \"@/store\";\n\nVue.config.productionTip = false;\nVue.config.devtools = true;\nVue.config.performance = true;\n\nexport const app = new Vue({\n    router,\n    store: rootStore,\n    render: h => h(App),\n}).$mount(\"#app\");\n\n(<any>window).app = app;\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\n\n@Component({\n    props: [\"visible\", \"left\", \"top\"],\n})\nexport default class ContextMenu extends Vue {}\n","import Axios, { AxiosError, AxiosResponse } from \"axios\";\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\nimport { Route } from \"vue-router\";\n\n@Component({ template: \"\" })\nexport default class Initiative extends Vue {\n    beforeRouteEnter(to: Route, from: Route, next: ({}) => {}) {\n        Axios.post(\"/api/invite\", {\n            code: to.params.code,\n        })\n            .then((response: AxiosResponse) => {\n                next({ path: response.data.sessionUrl });\n            })\n            .catch((error: AxiosError) => {\n                console.error(\"Invitation code could not be redeemed\");\n                next({ path: \"/dashboard\" });\n            });\n    }\n}\n","import { render, staticRenderFns } from \"./prompt.vue?vue&type=template&id=0602c2e6&scoped=true&\"\nimport script from \"./prompt.vue?vue&type=script&lang=ts&\"\nexport * from \"./prompt.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./prompt.vue?vue&type=style&index=0&id=0602c2e6&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0602c2e6\",\n  null\n  \n)\n\ncomponent.options.__file = \"prompt.vue\"\nexport default component.exports","import { GlobalPoint } from \"@/game/geom\";\nimport { gameStore } from \"@/game/store\";\n\nimport { Edge } from \"./cdt\";\nimport { drawPolygon } from \"./draw\";\nimport { PA_CDT } from \"./pa\";\nimport { Point, Sign, Triangle } from \"./tds\";\nimport { ccw, cw, orientation } from \"./triag\";\n\nexport function computeVisibility(q: GlobalPoint, target: \"vision\" | \"movement\", drawt?: boolean): number[][] {\n    if (drawt === undefined) drawt = gameStore.drawTEContour;\n    // console.time(\"CV\");\n    const Q: Point = [q.x, q.y];\n    const rawOutput: number[][] = [];\n    const triangle = PA_CDT[target].locate(Q, null).loc;\n    if (triangle === null) {\n        console.error(\"Triangle not found\");\n        return [];\n    }\n    // triangle.fill();\n    rawOutput.push(triangle.vertices[1]!.point!);\n    if (!triangle.isConstrained(0))\n        expandEdge(Q, triangle.vertices[2]!.point!, triangle.vertices[1]!.point!, triangle, 0, rawOutput);\n    rawOutput.push(triangle.vertices[2]!.point!);\n    if (!triangle.isConstrained(1))\n        expandEdge(Q, triangle.vertices[0]!.point!, triangle.vertices[2]!.point!, triangle, 1, rawOutput);\n    rawOutput.push(triangle.vertices[0]!.point!);\n    if (!triangle.isConstrained(2))\n        expandEdge(Q, triangle.vertices[1]!.point!, triangle.vertices[0]!.point!, triangle, 2, rawOutput);\n    // console.timeEnd(\"CV\");\n\n    if (drawt) drawPolygon(rawOutput, \"red\");\n\n    return rawOutput;\n}\n\nfunction expandEdge(\n    q: Point,\n    left: number[],\n    right: number[],\n    fh: Triangle,\n    index: number,\n    rawOutput: number[][],\n): void {\n    // fh.edge(index).draw();\n    const nfh = fh.neighbours[index]!;\n    // nfh.fill(\"rgba(255, 0, 0, 0.25)\");\n    const nIndex = nfh.indexT(fh);\n    const rIndex = ccw(nIndex);\n    const lIndex = cw(nIndex);\n    const nvh = nfh.vertices[nIndex]!;\n    const rvh = nfh.vertices[lIndex]!;\n    const lvh = nfh.vertices[rIndex]!;\n\n    const re: Edge = [nfh, rIndex];\n    const le: Edge = [nfh, lIndex];\n\n    const ro = orientation(q, right, nvh.point!);\n    const lo = orientation(q, left, nvh.point!);\n\n    // const ctx = layerManager.getLayer(\"draw\")!.ctx;\n    // ctx.beginPath();\n    // ctx.strokeStyle = \"red\";\n    // ctx.lineJoin = \"round\";\n    // ctx.moveTo(g2lx(q.x), g2ly(q.y));\n    // ctx.lineTo(g2lx(left[0]), g2ly(left[1]));\n    // ctx.moveTo(g2lx(q.x), g2ly(q.y));\n    // ctx.lineTo(g2lx(nvh[0]), g2ly(nvh[1]));\n    // ctx.strokeStyle = \"blue\";\n    // ctx.moveTo(g2lx(q.x), g2ly(q.y));\n    // ctx.lineTo(g2lx(right[0]), g2ly(right[1]));\n    // ctx.moveTo(g2lx(q.x), g2ly(q.y));\n    // ctx.lineTo(g2lx(nvh[0]), g2ly(nvh[1]));\n    // ctx.closePath();\n    // ctx.stroke();\n\n    // Right edge is seen if the new vertex is ccw of the right ray\n    if (ro === Sign.COUNTERCLOCKWISE) {\n        if (re[0].isConstrained(re[1])) {\n            // See if current right ray is rvh\n            if (right !== rvh.point!) rawOutput.push(raySegIntersection(q, right, nvh.point!, rvh.point!));\n            if (lo === Sign.COUNTERCLOCKWISE) rawOutput.push(raySegIntersection(q, left, nvh.point!, rvh.point!));\n        } else {\n            if (lo === Sign.COUNTERCLOCKWISE) return expandEdge(q, left, right, nfh, rIndex, rawOutput);\n            else expandEdge(q, nvh.point!, right, nfh, rIndex, rawOutput);\n        }\n    }\n\n    if (ro !== Sign.CLOCKWISE && lo !== Sign.COUNTERCLOCKWISE) {\n        rawOutput.push(nvh.point!);\n    }\n\n    if (lo === Sign.CLOCKWISE) {\n        if (le[0].isConstrained(le[1])) {\n            if (ro === Sign.CLOCKWISE) {\n                rawOutput.push(raySegIntersection(q, right, nvh.point!, lvh.point!));\n            }\n            if (left !== lvh.point!) {\n                rawOutput.push(raySegIntersection(q, left, nvh.point!, lvh.point!));\n            }\n            return;\n        } else {\n            if (ro === Sign.CLOCKWISE) {\n                return expandEdge(q, left, right, nfh, lIndex, rawOutput);\n            } else {\n                return expandEdge(q, left, nvh.point!, nfh, lIndex, rawOutput);\n            }\n        }\n    }\n}\n\nfunction raySegIntersection(q: Point, b: Point, s: Point, t: Point) {\n    const denominator = (t[1] - s[1]) * (b[0] - q[0]) - (t[0] - s[0]) * (b[1] - q[1]);\n    const ua = ((t[0] - s[0]) * (q[1] - s[1]) - (t[1] - s[1]) * (q[0] - s[0])) / denominator;\n    // const ub = ((b[0] - q.x) * (q.y - s[1]) - (b[1] - q.y) * (q.x - s[0])) / denominator;\n    const x = q[0] + ua * (b[0] - q[0]);\n    const y = q[1] + ua * (b[1] - q[1]);\n\n    return [x, y];\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.selected)?_c('div',{staticClass:\"tool-detail\",style:({'--detailRight': _vm.detailRight, '--detailArrow': _vm.detailArrow})},[_c('div',[_vm._v(\"#X\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.xCount),expression:\"xCount\"}],attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.xCount)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.xCount=$event.target.value}}}),_c('div',[_vm._v(\"#Y\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.yCount),expression:\"yCount\"}],attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.yCount)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.yCount=$event.target.value}}})]):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"74f43d04-vue-loader-template\\\"}!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./map.vue?vue&type=template&id=2104f147&\"","import { render, staticRenderFns } from \"./edit_dialog.vue?vue&type=template&id=431ad764&scoped=true&\"\nimport script from \"./edit_dialog.vue?vue&type=script&lang=ts&\"\nexport * from \"./edit_dialog.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./edit_dialog.vue?vue&type=style&index=0&id=431ad764&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"431ad764\",\n  null\n  \n)\n\ncomponent.options.__file = \"edit_dialog.vue\"\nexport default component.exports","export class Settings {\n    static angleSteps = 4;\n    static drawAngleLines = false;\n    static drawFirstLightHit = false;\n    static skipPlayerFOW = false;\n    static skipLightFOW = false;\n\n    static tempFill: string = \"fog\";\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport axios, { AxiosError, AxiosResponse } from \"axios\";\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\n\nimport { coreStore } from \"@/core/store\";\n\n@Component\nexport default class Login extends Vue {\n    username = \"\";\n    password = \"\";\n    error = \"\";\n\n    login() {\n        axios\n            .post(\"/api/login\", {\n                username: this.username,\n                password: this.password,\n            })\n            .then((response: AxiosResponse) => {\n                coreStore.setUsername(this.username);\n                coreStore.setAuthenticated(true);\n                this.$router.push(<string>this.$route.query.redirect || \"/\");\n            })\n            .catch((error: AxiosError) => {\n                if (error.response) this.error = error.response.statusText;\n                else this.error = \"Unknown error occured\";\n            });\n    }\n\n    register() {\n        axios\n            .post(\"/api/register\", {\n                username: this.username,\n                password: this.password,\n            })\n            .then((response: AxiosResponse) => {\n                coreStore.setUsername(this.username);\n                coreStore.setAuthenticated(true);\n                this.$router.push(<string>this.$route.query.redirect || \"/\");\n            })\n            .catch((error: AxiosError) => {\n                if (error.response) this.error = error.response.statusText;\n                else this.error = \"Unknown error occured\";\n            });\n    }\n\n    focusin(event: { target?: { nextElementSibling?: HTMLElement } }) {\n        if (event.target && event.target.nextElementSibling) {\n            const span = event.target.nextElementSibling;\n            span.style.opacity = \"0\";\n        }\n    }\n\n    focusout(event: { target?: { nextElementSibling?: HTMLElement } }) {\n        if (event.target && event.target.nextElementSibling) {\n            const span = event.target.nextElementSibling;\n            span.style.opacity = \"1\";\n        }\n    }\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('modal',{attrs:{\"visible\":_vm.visible},on:{\"close\":function($event){_vm.visible = false}},scopedSlots:_vm._u([{key:\"header\",fn:function(m){return _c('div',{staticClass:\"modal-header\",attrs:{\"draggable\":\"true\"},on:{\"dragstart\":m.dragStart,\"dragend\":m.dragEnd}},[_vm._v(\"Create basic token\")])}}])},[_c('div',{staticClass:\"modal-body\"},[_c('label',{attrs:{\"for\":\"createtokendialog-text\"}},[_vm._v(\"Text\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.text),expression:\"text\"}],attrs:{\"type\":\"text\",\"id\":\"createtokendialog-name\"},domProps:{\"value\":(_vm.text)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.text=$event.target.value}}}),_c('label',[_vm._v(\"Colours\")]),_c('div',{staticClass:\"colours\"},[_c('span',[_vm._v(\"Fill:\")]),_c('color-picker',{attrs:{\"color\":_vm.fillColour},on:{\"update:color\":function($event){_vm.fillColour=$event}}}),_c('span',[_vm._v(\"Border:\")]),_c('color-picker',{attrs:{\"color\":_vm.borderColour},on:{\"update:color\":function($event){_vm.borderColour=$event}}})],1),_c('canvas',{ref:\"canvas\",attrs:{\"width\":\"100px\",\"height\":\"100px\"}})]),_c('div',{staticClass:\"modal-footer\"},[_c('button',{on:{\"click\":_vm.submit}},[_vm._v(\"Submit\")])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"74f43d04-vue-loader-template\\\"}!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./createtoken_modal.vue?vue&type=template&id=73816298&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c(\"div\")}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"74f43d04-vue-loader-template\\\"}!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tool.vue?vue&type=template&id=1e034b42&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('transition',{attrs:{\"name\":\"modal\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.visible),expression:\"visible\"}],staticClass:\"mask\",class:{'modal-mask': _vm.mask, 'dialog-mask': !_vm.mask},on:{\"click\":_vm.close,\"dragover\":function($event){$event.preventDefault();return _vm.dragOver($event)}}},[_c('div',{ref:\"container\",staticClass:\"modal-container\",on:{\"click\":function($event){$event.stopPropagation();}}},[_vm._t(\"header\",null,{dragStart:_vm.dragStart,dragEnd:_vm.dragEnd}),_vm._t(\"default\")],2)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"74f43d04-vue-loader-template\\\"}!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./modal.vue?vue&type=template&id=12ed61ba&scoped=true&\"","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--12-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./game.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--12-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./game.vue?vue&type=script&lang=ts&\"","import Component from \"vue-class-component\";\n\nimport Tool from \"@/game/ui/tools/tool.vue\";\n\nimport { socket } from \"@/game/api/socket\";\nimport { GlobalPoint } from \"@/game/geom\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { Line } from \"@/game/shapes/line\";\nimport { Text } from \"@/game/shapes/text\";\nimport { gameStore } from \"@/game/store\";\nimport { l2g } from \"@/game/units\";\nimport { getMouse } from \"@/game/utils\";\n\n@Component\nexport class RulerTool extends Tool {\n    name = \"Ruler\";\n    active = false;\n    startPoint: GlobalPoint | null = null;\n    ruler: Line | null = null;\n    text: Text | null = null;\n    onMouseDown(event: MouseEvent) {\n        const layer = layerManager.getLayer(\"draw\");\n        if (layer === undefined) {\n            console.log(\"No draw layer!\");\n            return;\n        }\n        this.active = true;\n        this.startPoint = l2g(getMouse(event));\n        this.ruler = new Line(this.startPoint, this.startPoint, 3, gameStore.rulerColour);\n        this.text = new Text(this.startPoint.clone(), \"\", \"bold 20px serif\");\n        this.ruler.addOwner(gameStore.username);\n        this.text.addOwner(gameStore.username);\n        layer.addShape(this.ruler, true, true);\n        layer.addShape(this.text, true, true);\n    }\n    onMouseMove(event: MouseEvent) {\n        if (!this.active || this.ruler === null || this.startPoint === null || this.text === null) return;\n\n        const layer = layerManager.getLayer(\"draw\");\n        if (layer === undefined) {\n            console.log(\"No draw layer!\");\n            return;\n        }\n        const endPoint = l2g(getMouse(event));\n\n        this.ruler.endPoint = endPoint;\n        socket.emit(\"Shape.Update\", { shape: this.ruler!.asDict(), redraw: true, temporary: true });\n\n        const diffsign = Math.sign(endPoint.x - this.startPoint.x) * Math.sign(endPoint.y - this.startPoint.y);\n        const xdiff = Math.abs(endPoint.x - this.startPoint.x);\n        const ydiff = Math.abs(endPoint.y - this.startPoint.y);\n        const label =\n            Math.round((Math.sqrt(xdiff ** 2 + ydiff ** 2) * gameStore.unitSize) / gameStore.gridSize) + \" ft\";\n        const angle = Math.atan2(diffsign * ydiff, xdiff);\n        const xmid = Math.min(this.startPoint.x, endPoint.x) + xdiff / 2;\n        const ymid = Math.min(this.startPoint.y, endPoint.y) + ydiff / 2;\n        this.text.refPoint = new GlobalPoint(xmid, ymid);\n        this.text.text = label;\n        this.text.angle = angle;\n        socket.emit(\"Shape.Update\", { shape: this.text.asDict(), redraw: true, temporary: true });\n        layer.invalidate(true);\n    }\n    onMouseUp(event: MouseEvent) {\n        if (!this.active || this.ruler === null || this.startPoint === null || this.text === null) return;\n\n        const layer = layerManager.getLayer(\"draw\");\n        if (layer === undefined) {\n            console.log(\"No active layer!\");\n            return;\n        }\n        this.active = false;\n\n        layer.removeShape(this.ruler, true, true);\n        layer.removeShape(this.text, true, true);\n        layer.invalidate(true);\n        this.ruler = this.startPoint = this.text = null;\n    }\n}\n","import { render, staticRenderFns } from \"./modal.vue?vue&type=template&id=12ed61ba&scoped=true&\"\nimport script from \"./modal.vue?vue&type=script&lang=ts&\"\nexport * from \"./modal.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./modal.vue?vue&type=style&index=0&id=12ed61ba&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"12ed61ba\",\n  null\n  \n)\n\ncomponent.options.__file = \"modal.vue\"\nexport default component.exports","import { layerManager } from \"@/game/layers/manager\";\nimport { gameStore } from \"@/game/store\";\n\nimport { CDT } from \"./cdt\";\n\nexport let PA_CDT = {\n    vision: new CDT(),\n    movement: new CDT(),\n};\n\nexport function triangulate(target: \"vision\" | \"movement\", partial: boolean = false) {\n    const cdt = new CDT();\n\n    let shapes;\n    if (target === \"vision\") shapes = gameStore.visionBlockers;\n    else shapes = gameStore.movementblockers;\n\n    for (const sh of shapes) {\n        const shape = layerManager.UUIDMap.get(sh)!;\n        if (partial && !shape.visibleInCanvas(layerManager.getLayer()!.canvas)) continue;\n        for (let i = 0; i < shape.points.length; i++) {\n            cdt.insertConstraint(shape.points[i], shape.points[(i + 1) % shape.points.length]);\n        }\n    }\n    // LEFT WALL\n    cdt.insertConstraint([-1e10, -1e10], [-1e10, 1e10]);\n    cdt.insertConstraint([-1e10, 1e10], [-1e11, 1e10]);\n    cdt.insertConstraint([-1e11, 1e10], [-1e11, -1e10]);\n    cdt.insertConstraint([-1e11, -1e10], [-1e10, -1e10]);\n    // TOP WALL\n    cdt.insertConstraint([-1e10, -1e10], [1e10, -1e10]);\n    cdt.insertConstraint([1e10, -1e10], [1e10, -1e11]);\n    cdt.insertConstraint([1e10, -1e11], [-1e10, -1e11]);\n    cdt.insertConstraint([-1e10, -1e11], [-1e10, -1e10]);\n    // RIGHT WALL\n    cdt.insertConstraint([1e10, -1e10], [1e10, 1e10]);\n    cdt.insertConstraint([1e10, 1e10], [1e11, 1e10]);\n    cdt.insertConstraint([1e11, 1e10], [1e11, -1e10]);\n    cdt.insertConstraint([1e11, -1e10], [1e10, -1e10]);\n    // BOT WALL\n    cdt.insertConstraint([-1e10, 1e10], [1e10, 1e10]);\n    cdt.insertConstraint([1e10, 1e10], [1e10, 1e11]);\n    cdt.insertConstraint([1e10, 1e11], [-1e10, 1e11]);\n    cdt.insertConstraint([-1e10, 1e11], [-1e10, 1e10]);\n    PA_CDT[target] = cdt;\n    (<any>window).CDT = PA_CDT;\n}\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./main.vue?vue&type=style&index=0&id=61eb1455&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./main.vue?vue&type=style&index=0&id=61eb1455&scoped=true&lang=css&\"","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\n\nimport { Prop } from \"vue-property-decorator\";\n\nimport ColorPicker from \"@/core/components/colorpicker.vue\";\nimport Modal from \"@/core/components/modals/modal.vue\";\n\nimport { uuidv4 } from \"@/core/utils\";\nimport { socket } from \"@/game/api/socket\";\nimport { EventBus } from \"@/game/event-bus\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { Shape } from \"@/game/shapes/shape\";\nimport { gameStore } from \"@/game/store\";\n\n@Component({\n    components: {\n        Modal,\n        \"color-picker\": ColorPicker,\n    },\n})\nexport default class EditDialog extends Vue {\n    @Prop() shape!: Shape;\n\n    visible = false;\n\n    get owned(): boolean {\n        return this.shape.ownedBy();\n    }\n\n    mounted() {\n        EventBus.$on(\"EditDialog.Open\", (shape: Shape) => {\n            this.shape = shape;\n            this.visible = true;\n        });\n        EventBus.$on(\"EditDialog.AddLabel\", (label: string) => {\n            if (this.visible) {\n                this.shape.labels.push(gameStore.labels.get(gameStore.username)!.get(label)!);\n                this.updateShape(true);\n            }\n        });\n    }\n\n    beforeDestroy() {\n        EventBus.$off(\"EditDialog.Open\");\n        EventBus.$off(\"EditDialog.AddLabel\");\n    }\n\n    updated() {\n        this.addEmpty();\n    }\n\n    addEmpty() {\n        if (this.shape.owners[this.shape.owners.length - 1] !== \"\") this.shape.addOwner(\"\");\n        if (\n            !this.shape.trackers.length ||\n            this.shape.trackers[this.shape.trackers.length - 1].name !== \"\" ||\n            this.shape.trackers[this.shape.trackers.length - 1].value !== 0\n        )\n            this.shape.trackers.push({ uuid: uuidv4(), name: \"\", value: 0, maxvalue: 0, visible: false });\n        if (\n            !this.shape.auras.length ||\n            this.shape.auras[this.shape.auras.length - 1].name !== \"\" ||\n            this.shape.auras[this.shape.auras.length - 1].value !== 0\n        )\n            this.shape.auras.push({\n                uuid: uuidv4(),\n                name: \"\",\n                value: 0,\n                dim: 0,\n                visionSource: false,\n                colour: \"rgba(0,0,0,0)\",\n                visible: false,\n            });\n    }\n    updateShape(redraw: boolean, temporary = false) {\n        if (!this.owned) return;\n        socket.emit(\"Shape.Update\", { shape: this.shape.asDict(), redraw, temporary });\n        if (redraw) layerManager.invalidate();\n        this.addEmpty();\n    }\n    setToken(event: { target: HTMLInputElement }) {\n        if (!this.owned) return;\n        this.shape.setIsToken(event.target.checked);\n        this.updateShape(true);\n    }\n    setVisionBlocker(event: { target: HTMLInputElement }) {\n        if (!this.owned) return;\n        this.shape.checkVisionSources();\n        this.updateShape(true);\n    }\n    setMovementBlocker(event: { target: HTMLInputElement }) {\n        if (!this.owned) return;\n        this.shape.setMovementBlock(event.target.checked);\n        this.updateShape(false);\n    }\n    updateAnnotation(event: { target: HTMLInputElement }) {\n        if (!this.owned) return;\n        const hadAnnotation = this.shape.annotation !== \"\";\n        this.shape.annotation = event.target.value;\n        if (this.shape.annotation !== \"\" && !hadAnnotation) {\n            gameStore.annotations.push(this.shape.uuid);\n            if (layerManager.hasLayer(\"draw\")) layerManager.getLayer(\"draw\")!.invalidate(true);\n        } else if (this.shape.annotation === \"\" && hadAnnotation) {\n            gameStore.annotations.splice(gameStore.annotations.findIndex(an => an === this.shape.uuid));\n            if (layerManager.hasLayer(\"draw\")) layerManager.getLayer(\"draw\")!.invalidate(true);\n        }\n        this.updateShape(false);\n    }\n    updateOwner(event: { target: HTMLInputElement }, oldValue: string) {\n        if (!this.owned) return;\n        this.shape.updateOwner(oldValue, event.target.value);\n        this.updateShape(gameStore.fowLOS);\n    }\n    removeOwner(value: string) {\n        if (!this.owned) return;\n        this.shape.removeOwner(value);\n        this.updateShape(gameStore.fowLOS);\n    }\n    removeTracker(uuid: string) {\n        if (!this.owned) return;\n        this.shape.trackers = this.shape.trackers.filter(tr => tr.uuid !== uuid);\n        this.updateShape(false);\n    }\n    removeAura(uuid: string) {\n        if (!this.owned) return;\n        this.shape.auras = this.shape.auras.filter(au => au.uuid !== uuid);\n        this.shape.checkVisionSources();\n        this.updateShape(true);\n    }\n    updateAuraVisionSource(aura: Aura) {\n        if (!this.owned) return;\n        aura.visionSource = !aura.visionSource;\n        const i = gameStore.visionSources.findIndex(ls => ls.aura === aura.uuid);\n        if (aura.visionSource && i === -1) gameStore.visionSources.push({ shape: this.shape.uuid, aura: aura.uuid });\n        else if (!aura.visionSource && i >= 0) gameStore.visionSources.splice(i, 1);\n        this.updateShape(true);\n    }\n    updateAuraColour(aura: Aura, colour: string) {\n        if (!this.owned) return;\n        const layer = layerManager.getLayer(this.shape.layer);\n        if (layer === undefined) return;\n        layer.invalidate(!aura.visionSource);\n    }\n    openLabelManager() {\n        EventBus.$emit(\"LabelManager.Open\");\n    }\n    removeLabel(uuid: string) {\n        if(!this.owned) return;\n        this.shape.labels = this.shape.labels.filter(l => l.uuid !== uuid);\n        this.updateShape(true);\n    }\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\n\nimport Modal from \"@/core/components/modals/modal.vue\";\n\n@Component({\n    components: {\n        Modal,\n    },\n})\nexport default class ConfirmDialog extends Vue {\n    $refs!: {\n        confirm: HTMLButtonElement;\n    };\n\n    visible = false;\n    yes = \"Yes\";\n    no = \"No\";\n    title = \"\";\n\n    resolve = (ok: boolean) => {};\n    reject = () => {};\n\n    confirm() {\n        this.resolve(true);\n        this.close();\n    }\n    deny() {\n        this.resolve(false);\n        this.close();\n    }\n    close() {\n        this.reject();\n        this.visible = false;\n        this.title = \"\";\n    }\n    open(title: string, yes = \"yes\", no = \"no\"): Promise<boolean> {\n        this.yes = yes;\n        this.no = no;\n        this.title = title;\n\n        this.visible = true;\n        this.$nextTick(() => {\n            this.$refs.confirm.focus();\n        });\n\n        return new Promise((resolve, reject) => {\n            this.resolve = resolve;\n            this.reject = reject;\n        });\n    }\n}\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./initiative.vue?vue&type=style&index=0&id=af4dc61a&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./initiative.vue?vue&type=style&index=0&id=af4dc61a&scoped=true&lang=css&\"","import { render, staticRenderFns } from \"./map.vue?vue&type=template&id=2104f147&\"\nimport script from \"./map.vue?vue&type=script&lang=ts&\"\nexport * from \"./map.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"map.vue\"\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('modal',{attrs:{\"visible\":_vm.visible},on:{\"close\":_vm.close},scopedSlots:_vm._u([{key:\"header\",fn:function(m){return _c('div',{staticClass:\"modal-header\",attrs:{\"draggable\":\"true\"},on:{\"dragstart\":m.dragStart,\"dragend\":m.dragEnd}},[_vm._v(_vm._s(_vm.title))])}}])},[_c('div',{staticClass:\"modal-body\"},[_c('button',{ref:\"confirm\",on:{\"click\":_vm.confirm}},[_vm._v(_vm._s(_vm.yes))]),(!!_vm.no)?_c('button',{on:{\"click\":_vm.deny}},[_vm._v(_vm._s(_vm.no))]):_vm._e()])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"74f43d04-vue-loader-template\\\"}!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./confirm.vue?vue&type=template&id=1883e207&scoped=true&\"","\n\n\n\n\n\n\n\nimport Vue from \"vue\";\n\nimport Component from \"vue-class-component\";\n\nimport ContextMenu from \"@/core/components/contextmenu.vue\";\nimport ConfirmDialog from \"@/core/components/modals/confirm.vue\";\nimport Prompt from \"@/core/components/modals/prompt.vue\";\n\nimport { socket } from \"@/assetManager/socket\";\nimport { assetStore } from \"@/assetManager/store\";\nimport { getComponent, getRef } from \"@/core/utils\";\n\n@Component({\n    components: {\n        ContextMenu,\n    },\n})\nexport default class AssetContextMenu extends Vue {\n    visible = false;\n    left = 0;\n    top = 0;\n    open(event: MouseEvent, inode: number) {\n        if (!assetStore.selected.includes(inode)) getComponent<any>().select(event, inode);\n\n        this.visible = true;\n        this.left = event.pageX;\n        this.top = event.pageY;\n        this.$nextTick(() => {\n            this.$children[0].$el.focus();\n        });\n    }\n    close() {\n        this.visible = false;\n    }\n    rename() {\n        if (assetStore.selected.length !== 1) return;\n        const asset = assetStore.idMap.get(assetStore.selected[0])!;\n\n        getRef<Prompt>(\"prompt\")\n            .prompt(\"New name:\", `Renaming ${asset.name}`)\n            .then(\n                (name: string) => {\n                    socket.emit(\"Asset.Rename\", {\n                        asset: asset.id,\n                        name,\n                    });\n                    asset.name = name;\n                    getComponent().$forceUpdate();\n                },\n                () => {},\n            );\n        this.close();\n    }\n    remove() {\n        if (assetStore.selected.length === 0) return;\n        getRef<ConfirmDialog>(\"confirm\")\n            .open(\"Are you sure you wish to remove this?\")\n            .then(\n                (result: boolean) => {\n                    if (result) {\n                        for (const sel of assetStore.selected) {\n                            socket.emit(\"Asset.Remove\", sel);\n                            if (assetStore.files.includes(sel))\n                                assetStore.files.splice(assetStore.files.indexOf(sel), 1);\n                            else assetStore.folders.splice(assetStore.folders.indexOf(sel), 1);\n                        }\n                        assetStore.clearSelected();\n                    }\n                },\n                () => {},\n            );\n        this.close();\n    }\n}\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./select.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./select.vue?vue&type=script&lang=ts&\"","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\n\nimport Modal from \"@/core/components/modals/modal.vue\";\n\nimport { uuidv4 } from \"@/core/utils\";\nimport { socket } from \"@/game/api/socket\";\nimport { EventBus } from \"@/game/event-bus\";\nimport { gameStore } from \"@/game/store\";\n\n@Component({\n    components: {\n        Modal,\n    },\n})\nexport default class LabelManager extends Vue {\n    visible = false;\n    newCategory = \"\";\n    newName = \"\";\n\n    mounted() {\n        EventBus.$on(\"LabelManager.Open\", () => {\n            this.visible = true;\n            this.newCategory = \"\";\n            this.newName = \"\";\n        });\n    }\n\n    // Cannot be a computed value due to Map reactivity limits\n    labels() {\n        if (gameStore.labels.has(gameStore.username)) return Array.from(gameStore.labels.get(gameStore.username)!);\n        return [];\n    }\n\n    beforeDestroy() {\n        EventBus.$off(\"LabelManager.Open\");\n    }\n\n    selectLabel(label: string) {\n        EventBus.$emit(\"EditDialog.AddLabel\", label);\n        this.visible = false;\n    }\n\n    toggleVisibility(label: Label) {\n        label.visible = !label.visible;\n        socket.emit(\"Label.Visibility.Set\", { uuid: label.uuid, visible: label.visible });\n        // Maps have no reactivity currently\n        this.$forceUpdate();\n    }\n\n    addLabel() {\n        if (this.newName === \"\") return;\n        const label = {\n            uuid: uuidv4(),\n            name: `${this.newCategory}:${this.newName}`,\n            visible: false,\n            user: gameStore.username,\n        };\n        gameStore.addLabel(label);\n        socket.emit(\"Label.Add\", label);\n        this.newCategory = \"\";\n        this.newName = \"\";\n        this.$forceUpdate();\n    }\n\n    deleteLabel(uuid: string) {\n        gameStore.deleteLabel({ uuid, user: gameStore.username });\n        socket.emit(\"Label.Delete\", uuid);\n        // Maps have no reactivity currently\n        this.$forceUpdate();\n    }\n}\n","import { ServerPolygon } from \"../comm/types/shapes\";\nimport { GlobalPoint, LocalPoint } from \"../geom\";\nimport { g2lx, g2ly, g2lz, l2g } from \"../units\";\nimport { getFogColour } from \"../utils\";\nimport { BoundingRect } from \"./boundingrect\";\nimport { Shape } from \"./shape\";\n\nexport class Polygon extends Shape {\n    type = \"polygon\";\n    _vertices: GlobalPoint[] = [];\n\n    constructor(\n        startPoint: GlobalPoint,\n        vertices: GlobalPoint[] = [],\n        fillColour?: string,\n        strokeColour?: string,\n        uuid?: string,\n    ) {\n        super(startPoint, fillColour, strokeColour, uuid);\n        this._vertices = vertices;\n    }\n\n    get refPoint() {\n        return this._refPoint;\n    }\n    set refPoint(point: GlobalPoint) {\n        const delta = point.subtract(this._refPoint);\n        this._refPoint = point;\n        for (let i = 0; i < this._vertices.length; i++) this._vertices[i] = this._vertices[i].add(delta);\n    }\n\n    get vertices() {\n        return [this._refPoint, ...this._vertices];\n    }\n\n    asDict() {\n        return Object.assign(this.getBaseDict(), {\n            vertices: this._vertices.map(p => ({ x: p.x, y: p.y })),\n        });\n    }\n\n    fromDict(data: ServerPolygon) {\n        super.fromDict(data);\n        this._vertices = data.vertices.map(v => new GlobalPoint(v.x, v.y));\n    }\n\n    get points() {\n        return this.vertices.map(point => [point.x, point.y]);\n    }\n\n    draw(ctx: CanvasRenderingContext2D) {\n        super.draw(ctx);\n        ctx.lineCap = \"round\";\n        ctx.lineJoin = \"round\";\n\n        if (this.strokeColour === \"fog\") ctx.strokeStyle = getFogColour();\n        else if (this.vertices.length === 2) ctx.strokeStyle = this.fillColour;\n        else ctx.strokeStyle = this.strokeColour;\n        if (this.fillColour === \"fog\") ctx.fillStyle = getFogColour();\n        else ctx.fillStyle = this.fillColour;\n        ctx.lineWidth = g2lz(2);\n\n        ctx.beginPath();\n        ctx.moveTo(g2lx(this.vertices[0].x), g2ly(this.vertices[0].y));\n        for (let i = 1; i <= this.vertices.length; i++) {\n            const vertex = this.vertices[i % this.vertices.length];\n            ctx.lineTo(g2lx(vertex.x), g2ly(vertex.y));\n        }\n        ctx.fill();\n        ctx.stroke();\n    }\n\n    contains(point: GlobalPoint): boolean {\n        return this.getBoundingBox().contains(point);\n    }\n\n    center(): GlobalPoint;\n    center(centerPoint: GlobalPoint): void;\n    center(centerPoint?: GlobalPoint): GlobalPoint | void {\n        return this.getBoundingBox().center();\n    }\n    visibleInCanvas(canvas: HTMLCanvasElement): boolean {\n        return this.getBoundingBox().visibleInCanvas(canvas);\n    } // TODO\n    snapToGrid(): void {}\n    resizeToGrid(): void {}\n    resize(resizePoint: number, point: LocalPoint): void {\n        if (resizePoint === 0) this._refPoint = l2g(point);\n        else this._vertices[resizePoint - 1] = l2g(point);\n    }\n    getBoundingBox(): BoundingRect {\n        let minx: number = this.refPoint.x;\n        let maxx: number = this.refPoint.x;\n        let miny: number = this.refPoint.y;\n        let maxy: number = this.refPoint.y;\n        for (const p of this._vertices) {\n            if (p.x < minx) minx = p.x;\n            if (p.x > maxx) maxx = p.x;\n            if (p.y < miny) miny = p.y;\n            if (p.y > maxy) maxy = p.y;\n        }\n        return new BoundingRect(new GlobalPoint(minx, miny), maxx - minx, maxy - miny);\n    }\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.selected)?_c('div',{staticClass:\"tool-detail\",style:({'--detailRight': _vm.detailRight, '--detailArrow': _vm.detailArrow})},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.IS_DM),expression:\"IS_DM\"}]},[_vm._v(\"Mode\")]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.IS_DM),expression:\"IS_DM\"}],staticClass:\"selectgroup\"},_vm._l((_vm.modes),function(mode){return _c('div',{key:mode,staticClass:\"option\",class:{'option-selected': _vm.modeSelect === mode},on:{\"click\":function($event){_vm.modeSelect = mode}}},[_vm._v(_vm._s(mode))])})),_c('div',[_vm._v(\"Shape\")]),_c('div',{staticClass:\"selectgroup\"},_vm._l((_vm.shapes),function(shape){return _c('div',{key:shape,staticClass:\"option\",class:{'option-selected': _vm.shapeSelect === shape},on:{\"click\":function($event){_vm.shapeSelect = shape}}},[_c('i',{staticClass:\"fas\",class:'fa-' + shape})])})),_c('div',[_vm._v(\"Colours\")]),_c('div',{staticClass:\"selectgroup\"},[_c('color-picker',{staticClass:\"option\",attrs:{\"color\":_vm.fillColour},on:{\"update:color\":function($event){_vm.fillColour=$event}}}),_c('color-picker',{staticClass:\"option\",attrs:{\"color\":_vm.borderColour},on:{\"update:color\":function($event){_vm.borderColour=$event}}})],1),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.shapeSelect === 'paint-brush'),expression:\"shapeSelect === 'paint-brush'\"}]},[_vm._v(\"Brush size\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.brushSize),expression:\"brushSize\"},{name:\"show\",rawName:\"v-show\",value:(_vm.shapeSelect === 'paint-brush'),expression:\"shapeSelect === 'paint-brush'\"}],staticStyle:{\"max-width\":\"100px\"},attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.brushSize)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.brushSize=$event.target.value}}})]):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"74f43d04-vue-loader-template\\\"}!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./draw.vue?vue&type=template&id=639cd890&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"outer\",on:{\"click\":function($event){if($event.target !== $event.currentTarget){ return null; }return _vm.open($event)}}},[_c('div',{staticClass:\"current-color\",style:(_vm.transparent ? 'background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAIAAADZF8uwAAAAGUlEQVQYV2M4gwH+YwCGIasIUwhT25BVBADtzYNYrHvv4gAAAABJRU5ErkJggg==)' : 'background-color:' + _vm.color),on:{\"click\":function($event){if($event.target !== $event.currentTarget){ return null; }return _vm.open($event)}}}),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.display),expression:\"display\"}],staticClass:\"mask\",on:{\"click\":function($event){if($event.target !== $event.currentTarget){ return null; }return _vm.closePicker($event)}}}),_c('chrome-picker',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.display),expression:\"display\"}],ref:\"chromePicker\",style:({position: 'fixed', left:_vm.left + 'px', top:_vm.top + 'px', 'z-index': 9999}),attrs:{\"value\":_vm.color,\"tabindex\":\"-1\"},on:{\"input\":_vm.updateColor}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"74f43d04-vue-loader-template\\\"}!../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./colorpicker.vue?vue&type=template&id=d32461a4&scoped=true&\"","import { render, staticRenderFns } from \"./manager.vue?vue&type=template&id=5b0def98&\"\nimport script from \"./manager.vue?vue&type=script&lang=ts&\"\nexport * from \"./manager.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./manager.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"manager.vue\"\nexport default component.exports","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tools.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tools.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./tool.vue?vue&type=template&id=1e034b42&\"\nimport script from \"./tool.vue?vue&type=script&lang=ts&\"\nexport * from \"./tool.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./tool.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"tool.vue\"\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('Modal',{attrs:{\"visible\":_vm.visible},on:{\"close\":_vm.close},scopedSlots:_vm._u([{key:\"header\",fn:function(m){return _c('div',{staticClass:\"modal-header\",attrs:{\"draggable\":\"true\"},on:{\"dragstart\":m.dragStart,\"dragend\":m.dragEnd}},[_vm._v(_vm._s(_vm.title))])}}])},[_c('div',{staticClass:\"modal-body\"},[_vm._v(\"\\n    \"+_vm._s(_vm.question)+\"\\n    \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.answer),expression:\"answer\"}],ref:\"answer\",attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.answer)},on:{\"keyup\":function($event){if(!('button' in $event)&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.submit($event)},\"input\":function($event){if($event.target.composing){ return; }_vm.answer=$event.target.value}}})]),_c('div',{staticClass:\"modal-footer\"},[_c('button',{on:{\"click\":_vm.submit}},[_vm._v(\"Submit\")])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"74f43d04-vue-loader-template\\\"}!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./prompt.vue?vue&type=template&id=0602c2e6&scoped=true&\"","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\nimport draggable from \"vuedraggable\";\nVue.component(\"draggable\", draggable);\n\nimport Modal from \"@/core/components/modals/modal.vue\";\n\nimport { uuidv4 } from \"@/core/utils\";\nimport { socket } from \"@/game/api/socket\";\nimport { InitiativeData, InitiativeEffect } from \"@/game/comm/types/general\";\nimport { EventBus } from \"@/game/event-bus\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { gameStore } from \"@/game/store\";\n\n@Component({\n    components: {\n        Modal,\n        draggable,\n    },\n})\nexport default class Initiative extends Vue {\n    visible = false;\n    data: InitiativeData[] = [];\n    currentActor: string | null = null;\n    roundCounter = 0;\n\n    mounted() {\n        EventBus.$on(\"Initiative.Clear\", this.clear);\n        EventBus.$on(\"Initiative.Remove\", (data: string) => this.removeInitiative(data));\n        EventBus.$on(\"Initiative.Show\", () => (this.visible = true));\n\n        socket.on(\"Initiative.Set\", (data: InitiativeData[]) => {\n            this.data = data;\n        });\n        socket.on(\"Initiative.Turn.Set\", (data: string) => this.setTurn(data));\n        socket.on(\"Initiative.Turn.Update\", (data: string) => this.updateTurn(data, false));\n        socket.on(\"Initiative.Round.Update\", (data: number) => this.setRound(data, false));\n        socket.on(\"Initiative.Effect.New\", (data: { actor: string; effect: InitiativeEffect }) => {\n            const actor = this.getActor(data.actor);\n            if (actor === undefined) return;\n            this.createEffect(actor, data.effect, false);\n        });\n        socket.on(\"Initiative.Effect.Update\", (data: { actor: string; effect: InitiativeEffect }) =>\n            this.updateEffect(data.actor, data.effect, false),\n        );\n    }\n\n    beforeDestroy() {\n        EventBus.$off(\"Initiative.Clear\");\n        EventBus.$off(\"Initiative.Remove\");\n        EventBus.$off(\"Initiative.Show\");\n    }\n\n    // Utilities\n    clear() {\n        this.data = [];\n        this.currentActor = null;\n    }\n    getActor(actorId: string) {\n        return this.data.find(a => a.uuid === actorId);\n    }\n    contains(uuid: string) {\n        return this.data.some(d => d.uuid === uuid);\n    }\n    owns(actor: InitiativeData): boolean {\n        if (gameStore.IS_DM) return true;\n        const shape = layerManager.UUIDMap.get(actor.uuid);\n        // Shapes that are unknown to this client are hidden from this client but owned by other clients\n        if (shape === undefined) return false;\n        return shape.owners.includes(gameStore.username);\n    }\n    getDefaultEffect() {\n        return { uuid: uuidv4(), name: \"New Effect\", turns: 10 };\n    }\n    fakeSetData(dataTransfer: DataTransfer) {\n        dataTransfer.setData(\"Hack\", \"\");\n    }\n    syncInitiative(data: InitiativeData | { uuid: string }) {\n        socket.emit(\"Initiative.Update\", data);\n    }\n    // Events\n    addInitiative(data: InitiativeData) {\n        const d = this.data.findIndex(a => a.uuid === data.uuid);\n        if (d >= 0) return;\n        if (data.initiative === undefined) data.initiative = 0;\n        this.syncInitiative(data);\n    }\n    removeInitiative(uuid: string) {\n        const d = this.data.findIndex(a => a.uuid === uuid);\n        if (d < 0 || this.data[d].group) return;\n        this.syncInitiative({ uuid });\n        // Remove highlight\n        const shape = layerManager.UUIDMap.get(uuid);\n        if (shape === undefined) return;\n        if (shape.showHighlight) {\n            shape.showHighlight = false;\n            layerManager.getLayer(shape.layer)!.invalidate(true);\n        }\n    }\n    updateOrder() {\n        if (!gameStore.IS_DM) return;\n        socket.emit(\"Initiative.Set\", this.data.map(d => d.uuid));\n    }\n    updateTurn(actorId: string | null, sync: boolean) {\n        if (!gameStore.IS_DM && sync) return;\n        this.currentActor = actorId;\n        const actor = this.data.find(a => a.uuid === actorId);\n        if (actor === undefined) return;\n        if (actor.effects) {\n            for (let e = actor.effects.length - 1; e >= 0; e--) {\n                if (actor.effects[e].turns <= 0) actor.effects.splice(e, 1);\n                else actor.effects[e].turns--;\n            }\n        }\n        if (sync) socket.emit(\"Initiative.Turn.Update\", actorId);\n    }\n    setRound(round: number, sync: boolean) {\n        if (!gameStore.IS_DM && sync) return;\n        this.roundCounter = round;\n        if (sync) socket.emit(\"Initiative.Round.Update\", round);\n    }\n    setTurn(actorId: string | null) {\n        this.currentActor = actorId;\n    }\n    nextTurn() {\n        if (!gameStore.IS_DM) return;\n        const order = this.data;\n        const next = order[(order.findIndex(a => a.uuid === this.currentActor) + 1) % order.length];\n        if (this.data[0].uuid === next.uuid) this.setRound(this.roundCounter + 1, true);\n        this.updateTurn(next.uuid, true);\n    }\n    toggleHighlight(actor: InitiativeData, show: boolean) {\n        const shape = layerManager.UUIDMap.get(actor.uuid);\n        if (shape === undefined) return;\n        shape.showHighlight = show;\n        layerManager.getLayer(shape.layer)!.invalidate(true);\n    }\n    toggleOption(actor: InitiativeData, option: \"visible\" | \"group\") {\n        if (!this.owns(actor)) return;\n        actor[option] = !actor[option];\n        this.syncInitiative(actor);\n    }\n    createEffect(actor: InitiativeData, effect: InitiativeEffect, sync: boolean) {\n        if (!this.owns(actor)) return;\n        actor.effects.push(effect);\n        if (sync) socket.emit(\"Initiative.Effect.New\", { actor: actor.uuid, effect });\n    }\n    syncEffect(actor: InitiativeData, effect: InitiativeEffect) {\n        if (!this.owns(actor)) return;\n        socket.emit(\"Initiative.Effect.Update\", { actor: actor.uuid, effect });\n    }\n    updateEffect(actorId: string, effect: InitiativeEffect, sync: boolean) {\n        const actor = this.data.find(a => a.uuid === actorId);\n        if (actor === undefined) return;\n        const effectIndex = actor.effects.findIndex(e => e.uuid === effect.uuid);\n        if (effectIndex === undefined) return;\n        actor.effects[effectIndex] = effect;\n        if (sync) this.syncEffect(actor, effect);\n        else this.$forceUpdate();\n    }\n}\n","import { render, staticRenderFns } from \"./selection_info.vue?vue&type=template&id=674cf937&scoped=true&\"\nimport script from \"./selection_info.vue?vue&type=script&lang=ts&\"\nexport * from \"./selection_info.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./selection_info.vue?vue&type=style&index=0&id=674cf937&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"674cf937\",\n  null\n  \n)\n\ncomponent.options.__file = \"selection_info.vue\"\nexport default component.exports","// import Vuex from \"vuex\";\nimport { Action, getModule, Module, Mutation, VuexModule } from \"vuex-module-decorators\";\n\nimport { AssetList } from \"@/core/comm/types\";\nimport { socket } from \"@/game/api/socket\";\nimport { sendClientOptions } from \"@/game/api/utils\";\nimport { Note } from \"@/game/comm/types/general\";\nimport { ServerShape } from \"@/game/comm/types/shapes\";\nimport { GlobalPoint } from \"@/game/geom\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { g2l, l2g } from \"@/game/units\";\nimport { zoomValue } from \"@/game/utils\";\nimport { BoundingVolume } from \"@/game/visibility/bvh/bvh\";\nimport { triangulate } from \"@/game/visibility/te/pa\";\nimport { rootStore } from \"@/store\";\n\nexport interface GameState {\n    boardInitialized: boolean;\n}\n\n@Module({ dynamic: true, store: rootStore, name: \"game\", namespaced: true })\nclass GameStore extends VuexModule implements GameState {\n    // This is a limited view of selectable layers that is used to generate the layer selection UI and ability to switch layers\n    // See the layerManager for proper layer management tools\n    layers: string[] = [];\n    selectedLayerIndex = -1;\n    boardInitialized = false;\n\n    locations: string[] = [];\n\n    assets: AssetList = {};\n\n    notes: Note[] = [];\n\n    IS_DM = false;\n    gridSize = 50;\n    username = \"\";\n    roomName = \"\";\n    roomCreator = \"\";\n    invitationCode = \"\";\n\n    gridColour = \"rgba(0, 0, 0, 1)\";\n    fowColour = \"rgba(0, 0, 0, 1)\";\n    rulerColour = \"rgba(255, 0, 0, 1)\";\n    panX = 0;\n    panY = 0;\n\n    zoomDisplay = 0.5;\n    // zoomFactor = 1;\n\n    unitSize = 5;\n    useGrid = true;\n    fullFOW = false;\n    fowOpacity = 0.3;\n    fowLOS = false;\n    locationName = \"\";\n\n    visionSources: { shape: string; aura: string }[] = [];\n    visionBlockers: string[] = [];\n    annotations: string[] = [];\n    movementblockers: string[] = [];\n    ownedtokens: string[] = [];\n\n    BV = Object.freeze(new BoundingVolume([]));\n\n    visionMode: \"bvh\" | \"triangle\" = \"bvh\";\n    drawTEContour = false;\n    visionRangeMin = 1640;\n    visionRangeMax = 3281;\n\n    clipboard: ServerShape[] = [];\n\n    labels: Map<string, Map<string, Label>> = new Map();\n    filterNoLabel = false;\n    labelFilters: string[] = [];\n\n    showUI = true;\n\n    get selectedLayer() {\n        return this.layers[this.selectedLayerIndex];\n    }\n\n    get zoomFactor() {\n        return zoomValue(this.zoomDisplay);\n    }\n\n    @Mutation\n    setZoomDisplay(zoom: number) {\n        if (zoom === this.zoomDisplay) return;\n        if (zoom < 0) zoom = 0;\n        if (zoom > 1) zoom = 1;\n        this.zoomDisplay = zoom;\n        layerManager.invalidate();\n    }\n\n    @Mutation\n    setVisionMode(data: { mode: \"bvh\" | \"triangle\"; sync: boolean }) {\n        this.visionMode = data.mode;\n        if (data.sync) socket.emit(\"Location.Options.Set\", { vision_mode: data.mode });\n    }\n\n    @Mutation\n    setBoardInitialized(boardInitialized: boolean) {\n        this.boardInitialized = boardInitialized;\n    }\n\n    @Mutation\n    setLabels(labels: Label[]) {\n        for (const label of labels) {\n            if (!this.labels.has(label.user)) this.labels.set(label.user, new Map());\n            this.labels.get(label.user)!.set(label.uuid, label);\n        }\n    }\n\n    @Mutation\n    toggleUnlabeledFilter() {\n        this.filterNoLabel = !this.filterNoLabel;\n    }\n\n    @Mutation\n    addLabel(label: Label) {\n        if (!this.labels.has(label.user)) this.labels.set(label.user, new Map());\n        this.labels.get(label.user)!.set(label.uuid, label);\n    }\n\n    @Mutation\n    setLabelVisibility(data: { user: string; uuid: string; visible: boolean }) {\n        if (!this.labels.has(data.user)) this.labels.set(data.user, new Map());\n        const label = this.labels.get(data.user)!.get(data.uuid);\n        if (label) {\n            label.visible = data.visible;\n        }\n    }\n\n    @Mutation\n    deleteLabel(data: { uuid: string; user: string }) {\n        if (!this.labels.has(data.user)) return;\n        const label = this.labels.get(data.user)!.get(data.uuid);\n        if (!label) return;\n        const updatedLayers: Set<string> = new Set();\n        for (const shape of layerManager.UUIDMap.values()) {\n            const i = shape.labels.indexOf(label);\n            if (i >= 0) {\n                shape.labels.splice(i, 1);\n                updatedLayers.add(shape.layer);\n            }\n        }\n        for (const layer of updatedLayers)\n            layerManager.getLayer(layer)!.invalidate(false);\n        this.labels.get(data.user)!.delete(data.uuid);\n    }\n\n    @Mutation\n    setDM(isDM: boolean) {\n        this.IS_DM = isDM;\n    }\n\n    @Mutation\n    setUsername(username: string) {\n        this.username = username;\n    }\n\n    @Mutation\n    setRoomName(name: string) {\n        this.roomName = name;\n    }\n\n    @Mutation\n    setRoomCreator(name: string) {\n        this.roomCreator = name;\n    }\n\n    @Mutation\n    setInvitationCode(code: string) {\n        this.invitationCode = code;\n    }\n\n    @Mutation\n    addLayer(name: string) {\n        this.layers.push(name);\n        if (this.selectedLayerIndex === -1) this.selectedLayerIndex = this.layers.indexOf(name);\n    }\n\n    @Mutation\n    selectLayer(data: { name: string; sync: boolean }) {\n        const index = this.layers.indexOf(data.name);\n        if (index >= 0) this.selectedLayerIndex = index;\n        if (data.sync) socket.emit(\"Client.ActiveLayer.Set\", data.name);\n    }\n\n    @Mutation\n    newNote(data: { note: Note; sync: boolean }) {\n        this.notes.push(data.note);\n        if (data.sync) socket.emit(\"Note.New\", data.note);\n    }\n\n    @Mutation\n    setAssets(assets: AssetList) {\n        this.assets = assets;\n    }\n\n    @Mutation\n    setLocations(locations: string[]) {\n        this.locations = locations;\n    }\n\n    @Mutation\n    resetLayerInfo() {\n        this.layers = [];\n        this.selectedLayerIndex = -1;\n    }\n\n    @Mutation\n    recalculateVision(partial = false) {\n        if (this.boardInitialized) {\n            if (this.visionMode === \"triangle\") triangulate(\"vision\", partial);\n            else this.BV = Object.freeze(new BoundingVolume(this.visionBlockers));\n        }\n    }\n\n    @Mutation\n    recalculateMovement(partial = false) {\n        if (this.boardInitialized && this.visionMode === \"triangle\") triangulate(\"movement\", partial);\n    }\n\n    @Mutation\n    updateZoom(data: { newZoomDisplay: number; zoomLocation: GlobalPoint }) {\n        if (data.newZoomDisplay === this.zoomDisplay) return;\n        if (data.newZoomDisplay < 0) data.newZoomDisplay = 0;\n        if (data.newZoomDisplay > 1) data.newZoomDisplay = 1;\n        const oldLoc = g2l(data.zoomLocation);\n        this.zoomDisplay = data.newZoomDisplay;\n        const newLoc = l2g(oldLoc);\n        // Change the pan settings to keep the zoomLocation in the same exact location before and after the zoom.\n        const diff = newLoc.subtract(data.zoomLocation);\n        this.panX += diff.x;\n        this.panY += diff.y;\n        layerManager.invalidate();\n        sendClientOptions();\n    }\n\n    @Mutation\n    setGridColour(data: { colour: string; sync: boolean }) {\n        this.gridColour = data.colour;\n        layerManager.getGridLayer()!.drawGrid();\n        if (data.sync) socket.emit(\"Client.Options.Set\", { gridColour: data.colour });\n    }\n\n    @Mutation\n    setFOWColour(data: { colour: string; sync: boolean }) {\n        this.fowColour = data.colour;\n        layerManager.invalidate();\n        if (data.sync) socket.emit(\"Client.Options.Set\", { fowColour: data.colour });\n    }\n\n    @Mutation\n    setRulerColour(data: { colour: string; sync: boolean }) {\n        this.rulerColour = data.colour;\n        if (data.sync) socket.emit(\"Client.Options.Set\", { rulerColour: data.colour });\n    }\n\n    @Mutation\n    setPanX(x: number) {\n        this.panX = x;\n    }\n\n    @Mutation\n    setPanY(y: number) {\n        this.panY = y;\n    }\n\n    @Mutation\n    increasePanX(increase: number) {\n        this.panX += increase;\n    }\n\n    @Mutation\n    increasePanY(increase: number) {\n        this.panY += increase;\n    }\n\n    @Mutation\n    setUnitSize(data: { unitSize: number; sync: boolean }) {\n        if (this.unitSize !== data.unitSize && data.unitSize > 0 && data.unitSize < Infinity) {\n            this.unitSize = data.unitSize;\n            layerManager.invalidate();\n            if (data.sync) socket.emit(\"Location.Options.Set\", { unit_size: data.unitSize });\n        }\n    }\n\n    @Mutation\n    setUseGrid(data: { useGrid: boolean; sync: boolean }) {\n        if (this.useGrid !== data.useGrid) {\n            this.useGrid = data.useGrid;\n            const gridLayer = layerManager.getGridLayer()!;\n            if (data.useGrid) gridLayer.canvas.style.display = \"block\";\n            else gridLayer.canvas.style.display = \"none\";\n            if (data.sync) socket.emit(\"Location.Options.Set\", { use_grid: data.useGrid });\n        }\n    }\n\n    @Mutation\n    setGridSize(data: { gridSize: number; sync: boolean }): void {\n        if (this.gridSize !== data.gridSize && data.gridSize > 0) {\n            this.gridSize = data.gridSize;\n            const gridLayer = layerManager.getGridLayer();\n            if (gridLayer !== undefined) gridLayer.drawGrid();\n            if (data.sync) socket.emit(\"Gridsize.Set\", data.gridSize);\n        }\n    }\n\n    @Mutation\n    setVisionRangeMin(data: { value: number; sync: boolean }): void {\n        this.visionRangeMin = data.value;\n        layerManager.invalidateLight();\n        if (data.sync) socket.emit(\"Location.Options.Set\", { vision_min_range: data.value });\n    }\n\n    @Mutation\n    setVisionRangeMax(data: { value: number; sync: boolean }): void {\n        this.visionRangeMax = Math.max(data.value, this.visionRangeMin);\n        layerManager.invalidateLight();\n        if (data.sync) socket.emit(\"Location.Options.Set\", { vision_max_range: this.visionRangeMax });\n    }\n\n    @Mutation\n    setFullFOW(data: { fullFOW: boolean; sync: boolean }) {\n        if (this.fullFOW !== data.fullFOW) {\n            this.fullFOW = data.fullFOW;\n            layerManager.invalidateLight();\n            if (data.sync) socket.emit(\"Location.Options.Set\", { full_fow: data.fullFOW });\n        }\n    }\n\n    @Mutation\n    setFOWOpacity(data: { fowOpacity: number; sync: boolean }) {\n        this.fowOpacity = data.fowOpacity;\n        layerManager.invalidateLight();\n        if (data.sync) socket.emit(\"Location.Options.Set\", { fow_opacity: data.fowOpacity });\n    }\n\n    @Mutation\n    setLineOfSight(data: { fowLOS: boolean; sync: boolean }) {\n        if (this.fowLOS !== data.fowLOS) {\n            this.fowLOS = data.fowLOS;\n            layerManager.invalidate();\n            if (data.sync) socket.emit(\"Location.Options.Set\", { fow_los: data.fowLOS });\n        }\n    }\n\n    @Mutation\n    setLocationName(name: string) {\n        this.locationName = name;\n    }\n\n    @Mutation\n    updateNote(data: { note: Note; sync: boolean }) {\n        const actualNote = this.notes.find(n => n.uuid === data.note.uuid);\n        if (actualNote === undefined) return;\n        actualNote.title = data.note.title;\n        actualNote.text = data.note.text;\n        if (data.sync) socket.emit(\"Note.Update\", actualNote);\n    }\n\n    @Mutation\n    removeNote(data: { note: Note; sync: boolean }) {\n        this.notes = this.notes.filter(n => n.uuid !== data.note.uuid);\n        if (data.sync) socket.emit(\"Note.Remove\", data.note.uuid);\n    }\n\n    @Mutation\n    toggleUI() {\n        this.showUI = !this.showUI;\n    }\n\n    @Mutation\n    setClipboard(clipboard: ServerShape[]) {\n        this.clipboard = clipboard;\n    }\n\n    @Action\n    clear() {\n        (<any>this.context.state).visionSources = [];\n        (<any>this.context.state).visionBlockers = [];\n        (<any>this.context.state).ownedtokens = [];\n        (<any>this.context.state).annotations = [];\n        (<any>this.context.state).movementblockers = [];\n        (<any>this.context.state).notes = [];\n        this.context.commit(\"recalculateVision\");\n        this.context.commit(\"recalculateMovement\");\n    }\n}\n\nexport const gameStore = getModule(GameStore);\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./colorpicker.vue?vue&type=style&index=0&id=d32461a4&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./colorpicker.vue?vue&type=style&index=0&id=d32461a4&scoped=true&lang=css&\"","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./confirm.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./confirm.vue?vue&type=script&lang=ts&\"","import { ServerAura } from \"@/game/comm/types/shapes\";\n\nexport const aurasFromServer = (auras: ServerAura[]): Aura[] => {\n    const result = [];\n    for (const aura of auras) {\n        result.push({\n            uuid: aura.uuid,\n            visionSource: aura.vision_source,\n            visible: aura.visible,\n            name: aura.name,\n            value: aura.value,\n            dim: aura.dim,\n            colour: aura.colour,\n        });\n    }\n    return result;\n};\n\nexport const aurasToServer = (auras: Aura[]): ServerAura[] => {\n    const result = [];\n    for (const aura of auras) {\n        result.push({\n            uuid: aura.uuid,\n            vision_source: aura.visionSource,\n            visible: aura.visible,\n            name: aura.name,\n            value: aura.value,\n            dim: aura.dim,\n            colour: aura.colour,\n        });\n    }\n    return result;\n};\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{attrs:{\"id\":\"toolselect\"}},[_c('ul',_vm._l((_vm.visibleTools),function(tool){return _c('li',{key:tool,ref:tool + '-selector',refInFor:true,class:{'tool-selected': _vm.currentTool === tool},on:{\"mousedown\":function($event){_vm.currentTool = tool}}},[_c('a',{attrs:{\"href\":\"#\"}},[_vm._v(_vm._s(tool))])])}))]),_c('div',[[_c('select-tool',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.currentTool === 'Select'),expression:\"currentTool === 'Select'\"}],ref:\"selectTool\"}),_c('pan-tool',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.currentTool === 'Pan'),expression:\"currentTool === 'Pan'\"}]}),_c('keep-alive',[_c('draw-tool',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.currentTool === 'Draw'),expression:\"currentTool === 'Draw'\"}]})],1),_c('ruler-tool',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.currentTool === 'Ruler'),expression:\"currentTool === 'Ruler'\"}]}),_c('map-tool',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.currentTool === 'Map'),expression:\"currentTool === 'Map'\"}]}),_c('filter-tool',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.currentTool === 'Filter'),expression:\"currentTool === 'Filter'\"}]}),_c('shape-menu',{ref:\"shapecontext\"}),_c('createtoken-dialog',{ref:\"createtokendialog\"})]],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"74f43d04-vue-loader-template\\\"}!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tools.vue?vue&type=template&id=cf33581e&scoped=true&\"","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--12-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./contextMenu.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--12-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./contextMenu.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./note.vue?vue&type=template&id=7a3669fd&scoped=true&\"\nimport script from \"./note.vue?vue&type=script&lang=ts&\"\nexport * from \"./note.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./note.vue?vue&type=style&index=0&id=7a3669fd&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7a3669fd\",\n  null\n  \n)\n\ncomponent.options.__file = \"note.vue\"\nexport default component.exports","import { render, staticRenderFns } from \"./initiative.vue?vue&type=template&id=af4dc61a&scoped=true&\"\nimport script from \"./initiative.vue?vue&type=script&lang=ts&\"\nexport * from \"./initiative.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./initiative.vue?vue&type=style&index=0&id=af4dc61a&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"af4dc61a\",\n  null\n  \n)\n\ncomponent.options.__file = \"initiative.vue\"\nexport default component.exports","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./edit_dialog.vue?vue&type=style&index=0&id=431ad764&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./edit_dialog.vue?vue&type=style&index=0&id=431ad764&scoped=true&lang=css&\"","import { ServerLayer } from \"@/game/comm/types/general\";\nimport { FOWLayer } from \"@/game/layers/fow\";\nimport { FOWPlayersLayer } from \"@/game/layers/fowplayers\";\nimport { GridLayer } from \"@/game/layers/grid\";\nimport { Layer } from \"@/game/layers/layer\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { gameStore } from \"@/game/store\";\n\nexport function createLayer(layerInfo: ServerLayer) {\n    // Create canvas element\n    const canvas = document.createElement(\"canvas\");\n    canvas.style.zIndex = layerManager.layers.length.toString();\n    canvas.width = window.innerWidth;\n    canvas.height = window.innerHeight;\n\n    // Create the Layer instance\n    let layer: Layer;\n    if (layerInfo.type_ === \"grid\") layer = new GridLayer(canvas, layerInfo.name);\n    else if (layerInfo.type_ === \"fow\") layer = new FOWLayer(canvas, layerInfo.name);\n    else if (layerInfo.type_ === \"fow-players\") layer = new FOWPlayersLayer(canvas, layerInfo.name);\n    else layer = new Layer(canvas, layerInfo.name);\n    layer.selectable = layerInfo.selectable;\n    layer.playerEditable = layerInfo.player_editable;\n    layerManager.addLayer(layer);\n\n    // Add the element to the DOM\n    const layers = document.getElementById(\"layers\");\n    if (layers === null) {\n        console.warn(\"Layers div is missing, this will prevent the main game board from loading!\");\n        return;\n    }\n    if (layerInfo.name !== \"fow-players\") layers.appendChild(canvas);\n\n    if (layerInfo.type_ === \"grid\" && layerInfo.size) gameStore.setGridSize({ gridSize: layerInfo.size, sync: false });\n    // Load layer shapes\n    layer.setShapes(layerInfo.shapes);\n}\n","import { render, staticRenderFns } from \"./labels.vue?vue&type=template&id=7893fe7e&scoped=true&\"\nimport script from \"./labels.vue?vue&type=script&lang=ts&\"\nexport * from \"./labels.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./labels.vue?vue&type=style&index=0&id=7893fe7e&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7893fe7e\",\n  null\n  \n)\n\ncomponent.options.__file = \"labels.vue\"\nexport default component.exports","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./edit_dialog.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./edit_dialog.vue?vue&type=script&lang=ts&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('form',{on:{\"focusin\":_vm.focusin,\"focusout\":_vm.focusout,\"submit\":function($event){$event.preventDefault();return _vm.login($event)}}},[_c('fieldset',[_c('legend',{staticClass:\"legend\"},[_vm._v(\"PlanarAlly\")]),_c('div',{staticClass:\"input\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.username),expression:\"username\"}],attrs:{\"type\":\"text\",\"name\":\"username\",\"placeholder\":\"Username\",\"autocomplete\":\"username\",\"required\":\"\"},domProps:{\"value\":(_vm.username)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.username=$event.target.value}}}),_vm._m(0)]),_c('div',{staticClass:\"input\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.password),expression:\"password\"}],attrs:{\"type\":\"password\",\"name\":\"password\",\"placeholder\":\"Password\",\"autocomplete\":\"current-password\",\"required\":\"\"},domProps:{\"value\":(_vm.password)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.password=$event.target.value}}}),_vm._m(1)]),_c('div',{staticStyle:{\"display\":\"flex\"}},[_c('button',{staticStyle:{\"visibility\":\"hidden\",\"display\":\"none\"},attrs:{\"type\":\"submit\",\"name\":\"login\"}}),_c('button',{staticClass:\"submit\",attrs:{\"type\":\"button\",\"name\":\"register\",\"title\":\"Register\"},on:{\"click\":_vm.register}},[_c('i',{staticClass:\"fas fa-plus\"})]),_vm._m(2)])]),(_vm.error)?_c('div',{staticClass:\"feedback\"},[_c('p',{staticClass:\"error\"},[_c('strong',[_vm._v(\"Error:\")]),_vm._v(\"\\n      \"+_vm._s(_vm.error)+\"\\n    \")])]):_vm._e()])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',[_c('i',{staticClass:\"fas fa-user-circle\"})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',[_c('i',{staticClass:\"fas fa-lock\"})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('button',{staticClass:\"submit\",attrs:{\"type\":\"submit\",\"name\":\"login\",\"title\":\"Login\"}},[_c('i',{staticClass:\"fas fa-arrow-right\"})])}]\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"74f43d04-vue-loader-template\\\"}!../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./login.vue?vue&type=template&id=bc30fc14&scoped=true&\"","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\n\nimport Prompt from \"@/core/components/modals/prompt.vue\";\nimport EditDialog from \"@/game/ui/selection/edit_dialog.vue\";\n\nimport { getRef } from \"@/core/utils\";\nimport { socket } from \"@/game/api/socket\";\nimport { EventBus } from \"@/game/event-bus\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { Shape } from \"@/game/shapes/shape\";\n\n@Component({\n    components: {\n        \"edit-dialog\": EditDialog,\n    },\n})\nexport default class SelectionInfo extends Vue {\n    shape: Shape | null = null;\n\n    mounted() {\n        EventBus.$on(\"SelectionInfo.Shape.Set\", (shape: Shape | null) => {\n            this.shape = shape;\n        });\n    }\n\n    beforeDestroy() {\n        EventBus.$off(\"SelectionInfo.Shape.Set\");\n    }\n\n    openEditDialog() {\n        (<any>this.$refs.editDialog).visible = true;\n    }\n    changeValue(object: Tracker | Aura, redraw: boolean) {\n        if (this.shape === null) return;\n        getRef<Prompt>(\"prompt\")\n            .prompt(`New  ${object.name} value:`, `Updating ${object.name}`)\n            .then(\n                (value: string) => {\n                    if (this.shape === null) return;\n                    const ogValue = object.value;\n                    if (value[0] === \"+\" || value[0] === \"-\") object.value += parseInt(value, 10);\n                    else object.value = parseInt(value, 10);\n                    if (isNaN(object.value)) object.value = ogValue;\n                    socket.emit(\"Shape.Update\", { shape: this.shape.asDict(), redraw, temporary: false });\n                    if (redraw) layerManager.invalidate();\n                },\n                () => {},\n            );\n    }\n}\n","import { AssetList } from \"@/core/comm/types\";\nimport { socket } from \"@/game/api/socket\";\nimport { BoardInfo, Note, ServerClient, ServerLocation } from \"@/game/comm/types/general\";\nimport { ServerShape } from \"@/game/comm/types/shapes\";\nimport { EventBus } from \"@/game/event-bus\";\nimport { GlobalPoint } from \"@/game/geom\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { createLayer } from \"@/game/layers/utils\";\nimport { gameManager } from \"@/game/manager\";\nimport { gameStore } from \"@/game/store\";\nimport { router } from \"@/router\";\nimport { zoomDisplay } from \"../utils\";\n\nsocket.on(\"connect\", () => {\n    console.log(\"Connected\");\n});\nsocket.on(\"disconnect\", () => {\n    console.log(\"Disconnected\");\n});\nsocket.on(\"connect_error\", (error: any) => {\n    console.error(\"Could not connect to game session.\");\n    router.push(\"/dashboard\");\n});\nsocket.on(\"error\", (error: any) => {\n    console.error(\"Game session does not exist.\");\n    router.push(\"/dashboard\");\n});\nsocket.on(\"redirect\", (destination: string) => {\n    console.log(\"redirecting\");\n    router.push(destination);\n});\nsocket.on(\"Room.Info.Set\", (data: { name: string; creator: string; invitationCode: string }) => {\n    gameStore.setRoomName(data.name);\n    gameStore.setRoomCreator(data.creator);\n    gameStore.setInvitationCode(data.invitationCode);\n});\nsocket.on(\"Username.Set\", (username: string) => {\n    gameStore.setUsername(username);\n    gameStore.setDM(username === window.location.pathname.split(\"/\")[2]);\n});\nsocket.on(\"Client.Options.Set\", (options: ServerClient) => {\n    gameStore.setGridColour({ colour: options.grid_colour, sync: false });\n    gameStore.setFOWColour({ colour: options.fow_colour, sync: false });\n    gameStore.setRulerColour({ colour: options.ruler_colour, sync: false });\n    gameStore.setPanX(options.pan_x);\n    gameStore.setPanY(options.pan_y);\n    gameStore.setZoomDisplay(zoomDisplay(options.zoom_factor));\n    // gameStore.setZoomDisplay(0.5);\n    if (options.active_layer) layerManager.selectLayer(options.active_layer, false);\n    if (layerManager.getGridLayer() !== undefined) layerManager.getGridLayer()!.invalidate();\n});\nsocket.on(\"Location.Set\", (data: Partial<ServerLocation>) => {\n    if (data.name !== undefined) gameStore.setLocationName(data.name);\n    if (data.unit_size !== undefined) gameStore.setUnitSize({ unitSize: data.unit_size, sync: false });\n    if (data.use_grid !== undefined) gameStore.setUseGrid({ useGrid: data.use_grid, sync: false });\n    if (data.full_fow !== undefined) gameStore.setFullFOW({ fullFOW: data.full_fow, sync: false });\n    if (data.fow_opacity !== undefined) gameStore.setFOWOpacity({ fowOpacity: data.fow_opacity, sync: false });\n    if (data.fow_los !== undefined) gameStore.setLineOfSight({ fowLOS: data.fow_los, sync: false });\n    if (data.vision_min_range !== undefined) gameStore.setVisionRangeMin({ value: data.vision_min_range, sync: false });\n    if (data.vision_max_range !== undefined) gameStore.setVisionRangeMax({ value: data.vision_max_range, sync: false });\n    if (data.vision_mode !== undefined) {\n        gameStore.setVisionMode({ mode: data.vision_mode, sync: false });\n        gameStore.recalculateVision();\n        gameStore.recalculateMovement();\n    }\n});\nsocket.on(\"Position.Set\", (data: { x: number; y: number }) => {\n    gameManager.setCenterPosition(new GlobalPoint(data.x, data.y));\n});\nsocket.on(\"Notes.Set\", (notes: Note[]) => {\n    for (const note of notes) gameStore.newNote({ note, sync: false });\n});\nsocket.on(\"Asset.List.Set\", (assets: AssetList) => {\n    gameStore.setAssets(assets);\n});\nsocket.on(\"Board.Set\", (locationInfo: BoardInfo) => {\n    gameStore.clear();\n    gameStore.setLocations(locationInfo.locations);\n    document.getElementById(\"layers\")!.innerHTML = \"\";\n    gameStore.resetLayerInfo();\n    layerManager.reset();\n    for (const layer of locationInfo.layers) createLayer(layer);\n    // Force the correct opacity render on other layers.\n    layerManager.selectLayer(layerManager.getLayer()!.name, false);\n    EventBus.$emit(\"Initiative.Clear\");\n    gameStore.recalculateVision();\n    gameStore.recalculateMovement();\n    gameStore.setBoardInitialized(true);\n});\nsocket.on(\"Gridsize.Set\", (gridSize: number) => {\n    gameStore.setGridSize({ gridSize, sync: false });\n});\nsocket.on(\"Shape.Add\", (shape: ServerShape) => {\n    gameManager.addShape(shape);\n});\nsocket.on(\"Shape.Remove\", (shape: ServerShape) => {\n    if (!layerManager.UUIDMap.has(shape.uuid)) {\n        console.log(`Attempted to remove an unknown shape`);\n        return;\n    }\n    if (!layerManager.hasLayer(shape.layer)) {\n        console.log(`Attempted to remove shape from an unknown layer ${shape.layer}`);\n        return;\n    }\n    const layer = layerManager.getLayer(shape.layer)!;\n    layer.removeShape(layerManager.UUIDMap.get(shape.uuid)!, false);\n    layer.invalidate(false);\n});\nsocket.on(\"Shape.Order.Set\", (data: { shape: ServerShape; index: number }) => {\n    if (!layerManager.UUIDMap.has(data.shape.uuid)) {\n        console.log(`Attempted to move the shape order of an unknown shape`);\n        return;\n    }\n    if (!layerManager.hasLayer(data.shape.layer)) {\n        console.log(`Attempted to remove shape from an unknown layer ${data.shape.layer}`);\n        return;\n    }\n    const shape = layerManager.UUIDMap.get(data.shape.uuid)!;\n    const layer = layerManager.getLayer(shape.layer)!;\n    layer.moveShapeOrder(shape, data.index, false);\n});\nsocket.on(\"Shape.Layer.Change\", (data: { uuid: string; layer: string }) => {\n    const shape = layerManager.UUIDMap.get(data.uuid);\n    if (shape === undefined) return;\n    shape.moveLayer(data.layer, false);\n});\nsocket.on(\"Shape.Update\", (data: { shape: ServerShape; redraw: boolean; move: boolean }) => {\n    gameManager.updateShape(data);\n});\nsocket.on(\"Temp.Clear\", (shapes: ServerShape[]) => {\n    shapes.forEach(shape => {\n        if (!layerManager.UUIDMap.has(shape.uuid)) {\n            console.log(\"Attempted to remove an unknown temporary shape\");\n            return;\n        }\n        if (!layerManager.hasLayer(shape.layer)) {\n            console.log(`Attempted to remove shape from an unknown layer ${shape.layer}`);\n            return;\n        }\n        const realShape = layerManager.UUIDMap.get(shape.uuid)!;\n        layerManager.getLayer(shape.layer)!.removeShape(realShape, false);\n    });\n});\nsocket.on(\"Labels.Set\", (labels: Label[]) => {\n    gameStore.setLabels(labels);\n});\nsocket.on(\"Label.Visibility.Set\", (data: { user: string; uuid: string; visible: boolean }) => {\n    gameStore.setLabelVisibility(data);\n});\nsocket.on(\"Label.Add\", (data: Label) => {\n    gameStore.addLabel(data);\n});\nsocket.on(\"Label.Delete\", (data: { user: string; uuid: string }) => {\n    gameStore.deleteLabel(data);\n});\n"],"sourceRoot":""}